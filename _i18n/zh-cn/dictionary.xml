<?xml version="1.0" encoding="UTF-8"?>
<blocks>
  <block id="e59c383143e849c3183725256fd9a923" category="summary">介绍混合云，桌面虚拟化和容器解决方案功能的一系列视频和演示</block>
  <block id="abcf24668eda72956736ac7e0d4363b2" category="doc">混合云，桌面虚拟化和容器视频和演示</block>
  <block id="45ab5f50e70c77a29d7191bf77c1ea15" category="paragraph">请参见以下视频和演示，其中重点介绍了混合云，桌面虚拟化和容器解决方案的特定功能。</block>
  <block id="e96910160219339e97abaf85c4323aaa" category="section-title">NetApp 与 VMware Tanzu 视频系列</block>
  <block id="526cee55e2936716b5481f8a933bd217" category="inline-link-macro">如何在 NetApp 和 VMware Tanzu Basic 中使用 VVOL ，第 1 部分</block>
  <block id="c2240101c5a3a188541ce87c59265df9" category="list-text"><block ref="c2240101c5a3a188541ce87c59265df9" category="inline-link-macro-rx"></block></block>
  <block id="2e933c421900ce4ed68883bfdf00a487" category="inline-link-macro">如何在 NetApp 和 VMware Tanzu Basic 中使用 VVOL ，第 2 部分</block>
  <block id="fe72963b1d3021a9f6d8ae34414601c3" category="list-text"><block ref="fe72963b1d3021a9f6d8ae34414601c3" category="inline-link-macro-rx"></block></block>
  <block id="4c1c4ad5c7782eafb30ad4704dbf4419" category="inline-link-macro">如何在 NetApp 和 VMware Tanzu Basic 中使用 VVOL ，第 3 部分</block>
  <block id="4d066173d8401c92a19650e99dcaae5d" category="list-text"><block ref="4d066173d8401c92a19650e99dcaae5d" category="inline-link-macro-rx"></block></block>
  <block id="c232cfc0ae9806d3ad6d34a51df58229" category="section-title">采用 NetApp 技术的 Red Hat OpenShift</block>
  <block id="3699cb747ce71b2fed488fef61ad35be" category="inline-link-macro">工作负载迁移—采用 NetApp 的 Red Hat OpenShift</block>
  <block id="7108e02acdfbc9a7cf66345731d3ec5e" category="summary">讨论 AI 和现代数据分析解决方案功能的系列博客</block>
  <block id="407c5c4d36c8f404212036765bd911ac" category="doc">AI 和现代数据分析博客</block>
  <block id="2aa8a49ee37d7496cf666062c18c3ad3" category="paragraph">重点介绍 AI 和现代数据分析解决方案特定功能的博客概述。</block>
  <block id="27f80f5fcc8cfd10fa4ffd9f6c3bc57e" category="section-title">人工智能博客系列</block>
  <block id="262b50eaf28adc9b3a78eee7815e591b" category="inline-link-macro">NetApp.com 上的 AI 博客</block>
  <block id="4a38fc10bfca86cdca121c2725dd5654" category="list-text"><block ref="4a38fc10bfca86cdca121c2725dd5654" category="inline-link-macro-rx"></block></block>
  <block id="750b570f7c6cacf7b9f43c1c7919ad96" category="inline-link-macro">有关 thePub 的 AI 博客</block>
  <block id="183754618306c7f8d7df04f981d234f0" category="list-text"><block ref="183754618306c7f8d7df04f981d234f0" category="inline-link-macro-rx"></block></block>
  <block id="d41d8cd98f00b204e9800998ecf8427e" category="summary"></block>
  <block id="1cf7e301510c711b73d2b182b9dcf084" category="doc">用例</block>
  <block id="25ba230ebc20b6cd14fda43ce374a57a" category="paragraph">采用 Cisco ACI 解决方案的 NetApp HCI 可在以下使用情形下为客户提供卓越的价值：</block>
  <block id="06226336ae6b7a3adcd773050b504fda" category="list-text">内部软件定义的计算，存储和网络基础架构</block>
  <block id="f8040defa42cbc3bfc4a5f66c6da563d" category="list-text">大型企业和服务提供商环境</block>
  <block id="f56b16576ff1de654ad41b61f971a30e" category="list-text">私有云（ VMware 和 Red Hat ）</block>
  <block id="c934920469a5afbf36a307bfa09e09a3" category="list-text">最终用户计算和虚拟桌面基础架构</block>
  <block id="cc99c79383c64c3bd393f8f0181908c2" category="list-text">混合工作负载和混合存储环境</block>
  <block id="ad54e6f7d665098e981d7e41732ce4c2" category="inline-link-macro">接下来：架构</block>
  <block id="623fdb4fb110c747c95e31020d0c96fa" category="paragraph"><block ref="623fdb4fb110c747c95e31020d0c96fa" category="inline-link-macro-rx"></block></block>
  <block id="679ed1e8acb1cc0390f1b1e668e1447e" category="doc">为 RHP-H 主机启用隔离：采用 RHV 的 NetApp HCI</block>
  <block id="eba1e6e5aa3cd545496eac5a28908bf9" category="paragraph">隔离是一个过程，通过该过程， RHV Manager 可以通过自动关闭无响应虚拟机管理程序主机来为环境中的虚拟机提供高可用性。为此，它会向隔离代理发送命令，如果使用的是 NetApp HCI ，则可以通过计算节点上的 IPMI 带外管理界面来执行此操作，并重新启动主机。此操作可解除无响应虚拟机管理程序节点在 VM 磁盘上的锁定，并允许在集群中的另一个节点上重新启动这些虚拟子系统，而不会造成数据损坏。主机完成启动过程后，它会自动尝试重新加入关闭之前所在的集群。如果成功，则再次允许托管 VM 。</block>
  <block id="801270df991365c4ca297f800534b40f" category="paragraph">要启用隔离，每个主机都必须启用电源管理；这可以通过突出显示主机并单击右上角的编辑按钮来实现，也可以通过右键单击主机并选择编辑来实现。</block>
  <block id="341d84aa26cb4521474864e04ea2a63b" category="inline-image-macro">错误：缺少图形映像</block>
  <block id="d6d81317270c1a9adcb6ebfc837e749c" category="paragraph"><block ref="d6d81317270c1a9adcb6ebfc837e749c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e34d4b527245ec63f326f81498287d5b" category="paragraph">启用电源管理后，下一步需要配置隔离代理。单击 Add Fence Agent 旁边的加号（ + ），此时将弹出一个新窗口，必须填写 NetApp HCI 计算节点上 IPMI 连接的信息。连接类型为 IPMLAN ，代理需要 IP 地址，用户名和密码才能登录控制台。提供此信息后，您可以单击 test 以验证配置。如果配置正确，则应报告节点的当前电源状态。</block>
  <block id="5d21ae65b85cf3ecc8ed2227475f67fb" category="paragraph"><block ref="5d21ae65b85cf3ecc8ed2227475f67fb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="91800c7f98912ae5a8a02e3b76c7d0f6" category="paragraph">启用隔离后，可以将 RHV 环境配置为在其中一个虚拟机管理程序节点无响应时支持高可用性部署。</block>
  <block id="27ffb50c7dc98450fcff5c68da1e0b09" category="inline-link-macro">接下来：最佳实践—为 Red Hat 虚拟化优化内存</block>
  <block id="03fd058106d8b72d26327b094ceaa80e" category="paragraph"><block ref="03fd058106d8b72d26327b094ceaa80e" category="inline-link-macro-rx"></block></block>
  <block id="57e800a6874279e7f3889db398444370" category="summary">TR-4857</block>
  <block id="8d1909fa700451cbe33ff9717e5581cb" category="doc">VMware vSphere ：采用 Cisco ACI 的 NetApp HCI</block>
  <block id="6c92285fa6d3e827b198d120ea3ac674" category="inline-link">此处</block>
  <block id="a3b2d5c52dcd1bcf36120490cb24c59f" category="paragraph">VMware vSphere 是行业领先的虚拟化平台，可通过它构建一个具有故障恢复能力的可靠虚拟基础架构。vSphere 包含虚拟化，管理和接口层。VMware vSphere 的两个核心组件是 ESXi 服务器和 vCenter Server 。VMware ESXi 是安装在物理机上的虚拟机管理程序软件，可用于托管 VM 和虚拟设备。vCenter Server 是一项服务，用于管理连接到网络和池主机资源的多个 ESXi 主机。有关 VMware vSphere 的详细信息，请参见相关文档<block ref="d776738cabca7f630cd58b129a2f04f3" category="inline-link-rx"></block>。</block>
  <block id="24f47cdbe9ddba774a7cc53e51d9032e" category="section-title">工作流</block>
  <block id="8570a563635860700cc31699a8752950" category="paragraph">以下工作流用于启动虚拟环境。其中每个步骤可能涉及多个单独的任务。</block>
  <block id="55876228853abf632dec9346a4f372ec" category="inline-link">文档。</block>
  <block id="84d4af5c5376e34c07c74b897ab1801f" category="list-text">在 UCS C 系列服务器上以 ACI 模式安装和配置 Nexus 9000 交换机以及 APIC 软件。请参见安装和升级<block ref="7af87e5c10423d586c8c291b8b4eac1a" category="inline-link-rx"></block> 了解详细步骤。</block>
  <block id="e15ccd362266046f62cdf2605b08a111" category="list-text">请参阅配置和设置 ACI 网络结构<block ref="b3d26913c6ef9fe3845b37654e7c2e41" category="inline-link-rx"></block>。</block>
  <block id="10ca0075b6110f22f4c94e1436de3ec9" category="list-text">配置 NetApp HCI 节点所需的租户，应用程序配置文件，网桥域和 EPG 。NetApp 建议使用一个 BD 对一个 EPG 框架，但 iSCSI 除外。请参见文档<block ref="1b6ef5edc1ae5fbbe53b2f8a856e812e" category="inline-link-rx"></block> 有关详细信息：所需的最小 EPG 集包括带内管理， iSCSI ， iSCSI-A ， iSCSI-B ， VM 移动， VM 数据网络和原生。</block>
  <block id="f0dd4223a37e18288612ae82824a4aef" category="admonition">iSCSI 多路径需要两个 iSCSI EPG ： iSCSI-A 和 iSCSI-B ，每个 EPG 都有一个活动上行链路。</block>
  <block id="93c1dbbd4390570c3ba0a6603a2c9ce0" category="admonition">NetApp mNode 要求 iSCSI EPG 同时启用两个上行链路。</block>
  <block id="d1224ec74ab9ac315e344865d8a68131" category="inline-link">配置指南</block>
  <block id="5a8495c4b0a592ce2ca205b3b0a8cf8c" category="list-text">根据要求创建 VLAN 池，物理域和 AEP 。为各个端口创建交换机和接口配置文件。然后连接物理域并配置指向 EPG 的静态路径。请参见<block ref="ff84e64a26c6cdcc0cf734885975bba9" category="inline-link-rx"></block> 有关详细信息：</block>
  <block id="fbd9f9327e615e0f44c6fe21d48a6e66" category="paragraph"><block ref="fbd9f9327e615e0f44c6fe21d48a6e66" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9ae2ac2ac60407f36d61f862399a704a" category="paragraph"><block ref="9ae2ac2ac60407f36d61f862399a704a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ebd604519ae880b4481fa966030a86ea" category="admonition">对于连接到 NetApp HCI 计算节点的接口，使用访问端口策略组；对于连接到 NetApp HCI 存储节点的接口，使用 vPC 策略组。</block>
  <block id="ad8c552316f5741a05ebed4851bebc7b" category="list-text">创建和分配合同，以便在工作负载之间进行严格控制的访问。有关配置合同的详细信息，请参见指南<block ref="4ccd4dc326dc68252b85019361f2b7a5" category="inline-link-rx"></block>。</block>
  <block id="9c47a213311911c0334417506858d557" category="inline-link">部署指南</block>
  <block id="9eacad522f46bcd1df88230b605818d4" category="list-text">使用 NDE 安装和配置 NetApp HCI 。NDE 会配置所有必需的参数，包括用于网络连接的 VDS 端口组，同时还会安装 mNode VM 。请参见<block ref="6faada5b9c02eeb586265358cac115b5" category="inline-link-rx"></block> 有关详细信息 ...</block>
  <block id="67f7e2e1a1666802ceff9411eca10e1f" category="list-text">虽然 Cisco ACI 与 VMware VDS 的 VMM 集成是可选的，但使用 VMM 集成功能是最佳实践。如果不使用 VMM 集成，则可以使用 NDE 安装的 VDS 通过 Cisco ACI 上的物理域连接进行网络连接。</block>
  <block id="d1760613f6d1c629176cef0d568cbd7a" category="list-text">如果您使用的是 VMM 集成，则安装了 NDE 的 VDS 无法由 ACI 完全管理，并且可以添加为只读 VMM 域。为了避免这种情况并高效利用 Cisco ACI 的 VMM 网络功能，请使用新的 VMware vSphere 分布式交换机（ VDS ）和显式动态 VLAN 池在 ACI 中创建一个新的 VMware VMM 域。创建的 VMM 域可以与任何受支持的虚拟交换机集成。</block>
  <block id="b6c46acd082efa2102e8d75612465399" category="list-text">* 与 VDS 集成。 * 如果要将 ACI 与 VDS 集成，请将虚拟交换机类型选择为 VMware 分布式交换机。请考虑下表中记录的配置最佳实践。请参见<block ref="dbf29c1ce529489b4249e2a1a10db0ee" category="inline-link-rx"></block> 有关详细信息：</block>
  <block id="cbdba3b5ba1749f60757523cac4501b4" category="paragraph"><block ref="cbdba3b5ba1749f60757523cac4501b4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7917c6b5add6fd94b4b84af4d931004a" category="inline-link">安装指南</block>
  <block id="5cc2e59497c143b149afeb81230c507d" category="list-text">* 与 Cisco Ave.* 如果要将 Cisco Ave 与 Cisco ACI 集成，请将虚拟交换机类型选择为 Cisco Ave 。Cisco Ave 需要一个类型为 Internal 的唯一 VLAN 池，以便在内部和外部端口组之间进行通信。请遵循此表中记录的配置最佳实践。请参见<block ref="6c9fe7fc9ebfa3c142190860ebfaa1e3" category="inline-link-rx"></block> 安装和配置 Cisco Ave.</block>
  <block id="f570aa2df3f646a0f75fd45cb64809a8" category="paragraph"><block ref="f570aa2df3f646a0f75fd45cb64809a8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="279b83959c47a7a2dff4bbdb09992fde" category="paragraph"><block ref="279b83959c47a7a2dff4bbdb09992fde" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a9252bfea580e24f0b845cbaf2991701" category="list-text">使用预配置解析即时性将 VMM 域附加到 EPG 。然后，将所有 vmnic ， VMkernel 端口和 VNIC 从 NDE 创建的 VDS 迁移到 ACI 创建的 VDS 或 Ave 等。为 iSCSI-A 和 iSCSI-B 配置上行链路故障转移和绑定策略，使每个上行链路都有一个活动上行链路。现在， VM 可以将其 vmnic 连接到 ACI 创建的端口组以访问网络资源。由 Cisco ACI 管理的 VDS 上的端口组的格式为 ` &lt;tenant-name&gt;&gt;&lt;application-profile-name&gt;&gt;&lt;EPG-name&gt;` 。</block>
  <block id="8bcd935a63a45c66e333ffe7e1294ce6" category="admonition">要确保在 VMM 控制器连接到虚拟交换机之前将端口策略下载到叶交换机，需要使用预配置解析即时性。</block>
  <block id="88bb86a006f4393d3e4098e806b9213b" category="paragraph"><block ref="88bb86a006f4393d3e4098e806b9213b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="42d55888f62a41f2d5ef8d352057df59" category="paragraph"><block ref="42d55888f62a41f2d5ef8d352057df59" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ab6a36c79ed93ec8f7270d78b85af6f8" category="list-text">如果要使用微分段，请创建附加到右侧 BD 的微分段（ uSeg ） EPG 。在 VMware vSphere 中创建属性并将其附加到所需的虚拟机。确保 VMM 域已启用 " 启用标记收集 " 。使用相应属性配置 uSeg EPG ，并将 VMM 域附加到该域。这样可以更精细地控制端点 VM 上的通信。</block>
  <block id="99724b35c404f19dc0929ed7a5dad2a6" category="paragraph"><block ref="99724b35c404f19dc0929ed7a5dad2a6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="48419580edcfa17b86571e6497bf5d14" category="paragraph">此解决方案中基于 NetApp HCI 的 VMware vSphere 的网络功能可通过 VMware VDS 或 Cisco Ave 提供。</block>
  <block id="ec80ec391d989e4398d15d9b4d8e6054" category="section-title">VMware VDS</block>
  <block id="fbaa359097b01355ebbf766c4b1bddb7" category="inline-link">VDS 文档</block>
  <block id="678391a65a4d17915330c0e29836e1bd" category="paragraph">VMware vSphere 分布式交换机（ VDS ）是一种连接到集群或一组集群中多个 ESXi 主机的虚拟交换机，允许虚拟机在多个主机之间迁移时保持一致的网络配置。VDS 还可集中管理 vSphere 环境中的网络配置。有关详细信息，请参见<block ref="667589170faed253e826675280c2f97c" category="inline-link-rx"></block>。</block>
  <block id="5ca9c14228eac99179ef493ada8e2ee8" category="paragraph"><block ref="5ca9c14228eac99179ef493ada8e2ee8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d5a695aab7f5fb62a112d43d0e84d606" category="paragraph">下表概括了配置 Cisco ACI 并将其与 VMware VDS 集成所需的参数和最佳实践。</block>
  <block id="be8545ae7ab0276e15898aae7acfbd7a" category="cell">资源</block>
  <block id="65587ae93756f796a89054d63f65e112" category="cell">配置注意事项</block>
  <block id="cd47dd01745339787e4c7300389401f2" category="cell">最佳实践</block>
  <block id="3ef72e3f2da4331b34dc78d9e2c562fe" category="cell">端点组</block>
  <block id="5f2b02157a4ad835a62441cf208d1262" category="list-text">原生 VLAN 使用单独的 EPG</block>
  <block id="017365a117c330df2a4517633ff67ef2" category="list-text">在原生 VLAN EPG 中，将接口静态绑定到 HCI 存储和计算节点使用 802.1p 模式。要使节点发现运行 NDE ，必须执行此操作。</block>
  <block id="d9aa821719ba5bcca27d24f0b4e3d084" category="list-text">使用一个通用的 BD 为 iSCSI ， iSCSI-A 和 iSCSI-B 分离 EPG</block>
  <block id="ab3525106077078f2e8825ec16e28dde" category="list-text">iSCSI-A 和 iSCSI-B 用于 iSCSI 多路径，并用于 ESXi 主机上的 VMkernel 端口</block>
  <block id="25b425699f21fbe857e28e6eef484328" category="list-text">运行 NDE 之前要附加到 iSCSI EPG 的物理域</block>
  <block id="4606705ac1c056362a07be285bb3e0cf" category="list-text">要连接到 iSCSI ， iSCSI-A 和 iSCSI-B EPG 的 VMM 域</block>
  <block id="cde6dc77c099f0a911d31b7d7c2b16ad" category="list-text">EPG 之间的合同需要明确定义。仅允许所需端口进行通信。</block>
  <block id="40c72303cb4f4cd685c091a83339f787" category="list-text">使用唯一的原生 VLAN 进行 NDE 节点发现</block>
  <block id="4db11448c7d27c71589f2051af1f5cb1" category="list-text">对于与连接到 VMkernel 端口的端口组对应的 EPG ，要附加 VMM 域并进行预配置以立即解决问题</block>
  <block id="dd07d04ef0dc94aa42826a025d178737" category="cell">接口策略</block>
  <block id="831802bb2664e0a512cb0fada2b79e59" category="list-text">所有 ESXi 主机的通用叶访问端口策略组</block>
  <block id="89cda0de96b0f8cf961a0c9e5613f408" category="list-text">每个 NetApp HCI 存储节点一个 vPC 策略组</block>
  <block id="8982f8ff33feec693d0118bbb942257a" category="list-text">已启用 LLDP ， CDP 已禁用</block>
  <block id="dbe60c4e4e1459189f4d1cfe47f0461a" category="list-text">在启用动态分配的情况下，为 VMM 域单独配置 VLAN 池</block>
  <block id="1c741cef23dfe78263e71ad80d7d2c76" category="list-text">建议对指向 NetApp HCI 存储节点的接口使用具有 LACP 活动端口通道策略的 vPC</block>
  <block id="2400e3434b2be7e6b79d138f8ce9cfe7" category="list-text">建议对计算节点使用单个接口，而不使用 LACP 。</block>
  <block id="4ca29530e2211e94791ff2dd360a0ec4" category="cell">VMM 集成</block>
  <block id="252f5085f6aee8ea6fe518980533ba05" category="list-text">本地切换首选项</block>
  <block id="319793a3aa2e0c5d20607cc9bf98bd99" category="list-text">访问模式为读写。</block>
  <block id="962e71d9282754a8e271363fc5bbe8e9" category="list-text">适用于 vSwitch 策略的 mac-Ping-physical-nic-Load</block>
  <block id="2407801d59ada4276f345be974921b72" category="list-text">发现策略的 LLDP</block>
  <block id="4d383f2f07749f72b3bc0c95681cf1d6" category="list-text">如果使用微分段，则启用标记收集</block>
  <block id="03dda405240162c0264785dc7e3fa7d3" category="cell">VDS</block>
  <block id="a3c5d13be1ab5465d45580558dd08652" category="list-text">iSCSI 端口组的两个上行链路均处于活动状态</block>
  <block id="3edb0b099880ae287a9e7d4705d31bf3" category="list-text">iSCSI A 和 iSCSI B 各一个上行链路</block>
  <block id="532109d45e0396ffda8f88b3616b54b5" category="list-text">将所有端口组的负载平衡方法设置为 ‘根据物理 NIC 负载路由 '</block>
  <block id="a6cfe700fdf68ec926593e9975e5fa38" category="list-text">iSCSI VMkernel 端口迁移一次执行一次，从 NDE 部署的 VDS 迁移到 ACI 集成的 VDS</block>
  <block id="ba7bccb1637e09b058196c790db66e04" category="cell">轻松扩展</block>
  <block id="69df2096cc041a135150cbcfa3e8dbeb" category="list-text">通过为要添加的 ESXi 主机附加相同的叶访问端口策略组来运行 NDE 扩展</block>
  <block id="28f47c6add42a0c3f48e512cf8a37810" category="list-text">要成功扩展 NDE ，应将各个接口（对于 ESXi 主机）和 vPC （对于存储节点）连接到原生，带内管理， iSCSI ， VM Motion EPG</block>
  <block id="e5d8cc21e88b7af184c16ccaae5fca81" category="admonition">对于流量负载平衡，可在 Cisco ACI 上使用带有 vPC 的端口通道，并在处于活动模式的 LACP 的 VDS 上使用 LAG 。但是，与 iSCSI 多路径相比，使用 LACP 可能会影响存储性能。</block>
  <block id="ee9afb4729986864cd5be9cf78b41e43" category="section-title">Cisco AVE</block>
  <block id="1e0ccd0f2dbb30a2080881dde827f943" category="paragraph">Cisco ACI Virtual Edge （ Ave ）是 Cisco 提供的一款虚拟交换机产品，可将 Cisco ACI 策略模型扩展到虚拟基础架构。它是一种独立于虚拟机管理程序的分布式网络服务，位于虚拟机管理程序的原生虚拟交换机之上。它利用使用基于 VM 的解决方案的底层虚拟交换机，提供对虚拟环境的网络可见性。有关 Cisco Ave 的详细信息，请参见<block ref="c68b4ef39d3fae1b6bc92826ff3517d9" category="inline-link-rx"></block>。下图显示了 ESXi 主机上 Cisco Ave 的内部网络（已测试）。</block>
  <block id="3b96697f68321b22ed4792be25d7980b" category="paragraph"><block ref="3b96697f68321b22ed4792be25d7980b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e5384a71756b5aa61ace48449c78e42b" category="paragraph">下表列出了在 VMware ESXi 上配置 Cisco ACI 并将其与 Cisco Ave 集成的必要参数和最佳实践。Cisco Ave 当前仅支持 VMware vSphere 。</block>
  <block id="79bec08a877807f238941355d6aa33da" category="cell">端点组</block>
  <block id="55ce969c0dda18f1eac70291bcdd280d" category="list-text">在原生 VLAN EPG 中，将接口静态绑定到 HCI 存储和计算节点使用 802.1p 模式。要使节点发现运行 NDE ，必须执行此操作。</block>
  <block id="5f14727a8c61f504b1c923c9885cf120" category="list-text">使用一个通用的 BD 为 iSCSI ， iSCSI-A 和 iSCSI-B 分离 EPG</block>
  <block id="7a958a4f86e2fc33afab8d670e36235c" category="list-text">VMM 域连接到 iSCSI ， iSCSI-A 和 iSCSI-B EPG</block>
  <block id="68efef77a1b4c37c64917ac5abbeccd1" category="list-text">对于与要连接到主机 VMkernel 适配器的端口组对应的原生，请在 VMM 域中使用 交换模式</block>
  <block id="ddc274fa505cbee5f4ad41ec0e81b698" category="list-text">对于与传输用户 VM 流量的端口组对应的 EPG ，请在 VMM 域中使用平均交换模式</block>
  <block id="461350f5828184e953481a2c26d93aaa" category="list-text">对于与要连接到 VMkernel 端口的端口组对应的 EPG ， VMM 域会附加预配置以立即解决问题</block>
  <block id="d8a8b02367be713a9249510d7303eba7" category="cell">接口策略</block>
  <block id="badf3cf810feea14786b41bb6ffe42f0" category="list-text">运行 NDE 之前，对于 NDE 发现：</block>
  <block id="d4a52aff4fc035964c76bf7da1575a86" category="list-text">所有 ESXi 主机的叶访问端口策略组</block>
  <block id="558b476a79573ff9cfb4b2c6ccdcbd47" category="list-text">运行 NDE 后，对于 Cisco Ave ：</block>
  <block id="2e5c9e2ae408daed95d0cbd5d3cd5038" category="list-text">每个 ESXi 主机一个 vPC 策略组</block>
  <block id="541d2f5a686e9e39569b7edbd2119acd" category="list-text">NetApp 建议对 Cisco Ave 的 ESXi 主机使用 vPC</block>
  <block id="37bfe3e4698f496338de29f0f359af76" category="list-text">对 vPC 到 ESXi 的端口通道策略使用静态模式</block>
  <block id="4e2555b3e0b7b3040aa21d3e4f6c79db" category="list-text">对端口通道策略使用第 4 层 SRC 端口负载平衡哈希方法</block>
  <block id="918d656747d90642243ce5886dc099f3" category="list-text">NetApp 建议对 NetApp HCI 存储节点的接口使用具有 LACP 活动端口通道策略的 vPC</block>
  <block id="2dd37baf4ea608bd5bb826c3b2d9ca92" category="list-text">创建一个新的 VLAN 范围（或 Encap Block ），并将角色 Internal and Dynamic Allocation （内部和动态分配）附加到用于 VMM 域的 VLAN 池</block>
  <block id="c0aad1f9249f6aec83c855f90bb75f3d" category="list-text">创建多播地址池（每个 EPG 一个地址）</block>
  <block id="5973fddb13bcd72d534447c9e5002012" category="list-text">预留与 Ave 光纤范围多播地址所使用的多播地址池不同的另一个多播地址</block>
  <block id="76b27b5ea35c4419cb7332c2bba19824" category="list-text">访问模式为读写模式</block>
  <block id="77537275beb10c9063059830650bd6a4" category="list-text">为 vSwitch 策略启用静态模式</block>
  <block id="936013b262dd8da4f9b8deba79b0c89f" category="list-text">确保 vSwitch 端口通道策略和接口策略组的端口通道策略使用相同的模式</block>
  <block id="53aef6beb1c969fcea7a2f6e2750ebb7" category="list-text">如果使用微分段，请启用标记收集</block>
  <block id="4d7f3fb32daa998e3faa925d7eb06177" category="list-text">默认 Encap 模式的建议选项为 VXLAN</block>
  <block id="de8c6efb8fca751d682fc8771550f54e" category="list-text">iSCSI VMkernel 端口从 NDE 部署的 VDS 一次迁移一个到 ACI 集成的 VDS</block>
  <block id="8d5867b0b490e7a19c042b0c22e055fb" category="list-text">基于 IP 哈希路由所有端口组的负载平衡方法</block>
  <block id="111a4709bb3b33784faf7d993c39b80c" category="list-text">使用访问端口接口策略组对 ESXi 主机运行 NDE 。要成功运行 NDE ，应将连接到 ESXi 主机的各个接口连接到原生，带内管理， iSCSI ， VM Motion EPG 。</block>
  <block id="0513ad38f70556c05d70ac69bbba4ea8" category="list-text">环境启动后，将主机置于维护模式，将接口策略组迁移到启用了静态模式的 vPC ，将 vPC 分配给所有必需的 EPG 并将主机从维护模式中删除。对所有主机重复相同的过程。</block>
  <block id="91c21b8c77e4b9ada3337b89709578dc" category="list-text">运行 Ave 安装过程以在所有主机上安装 Ave 控制 VM</block>
  <block id="f4d28a7bb16750bd3826670a3304cf09" category="list-text">使用主机上的本地数据存储库安装 Ave control VM 。每个主机都应安装一个 Ave 控制虚拟机</block>
  <block id="d7fab677cc0b5d66bf2e8ee9e43e2545" category="list-text">如果 DHCP 在带内管理 VLAN 上不可用，请在该网络上使用网络协议配置文件</block>
  <block id="31397a1f51c80c43374c723fdb9b60bd" category="list-text">对要添加的 ESXi 主机运行 NDE Scale with access port interface policy group 。要成功运行 NDE ，应将各个接口连接到原生，带内管理， iSCSI ， VM Motion EPG 。</block>
  <block id="2d92a810dfe0fd5435ae761f58aa0d70" category="list-text">* 将 ESXi 主机添加到 vSphere 集群后，将主机置于维护模式，并将接口策略组迁移到启用了静态模式的 vPC 。然后将 vPC 连接到所需的 EPG 。 *</block>
  <block id="a6e6479c6ac596facef6d195769d6821" category="list-text">在新主机上运行 Ave 安装过程，以便在该主机上安装 Ave 控制 VM</block>
  <block id="9e12f1e84cd7f4bca22e785e7640dd91" category="list-text">每个 NetApp HCI 存储节点一个 vPC 策略组，以添加到集群中</block>
  <block id="afbf1e4da0c031828c6c2f5354cc02ce" category="list-text">使用主机上的本地数据存储库安装 Ave control VM</block>
  <block id="1f7d9a66b018c5e1c58a68abf849f7d2" category="admonition">对于流量负载平衡，可在 Cisco ACI 上使用带有 vPC 的端口通道，并在处于活动模式的 LACP 的 ESXi 主机上使用 LAG 。但是，与 iSCSI 多路径相比，使用 LACP 可能会影响存储性能。</block>
  <block id="f35eaf899e7d067ea2736feaa6d17542" category="inline-link-macro">接下来： Red Hat 虚拟化：采用 Cisco ACI 的 NetApp HCI</block>
  <block id="aa5bd7f1db7920d13aa2075c61d23e8c" category="paragraph"><block ref="aa5bd7f1db7920d13aa2075c61d23e8c" category="inline-link-macro-rx"></block></block>
  <block id="0930d88f600e69249092984e1c57a5fa" category="doc">设计注意事项</block>
  <block id="877d021d74d62b4d6ca9997df7513f67" category="section-title">网络设计</block>
  <block id="bf0c21c9db884fd0255390c032ef3668" category="paragraph">Cisco ACI 网络结构的最低配置包括两个分支交换机和两个主干交换机，其中一个集群至少有三个 APIC 来管理和控制整个网络结构。所有工作负载都连接到叶交换机。主干交换机是网络的主干，负责互连所有分支交换机。任何两个叶交换机都不能互连。每个叶交换机都连接到全网状拓扑中的每个主干交换机。</block>
  <block id="2185615b670e2113ef552c2f19835e3a" category="paragraph">借助这种双层主干叶架构，无论服务器连接到哪个叶交换机，其流量都始终会通过相同数量的设备传输到连接到网络结构的另一台服务器（除非另一台服务器位于同一叶片上）。这种方法可将延迟保持在可预测的水平。</block>
  <block id="419eb40650328466d571929317cbe17e" category="section-title">计算设计</block>
  <block id="e5caf4606eb66e7e69e4804f81b55c68" category="paragraph">使用 NetApp HCI 的高可用性基础架构所需的计算节点最少为 2 个。NetApp HCI 提供了两种布线选项：双缆线和六缆线。NetApp HCI H410C 计算节点具有两个 1GbE 端口（端口 A 和 B ）和四个 10/25GbE 端口（端口 C ， D ， E 和 F ）板载端口。对于双缆线选项，端口 D 和 E 用于连接到上行链路交换机，对于六缆线选项，则使用从 A 到 F 的所有端口。每个节点还具有一个额外的带外管理端口，该端口支持智能平台管理接口（ Intelligent Platform Management Interface ， IPMI ）功能。此解决方案可为计算节点使用双缆线选项。</block>
  <block id="6762fed2bb895dcdaf3fa29b4e4ec22e" category="paragraph">对于 VMware 部署， NetApp HCI 附带了一个名为 NetApp 部署引擎（ NetApp Deployment Engine ， NDE ）的自动化部署工具。对于非 VMware 部署，需要在计算节点上手动安装虚拟机管理程序或操作系统。</block>
  <block id="be5acbec67071810913f6782071a73eb" category="section-title">存储设计</block>
  <block id="12562667984dbc36910810f3f2d869a9" category="paragraph">NetApp HCI 对存储节点使用四缆线选项。NetApp HCI H410S 存储节点具有两个 1GbE 端口（端口 A 和 B ）和两个 10/25GbE 端口（端口 C 和 D ）板载。两个 1GbE 端口捆绑为用于管理流量的绑定 1G （主动 / 被动模式），两个 10/25GbE 端口捆绑为用于存储数据流量的绑定 10G （ LACP 主动模式）。</block>
  <block id="ec602e95fcbfe58ddd2dbaa8000a4caf" category="paragraph">对于非 VMware 部署， NetApp HCI 存储集群的最低配置为四个节点。对于采用 VMware 部署的 1.8 之前的 NetApp HCI 版本，最低配置为四个存储节点。但是，对于采用 VMware 部署的 HCI 1.8 版， NetApp HCI 存储集群的最低配置为两个节点。有关 NetApp HCI 双节点存储集群的详细信息，请参见相关文档<block ref="5502da9693d6e5bde9c3460610541315" category="inline-link-rx"></block>。</block>
  <block id="907cb2d337c484eeec8ae62112e0d5b0" category="inline-link-macro">接下来： VMware vSphere ：采用 Cisco ACI 的 NetApp HCI</block>
  <block id="858e6c93b28b095a14d017771b612a56" category="paragraph"><block ref="858e6c93b28b095a14d017771b612a56" category="inline-link-macro-rx"></block></block>
  <block id="4fc69cb09ac5c69c2d1ba24e4bcbca81" category="doc">部署摘要：采用 RHV 的 NetApp HCI</block>
  <block id="1bb87b14e31d301d5620634f5e3f5d51" category="paragraph">本节提供的详细步骤验证了使用 Red Hat Virtualization 解决方案部署和验证 NetApp HCI 所需的最低硬件和软件配置。</block>
  <block id="807c33ad0057095f827a46e956c4e96e" category="paragraph">部署适用于 NetApp HCI 的 Red Hat 虚拟化涉及以下高级任务：</block>
  <block id="a28fc84bddb40223350c25e7b3044b53" category="inline-link-macro">配置管理交换机</block>
  <block id="e5f7f1ace52ba2f399a212d702d1b851" category="list-text"><block ref="e5f7f1ace52ba2f399a212d702d1b851" category="inline-link-macro-rx"></block></block>
  <block id="5041dbffdfe541a523b0f1ecceb3e13d" category="inline-link-macro">配置数据交换机</block>
  <block id="277a0d2d6576d655eb47e1dadabef887" category="list-text"><block ref="277a0d2d6576d655eb47e1dadabef887" category="inline-link-macro-rx"></block></block>
  <block id="16ff5ab48d9471c09c1285e3a34c04a2" category="inline-link-macro">在 HCI 存储节点上部署 Element 存储系统</block>
  <block id="8443d00bdaffae35d34dbada4d88614b" category="list-text"><block ref="8443d00bdaffae35d34dbada4d88614b" category="inline-link-macro-rx"></block></block>
  <block id="7eb1459bab1159d896ec4cfe3607022a" category="inline-link-macro">将 RHV-H-H 安装到 HCI 计算节点</block>
  <block id="d5ae99f49c7f11d61c58f3ca28796fc2" category="list-text"><block ref="d5ae99f49c7f11d61c58f3ca28796fc2" category="inline-link-macro-rx"></block></block>
  <block id="3d08b6351b8a22d94fc6f0ff359ea7bf" category="inline-link-macro">将 RHV Manager 部署为一个自助托管引擎</block>
  <block id="cd695c0228d7bc006fafa2fdbab69efd" category="list-text"><block ref="cd695c0228d7bc006fafa2fdbab69efd" category="inline-link-macro-rx"></block></block>
  <block id="ea2e06661a4cdf79dd5d41811fbc741e" category="inline-link-macro">部署测试 VM</block>
  <block id="3afeb1ecf4c35b30fd407ba47c687a73" category="list-text"><block ref="3afeb1ecf4c35b30fd407ba47c687a73" category="inline-link-macro-rx"></block></block>
  <block id="e3d65d18aa26acf4a100dbd0a2a95c3c" category="inline-link-macro">测试 HA 功能</block>
  <block id="4078e0cc2843b3cbb008434d4008395f" category="list-text"><block ref="4078e0cc2843b3cbb008434d4008395f" category="inline-link-macro-rx"></block></block>
  <block id="04826274b7e18b47758b2d944658f291" category="inline-link-macro">接下来：最佳实践—更新 RHV Manager 和 RHV-HH 主机</block>
  <block id="8650e2f61a4bdc5796ee5109c9ea2c32" category="paragraph"><block ref="8650e2f61a4bdc5796ee5109c9ea2c32" category="inline-link-macro-rx"></block></block>
  <block id="cba3585e67370c397348cb2bac6a6cbd" category="doc">6. 配置 RHV-M 基础架构：采用 RHV 的 NetApp HCI</block>
  <block id="90774ebe628eb51741603a8bcf9eb783" category="paragraph">要配置 RHV-M 基础架构，请完成以下步骤：</block>
  <block id="4906488c82f4ac937752eb0db3e7b031" category="list-text">默认情况下， ovirtmgmt 网络用于所有用途，包括迁移 VM 和虚拟子系统数据。</block>
  <block id="061f52ddf993c68216ec077eae361b29" category="list-text">最佳做法是为此指定不同的网络。要配置迁移网络，请导航到 " 网络 "&gt;" 网络 " ，然后单击 " 新建 " 。输入所选名称，启用 VLAN 标记，然后输入迁移网络的 VLAN ID 。</block>
  <block id="a2f2788e32c7cb45ad295d966158cde7" category="list-text">确保未选中 VM Network 复选框。转到 "Cluster" 子选项卡，并确保选中 "Attach and require" 。然后单击确定创建网络。</block>
  <block id="9454603e0fbfbf21c00059f028c079b8" category="paragraph"><block ref="9454603e0fbfbf21c00059f028c079b8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8423c9e18ab15a0de54e3d50dce83e11" category="list-text">要将迁移逻辑网络分配给这两个主机，请导航到 Compute &gt; Hosts ，单击主机，然后导航到 Network Interfaces 子选项卡。</block>
  <block id="98f38aafbe53d87e9387ebc087193e35" category="list-text">然后，单击设置主机网络并将迁移逻辑网络拖放到 bond0 右侧的已分配逻辑网络列中。</block>
  <block id="10bcb18a2acb5227b43f50cb25b19124" category="paragraph"><block ref="10bcb18a2acb5227b43f50cb25b19124" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e10ab0f4cddcf440e05b95f546704129" category="list-text">单击迁移网络接口上 bond0 下的笔形符号。配置 IP 地址详细信息，然后单击确定。然后在设置主机网络窗格中再次单击确定。</block>
  <block id="65cabc333af755360c7774f44d18f979" category="paragraph"><block ref="65cabc333af755360c7774f44d18f979" category="inline-image-macro-rx" type="image"></block></block>
  <block id="abbd8c538b9bf05eca74ee01a03bc1c5" category="list-text">对另一台主机重复步骤 4 到 6 。</block>
  <block id="424b3de50acc8046576a73421e8b3213" category="list-text">必须为新创建的网络分配迁移网络的角色。导航到 Compute &gt; Clusters ，然后单击 RHV 主机所属的集群，再单击 Logical Networks 子选项卡，然后单击 Manage Networks 。对于迁移网络，请启用迁移网络列下的复选框。单击确定。</block>
  <block id="205760aae6da4e23c3b48efceb430076" category="paragraph"><block ref="205760aae6da4e23c3b48efceb430076" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d257560f8a77b5a889f52660da67a3c2" category="list-text">接下来，作为最佳实践，请创建一个单独的 VM 网络，而不是对 VM 使用 ovirtmgmt 网络。</block>
  <block id="d658ee122d75b8fc79e75225e3ef9da4" category="list-text">导航到 " 网络 "&gt;" 网络 " ，然后单击 " 新建 " 。输入您选择的名称，启用 VLAN 标记，然后输入 VM 子系统网络的 VLAN ID 。确保已选中 VM Network 复选框。转至集群的子选项卡，并确保选中了 Attach 和 Require 。然后单击确定以创建 VM 子系统网络。</block>
  <block id="a818aa21c7b8ea47cc79b31900935fac" category="paragraph"><block ref="a818aa21c7b8ea47cc79b31900935fac" category="inline-image-macro-rx" type="image"></block></block>
  <block id="abebd3833483604a0d2026523126628b" category="list-text">将 VM 子系统逻辑网络分配给这两个主机。导航到 Compute &gt; Hosts ，单击主机名并导航到 Network Interfaces 子选项卡。然后，单击设置主机网络并将 VM 子系统逻辑网络拖放到 bond0 右侧的已分配逻辑网络列中。无需为此逻辑网络分配 IP ，因为它可为 VM 提供直通网络。</block>
  <block id="02044e4feb48dc2bd9b7edbca55dcbb8" category="paragraph">VM 子系统网络应能够访问 Internet ，以便允许子系统向 Red Hat 订阅管理器注册。</block>
  <block id="5f032bab7b606ae3e83c4c5fd7c9ff1e" category="inline-link-macro">下一步： 7.部署 NetApp mNode</block>
  <block id="88ffef8b57d399099fc852e0630afcd7" category="paragraph"><block ref="88ffef8b57d399099fc852e0630afcd7" category="inline-link-macro-rx"></block></block>
  <block id="524401c5890637d9ce50d2acdc1f1ff4" category="doc">基于 RHEL 的 KVM ：采用 Cisco ACI 的 NetApp HCI</block>
  <block id="8a4f9a94658ae19fb3e3ce8559ca67fb" category="paragraph">KVM （适用于基于内核的虚拟机）是一种适用于 Linux 的开源完全虚拟化解决方案，它位于 Intel VT 或 AMD-V 等 x86 硬件上换言之， KVM 可让您将 Linux 计算机转变为虚拟机管理程序，从而使主机能够运行多个隔离的 VM 。</block>
  <block id="7de315a59d17388359b4a5486a61895e" category="paragraph">KVM 可将任何 Linux 计算机转换为 1 类（裸机）虚拟机管理程序。KVM 可以在任何 Linux 分发版上实施，但在支持的 Linux 分发版上实施 KVM―与 Red Hat Enterprise Linux―一样，可扩展 KVM 的功能。您可以在子系统之间交换资源，共享通用库以及优化系统性能。</block>
  <block id="e5ce1be96a70dadce409cad9160510d6" category="paragraph">以下高级工作流用于设置虚拟环境。其中每个步骤可能涉及多个单独的任务。</block>
  <block id="fcbffe135c9a1326d34d3a283f6b4e2c" category="list-text">在 ACI 模式下安装和配置 Nexus 9000 交换机，并在 UCS C 系列服务器上安装和配置 APIC 软件。请参见安装和升级<block ref="7af87e5c10423d586c8c291b8b4eac1a" category="inline-link-rx"></block> 了解详细步骤。</block>
  <block id="56049688384eec68eabff24c8b565287" category="list-text">请参阅配置和设置 ACI 网络结构<block ref="b3d26913c6ef9fe3845b37654e7c2e41" category="inline-link-rx"></block>。</block>
  <block id="00d4dab3ced90142143708f08e11c0f4" category="list-text">配置 NetApp HCI 节点所需的租户，应用程序配置文件，网桥域和 EPG 。NetApp 建议使用除 iSCSI 之外的一个 BD-1-EPG 框架。请参见文档<block ref="1b6ef5edc1ae5fbbe53b2f8a856e812e" category="inline-link-rx"></block> 有关详细信息：所需的最小 EPG 集包括带内管理， iSCSI ， VM Motion ， VM 数据网络和原生。</block>
  <block id="6f0f42a445453d78c2cf2e53c0821c92" category="list-text">根据要求创建 VLAN 池，物理域和 AEP 。为 VPC 和各个端口创建交换机和接口配置文件和策略。然后连接物理域并配置指向 EPG 的静态路径。请参见<block ref="ff84e64a26c6cdcc0cf734885975bba9" category="inline-link-rx"></block> 有关详细信息：另请参见此表 &lt;link&gt; ，了解在 RHEL – KVM 虚拟机管理程序上将 ACI 与 Open vSwitch 集成的最佳实践。</block>
  <block id="1df08a21703edff1ea3b81933d653bc2" category="admonition">对于连接到 NetApp HCI 存储和计算节点的接口，请使用 vPC 策略组。</block>
  <block id="370af2fe39daf46cea426c0efc629155" category="list-text">创建和分配合同，以便在工作负载之间进行严格控制的访问。有关配置合同的详细信息，请参见指南<block ref="4ccd4dc326dc68252b85019361f2b7a5" category="inline-link-rx"></block>。</block>
  <block id="78937357687a7b0292ed689d4e420485" category="inline-link">Red Hat 文档</block>
  <block id="bf92bc6fe91beeac32565d18411e56a3" category="inline-link">OVS 文档</block>
  <block id="2557bc3294f5c437f0c286ff518f8afb" category="list-text">安装和配置 NetApp HCI Element 集群。请勿在此安装中使用 NDE ；而是在 HCI 存储节点上安装独立的 Element 集群。然后，配置安装 RHEL 所需的卷。在 NetApp HCI 计算节点上安装 RHEL ， KVM 和 Open vSwitch 。使用 Element 卷为主机和 VM 的共享存储服务配置虚拟机管理程序上的存储池。有关在 RHEL 上安装和配置 KVM 的详细信息，请参见<block ref="b8c65f4e4aa000c126b4b6b7dda45445" category="inline-link-rx"></block>。请参见<block ref="4d8e4d6ab7d36c135a8c2afd44d92f63" category="inline-link-rx"></block> 有关配置 Open vSwitch 的详细信息。</block>
  <block id="a9a8dc38ab75b71fc43c150236942872" category="list-text">RHEL KVM 虚拟机管理程序的 Open vSwitch 无法与 Cisco ACI 集成 VMM 。必须在所有必需的 EPG 上配置物理域和静态路径，以便在连接 ACI 叶交换机和 RHEL 主机的接口上使用所需的 VLAN 。此外，还可以在 RHEL 主机上配置相应的 OVS 网桥，并配置 VM 以使用这些网桥。此解决方案中的 RHEL KVM 主机的网络功能可通过 Open vSwitch 虚拟交换机实现。</block>
  <block id="c5f6b1f586bd6d55dc565879c48ddddc" category="section-title">打开 vSwitch</block>
  <block id="1f568f1357f5be7d75e9a50d6b2571b9" category="paragraph">Open vSwitch 是一款开源企业级虚拟交换机平台。它使用虚拟网络网桥和流量规则在主机之间转发数据包。编程流规则在 OVS 中的工作方式与在标准 Linux 网桥中不同。OVS 插件不使用 VLAN 标记流量。相反，它会在虚拟交换机上设置流量规则，规定在将流量转发到退出接口之前应如何处理流量。流量规则用于确定应如何处理入站和出站流量。下图显示了基于 RHEL 的 KVM 主机上 Open vSwitch 的内部网络连接。</block>
  <block id="d5d06b95e75949f7ecfe1586d340442c" category="paragraph"><block ref="d5d06b95e75949f7ecfe1586d340442c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8009e3fbb293b39ac2874ee99b4b7255" category="paragraph">下表概括了在基于 RHEL 的 KVM 主机上配置 Cisco ACI 和 Open vSwitch 所需的参数和最佳实践。</block>
  <block id="f518644d606e7769b7458fc018e36e47" category="list-text">原生 VLAN 使用单独的 EPG</block>
  <block id="6dff3c5bd0c09d27c50fb1f136b2bbe4" category="list-text">在原生 VLAN EPG 中，将接口与 HCI 存储和计算节点的静态绑定设置为 802.1p 模式</block>
  <block id="1e99dfec122ed1bd169e463586409a68" category="list-text">安装 KVM 之前，需要在带内管理 EPG 和 iSCSI EPG 上静态绑定 vPC</block>
  <block id="c16bb7f22303ebab4fda5e648ab447cd" category="list-text">为启用了静态分配的物理域单独分配 VLAN 池</block>
  <block id="88f8e143f35c32ba9854bd05d416663c" category="list-text">在元素集群形成期间，使用唯一的原生 VLAN 进行发现</block>
  <block id="44d4a574105a9e600bc8b3d6f696eaf5" category="list-text">每个 RHEL 主机一个 vPC 策略组</block>
  <block id="7dbf49923feb5e7ed01a14d1d5c1f71b" category="list-text">NetApp 建议对 RHV-HH 主机使用 vPC</block>
  <block id="08dfa5e2300bec46dc4585e44ea47fc5" category="list-text">对端口通道策略使用 LACP Active</block>
  <block id="956018586baf8c5f4ac9fb6d654d0d04" category="list-text">端口通道策略仅使用正常融合和对称哈希控制位</block>
  <block id="9fec7cca27423b3a491afd6f2f6f90ce" category="list-text">对端口通道策略使用第 4 层 src-Port 负载平衡哈希方法</block>
  <block id="e7c9b1c1a48093ed3c42ab4fc886bebd" category="list-text">NetApp 建议对指向 NetApp HCI 存储节点的接口使用具有 LACP 活动端口通道策略的 vPC</block>
  <block id="6a10b930ff0e3b6f1834b0b452ecb440" category="inline-link-macro">接下来： ONTAP 上的 AFF ： NetApp HCI 和 Cisco ACI</block>
  <block id="1634a81692a600f9e73a5eb048b6bdb3" category="paragraph"><block ref="1634a81692a600f9e73a5eb048b6bdb3" category="inline-link-macro-rx"></block></block>
  <block id="ec38f72204c6b90183d1f42bb104729f" category="doc">从何处查找追加信息：采用 RHV 的 NetApp HCI</block>
  <block id="aa5a3d07c03024007dadc921fdbe67cb" category="paragraph">要了解有关本文档中所述信息的更多信息，请查看以下文档和 / 或网站：</block>
  <block id="493f21d75f83de95fd4b8eab9b867d51" category="inline-link"><block ref="493f21d75f83de95fd4b8eab9b867d51" category="inline-link-rx"></block></block>
  <block id="22e18fb694a639c4cd9ae5b2a9ddb6f1" category="list-text">NetApp HCI 文档<block ref="ebda653f55dbdac977414bfdb9c44007" category="inline-link-rx"></block></block>
  <block id="8a333ed4b913f9fe25017b3dd378f136" category="inline-link"><block ref="8a333ed4b913f9fe25017b3dd378f136" category="inline-link-rx"></block></block>
  <block id="43702bef25213908b16a217ca3463b87" category="list-text">Red Hat 虚拟化文档<block ref="3c514f3e5e660efe2b9984b896736ad2" category="inline-link-rx"></block></block>
  <block id="2d242bb36ec91b32005f9296ff03a912" category="doc">架构</block>
  <block id="9a50201aa3bf66a7a0337ccf29d20c90" category="section-title">解决方案技术</block>
  <block id="1a4fcebb7af1d40431fb77d20752d27b" category="paragraph">本文档概述了在将 NetApp HCI 与 Cisco ACI 进行互操作时功能完备的内部数据中心或私有云应遵循的最佳实践。为了证明工作负载独立性，我们将网络最佳实践扩展到虚拟化解决方案，包括通过 NetApp HCI 部署的 VMware vSphere 和 Red Hat 虚拟化，以及其他存储解决方案，例如 NetApp ONTAP 和 StorageGRID 。同时，还强调了 Cisco ACI 交换机与不同虚拟交换机的互操作性，例如 VMware 分布式交换机（ VDS ）， Cisco ACI Virtual Edge （ Ave ）， Linux Bridge 或 Open vSwitch 。</block>
  <block id="08edd2123939d5309dced149763a50ee" category="section-title">NetApp HCI</block>
  <block id="c8b5dd69f0995fbbc2e0b114aca8e1b9" category="paragraph">NetApp HCI 是一款企业级超融合基础架构解决方案，可通过一个灵活，可扩展且易于管理的架构提供计算和存储资源。运行多个企业级工作负载可能会导致资源争用，其中一个工作负载会影响另一个工作负载的性能。NetApp HCI 通过 NetApp Element 软件中本机提供的存储服务质量（ QoS ）限制缓解了这一顾虑。Element 支持精细控制每个应用程序和卷，有助于消除资源争用问题，并满足企业性能 SLA 的要求。NetApp HCI 多租户功能有助于消除许多与性能相关的传统问题。有关 NetApp HCI 的概述，请参见下图。</block>
  <block id="b73db45cb72f706a2d80f8724cb38909" category="paragraph"><block ref="b73db45cb72f706a2d80f8724cb38909" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3c4757fe696e21cb58cf5f183b58571a" category="paragraph">NetApp HCI 可通过 NetApp 部署引擎（ NDE ）简化安装， NDE 是一种直观的部署引擎，可自动将 400 多个输入操作设置为 30 个以下，使您的设置在大约 45 分钟内即可运行。此外，强大的 API 套件还可以无缝集成到更高级别的管理，流程编排，备份和灾难恢复工具中。借助 NetApp Hybrid Cloud Control 管理套件，您可以通过一个管理平台在整个基础架构的整个生命周期内对其进行管理，监控和升级。</block>
  <block id="d95f9b4b3948947767feaa796cd2b2d3" category="section-title">软件定义的架构</block>
  <block id="61a01a14bc13766d254068eacb415758" category="paragraph">NetApp HCI 提供了一种软件定义的方法来部署和管理数据和存储资源。NetApp HCI 使用 NetApp Element 软件为存储自动化，配置和管理提供了一个基于图形用户界面的易于使用的门户和基于 REST 的 API 。NetApp Element 软件可提供模块化的可扩展性能，每个存储节点均可为环境提供有保障的容量和吞吐量。</block>
  <block id="28fbcc720a8c43c21e0757e56bdaf2fa" category="paragraph">NetApp HCI 使用 NetApp 部署引擎（ NDE ）自动配置和部署物理基础架构，包括安装和配置 VMware vSphere 环境以及集成适用于 vCenter Server 的 NetApp Element 插件。下图简要介绍了部署 NetApp HCI 的过程。</block>
  <block id="4e249be9a82f00f6d5564808e15269a8" category="paragraph"><block ref="4e249be9a82f00f6d5564808e15269a8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d2c1add995c9a7a7b47a75c07e3f6c20" category="section-title">性能担保</block>
  <block id="6f41bd70ed0d173a100208c1d3f0a260" category="paragraph">一个常见的挑战是，当多个应用程序共享同一个基础架构时，提供可预测的性能。应用程序干扰其他应用程序会导致性能下降。在共享环境中部署时，主流应用程序具有独特的 I/O 模式，这些模式可能会影响彼此的性能。为了解决这些问题， NetApp HCI 服务质量（ Quality of Service ， QoS ）功能可以精细控制每个应用程序的性能，从而消除资源争用问题并满足性能 SLA 的要求。在 NetApp HCI 中，每个卷都配置了最小，最大和突发 IOPS 值。最小 IOPS 设置可保证性能，与系统上的其他应用程序所做的工作无关。最大值和突发值用于控制分配，使系统能够为所有工作负载提供一致的性能。</block>
  <block id="62eb3ea990cd346477dc1aab91bc6612" category="paragraph">NetApp Element 软件使用 iSCSI 存储协议，这是在传统 TCP/IP 网络上封装 SCSI 命令的标准方式。Element 使用一种称为 iSCSI 登录重定向的技术来提高性能。iSCSI 登录重定向是 NetApp Element 软件集群的一个关键部分。收到主机登录请求后，节点将根据 IOPS 和卷的容量要求确定集群中应由哪个成员处理流量。卷分布在 NetApp Element 软件集群中，如果单个节点处理的卷流量过多或添加了新节点，则会重新分配这些卷。给定卷的多个副本会在阵列中分配。这样，如果节点发生故障后又发生卷重新分布，则除了注销和登录并重定向到新位置之外，对主机连接不会产生任何影响。通过 iSCSI 登录重定向， NetApp Element 软件集群是一种自我修复型横向扩展架构，能够实现无中断升级和操作。</block>
  <block id="67a915151759ecc737f698391f7cfd08" category="section-title">互操作性</block>
  <block id="93d768b4d1ba1a808ee01bc886aff4f7" category="paragraph">前几代超融合基础架构通常需要固定的资源比率，从而将部署限制为四节点和八节点配置。NetApp HCI 是一种可独立扩展计算和存储资源的分解式超融合基础架构。独立扩展可防止成本高昂且效率低下的过度配置，并简化容量和性能规划。</block>
  <block id="8161d97293a8ba2a97358411c18f0adc" category="paragraph">您可以通过提供的架构设计选项放心地根据自己的需求进行扩展，从而使 HCI 适用于核心第 1 层数据中心应用程序和平台。它采用机箱或节点级别的组件设计。在由存储或计算节点组成的混合配置中，每个机箱可以容纳四个节点。NetApp HCI 提供混合搭配，小型，中型和大型存储和计算配置。</block>
  <block id="081e6ff348f28668e661b692c7e2303b" category="paragraph">NetApp HCI 提供经验证的多协议和混合云支持，并具有企业级功能。它还可以轻松地与多种不同的主机虚拟化技术和存储解决方案进行互操作性。将 ONTAP Select 和 StorageGRID 部署为设备可扩展 NetApp HCI 存储功能，包括文件，块和对象存储服务。NetApp HCI 为不同类型的虚拟数据中心提供了一个灵活的基础架构平台。VMware vSphere ， Red Hat 虚拟化， KVM ， Citrix 虚拟机管理程序等是受支持的平台，可以使用 NetApp HCI 基础架构提供可扩展的企业级内部虚拟环境。</block>
  <block id="a097e3c464424bd17a692aab63c4ca1c" category="inline-link">NetApp HCI 文档</block>
  <block id="767ed0b652e5310da2ce7400db02fa86" category="paragraph">有关详细信息，请参见<block ref="af485e377f4b68513f6530a80d05b0dd" category="inline-link-rx"></block>。</block>
  <block id="3156dd33c46cdf0b0f85ee56fdbde4aa" category="section-title">Cisco ACI</block>
  <block id="3a7f04eb38c11c74cac8cb87f73f3799" category="paragraph">Cisco ACI 是一款行业领先的软件定义网络解决方案，可提高应用程序灵活性和数据中心自动化程度。Cisco ACI 具有一个整体架构，具有集中式策略驱动型管理。它实施了一个可编程的数据中心虚拟可扩展 LAN （ Virtual Extensible LAN ， VXLAN ）网络结构，可为任何工作负载（无论其性质如何，包括虚拟，物理，容器等）提供分布式网络连接和安全性。</block>
  <block id="9e215ced4a82e162fdca5b005c42cc5a" category="paragraph">Cisco 率先在数据中心引入了基于意图的 Cisco ACI 网络。它将高性能硬件和强大的软件与两个重要的 SDN 功能―叠加和集中控制相结合。ACI 网络结构由在 ACI 模式下运行的 Cisco Nexus 9000 系列交换机以及至少由三个集中管理的应用程序策略基础架构控制器（ APIC ）服务器组成的集群。下图概述了 Cisco ACI 。</block>
  <block id="b6d849227375572fbed596d1af083946" category="paragraph"><block ref="b6d849227375572fbed596d1af083946" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6ede633313d955a48a85dfaf742be1db" category="section-title">策略驱动型网络</block>
  <block id="2d5cf20c43edfa5c93b48407c4ba01e9" category="paragraph">Cisco ACI 采用策略驱动型模式，可使网络硬件处于无状态。应用策略基础架构控制器（ APIC ）充当中央控制器，用于管理和配置 ACI 网络结构中的所有交换机。Cisco ACI 网络结构由 Cisco Nexus 9000 系列交换机组成，这些交换机由使用声明性策略模型的 APIC 集群集中配置和管理。</block>
  <block id="30376cdba4a3baaa540e474db579a5cd" category="paragraph">Cisco ACI 使用逻辑结构形成一个分层策略架构，用于定义和管理整个网络结构的不同功能，包括基础架构，身份验证，安全性，服务， 应用程序和诊断。</block>
  <block id="4c3efa8f6d6dea06a07c85143f422e2f" category="paragraph">下图显示了 Cisco ACI 中不同逻辑结构之间的分类和关系。</block>
  <block id="dea194ed6eb8071f1acfcc9433850f9d" category="paragraph"><block ref="dea194ed6eb8071f1acfcc9433850f9d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="90542ef9fa12142d2df51503541b4f43" category="paragraph">租户是具有管理边界的逻辑容器，可执行基于域的访问控制。这是一种逻辑策略隔离，并不等同于实际的网络构造。</block>
  <block id="172638dfd4329cd05315f19b22194dc4" category="paragraph">在租户中，环境是唯一的第 3 层转发策略域。环境可以直接映射到传统网络的虚拟路由和转发（ VRF ）概念。事实上，环境也称为 VRF 。由于每个上下文都是一个单独的第 3 层域，因此两个不同的上下文可能具有重叠的 IP 空间。</block>
  <block id="414611bf5d3b0ecd6c29cbff4bfc0abc" category="paragraph">在上下文中，网桥域（ Bridge Domain ， BD ）表示唯一的第 2 层转发结构。网桥域定义唯一的第 2 层 MAC 地址空间，可等同于第 2 层洪水域或第 3 层网关。网桥域可以没有子网，但要为驻留在 BD 中的主机执行路由，它必须至少有一个子网。</block>
  <block id="b6dcfdefb3aedf5b8a55866068058805" category="paragraph">在 ACI 中，端点是指在网络上进行通信的任何内容，无论是计算主机，存储设备，不属于 ACI 网络结构的网络实体，还是虚拟机等。具有相同策略要求的一组端点将归类为一个端点组（ EPG ）。EPG 用于同时配置和管理多个端点。EPG 是网桥域的成员。一个 EPG 不能是多个网桥域的成员，但多个 EPG 可以是一个网桥域的成员。</block>
  <block id="f289e9d38b8ce7b5a977b8d15e6b2cba" category="paragraph">属于同一 EPG 的所有端点都可以彼此通信。但是，默认情况下，不同 EPG 中的端点无法通信，但如果两个 EPG 之间存在允许通信的合同，它们可以通信。在传统网络中，合同可以等同于 ACL 。但是，它与 ACL 不同的是，它不需要将特定 IP 地址指定为源和目标，而是将合同作为一个整体应用于 EPG 。</block>
  <block id="f3aa23c7436fd2e84d3c280f48bdc61c" category="inline-link">Cisco ACI 文档</block>
  <block id="240e432df85f87b197e898cd6211cf69" category="paragraph">请参见<block ref="ddf017d001f4da38d047b81e255b830b" category="inline-link-rx"></block> 有关详细信息 ...</block>
  <block id="0aeeabef8c755d393e51ac70951e6228" category="section-title">网络优势</block>
  <block id="b088e16061df72c1765e3392de08e6f4" category="paragraph">与传统网络相比， Cisco ACI 具有许多优势。可编程性和自动化是可扩展数据中心虚拟化基础架构的关键功能， Cisco ACI 的策略驱动机制为提供最佳物理和虚拟网络提供了大量机会。</block>
  <block id="8ccaa2024f3a63e557f51f3f3a792dfa" category="list-text">* 虚拟机管理器（ Virtual Machine Manager ， VMM ）集成。 * 借助 Cisco ACI 开放式 REST API 功能，可以轻松地与虚拟化环境集成。Cisco ACI 支持 VMM 与多个虚拟机管理程序集成，并可自动访问和控制虚拟机管理程序虚拟交换机以访问 ACI 中的网络结构。ACI 中的 VMM 集成可将 ACI 策略框架无缝扩展到虚拟工作负载。换句话说，通过 VMM 集成， Cisco ACI 可以控制虚拟化主机上运行的虚拟交换机，并将 ACI 网络结构访问策略扩展到虚拟工作负载。此集成还可以自动执行虚拟机管理程序的虚拟交换机部署和配置任务。Cisco ACI VMM 集成具有以下优势：</block>
  <block id="12c4829295ee34de48814c86b49e2345" category="list-text">通过 APIC 为物理和虚拟环境提供单点策略管理</block>
  <block id="08219964e06e31ed0dfd361ada000481" category="list-text">通过在虚拟环境中透明实例化应用程序，加快应用程序部署速度</block>
  <block id="eb8df3568372657bb13621b55b458502" category="list-text">通过跨物理和虚拟环境的整体信息聚合，全面集成地了解应用程序的运行状况</block>
  <block id="1a75222382f9b933c8cf2c953e7d2ae4" category="inline-link">Cisco 文档</block>
  <block id="c98124f6fea2e77e8a35b573f36a8858" category="inline-link">虚拟化兼容性表</block>
  <block id="1769a546be6a202b0b5365e3d8a2e256" category="list-text">简化了虚拟工作负载的网络配置，因为系统会自动创建连接到 VM 所需的端口组或 VM NIC 配置文件。有关 Cisco ACI VMM 集成的详细信息，请参见<block ref="bff82478292b965dc2ae32d17e9b3bff" category="inline-link-rx"></block>。此外，请参见 Cisco ACI<block ref="f799b88340546afc80e83903c630d8b6" category="inline-link-rx"></block> 了解版本兼容性详细信息。</block>
  <block id="bae1bcc09242eb6465e8b27dddb23d78" category="inline-link">Cisco ACI 虚拟化指南</block>
  <block id="b36b2fee0f86850fd4042c8410658a2b" category="list-text">* 微分段。 * Cisco ACI 中的微分段允许您使用基于网络或基于 VM 的属性将现有应用程序 EPG 中的端点分类为微分段（ uSeg ） EPG 。这有助于更精细地筛选端点，并在这些端点上应用特定的动态策略。微分段可应用于租户中的任何端点。Cisco 支持在各种虚拟交换机上进行微分段— Cisco ACI Virtual Edge ， VMware VDS 和 Microsoft vSwitch 。可以为 uSeg EPG 配置多个属性，但一个端点只能分配给一个 EPG 。有关详细信息，请参见<block ref="5a600e7bf54927fa91f5d2f71ca65652" category="inline-link-rx"></block> 特定版本。</block>
  <block id="d49bd90b8b96c15ff8c92ac088ae0097" category="inline-link">Cisco ACI 虚拟化指南</block>
  <block id="18bd2a8a8ce6633d17721fc82abcd838" category="list-text">* EPG 内隔离。 * 默认情况下，属于同一 EPG 的所有端点都可以彼此通信。Cisco ACI 中的 EPG 内隔离功能可防止同一 EPG 中的端点彼此通信。它通过对从 ACI 叶到虚拟机管理程序主机以及从虚拟机管理程序主机到 ACI 叶的流量使用不同的 VLAN 来实现隔离。可以对应用程序 EPG 和微分段 EPG 强制实施 EPG 内隔离。请参见的特定版本<block ref="5773a2f8dd8ac56a5a8ae196a67ff925" category="inline-link-rx"></block> 有关详细信息 ...</block>
  <block id="2b0d957e4ad1bdfd446155ff5bb8a9b2" category="section-title">架构图</block>
  <block id="af23164627a2afd3b6378c46c8802671" category="paragraph"><block ref="af23164627a2afd3b6378c46c8802671" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d63ef673c18dd727400ae50cae928164" category="paragraph">此图显示了采用 Cisco ACI 的 NetApp HCI 的物理架构，该架构是为此解决方案设计的。通过分支连接并由三个 APIC 组成的集群管理的两个叶交换机构成了 ACI 网络结构。叶交换机连接到上游路由器以进行外部连接。三对 NetApp HCI 计算节点（每个节点都专用于虚拟机管理程序）配置有一个双缆线选项。我们为四个存储节点配置了四缆线选项，以构成 Element 集群。使用一对 AFF A200 节点为系统提供 ONTAP 功能。</block>
  <block id="b831e128b8fd177e9c80396ed741b7c1" category="section-title">硬件和软件要求</block>
  <block id="a623a8d0366bf079411aa30be45b2d10" category="section-title">计算</block>
  <block id="37f8c800879431998190a80e7abb8fae" category="paragraph">下表列出了解决方案中使用的硬件和软件计算资源。在任何解决方案实施中使用的组件可能会因客户要求而异。</block>
  <block id="3c02a379965ab0dfcd77b1c484450433" category="cell">硬件</block>
  <block id="a559b87068921eec05086ce5485e9784" category="cell">型号</block>
  <block id="694e8d1f2ee056f98ee488bdc4982d73" category="cell">数量</block>
  <block id="85bd45fc91dea861ca8f767ff7fae32b" category="cell">NetApp HCI 计算节点</block>
  <block id="fd981db23bc0535b50379970c61035ce" category="cell">NetApp H410C</block>
  <block id="1679091c5a880faf6fb5e6087eb1b2dc" category="cell">6.</block>
  <block id="719d067b229178f03bcfa1da4ac4dede" category="cell">软件</block>
  <block id="261addf78c7b2c961032b3dd08ba0b1f" category="cell">目的</block>
  <block id="34b6cd75171affba6957e308dcbd92be" category="cell">version</block>
  <block id="f7eea647714641318ee86fedbbed4691" category="cell">VMware ESXi</block>
  <block id="ea4c55be196897a16d86999f5c16d582" category="cell">虚拟化</block>
  <block id="c3e22f2ae1ddef844509890f97faa80b" category="cell">6 ， 7.</block>
  <block id="beb9456af324db48fa76084e755d8d0b" category="cell">VMware vCenter Server 设备</block>
  <block id="0bcfd99e96df80df799da5c842a6e152" category="cell">虚拟化管理</block>
  <block id="c73bbd3786350b0a8d3577d82afdf489" category="cell">Red Hat Enterprise Linux</block>
  <block id="696c660ff8d9323e55146a6dbd4e4088" category="cell">操作系统</block>
  <block id="971455e5b307f416baac0cb24b710792" category="cell">7.7</block>
  <block id="d9817ded489aaa35d8ba40ab33bdfd4b" category="cell">KVM</block>
  <block id="41d7d9e6c3ec3e5bbf5cea44f6d6dd8c" category="cell">1.5.3-167</block>
  <block id="80e910f35b12e9c61335fa88de36edd0" category="cell">Red Hat 虚拟化</block>
  <block id="d19eb187a7cd3e312e97d0d357da0464" category="cell">4.3.9</block>
  <block id="8c4aa541ee911e8d80451ef8cc304806" category="section-title">存储</block>
  <block id="f6006a9d9b1403e65ff910d46374068e" category="paragraph">下表列出了此解决方案中使用的硬件和软件存储资源。在任何特定解决方案实施中使用的组件可能会因客户要求而异。</block>
  <block id="1b35898254384fcc053ec6fab4b6ab59" category="cell">NetApp HCI 存储节点</block>
  <block id="290ef55f2a76a306cc982f6a57c1357e" category="cell">NetApp H410S</block>
  <block id="a87ff679a2f3e71d9181a67b7542122c" category="cell">4.</block>
  <block id="c8984126713ed072b9cb0a44a162be4d" category="cell">AFF</block>
  <block id="cc96dbfd2d85f2096c9bbe8ea7f9968e" category="cell">A200</block>
  <block id="c81e728d9d4c2f636f067f89cc14862c" category="cell">2.</block>
  <block id="cba4f4cee5c6a3e6d8be8da68fa1234e" category="cell">基础架构</block>
  <block id="f932bed2d12442d21507b51d22b88dd7" category="cell">1.8</block>
  <block id="fcda5b98e8c212807dc088477e802757" category="cell">NetApp Element</block>
  <block id="195863009ffa903e83ad7fd7e7db63b1" category="cell">12.0</block>
  <block id="253b40ae359ba25b56231803430c4873" category="cell">ONTAP</block>
  <block id="11bb62bb46dab1993f8624230f6903cd" category="cell">9.7P6</block>
  <block id="3a3a5cd068731551120f43f37950768b" category="cell">ONTAP Select</block>
  <block id="f82f50748d06cc9643330a4a8297ba43" category="cell">9.7</block>
  <block id="f53c88cbaed04e9c2d198cf6fc3834aa" category="cell">存储网格</block>
  <block id="b831e71b782a1e06e4e5f24e84680fb6" category="cell">11.3</block>
  <block id="a5fa5746370b608090b994a97b49e98b" category="section-title">网络</block>
  <block id="accfbb8ed6448fee565211b348e88b55" category="paragraph">下表列出了此解决方案中使用的硬件和软件网络资源。在任何特定解决方案实施中使用的组件可能会因客户要求而异。</block>
  <block id="a505cdc78c169b9f6c6d2648cd0d742a" category="cell">Cisco UCS 服务器</block>
  <block id="691b25986a65aa72ff077ebd05b22b33" category="cell">UCS C-220 M3</block>
  <block id="eccbc87e4b5ce2fe28308fd9f2a7baf3" category="cell">3.</block>
  <block id="48def1be7a1b40b720ff1892a761e8c8" category="cell">Cisco Nexus</block>
  <block id="6a5e803b17cb2c8aedd154199fe24cf9" category="cell">N9K-C936- PQ</block>
  <block id="3ff25e002a1f9a275cdcca17bffc46c2" category="cell">N9K-C9396-PX</block>
  <block id="ebfd0585d8088e9d89bff24dac2f2047" category="cell">Cisco APIC</block>
  <block id="9dc1904e0c3ace141704b477cd9b345d" category="cell">网络管理</block>
  <block id="b2e4ea72bf99b551076446036fda1fc8" category="cell">3.2 （ 9 小时）</block>
  <block id="1bef549326db6e1c51705512129bb4da" category="cell">Cisco Nexus ACI 模式交换机</block>
  <block id="eec89088ee408b80387155272b113256" category="cell">网络</block>
  <block id="5eefe59cd96e8baa21e6c772f7eed438" category="cell">13.2（ 9 小时）</block>
  <block id="4201e2760a800a946e8613051dfec52c" category="cell">1.2.9</block>
  <block id="6bc6a9a7d6cf60bd1fbcecb9fb332dc1" category="cell">Open vSwitch （ OVS ）</block>
  <block id="0d22deb7e527c28f2d66f825ee5fbb21" category="cell">2.9.2</block>
  <block id="8cded9a3131c42c50972475766234558" category="cell">VMware 虚拟分布式交换机</block>
  <block id="10851bea5d822eacda7e5b46812b1b33" category="cell">6.6</block>
  <block id="b3ee4da56a4497536ec9370e017c729c" category="inline-link-macro">接下来：设计注意事项</block>
  <block id="3ec43ac7e0be538eb07ff12a204d7279" category="paragraph"><block ref="3ec43ac7e0be538eb07ff12a204d7279" category="inline-link-macro-rx"></block></block>
  <block id="fa1e1e60ab95738707f1fa86c37715a2" category="doc">Red Hat 虚拟化：采用 Cisco ACI 的 NetApp HCI</block>
  <block id="4a6ec1b1eb5bd6423997f4675161fff8" category="paragraph">Red Hat 虚拟化（ RHV ）是一个企业级虚拟数据中心平台，它使用 KVM 虚拟机管理程序在 Red Hat Enterprise Linux 上运行。RHV 的主要组件包括 Red Hat 虚拟化主机（ RHP-H ）和 Red Hat 虚拟化管理器（ RHH- M ）。RHV-M 可为虚拟化的 RHV 环境中的物理和逻辑资源提供集中式企业级管理。RHV-H- H 是一款基于 Red Hat Enterprise Linux 的轻量级操作系统，经过优化，可以轻松地将物理服务器设置为 RHV 虚拟机管理程序。有关 RHV 的详细信息，请参见相关文档<block ref="5aeae1e5d4ea271c836256afbb4f3237" category="inline-link-rx"></block>。下图概述了 RHV 。</block>
  <block id="f1d3acf70f4a894e106857564d2e59af" category="paragraph"><block ref="f1d3acf70f4a894e106857564d2e59af" category="inline-image-macro-rx" type="image"></block></block>
  <block id="29148529670c9a55db906339a0da3c57" category="paragraph">从 Cisco APIC 3.1 版开始， Cisco ACI 支持将 VMM 与 Red Hat 虚拟化环境集成。Cisco APIC 中的 RHV VMM 域连接到 RHV-M ，并与数据中心对象直接关联。此数据中心下的所有 RHV-H 集群都被视为 VMM 域的一部分。当 EPG 连接到 ACI 中的 RHV VMM 域时， Cisco ACI 会自动在 HV- M 中创建逻辑网络。属于 Red Hat VMM 域的 RHV 主机可以使用 Linux 网桥或 Open vSwitch 作为其虚拟交换机。这种集成可简化和自动执行 RHP-M 上的网络配置，为系统和网络管理员节省大量手动工作。</block>
  <block id="739662868a7862ecbde6a4d684c38e84" category="paragraph">以下工作流用于设置虚拟环境。其中每个步骤可能涉及多个单独的任务。</block>
  <block id="d81f92d764b59094f72f3355f05d117a" category="list-text">在 UCS C 系列服务器上以 ACI 模式安装和配置 Nexus 9000 交换机以及 APIC 软件。请参见安装和升级<block ref="7af87e5c10423d586c8c291b8b4eac1a" category="inline-link-rx"></block> 了解详细步骤。</block>
  <block id="f31a8944ffdebd3d7df21322df09f476" category="list-text">请参阅配置和设置 ACI 网络结构<block ref="b3d26913c6ef9fe3845b37654e7c2e41" category="inline-link-rx"></block>。</block>
  <block id="d6ea166946cf28c541d014cefd6afb68" category="list-text">配置 NetApp HCI 节点所需的租户，应用程序配置文件，网桥域和 EPG 。NetApp 建议使用一个 BD 对一个 EPG 框架，但 iSCSI 除外。请参见文档<block ref="1b6ef5edc1ae5fbbe53b2f8a856e812e" category="inline-link-rx"></block> 有关详细信息：所需的最小 EPG 集包括带内管理， iSCSI ， VM 移动， VM 数据网络和原生。</block>
  <block id="3668d39bf55ee3ecdc28f0e88f82b844" category="list-text">根据要求创建 VLAN 池，物理域和 AEP 。为 VPC 和各个端口创建交换机和接口配置文件和策略。然后连接物理域并配置指向 EPG 的静态路径。请参见<block ref="ff84e64a26c6cdcc0cf734885975bba9" category="inline-link-rx"></block> 有关详细信息：下表列出了在 RHV 上将 ACI 与 Linux 网桥集成的最佳实践。</block>
  <block id="2cdb158fb37aafba9867a8bada8cd4d8" category="paragraph"><block ref="2cdb158fb37aafba9867a8bada8cd4d8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dbdb1910379f5561155442cdbdd036b5" category="list-text">创建和分配合同，以便在工作负载之间进行严格控制的访问。有关配置合同的详细信息，请参见指南<block ref="4ccd4dc326dc68252b85019361f2b7a5" category="inline-link-rx"></block>。</block>
  <block id="ee3ac6f933ab1a572bcf6b342e292e19" category="inline-link">NetApp HCI NVA 上的 RHV</block>
  <block id="921130f998a3d8f0c4dace5ba162aa25" category="list-text">安装和配置 NetApp HCI Element 集群。请勿使用 NDE 进行此安装，而是在 HCI 存储节点上安装独立的 Element 集群。然后，配置所需的卷以安装 RHV 。在 NetApp HCI 上安装 RHV 。请参见<block ref="b38ce726500150fed38c95fcc0dd7aec" category="inline-link-rx"></block> 有关详细信息：</block>
  <block id="46701e77da0ad7d673ac82cfa0260f8e" category="inline-link">Cisco 白皮书</block>
  <block id="d2b935c47ebb570cf1947b9c413ba52a" category="list-text">RHV 安装会创建一个名为 ovirtmgmt 的默认管理网络。虽然 Cisco ACI 与 RHV 的 VMM 集成是可选的，但最好利用 VMM 集成。请勿手动创建其他逻辑网络。要使用 Cisco ACI VMM 集成，请创建一个 Red Hat VMM 域，并使用预配置解析即时性将 VMM 域附加到所有所需的 EPG 。此过程会自动创建相应的逻辑网络和 vNIC 配置文件。vNIC 配置文件可直接用于连接到主机和 VM 进行通信。由 Cisco ACI 管理的网络的格式为 ` &lt;tenant-name&gt;&gt;&lt;application-profile-name&gt;&gt;&lt;epg-name&gt;` 标记有格式 `ACI_&lt;rhv-VMM- 域名 &gt;` 。请参见<block ref="3d8544b12b57c476592f038e085e5d72" category="inline-link-rx"></block> 用于为 RHV 创建和配置 VMM 域。此外，有关将 NetApp HCI 上的 RHV 与 Cisco ACI 集成的最佳实践，请参见下表。</block>
  <block id="c1dc99625bc034d9cb7732d1c3fd05a2" category="admonition">除 ovirtmgmt 之外，所有其他逻辑网络均可由 Cisco ACI 管理。</block>
  <block id="904793f744b05f71246e85a95d0b40af" category="paragraph"><block ref="904793f744b05f71246e85a95d0b40af" category="inline-image-macro-rx" type="image"></block></block>
  <block id="54be85ee096669a540b55f197b84b3f1" category="paragraph"><block ref="54be85ee096669a540b55f197b84b3f1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="06f0f41c64c615f0f8d8f1247988764c" category="paragraph">此解决方案中的 HVH 主机的网络功能由 Linux 网桥提供。</block>
  <block id="284fe481b765591866ec835930bf43f5" category="section-title">Linux 网桥</block>
  <block id="571b59f8c4dfb7ff5e828989c2f7c820" category="paragraph">Linux Bridge 是所有 Linux 分发版上的默认虚拟交换机，通常用于基于 KVM/QEMU 的虚拟机管理程序。它用于根据 MAC 地址在网络之间转发流量，因此被视为第 2 层虚拟交换机。有关详细信息，请参见文档<block ref="91c6b8e8bed3161841c576d7106ab5f0" category="inline-link-rx"></block>。下图显示了在 RHV-H-H 上使用 Linux Bridge 的内部网络连接（已测试）。</block>
  <block id="4a23efa40adbe2cfc40888cef7dcccb4" category="paragraph"><block ref="4a23efa40adbe2cfc40888cef7dcccb4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1506c0cc5ef3031eb6fa8d1bff57c427" category="paragraph">下表概括了在 RHV 主机上配置和集成 Cisco ACI 与 Linux Bridge 的必要参数和最佳实践。</block>
  <block id="0d6114c9e0fc00ca5e8e73db00eec75f" category="cell">配置注意事项</block>
  <block id="5087ee407d7475f2abcfafd40291c9e2" category="list-text">安装 RHV 之前，需要在带内管理 EPG 和 iSCSI EPG 上静态绑定 vPC</block>
  <block id="a763abedd85de40d3bccf74f4bd703cc" category="list-text">对于与要连接到 VMkernel 端口的端口组对应的 EPG ， VMM 域应与 ‘预配置 ' 一起附加，以便立即解决问题</block>
  <block id="083b2bf935cb41cd5cc07dcdae0ce4b5" category="list-text">每个 RHV-H 主机一个 vPC 策略组</block>
  <block id="dc4c84ed235beeded2f7f7c380301caf" category="list-text">建议对 RHV-HH 主机使用 vPC</block>
  <block id="6d2dbdc1fa01d8b2e0e5c8dbd5546c22" category="list-text">对端口通道策略使用 ‘LACP Active '</block>
  <block id="e10be64764c59f5e6cae56bda3eff5b6" category="list-text">对于端口通道策略，请仅使用 ‘正常融合 ' 和 ‘S对称散列 ' 控制位对于端口通道策略，请使用 ‘第 4 层 src-port ' 负载平衡散列方法建议对指向 NetApp HCI 存储节点的接口使用具有 LACP 活动端口通道策略的 vPC</block>
  <block id="dccfc8330fce257fe2a69d86ed813ffe" category="list-text">请勿将主机管理逻辑接口从 ovirtmgmt 迁移到任何其他逻辑网络</block>
  <block id="f035ecd4a2d22e44fa16d086b9880f82" category="list-text">要迁移到由 ACI VMM 集成管理的 iSCSI 逻辑网络的 iSCSI 主机逻辑接口</block>
  <block id="cd59c1172844c3cd360dca533161e1bb" category="admonition">除了 ovirtmgmt 逻辑网络之外，可以在 Cisco APIC 上创建所有其他基础架构逻辑网络并将其映射到 VMM 域。‘虚拟管理逻辑网络使用与物理域连接的带内管理 EPG 上的静态路径绑定。</block>
  <block id="b361fbbf9e7b65d6dcc9a74d5e2b14a4" category="inline-link-macro">接下来： RHEL 上的 KVM ：采用 Cisco ACI 的 NetApp HCI</block>
  <block id="9900520bfabcdee56d3fcdd92e2e5cc2" category="paragraph"><block ref="9900520bfabcdee56d3fcdd92e2e5cc2" category="inline-link-macro-rx"></block></block>
  <block id="3887d417240a72ab69f6d0301efd3b2b" category="doc">从何处查找追加信息</block>
  <block id="7d5b957cd473f6eaf5ad335a9c63c4ff" category="paragraph">要了解有关本文档中所述信息的更多信息，请查看以下文档和 / 或网站：</block>
  <block id="ad0a505756223d68dc11afeae3459351" category="list-text">NetApp HCI 文档</block>
  <block id="063cb98ffd61fbc954759fc3ba642f2b" category="paragraph"><block ref="063cb98ffd61fbc954759fc3ba642f2b" category="inline-link-rx"></block></block>
  <block id="72fa941d61e219e0e35f3e85b9cebba5" category="list-text">Cisco ACI 文档</block>
  <block id="5a2bccb400fa29e8f060708d25470f55" category="inline-link"><block ref="5a2bccb400fa29e8f060708d25470f55" category="inline-link-rx"></block></block>
  <block id="b2dd75b94e2c417a0d642cf355f23184" category="paragraph"><block ref="b2dd75b94e2c417a0d642cf355f23184" category="inline-link-rx"></block></block>
  <block id="454d8bacc17503d670940b88fdf44b2a" category="list-text">Cisco Nexus 9000 系列交换机</block>
  <block id="67be4cd88f4003fcf0aa3708830b1930" category="inline-link"><block ref="67be4cd88f4003fcf0aa3708830b1930" category="inline-link-rx"></block></block>
  <block id="40d407225fc884be5c71714aca43a1e4" category="paragraph"><block ref="40d407225fc884be5c71714aca43a1e4" category="inline-link-rx"></block></block>
  <block id="5628189f40190298553c263a1a198493" category="list-text">NetApp AFF A 系列</block>
  <block id="c6a079892f1cff76919834401bb28e4c" category="inline-link"><block ref="c6a079892f1cff76919834401bb28e4c" category="inline-link-rx"></block></block>
  <block id="91fbc750242e3f6e73b7346d7de4255d" category="paragraph"><block ref="91fbc750242e3f6e73b7346d7de4255d" category="inline-link-rx"></block></block>
  <block id="5efa0da94bf6845724aa837362401b61" category="list-text">ONTAP 文档</block>
  <block id="1b214ce6b630c9ad822fc984e20f3675" category="inline-link"><block ref="1b214ce6b630c9ad822fc984e20f3675" category="inline-link-rx"></block></block>
  <block id="91fe04078e98f81bd39430c985bba713" category="paragraph"><block ref="91fe04078e98f81bd39430c985bba713" category="inline-link-rx"></block></block>
  <block id="e1b61b20724c7759e451d99890369a14" category="list-text">ONTAP Select 文档</block>
  <block id="bcce40180d5e53504a0539821a1a778f" category="inline-link"><block ref="bcce40180d5e53504a0539821a1a778f" category="inline-link-rx"></block></block>
  <block id="ab68cd37dcb9ff68f89b869a40d246a5" category="paragraph"><block ref="ab68cd37dcb9ff68f89b869a40d246a5" category="inline-link-rx"></block></block>
  <block id="a0a2b190d72ee4645ce0b2c9bb0daaac" category="list-text">StorageGRID 文档</block>
  <block id="10ac2203552a9d5d210d409148a6df24" category="inline-link"><block ref="10ac2203552a9d5d210d409148a6df24" category="inline-link-rx"></block></block>
  <block id="7171ab013c5f9f1efef93a26cc76e4e4" category="paragraph"><block ref="7171ab013c5f9f1efef93a26cc76e4e4" category="inline-link-rx"></block></block>
  <block id="9343c629832fe35a335b1161353daf6d" category="paragraph"><block ref="9343c629832fe35a335b1161353daf6d" category="inline-link-rx"></block></block>
  <block id="8887a9a417a1629326acdb917d224337" category="list-text">VMware vSphere</block>
  <block id="7064a3f4e62b9cb5e6a7937e7da89277" category="inline-link"><block ref="7064a3f4e62b9cb5e6a7937e7da89277" category="inline-link-rx"></block></block>
  <block id="205c13b457f2dc9ee49ebd1e3ae3b1df" category="paragraph"><block ref="205c13b457f2dc9ee49ebd1e3ae3b1df" category="inline-link-rx"></block></block>
  <block id="7b992155512beae7a0c0bcd838bf53bc" category="list-text">VMware vCenter Server</block>
  <block id="1437b8b2e8fc7321b26cb3260b2497de" category="inline-link"><block ref="1437b8b2e8fc7321b26cb3260b2497de" category="inline-link-rx"></block></block>
  <block id="3d6f191554274501ba88fe69ea6ba807" category="paragraph"><block ref="3d6f191554274501ba88fe69ea6ba807" category="inline-link-rx"></block></block>
  <block id="9ed4a475dd3705157a9fed8811f63ce2" category="list-text">NetApp 互操作性表工具</block>
  <block id="72feca9c421aeacb50187f7cc648d6d3" category="inline-link"><block ref="72feca9c421aeacb50187f7cc648d6d3" category="inline-link-rx"></block></block>
  <block id="b4cd465fb23074d003f308454844555e" category="paragraph"><block ref="b4cd465fb23074d003f308454844555e" category="inline-link-rx"></block></block>
  <block id="d783b027a8bf08adf7e396ba3e1dff49" category="list-text">Cisco ACI 虚拟化兼容性列表</block>
  <block id="8969d15a17b36d57ecb90e2e09f73884" category="inline-link"><block ref="8969d15a17b36d57ecb90e2e09f73884" category="inline-link-rx"></block></block>
  <block id="f3e456c96f59ffef74d5966b4962db4b" category="paragraph"><block ref="f3e456c96f59ffef74d5966b4962db4b" category="inline-link-rx"></block></block>
  <block id="e08175c6fa64cba68719dea85ebd9d34" category="list-text">VMware 兼容性指南</block>
  <block id="33a5856b62b0795c60374ac94b38ff05" category="inline-link"><block ref="33a5856b62b0795c60374ac94b38ff05" category="inline-link-rx"></block></block>
  <block id="d6ac65bf36b9bb86fd269d9f52d82cf3" category="paragraph"><block ref="d6ac65bf36b9bb86fd269d9f52d82cf3" category="inline-link-rx"></block></block>
  <block id="9b5f3c701e5c4067b43c9988430737ac" category="doc">4. 在 HCI 计算节点：采用 RHV 的 NetApp HCI 上部署 RHV-H 虚拟机管理程序</block>
  <block id="0d53c5df99d7461be6af8728fe314df4" category="paragraph">此解决方案采用建议的 RHV 部署自行托管引擎架构，并且设置最少（两个自托管引擎节点）。这些步骤将在节点已进行机架安装和布线，并且已在每个节点上配置 IPMI 端口以使用控制台后开始。要在 HCI 计算节点上部署 RHV-H 虚拟机管理程序，请完成以下步骤：</block>
  <block id="6268fe27dd8457131235df1c81bf81d1" category="list-text">访问集群中计算节点的带外管理控制台，并使用默认凭据 admin/admin 登录。</block>
  <block id="23dfc26697509657a769a3b7cbaa3e23" category="paragraph"><block ref="23dfc26697509657a769a3b7cbaa3e23" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5cb27d4600f7d540ae679b21868e24cc" category="list-text">单击屏幕中央的 "Remote Console Preview" 图像下载 Java Web Start 启动的 JNLP 文件，该文件将启动系统的交互式控制台。</block>
  <block id="54fe9bc8e3723d9aefbe15d8f64de0ac" category="list-text">启动虚拟控制台后，通过导航到并单击 Virtual Media &gt; Virtual Storage 来连接 HV-H4.3.9 ISO 。</block>
  <block id="88035870e4a4137400b4cf37274e263c" category="paragraph"><block ref="88035870e4a4137400b4cf37274e263c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e20df0008e3e5d2a25edc799bcdf5cf2" category="list-text">对于逻辑驱动器类型，从下拉列表中选择 ISO 文件。提供 RHV-H-H 4 的完整路径和全名。3.9 ISO 文件或单击打开映像按钮附加该文件。然后单击插件。</block>
  <block id="bd364d7f1390c5f98130b6ca2ea67b50" category="paragraph"><block ref="bd364d7f1390c5f98130b6ca2ea67b50" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cc45745e98016f69b4601a10c7b2af89" category="list-text">通过导航并单击 " 电源控制 "&gt;" 设置电源重置 " ，重新启动服务器，以便使用 RHV-H4.3.9 ISO 进行启动。</block>
  <block id="b422f32358378d09816e71d40f1e61a5" category="paragraph"><block ref="b422f32358378d09816e71d40f1e61a5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5b8f58b7bc1f29e709814ebb731683ae" category="list-text">当节点重新启动并显示初始屏幕时，按 F11 进入启动菜单。从启动菜单中，导航到并单击 ATEN Virtual CDROM/YSOJ 。</block>
  <block id="e6039b54bf80d2586ad6a914b9c3046b" category="paragraph"><block ref="e6039b54bf80d2586ad6a914b9c3046b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="375f33349baec24af52224f9e0a202fa" category="list-text">在下一屏幕中，导航到并单击安装 RHV 4.3 。此操作将加载映像，运行预安装脚本并启动 Red Hat Enterprise Linux 系统安装程序 Anacondation 。</block>
  <block id="e3474dd489ea5f952af0affc73921c35" category="paragraph"><block ref="e3474dd489ea5f952af0affc73921c35" category="inline-image-macro-rx" type="image"></block></block>
  <block id="975e3e6675ce7d8990ec312a1824fd62" category="list-text">此时将显示安装欢迎屏幕。选择首选语言，然后单击下一步。</block>
  <block id="07b4919c40de34011728ce43a44f5cfd" category="paragraph"><block ref="07b4919c40de34011728ce43a44f5cfd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3519611fbf1a50e6741961d0aea68d69" category="list-text">在下一个屏幕中，在日期和时间下选择您的时区。默认值为 UTC 。但是， NetApp 建议您在此屏幕上为您的环境配置 NTP 服务器。然后选择键盘语言并单击 Done 。</block>
  <block id="2c661a57e427bd935422f5d9f2fa78fb" category="paragraph"><block ref="2c661a57e427bd935422f5d9f2fa78fb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4a94b099630dbd1818a0a47e84c11f10" category="list-text">接下来，单击安装目标。在安装目标屏幕中，选择要安装 RHV-H 的驱动器验证是否已在分区部分中选择自动配置分区。或者，您也可以选中加密我的数据旁边的框来启用加密。单击 Done 确认设置。</block>
  <block id="682193e38014cd662b3003eeb8fbe0bd" category="paragraph"><block ref="682193e38014cd662b3003eeb8fbe0bd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ef17c466bc88072cf8fc8b4140111b64" category="list-text">单击网络和主机名。在屏幕底部提供所需的主机名。然后单击底部的（ + ）按钮。从下拉列表中选择 Bond ，然后单击 Add 。</block>
  <block id="fc1986b7825132b23ae501006100a14e" category="paragraph"><block ref="fc1986b7825132b23ae501006100a14e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="416f827f9e35907ddbc417b755f6c693" category="list-text">接下来，在绑定配置屏幕中，单击添加将成员接口添加到绑定接口。</block>
  <block id="a55bb790bc2265b9538828dfee56f81c" category="paragraph"><block ref="a55bb790bc2265b9538828dfee56f81c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="192bb8d95b3287e2a1ac731e4e8ad913" category="list-text">从下拉列表中选择以太网，表示以太网接口已添加为绑定接口的成员。单击创建。</block>
  <block id="3c05a3ee11de3709bec425f52bbd4656" category="paragraph"><block ref="3c05a3ee11de3709bec425f52bbd4656" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6b3ae51469fd6ca791add51c5042a59d" category="list-text">从从 1 配置屏幕的设备下拉列表中，选择以太网接口。验证 MTU 是否设置为 9000 。单击保存。</block>
  <block id="4e255ff7c113f7836ee62d40b7643828" category="paragraph"><block ref="4e255ff7c113f7836ee62d40b7643828" category="inline-image-macro-rx" type="image"></block></block>
  <block id="aa9917a8e3467f35f563745feba5e382" category="list-text">重复步骤 12 ， 13 和 14 ，将另一个以太网端口添加到 bond0 接口。</block>
  <block id="ab2a4169a2d8bade79cc14bdc0c34c92" category="list-text">从绑定配置屏幕的模式下拉列表中，为 LACP 选择 802.3ad 。验证 MTU 是否设置为 9000 。然后单击保存。</block>
  <block id="cb2394857467e05c8acf2a676cf336d7" category="paragraph"><block ref="cb2394857467e05c8acf2a676cf336d7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fd7328c506460dbd4d29bfeb4a52399e" category="list-text">为带内管理网络创建 VLAN 接口。再次单击（ + ）按钮，从下拉列表中选择 VLAN ，然后单击创建。</block>
  <block id="488815d47c8d0e693551f555c8fe1471" category="paragraph"><block ref="488815d47c8d0e693551f555c8fe1471" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bd924a5d1d712e0e83e8f5415779089a" category="list-text">在编辑 VLAN 连接屏幕的父接口下拉列表中选择 bond0 ，输入带内管理网络的 VLAN ID 。以 `bond` `0.&lt;` `vlan_id` ` &gt;` 格式提供 VLAN 接口的名称。</block>
  <block id="9aaee8ba756efa1c1129af945bde6968" category="paragraph"><block ref="9aaee8ba756efa1c1129af945bde6968" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9871552368e4eb9a0117a52b93d43602" category="list-text">在编辑 VLAN 连接屏幕中，单击 IPv4 设置子选项卡。在 IPv4 设置子选项卡中，配置与带内管理网络对应的网络地址，网络掩码，网关和 DNS 服务器。单击保存以确认设置。</block>
  <block id="b71371f112b57164109cebcee3de5f71" category="paragraph"><block ref="b71371f112b57164109cebcee3de5f71" category="inline-image-macro-rx" type="image"></block></block>
  <block id="288ef0ae461731b1236c3c73a6a68c30" category="list-text">为存储网络创建 VLAN 接口。再次单击（ + ）按钮，从下拉列表中选择 VLAN ，然后单击创建。在编辑 VLAN 连接屏幕的父接口下拉列表中选择 bond0 ，输入存储网络的 VLAN ID ，并以 `bond` `0.&lt;` `vlan_id` ` &gt;` 格式提供 VLAN 接口的名称。将 MTU 调整为 9000 以支持巨型帧。单击保存。</block>
  <block id="cbe331f034802133ea0447d72e4ff232" category="paragraph"><block ref="cbe331f034802133ea0447d72e4ff232" category="inline-image-macro-rx" type="image"></block></block>
  <block id="363d9a792ecf820f451f66b4147a7cdf" category="list-text">在编辑 VLAN 连接屏幕中，单击 IPv4 设置子选项卡。在 IPv4 设置子选项卡中，配置与存储网络对应的网络地址和网络掩码。单击保存以确认设置。</block>
  <block id="78d6304a83ad923d09bbae888cf1745c" category="paragraph"><block ref="78d6304a83ad923d09bbae888cf1745c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="381ebab2ad050baba49bd872fe8d31a7" category="list-text">确认网络接口已启动，然后单击 Done 。</block>
  <block id="71a5c2158bae16b30612e2687e6ba4c9" category="paragraph"><block ref="71a5c2158bae16b30612e2687e6ba4c9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="03a0109742e95ef680c5a85021a75baa" category="list-text">向导导航回配置页面后，单击 Begin Installation 。下一个屏幕将提示您配置根密码，并可选择创建另一个用户以登录到 RHV-H</block>
  <block id="f34f47f6fe7bf7fcce9da305556fbcdd" category="paragraph"><block ref="f34f47f6fe7bf7fcce9da305556fbcdd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7d8ae2ea3f4f5ab293603e478d7c2570" category="list-text">安装完成后，通过导航到虚拟控制台中的 Virtual media &gt; Virtual Storage 并单击插件来卸载 ISO 文件。然后，在 Anacondas 图形用户界面上单击重新启动以完成安装过程。然后，此节点将重新启动。</block>
  <block id="b7eaae830343c0db145fb966b2cd625a" category="paragraph"><block ref="b7eaae830343c0db145fb966b2cd625a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bc50e94c962fafad0579d8c1a4dac2aa" category="paragraph">节点启动后，它将显示登录屏幕。</block>
  <block id="5f74e5e5dfb59594bd05971d8fbc3956" category="paragraph"><block ref="5f74e5e5dfb59594bd05971d8fbc3956" category="inline-image-macro-rx" type="image"></block></block>
  <block id="007cb7a1905f6087c3c739144e7a93a0" category="list-text">安装完成后，您必须注册 HV-HH 并启用所需的存储库。打开浏览器，然后使用安装期间提供的根凭据登录到 Cockpit 用户界面，网址为 `https://&lt;HostFQDN/IP&gt;:9090` 。</block>
  <block id="9773e53279409fecda260c1a78ef5129" category="paragraph"><block ref="9773e53279409fecda260c1a78ef5129" category="inline-image-macro-rx" type="image"></block></block>
  <block id="42499d87d9a4cfba62f6d2777b69d636" category="list-text">导航到 localhost &gt; 订阅，然后单击注册。输入您的 Red Hat Portal 用户名和密码，单击将此系统连接到 Red Hat Insights 复选框，然后单击注册。系统会自动订阅 Red Hat 虚拟化主机授权。</block>
  <block id="b1bfc56f086e8e1e4adb58239a79981e" category="paragraph">Red Hat Insights 可对已注册系统进行持续分析，从而主动识别物理，虚拟和云环境中对可用性，安全性，性能和稳定性的威胁。</block>
  <block id="a59d362da9b9ce9c104706bb35116f55" category="paragraph"><block ref="a59d362da9b9ce9c104706bb35116f55" category="inline-image-macro-rx" type="image"></block></block>
  <block id="373333ed9ba4306bcedb0868b5d31507" category="list-text">导航到 localhost &gt; Terminal 以显示命令行界面。您也可以使用任何 SSH 客户端登录到 RHV- H 命令行界面。确认已附加所需的订阅，然后启用 Red Hat Virtualization Host 7 存储库以允许进一步更新，并确保所有其他存储库均已禁用。</block>
  <block id="893353607d603cabcc1724027143944a" category="list-text">在控制台中，运行以下命令，修改 iSCSI 启动程序 ID ，使其与先前在 Element 访问组中设置的 ID 匹配。</block>
  <block id="3a75126400c02ecb4b4b131df2f1b2e4" category="list-text">启用并重新启动 iscsid 服务。</block>
  <block id="94463842fcb46f2067b185655d1fd1b5" category="list-text">重复步骤 1 至 29 ，安装并准备另一个 RHV 主机。</block>
  <block id="e40131725097058ed8f8d067e1dc5ecf" category="inline-link-macro">下一步： 5.将 RHV Manager 部署为一个自托管引擎</block>
  <block id="897a10023083ec2890d70ede2cfb28de" category="paragraph"><block ref="897a10023083ec2890d70ede2cfb28de" category="inline-link-macro-rx"></block></block>
  <block id="96b13e9c0174dc3fa775b65ed5ae5681" category="doc">3. 在 HCI 存储节点上部署 Element 存储系统：采用 RHV 的 NetApp HCI</block>
  <block id="019eaaf672fc97f80a432cfa0be79722" category="section-title">基本 NetApp Element 存储设置</block>
  <block id="9fc3eba6c535e14ed2041ef053aeed82" category="paragraph">NetApp Element 集群设置的执行方式与独立的 NetApp SolidFire 存储设置类似。这些步骤将在节点已进行机架安装和布线且已使用控制台在每个节点上配置 IPMI 端口后开始。要设置存储集群，请完成以下步骤：</block>
  <block id="59239eed207342ca9f8110e364c3fe8e" category="list-text">访问集群中存储节点的带外管理控制台，并使用默认凭据 admin/admin 登录。</block>
  <block id="b85f1107dcfe7fe4f0c3920e8431dbf8" category="paragraph"><block ref="b85f1107dcfe7fe4f0c3920e8431dbf8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7d66eaa15c2bcdce660ae5dfa02b821c" category="list-text">导航到网络 &gt; 网络配置 &gt; 绑定 1G （管理）并配置绑定 1G 接口。绑定 1G 接口应处于主动被动绑定模式，并且必须静态设置 IP ，网络掩码和网关。其 VLAN 必须与为环境定义的 IB 管理网络和 DNS 服务器相对应。然后单击确定。</block>
  <block id="a6857519f446d24d27d726627df38a8f" category="paragraph"><block ref="a6857519f446d24d27d726627df38a8f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ac0e20e127d973eaa9dedf25d99c7b29" category="list-text">选择 Bond10G （存储）并配置 Bond10G 接口。绑定 10G 接口必须处于 LACP 绑定模式，并将 MTU 设置为 9000 以启用巨型帧。必须为其分配定义的存储 VLAN 上可用的 IP 地址和网络掩码。输入详细信息后，单击确定。</block>
  <block id="17dd985f1b0f1ae8b794720d90f242a7" category="paragraph"><block ref="17dd985f1b0f1ae8b794720d90f242a7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="06c9e599908bd4948d261f100843b498" category="list-text">返回初始屏幕，导航到 Cluster Settings ，然后单击 Change Settings 。输入所选的集群名称，然后单击确定。</block>
  <block id="6e77d918a87665d2fd4bcc321cf225e4" category="paragraph"><block ref="6e77d918a87665d2fd4bcc321cf225e4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="badd2f47b1b1a95091055446f6ade69f" category="list-text">对所有 HCI 存储节点重复步骤 1 至 5 。</block>
  <block id="65257ceb02c557f601cd7287f515dd97" category="list-text">配置完所有存储节点后，请使用 Web 浏览器登录到其中一个存储节点的 IB 管理 IP 。此时将显示设置页面以及创建新集群对话框。此页面配置了管理 VIP ，存储 VIP 以及 Element 集群的其他详细信息。系统会自动检测上一步中配置的存储节点。请确保未选中集群中不需要的任何节点，然后再继续。接受最终用户许可协议，然后单击创建新集群以开始集群创建过程。启动集群需要几分钟时间。</block>
  <block id="67f373428b871f995b83c7a2ef183be7" category="admonition">在某些情况下，访问 IB 管理地址会自动连接到端口 442 并启动 NDE 设置向导。如果发生这种情况，请从 URL 中删除端口规范并重新连接到页面。</block>
  <block id="b633fa0e4cf669247bb1f6fc3d4d1693" category="paragraph"><block ref="b633fa0e4cf669247bb1f6fc3d4d1693" category="inline-image-macro-rx" type="image"></block></block>
  <block id="25df4f3dae80e890edf1619f60b23495" category="list-text">创建集群后，它会重定向到分配的 MVIP 地址上可用的 Element 集群管理界面。使用上一步中提供的凭据登录。</block>
  <block id="6ff2589172f725456a0c7ba1a706e6d1" category="list-text">登录后，集群会自动检测可用驱动器的数量，并请求确认添加所有驱动器。单击添加驱动器可一次性添加所有驱动器。</block>
  <block id="0eccb10192a0d0422b835aa4c2a839c2" category="list-text">Element 集群已准备就绪，可以使用。导航到 "Cluster"&gt;"Nodes" ，所有四个节点均应处于运行状况良好且驱动器处于活动状态。</block>
  <block id="c2659d1ed54f085f73019b58bea98d39" category="paragraph"><block ref="c2659d1ed54f085f73019b58bea98d39" category="inline-image-macro-rx" type="image"></block></block>
  <block id="209f89c86191aaaeb263029ed06d7eb2" category="section-title">支持 RHV 部署的 Element 存储配置</block>
  <block id="bea4bdadc93f5d0a7faefcd5f060f44f" category="paragraph">在我们的 NetApp HCI for Red Hat Virtualization 解决方案中，我们使用 NetApp Element 存储系统为 RHV 的共享存储域要求提供后端存储支持。RHV 部署的自行托管引擎架构要求至少为托管引擎存储域和子虚拟机数据域配置两个存储域，每个存储域的值为―。</block>
  <block id="3f01317acffd4c9a13b3f49096d6551a" category="paragraph">对于此部分部署，您必须配置一个帐户，两个大小合适的卷以及关联的启动程序。然后，将这些组件映射到一个访问组，该访问组允许 RHV 主机映射要使用的块卷。其中每个操作都可以通过 Web 用户界面或 Element 系统的原生 API 来执行。对于本部署指南，我们将介绍 GUI 的各个步骤。</block>
  <block id="13d3a21e280672bcb5e81c121259edd9" category="paragraph">使用 Web 浏览器以其 MVIP 地址登录到 NetApp Element 集群图形用户界面。导航到 Management 选项卡并完成以下步骤：</block>
  <block id="45b60b888b3f8a1934854c4aafd28138" category="list-text">要创建帐户，请转到 Accounts 子选项卡，然后单击 Create Account 。输入您选择的名称，然后单击 Create Account 。</block>
  <block id="0910c35ff78df7356dd191304135712e" category="paragraph"><block ref="0910c35ff78df7356dd191304135712e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="756ace85893c5184eba7d142ebbb1086" category="list-text">要创建卷，请完成以下步骤：</block>
  <block id="9fbdc20a2550797e6b0c038c26d27ce2" category="list-text">导航到 Volumes 子选项卡，然后单击 Create Volume 。</block>
  <block id="2351d3053392326942953eef892f77cf" category="list-text">要为自托管引擎存储域创建卷，请输入所选名称，选择在最后一步中创建的帐户，输入自托管引擎存储域的卷大小，配置 QoS 设置，然后单击创建卷。</block>
  <block id="f094a6824812c58ab1291af5d1846f7e" category="paragraph"><block ref="f094a6824812c58ab1291af5d1846f7e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="48c4eb91f84f42e122ee5ca298f558c8" category="paragraph">托管引擎卷的最小大小为 75 GB 。在我们的设计中，我们增加了额外的空间，以便在必要时将未来的块区添加到 RHV-M 虚拟机中。</block>
  <block id="a0eb6c65dbb109b7c1106d9835264dae" category="list-text">要为子虚拟机数据存储域创建卷，请输入所选名称，选择在最后一步中创建的帐户，输入数据存储域的卷大小，配置 QoS 设置并单击创建卷。</block>
  <block id="0c59a8e3fcde38bda253caa63341ef97" category="paragraph"><block ref="0c59a8e3fcde38bda253caa63341ef97" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b5fbdc47d3fc6c07f071c7415c882cb7" category="paragraph">数据域的大小取决于环境中运行的 VM 类型以及支持这些 VM 所需的空间。调整此卷的大小以满足您环境的需求。</block>
  <block id="ad9519f1c97499f0b5d6ce2034d350f7" category="list-text">要创建启动程序，请完成以下步骤：</block>
  <block id="7bd7b66d903742045dcfb6b853f069f6" category="list-text">转至 Initiators 子选项卡，然后单击 Create Initiator 。</block>
  <block id="2a040b0028e0ef41844fe0afb5fc7733" category="list-text">选择 "Bulk Create Initiators" 单选按钮并使用逗号分隔值输入两个 RHV-H 节点的启动程序详细信息。然后单击添加启动程序，输入启动程序的别名，然后单击勾选按钮。验证详细信息，然后单击 Create Initiators 。</block>
  <block id="ebb18293ec3a47d11a6ed46c8ba881a1" category="paragraph"><block ref="ebb18293ec3a47d11a6ed46c8ba881a1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7c2d17b40f010fe1c0f56066d53b01a4" category="list-text">要创建访问组，请完成以下步骤：</block>
  <block id="961797bae0c8897a067c03e8856c4a0b" category="list-text">转至 Access Groups 子选项卡，然后单击 Create Access Groups 。</block>
  <block id="c6cceae76b8f173a580f445878b79a26" category="list-text">输入您选择的名称，为上一步创建的两个 RHV-H 节点选择启动程序，选择卷，然后单击创建访问组。</block>
  <block id="c3bfe106beab7d0328c6029e714f4af8" category="paragraph"><block ref="c3bfe106beab7d0328c6029e714f4af8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6a0c1cbfee01b3683b2eace555644077" category="inline-link-macro">下一步： 4.在 HCI 计算节点上部署 RHV-H 虚拟机管理程序</block>
  <block id="b22098e496bd0737e0f47c67299c532a" category="paragraph"><block ref="b22098e496bd0737e0f47c67299c532a" category="inline-link-macro-rx"></block></block>
  <block id="c242619c4a1d16df102b36f67403eaee" category="doc">架构概述：采用 RHV 的 NetApp HCI</block>
  <block id="930dd6e7cbd550494f96b487d9d38ec8" category="section-title">硬件要求</block>
  <block id="69e2fbd00433a8aa62076b7f40835195" category="paragraph">下表列出了实施解决方案所需的最低硬件组件数量。解决方案的特定实施中使用的硬件组件可能会因客户要求而异。</block>
  <block id="424a4495a18d20d9de520585757ad8f3" category="cell">数据交换机</block>
  <block id="20d6b23a8caeccd7fa8bc122a9ac9680" category="cell">Mellanox SN2010</block>
  <block id="3443f313749c6bccb13d763b4c679d00" category="cell">管理交换机</block>
  <block id="fe922743f57bd9fe09073e06dfaa8562" category="cell">Cisco Nexus 3048</block>
  <block id="9d273bd32c1fceb91b7d6a4d40e98bdd" category="section-title">软件要求</block>
  <block id="d9ae1ecd6158beb6acd24c9f59d0498e" category="paragraph">下表列出了实施解决方案所需的软件组件。在任何解决方案实施中使用的软件组件可能会因客户要求而异。</block>
  <block id="595f81bc57177d1f441b8063192b6f81" category="cell">基础架构（计算 / 存储）</block>
  <block id="d7e9de508a9d8614518f927d3f4326d4" category="paragraph"><block ref="d7e9de508a9d8614518f927d3f4326d4" category="inline-link-macro-rx"></block></block>
  <block id="9a583f36280ff86a53eb654d88487c23" category="doc">2. 配置数据交换机：采用 RHV 的 NetApp HCI</block>
  <block id="73082ba55f2a795727d459626dc30f40" category="paragraph">此部署操作步骤中使用 Mellanox SN2010 交换机为计算和存储节点的数据平面提供 25Gbps 连接。这些步骤将在对交换机进行机架安装，布线并完成初始设置过程后开始。要配置交换机以提供与基础架构的数据连接，请完成以下步骤：</block>
  <block id="50e42a66f16e39a6cb56d3083d6386a0" category="section-title">创建 MLAG 集群以提供容错功能</block>
  <block id="89da914421220bdff98ba4846fcbb879" category="list-text">在每个 Mellanox SN210 交换机上运行以下命令以进行常规配置：</block>
  <block id="b63174edbe5be9ed958dfa5a9ae5067f" category="list-text">进入配置模式：</block>
  <block id="253c5c2645126589152b48680d63f2e2" category="list-text">启用对等链路（ IPL ）所需的 LACP 。</block>
  <block id="150984b6e074ae24f9c373a427ec849e" category="list-text">启用链路层发现协议（ LLDP ）。</block>
  <block id="693d27026e6c4f9257cd85131063bdf4" category="list-text">启用 IP 路由。</block>
  <block id="f0c2d000d9602b08ecb9de3c678a45b0" category="list-text">启用 MLAG 协议。</block>
  <block id="630baa494373a191c9ca44a6647271f8" category="list-text">启用全局 QoS 。</block>
  <block id="dcc606b0534e6653217486b9d9b9751c" category="list-text">要使 MLAG 正常运行，必须通过 IPL 使交换机彼此建立对等关系。此链路应包含两个或更多物理链路，以实现冗余。IPL 的 MTU 设置为巨型帧（ 9216 ），默认情况下，所有 VLAN 均处于启用状态。对域中的每个交换机运行以下命令：</block>
  <block id="1763aec39bafecb33c97314bf1d572c4" category="list-text">为 IPL 创建端口通道 10 。</block>
  <block id="c3993cecaba52e182842ee625eda6b7f" category="list-text">将接口 ETH 1/20 和 1/22 添加到端口通道。</block>
  <block id="d3c10c34bdc692752b332778e9765cff" category="list-text">创建一个超出专用于 IPL 流量的标准范围的 VLAN 。</block>
  <block id="75d707db91f912e2c6a77fa1662baeef" category="list-text">将端口通道定义为 IPL 。</block>
  <block id="4e0a62c1d9181695811c93b16fd98b4f" category="list-text">为每个 IPL 成员设置一个 IP （不可路由；它不会在交换机外部公布）。</block>
  <block id="0d9b97cebfe0a14f18dfe190e56bd759" category="list-text">为这两台交换机创建唯一的 MLAG 域名并分配一个 MLAG 虚拟 IP （ VIP ）。此 IP 用于在两个交换机之间发送保持活动状态的检测信号消息。在域中的每个交换机上运行以下命令：</block>
  <block id="223aae7e4e7f0a603e71f81af394872d" category="list-text">创建 MLAG 域并设置 IP 地址和子网。</block>
  <block id="3a247fa5ad866e049ff9d9c201f6648c" category="list-text">为系统 MLAG 创建虚拟 MAC 地址。</block>
  <block id="224494294db184e9154d8772f6c3a32d" category="list-text">配置 MLAG 域，使其全局处于活动状态。</block>
  <block id="4a2b88b2dc173917794fdcd409680299" category="paragraph">用于 MLAG VIP 的 IP 必须与交换机管理网络（ mgmt0 ）位于同一子网中。此外，使用的 MAC 地址可以是任何单播 MAC 地址，并且必须在 MLAG 域中的两个交换机上将其设置为相同的值。</block>
  <block id="1577c85ca04589e3425aca3c28ed2944" category="section-title">配置端口以连接到存储和计算主机</block>
  <block id="bf59ce02e8ca7784bb215b6177debea0" category="list-text">创建支持 NetApp HCI 服务所需的每个 VLAN 。在域中的每个交换机上运行以下命令：</block>
  <block id="71b980b24bb76357b50317f33bc6dbfa" category="list-text">创建 VLAN 。</block>
  <block id="ad3b467969a357c0c5d80f4d5bbde8ad" category="list-text">为每个 VLAN 创建名称，以便于进行核算。</block>
  <block id="29597348f9294081178e48b825284ce2" category="list-text">在标识的端口上创建 MLAG 接口和混合 VLAN ，以便在交换机之间分布连接并为 NetApp HCI 计算节点标记适当的 VLAN 。</block>
  <block id="249a0bd59c624c397b41a7a1cf87d3cb" category="list-text">选择要使用的端口。</block>
  <block id="50b81b53deb92f46cafd3af17f5aefbb" category="list-text">设置每个端口的 MTU 。</block>
  <block id="40fba3ff49ed4dc2f0200d6b6f972b2a" category="list-text">修改每个端口的生成树设置。</block>
  <block id="fe700b5d1e1ef86fed8587d36e7c7a56" category="list-text">将交换机端口模式设置为混合模式。</block>
  <block id="e5395739faaebd0901e4d91678ff230b" category="list-text">为要修改的每个端口创建说明。</block>
  <block id="e51790a9e4d15f47e03a23da2eaf1431" category="list-text">创建和配置 MLAG 端口通道。</block>
  <block id="5c326dca4a1b8b460e7b5c626c899c39" category="list-text">为 NetApp HCI 环境标记适当的 VLAN 。</block>
  <block id="7bad83781990a07dfea09342ed41200d" category="list-text">创建标识的 MLAG 接口和混合 VLAN 端口，以便在交换机之间分布连接并为 NetApp HCI 存储节点标记适当的 VLAN 。</block>
  <block id="235711ba9dade14e14ffb701451ad765" category="list-text">选择要使用的端口。</block>
  <block id="b727a8d8015603ca569aa58b1568229f" category="list-text">修改每个端口的生成树设置。</block>
  <block id="129f181bc1a302ab861529ab42199bbc" category="list-text">为存储环境标记适当的 VLAN 。</block>
  <block id="895cb0f784d2b166162c02483d18c818" category="admonition">本节中的配置以单个端口的配置为例。此外，还必须为解决方案中连接的每个附加端口以及 MLAG 域中第二个交换机的关联端口运行这些端口。NetApp 建议更新每个端口的说明，以反映正在另一交换机上进行布线和配置的设备端口。</block>
  <block id="8361282ba4a8508d49122f910af675ec" category="section-title">为交换机创建上行链路端口</block>
  <block id="c81e51afae48a3ce8fedb46c06d4d6b3" category="list-text">创建一个 MLAG 接口，以便从核心网络为两个 Mellanox SN2010 交换机提供上行链路。</block>
  <block id="d029d7c48e57365b0cdcec47dc169814" category="list-text">配置 MLAG 成员。</block>
  <block id="10b235aa64c5b07ed993fa03f77072d0" category="list-text">将交换机端口模式设置为混合模式，并允许核心上行链路交换机上的所有 VLAN 。</block>
  <block id="4bfc9eb591ea381263c32fad09430373" category="list-text">验证 MLAG 接口是否已启动。</block>
  <block id="7b7b9605c42ffe54fe45241be93c0afd" category="admonition">此外，本节中的配置还必须在 MLAG 域中的第二台交换机上运行。NetApp 建议更新每个端口的说明，以反映正在另一交换机上进行布线和配置的设备端口。</block>
  <block id="73fcfd8e41ef604979ab205a2fc6d99b" category="inline-link-macro">下一步： 3.在 HCI 存储节点上部署 Element 存储系统</block>
  <block id="118b32644f42b8ac51bcff00b20a3cfd" category="paragraph"><block ref="118b32644f42b8ac51bcff00b20a3cfd" category="inline-link-macro-rx"></block></block>
  <block id="f25b0cb26c89dd3ef8ffb37f4f1491d0" category="summary">TR-4875</block>
  <block id="cc26d1e5d8ef80403be9e1e8d8dc2bc5" category="doc">TR-4857 ：采用 Cisco ACI 的 NetApp HCI</block>
  <block id="2655bb4b131b128000733ead3f928b65" category="paragraph">NetApp 公司 Abhinav Singh ， Nikhil M Kulkarni</block>
  <block id="db6d44bade37c389a1c8a517da81fa61" category="paragraph">Cisco Application Centric Infrastructure （ Cisco ACI ）是一款行业领先，安全，开放且全面的软件定义网络（ Software-Defined Networking ， SDN ）解决方案。Cisco ACI 可从根本上简化，优化和加快基础架构部署和管理，并加快应用程序部署生命周期。事实证明，部署在数据中心的 Cisco ACI 可与具有完全互操作性的 NetApp HCI 配合使用。您可以使用 Cisco ACI 管理计算，存储和访问的以太网网络。您可以为服务器到服务器和虚拟机（ VM ）到 VM 通信建立和管理安全网段，并通过 iSCSI 从服务器到 NetApp HCI 存储实现安全存储网络访问。这种级别的端点到端点网络安全性使客户能够以更安全的方式构建和运行 NetApp HCI 。</block>
  <block id="5eed1e48d8861a1192e8694a3d24021b" category="inline-link-macro">下一步：用例</block>
  <block id="da2a72d846719c4ebf381326b3254f40" category="paragraph"><block ref="da2a72d846719c4ebf381326b3254f40" category="inline-link-macro-rx"></block></block>
  <block id="53c88dd42b2cc2b7f11ce1379590d592" category="doc">1. 配置管理交换机：采用 RHV 的 NetApp HCI</block>
  <block id="085295e25252148fdb650bd093f0de7f" category="paragraph">此部署操作步骤中使用了 Cisco Nexus 3048 交换机，以便为计算和存储节点的带内和带外管理提供 1 Gbps 连接。这些步骤将在交换机机架安装，通电并完成初始设置过程后开始。要配置交换机以提供与基础架构的管理连接，请完成以下步骤：</block>
  <block id="130cc8430f396b8ed0a3da439bf0b0cf" category="section-title">为 Cisco Nexus 启用高级功能</block>
  <block id="5696c86e0a7fc66f2310f03f154da57c" category="paragraph">在每个 Cisco Nexus 3048 交换机上运行以下命令以配置高级功能：</block>
  <block id="023906d07e6ad716333ea0a7acd3e6bd" category="list-text">启用 VLAN 功能。</block>
  <block id="485adb088223a08c6478e8e87cc436e9" category="list-text">启用 LACP 。</block>
  <block id="13c1f26554a1e813d653a4e62e2865e9" category="list-text">启用虚拟端口通道（ vPC ）。</block>
  <block id="869609b509b80c2d64b2204eb25f92c1" category="list-text">设置全局端口通道负载平衡配置。</block>
  <block id="54a215e66984928a3c43e8b1820e1106" category="list-text">执行全局生成树配置</block>
  <block id="113544406de6eeed5dbf44151977bfd0" category="section-title">配置交换机上的端口以进行带内管理</block>
  <block id="e5e81ed686114a6f0cb402637813911c" category="list-text">运行以下命令创建 VLAN 以进行管理：</block>
  <block id="f987a6d5584bcb1d9bca51f47c70028a" category="list-text">将端口 eth1/2-32 配置为连接到每个 HCI 存储节点上的管理接口的 VLAN 中继端口。</block>
  <block id="80a85c74bbfc4d19dda99990f5a6edb0" category="section-title">配置交换机上的端口以进行带外管理</block>
  <block id="d486872fca960700436ebbe85f49be1c" category="paragraph">运行以下命令，配置用于为每个 HCI 节点上的 IPMI 接口布线的端口。</block>
  <block id="99f36431cdef0f1aef03747ab274832c" category="admonition">在经验证的配置中，我们使用缆线将奇节点 IPMI 接口连接到 Switch-01 ，并将偶节点 IPMI 接口连接到 Switch-02 。</block>
  <block id="51b3c4d7b19f35820f69918d3024a505" category="section-title">创建 vPC 域以确保容错</block>
  <block id="37432eb4ff7908f61dd07daa9ee8d04b" category="list-text">激活两台交换机之间用于 vPC 对等链路的端口。</block>
  <block id="632178b35772a6ede95694986127215b" category="list-text">执行 vPC 全局配置。</block>
  <block id="dc5a8c02a0384f12662145af9a2c4b3d" category="inline-link-macro">下一步： 2.配置数据交换机</block>
  <block id="1424bd63904de448985196c7034db78c" category="paragraph"><block ref="1424bd63904de448985196c7034db78c" category="inline-link-macro-rx"></block></block>
  <block id="6d421214d321bc1d4a97bf67e6e0796a" category="doc">NVA-1148 ：采用 Red Hat 虚拟化的 NetApp HCI</block>
  <block id="0ee3fcaf8e0bcd9eb071eb9bafb453dc" category="paragraph">NetApp 公司 Nikhil M Kulkarni 的 Alan Cowles</block>
  <block id="7bd592c0e81ef01cf96873dfac65be99" category="paragraph">采用 Red Hat 虚拟化的 NetApp HCI 是一种经验证的最佳实践架构，用于以可靠的方式部署内部虚拟数据中心环境。</block>
  <block id="d1933dd1146cf1b3ddcf6f5e561420e8" category="paragraph">本架构参考文档可作为解决方案上 Red Hat Virtualization NetApp HCI 的设计指南和部署验证。本文档所述的架构已通过 NetApp 和 Red Hat 的主题专家的验证，可为在您自己的企业数据中心环境中使用基于 NetApp HCI 的 Red Hat 虚拟化进行企业虚拟数据中心部署提供最佳实践实施。</block>
  <block id="b1caa7fdeb3fa74b2bb4f3c5fade5d1d" category="paragraph">基于 Red Hat 虚拟化解决方案的 NetApp HCI for Red Hat OpenShift 旨在为客户提供卓越的价值，其使用情形如下：</block>
  <block id="0a4f8f484ffce29b1367b0ccd672c788" category="list-text">利用 NetApp HCI 实现按需扩展的基础架构</block>
  <block id="d79a24b7b6992a3a93de838e3ef4ace2" category="list-text">Red Hat 虚拟化中的企业虚拟化工作负载</block>
  <block id="7fe2c46db6c8b855ff40bdf65757fb23" category="section-title">NetApp HCI 与 Red Hat 虚拟化的价值主张和差异化优势</block>
  <block id="98b7fb1346d79bb4c5b3c53cd1cfee0b" category="paragraph">NetApp HCI 在此虚拟基础架构解决方案中具有以下优势：</block>
  <block id="118d7c8254904ebf5ec57b645ee404fc" category="list-text">一种可独立扩展计算和存储的分解架构。</block>
  <block id="dee7230f57a6e890ba7a48c7cdceff03" category="list-text">消除独立 NetApp HCI 存储节点上的虚拟化许可成本和性能税。</block>
  <block id="bf00efffd8bccf5d0388c2becd59f6e2" category="list-text">NetApp Element 存储可为每个存储卷提供服务质量（ QoS ），并为 NetApp HCI 上的工作负载提供有保障的存储性能，从而防止相邻工作负载对性能产生负面影响。</block>
  <block id="a937d195daefaa1d90c56d17b7d69da3" category="list-text">借助 NetApp 提供支持的 Data Fabric ，可以将数据从内部位置复制到内部位置或复制到云中，从而使数据更接近应用程序需要数据的位置。</block>
  <block id="4f1bbf9d032e546c6e853e1d0f2d1c9e" category="list-text">通过 NetApp 支持或 Red Hat 支持提供支持。</block>
  <block id="b7131d1f33fc143b29433e641649eee2" category="section-title">NetApp HCI 设计</block>
  <block id="41c7c1ff1f044975a559e725a1696222" category="paragraph">NetApp HCI 是业内首款领先的分解式混合云基础架构，可提供超融合解决方案的广泛认可优势。其优势包括降低了 TCO ，简化了虚拟化工作负载的采集，部署和管理，同时还允许企业客户根据需要独立扩展计算和存储资源。采用 Red Hat 虚拟化的 NetApp HCI 提供了一个基于 Red Hat Enterprise Linux 的开源企业虚拟化环境。</block>
  <block id="fc96a4bbe621cef3ecdfbc69e489dc52" category="paragraph">通过提供灵活的统包基础架构平台， NetApp HCI 可以帮助您加快运行企业级虚拟化和容器化工作负载的速度。NetApp HCI 的核心设计旨在提供可预测的性能，计算和存储资源的线性可扩展性以及简单的部署和管理体验。</block>
  <block id="246129e71106c7744ddaa886e5a311a0" category="section-title">可预测</block>
  <block id="ee8e498c69320fb92c83fb36d3fac69f" category="paragraph">在多租户环境中，最大的挑战之一是为所有工作负载提供一致且可预测的性能。运行多个企业级工作负载可能会导致资源争用，其中一个工作负载会影响另一个工作负载的性能。NetApp HCI 通过 NetApp Element 软件本机提供的存储服务质量（ QoS ）限制缓解了这一顾虑。Element 支持精细控制每个应用程序和卷，有助于消除资源争用问题，并满足企业性能 SLA 的要求。NetApp HCI 多租户功能有助于消除许多传统的性能相关问题。</block>
  <block id="13b303a6c0d90897b5375ce901acc445" category="section-title">灵活</block>
  <block id="0d2a6013a4794ab36c8290f9d9704855" category="paragraph">前几代超融合基础架构通常需要固定的资源比率，从而将部署限制为四节点和八节点配置。NetApp HCI 是一种可独立扩展计算和存储资源的分解式超融合基础架构。独立扩展可防止成本高昂且效率低下的过度配置，消除控制器虚拟机（ VM ）开销中 10% 到 30% 的 HCI 费用，并简化容量和性能规划。NetApp HCI 提供混合搭配，小型，中型和大型存储和计算配置。</block>
  <block id="efd882a156ecee937f2b957546a4b7d7" category="paragraph">通过提供的架构设计选项，您可以自信地根据自己的需求进行扩展，从而使 HCI 适用于核心第 1 层数据中心应用程序和平台。NetApp HCI 采用机箱或节点级别的组件设计。在由存储或计算节点组成的混合配置中，每个机箱可以容纳四个节点。</block>
  <block id="1fbb1e3943c2c6c560247ac8f9289780" category="section-title">简单</block>
  <block id="33daf9e06c4ada16c0aa0aed653a9410" category="paragraph">IT 社区中的一项驱动任务是简化部署并自动执行日常任务，消除用户出错的风险，同时腾出资源来专注于更有趣，价值更高的项目。NetApp HCI 可以通过简化部署和持续管理来帮助您的 IT 部门提高灵活性和响应能力。</block>
  <block id="040d1bb6aa98ce4cb4e12b1984b10307" category="section-title">业务价值</block>
  <block id="12567ca8a7eeec02f59312641637f809" category="paragraph">使用 Red Hat 产品在开源数据中心执行虚拟化的企业可以按照本文档中所述的建议设计，部署和最佳实践实现此解决方案的价值。在 NetApp HCI 上详细设置的 RHV 在作为企业虚拟化解决方案的一部分进行部署时具有以下几项优势：</block>
  <block id="823d630ca689b27485dccba3681bbeaa" category="list-text">堆栈所有层的高可用性</block>
  <block id="e1ae2d4382aac1fe6d4b49fc0a0aabf4" category="list-text">完整记录的部署过程</block>
  <block id="5a09044e86801d9fbbcf436504f6a079" category="list-text">无中断运行并升级到虚拟机管理程序和管理器虚拟机</block>
  <block id="f96b85e68090b9c8ed04eca583fd3ec9" category="list-text">API 驱动的可编程基础架构，便于管理</block>
  <block id="0cdff7d38ef496f6b5510c5034fedf15" category="list-text">具有性能保证的多租户</block>
  <block id="3d3e4f876e4919c2f960e678bc4c9d44" category="list-text">能够使用企业级功能和支持基于 KVM 运行虚拟化工作负载</block>
  <block id="71d00a17a6d603b0b4ebb168354950db" category="list-text">能够根据工作负载需求独立扩展基础架构</block>
  <block id="60f1384c94275d6958db5f77bc16870b" category="paragraph">采用 Red Hat 虚拟化的 NetApp HCI 认可这些挑战，并通过实施经验证的解决方案部署架构来帮助解决每个问题。</block>
  <block id="d8b778c81ae11eb5edbd4291a3cf8fff" category="section-title">技术概述</block>
  <block id="3572cc887d44ee459b8a07e121d62e28" category="paragraph">借助适用于 Red Hat 虚拟化的 NetApp HCI ，您可以部署一个完全集成的生产级虚拟数据中心，使您能够利用以下功能：</block>
  <block id="8f353b928c1dc37af889089a2aec6660" category="list-text">NetApp HCI 计算和存储节点</block>
  <block id="8f1756862a67c2ae40bb093be3a11a85" category="list-text">专为混合云工作负载设计的企业级超融合基础架构</block>
  <block id="e425eef06db1f32fb10da74d1c3d88b9" category="list-text">NetApp Element 存储软件</block>
  <block id="facf2be4cef7aa76e6e3efccffef0bb2" category="list-text">基于 Intel 的服务器计算节点，包括 NVIDIA GPU 选项</block>
  <block id="8253c03e4478bb8f56c097fa247ffbf6" category="list-text">用于部署和管理虚拟基础架构的企业级虚拟机管理程序解决方案</block>
  <block id="8a6fced53a66a88004ede7d1a20a27f1" category="paragraph">NetApp HCI 是一款企业级离散混合云基础架构（ HCI ）解决方案，可通过一个灵活，可扩展且易于管理的双机架单元（ 2RU ）四节点组件提供计算和存储资源。此外，还可以为其配置 1RU 计算和服务器节点。最低部署包含四个 NetApp HCI 存储节点和两个 NetApp HCI 计算节点。计算节点作为 RHV-H 虚拟机管理程序安装在 HA 集群中。通过添加额外的 NetApp HCI 存储或计算节点以扩展可用资源，可以轻松扩展这种最低部署规模，以满足客户企业工作负载需求。</block>
  <block id="fda73f8bc0ac3b92947fb9214141c1cb" category="paragraph"><block ref="fda73f8bc0ac3b92947fb9214141c1cb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6d8e47f6a040900f54f949b9e99396fb" category="paragraph">适用于 Red Hat 虚拟化的 NetApp HCI 设计在最低初始配置中包含以下组件：</block>
  <block id="9f6d50749072c5115334f1075300caa8" category="list-text">运行 NetApp Element 软件的 NetApp H 系列全闪存存储节点</block>
  <block id="6700ccb4f639c51052e8f6f0e4c2a20f" category="list-text">运行 Red Hat 虚拟化 RHV-H 虚拟机管理程序的 NetApp H 系列计算节点</block>
  <block id="ee3ebc750433a7991f2ac38148306479" category="inline-link">NetApp HCI 产品规格</block>
  <block id="bb7f0fb688504931691c40cec9595645" category="paragraph">有关 NetApp HCI 中计算和存储节点的详细信息，请参见<block ref="a82163c6ea3ec9190ef408eb65418f27" category="inline-link-rx"></block>。</block>
  <block id="25081f134c3a3fcf28c8490cd6c25a73" category="section-title">NetApp Element 软件</block>
  <block id="775659b06800b3c6cea3c8159b603669" category="paragraph">NetApp Element 软件可提供模块化的可扩展性能，每个存储节点均可为环境提供有保障的容量和吞吐量。您还可以指定每个卷的存储 QoS 策略，以支持即使是要求最苛刻的工作负载也能达到专用性能级别。</block>
  <block id="0275545f9f1eead53cabe5378472ae2b" category="section-title">iSCSI 登录重定向和自我修复功能</block>
  <block id="5beaadee5509ac833662f1398edc4caa" category="paragraph">NetApp Element 软件使用 iSCSI 存储协议，这是在传统 TCP/IP 网络上封装 SCSI 命令的标准方式。当 SCSI 标准发生变化或以太网网络性能提高时， iSCSI 存储协议将受益，而无需进行任何更改。</block>
  <block id="84e000f0dec7f01f11bd28f61ec7b9f7" category="paragraph">尽管所有存储节点都有一个管理 IP 和一个存储 IP ，但 NetApp Element 软件会为集群中的所有存储流量公布一个存储虚拟 IP 地址（ SVIP 地址）。在 iSCSI 登录过程中，存储可以响应目标卷已移至其他地址，因此无法继续协商过程。然后，主机将在不需要主机端重新配置的过程中向新地址重新发出登录请求。此过程称为 iSCSI 登录重定向。</block>
  <block id="62910efbcee067307c3f2022fd6adb9c" category="paragraph">iSCSI 登录重定向是 NetApp Element 软件集群的一个关键部分。收到主机登录请求后，节点将根据 IOPS 和卷的容量要求确定集群中应由哪个成员处理流量。卷分布在 NetApp Element 软件集群中，如果单个节点处理的卷流量过多或添加了新节点，则会重新分配这些卷。给定卷的多个副本会在阵列中分配。这样，如果节点发生故障后又发生卷重新分布，则除了注销和登录并重定向到新位置之外，对主机连接不会产生任何影响。通过 iSCSI 登录重定向， NetApp Element 软件集群是一种自我修复型横向扩展架构，能够无中断升级和操作。</block>
  <block id="d367f32d963198c60ea5b2d538c66970" category="section-title">NetApp Element 软件集群 QoS</block>
  <block id="16600c3602f9acbaa2286f34135f6bb8" category="paragraph">通过 NetApp Element 软件集群，可以按卷动态配置 QoS 。您可以使用每个卷的 QoS 设置根据定义的 SLA 控制存储性能。以下三个可配置参数用于定义 QoS ：</block>
  <block id="d91a826908d0c27cf5d21d2152292ab0" category="list-text">* 最小 IOPS* 。 NetApp Element 软件集群为卷提供的最小可持续 IOPS 数。为卷配置的最小 IOPS 是卷的性能保证级别。每个卷的性能不会低于此级别。</block>
  <block id="e7435952ec1a10a26ade10b3ee413140" category="list-text">* 最大 IOPS* 。 NetApp Element 软件集群为特定卷提供的最大可持续 IOPS 数。</block>
  <block id="827b5871d6ce8f2203a567ef3024f072" category="list-text">* 突发 IOPS 。 * 在短时突发情形下允许的最大 IOPS 数。突发持续时间设置是可配置的，默认值为 1 分钟。如果卷运行的 IOPS 低于最大 IOPS 级别，则会累积突发额度。如果性能级别变得非常高并不断推送，则允许卷上的 IOPS 短时突发超过最大 IOPS 。</block>
  <block id="e95bb6f1e85d1ffe0eb983fd5e0fbde8" category="section-title">多租户</block>
  <block id="086d1eacd91102f734387f0266326344" category="paragraph">可通过以下功能实现安全多租户：</block>
  <block id="0a92a575f36ea446a4f76cf482f6e520" category="list-text">* 安全身份验证。 * 质询握手身份验证协议（ Challenge-Handshake Authentication Protocol ， CHAP ）用于安全卷访问。轻量级目录访问协议（ Lightweight Directory Access Protocol ， LDAP ）用于安全访问集群以进行管理和报告。</block>
  <block id="47174872a15594a264456a21ca45dc66" category="list-text">* 卷访问组（ VAG ）。 * 也可以使用 VAG 代替身份验证，将任意数量的 iSCSI 启动程序专用 iSCSI 限定名称（ IQN ）映射到一个或多个卷。要访问 VAG 中的卷，启动程序的 IQN 必须位于该卷组允许的 IQN 列表中。</block>
  <block id="b8200444ed9616ceeae9b0d5ceea1576" category="list-text">* 租户虚拟 LAN （ VLAN ）。 * 在网络级别，使用 VLAN 可提高 iSCSI 启动程序与 NetApp Element 软件集群之间的端到端网络安全性。对于为隔离工作负载或租户而创建的任何 VLAN ， Element 软件会创建一个单独的 iSCSI 目标 SVIP 地址，该地址只能通过特定 VLAN 进行访问。</block>
  <block id="15ef640c4a14793a924a757e6ae492a7" category="list-text">支持 * VPN 路由 / 转发（ VRF ）的 VLAN 。 * 为进一步支持数据中心的安全性和可扩展性， Element 软件允许您为任何租户 VLAN 启用类似 VRF 的功能。此功能增加了以下两项关键功能：</block>
  <block id="2bbc6ec0f619cd30f00d84fd0b28a664" category="list-text">通过 * L3 路由到租户 SVIP 地址。 * 此功能，您可以将 iSCSI 启动程序置于与 NetApp Element 软件集群不同的网络或 VLAN 上。</block>
  <block id="df4b35b2595018f8855fcc751568c6c7" category="list-text">* IP 子网重叠或重复。 * 此功能可用于向租户环境添加模板，从而可以从同一 IP 子网为每个租户 VLAN 分配 IP 地址。此功能对于扩展和保留 IP 空间非常重要的服务提供商环境非常有用。</block>
  <block id="9cd0a61954cbf639d076ff85c0e22e93" category="section-title">企业级存储效率</block>
  <block id="78712bd6b2d8e5531e122b5e849fb842" category="paragraph">NetApp Element 软件集群可提高整体存储效率和性能。以下功能是实时执行的，始终开启的，无需用户手动配置：</block>
  <block id="4ec70cddb13ab16b78ea5e2b73f74553" category="list-text">* 重复数据删除。 * 系统仅存储唯一的 4 K 块。任何重复的 4K 块都会自动与已存储的数据版本相关联。数据位于块驱动器上，并通过 Element Helix 数据保护进行镜像。此系统可显著减少系统中的容量消耗和写入操作。</block>
  <block id="c96747947b2dc75dbd9dda6e97ef1a8f" category="list-text">* 压缩。 * 数据写入 NVRAM 之前，会实时执行数据压缩。数据会进行压缩，以 4 k 块的形式存储，并在系统中保持压缩状态。这种压缩可显著减少集群中的容量消耗，写入操作和带宽消耗。</block>
  <block id="ce8f2f5ac86efbbae4bd504783760952" category="list-text">* 精简配置。 * 此功能可在需要时提供适当数量的存储，从而消除因过度配置卷或未充分利用卷而导致的容量消耗。</block>
  <block id="08cb3937b67731ce2f5e77b4cdbc9c0a" category="list-text">* Helix.* 单个卷的元数据存储在元数据驱动器上，并复制到二级元数据驱动器以实现冗余。</block>
  <block id="d428945154a82aa8975ad9566e8ae332" category="admonition">Element 专为自动化而设计。上述所有存储功能均可通过 API 进行管理。这些 API 是用户界面用于控制系统的唯一方法，可整合到用户工作流中以简化解决方案的管理。</block>
  <block id="ee8cf05d87235b1f0e0f44eedb843c49" category="paragraph">Red Hat 虚拟化（ RHV ）是一个企业级虚拟数据中心平台，它使用 KVM 虚拟机管理程序在 Red Hat Enterprise Linux 上运行。</block>
  <block id="db7e3583227c9db05bae1b7f8efc2ab2" category="paragraph">有关 Red Hat 虚拟化的详细信息，请参见位于的网站<block ref="8f283605f69360c04a79015587e540ae" category="inline-link-rx"></block>。</block>
  <block id="7adf04762320f012179ffe68fb0aeb9f" category="paragraph">RHV 具有以下功能：</block>
  <block id="60f334f940a83cf57d873b101d3459be" category="list-text">* 集中管理虚拟机和主机。 * 在部署中， RHV 管理器作为物理或虚拟机运行，并提供一个基于 Web 的图形用户界面，用于从中央界面管理解决方案。</block>
  <block id="06ccf1abad59467174e4d6691831aa57" category="list-text">* 自托管引擎。 * 为最大限度地降低硬件要求， RHV 允许将 RHV Manager 部署为运行子虚拟机的同一主机上的 VM 。</block>
  <block id="8e86b5bc6bf9c682b531935a2c85281a" category="list-text">* 高可用性。 * 为避免因主机故障而造成中断， RHV 允许为虚拟机配置高可用性。高可用性 VM 可通过故障恢复策略在集群级别进行控制。</block>
  <block id="f43e272d65ff31d7e759d7e929a4fbd9" category="list-text">* 高可扩展性。 * 一个 RHV 集群最多可以包含 200 个虚拟机管理程序主机，从而支持大规模虚拟机的要求，以容纳资源密集的企业级工作负载。</block>
  <block id="3c87329d48e5e3b3550cf9538f596d99" category="list-text">* 增强的安全性。 * RHV 继承了 RHEL 的安全虚拟化（ sVirt ）和安全增强型 Linux （ SELinux ）技术，用于提高主机和 VM 的安全性和增强性能。这些功能的主要优势是对虚拟机及其相关资源进行逻辑隔离。</block>
  <block id="0dcb70d5a962c52ae85aa74c83ea1c11" category="section-title">Red Hat Virtualization Manager</block>
  <block id="414d3b535bcc8bc6ff056a485a4b9965" category="paragraph">Red Hat Virtualization Manager （ RHV-M ）可为 RHV 虚拟化环境中的物理和逻辑资源提供集中式企业级管理。我们提供了一个基于 Web 的 GUI ，其中包含不同的基于角色的门户，用于访问 RHV-M 功能。</block>
  <block id="03e897cd5e5d1a8a4da1a4fb6655a3ba" category="paragraph">RHV-M 使用开源社区驱动型 RESTful API 公开对 RHV 资源的配置和管理。它还支持与 Red Hat CloudForms 和 Red Hat Ansible 实现全面集成，以实现自动化和流程编排。</block>
  <block id="ee3a50ab5e484f6d616e78773e041027" category="section-title">Red Hat 虚拟化主机</block>
  <block id="5f1b42e6e017c3a4039454e8d5a9996e" category="paragraph">主机（也称为虚拟机管理程序）是为 VM 运行提供硬件资源的物理服务器。基于内核的虚拟机（ KVM ）可提供全面的虚拟化支持，而 Virtual Desktop Server Manager （ VDSM ）是负责主机与 HVS-M 通信的主机代理</block>
  <block id="7980382e5c7bf22424268e9025d8f302" category="paragraph">Red Hat 虚拟化中支持的两种主机类型是 Red Hat 虚拟化主机（ RHP-H ）和 Red Hat Enterprise Linux 主机（ RHEL ）。</block>
  <block id="21e098299f91f23ff3d3f9a4b1ff4d98" category="paragraph">RHV-H- H 是一款基于 Red Hat Enterprise Linux 的轻量级操作系统，经过优化，可以轻松地将物理服务器设置为 RHV 虚拟机管理程序。</block>
  <block id="f76847d91788f3f64fee00f45b75c6b7" category="paragraph">RHEL 主机是运行标准 Red Hat Enterprise Linux 操作系统的服务器。然后，可以为它们配置所需的订阅，以安装允许将物理服务器用作 RHV 主机所需的软件包。</block>
  <block id="dd3121ff1890e85598f36ec3863d66e9" category="section-title">Red Hat 虚拟化架构</block>
  <block id="89653768cd194ca9b2c764b22dc91425" category="paragraph">Red Hat 虚拟化可以部署在两种不同的架构中，即，将 RHV-M 作为基础架构中的物理服务器，或者将 RHV-M 配置为自托管引擎。NetApp 建议使用自托管引擎部署，其中， RHV-M 是在与其他 VM 相同的环境中托管的 VM ，如本指南所述。</block>
  <block id="16f62bb1d919ce8c827c51ea817c1c05" category="paragraph">要使子虚拟机和 RHV-M 实现高可用性，至少需要两个自托管节点为了为管理器 VM 提供高可用性， HA 服务将启用并在所有自行托管的引擎节点上运行。</block>
  <block id="568de794bfa114d5b758e6dd0e67184a" category="paragraph"><block ref="568de794bfa114d5b758e6dd0e67184a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="272b17c378c6ed0cdc34066c63912385" category="inline-link-macro">接下来：架构概述</block>
  <block id="533d5e8856886e9c9430b1d6c6da7726" category="paragraph"><block ref="533d5e8856886e9c9430b1d6c6da7726" category="inline-link-macro-rx"></block></block>
  <block id="e353dbe42c8654f33588d4da0b517469" category="doc">摘要</block>
  <block id="b6758d369d838bdc72e31a047d4b7745" category="paragraph">本文档概述了将 NetApp HCI 与 Cisco ACI 集成时的性能，可靠性和最佳实践。同时，还强调了 NetApp HCI 在多工作负载和多存储环境中的可移植性和互操作性。</block>
  <block id="49bd5f02e9f4d9bb8c933b38cd9ea653" category="doc">设计注意事项：采用 RHV 的 NetApp HCI</block>
  <block id="f2095e7a5c0e567dee82fb8e4a93ca3c" category="paragraph">制定部署策略时，请查看以下设计注意事项。</block>
  <block id="ddd31bebd407467c40be40bf75366dbd" category="section-title">网络要求</block>
  <block id="a3b49f7632217654805ac74db5d61fc1" category="paragraph">本节介绍在 NetApp HCI 上以经验证的解决方案形式部署 Red Hat 虚拟化的网络要求。它提供了 NetApp HCI 计算节点和解决方案中部署的交换机上的网络端口的物理示意图。本节还介绍了解决方案中使用的每个虚拟网段的布局和用途。</block>
  <block id="efe9cce548f57f03159bafeb1f225421" category="section-title">端口标识</block>
  <block id="e19021434da483d688fece334195b6da" category="paragraph">NetApp HCI 由专用于计算或存储的 NetApp H 系列节点组成。这两种节点配置都具有两个 1GbE 端口（端口 A 和 B ）和两个 10/25GbE 端口（端口 C 和 D ）板载。计算节点在第一个夹层插槽中额外提供了 10/25GbE 端口（端口 E 和 F ）。每个节点还具有一个额外的带外管理端口，该端口支持智能平台管理接口（ Intelligent Platform Management Interface ， IPMI ）功能。下图显示了 H410C 节点背面的每个端口。</block>
  <block id="6fd35dc7f646ea30cd074d90611ed72b" category="paragraph"><block ref="6fd35dc7f646ea30cd074d90611ed72b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3c771ea5546e37fb2565b7fb804f91d7" category="paragraph">采用 Red Hat 虚拟化解决方案的 NetApp HCI 使用两个数据交换机提供 25 Gbps 的主数据连接。它还使用两个额外的管理交换机，这些交换机以 1 Gbps 的速度提供连接，用于存储节点的带内管理以及 IPMI 功能的带外管理。</block>
  <block id="c581afa2de8b8f9403bed8de0feff641" category="section-title">为存储节点布线</block>
  <block id="3fef592fbd257e7f797bef7944ddcc1c" category="paragraph">要配置 NetApp HCI 集群，每个存储节点上的管理端口 A 和 B 必须处于活动状态，并在部署解决方案后为 Element 提供管理可访问性。应将两个 25 Gbps 端口（ C 和 D ）连接到每个数据交换机，以提供物理容错能力。交换机端口应配置为多机箱链路聚合（ MLAG ），节点上的数据端口应配置为 LACP 并启用巨型帧支持。在将节点安装到数据中心后，可以使用每个节点上的 IPMI 端口来远程管理该节点。使用 IPMI 时，可以使用基于 Web 浏览器的控制台访问节点，以便运行初始安装，运行诊断以及根据需要重新启动或关闭节点。</block>
  <block id="10be87246c2913d3b7bc5bb1aa4b3804" category="section-title">为计算节点布线</block>
  <block id="9d90a0f4787e5e4d5a3725cd4c4c9737" category="paragraph">应将两个 25 Gbps 端口（ C 和 E ）连接到每个数据交换机，以提供物理容错能力。交换机端口应配置为多机箱链路聚合（ MLAG ），节点上的数据端口应配置为 LACP 并启用巨型帧支持。在将节点安装到数据中心后， IPMI 端口还可用于远程管理该节点。使用 IPMI 时，可以使用基于 Web 浏览器的控制台访问节点，以便运行初始安装，运行诊断以及根据需要重新启动或关闭节点。</block>
  <block id="be119da3e4a8f5fa61adf49dbf07a393" category="paragraph"><block ref="be119da3e4a8f5fa61adf49dbf07a393" category="inline-image-macro-rx" type="image"></block></block>
  <block id="52b37345fcdfbe20858f52ac6ad9b6c8" category="section-title">VLAN 要求</block>
  <block id="73c3c3547eec2401053e63c311c17a42" category="paragraph">解决方案可通过使用虚拟局域网（ VLAN ）在逻辑上隔离不同用途的网络流量。NetApp HCI 至少需要三个网段。但是，可以扩展此配置以满足客户需求，或者为特定网络服务提供进一步隔离。下表列出了实施解决方案所需的 VLAN ，以及稍后在经验证的架构部署中使用的特定 VLAN ID 。</block>
  <block id="87495e311a3944910e3cc0c7bee3d754" category="cell">VLAN</block>
  <block id="3738d84a7eb8a1854e24ea9c68c91e37" category="cell">已使用 VLAN</block>
  <block id="b7dff125c9fce628900142990708436f" category="cell">带外管理网络</block>
  <block id="27827c9af06b962c880439bc476ea31c" category="cell">HCI 节点 /IPMI 的管理</block>
  <block id="c74d97b01eae257e44aa9d5bade97baf" category="cell">16.</block>
  <block id="7b9993fac4b9a60605aa2884eb40f4a3" category="cell">带内管理网络</block>
  <block id="79bfd6ed62788ae3bc9feb32d71d3571" category="cell">HCI 节点管理 /ovirtmgmt</block>
  <block id="36a1694bce9815b7e38a9dad05ad42e0" category="cell">1172.</block>
  <block id="cd3718e8610b820344c9a0284fe84f90" category="cell">存储网络</block>
  <block id="6df7afe4af33dc664aa7e38abeb18129" category="cell">NetApp Element 的存储网络。</block>
  <block id="21c5bba1dd6aed9ab48c2b34c1a0adde" category="cell">3343</block>
  <block id="3de18ffc25309bd0755d8543a30ded78" category="cell">迁移网络</block>
  <block id="592c7ac6eb9555ef8152d7db0eae56e2" category="cell">用于虚拟子系统迁移的网络。</block>
  <block id="38a77aa456fc813af07bb428f2363c8d" category="cell">3345</block>
  <block id="a17b11045e4b23b762ee72c5912a4845" category="cell">VM 网络</block>
  <block id="103238db673ecc1648132912d66b302b" category="cell">虚拟子系统的网络。</block>
  <block id="0655f117444fc1911ab9c6f6b0139051" category="cell">3346</block>
  <block id="3d9d4d305febcc87825d8daa947c96f6" category="section-title">网络基础架构支持资源</block>
  <block id="c6c584b59032f2ac048575b0f6a1bd42" category="paragraph">在 NetApp HCI 解决方案上部署 Red Hat 虚拟化之前，应具备以下基础架构：</block>
  <block id="9335616a8b7dc0e6f94fd0c6aa720efe" category="list-text">至少一个 DNS 服务器，提供可从带内管理网络和 VM 网络访问的完整主机名解析。</block>
  <block id="905a394004d9055ec4708e53880cac66" category="list-text">至少可从带内管理网络和 VM 网络访问一个 NTP 服务器。</block>
  <block id="751cdef4405a1e7bb0a45edef830309c" category="list-text">对于带内管理网络和 VM 网络，建议使用出站 Internet 连接，但这并不是必需的。</block>
  <block id="5fedec48dba5e0a41f5b3c4f91c2278c" category="inline-link-macro">下一步：部署过程</block>
  <block id="ff26261727576a4ee43a426c1930f480" category="paragraph"><block ref="ff26261727576a4ee43a426c1930f480" category="inline-link-macro-rx"></block></block>
  <block id="26afe9d372812e758e9d9d24bb5c9839" category="doc">1. 摘要</block>
  <block id="49dd2b5a61a2c5715c02281fc7c4de12" category="paragraph">采用 Red Hat 虚拟化的 NetApp HCI 是一种经验证的最佳实践架构，用于以可靠的方式部署内部企业虚拟数据中心环境。本参考架构文档对解决方案上的 Red Hat 虚拟化 NetApp HCI 进行了设计和部署验证。</block>
  <block id="66e0f2dbd1ec46dc24457fe456a26966" category="doc">更新 RHV 管理器和 RHV-H 主机：采用 RHV 的 NetApp HCI</block>
  <block id="176356280674ec550a8921fdd9e499fb" category="paragraph">建议的最佳做法是，确保 RHV Manager 和 RHV-H 主机都应用了最新的安全和稳定性更新，以确保环境得到保护并继续按预期运行。要将更新应用于部署中的主机，必须先订阅 Red Hat 内容交付网络或本地 Red Hat Satellite 存储库。更新平台所涉及的任务包括更新管理器虚拟机，然后在确保将虚拟子系统迁移到集群中的另一节点之后无中断地更新每个物理主机。</block>
  <block id="1b15e89fec39a9378ad048906efa42c7" category="paragraph">您可以找到支持在次要版本之间升级 RHV 4.3 的官方文档<block ref="354344dfd5ca270d1bb684b2f8688df3" category="inline-link-rx"></block>。</block>
  <block id="d6c4f84577e4aa58839fe9670e5f44e0" category="inline-link-macro">下一步：最佳实践—为 RHV 主机启用隔离</block>
  <block id="9562231044d673d5141166162da904ea" category="paragraph"><block ref="9562231044d673d5141166162da904ea" category="inline-link-macro-rx"></block></block>
  <block id="d7a569f73eec6ea14459b87dcb5aa147" category="doc">采用 VMware vSphere 的 ONTAP Select ： NetApp HCI 和 Cisco ACI</block>
  <block id="3028649bebeee4f87f3e82ce9e2f3b70" category="paragraph">NetApp ONTAP Select 是适用于软件定义存储（ SDS ）的 NetApp 解决方案，可为软件定义的数据中心提供企业级存储管理功能。ONTAP Select 将 ONTAP 功能扩展到极致边缘使用情形，包括 IoT 和战术服务器，它是一种软件定义的存储设备，充当完整的存储系统。它可以在虚拟环境之上作为一个简单的 VM 运行，以提供灵活且可扩展的存储解决方案。</block>
  <block id="7eca9b31dc04b2b6a87ac0cdd66a37c4" category="paragraph">在另一个软件应用程序上以软件形式运行 ONTAP ，可以让您充分利用虚拟机管理程序完成的大部分资格认定工作。此功能对于帮助我们快速扩展受支持平台列表至关重要。此外，将 ONTAP 定位为虚拟机（ Virtual Machine ， VM ）还可以让客户插入到现有的管理和业务流程框架中，从而实现快速配置以及从部署到 Sunsetting 的端到端自动化。下图概述了一个四节点 ONTAP Select 实例。</block>
  <block id="0d27dcd334f6a61c4930eaee21952aab" category="paragraph"><block ref="0d27dcd334f6a61c4930eaee21952aab" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0b522b3ca378e93eb720db40baba390f" category="paragraph">在环境中部署 ONTAP Select 以使用 NetApp HCI 提供的存储扩展了 NetApp Element 的功能。</block>
  <block id="eaf66d2370c1b28b036b9e3b4a711148" category="paragraph">以下工作流用于设置环境。在此解决方案中，我们部署了一个双节点 ONTAP Select 集群。其中每个步骤可能涉及多个单独的任务。</block>
  <block id="329cd138ab4ea4217ebd245aff7ddfbe" category="list-text">为 OTS 集群的内部通信创建 L2 BD 和 EPG ，并在原生交换模式（对于 Cisco Ave 虚拟交换机）下使用预配置解析即时性将 VMM 域连接到 EPG 。</block>
  <block id="45ffff8e10e87c802b8658295d63bce8" category="paragraph"><block ref="45ffff8e10e87c802b8658295d63bce8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="12b8cb0227d63ce3ca66e5f5d1c07e60" category="list-text">验证您是否具有 VMware vSphere 许可证。</block>
  <block id="e8cc5fbecc7315e073f0eaad41551acf" category="list-text">创建托管 OTS 的数据存储库。</block>
  <block id="7436b418bed093768e360d32105591d2" category="inline-link">ONTAP Select 文档</block>
  <block id="64477594b55f8206fccf4421e8d79742" category="list-text">根据部署和配置 ONTAP Select<block ref="ef46f3b4528c9cce5490b31e4083101f" category="inline-link-rx"></block>。</block>
  <block id="0cf1308f4720f390f207f0fc63fdea1c" category="paragraph"><block ref="0cf1308f4720f390f207f0fc63fdea1c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ed64aa16c8128dff25933a166208a539" category="list-text">使用 ONTAP Select 创建其他数据存储库以利用其他功能。</block>
  <block id="744be7387629cc61a3356424b70e7653" category="inline-link-macro">接下来：采用 VMware vSphere 的 StorageGRID ： NetApp HCI 和 Cisco ACI</block>
  <block id="72c22eff289a1c27f87e11be2f3e835a" category="paragraph"><block ref="72c22eff289a1c27f87e11be2f3e835a" category="inline-link-macro-rx"></block></block>
  <block id="5a129a9abdc25c5dbc79ac6f70700cc7" category="doc">互操作性表</block>
  <block id="2fe5c7c9268892f4b01e05f9a4ae6348" category="doc">使用 Cisco ACI 部署 NetApp HCI</block>
  <block id="d5f2744afe1992a37c80df5403531087" category="doc">针对 Red Hat 虚拟化优化内存：采用 RHV 的 NetApp HCI</block>
  <block id="b2c69b59a5de1942ad211ccde0169ea1" category="paragraph">部署虚拟基础架构的主要优势之一是，可以更高效地利用环境中的物理资源。如果子虚拟机未充分利用分配的内存，则可以使用内存过量来优化内存使用。通过此功能，可以将分配给主机上子虚拟机的内存量总和超过该主机上的物理内存量。</block>
  <block id="f40b4e49e3864ae6e23c5066e7db1697" category="paragraph">内存过量使用背后的概念类似于存储资源的精简配置。在任何给定时刻，主机上的每个 VM 都不会使用分配给它的总内存量。如果一个虚拟机的内存过多，则其未使用的内存可供其他虚拟机使用。因此，最终用户可以部署物理基础架构通常不允许的更多 VM 。集群中主机上的内存过量使用由 Memory Overcommit Manager （ MoM ）处理。内存释放和内核同页合并（ KSM ）等技术可以根据工作负载类型提高内存过量使用的情况。</block>
  <block id="3b3d132d1de63e9824c63a9e74818825" category="paragraph">内存释放是一种内存管理技术，它允许主机通过回收以前分配给各种 VM 的未使用内存来人为地扩展其内存，但每个 VM 的内存大小保证是有限制的。为了使内存释放正常工作，每个 VM 默认都有一个气球设备，其中包含必要的驱动程序。从本质上说，释放是 VM 驱动程序与主机之间的一项合作操作。根据主机的内存需求，它会指示子操作系统对气球设备控制的气球进行膨胀（为主机提供内存）或放气（重新获得内存）。</block>
  <block id="6c9741d8d6f66a2695d1243c102ebde9" category="paragraph">通过内核同页合并（ KSM ），主机内核可以检查两个或多个正在运行的 VM 并比较其映像和内存。如果任何内存区域或页面相同， KSM 会将多个相同的内存页面减少为一个页面。然后，此页面将标记为 ‘copy on write ' ，如果此页面的内容由子虚拟机修改，则会为该子虚拟机创建一个新页面。</block>
  <block id="b27cca549bdeab7ca825ac9ba076caed" category="paragraph">可以在集群级别启用这两项功能，以应用于该集群中的所有主机。要启用这些功能，请导航到 Compute &gt; Clusters ，选择所需集群并单击 Edit 。然后，单击 Optimization 子选项卡，并根据您的要求执行以下步骤：</block>
  <block id="702e96e7433fd6d77b5f27dede8058e0" category="list-text">根据使用情形和工作负载，启用内存优化以允许将内存过量使用到可用物理内存的 150% 或 200% 。</block>
  <block id="8346b24dc42e97ac2aa40872faec025f" category="list-text">要启用内存释放，请选中启用内存气球优化复选框。</block>
  <block id="d4e854ffea6f6dd0679f98e9be3f27d8" category="list-text">要启用 KSM ，请选中启用 KSM 复选框。</block>
  <block id="9b23543692f21fa7de25708eb6d57fa3" category="list-text">单击确定以确认更改。</block>
  <block id="4cce8dbfb273e63df6fe6ae323881af9" category="paragraph"><block ref="4cce8dbfb273e63df6fe6ae323881af9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cc3632c9483f5e854d9b40491e0ee728" category="paragraph">请注意，应用这些更改后，只有在手动同步 MOM 策略后，这些更改才会生效。要同步 MOM 策略，请导航到 Compute &gt; Clusters ，然后单击为其进行优化更改的集群。导航到主机子选项卡，选择所有主机，然后单击同步 MoM 策略。</block>
  <block id="5a4e491e785b7471182400e4cdd8f970" category="paragraph"><block ref="5a4e491e785b7471182400e4cdd8f970" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8fe9a19f323c9e9e12b4d0ff26810fb1" category="paragraph">KSM 和热气球可以释放主机上的某些内存并有利于过量使用，但是，如果可共享内存的数量减少，而物理内存的使用量增加发生原因，则可能会出现内存不足的情况。因此，管理员应确保预留足够的内存，以避免共享内存减少时出现内存不足的情况。</block>
  <block id="a3c441f2a50f9c1db2494f5a819ad59b" category="paragraph">在某些情况下，内存释放可能会与 KSM 发生冲突。在这种情况下， MoM 会尝试调整气球大小以最大程度地减少冲突。此外，在某些情况下，热气球可能会使发生原因的性能低于最佳性能。因此，根据工作负载要求，您可以考虑启用其中一种或两种技术。</block>
  <block id="475a430f65ec8abb745fd1f4c9c4af48" category="inline-link-macro">下一步：从何处查找具有 RHV 的追加信息 NetApp HCI</block>
  <block id="a6259390e53a4d2dc8a510dc9132e4ec" category="paragraph"><block ref="a6259390e53a4d2dc8a510dc9132e4ec" category="inline-link-macro-rx"></block></block>
  <block id="d0a2e0ef80a72d6ecfa4689493522b2c" category="doc">ONTAP 上的 AFF ： NetApp HCI 和 Cisco ACI</block>
  <block id="024d892890fae18a5fed8bcc6a6c56ca" category="paragraph">NetApp AFF 是一款功能强大的存储平台，可提供低延迟性能，集成数据保护，多协议支持和无中断运行。NetApp AFF 由 NetApp ONTAP 数据管理软件提供支持，可确保从维护到升级再到存储系统的完全更换，无中断运行。</block>
  <block id="eb75aeb3b4b2b9734ba3e52f5483f0b2" category="inline-link">ONTAP 文档</block>
  <block id="a633666cf50db4713a6276271579d449" category="paragraph">NetApp ONTAP 是一款功能强大的存储操作系统，具有实时压缩，无中断硬件升级和跨存储导入等功能。NetApp ONTAP 集群提供了一个统一存储系统，可同时对网络文件系统（ NFS ），通用 Internet 文件系统（ CIFS ）， iSCSI ，光纤通道（ FC ），以太网光纤通道（ FCoE ）和 NVMe/FC 协议进行数据访问和管理。ONTAP 可提供强大的数据保护功能，例如 NetApp MetroCluster ， SnapLock ， Snapshot 副本， SnapVault ， SnapMirror ， SyncMirror 技术等。有关详细信息，请参见<block ref="92378d226f9601ec46c3714c540fc081" category="inline-link-rx"></block>。</block>
  <block id="1f235bb204cd83061a2d0377ca7061d1" category="paragraph">要将存储功能扩展到文件服务并增加更多数据保护功能，可以将 ONTAP 与 NetApp HCI 结合使用。如果您的环境中已存在 NetApp ONTAP ，则可以轻松地将其与 NetApp HCI 和 Cisco ACI 集成。</block>
  <block id="987bdc7a425668186d155cd01a3f847f" category="paragraph">以下是用于设置环境的高级工作流。其中每个步骤可能涉及多个单独的任务。</block>
  <block id="2460cadf3d006c9d84d2ad1a9b1394b9" category="list-text">在 ACI 上为 NFS 和 / 或具有相应子网的其他协议创建一个单独的网桥域和 EPG 。您可以使用相同的 HCI 相关 iSCSI EPG 。</block>
  <block id="a0e8568577f7e8ccaa36c4bf4df42afe" category="list-text">请确保您拥有适当的合同，以便仅允许所需端口进行 EPG 间通信。</block>
  <block id="7f098a12fbbb4dded545f5f42c199a9f" category="list-text">为指向 AFF 控制器的接口配置接口策略组和选择器。为端口通道策略创建具有 LACP 活动模式的 vPC 策略组。</block>
  <block id="d66ccad151007c1982d21ac4e2d66b94" category="paragraph"><block ref="d66ccad151007c1982d21ac4e2d66b94" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5dcf5c2adbefc8dac8ee0a8efb9e0978" category="list-text">将物理域和 VMM 域附加到创建的 EPG 。将 vPC 策略作为静态路径连接，对于 Cisco Ave 虚拟交换机，在连接 VMM 域时使用原生交换模式。</block>
  <block id="4c435f9187e2d8f389ed48d16480f306" category="paragraph"><block ref="4c435f9187e2d8f389ed48d16480f306" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b02129ac2a86e04cda07245491b54f1d" category="inline-link">AFF 和 ONTAP 文档</block>
  <block id="fbe31d710237012ef5587e9f693c3878" category="list-text">在 AFF 控制器上安装和配置 ONTAP 集群。然后，创建并配置 NFS 和 / 或 iSCSI 卷 /LUN 。请参见<block ref="3ca20718c7666f11120f82bc0e62afb7" category="inline-link-rx"></block> 有关详细信息 ...</block>
  <block id="347342b7cec2fa1532ef370d9341ead3" category="list-text">创建连接 NFS （或其他协议）端口组或逻辑网络的 VMkernel 适配器（对于 VMware ESXi ）或逻辑接口（对于 RHV-H/RHEL-KVM 主机）。</block>
  <block id="e58f9184469c6299738b33ae1aaed16f" category="list-text">使用 AFF 存储在虚拟机管理程序（ VMware ， RHV 或 KVM ）上创建其他数据存储库，存储域或存储池。</block>
  <block id="27e4bf97240960ef1b09923c7f7d0d1b" category="inline-link-macro">接下来：采用 VMware vSphere 的 ONTAP Select ： NetApp HCI 和 Cisco ACI</block>
  <block id="80f1e0b87fec2a89d0c1198e6446d256" category="paragraph"><block ref="80f1e0b87fec2a89d0c1198e6446d256" category="inline-link-macro-rx"></block></block>
  <block id="4817bcff2b0baa7f11542d4cc37290d6" category="doc">7. 部署 NetApp mNode ：具有 RHV 的 NetApp HCI</block>
  <block id="e927d539c32ceb5576eac32e786ff443" category="paragraph">管理节点（ mNode ）是与一个或多个基于 Element 软件的存储集群并行运行的 VM 。它用于以下用途：</block>
  <block id="9fa8e3c000378c49c1e87aeb9f1ee6b6" category="list-text">提供包括监控和遥测在内的系统服务</block>
  <block id="e40ba5c095adf7e7be86869cca8735e9" category="list-text">管理集群资产和设置</block>
  <block id="2652b77df50ec870784829b8886fee67" category="list-text">运行系统诊断测试和实用程序</block>
  <block id="7eb20b9454affe44f448ad27771b8ae1" category="list-text">启用适用于 NetApp ActiveIQ 的 CallHome 以获得更多支持</block>
  <block id="e0e6fd9cf6fa17da5cb75a324908edc2" category="paragraph">要在 Red Hat 虚拟化上安装 NetApp mNode ，请完成以下步骤：</block>
  <block id="1902048bd7181224b60541275b580fe3" category="list-text">将 mNode ISO 作为磁盘上传到存储域。导航到存储 &gt; 磁盘 &gt; 上传，然后单击启动。然后单击上传映像并选择下载的 mNode ISO 映像。验证存储域，要执行上传的主机以及其他详细信息。然后单击确定将映像上传到域。进度条指示上传完成后 ISO 可用。</block>
  <block id="db298187ae3e5d2437dd350b8516700b" category="list-text">导航到 " 存储 "&gt;" 磁盘 " 以创建 VM 磁盘，然后单击 " 新建 " 。mNode 磁盘的大小必须至少为 400 GB ，但可以进行精简配置。在向导中，输入您选择的名称，选择正确的数据中心，确保选择正确的存储域，为分配策略选择精简配置，然后选中删除后擦除复选框。单击确定。</block>
  <block id="ca57a6e91be4193bcc81f9d04b871d26" category="paragraph"><block ref="ca57a6e91be4193bcc81f9d04b871d26" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d258fd99ead3d76ed136fcf09e20201d" category="list-text">接下来，导航到 Compute &gt; Virtual Machines ，然后单击 New 。在常规子选项卡中，选择相应的集群，输入所选的名称，单击连接，然后选择在上一步中创建的磁盘。选中操作系统下面的框，以强调它是可启动驱动器。单击确定。</block>
  <block id="57e657fbd707ac53e8d3671178073658" category="paragraph"><block ref="57e657fbd707ac53e8d3671178073658" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c6f5fe98db5566760acd5de513a49f30" category="list-text">从 NIC1 的下拉列表中选择 ovirtmgmt 。单击（ + ）符号，然后从 NIC2 的下拉列表中选择存储网络接口。</block>
  <block id="6d15e27d11e3435ad87f0e0034b45a01" category="paragraph"><block ref="6d15e27d11e3435ad87f0e0034b45a01" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d0be39ed1fc5cebbe806abd745eabfe2" category="list-text">单击 System 子选项卡，并确保其至少具有 12 GB 的内存和 6 个建议的虚拟 CPU 。</block>
  <block id="0f48af688e6735cc9ccd01e7cac66b6d" category="paragraph"><block ref="0f48af688e6735cc9ccd01e7cac66b6d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="08b41814a9d8ac81b4a9c31cfea1c8fd" category="list-text">单击启动选项子选项卡，选择 CD-ROM 作为启动序列中的第一个设备，选择硬盘作为第二个设备。启用 Attach CD 并连接 mNode ISO 。然后单击确定。</block>
  <block id="73d4e5ccd4ca5ed46f29d11fd33a1928" category="paragraph"><block ref="73d4e5ccd4ca5ed46f29d11fd33a1928" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3e3e23fe8a50848661e94fb75888a0fb" category="paragraph">此时将创建虚拟机。</block>
  <block id="ba040902361636a4de9f587a40f17bd9" category="list-text">虚拟机可用后，打开其电源，然后打开其控制台。它将开始加载 NetApp SolidFire mNode 安装程序。加载安装程序后，系统将提示您启动 RTFI 镁安装；键入 `yes` 并按 Enter 键。安装过程将开始，完成后，它会自动关闭虚拟机。</block>
  <block id="bfd6a7516425971df20ec41e79f54908" category="paragraph"><block ref="bfd6a7516425971df20ec41e79f54908" category="inline-image-macro-rx" type="image"></block></block>
  <block id="52e9364b441cc03d66ac1cecb4bd4959" category="list-text">接下来，单击 mNode VM ，然后单击编辑。在 Boot Options 子选项卡中，取消选中 Attach CD 复选框，然后单击 OK 按钮。</block>
  <block id="d6715a1c2b20e98af879c4a5cb3f5cf9" category="paragraph"><block ref="d6715a1c2b20e98af879c4a5cb3f5cf9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4c52098424f6ff67f6914e34bdff6e1b" category="list-text">打开 mNode 虚拟机的电源。使用终端用户界面（ TUI ）创建管理节点管理员用户。</block>
  <block id="0fa5092b4d1d6032dc65fd0a3c71a906" category="admonition">要浏览菜单选项，请按向上或向下箭头键。要在各个按钮之间移动，请按 Tab 。要从按钮移至字段，请按 Tab 。要在字段之间导航，请按向上或向下箭头键。</block>
  <block id="63cab6a39cb5eb3728b7e2b303bea93a" category="paragraph"><block ref="63cab6a39cb5eb3728b7e2b303bea93a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="771a10c074ce8d3a115578c14baeb3eb" category="list-text">创建用户后，您将返回到登录屏幕。使用刚刚创建的凭据登录。</block>
  <block id="6d3dfa10f3183a6f1b3ce35daf00a1ef" category="list-text">要从管理接口开始配置网络接口，请导航到 " 网络 "&gt;" 网络配置 "&gt;"eth0" ，然后输入您环境的 IP 地址，网络掩码，网关， DNS 服务器和搜索域。单击确定。</block>
  <block id="b4136fcbcf0aa0707425ea491f2c9722" category="paragraph"><block ref="b4136fcbcf0aa0707425ea491f2c9722" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8b17fba4cbe2eb9f972a742ebb10ca6e" category="list-text">接下来，配置 eth1 以访问存储网络。导航到网络 &gt; 网络配置 &gt; eth1 ，然后输入 IP 地址和网络掩码。验证 MTU 是否为 9000 。然后单击确定。</block>
  <block id="ccc4f5c9503fb4224a2dc7132f8f8af6" category="paragraph"><block ref="ccc4f5c9503fb4224a2dc7132f8f8af6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="650f19f73a8bb3ed3e6f982749d40b78" category="paragraph">现在，您可以关闭 TUI 界面。</block>
  <block id="5e097aa42775728c9cd6974b0431ad65" category="list-text">使用管理 IP 通过 SSH 连接到管理节点，升级到 root 并将 mNode 注册到 HCI 存储集群。</block>
  <block id="56d8270eb2f9fb5810cc427619af3ddc" category="list-text">使用浏览器，使用 `https://&lt;mNodeIP` ` &gt;` 登录到管理节点图形用户界面。mNode 或 Hybrid Cloud Control 有助于扩展，监控和升级 Element 集群。</block>
  <block id="51d3428da10896f18fc1ab657eadaaa5" category="paragraph"><block ref="51d3428da10896f18fc1ab657eadaaa5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="20e8f5b011b5a04a0600141adae26d48" category="list-text">单击右上角的三条平行线，然后单击 View Active IQ 。通过筛选集群名称来搜索 HCI 存储集群，并确保它正在记录最新更新。</block>
  <block id="3eb3c7fe01398e17a2a6d1e04df2e1f7" category="paragraph"><block ref="3eb3c7fe01398e17a2a6d1e04df2e1f7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="729d72c073b607d370c067152cc53a10" category="doc">验证结果</block>
  <block id="01a1e83ecd3fdc072ea642d759e04565" category="paragraph">我们使用 iPerf 工具测试网络吞吐量，基线预期是测试系统的吞吐量应在最大线路速率的 10% 以内。下表显示了不同虚拟交换机的测试结果。</block>
  <block id="4eedf2b75262e8fd600fa1bc6687d039" category="paragraph">对于存储 IOPS 子系统测量，我们使用了 IOmeter 工具。基线预期是，测试系统的读 / 写吞吐量应在最大值的 10% 以内。下表显示了不同虚拟机管理程序的测试结果。</block>
  <block id="a2e518d14dc6cb68c948ae3a41382989" category="paragraph">我们考虑了以下网络线路速率和存储 IOPS 测试方案：</block>
  <block id="56079badd056a19303cc26e6a4fcc7e0" category="section-title">VMware</block>
  <block id="6b4a53724c43c6aec8f1fb382b459260" category="list-text">NetApp HCI 数据存储库上的 VM （包括和不包括微分段）</block>
  <block id="ad610ab6a004d1ca32ff4def1401061e" category="list-text">NetApp ONTAP 数据存储库上的 VM</block>
  <block id="2e73ba5cd354fde2c77ae6567d05e1d0" category="list-text">NetApp ONTAP Select 数据存储库上的 VM</block>
  <block id="1d1a77df6a4145a9d558ff7f4cf9d1a9" category="list-text">NetApp HCI 数据存储库上的 VM</block>
  <block id="ed1cc790bea2c38078ebd1fe564df1a3" category="section-title">KVM （ RHEL ）</block>
  <block id="387baf0199e7c9cc944fae94e96448fa" category="section-title">其他</block>
  <block id="cbd410cab49f0f23c3eccc47945245c0" category="list-text">一个虚拟机位于具有 NetApp HCI 数据存储库的 RHV 上，一个虚拟机位于具有 NetApp ONTAP 数据存储库的 VMware vSphere 上。</block>
  <block id="1b21b0d71706897b69f108572c444d40" category="cell">虚拟机管理程序</block>
  <block id="88036ea56b5fd8e38f44e4567decd7b4" category="cell">虚拟交换机</block>
  <block id="d38325f124fed59b4261d043189ea419" category="cell">性能</block>
  <block id="50b9179d0c24f0783105b97dd69ad74a" category="cell">IOmeter</block>
  <block id="758207a598c38bb6587dd7bf1570a4ea" category="cell">微分段</block>
  <block id="b9b57aae83585e17ede4570dcede353c" category="cell">通过</block>
  <block id="9682c21ff9726ea31a32778ba9a6adaf" category="cell">RHV</block>
  <block id="382b0f5185773fa0f67a8ed8056c7759" category="cell">不适用</block>
  <block id="bbf1e98af04d37803f9a4d00a4c2a4b4" category="cell">RHEL KVM</block>
  <block id="b872d0389acf826cc7cf1939cd17a05d" category="inline-link-macro">下一步：从何处查找追加信息</block>
  <block id="956dd8659036d2f4b38e661a612cd760" category="paragraph"><block ref="956dd8659036d2f4b38e661a612cd760" category="inline-link-macro-rx"></block></block>
  <block id="d992fb90695682b3c72945dddab8501e" category="doc">采用 VMware vSphere 的 StorageGRID ： NetApp HCI 和 Cisco ACI</block>
  <block id="392d70ca39f31f10bd637936769788df" category="inline-link">StorageGRID</block>
  <block id="977325856b2870c789f57b6c1e7eeb76" category="paragraph">StorageGRID 是一款功能强大的软件定义的基于对象的存储平台，可通过分层方法以及智能策略驱动型管理来存储和管理非结构化数据。它允许您在管理数据的同时优化持久性，保护和性能。StorageGRID 还可以作为硬件或设备部署在虚拟环境之上，以便将存储管理软件与底层硬件分离。StorageGRID 为受支持的存储平台开辟了新的领域，提高了灵活性和可扩展性。StorageGRID 平台服务也是实现混合云承诺的基础，让您可以将数据分层并复制到公有或其他 S3 兼容云。请参见<block ref="18f76c274c5f48bf9f4c08354cce505a" category="inline-link-rx"></block> 有关更多详细信息，请参见相关文档。下图概述了 StorageGRID 节点。</block>
  <block id="c50d6f697aac19ef85d9ea16b3730801" category="paragraph"><block ref="c50d6f697aac19ef85d9ea16b3730801" category="inline-image-macro-rx" type="image"></block></block>
  <block id="536eaee383c541eba07189c862e69d1d" category="paragraph">以下工作流用于设置环境。其中每个步骤可能涉及多个单独的任务。</block>
  <block id="4b107a79de1f1fa9cbea8df1dcfc1d94" category="list-text">为用于 StorageGRID 系统中节点之间内部通信的网格网络创建 L2 BD 和 EPG 。但是，如果您的 StorageGRID 网络设计包含多个网格网络，则创建一个 L3 BD ，而不是 L2 BD 。使用原生交换模式（对于 Cisco Ave 虚拟交换机）和预配置解析即时性将 VMM 域连接到 EPG 。相应的端口组用于 StorageGRID 节点上的网格网络。</block>
  <block id="51e5009791003599f5dc0e0b010d0867" category="paragraph"><block ref="51e5009791003599f5dc0e0b010d0867" category="inline-image-macro-rx" type="image"></block></block>
  <block id="88b61b550c874c673b2b90ada166dbdf" category="list-text">创建用于托管 StorageGRID 节点的数据存储库。</block>
  <block id="3778f3873debfe11e2ace6bb6af1e417" category="inline-link">StorageGRID 文档</block>
  <block id="8f11eaa0122c180615cb5822ba752dcc" category="list-text">部署和配置 StorageGRID 。有关安装和配置的详细信息，请参见<block ref="2f9beed394d24d68ae2a119af3fb88a2" category="inline-link-rx"></block>。如果环境已安装 ONTAP 或 ONTAP Select ，则可以使用 NetApp Fabric Pool 功能。Fabric Pool 是一种自动化存储分层功能，其中活动数据驻留在本地高性能固态驱动器（ SSD ）上，而非活动数据分层到低成本对象存储。它最初在 NetApp ONTAP 9.2 中推出。有关 Fabric Pool 的详细信息，请参见相关文档<block ref="cfcca0d9745849dd8e66f37eef72d21b" category="inline-link-rx"></block>。</block>
  <block id="f3d440a96135c2995c22456852cc8708" category="inline-link-macro">接下来：验证结果</block>
  <block id="837afd463a746ca48e9c396eab29543f" category="paragraph"><block ref="837afd463a746ca48e9c396eab29543f" category="inline-link-macro-rx"></block></block>
  <block id="3b878279a04dc47d60932cb294d96259" category="doc">概述</block>
  <block id="d358e35df02680875f0c2fe0b445f920" category="doc">5. 将 RHV 管理器部署为一个自助托管引擎：具有 RHV 的 NetApp HCI</block>
  <block id="3f32ea70ab3b069fcecdeb132d3b39d5" category="paragraph">本节介绍将 Red Hat Virtualization Manager 安装为自托管引擎的详细步骤。这些步骤将在注册 RHV 主机并可访问 Cockpit GUI 之后开始。</block>
  <block id="810e56b7fb2f47a4aec43ebf54cc3351" category="list-text">使用根凭据登录到位于 `https://&lt;HostFQDN/IP&gt;:9090` 的一个 RHV 主机的 Cockpit GUI 。导航到虚拟化子选项卡，然后单击托管引擎。然后，单击托管引擎内容下方的 " 开始 " 按钮以启动引擎部署。</block>
  <block id="e5ee08ab5d9f4ce1125fe35003f0d8a6" category="paragraph"><block ref="e5ee08ab5d9f4ce1125fe35003f0d8a6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="14c2fa511b9f9e922e9e78444421d375" category="list-text">在引擎部署的第一个屏幕中，为引擎虚拟机（至少 4 个 CPU 和 16 GB 内存）配置 RHV-M FQDN ，网络相关配置，根密码和资源。根据需要确认其他配置设置，然后单击下一步。</block>
  <block id="f5704670ba57560a230ef1a8b2708e28" category="paragraph"><block ref="f5704670ba57560a230ef1a8b2708e28" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9a5a51c579414b621edb7f04ff795351" category="admonition">确保引擎 VM FQDN 可由指定的 DNS 服务器解析。</block>
  <block id="c7f04bd8e628774c91fef14df800ed6c" category="list-text">在下一屏幕中，输入管理员门户密码。或者，输入要通过电子邮件发送的警报的通知设置。然后单击下一步。</block>
  <block id="1f8dabff297444ad411ebb896a3bbae8" category="paragraph"><block ref="1f8dabff297444ad411ebb896a3bbae8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="18029ae1b8439ad94cd5bb2ad645d219" category="list-text">在下一屏幕中，查看引擎 VM 的配置。如果需要进行任何更改，请在此时返回并进行更改。如果信息正确，请单击 Prepare the VM 。</block>
  <block id="da25455ae44991fb2061960bfcca12eb" category="paragraph"><block ref="da25455ae44991fb2061960bfcca12eb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dae90edc6801016dbba6f775f6936d19" category="list-text">VM 安装将开始，并且可能需要一段时间才能完成，因为它会下载计算机映像并在本地对 VM 进行分阶段。完成后，它将显示 Execution completed successfully 消息。单击下一步。</block>
  <block id="3cc3deea8672e0fcd5bc11332460cfc3" category="paragraph"><block ref="3cc3deea8672e0fcd5bc11332460cfc3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="62b70b6acb37bbe29be34bdc234c6588" category="list-text">安装完 RHV-M 后，输入托管引擎存储域的详细信息，以便将虚拟机从本地存储复制到共享存储域，从而提高高可用性引擎仲裁。</block>
  <block id="02add90ef7d9ff072f21a6490a48c8d0" category="list-text">以 iSCSI 形式输入存储类型，提供 iSCSI 门户详细信息，单击检索目标列表，提取与该门户对应的 iSCSI 目标列表，然后选择要映射到托管引擎存储域的卷和 LUN 。单击下一步。</block>
  <block id="2447ded08ba53ca95c3c46b3af6e8ef3" category="paragraph"><block ref="2447ded08ba53ca95c3c46b3af6e8ef3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e795072ef958bd5aec538cf4cd76be66" category="admonition">如果托管引擎设置无法发现存储，请打开与节点的交互式 SSH 会话，并验证您是否可以通过节点的存储接口访问 SVIP IP 地址。如果网络可访问，您可能需要手动发现或登录到用于托管引擎安装的 iSCSI LUN 。</block>
  <block id="049a00fa90b7ed6a10981f228a8d1e56" category="list-text">在下一屏幕中，查看存储配置，如果需要进行任何更改，请返回并进行更改。如果信息正确，请单击完成部署。将虚拟机复制到存储域需要一段时间。部署完成后，单击关闭。</block>
  <block id="4b833cbd71f8a9175f7b31b419818f43" category="paragraph"><block ref="4b833cbd71f8a9175f7b31b419818f43" category="inline-image-macro-rx" type="image"></block></block>
  <block id="899af61c3e4b8640253b8bbad8b94282" category="list-text">下一步是注册并启用 Red Hat Virtualization Manager 存储库。使用 SSH 登录到 RHV-M 虚拟机，以便将其注册到订阅管理器中。</block>
  <block id="0e9eeb8f86c067db228487029e0ed7b7" category="list-text">注册后，列出可用的订阅并记录 RHV-M 的池 ID</block>
  <block id="2a78e509c633b017c4d8f553c1af9973" category="list-text">使用记录的池 ID 附加 RHV-M 订阅。</block>
  <block id="33c96896877eba57a8048e0222174db0" category="list-text">启用所需的 RHV-M 存储库。</block>
  <block id="ff25b7f7df5bbf8e16ba4342bfe4043c" category="list-text">接下来，创建一个存储域，用于存放与主机位于同一数据中心的所有 VM 的 VM 磁盘或 OVF 文件。</block>
  <block id="c602dec1b297d8de8187085cbdc98b40" category="list-text">要使用浏览器登录到 RHV-M 管理门户，请登录到 `https://&lt;ManagerFQDN&gt;/ovirt-engine` ，选择管理门户，然后以 `admin` `@` `internal` user 身份登录。</block>
  <block id="95d12bd07db0c9f52192cbc76a1349bf" category="list-text">导航到 " 存储 "&gt;" 存储域 " ，然后单击 " 新建域 " 。</block>
  <block id="9be273cd54aa8071f2ca62ddb87bce36" category="list-text">从下拉菜单中，为域功能选择数据，为存储类型选择 iSCSI ，选择要映射卷的主机，输入所选名称，确认数据中心是否正确，然后展开数据域 iSCSI 目标并添加 LUN 。单击确定以创建域。</block>
  <block id="03668760ca7047e6b97eda43497b4a83" category="paragraph"><block ref="03668760ca7047e6b97eda43497b4a83" category="inline-image-macro-rx" type="image"></block></block>
  <block id="564b0fdf824375e9f90d5b3d0fcde384" category="admonition">如果托管引擎设置无法发现存储，您可能需要手动发现或登录到用于数据域的 iSCSI LUN 。</block>
  <block id="f340cb1e6d342813ebd8975cb0d60e5a" category="list-text">将第二个主机添加到托管引擎仲裁。导航到 Compute &gt; Hosts ，然后单击 New 。在 New Host 窗格中，选择相应的集群，提供第二台主机的详细信息，然后选中安装后激活主机复选框。</block>
  <block id="55851ac66b6be16cd97377ae62b60e5f" category="paragraph"><block ref="55851ac66b6be16cd97377ae62b60e5f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="aa333fc52bc439f75346dea60673b188" category="list-text">单击 New Host 窗格下拉列表中的 Hosted Engine 子选项卡，然后从 Hosted Engine 部署操作中选择 Deploy 。单击确定将主机添加到仲裁。此时将开始安装支持托管引擎所需的软件包并激活主机。此过程可能需要一段时间。</block>
  <block id="f18cc1d7ccb77db2f73db750579b40d7" category="paragraph"><block ref="f18cc1d7ccb77db2f73db750579b40d7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="52a3224634f7bb8efb6e2aaad8f6fa4e" category="list-text">接下来，为主机创建存储虚拟网络。导航到 " 网络 "&gt;" 网络 " ，然后单击 " 新建 " 。输入您选择的名称，启用 VLAN 标记，然后输入存储网络的 VLAN ID 。确认已选中 VM Network 复选框，并且 MTU 已设置为 9000 。转到 "Cluster" 子选项卡，并确保选中 "Attach and require" 。然后，单击确定以创建存储网络。</block>
  <block id="b10b6d7bfd344c35cc8540ba4fb0f39a" category="paragraph"><block ref="b10b6d7bfd344c35cc8540ba4fb0f39a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d186ae2c41e2a501e8944faa0b14c58c" category="list-text">将存储逻辑网络分配给集群中的第二个主机或当前未托管托管托管引擎 VM 的任何主机。</block>
  <block id="13be10d2385e9be5d09d9d9787c0fc36" category="list-text">导航到 Compute &gt; Hosts ，然后在第二列中单击具有银冠的主机。然后，导航到 Network Interfaces 子选项卡，单击 Setup Host Networks ，然后将存储逻辑网络拖放到 bond0 右侧的 Assigned Logical Networks 列中。</block>
  <block id="c7fd04691176d43537b81edcce734dab" category="paragraph"><block ref="c7fd04691176d43537b81edcce734dab" category="inline-image-macro-rx" type="image"></block></block>
  <block id="99d2f99b965b9ffa14a321e2e5647d81" category="list-text">单击存储网络接口上 bond0 下的笔形符号。配置 IP 地址和网络掩码，然后单击确定。在设置主机网络窗格中再次单击确定。</block>
  <block id="f1dfb0de6313160d1a3bd7701d419c0d" category="paragraph"><block ref="f1dfb0de6313160d1a3bd7701d419c0d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7959919ede3bb9d945600df0d9c48200" category="list-text">将托管引擎 VM 迁移到刚刚配置的主机，以便在第二台主机上配置存储逻辑网络。导航到 Compute &gt; Virtual Machines ，单击 HostedEngine ，然后单击 Migrate 。从目标主机下拉菜单中选择第二个主机，然后单击迁移。</block>
  <block id="7b3d8bae51e2a28522af31a32498a1af" category="paragraph"><block ref="7b3d8bae51e2a28522af31a32498a1af" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2c859f4eb36b4b0138dd9cdedcd74547" category="paragraph">成功迁移并将托管引擎 VM 迁移到第二台主机后，对当前拥有银冠的主机重复步骤 21 和 22 。</block>
  <block id="9e5778ac08dd40f70658f2b77a02ef2b" category="list-text">完成此过程后，您应看到两个主机均已启动。其中一个主机具有一个黄金冠，表示它正在托管托管托管引擎 VM ，而另一个主机则具有一个银冠，表示它能够托管托管托管托管引擎 VM 。</block>
  <block id="7ebf458007c0537a40d91393fe78319b" category="paragraph"><block ref="7ebf458007c0537a40d91393fe78319b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="16153a9b4907cb611b5b2fa062cfbbc2" category="inline-link-macro">下一步： 6.配置 RHV-M 基础架构</block>
  <block id="27cdd14fe5ef4d010036058af29787ec" category="paragraph"><block ref="27cdd14fe5ef4d010036058af29787ec" category="inline-link-macro-rx"></block></block>
  <block id="d9bf2a69b4728b468c14df0accf5a562" category="doc">配置 Cleondris ：使用 Cleondris 的 NetApp HCI DR</block>
  <block id="f3a165a25e9db2d4d3e696e15cdad2f9" category="paragraph">现在，您可以将 Cleondris 配置为与 vCenter Server 和存储进行通信。如果您已注销，返回并重新登录以从此处开始，系统将提示您提供以下信息：</block>
  <block id="ac1f14bc0c0856131d90daa97b03fcf7" category="list-text">接受 EULA 。</block>
  <block id="118c39fac80ad445b5e8d2d1454ae6c6" category="list-text">复制并粘贴许可证。</block>
  <block id="aedde0d8b1e01a59e24d275d0f64c141" category="list-text">系统会提示您执行配置，但现在请跳过此步骤。最好按照本白皮书稍后的详细说明执行此配置。</block>
  <block id="61886043c03822d0bc50a015497253e9" category="list-text">重新登录并看到绿色框时，必须更改为设置区域。</block>
  <block id="ef2fe3429619b34c69b3aa8b7f57ad24" category="section-title">添加 vCenter Server</block>
  <block id="621a73a38b8c2b658d8215877a64577e" category="paragraph">要添加 vCenter Server ，请完成以下步骤：</block>
  <block id="302eecd0222bfb0ba28a3baaae4e60e8" category="list-text">切换到 VMware 选项卡并添加两个 vCenter Server 。定义它们时，请添加一个良好的问题描述并使用测试按钮。</block>
  <block id="f208725a3097f5a944e6ff62b183b254" category="paragraph"><block ref="f208725a3097f5a944e6ff62b183b254" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ac56aae5bfd2887ddbb83bfcbb2e0733" category="paragraph">此示例使用 IP 地址而不是 FQDN 。（此 FQDN 最初不起作用；我稍后发现我未输入正确的 DNS 信息。更正 DNS 信息后， FQDN 工作正常。） 另请注意问题描述，它非常有用。</block>
  <block id="6b57ae9f97faf7e1040a2a40e2d7b89d" category="list-text">完成两个 vCenter Server 后，屏幕将显示它们。</block>
  <block id="c7b9d0aedac2e50ba5dbe85b650e1821" category="paragraph"><block ref="c7b9d0aedac2e50ba5dbe85b650e1821" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0eec6c8af8b37714724853dd3b32e89d" category="section-title">添加 NetApp HCI 集群</block>
  <block id="6ca2458fe36ff5da6d08a73b6f1e037e" category="paragraph">要添加 NetApp HCI 集群，请完成以下步骤：</block>
  <block id="54937580e55297c6249b1883abc3c501" category="list-text">切换到 NetApp 选项卡并添加生产和灾难恢复存储。同样，请添加一个良好的问题描述并使用测试按钮。</block>
  <block id="686d45a49e818d6f00767c146b36749d" category="paragraph"><block ref="686d45a49e818d6f00767c146b36749d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1090a579d2f2c561fb4f0b835c89e38c" category="list-text">添加存储和 vCenter Server 后，请更改为清单视图，以便查看配置结果。</block>
  <block id="d954e7516cc9e4167c9f86d2a821626f" category="paragraph"><block ref="d954e7516cc9e4167c9f86d2a821626f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fc684d52ea526611a56958979177b522" category="paragraph">您可以在此处查看对象数量，这是确认一切正常的好方法。</block>
  <block id="8c340dc334134096f68b880b42a8692c" category="section-title">Replication</block>
  <block id="9c60a5a775764ad346fa1efe6f0c954c" category="paragraph">您可以使用 HCC 在两个站点之间启用复制。这样，我们就可以保留在 HCC UI 中，并决定要复制的卷。</block>
  <block id="0325ecf7e8232a0d77f4329a8f83aa93" category="paragraph">* 重要信息： * 如果复制的卷包含两个计划中的 VM ，则只有第一个计划会进行故障转移，因为它会禁用该卷上的复制。</block>
  <block id="51265ddb73d4f2ba1a1083db12356784" category="paragraph">我建议每个第 1 层应用程序都有自己的卷。第 4 层应用程序可以全部位于一个卷上，但只能有一个故障转移计划。</block>
  <block id="f707e4a88792c174115ae48bc624c5da" category="doc">TR-4830 ：使用 Cleondris 实现 NetApp HCI 灾难恢复</block>
  <block id="cbc50a759f9d3e6d6d399d73a0a143be" category="paragraph">NetApp 公司 Michael White</block>
  <block id="70b63dfec5da8394cdbba3e4b9a43371" category="section-title">业务连续性和灾难恢复概述</block>
  <block id="7634dbc72df22ebde1a102f7f0c04081" category="paragraph">业务连续性和灾难恢复（ Business Continuity and Disaster Recovery ， BCDr ）模式是为了让员工恢复工作。灾难恢复侧重于将电子邮件服务器等技术恢复为现实。通过业务连续性，用户可以访问该电子邮件服务器。单是灾难恢复就意味着该技术正在运行，但可能没有人在使用它； BCDr 意味着人们已经开始使用已恢复的技术。</block>
  <block id="b4aa6fc552dc3e0681d7eb1b634d80bc" category="section-title">业务影响评估</block>
  <block id="e65186516d20d93601275a4f9fa21cb6" category="paragraph">很难知道第 1 层应用程序需要什么才能正常运行。通常很明显，身份验证服务器和 DNS 非常重要。但是，是否也有数据库服务器？</block>
  <block id="9d0e57424a291bd2fbadfcd7e7e9c3ba" category="paragraph">此信息非常重要，因为您需要打包第 1 层应用程序，以便它们在测试故障转移和实际故障转移中都能正常工作。会计公司可以执行业务影响评估（ BIA ），为您提供成功保护应用程序所需的所有信息：例如，确定所需组件，应用程序所有者以及应用程序的最佳支持人员。</block>
  <block id="da56a29de59d9a8e60ba60d8fd370e3b" category="section-title">应用程序目录</block>
  <block id="4924b0d4dd68611f7a5933485506b518" category="paragraph">如果您没有 BIA ，则可以自己执行某个版本的操作：应用程序目录。通常会在电子表格中填写以下字段：应用程序名称，组件，要求，所有者，支持， 支持电话号码以及赞助商或业务应用程序所有者。此类目录对于保护您的应用程序非常重要且非常有用。帮助台有时可以帮助您处理应用程序目录；他们通常已经启动了一个应用程序目录。</block>
  <block id="b51fa1a9205a7c8d6acb851c7c31fcf0" category="section-title">不需要保护的内容</block>
  <block id="541a19e2292a648773972599c14abea1" category="paragraph">某些应用程序不应受到保护。例如，您可以轻松且经济地在灾难恢复站点上将域控制器作为虚拟机（ VM ）运行，因此无需保护。事实上，恢复域控制器可能会在恢复期间出现发生原因问题。如果在灾难恢复站点中恢复了生产站点中使用的监控软件，则该软件不一定适用于灾难恢复站点。</block>
  <block id="d9690192533136dd1feb519e77a1abf1" category="paragraph">通常没有必要保护可通过高可用性进行保护的应用程序。高可用性是可能的最佳保护；其故障转移时间通常不到一秒。因此，灾难恢复流程编排工具不应保护这些应用程序，但高可用性可以。例如，银行中支持 ATM 的软件。</block>
  <block id="66e5f5a01a81e18b4d465400d4493e6a" category="paragraph">您可以看出，如果应用程序所有者制定了 20 秒恢复时间目标（ RTO ），您需要了解应用程序的高可用性解决方案。RTO 不仅仅是复制解决方案。</block>
  <block id="c50bf6bfca8b1d41d2fe74e1b66c927d" category="section-title">产品概述</block>
  <block id="eb86072f612cb8298eb3d3fa11d613e9" category="paragraph">Cleondris HCI 控制中心（ HCC ）为新的和现有的 NetApp HCI 部署添加了灾难恢复功能。它与 NetApp SolidFire 存储引擎完全集成，可以保护任何类型的数据和应用程序。当客户站点发生故障时，可以使用 HCC 恢复二级 NetApp HCI 站点上的所有数据，包括基于策略的 VM 启动流程编排。</block>
  <block id="3a9374b16188a7311dc3bfee66d59e10" category="paragraph">为多个卷设置复制可能会很耗时，并且在手动执行时容易出错。HCC 可以为其复制向导提供帮助。此向导可帮助正确设置复制，以便在发生灾难时服务器可以访问卷。使用 HCC ，可以在沙盒中的二级系统上启动 VMware 环境，而不会影响生产。VM 将在隔离的网络中启动，并可进行功能测试。</block>
  <block id="f3b93f65b919d89b3660c48da3ff4cb6" category="doc">恢复计划：使用 Cleondris 的 NetApp HCI 灾难恢复</block>
  <block id="9dae09dde9df40070c82567a4ccdf247" category="paragraph">本节将讨论在发生危机或计划内迁移时成功对应用程序进行故障转移的情况。首先，它将关注保护复杂的多层应用程序，然后再关注简化的应用程序。您可以制定速度较慢或较快的灾难恢复计划，因此本节将举例说明性能最高的计划。</block>
  <block id="7c53890bd594667b85b059bcc6f4fc8e" category="section-title">多层应用程序</block>
  <block id="4956b63d9d9eec7536bdb31ad3a2057c" category="list-text">从故障转移页面中，选择计划选项卡。</block>
  <block id="3b6047a9518b5eb4211da6bda00ba4d4" category="paragraph"><block ref="3b6047a9518b5eb4211da6bda00ba4d4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0106ff323db3fc9ad0d478f8d3e13844" category="list-text">最右侧是一个 +Add Failover Group 按钮。</block>
  <block id="70f5638697d64235760eda3660eb69aa" category="paragraph"><block ref="70f5638697d64235760eda3660eb69aa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="111f74911693efd9a601808e87b97ea3" category="paragraph">在此示例中，我们将此计划称为多层。我们将使用左下角的网络映射将生产环境中使用的虚拟交换机更改为灾难恢复环境中使用的虚拟交换机。</block>
  <block id="a90e5f381bad885df141ffd0492ca64e" category="paragraph"><block ref="a90e5f381bad885df141ffd0492ca64e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ac071257d51c64e8dec59e3c9c887288" category="paragraph">上一屏幕截图显示了如何在生产环境中选择网络交换机，在灾难恢复环境中选择网络交换机，使用映射按钮选择网络交换机，然后使用保存。如有必要，您可以具有多个映射。</block>
  <block id="4406b10b5727c52deb61ae958f624b85" category="list-text">要选择要保护的 VM ，请单击添加故障转移组。</block>
  <block id="0db8d61e5b9363269adda59050fd0ed3" category="paragraph">由于此计划将保护多层应用程序，因此第一组用于数据库。</block>
  <block id="20a178087a59c1f8b52c932195ac0971" category="paragraph"><block ref="20a178087a59c1f8b52c932195ac0971" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6c60e33011f9296a3af83e93e1706cc4" category="paragraph">请注意此示例如何启用 Wait for VMware Tools 。此设置非常重要，因为它有助于确保应用程序正在运行。我们使用 " 添加 VM" 按钮添加数据库 VM 。我们未启用注销源 VM ，因为它会减慢故障转移的速度。现在，我们使用添加故障转移按钮来保护应用程序。</block>
  <block id="a1771dd358e5f6ebd768d8b179b9bd5e" category="list-text">对 Web 服务器执行相同的操作。完成此操作后，屏幕类似于以下示例。</block>
  <block id="a8131376979d505f7b1995bc9ff2c8b3" category="paragraph"><block ref="a8131376979d505f7b1995bc9ff2c8b3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fb2fd682b1de596bf8543835bf539db5" category="paragraph">该计划的重要部分是让所有数据库正常运行，然后启动应用程序，找到数据库并开始工作。然后， Web 服务器将启动，应用程序将完成并正常运行。这种方法是设置此类恢复的最快方法。</block>
  <block id="8425fb675efb52c99cfef56e7e1723fd" category="list-text">单击保存，然后继续。</block>
  <block id="8474f21c189f4c71e4d76a09fe0dceec" category="section-title">用于故障转移的简单或大规模应用程序</block>
  <block id="a331dc3e039d30b659b24242c0dff17c" category="paragraph">VM 的启动顺序非常重要，因此它们可以正常工作；这是上一节所完成的。现在，我们将对一组顺序不重要的 VM 进行故障转移。</block>
  <block id="0c17f9709d20be2e284385e1a72270d5" category="paragraph">我们来创建一个新的故障转移计划，其中一个故障转移组包含多个 VM 。我们仍然需要进行网络映射。</block>
  <block id="bf0d20f59262b23d8900cf0dc506d1ac" category="paragraph"><block ref="bf0d20f59262b23d8900cf0dc506d1ac" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dd3dc07a75f6a3b6aeef020541b50d1b" category="paragraph">请注意，此计划包含多个 VM 。它们也会在不同的时间启动，但这是可以的，因为它们不是彼此相关的。</block>
  <block id="34ecabafd3bf5b900772a7d988caaf8b" category="section-title">计划内迁移</block>
  <block id="aad6c1f8bccca9bfae029361a2ee5714" category="paragraph">计划内迁移与灾难恢复故障转移类似，但由于它不是灾难恢复情形，因此可以采用略有不同的方式来处理。实践计划内迁移仍不失为一个好方法，但您可以向故障转移组添加一些内容：您可以从源中取消注册虚拟机。这需要花费更多时间，但在计划内迁移中，这并不是一件坏事情。</block>
  <block id="11fdd5ede3cb81eb673f32179d0af4da" category="paragraph">计划内迁移通常是指迁移到新的数据中心。有时，如果破坏性天气即将来临，但尚未到来，也会使用此功能。</block>
  <block id="7fea3bf69174e73053322cb77c77608d" category="section-title">计划规划</block>
  <block id="2ff70492f8abba05e088fe108f87b146" category="paragraph">通过计划，您可以触发一个计划，该计划将负责所有故障转移计划。</block>
  <block id="8f2f893f6aa996285c0c2332c680ed24" category="paragraph">计划选项卡包含计划部分。您可以使用 +Add 子计划启动计划并向其添加其他计划。</block>
  <block id="f00394dc6c4d987e621424dccc1f3f9a" category="paragraph"><block ref="f00394dc6c4d987e621424dccc1f3f9a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="31c6f3a7091df3ea0069980931b883d4" category="paragraph">在此示例中，计划称为主计划，我们将这两个计划添加到其中。现在，在执行故障转移或测试故障转移时，我们也可以选择主计划。</block>
  <block id="858b1623aeeaed75ae6f81047544e714" category="paragraph">这种方法很好，因为最好在自己的计划中测试应用程序故障转移。每个计划都更易于进行故障排除和修复，如果运行良好，您可以将其添加到主计划中。</block>
  <block id="88163f7e6c81d3d7b7951268420c44de" category="section-title">脚本支持</block>
  <block id="afef26080a89ed3faa1576d21a0940ef" category="paragraph">您可以在测试故障转移过程中使用脚本，也可以将脚本用于其他各种用途。用途包括：</block>
  <block id="192bc08e50902f7f64a7a3c6ba37fd4c" category="list-text">打开防垃圾邮件硬件</block>
  <block id="dbfa107ed67c6b61dbc415e3da28ee6d" category="list-text">打开安全硬件</block>
  <block id="34aa2f22863f00995b3ce19e543e0cf0" category="list-text">填充标志</block>
  <block id="ff64ba3830270c69d44611a1ec38b444" category="list-text">正在更新 IPAM 硬件</block>
  <block id="fa8591041d0842128defcfb1f4762dd9" category="list-text">更改数据库中的语言设置</block>
  <block id="33c39ba7e13d6f4097c2532e6c5b2f84" category="paragraph">如果您先编辑计划，然后再编辑故障转移组，则会在脚本下看到相应条目。</block>
  <block id="3a6ecb7a84b99c1b1e8f2439abf1e104" category="paragraph"><block ref="3a6ecb7a84b99c1b1e8f2439abf1e104" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a065e3a9e05b28d25d8d3a7ac4a792f7" category="paragraph">在以下屏幕截图中， Host 一词是指执行脚本的虚拟机。单击编辑按钮以查看编辑脚本窗口：</block>
  <block id="b386478b5d3f70062b9b52b56625a6f9" category="paragraph"><block ref="b386478b5d3f70062b9b52b56625a6f9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d3f339e30f4cfaeedef8f75deb5d4f32" category="paragraph">在将脚本复制并粘贴到此对话框之前，应确保对其进行测试。您还应在 " 组顺序 " 字段中选择 " 发布 " 。请确保使用正确的凭据。</block>
  <block id="578451ee448effc58065cbe78fad2825" category="paragraph">如果您在执行之后继续执行，则以下屏幕截图将指示脚本已成功运行。</block>
  <block id="e5a8cb6160e575c8536dc83925465db5" category="paragraph"><block ref="e5a8cb6160e575c8536dc83925465db5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0d78ebb6ee4c6d1d44c2e81500d39b23" category="paragraph">如果退出代码不是 0 ，则脚本未成功。</block>
  <block id="f991894e65058243da421acb584bf911" category="section-title">脚本故障排除</block>
  <block id="40ac7860c50417fba19f34994e8a73d7" category="paragraph">如果脚本无法正确执行，请检查以下问题：</block>
  <block id="59bc790eca107ba52eaa5d8137e477db" category="list-text">VMware Tools 一次仅允许运行一个外部进程。因此，如果 VMware Tools 正在自行更新，则脚本将不会执行。如果将 VM 设置为自动升级 VMware Tools ，则可能会发生这种情况。此操作可在 VM 设置 &gt; VM 选项 &gt; VMware 工具中完成。</block>
  <block id="1a6d75798b6d4fa8fa077d6019f11428" category="list-text">检查凭据问题。</block>
  <block id="d4bd2cf4f689b29cfe10eea5d623a789" category="list-text">检查脚本问题，例如需要人工输入的提示符或其他功能。</block>
  <block id="f25d1f2eae848dbc9b7eea7e800c3012" category="paragraph">最佳做法是运行仅执行基本任务的简单脚本。您可能还需要包含日志文件以进行故障排除。</block>
  <block id="b24f9455f35ddee269073bd635bd9216" category="section-title">环境变量</block>
  <block id="50b73fa397e32cf85e19241d48c26a5f" category="paragraph">环境变量允许正在运行的脚本从环境中提取信息，无论该脚本是在生产站点还是灾难恢复站点运行。可以在编辑故障转移组对话框中输入环境变量。您可以先编辑计划，然后编辑故障转移组。</block>
  <block id="e9df46502c4691bc6dacdd7d6f6c5603" category="paragraph"><block ref="e9df46502c4691bc6dacdd7d6f6c5603" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7d4b35f06a2fe1ba80ae3935633dbae1" category="paragraph">请注意，这些环境变量不在我们通常认为的环境中，您无法使用 set 命令来查看它们。要查看完整的变量列表，请从以下屏幕截图运行脚本。此脚本包含 `Get-Variable * &gt; c ： \utils\var_log.txt` 以捕获所有变量。</block>
  <block id="a1b36c69e4b1b9c0f81dc4b84803c121" category="paragraph"><block ref="a1b36c69e4b1b9c0f81dc4b84803c121" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d48c8c220e062a03ffef1f0579b7b175" category="paragraph">此选项将列出可用的 50 多个变量以及您添加的任何变量，这些变量将显示在列表末尾。</block>
  <block id="89f0ba29697158d5948b1c50f4468d36" category="doc">灾难恢复配对： NetApp HCI 灾难恢复与 Cleondris</block>
  <block id="92c47c36e467d55c7c1ab2ad07002f6c" category="list-text">显示故障转移页面。</block>
  <block id="218f23c2647e8c1f67b651b839894440" category="list-text">在 vCenter Server 和存储示意图上，选择保护选项卡。</block>
  <block id="880372b3f2041b1ed2221ae752c7437e" category="paragraph"><block ref="880372b3f2041b1ed2221ae752c7437e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b61fc7fd1b2aa46e1226bf11f1bcce6f" category="paragraph">屏幕的最远端会显示一些有用的信息，例如您有多少个受保护的 VM 。（在本示例中，目前无。） 您也可以在此处访问复制向导。</block>
  <block id="c18e63c4f7ad9caad017eee025d2c453" category="paragraph"><block ref="c18e63c4f7ad9caad017eee025d2c453" category="inline-image-macro-rx" type="image"></block></block>
  <block id="19680731a28c0fd2c8077f40c48619af" category="paragraph">此向导可轻松设置复制。</block>
  <block id="56772d35d79e177012b86be0eebb2341" category="paragraph"><block ref="56772d35d79e177012b86be0eebb2341" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0741f388a5f0973d52cb36f27f900a39" category="list-text">您可以选择对您重要的卷，但也要确保在集群字段的顶部选择了正确的 vCenter Server 。</block>
  <block id="7ecc152a072407f2464bb72d2be5af0b" category="paragraph">在最右侧，您会看到配对类型，并且仅允许或支持 Sync 。</block>
  <block id="b004e02fcaa8c3c77603e08655173bdf" category="paragraph">单击下一步后，将显示目标区域。</block>
  <block id="f32e003f2341e85b6b0a53645080c2b6" category="paragraph"><block ref="f32e003f2341e85b6b0a53645080c2b6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ef8f9f6c8a63ed7855d7ef400c8c6054" category="list-text">默认信息通常是正确的，但仍值得检查。然后单击下一步。</block>
  <block id="f02c204adf911f1e4a8e0a4f590bd9bb" category="paragraph"><block ref="f02c204adf911f1e4a8e0a4f590bd9bb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="051c0db3571a3ea6f1652abd5ebcaee6" category="paragraph">请务必确保显示灾难恢复站点 vCenter Server 并选择所有主机。完成此操作后，请使用 " 预览 " 按钮。</block>
  <block id="00c5fd23277d941c77abe1c5e0e1356b" category="list-text">接下来，您将看到一个摘要。您可以单击 Create DR 以设置卷配对并开始复制。</block>
  <block id="6e619442dbffe48a227b96486391632b" category="paragraph">根据您的设置，复制可能需要一段时间。我建议您在这里等一晚。</block>
  <block id="7540bbcb38524b76f697f6afa773df9d" category="doc">故障转移：使用 Cleondris 的 NetApp HCI 灾难恢复</block>
  <block id="13991507683d2733fedd3f9c809cd63f" category="section-title">测试故障转移</block>
  <block id="78e9d8214a566cb1351ff7a54a5be424" category="paragraph">测试故障转移非常重要，因为它可以向您，应用程序所有者，您的经理和 BCDr 人员证明您的灾难恢复计划有效。</block>
  <block id="ff92521e81a842143b30a3a9fb65e070" category="paragraph">要测试故障转移，请完成以下步骤：</block>
  <block id="105579f127eb8d81fac21c66b0f562ba" category="list-text">在故障转移页面中，单击启动故障转移。</block>
  <block id="902d0ee479f2f9302e08dbd1667e602e" category="paragraph"><block ref="902d0ee479f2f9302e08dbd1667e602e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="29b787fff83e57a7107b51587bced74e" category="list-text">在故障转移页面上，您可以进行一些选择。</block>
  <block id="465245e6fc07a4a5854ac24ef660dee4" category="paragraph"><block ref="465245e6fc07a4a5854ac24ef660dee4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e34accbba09d1cd8fe694fa08798a870" category="paragraph">请仔细指定计划， VM 的来源以及要恢复的位置。</block>
  <block id="29181c1084b2e4fcf63162460f4e1c30" category="paragraph"><block ref="29181c1084b2e4fcf63162460f4e1c30" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4dd440793962f812cfba37435a4f4694" category="paragraph">此时，屏幕将显示计划中的 VM 列表。在此示例中，右上角的警告表示不包括三个 VM 。这意味着，在复制的卷中，有三个 VM 不属于该计划的一部分。</block>
  <block id="6cba5f9ebc72d4810700895f10df49cb" category="paragraph">如果左侧第一列显示红色 X ，则可以单击它并了解问题所在。</block>
  <block id="4094c73cdde159891733ce51a6ef69fd" category="list-text">在屏幕右下角，您必须选择是测试故障转移（故障转移到沙盒）还是启动实际故障转移。在此示例中，我们选择故障转移到沙盒。</block>
  <block id="c1db0700deffac311ac86b6c5a19b23e" category="paragraph"><block ref="c1db0700deffac311ac86b6c5a19b23e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9e30bf456b939392347ec8ea0debae4b" category="list-text">现在，摘要将列出正在执行的计划。有关详细信息，请使用最左侧的放大镜（在本文档后面的 " 监控 " 中介绍）。</block>
  <block id="5289b0758155cc40a4b1a3267b306313" category="section-title">运行故障转移</block>
  <block id="395c4f1b1efee53fd774e08f99a28871" category="paragraph">首先，故障转移与测试故障转移相同。但是，当您到达此处所示的位置时，操作步骤会发生变化：</block>
  <block id="9fcccf209c9f573473bc77cbfb483717" category="list-text">选择启动，而不是选择故障转移到沙盒选项。</block>
  <block id="6dbfbc31fa54dbb8ed28f0d920b86d92" category="paragraph"><block ref="6dbfbc31fa54dbb8ed28f0d920b86d92" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5e4dc1aed349ff3b78bf7c4cf9e92ebe" category="list-text">选择是。</block>
  <block id="75c3fbd204f112013a3851bb936bfaae" category="paragraph"><block ref="75c3fbd204f112013a3851bb936bfaae" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7fe032037d86c277d0df2c930c6b3c73" category="list-text">屏幕显示此故障转移正在运行。有关详细信息，请使用放大镜（在 " 监控 " 一节中讨论）。</block>
  <block id="9747fdb3c3fdb6d4010d9df8ba44d956" category="paragraph"><block ref="9747fdb3c3fdb6d4010d9df8ba44d956" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5a1f98350209fbf50e0a8713839e645f" category="section-title">在故障转移期间监控</block>
  <block id="67df49072b3d37b03826accb970cbb59" category="list-text">在运行故障转移或测试故障转移时，您可以使用最右侧的放大镜对其进行监控。</block>
  <block id="e6bec87d0e8b9a797b2b37b235ab0800" category="paragraph"><block ref="e6bec87d0e8b9a797b2b37b235ab0800" category="inline-image-macro-rx" type="image"></block></block>
  <block id="00d7279c2df6bac8e7513b35a33d085d" category="list-text">单击放大镜可查看更多详细信息。</block>
  <block id="cdd9dab162b79c2280cdf3fbab45c855" category="paragraph"><block ref="cdd9dab162b79c2280cdf3fbab45c855" category="inline-image-macro-rx" type="image"></block></block>
  <block id="569e44401e5798c032b8f08afb054496" category="list-text">随着故障转移或测试故障转移的进行，将显示 VM 屏幕截图选项。</block>
  <block id="92cf74e3577e3e88a149c2c1dd24b3c1" category="paragraph"><block ref="92cf74e3577e3e88a149c2c1dd24b3c1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a4583669fa9b0e83e253d1c46bf699ba" category="paragraph">有时，查看屏幕截图以确认虚拟机正在运行非常有用。它未登录，因此您无法判断应用程序是否正在运行，但至少您知道虚拟机正在运行。</block>
  <block id="79ecc8ba05677737c4b7a93774b1b6d6" category="section-title">查看未运行故障转移时的历史记录</block>
  <block id="b69c30c13a85f1d943155d9dc3ab90f5" category="paragraph">要查看过去的测试或故障转移，请单击活动选项卡上的显示历史按钮。有关更多详细信息，请使用放大镜。</block>
  <block id="b6be89a9f977669fd6e729f172639684" category="paragraph"><block ref="b6be89a9f977669fd6e729f172639684" category="inline-image-macro-rx" type="image"></block></block>
  <block id="33c6231e732c140a18ced431724c24a6" category="paragraph">您也可以下载包含详细信息的报告。</block>
  <block id="91f86b719c50487adb029d9ab79710c8" category="paragraph">这些报告有多种用途：例如，向应用程序所有者证明您已对该应用程序的故障转移进行了测试。此外，此报告还可以提供详细信息，帮助您对故障转移进行故障排除。</block>
  <block id="a08fa625c3910cfc1f2651c332cbd287" category="paragraph">您可以通过在注释字段中将文本添加到计划中来向报告添加文本。</block>
  <block id="9adff196a1ded5d916d2afb0f3ea8510" category="paragraph"><block ref="9adff196a1ded5d916d2afb0f3ea8510" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e15299062f92cf231886469662b729d4" category="doc">最佳实践：采用 Cleondris 的 NetApp HCI 灾难恢复</block>
  <block id="95a1e0b78d80f6f9d1666aa2b939bc24" category="section-title">成功建议</block>
  <block id="5987790f321e6c3f1a3545ed184e3cfd" category="paragraph">以下提示可帮助您更成功地完成 BCDr 工作。</block>
  <block id="1ddf333c6654f7f89c739dddfb4cc429" category="section-title">应用程序</block>
  <block id="4f3078b99a3266b84425db4dba695bde" category="paragraph">了解您的应用程序及其工作原理。您在这些故障转移上花费的时间越多，您的实际故障转移和测试故障转移就越成功。如果出现问题，您将能够更快地解决这些问题。</block>
  <block id="c494464dfe7f34fb4549988867c7301d" category="paragraph">首先保护一个应用程序。选择一个相对简单的选项，并向对等方和管理层演示测试故障转移。此演示将帮助您获得管理和对等支持，在保护其他应用程序之前，此测试将帮助您了解更多信息。</block>
  <block id="7928a507b3f896229eb0aeb6ff253cfc" category="paragraph">第 1 层应用程序应位于其自己的卷上。</block>
  <block id="8c004d7e3b8a5a850ab2459c3afc2f57" category="section-title">实践</block>
  <block id="5ac8f828eb0130f0fcbcd8394c4416f3" category="paragraph">您需要在尽可能切合实际的情况下经常练习。例如，在异地练习，有时会在酒店会议室中使用较差的网络。经常练习是关键，请尝试改变团队，以便应用程序团队 X 能够恢复应用程序 Y ；这种方法有助于知识共享。</block>
  <block id="643f7e1843752389fac35ed3bf1ec6ea" category="section-title">执行发起人</block>
  <block id="700f8ccb5fc5b4a8bc50bb5e4593d2cf" category="paragraph">请确保获得执行发起人。当各个团队之间的协作不好或者您需要应用程序团队合理地安排恢复时间时，您需要获得高管支持。</block>
  <block id="613c3213bd63e3b049afd369f6bb54bd" category="section-title">计划部分中断或完全中断</block>
  <block id="6ee32a2c23246f4ac48be3fbeab60765" category="paragraph">大多数灾难恢复事件都是部分灾难恢复事件，因此请确保第 1 层应用程序可以恢复，而无需恢复所有内容。</block>
  <block id="598b092e27986b9b865df094fe4948b9" category="section-title">触发时间</block>
  <block id="2d117bd0262a765114c0d05bc98abceb" category="paragraph">练习故障转移，同时练习管理有权触发故障转移的其他人。他们需要练习，并且需要了解故障转移的成功与否。确保他们尽可能在现实的场景中与您一起练习。您可以执行沙桌式练习，让操作人员提出问题，经理讨论他们的响应。</block>
  <block id="d3513d99924fd95ea3092f188ffecb88" category="section-title">灾难恢复为何失败？</block>
  <block id="ee57a2298cba1370670a93f9e1bba4f5" category="paragraph">灾难恢复计划失败的原因有多种：</block>
  <block id="de789e7cb5644798e67b99e9295a82f7" category="list-text">需要 BCDr 。</block>
  <block id="7042e30c6e1cf37c0497727c5f36743b" category="list-text">态度缺失：人们不会过多地关注。</block>
  <block id="d385d9e8a066996973c5b1d57a97d868" category="list-text">缺少执行发起人或未分配此发起人。</block>
  <block id="90b0c66b2174045a954c8d4c883bef82" category="list-text">实践不足或不够真实。</block>
  <block id="ae9e63dcd73e03262f7818567d4d5c52" category="list-text">测试中的数据会流入产品。这种情况非常严重，必须避免。</block>
  <block id="e52b0fe24e563d53f4be329ae86a426d" category="section-title">灾难恢复业务流程工具的其他用途</block>
  <block id="dabe854b3b2961a78f47a503960f3ef9" category="paragraph">随着时间的推移，客户发现灾难恢复流程编排工具还有其他用途。例如，他们会在测试故障转移中测试应用程序和操作系统升级。此测试优于实验室测试，因为它使用实际生产位，这意味着，在生产环境中完成此过程将与测试故障转移过程一样平稳。此外，我还发现，安全漏洞测试是在测试故障转移时首先完成的，用于确定哪些应用程序可能会受到负面影响。</block>
  <block id="c3d2403dbc77474c7fdb026f4f7d65e7" category="section-title">主动 - 主动站点</block>
  <block id="596692f71fe9f0df78a85e240dce3758" category="paragraph">目前，要保护主动 - 主动站点，您必须在两个站点上安装 HCC 并正常进行保护。目前尚无保护概述。最佳模式是主动 - 主动，因为您可以将应用程序拆分为两个站点；发生中断时，只需进行一半故障转移。</block>
  <block id="0869a353be25db9145e736d2bed1be03" category="section-title">允许在测试故障转移中使用额外资源</block>
  <block id="21723429dfac345f17b4e217f02c16a9" category="paragraph">有时，在测试故障转移中需要有更多资源，以便可以进行正确的应用程序测试。例如，这些资源可能包括物理防垃圾邮件设备或负载平衡器等内容。此外，您还可以包括数据库等内容，这些内容可能会导致发生原因问题，因为您必须确保测试数据不会投入生产。要可靠地执行此过程，请参考以下步骤。</block>
  <block id="3b26e0bf0d7215eec4036be44f02fdc4" category="list-text">脚本会在灾难恢复测试过程中执行（或在必要时使用手动过程）。</block>
  <block id="c3f42876ab5e94aa351f5be4fa6a3a0a" category="list-text">此时将创建一个单独的逻辑分区（ LPAR ）。</block>
  <block id="3e2edc585f400713211b3c6f8ff7a2f8" category="list-text">虚拟网络将添加到单独的 LPAR 中，并且它已连接到测试网络。</block>
  <block id="0ad3fa511adf4f103b70ebd18925d78a" category="list-text">脚本会将相应数据导出并复制到单独的新 LPAR 。您可能还需要将应用程序放在单独的分区上。</block>
  <block id="178977f093c18aa41f9e75bda2a7892a" category="list-text">要访问此新服务器，您可能需要在测试网络中调整 DNS 名称或应用程序的配置。</block>
  <block id="9bdbceaddd3b0ec3af7ed706fe005aa5" category="list-text">测试成功完成。</block>
  <block id="44a500434277ed0d35579d28a96e4b8f" category="list-text">完成测试并进行清理后，另一个脚本将运行，并删除单独的分区。该步骤可防止任何事情意外投入生产。</block>
  <block id="e456817e44677da5f9d0529e0417eb51" category="paragraph">您可以使用类似的过程使域控制器进入测试故障转移：</block>
  <block id="d8016127c910fc9926ea54596f3088a6" category="list-text">关闭灾难恢复站点中的域控制器。确保还有其他域控制器仍在运行。</block>
  <block id="908c05ebecf0d106e8f0ecd34b19f7b9" category="list-text">关闭域控制器后，将其克隆。</block>
  <block id="a0b5a33e3165ff3056e1ea2a39f1d956" category="list-text">打开原始域控制器的电源。</block>
  <block id="e135fb477ab4f97ca228328562e45d9b" category="list-text">将克隆的域控制器置于测试网络上。</block>
  <block id="414e2d5ad5843269903a0a79242b77e7" category="list-text">打开克隆域控制器的电源。</block>
  <block id="6704906701f56d937187df2068918369" category="list-text">您现在应该能够在测试中使用域控制器，无论是用于身份验证还是 DNS 。</block>
  <block id="684ac62c6a83af2f6daba46edafc2297" category="list-text">完成测试后，删除克隆的域控制器。请勿跳过此步骤，因为您不希望该域数据库与生产域进行通信。</block>
  <block id="8594e348ed7da9a490d6ec1951347943" category="paragraph">最好编写这些步骤的脚本并从恢复计划中执行该脚本。但是，要执行此操作，您需要一个脚本或批处理文件，该脚本或批处理文件可以判断它是在测试中执行还是在实际故障转移中执行，而在实际故障转移中，它不起作用。</block>
  <block id="6da6e44dc9987246944fdf9de3d4e794" category="section-title">系统日志</block>
  <block id="027b1ce7b9bb63288a38dc50d1555781" category="paragraph">使用系统日志从 Cleondris 捕获事件非常有用。安全性或操作等组可能会受益。</block>
  <block id="143a1eaba1657d87ec8e647a314fb7bc" category="list-text">要执行此操作，请使用设置页面和事件选项卡。然后使用添加接收器按钮。</block>
  <block id="82571d9ed704e33174d2b41a7ead05a5" category="paragraph"><block ref="82571d9ed704e33174d2b41a7ead05a5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="81f478663734118c66580a5defe51fe7" category="list-text">指定要发送的事件。在本示例中，最佳做法可能是现在发送所有这些消息。选择相应框；有些不适用于 Cleondris HCC 和 BCDr ，但如果不使用它们，则不会生成这些框。</block>
  <block id="c29e9a621c273d7f903f28b373e41c78" category="paragraph">您可以在列表底部的事件部分中查看 BCDr 事件。</block>
  <block id="cdd69c91b52b5920f83cee78cc9453cc" category="paragraph"><block ref="cdd69c91b52b5920f83cee78cc9453cc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f24e8ffe58bc1b943a2758550a286015" category="section-title">虚拟机状态</block>
  <block id="731b77c41e438f3fcb6d419edbc8bcd9" category="paragraph">虚拟机状态会在故障转移期间保留下来。在生产环境中启动或关闭的虚拟机在故障转移后或测试故障转移期间仍保持相同状态。但是，请注意， HCC 每 20 分钟扫描一次 vCenter 。因此，您需要等待该扫描，或者使用 HCC 中的刷新按钮立即刷新。</block>
  <block id="4d49f5bdc7a0bc454d23b8e23db9c200" category="paragraph"><block ref="4d49f5bdc7a0bc454d23b8e23db9c200" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8351cfbe97f0fdcde480dec2c26dd4f7" category="section-title">添加 " 仅执行帐户 "</block>
  <block id="aea416d5f8c57ffc4ebc7cc68b64e6ff" category="paragraph">只有执行帐户对于管理器在不保存更改的情况下触发故障转移非常有用。您自己创建此帐户。首先，创建具有以下权限的角色：</block>
  <block id="99dea78007133396a7b8ed70578ac6ae" category="list-text">登录</block>
  <block id="5e60827a5ee8d1c34856c2e3fde35432" category="list-text">Inventory_sf_view</block>
  <block id="b7406c752bc8c91ff7a8c68866e84144" category="list-text">Inventory_vc_view</block>
  <block id="c0f396a53e5edf1b73272ef22ba7f5d3" category="list-text">restore_exec_sf_failover</block>
  <block id="130de82b537ce87f11b210127c2604e4" category="list-text">failover_view</block>
  <block id="c21159e13d5b22afd94d37c2e4c5e9cd" category="list-text">failover_job_modify</block>
  <block id="bf33725675755110d8fc6b8e7812ddc8" category="list-text">failover_config_view</block>
  <block id="90c163c0ff4be4cd0d1f30204128935a" category="paragraph">完成此角色后，创建具有此角色的用户；生成的帐户为只执行帐户。这组权限允许用户查看和更改内容，但不能保存更改。</block>
  <block id="e6ccf518bfa52988939b00c9ff526b21" category="section-title">闲置超时</block>
  <block id="d2a1d5d1bfba84b6bf2ed973f7e91cbf" category="paragraph">可以将此参数设置为在浏览器中无活动时执行自动注销。使用其他选项卡将视为活动。</block>
  <block id="bd8e0f8d035414cd9b63da2eb13f4ae6" category="paragraph">选择设置选项，然后选择高级选项卡以查看高级配置窗口。</block>
  <block id="e2fc6c95360e985bfb172b6c75943414" category="paragraph"><block ref="e2fc6c95360e985bfb172b6c75943414" category="inline-image-macro-rx" type="image"></block></block>
  <block id="354059d716c36f4ab923cd8bd66ff05d" category="paragraph">单击添加选项按钮以添加选项和值。在上面的屏幕截图中，如果浏览器中没有任何活动，则必须在超时之前经过 360 秒。</block>
  <block id="b988af26b13188ef34c71d9dcae17472" category="section-title">清单重新扫描</block>
  <block id="6c273654a3eb5757c6a42df39c1454ff" category="paragraph">如果未保留虚拟机状态，则会使用清单重新扫描设置。例如，如果 VM 在生产环境中关闭，则不应在故障转移中打开其电源。可以将重新扫描间隔的值设置为 5 分钟到 1440 分钟；默认情况下，该值设置为 20 分钟。</block>
  <block id="2c615ba30c0376b161f80576acafa7c7" category="paragraph"><block ref="2c615ba30c0376b161f80576acafa7c7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c08ff6c46806b5850c70960d73bcd970" category="paragraph">在上一屏幕截图中，此间隔设置为 10 分钟。</block>
  <block id="6a9b61e9cc8de95a5f7950723201e867" category="paragraph">请注意，此设置会更改 vCenter 重新扫描时间以及 SolidFire 重新扫描时间。</block>
  <block id="f5b00f4d4dbccf1b55ef9c6236593af4" category="section-title">常规支持</block>
  <block id="c47beae15cfe705e015a629850878a77" category="paragraph">以下最佳实践可改善您与 Cleondris 的合作体验，并为您提供支持。</block>
  <block id="57fa8aacf014b5a46ffff8e10109226d" category="list-text">在请求支持时，请始终提供支持包。</block>
  <block id="ee9fb7ceeb8df8a5c9f08007fe54e85b" category="paragraph"><block ref="ee9fb7ceeb8df8a5c9f08007fe54e85b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="40a0560014c19904e47544398f50ae2a" category="list-text">对于某些边缘情形，额外的日志记录对于支持非常有用。启用其他日志记录，然后执行您再次遇到问题的操作。然后，您可以删除 `log.level` ，因为您不希望定期调试此级别。</block>
  <block id="fd28799c0e60466abc7ec2655bfecd5a" category="paragraph"><block ref="fd28799c0e60466abc7ec2655bfecd5a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d70d34ed0753a02749701c096e7aeadf" category="list-text">在某些情况下，繁忙的 vCenter Server 设备（ VCSA ）可能会出现发生原因问题。要最大程度地减少此问题，请向 VCSA 添加更多内存。</block>
  <block id="dc5d261097404c8973afb10ffccd77bf" category="list-text">此外，如果在测试故障转移中可能无法清理一个或两个 VM ，也可能会导致出现问题。您可以通过以下步骤清理这些 VM ：</block>
  <block id="be70c99c16f87c7ea2586e3fdf9573e9" category="list-text">关闭 VM 。这可能需要一些时间。</block>
  <block id="994f57ed2c3e8b896ddee254177c5174" category="list-text">从清单中删除 VM 。通常，这两个步骤会使数据存储库消失。然后，您可以执行重新扫描存储操作。</block>
  <block id="b471b65ef608bb9bb42c12a39c435657" category="doc">从何处查找追加信息： NetApp HCI DR 与 Cleondris</block>
  <block id="64068b9371a2eb5134bcaae6c3e0576b" category="paragraph">要了解有关本文档中所述信息的更多信息，请查看以下网站：</block>
  <block id="44147e29febbde976b050bcfc15f13c4" category="inline-link"><block ref="44147e29febbde976b050bcfc15f13c4" category="inline-link-rx"></block></block>
  <block id="d22097ef35b43f7cd653dc6fa51862b4" category="list-text">NetApp HCI 文档中心<block ref="f0f49b2c550c11ef4a6556c3d503d380" category="inline-link-rx"></block></block>
  <block id="4792875580f981fa24dcef37d5d3cb60" category="list-text">NetApp HCI 文档资源页面<block ref="063cb98ffd61fbc954759fc3ba642f2b" category="inline-link-rx"></block></block>
  <block id="c9617ae303d0bce89d13bebecca2ea1b" category="inline-link"><block ref="c9617ae303d0bce89d13bebecca2ea1b" category="inline-link-rx"></block></block>
  <block id="bf6e124a50a8035b4279bc2de06bed8e" category="list-text">NetApp 产品文档<block ref="bf78332b32395471af72955679895502" category="inline-link-rx"></block></block>
  <block id="641e269803b0b6d8d4282fd5cac485d0" category="inline-link"><block ref="641e269803b0b6d8d4282fd5cac485d0" category="inline-link-rx"></block></block>
  <block id="c06ac93152968eae8e97f4b20fb33328" category="list-text">Cleondris HCC 产品页面<block ref="50aed10674471f1d52a15bd8a03c1f54" category="inline-link-rx"></block></block>
  <block id="3f8b0f77ab6bf047a61b019bff3f9322" category="inline-link"><block ref="3f8b0f77ab6bf047a61b019bff3f9322" category="inline-link-rx"></block></block>
  <block id="1e87ad2a1984064c7e915136fb0fa0ac" category="list-text">Cleondris 支持门户<block ref="1daa4451416ba504e95820b36b41c325" category="inline-link-rx"></block></block>
  <block id="95a534bbf0de5dde8aba7a7459c15d74" category="doc">安装 Cleondris ：使用 Cleondris 的 NetApp HCI DR</block>
  <block id="a1a4db2d98059e09500596579d37eb2a" category="paragraph">本节将详细介绍安装 Cleondris 的前提条件和部署步骤。</block>
  <block id="ee68e5b99222bbc29a480fcb0d1d6ee2" category="section-title">前提条件</block>
  <block id="881e8ce13dccfa79b8f681f06194f5cd" category="paragraph">开始安装之前，需要准备好几件事。</block>
  <block id="4449b0cc59243402daef0754a83c95ae" category="paragraph">本技术报告假定您的 NetApp HCI 基础架构在生产站点和灾难恢复站点均正常运行。</block>
  <block id="a96f8f1a0cddad781497c23fd72c635a" category="list-text">* DNS 。 * 安装 HCC 灾难恢复工具时，您应准备好 DNS 。</block>
  <block id="23296f8b373785c4d06940191e94202f" category="list-text">* FQDN 。 * 安装之前，应准备灾难恢复工具的完全限定域名。</block>
  <block id="becd6bfae1a9ea2c4d702d3523585a9f" category="list-text">* IP 地址。 * 在将此 IP 放入 DNS 之前，此 IP 将成为 FQDN 的一部分。</block>
  <block id="3b21ffb27264530e2cbe3d2548af2142" category="list-text">* NTP 。 * 您需要网络时间协议（ NTP ）服务器地址。它可以是您自己的内部地址，也可以是外部地址，但需要可访问。</block>
  <block id="7a6646f75e3b5ee407033de69326718d" category="list-text">* 存储位置。 * 安装 HCC 时，您必须知道应将 HCC 安装到哪个数据存储库。</block>
  <block id="74a263494d600200cf32c2625d1d9834" category="list-text">* vCenter Server 服务帐户。 * 您需要在灾难恢复和生产端的 vCenter Server 中创建一个服务帐户，才能使用 HCC 。它不需要根级别的管理员级别权限。如果您愿意，可以在 HCC 用户指南中找到确切的要求。</block>
  <block id="6e946d031745085753fcacf5a33be6b0" category="list-text">* NetApp HCI 服务帐户。 * 您需要在 NetApp HCI 存储中设置一个服务帐户，以便在灾难恢复和生产端使用 HCC 。需要完全访问。</block>
  <block id="bedd97822aa85557d637b10cffd7bf8d" category="list-text">* 测试网络。 * 此网络应连接到灾难恢复站点中的所有主机，并且应处于隔离状态且未路由。此网络用于确保应用程序在测试故障转移期间正常运行。仅为临时的内置测试网络是一个单主机网络。因此，如果测试故障转移中的 VM 分散在多个主机上，它们将无法通信。我建议您在灾难恢复站点中创建一个分布式端口组，该端口组跨越所有主机，但它是隔离的，不是路由的。测试对于成功至关重要。</block>
  <block id="5f16e5a71a604823eccf296165cdbb92" category="list-text">* RTO 。 * 您的应用程序组应获得管理层批准的 RTO 。通常，第 1 层应用程序需要 1 或 2 小时；第 4 层应用程序需要长达 12 小时。这些决策必须获得管理层的批准，因为它们将决定关键中断后的工作速度。这些时间将决定复制计划。</block>
  <block id="5b011b782f0b55a7fd8e068185505bb2" category="list-text">* 应用程序信息。 * 您应了解首先需要保护哪个应用程序，以及需要保护哪些应用程序。例如， Microsoft Exchange 需要一个具有全局目录角色的域控制器才能启动。根据我自己的经验，一位客户表示他们需要保护一台电子邮件服务器。测试不是很好，我在调查时发现客户有 24 个 VM ，这些 VM 是电子邮件应用程序的一部分。</block>
  <block id="907f9e3722fcdfc3e68886a97b7215b9" category="section-title">下载信息</block>
  <block id="b70b5aa3ee8c39875ea420e9a808710a" category="inline-link">Cleondris 站点</block>
  <block id="d4534d5eec6193e20fcb756568c08b91" category="paragraph">您可以从下载 HCC<block ref="f69e77b5d89e7d16e7ff54237f00e6df" category="inline-link-rx"></block>。购买时，您还会收到一封包含下载链接的电子邮件。</block>
  <block id="794df3791a8c800841516007427a2aa3" category="section-title">许可证</block>
  <block id="682179274dd92a3095ed29d75bc51a92" category="inline-link">Cleondris 支持门户</block>
  <block id="2bf04945ca4185bcf183a4190ec16c23" category="paragraph">如果您购买了许可证，或者获得了非转售（ NFR ）版本，则许可证将通过电子邮件发送。您可以通过获取试用许可证<block ref="f3f71e03dde81838b15eebca26ab6aa6" category="inline-link-rx"></block>。</block>
  <block id="ea355214fd4bc7c57f471bd92918879b" category="section-title">部署</block>
  <block id="2ba703a1a4c5fc3fa48cb1b9a5e0e23a" category="paragraph">您下载了一个 OVF 文件，因此可以像其他许多内容一样进行部署。</block>
  <block id="cb9325a4836ca440357d335f76ab96e5" category="list-text">请首先使用集群级别提供的 "Actions" 菜单。</block>
  <block id="a75f39b1811dd155f460b2ef26e4dfe6" category="paragraph"><block ref="a75f39b1811dd155f460b2ef26e4dfe6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e5b4a53fc1aefc273963f9e296886d81" category="list-text">选择文件。</block>
  <block id="ac978003d76e2f0581074e3e11d13613" category="paragraph"><block ref="ac978003d76e2f0581074e3e11d13613" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ddcdb711e18fafdd95464a0c50a4a5e1" category="list-text">为设备命名并选择其在 vCenter 基础架构中的位置。</block>
  <block id="78fc27ed3d6dae9aebd1a9be42e530d4" category="paragraph"><block ref="78fc27ed3d6dae9aebd1a9be42e530d4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c0b18ba5acf093a7ad9a267d2a31bf1a" category="list-text">选择计算位置。</block>
  <block id="381baeae62ea3aaccb80d29b6f30a847" category="list-text">确认详细信息。</block>
  <block id="e898d72c55edc0b5993b04bd86cdfc69" category="list-text">接受许可证详细信息。</block>
  <block id="0fe126fda4d25b05fcb44692207689c9" category="list-text">选择适当的存储位置。</block>
  <block id="fc1734898bfd8b4cd645f5b58c7d440f" category="list-text">选择我们的设备要使用的网络。</block>
  <block id="945a872db4f5e2a711e368926ded6eb4" category="list-text">再次查看详细信息，然后单击完成。</block>
  <block id="ff0c4b3d6d55093dbc82124ddc40c156" category="list-text">现在，请等待部署该设备，然后启动它。启动时，您可能会看到一条消息，指出未安装 VMware 工具。您可以忽略此消息；它将自动消失。</block>
  <block id="9337ad7df029d6386c17ea026c7e12fe" category="section-title">初始配置</block>
  <block id="b54766d937d35e67258d3f7c7b771300" category="paragraph">要启动初始配置，请完成以下步骤：</block>
  <block id="e73d02f9d4a8c602460c05f8705cdf31" category="list-text">此阶段涉及在设备配置程序（即 VM 控制台）中进行配置。因此，设备启动后，请使用 VMware 远程控制台（ VMRC ）或 HTML5 VMRC 版本更改为在控制台中工作。查找蓝色的 Cleondris 屏幕。</block>
  <block id="9a5803b2d133c0b81d715fa27e169fde" category="paragraph"><block ref="9a5803b2d133c0b81d715fa27e169fde" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a7fe34e97aedf9e1a19a8122592e5036" category="list-text">按任意键继续，然后配置以下内容：</block>
  <block id="25dff0f748e39ec3b14cacf5ae0fccff" category="list-text">Web 管理员密码</block>
  <block id="bf11cac6a2fbb5d92d5d68bd37fa9b62" category="list-text">网络配置： IP ， DNS 等</block>
  <block id="9d11533eceeb399a21230d1c9b9c2cae" category="list-text">时区</block>
  <block id="5c54cb8f927a6c5a90622e1c7bd0bda5" category="list-text">NTP</block>
  <block id="7183da51412ab7da17e384b85363a68b" category="list-text">选择重新启动和激活网络 /NTP 设置。您将看到设备重新启动。之后，执行 ping 测试以确认 FQDN 和 IP 。</block>
  <block id="313adbaf395c6f209a31291b262dfd8c" category="section-title">正在修补 Cleondris</block>
  <block id="cdb9cb0d81e0ee09d74190d732a59980" category="paragraph">要更新 Cleondris 产品，请完成以下步骤：</block>
  <block id="c46bbc01e278a2a8c7ce2e5c8425f6b0" category="list-text">首次登录到设备时，您会看到如下所示的屏幕：</block>
  <block id="a8e85298533762065323dbcae94f1a89" category="paragraph"><block ref="a8e85298533762065323dbcae94f1a89" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e458ca0cb03fe4a162905601ad0bd683" category="list-text">单击选择文件以选择从 Cleondris 网站下载的更新。</block>
  <block id="a027e90cacc9a043d240cd85cd180423" category="paragraph"><block ref="a027e90cacc9a043d240cd85cd180423" category="inline-image-macro-rx" type="image"></block></block>
  <block id="85d259df62c7367db91c8953a4a89be6" category="list-text">上传修补程序。设备重新启动后，将显示以下登录屏幕：</block>
  <block id="7d8c5c9233e36d7518c36606dcc3e4a8" category="paragraph"><block ref="7d8c5c9233e36d7518c36606dcc3e4a8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1e717183b7eea2b8afc0e6059760b4bb" category="list-text">现在，您可以查看新版本和构建信息；确认更新成功。现在，您可以继续配置。</block>
  <block id="f50d9f1ddb4eb3c6ea7fce7e25249c28" category="section-title">使用的软件</block>
  <block id="b990a6ffb0a601eb5b783e62c02adbe2" category="paragraph">本技术报告使用以下软件版本：</block>
  <block id="11297c11e399b6b47ea91cdaf6ac43f0" category="list-text">生产环境中的 vSphere 6.5</block>
  <block id="35ffe2ac2c018286bf3b1a0ec3f7c9e6" category="list-text">基于灾难恢复的 vSphere 6.7 U3</block>
  <block id="35555385b535e69af4c0939433db8a59" category="list-text">NetApp Element 11.5 投入生产</block>
  <block id="9631fe0772ae3c726cd3f67fa87a0f0f" category="list-text">灾难恢复上的 NetApp Element 12.0</block>
  <block id="c6eedfa85b7f1bb8acd820e6fa336964" category="list-text">Cleondris HCC 8.0.2007 内部版本 20200707-1555 和 8.0.200X2 内部版本 20200709-1936.</block>
  <block id="0a08a3355b6567ccecedafb614df64bb" category="doc">摘要：使用 Cleondris 的 NetApp HCI 灾难恢复</block>
  <block id="c75c9d9a9d8c602ddad8fe2d62610a5f" category="paragraph">本技术报告可帮助您保护 IT 基础架构，以便在发生严重中断时更快地恢复应用程序服务。此外，您还可以更安全地测试第 1 层应用程序的更新和修补程序。它有助于在 NetApp HCI 基础架构上安装，配置和使用 Cleondris HCI 控制中心（ HCC ）灾难恢复工具。</block>
  <block id="65cd53ff19e601ea00bf9688be4dd86a" category="summary">借助 NetApp ONTAP 实现 Red Hat OpenShift 虚拟化</block>
  <block id="ad3a2e9007d848afd0c15ffc402781bb" category="doc">工作流：使用 NetApp ONTAP 实现 Red Hat OpenShift 虚拟化</block>
  <block id="55c7e45b50d0b012faf4bce31b6ad05d" category="section-title">从 Snapshot 创建 VM</block>
  <block id="f991e1a54e399d272c7d968dcdfdb690" category="paragraph">对于 OpenShift 中的 Snapshot 操作，必须定义资源 VolumeSnapshotClass ， VolumeSnapshot 和 VolumeSnapshotContent 。</block>
  <block id="0e2d1628ef03c4400cd293c3143cabb3" category="list-text">VolumeSnapshotContent 是从集群中的卷生成的实际快照。它是一种集群范围的资源，类似于用于存储的 PersistentVolume 。</block>
  <block id="8ca4876558d3675f7a3e2c452c62a215" category="list-text">VolumeSnapshot 是指创建卷快照的请求。它类似于 PersistentVolumeClaim 。</block>
  <block id="7f9fbed02a61699d31f7d9a0eb11bc81" category="list-text">管理员可以使用 VolumeSnapshotClass 为 VolumeSnapshot 指定不同的属性。通过此选项，您可以为从同一卷创建的不同快照设置不同的属性。</block>
  <block id="7f7858938c48bb9f08341c0e41c9162d" category="image-alt">Snapshot 架构中的 VM</block>
  <block id="99bf6e1ad41f7875d5b7ec9f857c4f0f" category="paragraph">要创建虚拟机的 Snapshot ，请完成以下步骤：</block>
  <block id="52f0977d1e65469f01e2f290e637a8f1" category="list-text">输入 Snapshot 类的名称，输入驱动程序的 csi.trident.netapp.io ，然后单击创建。</block>
  <block id="508073b07367d898823f1841627451d4" category="image-alt">创建 Snapshot 类</block>
  <block id="2bde7e02152796551174ea391bda0b60" category="list-text">确定连接到源 VM 的 PVC ，然后创建该 PVC 的 Snapshot 。导航到 `Storage &gt; VolumeSnapshots` ，然后单击 Create VolumeSnapshots 。</block>
  <block id="b9513caba1fba7b4291a9e22bc512de5" category="list-text">选择要为其创建 Snapshot 的 PVC ，输入 Snapshot 的名称或接受默认值，然后选择相应的 VolumeSnapshotClass 。然后单击创建。</block>
  <block id="a7a384e6f13cae2ef877b4dd78fd48ad" category="image-alt">创建快照</block>
  <block id="d8ae3e40f0f0dba0b7c7ba5b8eea845a" category="list-text">此时将创建 PVC 的快照。</block>
  <block id="e9b3b34ca8f917d1968a106e682f1a97" category="section-title">从快照创建新虚拟机</block>
  <block id="5160cd070df38f982551c5fea6f1c844" category="list-text">输入新 PVC 的详细信息，然后单击还原。这样就会创建一个新的 PVC 。</block>
  <block id="0d695454ca10516a832452b6123c5bb5" category="image-alt">将 Snapshot 还原到新的 PVC</block>
  <block id="75b0d3500d81c7799a5b84eca57d6d04" category="list-text">单击创建以创建新虚拟机。</block>
  <block id="57dc3c96f32e4895e89eab4a248088f5" category="list-text">成功创建虚拟机后，访问并验证新虚拟机的状态是否与创建快照时使用 PVC 创建快照的虚拟机的状态相同。</block>
  <block id="e43e01b103914a770b6c77bb390f02a7" category="paragraph">本《基于 Red Hat 虚拟化的 NetApp HCI for Red Hat OpenShift （ RHV ）部署指南》适用于通过安装程序配置基础架构（ IPI ）方法将 Red Hat OpenShift 完全自动安装到 NVA-1148 中所述的经验证的 NetApp HCI for Red Hat Virtualization 企业架构上： 采用 Red Hat 虚拟化的 NetApp HCI 。本参考文档提供了 Red Hat OpenShift 解决方案的部署验证， NetApp Trident 存储编排程序的集成以及由示例应用程序部署组成的解决方案验证。</block>
  <block id="a4957cf974ce20219897bbbf5b131cb8" category="paragraph">管理员可以根据项目需求和存储系统型号配置多个存储后端，以实现高级存储功能，包括数据压缩，特定磁盘类型或 QoS 级别，以保证一定水平的性能。定义后，开发人员可以在其项目中使用这些后端创建永久性卷声明（ PVC ），并按需将永久性存储附加到容器。</block>
  <block id="ecfb2402c181e98da49a5d763378b116" category="paragraph"><block ref="ecfb2402c181e98da49a5d763378b116" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b62bb4786ef52ad76706950add6991dd" category="paragraph">从 20.04 版开始， Trident 设置由 Trident 操作员执行。操作员可以简化大规模部署，并为在 Trident 安装过程中部署的 Pod 提供额外的支持，包括自我修复。</block>
  <block id="4a85fdd5a26454abc330a5ec2a46a326" category="paragraph">在 21.01 版中，我们提供了一个 Helm 图表，用于简化 Trident 操作员的安装。</block>
  <block id="f95d0437e813349fa018b7f0e68e9a7d" category="paragraph">要在已部署的用户集群上安装 Trident 并配置永久性卷，请完成以下步骤：</block>
  <block id="422269f9bb560b76869cbd586b8370d5" category="list-text">从下载的软件包中提取 Trident 安装。</block>
  <block id="52d012c119e8e080d08f6a1592f8f9ec" category="section-title">使用 Helm 安装 Trident 操作员</block>
  <block id="68602d0447fae81afa9d0528ef0c6420" category="list-text">首先将用户集群的 `kubeconfig` 文件的位置设置为环境变量，以便您不必引用该文件，因为 Trident 没有传递此文件的选项。</block>
  <block id="449774824d889f1d6ebc0bbcc4920493" category="list-text">在用户集群中创建 Trident 命名空间时，运行 Helm 命令从 Helm 目录中的 tarball 安装 Trident 操作员。</block>
  <block id="64e437a845e5de3c8e50925ebdfce295" category="list-text">您可以通过检查命名空间中运行的 Pod 或使用 tridentctl 二进制文件检查已安装的版本来验证 Trident 是否已成功安装。</block>
  <block id="3ce67d5de6974f67e0048e6fdbf89498" category="admonition">在某些情况下，客户环境可能需要自定义 Trident 部署。在这种情况下，还可以手动安装 Trident 操作员并更新所包含的清单以自定义部署。</block>
  <block id="8bd534d3b6bc8d2541df052e053ed65d" category="section-title">手动安装 Trident 操作员</block>
  <block id="1315b42a551dafb715ab654d8eb5af40" category="list-text">首先，将用户集群的 `kubeconfig` 文件的位置设置为环境变量，以便您不必引用该文件，因为 Trident 没有传递此文件的选项。</block>
  <block id="5d710ec7d521df428edd75c1885ee89b" category="list-text">`trident 安装程序` 目录包含用于定义所有所需资源的清单。使用适当的清单创建 `TridentOrchestrator` 自定义资源定义。</block>
  <block id="0ac11186fb38b2e9d4acd38d03f61b5c" category="list-text">如果不存在 Trident 命名空间，请使用提供的清单在集群中创建一个 Trident 命名空间。</block>
  <block id="004c51fe71b5c654f88a31270ec6c8e9" category="list-text">为 Trident 操作员部署创建所需的资源，例如为操作员创建 `ServiceAccount` ，为 `SClusterRole` 和 `ClusterRoleBinding` ，为` erviceAccount `，专用` PodSecurityPolicy `或操作员本身创建。</block>
  <block id="f7b9c678b684e969a3ee5ac971514f48" category="list-text">您可以使用以下命令在操作员部署后检查其状态：</block>
  <block id="b34dd67c198ad4cf0088bd29c7ef4658" category="list-text">部署操作员后，我们现在可以使用它来安装 Trident 。这需要创建 `TridentOrchestrator` 。</block>
  <block id="e32d70a13ba1767d9a373fe9a0535531" category="section-title">准备工作节点以进行存储</block>
  <block id="4b4d60be85b0c53c72ae4b8a05deacef" category="paragraph">大多数 Kubernetes 分发软件包和实用程序都会随附用于挂载默认安装的 NFS 后端的软件包和实用程序，包括 Red Hat OpenShift 。</block>
  <block id="693642fbb464db49c22715a536e99c3f" category="paragraph">要使工作节点做好准备，以便能够通过 iSCSI 协议映射块存储卷，您必须安装支持此功能所需的软件包。</block>
  <block id="cccb85b5e6a9a19187087f71254d1fb2" category="paragraph">在 Red Hat OpenShift 中，可通过在部署集群后将 MCO （计算机配置操作员）应用于集群来实现此目的。</block>
  <block id="0b23a2a9d2c7b936148c2852bb596b4d" category="paragraph">要配置工作节点以运行存储服务，请完成以下步骤：</block>
  <block id="7b8e6ef8272a81ebcc108ee3fcf4eac8" category="list-text">登录到 OCP Web 控制台并导航到 Compute &gt; Machine Configs 。单击 Create Machine Config 。复制并粘贴 YAML 文件，然后单击创建。</block>
  <block id="c25282bfd8c140d1f79c25362637f744" category="paragraph">不使用多路径时：</block>
  <block id="541c76e8762c84e3e0488f91c8062e08" category="paragraph">使用多路径时：</block>
  <block id="d9f036d3b9f84b626f8a777480066cab" category="list-text">创建配置后，将此配置应用于工作节点并重新加载它们大约需要 20 到 30 分钟。使用 `oc get MCP` 验证是否应用了计算机配置，并确保已更新员工的计算机配置池。您还可以登录到工作节点，以确认 iscsid 服务正在运行（如果使用多路径，则 multipathd 服务正在运行）。</block>
  <block id="6e16409ed6038c106c7fa1dfbfb9da0f" category="admonition">此外，还可以通过使用适当的标志运行 `oc debug` 命令来确认 MachineConfig 已成功应用且服务已按预期启动。</block>
  <block id="b09d268106fd9cbfffd1dc848382a150" category="section-title">创建存储系统后端</block>
  <block id="615767b52353571ac174e22f1a984aa3" category="inline-link-macro">NetApp ONTAP NFS</block>
  <block id="fa0fe4c03e1ba99a2cac1c4c208b7fbd" category="list-text"><block ref="fa0fe4c03e1ba99a2cac1c4c208b7fbd" category="inline-link-macro-rx"></block></block>
  <block id="c93e7ef2934826b1393251e9f7d9e331" category="inline-link-macro">NetApp ONTAP iSCSI</block>
  <block id="d7b539d4bc16fbdf1477adddfda6c802" category="list-text"><block ref="d7b539d4bc16fbdf1477adddfda6c802" category="inline-link-macro-rx"></block></block>
  <block id="d0e0904111acb167badbf5f196ad1205" category="inline-link-macro">NetApp Element iSCSI</block>
  <block id="2e5d36490241211379006b7f6934bf06" category="list-text"><block ref="2e5d36490241211379006b7f6934bf06" category="inline-link-macro-rx"></block></block>
  <block id="7f3417590f5bba5cf5eb34fb288135f1" category="inline-link-macro">接下来：解决方案验证 / 使用情形：采用 NetApp 的 Red Hat OpenShift 。</block>
  <block id="7a38916784a7216f98837f315958c175" category="paragraph"><block ref="7a38916784a7216f98837f315958c175" category="inline-link-macro-rx"></block></block>
  <block id="93e14ba37d069eff22130cf694c451c1" category="summary">NetApp AFF 是一款功能强大的全闪存存储平台，可提供低延迟性能，集成数据保护，多协议支持和无中断运行。NetApp AFF 由 NetApp ONTAP 数据管理软件提供支持，可确保从维护到升级再到存储系统的完全更换，无中断运行。</block>
  <block id="c0c4b60d27032c028c91440e9d3be949" category="doc">解决方案概述</block>
  <block id="9ecccbf5710194af15cca545b567957a" category="section-title">基于 NetApp AFF/FAS 的 NetApp ONTAP</block>
  <block id="13a74472f5a5018f40319d30a728d03e" category="paragraph">NetApp ONTAP 是一款功能强大的存储软件工具，具有直观的图形用户界面，具有自动化集成功能的 REST API ，基于 AI 的预测性分析和更正操作，无中断硬件升级和跨存储导入等功能。</block>
  <block id="3716516b242be48f15f8cbce6557a296" category="paragraph">ONTAP 提供以下功能：</block>
  <block id="3e23168685787e9deffccb3bdb29d98a" category="list-text">一个统一存储系统，可同时访问和管理 NFS ， CIFS ， iSCSI ， FC ， FCoE ， 和 FC-NVMe 协议。</block>
  <block id="11927aa24f71bc959d85115c8dd8c3a9" category="list-text">不同的部署模式包括内部全闪存，混合和全 HDD 硬件配置；基于 VM 的存储平台位于受支持的虚拟机管理程序（如 ONTAP Select ）上；云端为 Cloud Volumes ONTAP 。</block>
  <block id="65c42edcb28a34e276f92dd9b2172613" category="list-text">通过支持自动数据分层，实时数据压缩，重复数据删除和数据缩减，提高 ONTAP 系统的数据存储效率。</block>
  <block id="f0a8a62c8d7ea4d12a7f1c95b40d3cb3" category="list-text">基于工作负载，由 QoS 控制的存储。</block>
  <block id="1e16ebc829d46d68a51d55ac22293b1e" category="list-text">与公有云无缝集成，实现数据分层和保护。ONTAP 还提供强大的数据保护功能，使其在任何环境中脱颖而出：</block>
  <block id="613db5a747bd15eeccbcbedce5bd8888" category="list-text">* NetApp Snapshot 副本。 * 使用最少的磁盘空间对数据进行快速时间点备份，而不会产生额外的性能开销。</block>
  <block id="8f666d296151faf9c472110831227243" category="list-text">* NetApp SnapMirror 。 * 将数据的 Snapshot 副本从一个存储系统镜像到另一个存储系统。ONTAP 还支持将数据镜像到其他物理平台和云原生服务。</block>
  <block id="5685b3f13393b751231ff096f77e6747" category="list-text">* NetApp SnapLock 。 * 将不可重写数据写入指定时间段内无法覆盖或擦除的特殊卷，从而高效管理这些数据。</block>
  <block id="dff1063d1e007396b7fb75f266dd48b7" category="list-text">* NetApp Snapshot.* 可将多个存储系统中的数据备份到一个中央 SnapVault 副本中，该副本可用作所有指定系统的备份。</block>
  <block id="779cb4084f09228e9562ca3bedc5555c" category="list-text">* NetApp SyncMirror 。 * 可将数据实时镜像到物理连接到同一控制器的两个不同磁盘丛中。</block>
  <block id="929a0581ca4b2982313e21e51effbc10" category="list-text">* NetApp SnapRestore 。 * 可根据需要从 Snapshot 副本快速还原备份的数据。</block>
  <block id="774a065cb3548cc61fb0ec3bc1494fbe" category="inline-link">ONTAP 9 文档中心</block>
  <block id="fce4095b40c80c8632028b9837563736" category="list-text">* NetApp FlexClone 。 * 可根据 Snapshot 副本即时配置 NetApp 卷的完全可读写副本。有关 ONTAP 的详细信息，请参见<block ref="eb1214e3900207403ada8715d3d4c764" category="inline-link-rx"></block>。</block>
  <block id="c389369b80a8ce8ead607b4c7088682e" category="paragraph">NetApp ONTAP 可在内部部署，虚拟化或云中使用。</block>
  <block id="75714c8168a0c2a2594249ece5acf44c" category="paragraph"><block ref="75714c8168a0c2a2594249ece5acf44c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e71e852dc96d4d0e2da95de923a6f8ff" category="section-title">NetApp Trident</block>
  <block id="a0694d53b19f7a5e452e776ee3d2e9a4" category="paragraph">NetApp Trident 是一款开源且完全受支持的存储编排程序，适用于容器和 Kubernetes 分发版，包括 Google Cloud Anthos 。它可以与整个 NetApp 存储产品组合配合使用，包括 NetApp ONTAP 软件。Trident 完全符合 CSI ，它允许您从 NetApp 存储系统配置和管理存储，而无需存储管理员干预，从而加快了 DevOps 工作流的速度。Trident 部署为一个操作员，负责直接与 Kubernetes API 端点进行通信，以便通过在 NetApp 存储系统上创建和管理卷，以永久性卷声明（ Persistent Volume Claim ， PVC ）的形式处理容器的存储请求。</block>
  <block id="dad787ba7494eee7d6dbd3cef7e5900e" category="paragraph">永久性卷（ PV ）是根据 Kubernetes 环境中定义的存储类进行配置的。它们使用存储管理员创建的存储后端（可根据项目需求进行自定义）和存储系统型号，以支持任意数量的高级存储功能，例如压缩，特定磁盘类型或 QoS 级别，以保证性能。</block>
  <block id="10f0fa4079121b371145e16713fdbb44" category="inline-link">Trident</block>
  <block id="73cdbc9c6537713844b52fa7c0f1e655" category="paragraph">有关 NetApp Trident 的详细信息，请参见<block ref="9f564c4a71f7ad715885fb9db4485dda" category="inline-link-rx"></block> 页面。</block>
  <block id="3068002de1b5d66a6a163ddc9883ad94" category="paragraph">Trident 会从 NetApp 产品组合中的每个系统和服务编排存储。</block>
  <block id="6d906f4c160e6416d4f0c02a0fb9696c" category="paragraph"><block ref="6d906f4c160e6416d4f0c02a0fb9696c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3c572f7c92d4b91543f94621d03cf993" category="section-title">Google Cloud 的 Anthos</block>
  <block id="885a32398324f13cbf847894ab05bb41" category="paragraph">Google Cloud 的 Anthos 是一款基于云的 Kubernetes 数据中心解决方案，支持企业构建和管理现代混合云基础架构，同时采用专注于应用程序开发的灵活工作流。裸机中的 Anthos 扩展了 Anthos 的功能，可以在没有虚拟机管理程序层的情况下直接在内部物理服务器上运行，并可与 Google Cloud 中的 Anthos GKEE 集群进行互操作。</block>
  <block id="581adec598400d9d02114736724b28d3" category="paragraph">通过采用容器，服务网状和其他转型技术，企业可以在本地和基于云的环境中体验一致的应用程序开发周期和可随时投入生产的工作负载。</block>
  <block id="ea2625d89edeb5ba9cb41ca58df54e93" category="paragraph">Anthos 提供以下功能：</block>
  <block id="c10e0a21a04a29dfca9609b3ec4bab76" category="list-text">* Anthos 配置管理。 * 自动执行混合 Kubernetes 部署的策略和安全性。</block>
  <block id="e8c4d5cbaf3932ffa3fa7a097bff923e" category="list-text">* Anthos Service mesh 。 * 利用 Istio 支持的服务网格增强应用程序的可观察性，安全性和控制力。</block>
  <block id="b7fd1509ff5472f08e8216f563c9c8af" category="list-text">* 适用于 Kubernetes 应用程序的 Google Cloud Marketplace 。 * 一个精心设计的容器应用程序目录，可用于轻松部署。</block>
  <block id="5204c290ae3b1ebca311a7ca7d447791" category="list-text">* 迁移 for Anthos.* 将物理服务和 VM 从内部环境自动迁移到云。图 3 展示了 Anthos 解决方案以及内部数据中心部署如何与云中的基础架构互连。</block>
  <block id="608fd0ec5cdb56ad3d3e6d9595ec6f19" category="inline-link">Anthos 网站</block>
  <block id="1192e096cd21e1aa81d806fe9e5d2213" category="paragraph">有关 Anthos 的详细信息，请参见<block ref="717e02fd176ae4981315950f42bdf0a6" category="inline-link-rx"></block>。</block>
  <block id="70f64e61deea67473fb9951b8f5888b3" category="paragraph">下图显示了 Google Cloud 的 Anthos 架构。</block>
  <block id="99d1b69697dd97e963c0a8145277719d" category="paragraph"><block ref="99d1b69697dd97e963c0a8145277719d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="aa69ca65720dd2e4eef99ebfb7816268" category="section-title">裸机上的 Anthos</block>
  <block id="761fffea4910d62111da90337e75abb5" category="paragraph">裸机上的 Anthos 是 GKEE 的扩展，部署在客户的私有数据中心中。企业可以在内部的 Anthos 集群中部署设计为在 Google Cloud 容器中运行的相同应用程序。在裸机上运行的 Anthos 直接运行在物理服务器上，用户可以选择底层 Linux 操作系统，并为客户提供一个成熟的混合云环境，使其能够在数据中心的核心或边缘运行。</block>
  <block id="9eb2eb227133ada575ae959b570e545c" category="paragraph">裸机上的 Anthos 具有以下优势：</block>
  <block id="d966dba0352f5bc4bd7cec115bb0f6f4" category="list-text">* 不受硬件限制。 * 客户可以在现有数据中心选择的优化硬件平台上运行 Anthos 。</block>
  <block id="69dd75c781331ee9a4c6b2b30d065262" category="list-text">* 节省成本。 * 您可以通过使用自己的物理资源来部署应用程序，而不是在 Google Cloud 环境中配置资源来显著节省成本。</block>
  <block id="22c97b10f741190427f7bf14aaa217c3" category="list-text">* 先开发再发布。 * 您可以在开发应用程序时使用内部部署，这样可以在本地数据中心的隐私环境下测试应用程序，然后再将其公开发布到云中。</block>
  <block id="0f9f68e8f2e2599804f40d8fc0861b6d" category="list-text">* 性能更高。 * 需要低延迟和最高性能的密集型应用程序可以在更靠近硬件的位置运行。</block>
  <block id="844236b21d302f8c93eda00636abfff8" category="list-text">* 安全要求。 * 安全问题日益增加或无法存储在公有云中的敏感数据集的客户可以从自己的数据中心的安全环境中运行其应用程序，从而满足组织的要求。</block>
  <block id="895cc29ffb809aaf615d5db487a23c7c" category="list-text">* 管理和运营。 * 裸机上的 Anthos 配备了一系列可提高运营效率的设施，例如内置网络，生命周期管理，诊断，运行状况检查，日志记录， 和监控。</block>
  <block id="04b942b754be5e16fc9d5b114dd70bb7" category="inline-link-macro">接下来：解决方案要求。</block>
  <block id="dea54f5c884510a9da9977e2655c0a5a" category="paragraph"><block ref="dea54f5c884510a9da9977e2655c0a5a" category="inline-link-macro-rx"></block></block>
  <block id="b6bd3694e26914bcad3a91cd2d709e12" category="summary">NetApp 和 Google Cloud 之间的关系已有多年， NetApp 率先通过 Cloud Volumes ONTAP 和 Cloud Volumes Service 向 Google Cloud 推出云数据服务。然后，我们对 NetApp HCI 平台进行了验证，使其能够与内部环境中部署的 Google Cloud Anthos 结合使用，这是一种基于虚拟机管理程序的混合多云 Kubernetes 解决方案，部署在 VMware vSphere 上。然后， NetApp 通过了 NetApp Trident ， ONTAP 和 NFS 协议的 Anthos Ready 认证，为容器提供动态持久存储。</block>
  <block id="6de80120fa9469d052fc37775d89d5ca" category="doc">WP-7337 ：《裸机上的 Anthos 》</block>
  <block id="3f4b17e041e63192875c654812122484" category="paragraph">NetApp 公司 Alan Cowles 和 Nikhil M Kulkarni</block>
  <block id="3e2875179d9d16600aa48cbb428cefbb" category="paragraph">NetApp 和 Google Cloud 之间的关系已有多年， NetApp 首次通过 Cloud Volumes ONTAP 和 Cloud Volumes Service 为 Google Cloud 推出云数据服务。然后，我们对 NetApp HCI 平台进行了验证，使其能够与内部环境中部署的 Google Cloud Anthos 结合使用，这是一种基于虚拟机管理程序的混合多云 Kubernetes 解决方案，部署在 VMware vSphere 上。然后， NetApp 通过了 NetApp Trident ， ONTAP 和 NFS 协议的 Anthos Ready 认证，为容器提供动态持久存储。</block>
  <block id="edb5855aa73d26775d73760286fad940" category="paragraph">现在， Anthos 可以直接安装在客户环境中的裸机服务器上，这为客户提供了一个额外的选项，可以在不使用虚拟机管理程序的情况下将 Google Cloud 扩展到其本地数据中心。此外，通过利用 NetApp ONTAP 存储操作系统和 NetApp Trident 的功能，您可以通过为容器集成永久性存储来扩展平台的功能。</block>
  <block id="8310f10ba877c17b561c1119aa03a750" category="paragraph">通过这种组合，您可以充分发挥服务器，存储和网络的全部潜能，并获得 Google Cloud 提供的支持，服务级别，每月计费和按需灵活性。由于您使用的是自己的硬件，网络和存储，因此您可以直接控制应用程序的规模，安全性和网络延迟，还可以利用裸机上的 Anthos 实现托管和容器化应用程序的优势。</block>
  <block id="5cb451e1c66a533348d9c913d8c630e3" category="inline-link-macro">接下来：解决方案概述。</block>
  <block id="7133ec6c94c3cb3dd5d77dce10f8fd70" category="paragraph"><block ref="7133ec6c94c3cb3dd5d77dce10f8fd70" category="inline-link-macro-rx"></block></block>
  <block id="de10d3ea3df1450b5d8c10c3f5c48250" category="summary">此部署操作步骤中使用了 Cisco Nexus 3048 交换机，以便为计算和存储节点的带内和带外管理提供 1 Gbps 连接。这些步骤将在交换机机架安装，通电并完成初始设置过程后开始。要配置交换机以提供与基础架构的管理连接，请完成此页面上列出的步骤。</block>
  <block id="af8c508c6321cb19e118c61baba97822" category="doc">1. 配置管理交换机</block>
  <block id="f4cdb5d640e15bf37b1136914cf368cc" category="paragraph">此部署操作步骤中使用了 Cisco Nexus 3048 交换机，以便为计算和存储节点的带内和带外管理提供 1 Gbps 连接。这些步骤将在交换机机架安装，通电并完成初始设置过程后开始。要配置交换机以提供与基础架构的管理连接，请完成以下步骤：</block>
  <block id="66fb02f6da4378e6df9524e87292aace" category="section-title">为 Cisco Nexus 启用高级功能</block>
  <block id="c5d9b8c7a878911b233d8c207d7bb913" category="list-text">执行全局生成树配置。</block>
  <block id="d4a143d2f506a98d73c4c8f6fa602784" category="section-title">配置交换机上的端口以进行带内管理</block>
  <block id="2920dd47699df3464bc6e7bebcf435c9" category="list-text">运行以下命令创建 VLAN 以进行管理。</block>
  <block id="48fbc4bdaeae90b8471b31896f06f2bf" category="section-title">配置交换机上的端口以进行带外管理</block>
  <block id="3389ac926c5240b8154f699d1b3510c3" category="admonition">在经验证的配置中，我们使用缆线将奇节点 IPMI 接口连接到 Switch-01 ，并将偶节点 IPMI 接口连接到 Switch-02 。</block>
  <block id="d5080a83a42a523563cd6572bbd1e0c4" category="section-title">创建 vPC 域以确保容错</block>
  <block id="af1d06f35ac94f493830e83dcc3d10af" category="inline-link-macro">下一步：配置数据交换机</block>
  <block id="d1ed1b7ec7797a36b06c343ec2c26007" category="paragraph"><block ref="d1ed1b7ec7797a36b06c343ec2c26007" category="inline-link-macro-rx"></block></block>
  <block id="eed1ab12478f3384bfca66e2b382aefc" category="doc">使用 NetApp ONTAP 部署 Red Hat OpenShift 虚拟化</block>
  <block id="7dc3a10e876dbab2b177f35c0b436f3a" category="list-text">Red Hat OpenShift 集群（ 4.6 版之后的版本），安装在具有 RHCOS 工作节点的裸机基础架构上</block>
  <block id="b5762731ee8c7a3d9a7ce9abe3804cf0" category="list-text">OpenShift 集群必须通过安装程序配置的基础架构（ IPI ）进行安装</block>
  <block id="7ed0bc09bfa62b64806b6b5c2f4378c7" category="list-text">部署计算机运行状况检查以保持虚拟机的 HA</block>
  <block id="43b1ab0e04b8f87e603cc790967d2886" category="list-text">NetApp ONTAP 集群</block>
  <block id="d4c321b9edd8d817bdc7ca442e71e3af" category="list-text">在 ONTAP 集群上配置了 SVM 的 Trident 后端</block>
  <block id="cfcf3a62902e36f3d966271cc090b65c" category="list-text">对 Red Hat OpenShift 集群的集群管理员访问</block>
  <block id="af91af16b4791d61bb2e9206807a658d" category="list-text">对 NetApp ONTAP 集群的管理员访问权限</block>
  <block id="e281839ef9ef6cb1eadcc2aa7d6d63be" category="list-text">安装了 tridentctl 和 oc 工具并将其添加到 $path 中的管理工作站</block>
  <block id="314f04ff1024e623d43e0cda9a9df410" category="paragraph">由于 OpenShift 虚拟化由 OpenShift 集群上安装的操作员管理，因此会增加内存， CPU 和存储的开销，在规划集群的硬件要求时必须考虑这些开销。请参见文档<block ref="f9421eaa4175c3e9f421a9acaf6f00d6" category="inline-link-rx"></block> 有关详细信息：</block>
  <block id="be51a7d8687b0a6254a274c1e0100052" category="paragraph">或者，您也可以通过配置节点放置规则来指定一组 OpenShift 集群节点，以托管 OpenShift 虚拟化操作员，控制器和 VM 。要为 OpenShift 虚拟化配置节点放置规则，请按照文档进行操作<block ref="325820076f9012df5bb7261c397a527f" category="inline-link-rx"></block>。</block>
  <block id="a805b74dbb589c916a1ebf0e08601665" category="paragraph">对于支持 OpenShift 虚拟化的存储， NetApp 建议使用一个专用 StorageClass ，以便从特定 Trident 后端请求存储，而该后端又由专用 SVM 提供支持。这样就可以在 OpenShift 集群上为基于 VM 的工作负载提供的数据方面保持多租户级别。</block>
  <block id="adb787dc1bae0d1c8dee5bd61d49c235" category="inline-link-macro">下一步：通过操作员部署。</block>
  <block id="6166597c75dc82b2cc8c50a0d5d74400" category="paragraph"><block ref="6166597c75dc82b2cc8c50a0d5d74400" category="inline-link-macro-rx"></block></block>
  <block id="4c37a5afd480a0042f69d7628cadd57d" category="summary">借助 NetApp 在 Red Hat OpenShift 上为 Kubernetes 提供高级集群管理</block>
  <block id="43288d8129021b1fe8b4bc6784e65b32" category="doc">功能：借助 NetApp 在 Red Hat OpenShift 上为 Kubernetes 提供高级集群管理</block>
  <block id="d10b633b8bd8d022c66a52d93e0ed6ce" category="section-title">集群生命周期管理</block>
  <block id="8b9449bdfc859a900fc4da7c79420145" category="paragraph">要管理不同的 OpenShift 集群，您可以创建这些集群或将其导入到高级集群管理中。</block>
  <block id="0becde0fcfda03aec9c722d042326324" category="list-text">要创建新的 OpenShift 集群，请完成以下步骤：</block>
  <block id="50dfc508091b37338da8357e63e6a405" category="image-alt">添加提供程序连接</block>
  <block id="2984cab36bd51d5446963e671e808f5d" category="image-alt">添加集群</block>
  <block id="e6d9a6b38dd36fd9870260249ba5fc1f" category="list-text">要导入现有集群，请完成以下步骤：</block>
  <block id="9a618414b83afe67c19abcf935be6dbd" category="image-alt">导入现有集群</block>
  <block id="c812d1382d834648706b3bf1e6848135" category="list-text">创建并导入多个集群后，您可以从一个控制台监控和管理这些集群。</block>
  <block id="068e5ec1cc0eaa7c2596be7eb1b40194" category="inline-link-macro">接下来：功能—应用程序生命周期管理。</block>
  <block id="0405bd6ea905b8d563fd501d933a3e51" category="paragraph"><block ref="0405bd6ea905b8d563fd501d933a3e51" category="inline-link-macro-rx"></block></block>
  <block id="3605e05aa598ff405b5edffc1bf474f1" category="summary">在使用 NetApp 的 Red Hat OpenShift 上配置多租户</block>
  <block id="13148717f8faa9037f37d28971dfc219" category="doc">验证</block>
  <block id="286c0d2f200233e63709210881b700c4" category="paragraph">要验证在上述步骤中配置的多租户架构，请完成以下步骤：</block>
  <block id="f4da6475fc7e97756adf2751840e077d" category="list-text">以项目 1 中的 OCP-project-1-user 和开发人员身份登录。</block>
  <block id="2d7fbbcee3114769610fea6ef6f4cdf0" category="list-text">检查访问权限以创建新项目。</block>
  <block id="12cdc5f68c3a0ca10544c0a57e866249" category="list-text">使用分配给 project-1 的 storageclass 在 project-1 中创建 PVC 。</block>
  <block id="145d2249af633a497182f76e714d1f2e" category="list-text">检查与 PVC 关联的 PV 。</block>
  <block id="d424ec829e7a6f56de4d74835b97103a" category="list-text">验证 PV 及其卷是否已在 NetApp ONTAP 上专用于 project-1 的 SVM 中创建。</block>
  <block id="a345b6be662b316a3b3e3cfbc7566b31" category="list-text">在 project-1 中创建 POD ，然后挂载上一步创建的 PVC 。</block>
  <block id="7b929f9e235c85c6b73ed2ee867c5514" category="list-text">检查 POD 是否正在运行以及是否已挂载卷。</block>
  <block id="8e27501b578972bd7b65468deaa482ca" category="list-text">使用分配给 project-2 的 storageclass 在 project-1 中创建 PVC 。</block>
  <block id="71bc5a6f1f0141981e0034b388233917" category="list-text">在 project-2 中创建 PVC 。</block>
  <block id="1149bf04288dfa82d0e3b713a6e66aa1" category="list-text">请确保未创建 PVC `test-vpa-project-1-sc-2` 和 `test-vpa-project-2-sc-1` 。</block>
  <block id="0d843e91c3b8f62457e19b2d32ecace3" category="list-text">在 project-2 中创建 POD 。</block>
  <block id="43700888cdcd166f379f95bd1751ae63" category="list-text">检查访问权限以创建新项目。</block>
  <block id="32579947c29f341292c3ce775140178b" category="list-text">验证对查看项目的访问权限。</block>
  <block id="9e97a1398bb4a0499bb69bf1c9e67d6a" category="list-text">检查用户是否可以在 project-1 中查看或编辑 ResourceQuotas 。</block>
  <block id="17a658c4329ed475a82d2e02c0406118" category="list-text">验证用户是否有权查看存储器。</block>
  <block id="aa177e49bfc4cc0182f57218ce6bdd4d" category="list-text">检查访问权限以描述存储器。</block>
  <block id="997cef2cfb8ccc12d8739c63e69794f3" category="list-text">验证用户的访问权限以编辑存储器库。</block>
  <block id="9eb6f7c0e27dd8274a30b43a4aee8d53" category="inline-link-macro">下一步：扩展。</block>
  <block id="acd8a990c476bd6cb45a9044361ba723" category="paragraph"><block ref="acd8a990c476bd6cb45a9044361ba723" category="inline-link-macro-rx"></block></block>
  <block id="8921c6e9843ba7487c77f4dce1467111" category="summary">NetApp Element 软件可提供模块化的可扩展性能，每个存储节点均可为环境提供有保障的容量和吞吐量。NetApp Element 系统可以在一个集群中从 4 个节点扩展到 100 个节点，并提供多种高级存储管理功能。</block>
  <block id="5d77fe4a6bb4c5e88c5c18510b3c4749" category="doc">NetApp Element ：采用 NetApp 技术的 Red Hat OpenShift</block>
  <block id="22f48c519a73ce4759edffb196331422" category="paragraph"><block ref="22f48c519a73ce4759edffb196331422" category="inline-image-macro-rx" type="image"></block></block>
  <block id="27765508a97a89684590658c3465fb70" category="inline-link">NetApp SolidFire 网站</block>
  <block id="d37eaafbb6dfb29673d63ff988ff4f41" category="paragraph">有关 NetApp Element 存储系统的详细信息，请访问<block ref="0d1d77e6774527457304fa15f73899a1" category="inline-link-rx"></block>。</block>
  <block id="bd4ffcaabbe4a4f83fbfaaa2e34dc8a3" category="section-title">iSCSI 登录重定向和自我修复功能</block>
  <block id="dbafa7c074ef7efc3c778b69c0ad31b5" category="paragraph">NetApp Element 软件利用 iSCSI 存储协议，这是在传统 TCP/IP 网络上封装 SCSI 命令的标准方式。当 SCSI 标准发生变化或以太网网络的性能提高时， iSCSI 存储协议就会受益，而无需进行任何更改。</block>
  <block id="23e6b910b28346537f5696478fffe779" category="paragraph">尽管所有存储节点都有一个管理 IP 和一个存储 IP ，但 NetApp Element 软件会为集群中的所有存储流量公布一个存储虚拟 IP 地址（ SVIP 地址）。在 iSCSI 登录过程中，存储可以响应目标卷已移至其他地址，因此无法继续协商过程。然后，主机将在不需要主机端重新配置的过程中向新地址重新发出登录请求。此过程称为 iSCSI 登录重定向。</block>
  <block id="b8603f3d585261d0005c7c5e51108d19" category="paragraph">iSCSI 登录重定向是 NetApp Element 软件集群的一个关键部分。收到主机登录请求后，节点将根据 IOPS 和卷的容量要求确定集群中应由哪个成员处理流量。卷分布在 NetApp Element 软件集群中，如果单个节点处理的卷流量过多或添加了新节点，则会重新分配这些卷。给定卷的多个副本会在阵列中分配。</block>
  <block id="772db62cf9ecb837ed4f0a91a5963492" category="paragraph">这样，如果节点发生故障后又发生卷重新分布，则除了注销和登录并重定向到新位置之外，对主机连接不会产生任何影响。通过 iSCSI 登录重定向， NetApp Element 软件集群是一种自我修复型横向扩展架构，能够无中断升级和操作。</block>
  <block id="5c8e89de2b8e6e2f103d858b59e5aca0" category="section-title">NetApp Element 软件集群 QoS</block>
  <block id="f8cd3dfe225577e230dc2699ebbbfe34" category="list-text">* 最大 IOPS* 。 NetApp Element 软件集群为特定卷提供的最大可持续 IOPS 数。</block>
  <block id="97bee3e8d0db89b2cd19eba861763e7a" category="list-text">* 安全身份验证。 * 质询握手身份验证协议（ Challenge-Handshake Authentication Protocol ， CHAP ）用于安全卷访问。轻量级目录访问协议（ Lightweight Directory Access Protocol ， LDAP ）用于安全访问集群以进行管理和报告。</block>
  <block id="3918507b16aa3cc38274c29da446d90f" category="list-text">* 卷访问组（ VAG ）。 * 也可以使用 VAG 代替身份验证，将任意数量的 iSCSI 启动程序专用 iSCSI 限定名称（ IQN ）映射到一个或多个卷。要访问 VAG 中的卷，启动程序的 IQN 必须位于该卷组允许的 IQN 列表中。</block>
  <block id="28328e0db9c18c9ada207997f806124f" category="list-text">* 租户虚拟 LAN （ VLAN ）。 * 在网络级别，使用 VLAN 可提高 iSCSI 启动程序与 NetApp Element 软件集群之间的端到端网络安全性。对于为隔离工作负载或租户而创建的任何 VLAN ， NetApp Element 软件会创建一个单独的 iSCSI 目标 SVIP 地址，该地址只能通过特定 VLAN 进行访问。</block>
  <block id="5fec85270e969240cc769f429b9c8cdc" category="list-text">启用了 VRF 的 VLAN 。 * 为了进一步支持数据中心的安全性和可扩展性，您可以使用 NetApp Element 软件为任何租户 VLAN 启用类似 VRF 的功能。此功能增加了以下两项关键功能：</block>
  <block id="fca8436836d48525b8d98babbfd68518" category="list-text">通过 * L3 路由到租户 SVIP 地址。 * 此功能，您可以将 iSCSI 启动程序置于与 NetApp Element 软件集群不同的网络或 VLAN 上。</block>
  <block id="eaea554ececf5b64515f0833c56b3de4" category="list-text">* IP 子网重叠或重复。 * 此功能可用于向租户环境添加模板，从而可以从同一 IP 子网为每个租户 VLAN 分配 IP 地址。此功能对于扩展和保留 IP 空间非常重要的服务提供商环境非常有用。</block>
  <block id="c08531651ee4977d5020da1b84003631" category="section-title">企业级存储效率</block>
  <block id="6893566c26b28e197cebdefdcc6af3ae" category="list-text">* 重复数据删除。 * 系统仅存储唯一的 4 K 块。任何重复的 4K 块都会自动与已存储的数据版本关联。数据位于块驱动器上，并使用 NetApp Element 软件 Helix 数据保护进行镜像。此系统可显著减少系统中的容量消耗和写入操作。</block>
  <block id="2e5dd3a69ccb3f04d7814fc742318204" category="list-text">* 压缩。 * 数据写入 NVRAM 之前，会实时执行数据压缩。数据会进行压缩，以 4 k 块的形式存储，并在系统中保持压缩状态。这种压缩可显著减少集群中的容量消耗，写入操作和带宽消耗。</block>
  <block id="215de8162cb5ac909005881f92812fb0" category="list-text">* 精简配置。 * 此功能可在需要时提供适当数量的存储，从而消除因过度配置卷或未充分利用卷而导致的容量消耗。</block>
  <block id="95f1b89c8e9c330fcfdc8ec84633bfe6" category="list-text">* Helix.* 单个卷的元数据存储在元数据驱动器上，并复制到二级元数据驱动器以实现冗余。</block>
  <block id="da9c9b2b4164632e569069fe1e7c53ee" category="admonition">Element 专为自动化而设计。所有存储功能均可通过 API 使用。这些 API 是 UI 用于控制系统的唯一方法。</block>
  <block id="ec22e01e7cd5087ef746b3db5852da6e" category="doc">扩展：添加更多项目</block>
  <block id="0e4136a9f4ad3204c07db26d3c28a546" category="paragraph">在多租户配置中，使用存储资源添加新项目需要进行额外配置，以确保不会违反多租户要求。要在多租户集群中添加更多项目，请完成以下步骤：</block>
  <block id="c8acb1fa89b1ec9d78799a2dd4aa8b59" category="list-text">以存储管理员身份登录到 NetApp ONTAP 集群。</block>
  <block id="d0ed0d7b81278233c852e4a0d8aa123b" category="list-text">导航到 `Storage -&gt; Storage VM` ，然后单击 `Add` 。创建一个专用于 project-3 的新 SVM 。此外，还可以创建 vsadmin 帐户来管理 SVM 及其资源。</block>
  <block id="5790e2b8b367726e78500054d959d6f7" category="image-alt">创建 SVM 以进行扩展</block>
  <block id="b0c67e9a89c7ece3169ab5849bb0e411" category="list-text">以集群管理员身份登录到 Red Hat OpenShift 集群。</block>
  <block id="c9e86337c7483c8d45e5e535829d2163" category="list-text">创建新项目。</block>
  <block id="46c82384780a492254c43d461363d9ac" category="list-text">为 project-3 创建开发人员角色。</block>
  <block id="21ac9e9bbb2cfc707143311f4601af1c" category="admonition">本节中提供的角色定义只是一个示例。必须根据最终用户要求定义开发人员角色。</block>
  <block id="8efa8222e644f71e636f98917439566d" category="list-text">在 project-3 中为开发人员创建 RoleBinding. 将开发人员项目 3 角色绑定到 project-3 中的相应组（ OCP-project-3 ）。</block>
  <block id="e1f01c3341da15c9079bf5996c059811" category="list-text">以存储管理员身份登录到 Red Hat OpenShift 集群</block>
  <block id="2ca2d57f42208b6e7e9026b491595f41" category="list-text">创建 Trident 后端并将其映射到专用于 project-3 的 SVM 。NetApp 建议使用 SVM 的 vsadmin 帐户将后端连接到 SVM ，而不是使用 ONTAP 集群管理员。</block>
  <block id="c4dcda95616fac9215b5dac3cde37220" category="admonition">在此示例中，我们使用的是 ontap-NAS 驱动程序。使用相应的驱动程序根据使用情形创建后端。</block>
  <block id="8628ed29313534f54f01e0da36e66ab7" category="admonition">我们假定 Trident 已安装在 Trident 项目中。</block>
  <block id="55da75937cfedfe97c220c1e9d556d84" category="list-text">为 project-3 创建存储类，并将其配置为使用专用于 project-3 的后端存储池。</block>
  <block id="6efdcf6ed405066371d23375541816a1" category="list-text">创建 ResourceQuota 以限制项目 3 中的资源，从而从专用于其他项目的存储库请求存储。</block>
  <block id="1dea1d57247580b530335ec2d484f8a5" category="list-text">在其他项目中修补 ResourceQuotas ，以限制这些项目中的资源从专用于项目 3 的存储库访问存储。</block>
  <block id="b5143207dcb0f12c7dce4f71decfe138" category="summary">此页面上列出的视频演示了此 NVA 中记录的一些功能。</block>
  <block id="97cf87d828c4fa2e0830bcba86634b8f" category="doc">视频演示</block>
  <block id="8c19e4dd5accb1d71d2b7a68ee6f97d3" category="paragraph">以下视频演示了此 NVA 中介绍的一些功能。</block>
  <block id="c8ab60792382fa03ae8aedf17e117df2" category="list-text">将应用程序从 Google Cloud Application Marketplace 部署到 Anthos ：</block>
  <block id="6326edde93ecf13cdbe4363b9b567244" category="list-text">动态扩展 VMware 上 Anthos 上部署的 Kubernetes 集群：</block>
  <block id="a5bbf915296385f3713d50c7bc2a6c70" category="list-text">使用 NetApp Trident 配置永久性卷并将其附加到 Anthos 上的 Kubernetes Pod ：</block>
  <block id="85d34cb1c9af2ee27ab51326794cb5d5" category="doc">3. 从 RHV 下载 CA 证书： RHV 上适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="d9c772cb21a8b53ef0cc6cd96e5bc383" category="paragraph">要从 RHV 下载 CA 证书，请完成以下步骤：</block>
  <block id="b221bdbe6fd031345f8a31e9ceb05f29" category="list-text">要在部署过程中从 RHEL 计算机访问 RHV 管理器，必须更新此计算机上的 CA 证书信任，以信任与 RHV-M 的连接要下载 RHV Manager 的 CA 证书，请运行以下命令：</block>
  <block id="1dabe78d558b668a7ae015780e19aff8" category="list-text">将 CA 证书复制到服务器证书的目录中，并更新 CA 信任。</block>
  <block id="a0d72b7933b9df243a11239650ade100" category="inline-link-macro">下一步： 4.在 DNS 中注册 API/Apps</block>
  <block id="e0f77cefeb5b1646a11c40e1642c3e29" category="paragraph"><block ref="e0f77cefeb5b1646a11c40e1642c3e29" category="inline-link-macro-rx"></block></block>
  <block id="31fd0c2c8d388a4cd2c6459234743476" category="section-title">可观察性</block>
  <block id="7a6ccefec75a946583cffdd0a8a47e09" category="image-alt">可观察性主页</block>
  <block id="4a973ae1a908770e354f949d3c0592f8" category="image-alt">观察 Pod</block>
  <block id="8a373f777de729c082b5be2d80b7eca6" category="image-alt">观察节点</block>
  <block id="2ececa2c251a851a85e976daae558c81" category="image-alt">观察集群</block>
  <block id="a883982d5f8961021329c238318d4e2b" category="inline-link-macro">接下来：功能—创建资源。</block>
  <block id="5ca146f2101c14a961df161060f86cb9" category="paragraph"><block ref="5ca146f2101c14a961df161060f86cb9" category="inline-link-macro-rx"></block></block>
  <block id="4e42a1e911325b5048e50f7b5ea73d1f" category="section-title">VM 实时迁移</block>
  <block id="09e113cd46b4487f140ee07899ea3359" category="image-alt">VM 实时迁移架构</block>
  <block id="660b7fa756d01df7c4338afb9050abb1" category="paragraph">要创建绑定到具有共享 ReadWriteMany 访问权限的 PVC 的 VM ，请执行以下操作：</block>
  <block id="416d6e9d0df33a74dd38603be60453c1" category="list-text">选择所需的操作系统，然后单击下一步。假设选定操作系统已配置了启动源。</block>
  <block id="e1b595d3037639bdea165dde4b1f3906" category="list-text">在 Review and Create 窗格中，选择要在其中创建 VM 的项目并提供 VM 详细信息。确保选择了要克隆的启动源，并使用为选定操作系统分配的相应 PVC 从 CD-ROM 启动。</block>
  <block id="998a8df469c318f9cd606b44664cea5d" category="list-text">单击自定义虚拟机，然后单击存储。</block>
  <block id="ef44ba6bf4a3e677b41b361628554b88" category="image-alt">使磁盘 rwx 可访问</block>
  <block id="2ae6b586f76075c7d71faff7ba9d2a41" category="list-text">单击 Review 并确认，然后单击 Create Virtual Machine 。</block>
  <block id="18c830e61a7a92c60804118ef362933c" category="paragraph">要手动将虚拟机迁移到 OpenShift 集群中的另一个节点，请完成以下步骤。</block>
  <block id="cc58a226305ad2362de0317c1fd8261b" category="list-text">对于要迁移的虚拟机，单击省略号，然后单击迁移虚拟机。</block>
  <block id="b5839595a4132807edfc858d9f6d90ad" category="list-text">当消息弹出时，单击迁移进行确认。</block>
  <block id="d0f501bd9588700bc91fe10b7d3f761a" category="admonition">如果 evictionStrategy 设置为 LiveMigrate ，则在将原始节点置于维护模式时， OpenShift 集群中的 VM 实例会自动迁移到另一节点。</block>
  <block id="ca77161ad6ca11bca347f347b181c25f" category="inline-link-macro">接下来：工作流： VM 克隆。</block>
  <block id="294f8e986041208286bb2300b191a2ff" category="paragraph"><block ref="294f8e986041208286bb2300b191a2ff" category="inline-link-macro-rx"></block></block>
  <block id="68d13ef3d87e892878a6e6cbb44d1f21" category="doc">Red Hat OpenShift Deployment on RHV ：采用 NetApp 的 Red Hat OpenShift</block>
  <block id="5e217c79c499978721e658f868053d3f" category="inline-link-macro">接下来：追加信息：采用 NetApp 技术的 Red Hat OpenShift 。</block>
  <block id="d2fb587a433995783f0688b22359272d" category="paragraph"><block ref="d2fb587a433995783f0688b22359272d" category="inline-link-macro-rx"></block></block>
  <block id="91286d4add9b720fd5ff3bb121e12b2f" category="paragraph">本文档概述了如何使用适用于 Kubernetes 的开源存储编排程序 NetApp Trident 在裸机平台上配置和验证 NetApp ONTAP 存储平台以及 Google Cloud 的 Anthos ，以便为有状态应用程序容器部署和管理永久性存储。</block>
  <block id="122aacda8785e42ca8fd7bd6ebce84f8" category="summary">VMware vSphere 是一个虚拟化平台，用于集中管理 ESXi 虚拟机管理程序上运行的大量虚拟化服务器和网络。</block>
  <block id="68bc8529d7c57946fe13e6b3399ee287" category="inline-link">VMware vSphere 网站</block>
  <block id="80888e73d00a224bebfc22e8e4539b6d" category="paragraph">有关 VMware vSphere 的详细信息，请参见<block ref="8e822bbeb5824c0a05189bf9ff98da5c" category="inline-link-rx"></block>。</block>
  <block id="cb4d59b9004b7c584811a3d656f78bc5" category="paragraph">VMware vSphere 可提供以下功能：</block>
  <block id="cfb123c76f1c7a506310e1162d7ae235" category="paragraph"><block ref="cfb123c76f1c7a506310e1162d7ae235" category="inline-image-macro-rx" type="image"></block></block>
  <block id="19c939070c0b6ebbb52e1e0119b15301" category="section-title">网络设计</block>
  <block id="f1744781b12c15ad3b748bea44d9582b" category="section-title">VLAN 要求</block>
  <block id="e75b582a8823d532f6022b43ac209538" category="paragraph">VMware vSphere 上的 Red Hat OpenShift 旨在通过使用虚拟局域网（ VLAN ）在逻辑上隔离不同用途的网络流量。此配置可以进行扩展，以满足客户需求，或者为特定网络服务提供进一步隔离。下表列出了在 NetApp 验证解决方案时实施解决方案所需的 VLAN 。</block>
  <block id="05808f0e86c04c2a062c2e041f9e0827" category="cell">VLAN ID</block>
  <block id="3c8c5d8387f173924ffeb2bf88084dba" category="cell">管理物理节点和 IPMI</block>
  <block id="c61d980d5248923d65a5dfe7f8818011" category="cell">VM 网络</block>
  <block id="fc221309746013ac554571fbd180e1c8" category="cell">181</block>
  <block id="c846a1f843522d592b784a66368abed3" category="cell">ONTAP NFS 的存储网络</block>
  <block id="6cdd60ea0045eb7a6ec44c54d29ed402" category="cell">184</block>
  <block id="5e6094f6f2176409f469ee445fcf3f50" category="cell">适用于 ONTAP iSCSI 的存储网络</block>
  <block id="eecca5b6365d9607ee5a9d336962c534" category="cell">185.</block>
  <block id="45cf0331a91fdc3679a78fdd8f7c60a7" category="cell">管理 ESXi 节点， vCenter Server ， ONTAP Select</block>
  <block id="e8e0dd181e4ee545195120626098bfba" category="cell">3480</block>
  <block id="11967d5f57969ea4713204eace8fbf4e" category="cell">适用于 NetApp Element iSCSI 的存储网络</block>
  <block id="3fb04953d95a94367bb133f862402bce" category="cell">3481</block>
  <block id="c87f7de78a1912f53050e58df90e1445" category="cell">用于虚拟子系统迁移的网络</block>
  <block id="b7fede84c2be02ccb9c77107956560eb" category="cell">3482</block>
  <block id="35b5078b5953437a59ffd4f77c464800" category="section-title">网络基础架构支持资源</block>
  <block id="0bad9231e1bf61bc343a986739f155c1" category="paragraph">在部署 OpenShift 容器平台之前，应具备以下基础架构：</block>
  <block id="082ac615619480eecc2919e0875e99d2" category="list-text">至少一个 DNS 服务器，该服务器可提供完整的主机名解析，可从带内管理网络和 VM 网络访问。</block>
  <block id="447cb4a01965e3df01476db3576e0399" category="list-text">（可选）带内管理网络和 VM 网络的出站 Internet 连接。</block>
  <block id="a181412a291a7d0ae8a71300abf746b8" category="section-title">生产部署的最佳实践</block>
  <block id="0f19aa91cffca51fd061e34dee1e5c79" category="paragraph">本节列出了企业在将此解决方案部署到生产环境之前应考虑的几个最佳实践。</block>
  <block id="bd690c49b77b8274786240fa94d9d880" category="section-title">将 OpenShift 部署到至少包含三个节点的 ESXi 集群</block>
  <block id="9dc31e1598f94b9476a025632cee3e19" category="section-title">配置虚拟机和主机关联性</block>
  <block id="9934283c0bf98610b4be1803b9ad3430" category="inline-link">vSphere 6.7 文档：使用 DRS 关联性规则</block>
  <block id="291f24f63dc31f9f921b09c567fc963f" category="paragraph">要配置相关性组，请参见<block ref="4b14049244eae7b3d11ef8e44785dd4e" category="inline-link-rx"></block>。</block>
  <block id="ed3ecd4254cc054c70ddee702d7ed519" category="section-title">使用自定义安装文件进行 OpenShift 部署</block>
  <block id="7b65abec68958867d7dd5f43b3b06e08" category="inline-link">Red Hat OpenShift 通过自定义在 vSphere 上安装集群</block>
  <block id="f5b3b6b5d5a71b2934abd61ddb561ce2" category="inline-link-macro">接下来： NetApp 存储概述。</block>
  <block id="dd2c34a46e688e4fd1c53e1a8d8af1d0" category="paragraph"><block ref="dd2c34a46e688e4fd1c53e1a8d8af1d0" category="inline-link-macro-rx"></block></block>
  <block id="d041f37818867e78d9422131fc7484bf" category="doc">1. 在 RHV 上创建存储网络 VLAN ：适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="5cb8dc8f99bf345fc11331af0c6a3766" category="paragraph">要创建存储网络 VLAN ，请完成以下步骤：</block>
  <block id="67800a73b72df7d4745d129ef3286fc1" category="paragraph">要支持 NetApp Trident 的 Element 存储访问以将永久性卷附加到 OpenShift 中部署的 Pod ， OCP 部署中每个员工使用的计算机网络必须能够访问存储资源。如果默认情况下计算机网络无法访问 Element 存储网络，则可以在 Element 集群中创建一个额外的网络 /VLAN 以允许访问：</block>
  <block id="4ed521f9ed60209696683b5b40d06280" category="list-text">使用任何浏览器登录到集群的 MVIP 上的 Element Cluster 。</block>
  <block id="63c32995b7167ca63d3abcbcd2353a14" category="list-text">导航到集群 &gt; 网络，然后单击创建 VLAN 。</block>
  <block id="5ad491a07ae2b5c58f005cbd6ed1c034" category="list-text">在提供详细信息之前，请至少预留五个可从 OCP 网络访问的网络 IP 地址（一个用于虚拟网络存储 VIP ，一个用于每个存储节点上的虚拟网络 IP ）。</block>
  <block id="267af3c978c274a7e3fb963a351a6fb6" category="paragraph">输入您选择的 VLAN 名称，输入 VLAN ID ， SVIP 和网络掩码，选择启用 VRF 选项，然后输入网络的网关 IP 。在 IP 地址块中，输入为存储节点预留的其他地址的起始 IP 。在此示例中，大小为四，因为此集群中有四个存储节点。单击 Create VLAN 。</block>
  <block id="56b5e6f1d8a8c3894130863fda24a540" category="paragraph"><block ref="56b5e6f1d8a8c3894130863fda24a540" category="inline-image-macro-rx" type="image"></block></block>
  <block id="755ebb96c9e6d43bf91b2791bb4d553f" category="inline-link-macro">下一步： 2.下载 OpenShift 安装文件</block>
  <block id="27f6c840266bca560f1d174a0fe1b3f4" category="paragraph"><block ref="27f6c840266bca560f1d174a0fe1b3f4" category="inline-link-macro-rx"></block></block>
  <block id="9a9b5377eec62cdfef8370e455ca8a90" category="doc">部署摘要：基于 RHV 的适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="63e7086135424dd254862b2adb3916ff" category="paragraph">本节提供的详细步骤验证了在 RHV 解决方案上部署和验证适用于 Red Hat OpenShift 的 NetApp HCI 所需的最低硬件和软件配置。</block>
  <block id="b19f206d9dfe4b673e5d5e43891dde67" category="paragraph">通过 Red Hat 虚拟化上的 IPI 部署 Red Hat OpenShift 容器平台包括以下步骤：</block>
  <block id="45e1855a6da237084bd443ac7f7f1886" category="inline-link-macro">创建存储网络 VLAN</block>
  <block id="486d24e213d1bd2deed0ce8d1924e442" category="list-text"><block ref="486d24e213d1bd2deed0ce8d1924e442" category="inline-link-macro-rx"></block></block>
  <block id="18ceda5668bbc029f7ad2aa0949b1e74" category="inline-link-macro">下载 OpenShift 安装文件</block>
  <block id="ca8766cbca1035ce9b0563e462b81326" category="list-text"><block ref="ca8766cbca1035ce9b0563e462b81326" category="inline-link-macro-rx"></block></block>
  <block id="8553a82fabf307c420a9b8df7790be80" category="inline-link-macro">从 RHV 下载 CA 证书</block>
  <block id="23a6bde18277b8aea000d887dc439fc4" category="list-text"><block ref="23a6bde18277b8aea000d887dc439fc4" category="inline-link-macro-rx"></block></block>
  <block id="3a1433b64bf447071b41c41b7c51af1e" category="inline-link-macro">在 DNS 中注册 API/Apps</block>
  <block id="36a955505d50e06c8a14d9b95ac1ce5f" category="list-text"><block ref="36a955505d50e06c8a14d9b95ac1ce5f" category="inline-link-macro-rx"></block></block>
  <block id="e09da87d93ce7533f230ed440b444a14" category="inline-link-macro">生成并添加 SSH 专用密钥</block>
  <block id="f965ad9e3b059f078300c1fb2cef0a35" category="list-text"><block ref="f965ad9e3b059f078300c1fb2cef0a35" category="inline-link-macro-rx"></block></block>
  <block id="b595ed272eb2d74f765c8f9417fcd5a4" category="inline-link-macro">安装 OpenShift 容器平台</block>
  <block id="66ef9cd1a57409e92c73451bc79a109f" category="list-text"><block ref="66ef9cd1a57409e92c73451bc79a109f" category="inline-link-macro-rx"></block></block>
  <block id="bb2dd6da7db05a9a03c45ccb83850ee1" category="inline-link-macro">访问控制台 /Web 控制台</block>
  <block id="6a6fe52510af3d23c8038dacd5582405" category="list-text"><block ref="6a6fe52510af3d23c8038dacd5582405" category="inline-link-macro-rx"></block></block>
  <block id="db7f1af1252a885b08d6fe3771e047a0" category="inline-link-macro">配置工作节点以运行存储服务</block>
  <block id="62714222c025728f6cc62e497877f85d" category="list-text"><block ref="62714222c025728f6cc62e497877f85d" category="inline-link-macro-rx"></block></block>
  <block id="6b6c9c1710579dab1ee1de395c485054" category="inline-link-macro">通过操作员下载并安装 Trident</block>
  <block id="b72f69cc199df637eb2011e33388a488" category="list-text"><block ref="b72f69cc199df637eb2011e33388a488" category="inline-link-macro-rx"></block></block>
  <block id="49e84ff2b826cec365a2b35502f99593" category="inline-link-macro">接下来：验证结果：基于 RHV 的适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="e836bcee0f8f035cd0ad5cba5f191551" category="paragraph"><block ref="e836bcee0f8f035cd0ad5cba5f191551" category="inline-link-macro-rx"></block></block>
  <block id="a0e01d06503f271c1de7acc0acd01733" category="doc">NVA-1160 ：采用 NetApp 技术的 Red Hat OpenShift</block>
  <block id="4711a0fd2fa3c3625080f399e5261ecd" category="paragraph">采用 NetApp 解决方案的 Red Hat OpenShift 旨在为客户提供卓越的价值，其使用情形如下：</block>
  <block id="44815e873492015d6a8ab6362de8da6c" category="list-text">使用 IPI （安装程序配置的基础架构）在裸机上， Red Hat OpenStack Platform ， Red Hat 虚拟化和 VMware vSphere 上轻松部署和管理 Red Hat OpenShift 。</block>
  <block id="03bb323d052d033ea0b5b2cab17f1219" category="list-text">将企业级容器和虚拟化工作负载的强大功能与 Red Hat OpenShift 相结合， Red Hat OpenShift 可虚拟部署在 OSP ， RHV 或 vSphere 上，也可通过 OpenShift 虚拟化部署在裸机上。</block>
  <block id="932ba7da1da9b241bfc5ddbb10e49da2" category="paragraph">企业越来越多地采用 DevOps 实践来创建新产品，缩短发布周期并快速添加新功能。由于容器和微服务本身的灵活性，它们在支持 DevOps 实践方面发挥着至关重要的作用。但是，在企业环境中以生产规模实施 DevOps 会带来自身的挑战，并对底层基础架构提出一些要求，例如：</block>
  <block id="43ee156205e7f74e32a02d556537fe90" category="list-text">堆栈中所有层的高可用性</block>
  <block id="b59807af538b77fee1fb3d1d3c81f9a8" category="list-text">易于部署过程</block>
  <block id="2748d7182409b378e23f62724be778fd" category="list-text">无中断运行和升级</block>
  <block id="1a4af279491c72d7c36b4c9767ae712f" category="list-text">API 驱动的可编程基础架构，可跟上微服务灵活性的步伐</block>
  <block id="8ca11bfd783c730b04c0c77fc7574406" category="list-text">能够同时运行虚拟化和容器化工作负载</block>
  <block id="0111977afdb7fa380f806edbe8438163" category="list-text">能够根据工作负载需求独立扩展基础架构</block>
  <block id="42c487483a8feee3cc0365881a4cc265" category="paragraph">Red Hat OpenShift with NetApp 认可这些挑战，并提供了一个解决方案，通过在客户选择的数据中心环境中实施完全自动化的 RedHat OpenShift IPI 部署，帮助解决每个问题。</block>
  <block id="fd89bb4228981d3b22187eb451421cd6" category="section-title">Red Hat OpenShift 容器平台</block>
  <block id="70240bc0debcb080aa08dbd9e7b9a525" category="paragraph">有关详细信息，请访问 OpenShift 网站<block ref="35d5a627a33ce17e4bd125258d59fbc4" category="inline-link-rx"></block>。</block>
  <block id="aa4193984de53d2a6d8fcc2d77c09bda" category="paragraph">有关详细信息，请访问 NetApp 网站<block ref="95da63d781dead5af723667a3f69096a" category="inline-link-rx"></block>。</block>
  <block id="e7e767d7c0e58b16e57d3ab16150db80" category="cell">技术</block>
  <block id="7b02ea300aef2e0bff0d7f6111053284" category="cell">NetApp ONTAP</block>
  <block id="601712ded7a71b0842984ad41b6aad39" category="cell">12.3</block>
  <block id="765bb3744268ca0de607208bfdc8a37a" category="cell">存储编排</block>
  <block id="af08b45fa44807ac1852671e6fc59d44" category="cell">21.04</block>
  <block id="b175d08ac03101cd40f077848d436e1f" category="cell">Red Hat OpenShift</block>
  <block id="7cf4fea896dee61293d729d9985621d7" category="cell">容器编排</block>
  <block id="2454407b9991c6c5f417a2feb8ea7970" category="cell">4.6 EUS ， 4.7</block>
  <block id="9c4e78a1b7e7b4981aced1e10d037c6d" category="cell">Red Hat OpenStack 平台</block>
  <block id="de45aa336111dfa1825c54726464307c" category="cell">私有云基础架构</block>
  <block id="3c5825a0d4bdb85c67182ef89bc9c7eb" category="cell">16.1</block>
  <block id="f9a97ed4e88eeab44f2693afa0eb2089" category="cell">4.4</block>
  <block id="9c295b8302ac546bb93a346b68089f50" category="cell">6.7U3.</block>
  <block id="aacc79f269e716528198eabb064b216b" category="inline-link-macro">接下来： Red Hat OpenShift 概述。</block>
  <block id="62857c2aca7eeae2c1f44104c3fc7dde" category="paragraph"><block ref="62857c2aca7eeae2c1f44104c3fc7dde" category="inline-link-macro-rx"></block></block>
  <block id="593d08bd12b1d6efdd3476a44b63fffa" category="doc">追加信息： NetApp HCI for Red Hat OpenShift on RHV</block>
  <block id="1be465260df7c846768e06c988594a6a" category="paragraph">要了解有关本文档中所述信息的更多信息，请查看以下网站：</block>
  <block id="8de7919a940404844476034b9673cae9" category="inline-link"><block ref="8de7919a940404844476034b9673cae9" category="inline-link-rx"></block></block>
  <block id="46d540fae53ec9ed30149083b2ea3330" category="list-text">NetApp Trident 文档<block ref="7a6a0105e54a5dbb92480f939e52114f" category="inline-link-rx"></block></block>
  <block id="7e4259c7dedb58d6c0e1396c14991e69" category="inline-link"><block ref="7e4259c7dedb58d6c0e1396c14991e69" category="inline-link-rx"></block></block>
  <block id="f3bb4efc96d4acace5146beafb890c84" category="list-text">Red Hat OpenShift 文档<block ref="3003c59e054bf8b43bb27e8d0517a4d1" category="inline-link-rx"></block></block>
  <block id="e690fa655ec589e6d0abb58164d5ccfd" category="doc">追加信息：采用 NetApp 技术的 Red Hat OpenShift</block>
  <block id="6f4e4d9fbe846fd8bf7decf7dcffbd63" category="list-text">NetApp 文档</block>
  <block id="1497398039e94eb756be9a3cff5649c7" category="inline-link"><block ref="1497398039e94eb756be9a3cff5649c7" category="inline-link-rx"></block></block>
  <block id="f2d3084aa0f70da5e15757ee3292cda7" category="paragraph"><block ref="f2d3084aa0f70da5e15757ee3292cda7" category="inline-link-rx"></block></block>
  <block id="78e584e510e96276ebd784fceafb9bdb" category="list-text">NetApp Trident 文档</block>
  <block id="21b11dbf6ab3c6d36a76f280fe8ec75d" category="list-text">Red Hat OpenShift 文档</block>
  <block id="74201863479cf5c9b89330c920283301" category="inline-link"><block ref="74201863479cf5c9b89330c920283301" category="inline-link-rx"></block></block>
  <block id="3e10ed3875c45f9dc9064324660fc2b1" category="paragraph"><block ref="3e10ed3875c45f9dc9064324660fc2b1" category="inline-link-rx"></block></block>
  <block id="06fd33ae9f869a89e860634ec94b9793" category="list-text">Red Hat OpenStack Platform 文档</block>
  <block id="647d438a62673b6a6c9830682f6bc128" category="inline-link"><block ref="647d438a62673b6a6c9830682f6bc128" category="inline-link-rx"></block></block>
  <block id="705a39bc1a12c50103a847633c3f7493" category="paragraph"><block ref="705a39bc1a12c50103a847633c3f7493" category="inline-link-rx"></block></block>
  <block id="8d79e9650a1f62f89d77743225e203c0" category="list-text">Red Hat 虚拟化文档</block>
  <block id="a1bcc86cb4d53b458f0fdad36c20a0c0" category="inline-link"><block ref="a1bcc86cb4d53b458f0fdad36c20a0c0" category="inline-link-rx"></block></block>
  <block id="6d6038842b529e3d97aa9a8a9d81d866" category="paragraph"><block ref="6d6038842b529e3d97aa9a8a9d81d866" category="inline-link-rx"></block></block>
  <block id="4666fc2f640685636f115f8b2b6b8ce0" category="list-text">VMware vSphere 文档</block>
  <block id="9c2eeeb25388391ff52a45ac0567fa73" category="inline-link"><block ref="9c2eeeb25388391ff52a45ac0567fa73" category="inline-link-rx"></block></block>
  <block id="71aa41fc980571d5a324adedae614f9c" category="paragraph"><block ref="71aa41fc980571d5a324adedae614f9c" category="inline-link-rx"></block></block>
  <block id="639813d9aa126816c3f9e9de2a45ce17" category="paragraph">OSP 是一种基础架构即服务（ Infrastructure-as-a-Service ， IaaS ）云，由一组控制服务实施，用于管理计算，存储和网络资源。环境可通过基于 Web 的界面进行管理，管理员和用户可以控制，配置和自动化 OpenStack 资源。此外，还通过广泛的命令行界面和 API 为 OpenStack 基础架构提供便利，为管理员和最终用户提供全面的自动化功能。</block>
  <block id="737c38dd225185612ac8fa148ae9583e" category="inline-link">Red Hat OpenStack Platform 网站</block>
  <block id="19fb2090425be8f78441166e8f1d8d6f" category="paragraph">有关 OSP 的详细信息，请参见<block ref="9c79780f89511512bd5bf54ce21d04de" category="inline-link-rx"></block>。</block>
  <block id="e2ab8aafc6151adfa655ffd5d2425e7d" category="section-title">OpenStack 服务</block>
  <block id="f5fdcf6d68d437c59942a35d79b8c7b1" category="paragraph"><block ref="f5fdcf6d68d437c59942a35d79b8c7b1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c2ba7e785c49050f48da9aacc45c2b85" category="cell">服务</block>
  <block id="b5a7adde1af5c87d7fd797b6245c2a39" category="cell">Description</block>
  <block id="2938c7f7e560ed972f8a4f68e80ff834" category="cell">信息板</block>
  <block id="85fb7708d989f936cb51ef53a8af080f" category="cell">Horizon</block>
  <block id="d5a9efab6df20a9e132b774795775dde" category="cell">基于 Web 浏览器的信息板，用于管理 OpenStack 服务。</block>
  <block id="c9c5c65fb4af9cf90eb99b3b84424189" category="cell">身份</block>
  <block id="1ce2096c300f78bbb8389ca2603e6dd9" category="cell">Keystone</block>
  <block id="91c68681aadba9c0e8308f7d0b3cc416" category="cell">用于身份验证和授权 OpenStack 服务以及管理用户，项目和角色的集中式服务。</block>
  <block id="88fac409baf592beb25e285d8663edcb" category="cell">中子</block>
  <block id="0283e46fd80198d441eb742b88cf96f1" category="cell">在 OpenStack 服务的接口之间提供连接。</block>
  <block id="a7173cc5cdd0e31df00cd34f058b1d33" category="cell">Cinder</block>
  <block id="597dab3a2b3c74e3c266b2f65ec28619" category="cell">管理虚拟机（ VM ）的永久性块存储卷。</block>
  <block id="6e747c4965495f2e26bf17e647aa0083" category="cell">Nova</block>
  <block id="f13c04e9c49274cd31bd8092c8f50304" category="cell">管理和配置计算节点上运行的 VM 。</block>
  <block id="be53a0541a6d36f6ecb879fa2c584b08" category="cell">图像</block>
  <block id="10ec3a0506fab7073649337ca7be7979" category="cell">概览</block>
  <block id="d9ff71ddcb6bbbe8ad48ae8b678369d4" category="cell">用于存储 VM 映像和卷快照等资源的注册表服务。</block>
  <block id="ae832e9b5bda2699db45f3fa6aa8c556" category="cell">Swift</block>
  <block id="41c380458dfcdc118ef573a2d98c6acb" category="cell">允许用户存储和检索文件和任意数据。</block>
  <block id="aa96a21412def0d916f43b639424f8e4" category="cell">遥测</block>
  <block id="8fb4b5e28f192236eaa9e4972f810dbd" category="cell">Ceilmeter</block>
  <block id="ed622b9c64858cc66a01c58893b5d39d" category="cell">提供对云资源使用情况的衡量指标。</block>
  <block id="d9cc1f843ea62c12a3e59afbbdc2f9ce" category="cell">流程编排</block>
  <block id="7d486371bb65b0633535ceba4189d8ed" category="cell">热</block>
  <block id="abaa6ebae60b74638c54a43f3341db8e" category="cell">基于模板的流程编排引擎，支持自动创建资源堆栈。</block>
  <block id="5ddbd3cec63b14995bf6a5823b692de7" category="paragraph">采用 NetApp 解决方案的 Red Hat OpenShift 使用两个数据交换机以 25 Gbps 的速度提供主数据连接。它还使用两个额外的管理交换机，这些交换机以 1 Gbps 的速度提供连接，用于存储节点的带内管理以及 IPMI 功能的带外管理。</block>
  <block id="c546b983b02d8654c5b245147d99dcf0" category="paragraph">采用 NetApp 的 Red Hat OpenShift 旨在通过使用虚拟局域网（ VLAN ）在逻辑上隔离不同用途的网络流量。此配置可以进行扩展，以满足客户需求，或者为特定网络服务提供进一步隔离。下表列出了在 NetApp 验证解决方案时实施解决方案所需的 VLAN 。</block>
  <block id="414b4843c124e72b43bccf2948a53a41" category="cell">用于管理物理节点和 IPMI 服务的网络具有讽刺意味。</block>
  <block id="e8cbca2d71bd2aeff622a07b4ffad6c2" category="cell">用于控制器节点直接映射卷以支持 Swift 等基础架构服务的网络。</block>
  <block id="757b505cfd34c64c85ca5b5690ee5293" category="cell">201</block>
  <block id="e103375dfc18f23e4fc072903e894fe9" category="cell">存储 Cinder</block>
  <block id="0bdfa6389eb47674a02f6049f342785d" category="cell">用于将块卷直接映射和附加到环境中部署的虚拟实例的网络。</block>
  <block id="854d6fae5ee42911677c739ee1734486" category="cell">202</block>
  <block id="772d9a23b79ccb504fa0590644934c3b" category="cell">内部 API</block>
  <block id="e44f5f63400b0975b884dc2980ee3a61" category="cell">用于通过 API 通信， RPC 消息和数据库通信在 OpenStack 服务之间进行通信的网络。</block>
  <block id="34ed066df378efacc9b924ec161e7639" category="cell">301.</block>
  <block id="6252d0571760e3d285e2e41a2b1e7743" category="cell">租户</block>
  <block id="577bcc914f9e55d5e4e4f82f9f00e7d4" category="cell">302.</block>
  <block id="cdc529b5e11a981e4597195c5f1c53b5" category="cell">OpenStack 对象存储（ Swift ）使用此网络在参与的副本节点之间同步数据对象。代理服务充当用户请求与底层存储层之间的中间接口。代理接收传入请求并找到所需的副本以检索请求的数据。</block>
  <block id="11b9842e0a271ff252c1903e7132cd68" category="cell">303.</block>
  <block id="5214f1e2490f3878e307fd6f81f9f77f" category="cell">PXE</block>
  <block id="16d856c79e739181f35adfe5b791c650" category="cell">OpenStack Director 在具有讽刺意味的裸机配置服务中提供 PXE 启动，用于编排 OSP Overcloud 的安装。</block>
  <block id="966b6dfb6b0819cc10644bea3115cf20" category="cell">3484</block>
  <block id="b206a1b4ea1097761f78e8876f6da779" category="cell">外部</block>
  <block id="dfeb9598fbfb97cc6bbcc0aff2c785d6" category="cell">3485</block>
  <block id="32223320445c4cf46444e40ebde18b7e" category="cell">提供对系统管理功能的访问，例如 SSH 访问， DNS 流量和网络时间协议（ NTP ）流量。此网络还充当非控制器节点的网关。</block>
  <block id="ab4f2b5fd96ca65349119909c1eada2d" category="cell">3486</block>
  <block id="f2260a90424f1d412334d1b3467abd22" category="list-text">至少一个 DNS 服务器，可提供完整的主机名解析。</block>
  <block id="d70672769aa84f2a999291a645e67355" category="list-text">至少三个 NTP 服务器，这些服务器可以使解决方案中的服务器保持时间同步。</block>
  <block id="478a3526bd6097c6b7a330fd6aae410e" category="list-text">（可选） OpenShift 环境的出站 Internet 连接。</block>
  <block id="9a14258452ea5da50d562e08e5b9291c" category="section-title">将 OpenShift 部署到至少包含三个计算节点的 OSP 私有云</block>
  <block id="7a595c63e0ebc069af3da46e3d1c8fee" category="section-title">配置虚拟机 / 主机关联性</block>
  <block id="9c0af999b760fac2aa82d9d105fa7a7e" category="paragraph">默认情况下，服务器组最多可管理 10 个虚拟实例的放置。可以通过更新 Nova 的默认配额来修改此设置。</block>
  <block id="8aea038e418642b1735131358c24a866" category="inline-link">如何为 OpenStack 实例配置关联性和反关联性？</block>
  <block id="d90e13a49726d9175649113d81f4caa7" category="paragraph">要配置相关性组，请参见<block ref="f5b5be16184c5362a1ca218025e91581" category="inline-link-rx"></block>。</block>
  <block id="47a822101acb11c74a4877a3d0b77093" category="inline-link">Red Hat OpenShift 通过自定义在 OpenStack 上安装集群</block>
  <block id="e38be1dc20a2b358b917b60fe2677b39" category="doc">NetApp Element iSCSI 配置</block>
  <block id="27ef1192cd037c8978195be045fa054e" category="list-text">编辑 `endpoint` 行上的用户，密码和 MVIP 值。</block>
  <block id="d1b7418d19df7144a98dfde725db068c" category="list-text">编辑 `SVIP` 值。</block>
  <block id="dd7f72325e6f60ea7163b071e4d5e2cc" category="list-text">安装好此后端文件后，运行以下命令创建第一个后端。</block>
  <block id="d8f188eff4c16fa87dd87f51db847f73" category="list-text">创建后端后，您接下来必须创建一个存储类。与后端一样，可以在 sample-inputs 文件夹中为环境编辑一个示例存储类文件。将其复制到工作目录并进行必要的编辑，以反映所创建的后端。</block>
  <block id="eb22c0d536e50f388da6dfd91ba4c0b6" category="list-text">必须对此文件进行的唯一编辑是，为新创建的后端存储驱动程序的名称定义 `backendType` 值。另请注意 name-field 值，稍后必须引用该值。</block>
  <block id="3ae96676432caea17595a22525bd9660" category="admonition">此文件中定义了一个名为 `FSType` 的可选字段。在 iSCSI 后端，可以将此值设置为特定的 Linux 文件系统类型（ XFS ， ext4 等），也可以删除此值，以便 OpenShift 决定要使用的文件系统。</block>
  <block id="7183f006fd74d941c838f003380f3f46" category="list-text">运行 `oc` 命令以创建存储类。</block>
  <block id="71cb54ab06aa16af27a0ec2157972648" category="list-text">创建存储类后，您必须创建第一个永久性卷请求（ PVC ）。此外，还可以在 sample-inputs 中使用一个示例 `pva-basic 。 yaml` file 来执行此操作。</block>
  <block id="afc499f2f95809cedce5c8922067065f" category="list-text">必须对此文件进行的唯一编辑是，确保 `storageClassName` 字段与刚刚创建的字段匹配。可以根据要配置的工作负载的需要进一步自定义 PVC 定义。</block>
  <block id="02eb9c3824b0b8eae9723daa7a2912d1" category="list-text">发出 `oc` 命令创建 PVC 。根据所创建的后备卷的大小，创建可能需要一些时间，因此您可以在该过程完成后进行观察。</block>
  <block id="de59be6e44d20d9dd12412571b745c5f" category="section-title">应用程序生命周期管理</block>
  <block id="fa19c463235a810b3a93333d6ee51d6c" category="paragraph">要创建应用程序并在一组集群中对其进行管理，</block>
  <block id="6b41f909eb299f214abfb15580583456" category="image-alt">创建应用程序</block>
  <block id="bcb3e5b76f189a87ea350550f86de83f" category="list-text">安装应用程序组件后，此应用程序将显示在列表中。</block>
  <block id="d70fc022d09a33f4044c81cd670a71b6" category="image-alt">应用程序列表</block>
  <block id="672d326704c3be4bebf6c816a48495e7" category="list-text">现在，可以从控制台监控和管理此应用程序。</block>
  <block id="0787d747a308cc786b50363313ccf714" category="inline-link-macro">接下来：功能—监管和风险。</block>
  <block id="f4c7ffc89dab76d5a6dccad54114c204" category="paragraph"><block ref="f4c7ffc89dab76d5a6dccad54114c204" category="inline-link-macro-rx"></block></block>
  <block id="9d312703c40c2d87b835076063682d59" category="summary">NetApp ONTAP 是一款功能强大的存储软件工具，具有直观的图形用户界面，具有自动化集成功能的 REST API ，基于 AI 的预测性分析和更正操作，无中断硬件升级和跨存储导入等功能。</block>
  <block id="48235fec2427a785c4a09d7150fc11fc" category="inline-link">NetApp ONTAP 网站</block>
  <block id="e65027864c84a42fc0799d878ffa0005" category="paragraph">有关 NetApp ONTAP 存储系统的详细信息，请访问<block ref="be9464a7a83e639a645a801fff2791d9" category="inline-link-rx"></block>。</block>
  <block id="4e3f9a03501932f914205c4ad0e682ea" category="list-text">* NetApp FlexClone 。 * 可根据 Snapshot 副本即时配置 NetApp 卷的完全可读写副本。</block>
  <block id="96f474208f638efbbd85fac3a46a2ed4" category="paragraph">有关 ONTAP 的详细信息，请参见<block ref="eb1214e3900207403ada8715d3d4c764" category="inline-link-rx"></block>。</block>
  <block id="81bf516f5b38ea41d503a2670a9dc144" category="paragraph"><block ref="81bf516f5b38ea41d503a2670a9dc144" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e80842c9211bc376ee42d583c70ae408" category="section-title">NetApp 平台</block>
  <block id="5a69e0f8303b40f9f4d56038d3d260c9" category="section-title">NetApp AFF/FAS</block>
  <block id="d4c312c600a949fb72436c2d10568a90" category="paragraph">这两个系统均由 NetApp ONTAP 数据管理软件提供支持。 NetApp 数据管理软件是业内最先进的数据管理软件，可提供高度可用的云集成简化存储管理，可提供您的 Data Fabric 所需的企业级速度，效率和安全性。</block>
  <block id="992c24be8f66e4259b38ce763c115251" category="paragraph">有关 NetApp AFF/FAS 平台的详细信息，请单击<block ref="629508ef5a91b5835f70894f34eed424" category="inline-link-rx"></block>。</block>
  <block id="b008e805d13d953ddb5cbb220d8ef9b6" category="paragraph">ONTAP Select 是 NetApp ONTAP 的软件定义部署，可以部署到您环境中的虚拟机管理程序上。它可以安装在 VMware vSphere 或 KVM 上，并提供基于硬件的 ONTAP 系统的完整功能和体验。</block>
  <block id="3f0bbee5abf3eed060d4147cb0d060b9" category="paragraph">有关 ONTAP Select 的详细信息，请单击<block ref="7c1424ed7be035c303f12b0763e38ece" category="inline-link-rx"></block>。</block>
  <block id="117bdbda976fe8b3212bc3b6327a0a1b" category="section-title">Cloud Volumes ONTAP</block>
  <block id="f0f4b6de2040d7dc57e7f4f6baee7ec3" category="paragraph">NetApp Cloud Volumes ONTAP 是 NetApp ONTAP 的云部署版本，可部署在多个公有云中，包括 Amazon AWS ， Microsoft Azure 和 Google Cloud 。</block>
  <block id="c7fa0d52c3955385f084d0e67c59f963" category="paragraph">有关 Cloud Volumes ONTAP 的详细信息，请单击<block ref="75c9b0075008bbe40ac851ad7f6dda6a" category="inline-link-rx"></block>。</block>
  <block id="83006d8531a0c886e6793b380b00332e" category="doc">5. 生成并添加 SSH 专用密钥： RHV 上适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="0a326f559332a9d2a7f4b188e14aeca0" category="paragraph">要生成并添加 SSH 专用密钥，请完成以下步骤：</block>
  <block id="0cd187f3df63569954d20eb005fd9cbb" category="list-text">要在 OpenShift 集群上进行安装调试或灾难恢复，您必须为 `ssh-agent` 和安装程序提供 SSH 密钥。如果 RHEL 计算机上尚不存在用于无密码身份验证的 SSH 密钥，请创建一个。</block>
  <block id="75a5a49a4999ea49320ed224487cae50" category="list-text">启动 `ssh-agent` 进程并将其配置为后台运行任务。</block>
  <block id="1eaddb160fe85446c1832357a6d239fe" category="list-text">将在步骤 2 中创建的 SSH 私钥添加到 `ssh-agent` 中，这样您就可以通过 SSH 直接连接到节点，而无需以交互方式传递密钥。</block>
  <block id="c3ba3951894f5552b1abd432e963c26e" category="inline-link-macro">下一步： 6.安装 OpenShift 容器平台</block>
  <block id="4f3209911648ad582571ba5c94883cdf" category="paragraph"><block ref="4f3209911648ad582571ba5c94883cdf" category="inline-link-macro-rx"></block></block>
  <block id="14a9bacc4b197037f54eb0c4c7e1970c" category="paragraph">因此，企业需要寻找在这两种环境中都能获得最佳性能的解决方案，例如，允许他们在一个集群中运行所有工作负载，同时为每个工作负载提供专用集群的优势。</block>
  <block id="cde9f9f8fcae0cdc6624895868803d60" category="list-text">通过共享集群资源，降低资本支出和运营支出</block>
  <block id="943a49720e6c85fa9692af2a5ebd8829" category="list-text">降低运营和管理开销</block>
  <block id="f51a58b3ab19c778652fcff9dd39ca55" category="list-text">保护工作负载免受安全违规交叉影响</block>
  <block id="181cfddfdb055879df4d55323a14c473" category="list-text">保护工作负载，防止因资源争用而导致性能意外下降</block>
  <block id="d463f48696e58e286e9c0d594169b395" category="inline-link-macro">接下来：架构。</block>
  <block id="4fbbd2f5b2a8e82447aa1b841b2a70d0" category="paragraph"><block ref="4fbbd2f5b2a8e82447aa1b841b2a70d0" category="inline-link-macro-rx"></block></block>
  <block id="25d77826c061b84a0c036f43e02aa129" category="doc">安装 OpenShift 虚拟化：采用 NetApp 的 Red Hat OpenShift</block>
  <block id="8fe3ce682e72fe87e56e5b11e1c2cd36" category="inline-link-macro">接下来：追加信息：采用 NetApp 技术的 Red Hat OpenShift</block>
  <block id="5dbd13d011610e2b4d57bd4ca3fd685f" category="paragraph"><block ref="5dbd13d011610e2b4d57bd4ca3fd685f" category="inline-link-macro-rx"></block></block>
  <block id="06fdae3f02fee5cbe172f1574564c925" category="doc">适用于 Kubernetes 的高级集群管理：采用 NetApp 的 Red Hat OpenShift</block>
  <block id="30c15b5a84f4fb26cd25b38dc787b22d" category="paragraph">随着容器化应用程序从开发过渡到生产，许多组织需要使用多个 Red Hat OpenShift 集群来支持该应用程序的测试和部署。同时，企业通常会在 OpenShift 集群上托管多个应用程序或工作负载。因此，每个组织最终都会管理一组集群，因此 OpenShift 管理员必须面对在跨多个内部数据中心和公有云的一系列环境中管理和维护多个集群这一额外挑战。为了应对这些挑战， Red Hat 推出了适用于 Kubernetes 的高级集群管理。</block>
  <block id="a7516c278242a08b85090e24cbf67218" category="paragraph">Red Hat Advanced Cluster Management for Kubernetes 作为 Red Hat OpenShift 集群的附加组件进行安装，并使用此集群作为其所有操作的中央控制器。此集群称为集线器集群，它会为用户提供一个管理平面以连接到高级集群管理。通过高级集群管理控制台导入或创建的所有其他 OpenShift 集群均由集线器集群管理，称为受管集群。它会在受管集群上安装一个名为 Kluterlet 的代理，将其连接到中心集群，并处理与集群生命周期管理，应用程序生命周期管理，可观察性和安全合规性相关的不同活动请求。</block>
  <block id="b1000f23e43dfac19b53c74d7ebe66c8" category="image-alt">ACM 架构</block>
  <block id="a376445fd812a7fa27714e6b11bc6163" category="paragraph">有关详细信息，请参见文档<block ref="50c0dc50e188cf3a7847d9a813fd829e" category="inline-link-rx"></block>。</block>
  <block id="2bd77ae4e72f37c837a2da8cfa83e210" category="inline-link-macro">接下来：部署前提条件。</block>
  <block id="a99137a02f570225903b02b175e289a4" category="paragraph"><block ref="a99137a02f570225903b02b175e289a4" category="inline-link-macro-rx"></block></block>
  <block id="7c613b296892d4712b9041d3081282f8" category="summary">借助 NetApp 在 Red Hat OpenShift 上为 Kubernetes 提供高级集群管理。</block>
  <block id="78e1aefe2bbb2518f1156636e761e479" category="paragraph">要在 OpenShift 集群上安装适用于 Kubernetes 的高级集群管理，请完成以下步骤：</block>
  <block id="b17056cdbd9ec695d4348e1ad799ace4" category="list-text">选择一个 OpenShift 集群作为中心集群，并使用 cluster-admin 权限登录到该集群。</block>
  <block id="2e5d3941e033e96d5317cc2bbd1da914" category="image-alt">ACM 磁贴</block>
  <block id="cc5a9dd5971b8369354db684e5dbfe2b" category="image-alt">ACM 图块详细信息</block>
  <block id="72b342ddabad6a9ec11df82389c40b88" category="image-alt">安装 ACM 操作员磁贴</block>
  <block id="11458c333e4903e54ca46f822ba6a3b6" category="list-text">等待操作员安装完成。</block>
  <block id="64524f91c2fdfcd54b4bbcab35392908" category="image-alt">正在安装 ACM 操作员</block>
  <block id="e0d84ec6a5b8f92909a7a3bef11455c1" category="image-alt">ACM 操作员 MulticlusterHub</block>
  <block id="344f0cb43d1b2e7a719bea808fe7c5bf" category="image-alt">创建多集群中心屏幕</block>
  <block id="851548d1ad843a23609f325e8b54e72d" category="image-alt">安装了含 ACM 的操作员</block>
  <block id="c7aa79f0c31ac15d728ee47c7e6eaee2" category="image-alt">多集群集线器就绪</block>
  <block id="f761fad3f1c25e94d5f46ebd9e23a901" category="image-alt">ACM 控制台路由</block>
  <block id="4488e277b96ae08def5eb77c2d8c6e74" category="inline-link-macro">接下来：功能—集群生命周期管理。</block>
  <block id="8a4d50965d8a3c708bdb16a716d64246" category="paragraph"><block ref="8a4d50965d8a3c708bdb16a716d64246" category="inline-link-macro-rx"></block></block>
  <block id="73f56e4c4c0159e297f443e9543fe071" category="summary">本部分概述了实施适用于 Anthos 的 NetApp HCI 解决方案所需的详细协议。</block>
  <block id="c29867b9b73b44a843191dce55c50c3c" category="doc">部署步骤</block>
  <block id="5975d066cb9b7fec2a8eb9c3ac681f05" category="paragraph">本节详细介绍了实施适用于 Anthos 的 NetApp HCI 解决方案的协议。</block>
  <block id="b37e7403f70f5a8b736f7408642a97a6" category="inline-link-macro">配置管理交换机</block>
  <block id="18deec7c129cc3c09ba1acdd263d5a3c" category="inline-link-macro">配置数据交换机</block>
  <block id="a00490625069094262018524d7e66063" category="inline-link-macro">使用 NetApp 部署引擎部署 NetApp HCI</block>
  <block id="2f721dbcd882db9f942cbcec16227d6f" category="inline-link-macro">配置 vCenter Server</block>
  <block id="3c1fbb98658bebef2db6723d1cd06c15" category="inline-link-macro">部署和配置 F5 BIG-IP Virtual Edition 设备</block>
  <block id="e4dba46888af04b15e7f6ff9fcce4dee" category="inline-link-macro">完成 Anthos 前提条件</block>
  <block id="d2dd81e8a977342f2c71cddc116c2a35" category="inline-link-macro">部署 Anthos 管理工作站</block>
  <block id="59009459f65a4964e2f6c4329bae86ee" category="inline-link-macro">部署管理集群</block>
  <block id="b20dacbc4fe1b1600ba289ffa6be3d8c" category="inline-link-macro">部署用户集群</block>
  <block id="a57401b3207fd1f13fc5b0c15fd3ca64" category="inline-link-macro">使用 GKEE 控制台启用对集群的访问</block>
  <block id="297fec52bec2d9b4c6d28f1d2cbcf38d" category="inline-link-macro">安装和配置 NetApp Trident 存储配置程序</block>
  <block id="e0e03861369cfcce4af69982bd4b3414" category="paragraph">此部署分为以下高级任务： 1. <block ref="dedac8d0a3439b527734d3b393dba8f1" category="inline-link-macro-rx"></block>2. <block ref="26958faeec7527dfb2d55faa50b79ff2" category="inline-link-macro-rx"></block>3. <block ref="47bc94e067b776b8acd103e58312d912" category="inline-link-macro-rx"></block>4. <block ref="f4b1a2801b68cf534cfb027b9793868d" category="inline-link-macro-rx"></block>5. <block ref="be2beedcb69f615620e4bf9c36993284" category="inline-link-macro-rx"></block>6. <block ref="efc24e3d8a219aaeeb5dcecbfa497d39" category="inline-link-macro-rx"></block>7. <block ref="81fe8d975b4f1e1ceaca22fe19fe514c" category="inline-link-macro-rx"></block>8. <block ref="24e6cf2132a8624ae1f3b177b5469a34" category="inline-link-macro-rx"></block>9 <block ref="10c3b79f14da9117782ab8add481025d" category="inline-link-macro-rx"></block>10 <block ref="4a5068173036ea25c7d31c838482553b" category="inline-link-macro-rx"></block>11. <block ref="7d077dc458a495a8caefb0eb601dc290" category="inline-link-macro-rx"></block></block>
  <block id="20158bb78f4b62c5e646a7763772f852" category="inline-link-macro">下一步：配置管理交换机。</block>
  <block id="ddfc45fa9347680f47cad64db6d49062" category="paragraph"><block ref="ddfc45fa9347680f47cad64db6d49062" category="inline-link-macro-rx"></block></block>
  <block id="482f4dddd14a12f4ece48aef54de313c" category="summary">Red Hat OpenShift 容器平台将开发和 IT 运营统一到一个平台上，以便在内部和混合云基础架构中一致地构建，部署和管理应用程序。Red Hat OpenShift 基于开源创新和行业标准构建，其中包括 Kubernetes 和 Red Hat Enterprise Linux CoreOS ，这是全球领先的企业级 Linux 版本，专为基于容器的工作负载而设计。</block>
  <block id="e68e90b5707502c9f2fc1361ac071b3d" category="paragraph">Red Hat OpenShift 容器平台将开发和 IT 运营统一到一个平台上，以便在内部和混合云基础架构中一致地构建，部署和管理应用程序。Red Hat OpenShift 基于开源创新和行业标准构建，其中包括 Kubernetes 和 Red Hat Enterprise Linux CoreOS ，这是全球领先的企业级 Linux 版本，专为基于容器的工作负载而设计。OpenShift 是 Cloud 原生计算基金会（ CNCF ）认证 Kubernetes 计划的一部分，可为容器工作负载提供可移植性和互操作性。</block>
  <block id="b2b7104a419a54dcb2763bddc6a0a47c" category="section-title">Red Hat OpenShift 提供以下功能：</block>
  <block id="d383250f88949df87bac7768b697ccb6" category="list-text">* 自助式配置。 * 开发人员可以使用最常用的工具快速轻松地按需创建应用程序，同时操作人员可以完全控制整个环境。</block>
  <block id="df45d857ed72e8e5ed370c6fdfd1e305" category="list-text">* 永久性存储。 * 通过为永久性存储提供支持， OpenShift 容器平台允许您同时运行有状态应用程序和云本机无状态应用程序。</block>
  <block id="29ee9790b817110f2303080d5b295946" category="list-text">* 持续集成和持续开发（ CI/CD ）。 * 此源代码平台可大规模管理构建和部署映像。</block>
  <block id="a0f0997dded25d9aa9c767f29c17c249" category="list-text">* 开源标准。 * 除了其他开源技术之外，这些标准还采用了用于容器编排的开放式容器计划（ OCI ）和 Kubernetes 。您不受限于特定供应商的技术或业务路线图。</block>
  <block id="7dc3d12ecda66373091607ba18ef4434" category="list-text">* CI/CD 管道。 * OpenShift 可为 CI/CD 管道提供即装即用的支持，以便开发团队可以自动执行应用程序交付流程的每个步骤，并确保对应用程序代码或配置所做的每一项更改都能得到执行。</block>
  <block id="95e4c6a8e27cc92068d97ef795477714" category="list-text">* 基于角色的访问控制（ Role-Based Access Control ， RBAC ）。 * 此功能可对团队和用户进行跟踪，以帮助组织大型开发人员组。</block>
  <block id="d565eddf8e07af916519ec07f8712204" category="list-text">* 自动化构建和部署。 * OpenShift 允许开发人员选择构建容器化应用程序，或者让平台使用应用程序源代码甚至二进制文件构建容器。然后，该平台会根据为这些应用程序定义的特征在整个基础架构中自动部署这些应用程序。例如，为了使资源符合第三方许可证的要求，应分配的资源数量以及应部署在基础架构上的什么位置。</block>
  <block id="4fe0bdfd5a2ae34ba1a93860fd91d2fd" category="list-text">* 环境一致。 * OpenShift 可确保为开发人员配置的环境以及应用程序在整个生命周期内从操作系统到库，运行时版本（例如 Java runtime ）， 甚至是正在使用的应用程序运行时（例如 Tomcat ），以便消除因环境不一致而产生的风险。</block>
  <block id="64f8957eb1a3bb6a1e9ebd391e76925a" category="list-text">* 配置管理。 * 配置和敏感数据管理内置在平台中，可确保为应用程序提供一致且与环境无关的应用程序配置，无论使用哪种技术构建应用程序或部署哪种环境。</block>
  <block id="5efb308bdb8052c1aa3fe8333f459fe5" category="list-text">* 应用程序日志和指标。 * 快速反馈是应用程序开发的一个重要方面。OpenShift 集成式监控和日志管理可为开发人员提供即时指标，使他们能够研究应用程序在发生变更时的行为方式，并能够在应用程序生命周期中尽早修复问题。</block>
  <block id="16c321ec2744799f0acef92ce84d06ca" category="paragraph"><block ref="16c321ec2744799f0acef92ce84d06ca" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fe8c2f8039053e077a0ca678496b72aa" category="section-title">Red Hat OpenShift 的部署方法</block>
  <block id="ec55e5ffb2376dada4b2eb066c1fd9fd" category="section-title">Red Hat OpenShift 的 IPI 安装</block>
  <block id="a91a379e59fea6610134af1efa3dfe87" category="paragraph">OpenShift 的安装程序配置基础架构（ IPI ）部署涉及以下高级步骤：</block>
  <block id="d1befa03c79ca0b84ecc488dea96bc68" category="inline-link">网站</block>
  <block id="a07879007b1202a533ff3ef18bc0d197" category="list-text">访问 Red Hat OpenShift<block ref="36af4d1b80928d398e137421c95a1013" category="inline-link-rx"></block> 并使用您的 SSO 凭据登录。</block>
  <block id="cc66c30273a9be504b88d3239e65516b" category="paragraph"><block ref="cc66c30273a9be504b88d3239e65516b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="86b43786316d35748685c4f7abc4145b" category="paragraph"><block ref="86b43786316d35748685c4f7abc4145b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7586dbf5f3ac1a66383f6c201a17a341" category="inline-link">安装说明</block>
  <block id="c9a2aa5906b4dad4a982c3a9c51d31f3" category="list-text">按照<block ref="04512308a1627dc41acfeed51ef16ba3" category="inline-link-rx"></block> 由 Red Hat 提供，用于部署到您选择的环境。</block>
  <block id="220887aee59c37fa79fc366cba7dad4e" category="section-title">经过 NetApp 验证的 OpenShift 部署</block>
  <block id="aa9095c5ba77e3549672e5c4fae1fedc" category="inline-link-macro">裸机上的 OpenShift</block>
  <block id="fecab6277bc7322982f127ce83dee308" category="list-text"><block ref="fecab6277bc7322982f127ce83dee308" category="inline-link-macro-rx"></block></block>
  <block id="5f6a8f3661e7319797d4eab6792350e6" category="inline-link-macro">基于 Red Hat OpenStack 平台的 OpenShift</block>
  <block id="ff3de63c4917b45d20525986d5b29962" category="list-text"><block ref="ff3de63c4917b45d20525986d5b29962" category="inline-link-macro-rx"></block></block>
  <block id="f88eb30a75027b557910958c7306cb4e" category="inline-link-macro">基于 Red Hat 虚拟化的 OpenShift</block>
  <block id="92fb5c16a9f212d49c0c5fb48ebc9144" category="list-text"><block ref="92fb5c16a9f212d49c0c5fb48ebc9144" category="inline-link-macro-rx"></block></block>
  <block id="2772c11e552b243e60a34490c4174ff9" category="inline-link-macro">VMware vSphere 上的 OpenShift</block>
  <block id="83fc4dbe543f82a9e50bc1bd4c74fb70" category="list-text"><block ref="83fc4dbe543f82a9e50bc1bd4c74fb70" category="inline-link-macro-rx"></block></block>
  <block id="943dbb8750d636d9918af903ac016c0e" category="summary">NetApp 拥有多个存储平台，这些平台符合 Trident Storage Orchestrator 的要求，可为 Red Hat OpenShift 上部署的应用程序配置存储。</block>
  <block id="0186ffea1bd2c7ff6458a3a619d01ea2" category="paragraph"><block ref="0186ffea1bd2c7ff6458a3a619d01ea2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3cc957c67b836ddc993931d8d2253032" category="list-text">NetApp Cloud Volumes Service （ AWS/GCP ）和 Azure NetApp Files 可在云中提供基于文件的存储。</block>
  <block id="faad8e024544c328d584c28118fb4102" category="list-text">NetApp Element 存储系统可在高度可扩展的环境中提供基于块的（ iSCSI ）用例。</block>
  <block id="85a240011ba49404bf70606e37c41c96" category="paragraph">以下页面介绍了有关已在 Red Hat OpenShift with NetApp 解决方案中验证的 NetApp 存储系统的追加信息：</block>
  <block id="3a374bfcdd912b5071f863e2b9f0eefa" category="list-text"><block ref="3a374bfcdd912b5071f863e2b9f0eefa" category="inline-link-macro-rx"></block></block>
  <block id="70b44fe3d3567f3f2a5ccd67ff8ac852" category="list-text"><block ref="70b44fe3d3567f3f2a5ccd67ff8ac852" category="inline-link-macro-rx"></block></block>
  <block id="eeaa3ef2816f113fd1978b036eefc4a4" category="doc">解决方案验证和使用情形：采用 NetApp 的 Red Hat OpenShift</block>
  <block id="9e766e668731b912ea84be747f0d6b4b" category="paragraph">此页面上提供的示例包括解决方案验证以及采用 NetApp 的 Red Hat OpenShift 的用例。</block>
  <block id="6f60a8e202d6d4f297230695ffa9c1a6" category="inline-link-macro">部署具有永久性存储的 Jenkins CI/CD 管道</block>
  <block id="20b131c747c2ab8c4c617107b04dfe76" category="list-text"><block ref="20b131c747c2ab8c4c617107b04dfe76" category="inline-link-macro-rx"></block></block>
  <block id="e85b6a5686bf01c916e1c3b442e8db44" category="inline-link-macro">在使用 NetApp 的 Red Hat OpenShift 上配置多租户</block>
  <block id="29a3155f4e27ac61f0e6d1e00866c981" category="list-text"><block ref="29a3155f4e27ac61f0e6d1e00866c981" category="inline-link-macro-rx"></block></block>
  <block id="781cf19a6329e508987456098cde8c79" category="list-text"><block ref="781cf19a6329e508987456098cde8c79" category="inline-link-macro-rx"></block></block>
  <block id="ddb9608f0f25d56d00a539a63333efa0" category="list-text"><block ref="ddb9608f0f25d56d00a539a63333efa0" category="inline-link-macro-rx"></block></block>
  <block id="0b41ceffa053ec5210732b1f8d0f0c5d" category="inline-link-macro">接下来：视频和演示。</block>
  <block id="232b127190e97018e70ee81d28e36117" category="paragraph"><block ref="232b127190e97018e70ee81d28e36117" category="inline-link-macro-rx"></block></block>
  <block id="c2a3687ae710da50d95280842188ecd4" category="doc">架构概述：基于 RHV 的适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="517f508014fa14f34642cc2631d76863" category="paragraph">下表列出了实施解决方案所需的最低硬件组件数量。解决方案的特定实施中使用的硬件组件可能会因客户要求而异。</block>
  <block id="a84a78fb1a854c49f618f5d9ae875a62" category="cell">存储流程编排</block>
  <block id="7cd95c816f8a04ff858a857e3e5a484d" category="cell">20.04</block>
  <block id="d7ac58512991ed45f3abecbfbb9cddf1" category="cell">容器编排</block>
  <block id="8fe4242fabb37751de02881817070ead" category="cell">4.4.6</block>
  <block id="19313309566be9e56c89bd9f73e23c64" category="inline-link-macro">接下来：设计注意事项：基于 RHV 的适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="cfdecc3231f4515a6225ee747c1cef95" category="paragraph"><block ref="cfdecc3231f4515a6225ee747c1cef95" category="inline-link-macro-rx"></block></block>
  <block id="4d7f7f28f54da25e8386b6cfbcbda861" category="summary">此解决方案的当前部署已通过两个严格的验证流程，这两个流程均使用 Google 云团队提供的工具。</block>
  <block id="9fc7e91d0cfa196bee652e5b3ab8991b" category="doc">解决方案验证</block>
  <block id="1bee22d71e0dda5649b05ac8074a7994" category="paragraph">此解决方案的当前部署已通过两个严格的验证流程，这两个流程均使用 Google 云团队提供的工具。这些验证包括以下部分测试：</block>
  <block id="9ce4b6121b9169f9a57e370bc063e43a" category="list-text">合作伙伴验证 Anthos 就绪平台：</block>
  <block id="b490ae83108f0a60d2d464f37aed5b33" category="list-text">确认裸机平台服务上的所有 Anthos 均已安装并运行。</block>
  <block id="132b0b7921ef1247c2db8a06ebb68fa0" category="list-text">将裸机集群上的物理 Anthos 从四个辅助节点缩减为三个，然后再缩减为四个。</block>
  <block id="5d80842c7c4c549fffd35b71989523c6" category="list-text">创建并删除自定义命名空间。</block>
  <block id="bd4534ff45d2d6e71d15c4133153f039" category="list-text">创建一个 nginx Web 服务器部署，通过增加副本数量来扩展该部署。</block>
  <block id="afdfab7c351a97a8f8e386c8c07eead0" category="list-text">为 nginx 应用程序创建一个入口，并通过 curling the index.html 验证连接。</block>
  <block id="e093cbb18731dc9a857dff2a5a9c5b0d" category="list-text">成功清理所有测试套件活动并将集群恢复为预测试状态。</block>
  <block id="6c91e0c5fc919c3ee9adc7909c3331b7" category="list-text">合作伙伴验证 Anthos 就绪存储：</block>
  <block id="5aacb1c1d8ec3130c7bfc91d7678968c" category="list-text">创建具有永久性卷声明的部署。</block>
  <block id="1f8b95da3c7377c3616667d09bfbcf96" category="list-text">使用 NetApp Trident 从 NetApp ONTAP 配置和附加请求的永久性卷。</block>
  <block id="5fac429b30f448d8149f93a83869e87f" category="list-text">验证永久性卷的断开和重新连接功能。</block>
  <block id="5a1ed343aaa28f6d14745016b7c06cf7" category="list-text">验证从节点上的其他 Pod 对永久性卷进行多连接只读访问。</block>
  <block id="7c14d31217a85dc93c1505315501ef24" category="list-text">验证脱机卷大小调整操作。</block>
  <block id="b6ab6f9d0bc58a79facf618d65db092c" category="list-text">验证此永久性卷是否在集群扩展操作期间不受影响。</block>
  <block id="4b774a4819b60036fd16dae7b1618fe7" category="inline-link-macro">接下来：总结。</block>
  <block id="fa789d11a4863ab2ab7271940566105a" category="paragraph"><block ref="fa789d11a4863ab2ab7271940566105a" category="inline-link-macro-rx"></block></block>
  <block id="a9855af2d0c52d27f8a8334002200ac6" category="summary">借助 Anthos ，企业可以扩展其环境，以整合多个用户集群并在各个团队之间隔离工作负载。一个管理集群最多可支持 20 个用户集群，每个用户集群最多可支持 250 个节点和 7500 个 Pod 。要开始部署用户集群，请按照此页面上列出的步骤进行操作。</block>
  <block id="360bf64996801ab0e29ea4f900d09db3" category="doc">部署用户集群</block>
  <block id="4e0d5525777965af3de06f030172ad6a" category="paragraph">借助 Anthos ，企业可以扩展其环境，以整合多个用户集群并在各个团队之间隔离工作负载。一个管理集群最多可支持 20 个用户集群，每个用户集群最多可支持 250 个节点和 7500 个 Pod 。</block>
  <block id="b78574f0a57d92a6733b0c646940de4d" category="paragraph">要为您的部署配置用户集群，请完成以下步骤：</block>
  <block id="ad55eb5082f854d5bd9fa4d406c25399" category="list-text">在部署 anthos-admin 工作站时，会创建一个名为 `user-cluster.yaml` 的文件，该文件可用于为正在运行的工作负载部署多个额外的用户集群。首先，使用要部署的每个集群的新名称复制此默认文件。</block>
  <block id="99e12005ebd1f89f98c6062900f7ee4c" category="list-text">编辑 `anthos-cluster01-config.yaml` 文件，使其特定于要部署的环境。</block>
  <block id="16b5acc2a128ce8856d83762a01ada8a" category="list-text">与先前使用的 `admin-config.yaml` 类似，大多数变量都已填充，或者它们会引用管理集群来获取部署所需的信息。第一部分确认了有关所部署的 Anthos 版本及其所部署的 vCenter 实例的信息。</block>
  <block id="bb802bf46d200838e038fa575a1b748b" category="list-text">您必须填写下面的网络连接部分，然后选择使用的是静态模式还是 DHCP 模式。如果使用的是静态地址，则必须创建一个 IP 块文件以提供类似于管理集群配置的地址。</block>
  <block id="64455df6e6b2d7fd0c738a5666c0d4a8" category="admonition">任何时候在部署中使用静态 IP 时， hostConfig 部分下的项都是全局的。这包括集群的静态 IP 以及用于 seesaw 负载平衡器的静态 IP ，这些 IP 稍后会进行配置。</block>
  <block id="e5ba3dba39a2afe98901951ab6695a3a" category="list-text">接下来，填写负载平衡器部分。根据所部署的负载平衡器的类型，此设置可能会有所不同。</block>
  <block id="299c8aff8484c768376160676886ba35" category="paragraph">seesaw 示例：</block>
  <block id="1c7cfa518f13c0bbf64e482a77cbf3ea" category="list-text">对于 seesaw 负载平衡器，您必须创建一个额外的外部文件来为负载平衡器提供静态 IP 信息。创建此配置部分中引用的文件 `anthos-cluster01-seesaw-block.yaml` 。</block>
  <block id="274032ff671bbab7b1a2c028447113d6" category="paragraph">F5 BigIP 示例：</block>
  <block id="e9fc1124d38dedff4aa36a7634236d1f" category="list-text">最后一节介绍了集群要部署的节点的资源，包括创建一个节点池，供我们稍后用于动态扩展。本节还会提供服务帐户密钥，以便在部署 GKE之后 向其注册集群。</block>
  <block id="5afbdc8e7d790d028cfc8bf6259b6a7f" category="list-text">对配置文件的编辑完成后， NetApp 建议检查该文件的语法和间距是否正确。您可以检查刚刚创建的配置文件。此命令会引用管理集群创建的 `kubeconfig` 文件。</block>
  <block id="c528cee970b204fda8aab778fed50771" category="list-text">如果您使用的是 seesaw 负载平衡器，则需要在部署用户集群之前创建它。</block>
  <block id="f441ed3f912097b8e634a2f8a2961e46" category="list-text">创建用户集群。与管理集群一样，可以跳过其他验证来加快此过程，因为我们已经在上一步中运行了检查。</block>
  <block id="5f779dc050bbfddd99194c9a2a5bf957" category="list-text">部署集群时，它会在本地目录中创建 kubeconfig 文件。此文件可用于使用 kubectl 检查集群状态，或者用于使用 gkectl 运行诊断。</block>
  <block id="d2ad39f5b919ae0868c494465fb648ca" category="inline-link-macro">下一步：使用 GKEE 控制台启用对集群的访问。</block>
  <block id="c7b4bb4238c13d5cf0b5329352ebc930" category="paragraph"><block ref="c7b4bb4238c13d5cf0b5329352ebc930" category="inline-link-macro-rx"></block></block>
  <block id="3a724344bfc1b086a678d66814f20dd7" category="summary">本节介绍了与 Jenkins 部署持续集成和持续交付或部署管道以验证解决方案运行的步骤。</block>
  <block id="b830a759b7bbee23da50f11979fb8f27" category="doc">部署采用永久性存储的 Jenkins CI/CD 管道：采用 NetApp 的 Red Hat OpenShift</block>
  <block id="ff587ce314d6f90660779e9d75cafe53" category="paragraph">本节介绍了与 Jenkins 部署持续集成 / 持续交付或部署（ CI/CD ）管道以验证解决方案运行的步骤。</block>
  <block id="9eb8af4dd2c3557a24b914601b6ae465" category="section-title">创建 Jenkins 部署所需的资源</block>
  <block id="93b3852e5c67975dd33b1769b24a4a85" category="paragraph">要创建部署 Jenkins 应用程序所需的资源，请完成以下步骤：</block>
  <block id="9fd493573e73cb0e5e55e97306249596" category="list-text">创建一个名为 Jenkins 的新项目。</block>
  <block id="5690195262fb589b6021733b4a5a4432" category="paragraph"><block ref="5690195262fb589b6021733b4a5a4432" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f9db9f308c8ed7f5d0ed0851d8d605cb" category="paragraph"><block ref="f9db9f308c8ed7f5d0ed0851d8d605cb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9272f40a21ca3dad814c4e3886b40776" category="section-title">使用永久性存储部署 Jenkins</block>
  <block id="939a7b51bfb262627185af768c3c1024" category="paragraph">要使用永久性存储部署 Jenkins ，请完成以下步骤：</block>
  <block id="bc5512ef7a17a0cfb58cb1ede30a6137" category="paragraph"><block ref="bc5512ef7a17a0cfb58cb1ede30a6137" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6baa4bd25992de2d17278ade0d3090ad" category="list-text">单击 `实例化模板` 。</block>
  <block id="949381804bf1e16ca04ba9ac5fabc6a4" category="paragraph"><block ref="949381804bf1e16ca04ba9ac5fabc6a4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c7b4a6da6ab2733552de61d67b38a39e" category="list-text">默认情况下，系统会填充 Jenkins 应用程序的详细信息。根据您的要求，修改参数并单击创建。此过程将创建支持 OpenShift 上的 Jenkins 所需的所有资源。</block>
  <block id="cc9a211dac876290bd6ed039cf1afdcf" category="paragraph"><block ref="cc9a211dac876290bd6ed039cf1afdcf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ca5123aca3b8ab987c23cfd5cb21032a" category="list-text">Jenkins POD 大约需要 10 – 12 分钟才能进入就绪状态。</block>
  <block id="274c247b7612630006e3d87d5ed5d46f" category="paragraph"><block ref="274c247b7612630006e3d87d5ed5d46f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2ebe03c4d2a2f4464e9ec333d6fd7c17" category="paragraph"><block ref="2ebe03c4d2a2f4464e9ec333d6fd7c17" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8dd2ba6f6eb648ee9a5d6e1b6aa96114" category="paragraph"><block ref="8dd2ba6f6eb648ee9a5d6e1b6aa96114" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9359288fc248319fa9acef62e4686d1c" category="paragraph"><block ref="9359288fc248319fa9acef62e4686d1c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="00713894c16827219fd5ab50c5fc3794" category="paragraph"><block ref="00713894c16827219fd5ab50c5fc3794" category="inline-image-macro-rx" type="image"></block></block>
  <block id="24f99be3c7033ab08c3baec1cdf32702" category="paragraph"><block ref="24f99be3c7033ab08c3baec1cdf32702" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3b6fc174a3fad5c396413febe1d4ba50" category="list-text">在创建项目页面上，输入所选名称，选择管道，然后单击确定。</block>
  <block id="b8c544e8c9e5bd5fa17dce065fd5dcc9" category="paragraph"><block ref="b8c544e8c9e5bd5fa17dce065fd5dcc9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dedbf53849830e8b275b69e9b98159ce" category="paragraph"><block ref="dedbf53849830e8b275b69e9b98159ce" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1d11f84feef51515ab9fdaafb3f02f3a" category="paragraph"><block ref="1d11f84feef51515ab9fdaafb3f02f3a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="43d9a2fc4d89e82c869a466778811ab3" category="paragraph"><block ref="43d9a2fc4d89e82c869a466778811ab3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5b4607f0045c21c9cb9dd8e5d307084c" category="doc">验证结果：基于 RHV 的适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="ebc74aef542db9954cf3349a2ed08ee5" category="paragraph">本节介绍了与 Jenkins 部署持续集成 / 持续交付或部署（ CI/CD ）管道以验证解决方案运行的步骤。</block>
  <block id="1bd6751de02df8b8b9a1646eeba5bdc7" category="section-title">创建 Jenkins 部署所需的资源</block>
  <block id="8d256abce3dbdfed83e337956e42f60f" category="list-text">在此示例中，我们使用永久性存储部署了 Jenkins 。要支持 Jenkins 构建，请创建 PVC 。导航到 "Storage"&gt;"Persistent Volume Claim " ，然后单击 "Create Persistent Volume Claim " 。选择已创建的存储类，确保永久性卷声明名称是 Jenkins ，选择适当的大小和访问模式，然后单击创建。</block>
  <block id="195edba29556a83682cbbc70a12968ba" category="list-text">在左上角，将角色从管理员更改为开发人员。单击 +Add ，然后从目录中选择。在 Filter by Keyword 栏中，搜索 Jenkins 。选择 Jenkins Service ， With Persistent Storage 。</block>
  <block id="cd827569871bd4e40b298906bdfb94aa" category="list-text">单击实例化模板。</block>
  <block id="b0c9d6d734167ce5ac1af8fbef87b87d" category="list-text">默认情况下，系统会填充 Jenkins 应用程序的详细信息。根据需要修改参数，然后单击创建。此过程将创建支持 OpenShift 上的 Jenkins 所需的所有资源。</block>
  <block id="da33835bff86a0b0c8be6c67dcf677bb" category="list-text">实例化 Pod 后，导航到 "Networking" （网络） &gt;"routes" （路由）。要打开 Jenkins 网页，请单击为 Jenkins 路由提供的 URL 。</block>
  <block id="bf3780766542bdc550e653fbf7b51308" category="list-text">由于在创建 Jenkins 应用程序时使用了 OpenShift OAuth ，因此请单击使用 OpenShift 登录。</block>
  <block id="ab98a9e5af3df97dd6add935a893d18c" category="list-text">授权 Jenkins 服务帐户访问 OpenShift 用户。</block>
  <block id="5868daca0cc31eea19acd3bef2e10818" category="list-text">此时将显示 Jenkins 欢迎页面。由于我们使用的是 Maven 内部版本，因此请先完成 Maven 安装。导航到 Manage Jenkins &gt; Global Tool Configuration ，然后在 Maven 子标题中单击 Add Maven 。输入您选择的名称，并确保已选中自动安装选项。单击保存。</block>
  <block id="b5cb1eb238134bc0c4951588862b14b1" category="list-text">现在，您可以创建一个管道来演示 CI/CD 工作流。在主页上，单击左侧菜单中的创建新作业或新建项目。</block>
  <block id="67e1ac5374583b26252d5757b90021d0" category="list-text">选择管道选项卡。从试用样本管道下拉菜单中，选择 Github + Maven 。代码将自动填充。单击保存。</block>
  <block id="0191ad3b841f8db403ec4749d571eb4b" category="list-text">单击 Build now ，在准备，构建和测试阶段触发开发。完成整个构建过程并显示构建结果可能需要几分钟的时间。</block>
  <block id="b04b355d9fc6a2e23965649ebdd0aa31" category="list-text">只要代码发生任何更改，就可以重新构建管道来修补新版本的软件，从而实现持续集成和持续交付。单击 Recent Changes 以跟踪与先前版本相比的更改。</block>
  <block id="082a70f8f2ccd9fdf4474c600056deaf" category="inline-link-macro">接下来：生产部署的最佳实践</block>
  <block id="79dd64306c2604e5111df2701f6ffba3" category="paragraph"><block ref="79dd64306c2604e5111df2701f6ffba3" category="inline-link-macro-rx"></block></block>
  <block id="f913f3c8b073438c23eb36c9cf8237ac" category="section-title">创建虚拟机</block>
  <block id="71dd19ec5a595517b0b57750ad1a6568" category="paragraph">VM 是有状态部署，需要使用卷来托管操作系统和数据。使用 CNV 时，由于 VM 作为 Pod 运行，因此 VM 由 NetApp ONTAP 上通过 Trident 托管的 PV 提供支持。这些卷作为磁盘连接并存储整个文件系统，包括虚拟机的启动源。</block>
  <block id="e01cb9126428f7417091e42362dcb6cb" category="image-alt">创建 VM 架构</block>
  <block id="51f24796fdd958a7a4ab9fb9a1086c9a" category="paragraph">要在 OpenShift 集群上创建虚拟机，请完成以下步骤：</block>
  <block id="9b992d4161d9af3e77a9c4e35f9d7652" category="image-alt">为 VM 创建启动源</block>
  <block id="fe46fcd3bb2eadd55896f6a4e9af5b05" category="list-text">如果选定操作系统已配置启动源，则可以跳过上一步。</block>
  <block id="c119644bb97e69cc47555d48ff5ead07" category="list-text">如果要自定义虚拟机，请单击 "Customize Virtual Machine" 并修改所需的参数。</block>
  <block id="8b2c60e63de0927cca5bd9401cdd4647" category="list-text">单击 Create Virtual Machine 以创建虚拟机；此操作将在后台生成相应的 Pod 。</block>
  <block id="ba7734e1db4ae3c0a25330f01ced054d" category="paragraph">从 URL 或注册表为模板或操作系统配置启动源时，它会在 `OpenShift-virtual-os-images` 项目中创建一个 PVC ，并将 KVM 子映像下载到 PVC 。您必须确保模板 PVC 具有足够的已配置空间，以容纳相应操作系统的 KVM 子映像。然后，使用任何项目中的相应模板创建这些 PVC 时，这些 PVC 会克隆并作为根磁盘附加到虚拟机中。</block>
  <block id="2188a3011c4ccaa5490bcaca14a05579" category="inline-link-macro">接下来：工作流： VM 实时迁移。</block>
  <block id="a997d50e238a53b066824f32046c10ab" category="paragraph"><block ref="a997d50e238a53b066824f32046c10ab" category="inline-link-macro-rx"></block></block>
  <block id="4d4480c77d84881f85763c51fb0a0ebb" category="doc">视频和演示：采用 NetApp 的 Red Hat OpenShift</block>
  <block id="f64f81d4393ab1fc9545c35c8eb9f74d" category="paragraph">以下视频演示了本文档中介绍的一些功能：</block>
  <block id="fc718e7b1efece55a52bd2c182f65da5" category="inline-link-macro">视频：工作负载迁移—采用 NetApp 的 Red Hat OpenShift</block>
  <block id="762a14964ee1713d320b8beefaf55b17" category="inline-link-macro">视频：安装 OpenShift 虚拟化—采用 NetApp 的 Red Hat OpenShift</block>
  <block id="5ac70ba9dc4ef90bfb3a829919c8044d" category="list-text"><block ref="5ac70ba9dc4ef90bfb3a829919c8044d" category="inline-link-macro-rx"></block></block>
  <block id="aad993afc3c78a3a38ae471fa2ae1060" category="inline-link-macro">视频：使用 OpenShift 虚拟化部署虚拟机—采用 NetApp 的 Red Hat OpenShift</block>
  <block id="1c9dc04aa9e0e0aaf52a33af61d8d630" category="list-text"><block ref="1c9dc04aa9e0e0aaf52a33af61d8d630" category="inline-link-macro-rx"></block></block>
  <block id="051525dd6e814133d477a1812a4164c2" category="inline-link-macro">视频：基于 Red Hat 虚拟化部署的适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="817cc3ec794caf508075034f1fa54315" category="list-text"><block ref="817cc3ec794caf508075034f1fa54315" category="inline-link-macro-rx"></block></block>
  <block id="4bb047f8c530785002e490ef17fa725e" category="doc">从何处查找追加信息</block>
  <block id="c12328be87e4d79e79b3db80bd6ff03f" category="list-text">NetApp ONTAP 文档中心</block>
  <block id="0b98c026ddf9e406d439373d2dab724b" category="inline-link"><block ref="0b98c026ddf9e406d439373d2dab724b" category="inline-link-rx"></block></block>
  <block id="63d46b0efa85a58196faf13e5aa20d7d" category="paragraph"><block ref="63d46b0efa85a58196faf13e5aa20d7d" category="inline-link-rx"></block></block>
  <block id="712cab3570d004ba67a47d7ff8df208b" category="inline-link"><block ref="712cab3570d004ba67a47d7ff8df208b" category="inline-link-rx"></block></block>
  <block id="a5526c10a9a8b42f6aab833b33a57eaf" category="paragraph"><block ref="a5526c10a9a8b42f6aab833b33a57eaf" category="inline-link-rx"></block></block>
  <block id="a3df86c144842761b9bcb0b540edbefe" category="inline-link"><block ref="a3df86c144842761b9bcb0b540edbefe" category="inline-link-rx"></block></block>
  <block id="8d3014f959efddffaea116898b063218" category="paragraph"><block ref="8d3014f959efddffaea116898b063218" category="inline-link-rx"></block></block>
  <block id="92637d8d513510f7c1f5bfac6e1cce9b" category="paragraph">要启用 Trident 与 NetApp ONTAP 存储系统的集成，您必须创建一个后端，以便与存储系统进行通信。</block>
  <block id="3ca99f0e09d3b1ea097a113dd72c9317" category="list-text">下载的安装归档中提供了 `sample-input` folder 层次结构中的示例后端文件。对于提供 iSCSI 的 NetApp ONTAP 系统，将 `backend-ontap-san.json` 文件复制到您的工作目录并编辑该文件。</block>
  <block id="fa346018b8222fdc195d0b73016cf5a0" category="list-text">编辑此文件中的 managementLIF ， dataLIF ， SVM ，用户名和密码值。</block>
  <block id="38ace6c607c7db13cd4cc319f9b0225b" category="list-text">安装此后端文件后，运行以下命令以创建第一个后端。</block>
  <block id="8e0bd613649f232fe1f718134898ea21" category="paragraph">要启用 Trident 与 NetApp ONTAP 存储系统的集成，您必须创建一个后端，以便与存储系统进行通信。</block>
  <block id="89441fb0b16307f49090afa2b479b9fa" category="list-text">下载的安装归档中提供了 `sample-input` folder 层次结构中的示例后端文件。对于提供 NFS 的 NetApp ONTAP 系统，将 `backend-ontap-nas.json` 文件复制到您的工作目录并编辑该文件。</block>
  <block id="87f6ff6bf74013e1dfe6df49a1cf1986" category="list-text">编辑 backendName ， managementLIF ， dataLIF ， SVM ，用户名， 和密码值。</block>
  <block id="00d6947fd6a153943286b857dcd0f339" category="admonition">此文件中定义了一个名为 `FSType` 的可选字段。可以在 NFS 后端删除此行。</block>
  <block id="1ecf015926dcdc7d080c1bb9fa42ab0d" category="summary">本节介绍成功部署 NetApp HCI Anthos 解决方案所需的设计注意事项。</block>
  <block id="648bdcd0b9a0f83d7b068dbed3c21c07" category="doc">设计注意事项</block>
  <block id="65d0fae8ae235a743426bf2c46548ef7" category="section-title">端口标识</block>
  <block id="8c68f4ecf5103cc7b7641eada0a94ed1" category="paragraph">NetApp HCI 由专用于计算或存储的 NetApp H 系列节点组成。这两种节点配置都具有两个 1GbE 端口（端口 A 和 B ）和两个 10/25 GbE 端口（端口 C 和 D ）板载。计算节点在第一个夹层插槽中额外提供了 10/25GbE 端口（端口 E 和 F ）。每个节点还具有一个额外的带外管理端口，该端口支持智能平台管理接口（ Intelligent Platform Management Interface ， IPMI ）功能。下图显示了 H410C 节点背面的每个端口。</block>
  <block id="84b41b59996eb84fb366029a5296cd61" category="image-alt">NetApp HCI 网络端口（计算节点）。</block>
  <block id="89aab52ad861d98ea079646e1d4cf794" category="paragraph">采用 Anthos 解决方案的 NetApp HCI 使用两个数据交换机提供 25 Gbps 的主数据连接。它还使用两个额外的管理交换机，这些交换机以 1 Gbps 的速度提供连接，用于存储节点的带内管理以及 IPMI 功能的带外管理。</block>
  <block id="65d2bad460909d6d0862aa8e9f7796a5" category="section-title">为存储节点布线</block>
  <block id="2b7d94503890709e5f905b31df6493cd" category="paragraph">每个存储节点上的管理端口 A 和 B 必须处于活动状态，才能运行 NDE ，配置 NetApp HCI 集群，并在部署解决方案后为 Element 提供管理可访问性。应将两个 25 Gbps 端口（ C 和 D ）连接到每个数据交换机，以提供物理容错能力。交换机端口应配置为多机箱链路聚合（ MLAG ），节点上的数据端口应配置为 LACP 并启用巨型帧支持。在将节点安装到数据中心后，可以使用每个节点上的 IPMI 端口来远程管理该节点。使用 IPMI 时，可以使用基于 Web 浏览器的控制台访问节点，以便运行初始安装，运行诊断以及根据需要重新启动或关闭节点。</block>
  <block id="d5a565483b4457b14a7ff6e94e60c290" category="section-title">为计算节点布线</block>
  <block id="d9d555eab1458657cbec0c412ea1a58a" category="paragraph">计算节点上的 25 Gbps 端口通过缆线连接在一起，其中一个板载端口（ C ）连接到一个数据交换机，另一个端口从 PCI 插槽（ E ）连接到另一个交换机，以提供物理容错能力。应将这些端口配置为支持巨型帧。在环境中部署 VMware vSphere 后，节点的连接由 VDS 管理。在将节点安装到数据中心后， IPMI 端口还可用于远程管理该节点。通过 IPMI ，可以通过基于 Web 浏览器的控制台访问节点以运行诊断，并在必要时重新启动或关闭节点。下图提供了网络布线参考。</block>
  <block id="514273af7d7b4cb67096968b4bd9d03f" category="image-alt">网络布线参考图。</block>
  <block id="10c21408660b49ddd4af5704b38a49d4" category="cell">已使用 VLAN</block>
  <block id="42e77cca5c7bb0c907378b378aeaf63b" category="cell">带外管理</block>
  <block id="5c3dd123f7fd594c12bca93b6f1f338d" category="cell">HCI 节点管理</block>
  <block id="9778fc107af7846384678e20bf8845f5" category="cell">带内管理</block>
  <block id="5201d3ac29cd0c4e03dffa0e14d74527" category="cell">管理 HCI 节点和基础架构虚拟子系统</block>
  <block id="6a29a6f28b9ebd6de11293c69ac2febf" category="cell">NetApp Element 的存储网络</block>
  <block id="e6cb65c308ac2b889ad3f3a09e876ed9" category="cell">VMotion 网络</block>
  <block id="bdcb002b8dc635b8f96596dad29d5bc3" category="cell">VMware vMotion 的网络</block>
  <block id="098b6a6a40909b7515c95e0645f74d72" category="cell">虚拟子系统的网络</block>
  <block id="4bab98f4a8ec3b688343ce60ff1cf3be" category="paragraph">在 NetApp HCI 解决方案上部署 Anthos 之前，应具备以下基础架构：</block>
  <block id="897cf5b14fe46906199e34f213bff35c" category="list-text">一种 DHCP 服务器，可为带内管理网络和 VM 网络提供地址。DHCP 池必须足够大，以便在初始部署中至少支持 10 个 VM ，并应根据需要进行扩展。</block>
  <block id="bd95b64336efd8df612ffea2956d14f3" category="list-text">带内管理网络和 VM 网络的出站 Internet 连接。</block>
  <block id="c2ffe02d76c4f089648f1647b43e4ee5" category="section-title">最佳实践</block>
  <block id="de43efc3f8ef8b350bcc6dc8eaf9cef3" category="paragraph">本文档中的详细信息介绍了如何在 VMware 上部署符合最低部署要求的 Anthos 。在生产环境中部署解决方案之前，您应使用此最佳实践部分中提供的信息。</block>
  <block id="a7ebe739f3b60230a6cd87653f5ea96a" category="section-title">安装另一个 seesaw 负载平衡器</block>
  <block id="a65f61a60328c70e03700297f19c4674" category="paragraph">在生产环境中，最好避免环境中出现单点故障。在此验证中，为管理员和部署的每个用户集群分配了一个 seesaw 捆绑负载平衡器。虽然这对于简单的验证来说很好，但如果与集群的控制平面 VIP 通信中断，则可能会使集群无法访问或无法从管理工作站或 Google Cloud 控制台进行管理。通过部署 HA seesaw 负载平衡器，可以确保不会发生中断。本文档未详细介绍启用此功能的设置过程和其他要求，但可以找到完整说明 <block ref="7256ad83ebc3f0bad4c4fa5d9caf4345" category="inline-link-macro-rx"></block>。</block>
  <block id="4d30c9ed38315667ee3984698464ca39" category="section-title">安装另一个 F5 BIG-IP Virtual Edition 设备</block>
  <block id="b5c11f31f03ea61acbddeab9712bdaa6" category="paragraph">在生产环境中，最好避免环境中出现单点故障。在此验证中，我们使用了一个 F5 BIG-IP Virtual Edition 负载平衡器设备来验证与控制平面的连接以及 VMware 集群上 Anthos 的传入 VIP 地址。尽管这对于简单的验证来说是很好的，但与集群的控制平面 VIP 通信中断可能会使集群无法访问或无法从管理工作站或 Google Cloud 控制台进行管理。F5 BIG-IP 虚拟版支持基于应用程序的 HA ，以确保不会发生中断。尽管简要介绍了此问题描述，但本文档并未详细介绍此功能的设置过程。但是， NetApp 建议在将适用于 Anthos 解决方案的 NetApp HCI 部署到生产环境之前进一步调查此功能。</block>
  <block id="f08d988b955b2df4dafd1237970bb9e5" category="section-title">启用 VMware vSphere DRS 并配置反关联性规则</block>
  <block id="686c1e14748ee6385188fd423e4edd17" category="paragraph">VMware vSphere 提供了一项功能，可确保集群中的任何一个节点都不会对虚拟子系统可用的物理资源运行不足。可以在至少包含三个 ESXi 节点的 vSphere 集群上配置分布式资源计划程序（ DRS ）。本部署指南中介绍的 NetApp HCI 最低配置包含两个计算节点，无法使用此功能。由于这一限制，我们还被迫为部署的 VMware 集群上的 Anthos 禁用反关联性规则。</block>
  <block id="72db02613f3158d2fc47e1d871e160c5" category="paragraph">反关联性规则可确保特定用户集群的所有主集群或所有员工都在不同节点上运行，这样单节点故障就不会禁用整个用户集群或其托管的 Pod 。NetApp HCI 系统可轻松快速地进行扩展，此验证中所述的最低部署具有两个开放式机箱插槽，用于立即扩展 HCI 410C 节点。因此， NetApp 建议在将解决方案部署到生产环境中之前，先将更多计算节点添加到空机箱插槽中，并使用反关联性规则启用 DRS 。</block>
  <block id="84f1e6a1906144cf3139f9ca02a543c7" category="section-title">使用 SnapMirror 远程复制数据以实现灾难恢复</block>
  <block id="629c72469efa65320fe449aaacaabb3c" category="paragraph">NetApp Element 存储系统可以使用 NetApp SnapMirror 技术将存储卷复制到运行 NetApp ONTAP 系统的系统，包括 AFF ， FAS 和 Cloud Volumes ONTAP 。您可以设置定期计划的 SnapMirror 操作，以便在发生灾难时备份 VMware 数据存储库并从远程站点进行还原。此外，还可以使用 SnapMirror 备份或迁移 Trident 配置的永久性卷，并将其重新连接到部署在其他环境和云中的 Kubernetes 集群。</block>
  <block id="2d52bcd2e896c32a66c9fe10fed38e0f" category="inline-link-macro">接下来：硬件和软件要求</block>
  <block id="db8ee08a34926a6ef8d8fa8795023f7a" category="paragraph"><block ref="db8ee08a34926a6ef8d8fa8795023f7a" category="inline-link-macro-rx"></block></block>
  <block id="6e74f3d1cee88143c4e00728575b50c9" category="doc">8. 配置工作节点以在 RHV 上运行存储服务：适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="4bdafa526bb904319351f47be1708946" category="list-text">要从 Element 系统访问存储，每个工作节点都必须具有可用的 iSCSI 并作为服务运行。要创建可启用和启动 iscisd 服务的计算机配置，请登录到 OCP Web 控制台并导航到 Compute &gt; Machine Config ，然后单击 Create Machine Config 。粘贴 YAML 文件，然后单击创建。</block>
  <block id="d9781dfc816ea6d1fe2320422758a87a" category="paragraph"><block ref="d9781dfc816ea6d1fe2320422758a87a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3a9ae37769f7af0b96e373604c3ed730" category="list-text">创建配置后，将此配置应用于工作节点并重新加载它们大约需要 20 – 30 分钟。使用 `oc get MCP` 验证是否应用了计算机配置，并确保已更新员工的计算机配置池。您还可以登录到工作节点以确认 iscsid 服务正在运行。</block>
  <block id="d0a22be3126beac4c5bd0060f5991af0" category="inline-link-macro">下一页： 9 。下载并安装 NetApp Trident</block>
  <block id="9f29b60da921da98503cfef3e106b42d" category="paragraph"><block ref="9f29b60da921da98503cfef3e106b42d" category="inline-link-macro-rx"></block></block>
  <block id="254f642527b45bc260048e30704edb39" category="doc">Configuration</block>
  <block id="44b1200b793638d4a3aebd1bee591e12" category="paragraph">对于任何多租户解决方案，任何用户都无法访问比所需更多的集群资源。因此，要在多租户配置中配置的整个资源集将在集群管理员，存储管理员和处理每个项目的开发人员之间进行划分。</block>
  <block id="1ceba10f8902735a18e8c3bb3e8a3052" category="paragraph">下表概括了不同用户要执行的不同任务：</block>
  <block id="bbbabdbe1b262f75d99d62880b953be1" category="cell">Role</block>
  <block id="ef615563c8e8ea902c7fcac3cd2c4246" category="cell">任务</block>
  <block id="064dceba374668ef0734be5f9e182682" category="cell">* 集群管理 *</block>
  <block id="e033ab3bea3b8a20afb5852070df0203" category="cell">为 storage-admin 创建 ClusterRoles 和 RoleBindings</block>
  <block id="293d08622718634a8518b6fcc6376617" category="cell">为分配对特定项目的访问权限的开发人员创建角色和角色绑定</block>
  <block id="3e97e469255cd3686174c371f50961f9" category="cell">[ 可选 ] 配置项目以在特定节点上计划 Pod</block>
  <block id="93ffd2b1215bc47cc78b020f89e922ef" category="cell">* 存储管理 *</block>
  <block id="043ab42cdcbdacc4691c26ee52ed8ccd" category="cell">在 NetApp ONTAP 上创建 SVM</block>
  <block id="be09a24f118a66330a40633e9d5ebfca" category="cell">创建 Trident 后端</block>
  <block id="55995e8c220e05b3e75252cccf5752be" category="cell">创建 StorageClasses</block>
  <block id="2a5eb41b2d7fd04d01836f89ab790852" category="cell">创建存储 ResourceQuotas</block>
  <block id="4e00898ecc4e6640083ccff8d85fbe87" category="cell">* 开发人员 *</block>
  <block id="4edd9914739183e9cb724a222261a01f" category="inline-link-macro">下一步：前提条件。</block>
  <block id="8013a47a037d25fa6d9671120cfc1ee5" category="paragraph"><block ref="8013a47a037d25fa6d9671120cfc1ee5" category="inline-link-macro-rx"></block></block>
  <block id="0c958347c10490462b7fb2b244bbac36" category="summary">本节介绍 NetApp HCI 和 Anthos 解决方案的硬件和软件要求。</block>
  <block id="630e5660de352108f57840f67c4ce73b" category="doc">硬件和软件要求</block>
  <block id="47dee50ad0138b8f5ca70e40e86e6c04" category="section-title">硬件要求</block>
  <block id="7c3c57cf1883f9ab905fbf951b93b41e" category="cell">Mellanox NS2010</block>
  <block id="7ddb33edf227a18eb76201fcb9e2c9db" category="section-title">软件要求</block>
  <block id="2fd7b7ab504fb9f83b6ceac3888d031b" category="cell">1.8P1</block>
  <block id="52c0661db7fac20a6e9e58fa6c50c8c8" category="cell">VMware 上的 Anthos</block>
  <block id="e472faa89007ceb11817045da364405f" category="cell">F5 BIG-IP 虚拟版</block>
  <block id="1c72ef556b5fc669fadc14ae383d37cf" category="cell">负载平衡</block>
  <block id="5db193ac3980d8db07588b173f3fa8ae" category="cell">15.0.1</block>
  <block id="bfd15aa26ba0ced782240c4a8b7e517e" category="cell">存储管理</block>
  <block id="59a703e67b19adc4bdb1373c25fbca94" category="inline-link-macro">下一步：部署步骤。</block>
  <block id="b0ce5203dff757ecee48c9ed920d366d" category="paragraph"><block ref="b0ce5203dff757ecee48c9ed920d366d" category="inline-link-macro-rx"></block></block>
  <block id="2290a6c7c8943dac5f44a36f39b477c8" category="doc">4. 在 DNS 中注册 API/Apps ： NetApp HCI for Red Hat OpenShift on RHV</block>
  <block id="09244fc6dd029add83ac4d9da493f7f2" category="paragraph">要在 DNS 中注册 API/Apps ，请完成以下步骤：</block>
  <block id="c45a02d2aa86f8e0bdc38a37389cdd77" category="list-text">从 OCP 所使用的网络中预留三个静态 IP 地址： OpenShift 容器平台 REST API 的第一个 IP 地址，指向通配符应用程序入口的第二个 IP 地址以及内部 DNS 服务的第三个 IP 地址。前两个 IP 需要在 DNS 服务器中输入一个条目。</block>
  <block id="70c457c34ededf592881cd5e09afd592" category="inline-link-macro">使用自定义安装文件进行 OpenShift 部署</block>
  <block id="55d3754d01d040a912fa840bf00cd9d7" category="admonition">在 OpenShift 安装期间， IPI 创建的 `mMachineNetwork` 子网的默认值为 `10.0.0.0/16` 。如果要用于集群管理网络的 IP 不在此范围内，则在部署集群之前，您可能需要自定义部署并编辑这些值。有关详细信息，请参见一节 <block ref="89c20f7c7a3226f5decac3238a50b8f7" category="inline-link-macro-rx"></block>。</block>
  <block id="b6e21edec1e5cd57928e879e7993f7f9" category="list-text">使用指向预留 IP 的格式 `api.&lt;OpenShift-cluster-name&gt;.&lt; 基域 &gt;` 配置 API 域名。</block>
  <block id="4987848dac2ff342f5572099c6d7b1bd" category="paragraph"><block ref="4987848dac2ff342f5572099c6d7b1bd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="426b1ef488f8216ddbaef78742500ec3" category="list-text">使用指向预留 IP 的格式 ` * 。 apps.&lt;OpenShift-cluster-name&gt;.&lt; 基本域 &gt;` 配置通配符应用程序入口域名。</block>
  <block id="f371c0e67975058a510335d9523d2848" category="paragraph"><block ref="f371c0e67975058a510335d9523d2848" category="inline-image-macro-rx" type="image"></block></block>
  <block id="14249f25161de40cf9577d0c4a4ff9e3" category="inline-link-macro">下一步： 5.生成并添加 SSH 私钥</block>
  <block id="4a4ca5a15177c3eee2f4e84d2679ac21" category="paragraph"><block ref="4a4ca5a15177c3eee2f4e84d2679ac21" category="inline-link-macro-rx"></block></block>
  <block id="bcfd002b04efbba8e8f8e8d0f746441c" category="summary">采用 Anthos 的 NetApp HCI 是一款经验证的最佳混合云架构，用于以可靠的方式部署内部 Google Kubernetes Engine （ GKEE ）环境。本 NetApp 经验证的架构参考文档既可作为设计指南，也可作为解决方案上的 Anthos NetApp HCI 的部署验证。</block>
  <block id="770385d638d6bca4b54580347bc759ba" category="doc">NVA-1141 ：采用 Anthos 的 NetApp HCI ，设计和部署</block>
  <block id="2d8a034988c7b0dc79105c9d12424a06" category="paragraph">Alan Cowles</block>
  <block id="aa2e87641ae5b813ba815b562abfc0db" category="paragraph">本文档中介绍的计划解决方案经过精心设计和全面测试，可最大限度地降低部署风险并加快上市速度。</block>
  <block id="ade2647f8cf331c1d7107ae86f6c57ae" category="paragraph">本文档面向 NetApp 和合作伙伴解决方案工程师以及客户战略决策者。本节介绍了用于确定支持经验证的工作负载所需的特定设备，布线和配置的架构设计注意事项。</block>
  <block id="c997713f9eea52bf2a7b656527432b42" category="paragraph">采用 Anthos 的 NetApp HCI 是一款经验证的最佳混合云架构，用于以可靠的方式部署内部 Google Kubernetes Engine （ GKEE ）环境。本 NetApp 经验证的架构参考文档既可作为设计指南，也可作为解决方案上的 Anthos NetApp HCI 的部署验证。本文档所述的架构已通过 NetApp 和 Google 的主题专家的验证，可以在您自己的企业数据中心环境中运行 NetApp HCI 上的 Anthos 。</block>
  <block id="4e49529077fc9cd97c2fbd245a80a44d" category="paragraph">NetApp HCI 是业内首款领先的分解式混合云基础架构，可提供超融合解决方案的广泛认可优势。其优势包括降低了 TCO ，简化了虚拟化工作负载的采集，部署和管理，同时还允许企业客户根据需要独立扩展计算和存储资源。采用 Anthos 的 NetApp HCI 为部署由内部 Anthos GKEE 管理的容器化工作负载提供了内部类似云的体验。此解决方案可提供简化的管理，详细的指标和一系列其他功能，从而可以轻松移动现场和云中部署的工作负载。</block>
  <block id="98f770b0af18ca763421bac22b4b6805" category="section-title">功能</block>
  <block id="c6be1088ad19224f455d8f0b9793fef2" category="paragraph">借助 NetApp HCI for Anthos ，您可以在内部数据中心部署完全集成的生产级 Anthos GKEE 环境，从而利用以下功能：</block>
  <block id="e3850742090eb0f826a7f17061004c20" category="list-text">基于 Intel 的服务器计算节点，包括适用于 Nvidia GPU 的选项</block>
  <block id="5d07e4ea9e356f2b02fe723d35ecc204" category="list-text">VMware vSphere 6.7U3</block>
  <block id="93d6e58e3d4a1b004414e3ac19c1b943" category="list-text">Google Cloud 和内部环境中的 Anthos GKE</block>
  <block id="c5c8d9c668cd1680fdf755eeddfb511a" category="list-text">在 Google Cloud 或 NetApp HCI 上部署 Anthos GKEE 实例</block>
  <block id="7a91b23616ba7750bf3f7916547c9d99" category="paragraph">经验证的 NetApp 架构计划为客户提供针对特定工作负载和使用情形的参考配置和规模估算指导。</block>
  <block id="8940c7b60f346a5df3442ddd1cde9fa6" category="inline-link-macro">接下来：解决方案组件</block>
  <block id="163bf816c53b369557ba7b7f153737aa" category="paragraph"><block ref="163bf816c53b369557ba7b7f153737aa" category="inline-link-macro-rx"></block></block>
  <block id="2c65eb4e4300c763b9d8ffcdc45660fc" category="paragraph">要安装 OpenShift 虚拟化，请完成以下步骤：</block>
  <block id="bb761e1ed8ef4412cddb399e81488f83" category="list-text">使用 cluster-admin 访问权限登录到 Red Hat OpenShift 裸机集群。</block>
  <block id="3f4b86cf3e8a535371d3937bd126d789" category="list-text">从 "Perspective" 下拉列表中选择 "Administrator" 。</block>
  <block id="78146e6a44100deebbe276c19e6c437a" category="image-alt">OpenShift 操作员中心</block>
  <block id="016a229c1180d24870be44f7391c5678" category="list-text">选择 OpenShift 虚拟化磁贴，然后单击安装。</block>
  <block id="fe87c9ebb6d1db5af643c2101dd83c2d" category="image-alt">OpenShift 虚拟化操作员图块</block>
  <block id="d2770f20a312c7d906cf3d8a97d335a2" category="list-text">在 Install Operator 屏幕上，保留所有默认参数，然后单击 Install 。</block>
  <block id="66b5ae84d6c0a470bb131b7aeb63f734" category="image-alt">OpenShift 虚拟化操作员详细信息</block>
  <block id="5f27d84a5a158e75ab7ac4543ca7c1be" category="image-alt">OpenShift 虚拟化操作员安装</block>
  <block id="49598c5badb95e31a9894d5dc277f301" category="list-text">安装操作员后，单击 Create HyperConverged 。</block>
  <block id="f63ea68253a91a92e8afb2e42bf0fb36" category="image-alt">OpenShift 虚拟化操作员—创建超融合</block>
  <block id="0e4308133099865567bc6a19f0abcb88" category="list-text">在 Create HyperConverged 屏幕上，单击 Create ，接受所有默认参数。此步骤将开始安装 OpenShift 虚拟化。</block>
  <block id="c57b56755457ec355801b1e17915fc47" category="image-alt">OpenShift 虚拟化操作员—超融合详细信息</block>
  <block id="ee0ffac6ee8f4e224a044d95e68aa30d" category="list-text">在 OpenShift-cnv 命名空间中的所有 Pod 都变为 running 状态且 OpenShift 虚拟化操作员处于 succeeded 状态后，操作员便可随时使用了。现在，可以在 OpenShift 集群上创建 VM 。</block>
  <block id="423e88e20ace3dbca3f9d5bd3b109cef" category="image-alt">OpenShift 虚拟化操作员安装完成</block>
  <block id="46af5002087f682df1feb9b3339d1f68" category="inline-link-macro">接下来：工作流：创建 VM 。</block>
  <block id="066b9e10038ca1d47643166f151f910c" category="paragraph"><block ref="066b9e10038ca1d47643166f151f910c" category="inline-link-macro-rx"></block></block>
  <block id="04f2ef045c54eb1aaf8fbfa74a1d7ae9" category="summary">Mellanox SN2010 交换机可为计算和存储节点的数据平面提供 25 Gbps 的连接。要配置交换机以提供与基础架构的数据连接，请完成此页面上列出的步骤。</block>
  <block id="68fa5f304b9dcdad8d1aaad395c9664c" category="doc">2. 配置数据交换机</block>
  <block id="eb1b554dbf6977438889d6b26cc42740" category="paragraph">Mellanox SN2010 交换机可为计算和存储节点的数据平面提供 25 Gbps 的连接。要配置交换机以提供与基础架构的数据连接，请完成以下步骤：</block>
  <block id="bdf75471a434482359e25f816def9452" category="section-title">创建 MLAG 集群以提供容错功能</block>
  <block id="4999e31584710269390e23f55b6e5091" category="list-text">为这两台交换机创建唯一的 MLAG 域名并分配一个 MLAG 虚拟 IP （ VIP ）。此 IP 用于在两个交换机之间发送保持活动状态的检测信号消息。在域中的每个交换机上运行以下命令：</block>
  <block id="2ef22d7e971148bf7b142f3d47510c26" category="admonition">用于 MLAG VIP 的 IP 必须与交换机管理网络（ mgmt0 ）位于同一子网中。</block>
  <block id="cfeb963de17a8fcc7c4a951241acef69" category="admonition">使用的 MAC 地址可以是任何单播 MAC 地址，并且必须在 MLAG 域中的两个交换机上设置为相同的值。</block>
  <block id="70070702b4ddaf4aec601095864db20c" category="section-title">配置端口以连接到存储和计算主机</block>
  <block id="15afbdca1e55c7da31701f949ef43e16" category="list-text">创建 VLAN 。</block>
  <block id="dc1fb909b9631bb9704442bbd047d229" category="list-text">在端口 eth1/9-10 上创建混合 VLAN 端口，以便为 NetApp HCI 计算节点标记适当的 VLAN 。</block>
  <block id="18cf928af7742a846358ba01fe84b9fa" category="list-text">修改每个端口的生成树设置。</block>
  <block id="93277bc7e5b98865f2e975f1004c1481" category="list-text">在端口 eth1/5-8 上创建 MLAG 接口和混合 VLAN 端口，以便在交换机之间分布连接并为 NetApp HCI 存储节点标记适当的 VLAN 。</block>
  <block id="c3cae76635dc817383c5d47bdb8063af" category="admonition">此外，本节中的配置还必须在 MLAG 域中的第二台交换机上运行。NetApp 建议更新每个端口的说明，以反映在另一交换机上布线和配置的设备端口。</block>
  <block id="918f43ad605f0b6445103f86ff807531" category="section-title">为交换机创建上行链路端口</block>
  <block id="858ef8e690c0b016e3b46e2ddc331a45" category="inline-link-macro">接下来：使用 NetApp 部署引擎部署 NetApp HCI</block>
  <block id="b8e48501e569fef42b0a13d2bd526968" category="paragraph"><block ref="b8e48501e569fef42b0a13d2bd526968" category="inline-link-macro-rx"></block></block>
  <block id="929e5eecc18daa4072a3df2c4143070b" category="doc">6. 在 RHV 上安装 OpenShift 容器平台：适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="a68346fe18a6f944c4170fa46dc76d2b" category="paragraph">要安装 OpenShift 容器平台，请完成以下步骤：</block>
  <block id="55375b88bc659dfc3df5ffbb7b288e27" category="list-text">为 OpenShift 安装创建一个目录，并将下载的文件传输到该目录。从 tar 归档中提取 OpenShift 安装程序文件。</block>
  <block id="d7537bf1437e7329f05ff13e371d33fe" category="admonition">安装程序会在用于安装集群的目录中创建多个文件。即使集群已启动，安装程序和安装程序创建的文件也必须保留。</block>
  <block id="beffcc6f95287bd2de67a41fc09216cd" category="admonition">您先前下载的二进制文件（例如 `OpenShift-install` 或 `oc` ）可以复制到用户路径中的目录（例如 ` /usr/local/bin` ），以便于运行。</block>
  <block id="9a9c95a1b2c4d04aa7184563141f7b3f" category="list-text">运行 `OpenShift-install create cluster` 命令创建集群，并响应安装程序提示。传递 SSH 公有密钥，从平台中选择 ovirt ，提供 RHV 基础架构详细信息，并在安装程序提示符处提供三个预留的 IP 地址和下载的拉取密钥。提供所有输入后，安装程序将创建一个具有临时 Kubernetes 控制面板的启动计算机并对其进行配置，然后使用生产 Kubernetes 控制面板创建和配置主 VM 。主节点上的控制面板用于创建和配置工作 VM 。</block>
  <block id="1a52baa402eda6a568e69b7057231b3c" category="paragraph">整个集群启动并运行大约需要 30 – 45 分钟。</block>
  <block id="90e026a8d7bbd86d3ffcb749b8350064" category="list-text">集群部署完成后，将显示访问 OpenShift 集群的说明，包括指向其 Web 控制台的链接以及 kubeadmin 用户的凭据。请务必记下这些详细信息。</block>
  <block id="93993d1ccdb46fe3c2e3f73da77f0414" category="list-text">登录到 RHV Manager 并观察与 OCP 集群相关的 VM 是否已启动且正在运行。</block>
  <block id="724e2a39100d340b9f095be1b06e39d5" category="paragraph"><block ref="724e2a39100d340b9f095be1b06e39d5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="835d24b271ded9eccebfa18466a4fe84" category="inline-link-macro">下一步： 7.访问控制台 /Web 控制台</block>
  <block id="099e1357183d54a545712d6a437e97eb" category="paragraph"><block ref="099e1357183d54a545712d6a437e97eb" category="inline-link-macro-rx"></block></block>
  <block id="2ef589e77f47f2362fd15593da8a3bf9" category="summary">从何处查找有关 NVA-1141 的追加信息</block>
  <block id="c0b960f3a3eb1240f55af46b111a6646" category="doc">从何处查找追加信息： NetApp HCI with Anthos</block>
  <block id="5b22c600eab6ccbaf29f65bb63fc6b13" category="inline-link">Anthos 文档</block>
  <block id="1cf478e488da540b38d6b4aa97719213" category="list-text"><block ref="1cf478e488da540b38d6b4aa97719213" category="inline-link-rx"></block></block>
  <block id="db4aaedfce5fc172481c94a8deef1f30" category="list-text"><block ref="db4aaedfce5fc172481c94a8deef1f30" category="inline-link-rx"></block></block>
  <block id="e62748eb1045c42ff87c8c08ff090373" category="inline-link">《 NetApp NDE 1.8 部署指南》</block>
  <block id="f3e7fcd6724714b811542dccbb99c2f2" category="list-text"><block ref="f3e7fcd6724714b811542dccbb99c2f2" category="inline-link-rx"></block></block>
  <block id="082c3c3d9ac57d9f370a6997fccfc024" category="inline-link">VMware vSphere 6.7U3 文档</block>
  <block id="d27658bc61c351f39b585d49ca62fd56" category="list-text"><block ref="d27658bc61c351f39b585d49ca62fd56" category="inline-link-rx"></block></block>
  <block id="794e2c57a6ad3ab9ab60f9854fa225cd" category="inline-link">F5 Big-IP 文档</block>
  <block id="4884f414a69ffe51ef296ca73685dc73" category="list-text"><block ref="4884f414a69ffe51ef296ca73685dc73" category="inline-link-rx"></block></block>
  <block id="50465c19760e2a5476479f1f4a464119" category="summary">采用 NetApp 技术的裸机 Anthos 提供了一个强大的平台，可通过自定义已部署的基础架构来高效运行基于容器的工作负载。</block>
  <block id="6f8b794f3246b0c1e1780bb4d4d5dc53" category="doc">结论</block>
  <block id="f887fad1ad196c388701d07189696570" category="paragraph">采用 NetApp 技术的裸机 Anthos 提供了一个强大的平台，可通过自定义已部署的基础架构来高效运行基于容器的工作负载。客户可以使用自己选择的服务器基础架构和受支持的操作系统，甚至可以在现有基础架构中部署解决方案。通过集成 NetApp ONTAP 和 NetApp Trident ，这些环境的功能和灵活性得到了显著提高，通过高效配置和管理容器的永久性存储来支持有状态应用程序工作负载。通过将 Google Cloud 的潜力扩展到由 NetApp 提供支持的数据中心，客户可以利用一个完全受支持，高度可用，易于扩展且完全受管的 Kubernetes 解决方案来开发和生产其应用程序工作负载。</block>
  <block id="40a15e6807b47955e7b7a9b1bd330b01" category="inline-link-macro">下一步：从何处查找追加信息。</block>
  <block id="3ae752a47170fdc4f7ff5ed3204c1fb5" category="paragraph"><block ref="3ae752a47170fdc4f7ff5ed3204c1fb5" category="inline-link-macro-rx"></block></block>
  <block id="86c2cc4630e619e2c08c32f54e844297" category="section-title">在多个集群上创建资源</block>
  <block id="24800112d59462f8ea9ff03f5dd456a7" category="image-alt">创建资源</block>
  <block id="8c1be16a890d9f315f75b94de9a9c126" category="summary">Trident 是一种用于容器的存储编排程序。借助 Trident ，微服务和容器化应用程序可以利用完整的 NetApp 存储系统产品组合提供的企业级存储服务来实现永久性存储挂载。根据应用程序的要求， Trident 会为 NetApp AFF 和 FAS 系统等基于 ONTAP 的产品以及 NetApp SolidFire ® 和 NetApp HCI 等 Element 存储系统动态配置存储。</block>
  <block id="2d09294b42420cd4ec4ee6f4f5fe2548" category="doc">11. 安装和配置 NetApp Trident 存储配置程序</block>
  <block id="e77af5a9ff1422e30f57e41819791dd4" category="paragraph">Trident 是一种用于容器的存储编排程序。借助 Trident ，微服务和容器化应用程序可以利用完整的 NetApp 存储系统产品组合提供的企业级存储服务来实现永久性存储挂载。根据应用程序的要求， Trident 会为 NetApp AFF 和 FAS 系统等基于 ONTAP 的产品以及 NetApp SolidFire 和 NetApp HCI 等 Element 存储系统动态配置存储。</block>
  <block id="8e4a243a1252a25e6583b95c6e56cff2" category="admonition">默认情况下， NetApp HCI 平台使用 NetApp Element 存储进行部署。在本指南中，我们专门为此系统配置后端。此外，客户还可以选择连接到远程 ONTAP 存储系统，或者将 ONTAP Select 软件定义的存储系统部署为 VMware vSphere 中的虚拟设备，以提供其他 NFS 和 iSCSI 服务。这些附加存储后端的配置不在本指南的讨论范围之内。</block>
  <block id="f2860f5966d3506cc1d9c2ed041f0ab6" category="list-text">编辑端点行上的用户，密码和 MVIP 值。</block>
  <block id="7699f0e1921a6b621f568cf8ba14ac76" category="list-text">编辑 SVIP 值。</block>
  <block id="00d32067724b7191cb5b0ffaf99cc3fe" category="list-text">运行 `kubectl` 命令以创建存储类。</block>
  <block id="253011590d99d20bc43b070d77781932" category="list-text">创建存储类后，您必须创建第一个永久性卷请求（ PVC ）。此外，还可以在 sample-inputs 中使用一个示例 `pva-basic 。 yaml` file 来执行此操作。必须对此文件进行的唯一编辑是确保 storageClassName 字段与刚刚创建的字段匹配。</block>
  <block id="36a95a56c85c06906ce9ed37f6c88bbe" category="list-text">发出 `kubectl` 命令创建 PVC 。根据所创建的后备卷的大小，创建可能需要一些时间，因此您可以在该过程完成后进行观察。</block>
  <block id="75f1c7bdbc35d301ce7424052a19e01e" category="inline-link-macro">接下来：参考视频。</block>
  <block id="3188e8e63300f512e1446d153fdbac46" category="paragraph"><block ref="3188e8e63300f512e1446d153fdbac46" category="inline-link-macro-rx"></block></block>
  <block id="b87830531fc72a34adc6da95e6b4d0d4" category="summary">管理工作站是部署在 NetApp HCI 环境中的 vSphere VM ，它预安装了在 VMware 解决方案上管理 Anthos 所需的所有工具。按照本节中的说明部署 Anthos 管理工作站。</block>
  <block id="93b91008f950ca8f87cf7fc1da74a689" category="doc">7. 部署 Anthos 管理工作站</block>
  <block id="68381f64b830e2a67c522b1bfdd958bb" category="paragraph">要部署 Anthos 管理工作站，请完成以下步骤：</block>
  <block id="e79c058ab43e988af8c09b793e7f6325" category="list-text">将 gkeadm 二进制文件下载到工作目录中</block>
  <block id="b576a7ede46517c9ebfa6dddfe35b10d" category="list-text">使用 gkeadm 工具创建管理工作站配置文件。</block>
  <block id="291430a94084690240d4e533dd3edcd2" category="list-text">此时将创建两个文件： `credential 。 yaml` 和 `admin-ws-config.yaml` 。填写每个文件。</block>
  <block id="b95e9b500cb8c0094c41d2d58a3f6b38" category="list-text">credential 。 yaml 包含您的 VMware vCenter 服务器用户名和密码。</block>
  <block id="cbada736d88365e6f7bbc5fd483e704e" category="list-text">admin-ws-config.yaml 包含有关您的 vSphere 环境以及管理工作站 VM 的物理和网络选项的其他信息。</block>
  <block id="b5353a641325df26c0333e2315000699" category="list-text">创建管理工作站。</block>
  <block id="153ab3f1d1ce2659c4380ec4518928c0" category="inline-link-macro">接下来：部署管理员和第一个用户集群</block>
  <block id="05242e8335fb097b00c47802a37c049b" category="paragraph"><block ref="05242e8335fb097b00c47802a37c049b" category="inline-link-macro-rx"></block></block>
  <block id="67a3852a946bc539243cc1e5f8982d03" category="section-title">裸机上的 OpenShift 可提供以下功能：</block>
  <block id="096e71732ebcd1f43544a7159596cb17" category="paragraph"><block ref="096e71732ebcd1f43544a7159596cb17" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bb18861dc375756df1a31b7ed3c03f38" category="paragraph"><block ref="bb18861dc375756df1a31b7ed3c03f38" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c5a0639a1bbc3695e0ebaf4c3affe363" category="paragraph">采用 NetApp 解决方案的 Red Hat OpenShift 可通过使用虚拟局域网（ VLAN ）在逻辑上隔离不同用途的网络流量。</block>
  <block id="3d9073c9e531118eb3aff0f20647c86f" category="cell">管理裸机节点和 IPMI</block>
  <block id="44a94f76baabd05ab407f76c946326c8" category="cell">集群可用后用于 OpenShift 服务的网络</block>
  <block id="846325c36d78e7582d8bfcab277ca67a" category="cell">通过 IPI 以 PXE 启动和安装裸机节点的网络</block>
  <block id="a0b51c46eb47620cab7d691f6a9f4bdb" category="summary">在 Anthos 解决方案中部署的所有 Kubernetes 集群都是从您刚刚创建的 Anthos 管理工作站进行部署的。用户使用 SSH ，上一步创建的公有密钥以及 VM 部署结束时提供的 IP 地址登录到管理工作站。</block>
  <block id="34035def745431d8264ddf810bbe566a" category="doc">8. 部署管理集群</block>
  <block id="b6521cd7f5fbdbaf7f03e84cff36030d" category="paragraph">在 Anthos 解决方案中部署的所有 Kubernetes 集群都是从您刚刚创建的 Anthos 管理工作站进行部署的。用户使用 SSH ，上一步创建的公有密钥以及 VM 部署结束时提供的 IP 地址登录到管理工作站。管理集群控制 Anthos 环境中的所有操作。必须先部署管理集群，然后才能根据特定工作负载需求部署各个用户集群。</block>
  <block id="312f6cb9256d1a14d3ff57dcac671cdf" category="admonition">部署使用静态 IP 地址的集群的具体步骤如下 <block ref="2366d9c9ba722a1b11cf7a4de7deeb93" category="inline-link-macro-rx"></block>有关使用 DHCP 的环境的步骤，请参见 <block ref="40a725afbef576a05a929e904013d0ad" category="inline-link-macro-rx"></block>。在本指南中，我们使用第二组说明来简化部署。</block>
  <block id="662e7322426daf8815938c3aad68740d" category="paragraph">要部署管理集群，请完成以下步骤：</block>
  <block id="039e3ee0b7d3f3554fbe24d9c7b7624e" category="list-text">使用部署结束时提示的 SSH 命令登录到管理工作站。成功进行身份验证后，您可以列出主目录中的文件，这些文件用于稍后创建管理集群和其他集群。此目录还包括复制的 vCenter 证书以及在先前步骤中创建的 Anthos 的访问密钥。</block>
  <block id="e2f0f1185447ab6964d8b4ad17da9436" category="list-text">使用 scp 从部署管理工作站的工作站复制您的 Anthos 帐户的其余密钥。</block>
  <block id="8d07307981cfcc022902a54905c8dd47" category="list-text">编辑 admin-cluster.yaml 文件，使其特定于已部署的环境。文件非常大，因此我们将按章节来解决。</block>
  <block id="2cb7a7f2e7f7e13eaa1d0a3ba3b5587f" category="list-text">默认情况下，大多数信息都已根据 gkeadm 用于部署管理工作站的配置进行填充。第一部分确认了有关所部署的 Anthos 版本及其所部署的 vCenter 实例的信息。此外，还可以为 Kubernetes 对象数据定义本地数据磁盘（ VMDK ）。</block>
  <block id="7a2f0fc1ac014ee641f0627085819109" category="list-text">填写下面的网络部分，然后选择使用的是静态模式还是 DHCP 模式。如果使用的是静态地址，则必须根据上述链接的说明创建一个 IP 块文件，并将其添加到配置文件中。</block>
  <block id="df49dfdb2da18c68b013e8091e807be5" category="admonition">如果在部署中使用静态 IP ，则主机配置下的项为全局项。其中包括集群的静态 IP 或用于 seesaw 负载平衡器的静态 IP ，这些 IP 稍后会进行配置。</block>
  <block id="66733b514f4665e2a3826dd49132b21a" category="list-text">接下来，填写负载平衡器部分。根据所部署的负载平衡器的类型，此设置可能会有所不同。</block>
  <block id="3dd432e577eb362ddf5aa33340dc8d2e" category="paragraph">seesaw 示例：</block>
  <block id="a8ffb9fdf2ba065ecc1a78a7cf41e731" category="list-text">对于 seesaw 负载平衡器，您必须创建一个额外的外部文件来为负载平衡器提供静态 IP 信息。创建文件 `admin-seesaw-block.yaml` ，此文件已在本配置部分中引用。</block>
  <block id="f88c43f1090a4cf3684624ba931a4644" category="list-text">管理员配置文件的最后一部分包含可根据特定部署环境进行调整的其他选项。其中包括，如果在少于三个 ESXi 服务器上部署 Anthos ，则启用反关联性组。您还可以配置代理，专用 Docker 注册表以及与 Stackdriver 和 Google Cloud 的连接以进行审核。</block>
  <block id="1589d8bf6750c8e5b26c348619039bc4" category="admonition">本文档中详细介绍的部署是一种最低配置，用于验证，需要禁用反关联性规则。NetApp 建议在生产部署中将此选项设置为 true 。</block>
  <block id="38af01f4bb6fda71906b4f089068a5b3" category="admonition">默认情况下， VMware 上的 Anthos 使用预先存在的 Google 拥有的容器映像注册表，无需进行其他设置。如果您选择使用私有 Docker 注册表进行部署，则必须根据找到的说明单独配置该注册表<block ref="9478e44cd7488a4a45cb0bfcf3907189" category="inline-link-rx"></block>。本部署指南不会介绍此步骤。</block>
  <block id="f4351d79f9490c8a651a7e94eb8f8708" category="list-text">对 admin-cluster.yaml 文件的编辑完成后，请务必检查语法和间距是否正确。</block>
  <block id="c0bf34c33422392872dfe8c462dffe19" category="list-text">通过配置检查并解决任何已确定的问题后，您可以暂存集群部署。由于我们已经检查了配置文件的验证，因此可以通过传递 ` – -skip-validation-all` 标志来跳过这些步骤。</block>
  <block id="1d00af70e033d4974ad034f78dbf6820" category="list-text">如果您使用的是 seesaw 负载平衡器，则必须在部署集群本身之前创建一个负载平衡器（否则，请跳过此步骤）。</block>
  <block id="5ee09a1eff0649f2939e861775891cfc" category="list-text">现在，您可以建立管理集群。可以使用 `gkectl create` admin 命令来完成此操作，该命令可以使用 ` – -skip-validation-all` 标志来加快部署速度。</block>
  <block id="7e3128db7dd74d2bfa4afa77f5a610b8" category="list-text">部署集群时，它会在本地目录中创建 kubeconfig 文件。可以使用此文件使用 kubectl 检查集群状态，或者使用 gkectl 运行诊断。</block>
  <block id="b65fbd062b0116b470cce2a9d381bda4" category="inline-link-macro">接下来：部署用户集群。</block>
  <block id="00f6e0d2f13ac0e8fd21adb7b6ac5dce" category="paragraph"><block ref="00f6e0d2f13ac0e8fd21adb7b6ac5dce" category="inline-link-macro-rx"></block></block>
  <block id="3014fa788415dcf446af18856c631228" category="summary">NDE 通过配置 Mnode VM 并安装适用于 vCenter 的 NetApp Element 插件来部署解决方案和 vCenter 服务器，并将解决方案与 Element 集群集成在一起。部署后，您必须对环境进行一些修改，包括创建其他 VDS 端口组，数据存储库和资源组，以便在 VMware 解决方案上部署 Anthos 。</block>
  <block id="0f3cb37a16e300ac27ce8deebdf155fa" category="doc">4. 配置 vCenter Server</block>
  <block id="18de51b09dfd161cbfbbdb4eecf70459" category="paragraph">NDE 通过配置 Mnode VM 并安装适用于 vCenter 的 NetApp Element 插件来部署解决方案和 vCenter 服务器，并将解决方案与 Element 集群集成在一起。</block>
  <block id="ae84de3c0ac2e355f015c5e291fd7b9d" category="admonition">请注意， NDE 部署 vSphere 6.7U1 。您可以按照 VMware 的说明升级虚拟设备和各个 ESXi 主机 <block ref="4d72482bf109f89730d9942620ee98ae" category="inline-link-macro-rx"></block>。</block>
  <block id="0260c0bc88e40a277d0d43fbd6e582ac" category="paragraph">部署后，您必须对环境进行一些修改，包括创建其他 VDS 端口组，数据存储库和资源组，以便在 VMware 解决方案上部署 Anthos 。</block>
  <block id="951c8f9f8fe63cd2859f75f7ae113463" category="paragraph">完成以下步骤以配置 vCenter Server ：</block>
  <block id="437a70b9643ad60b2e00ca9f8d81a252" category="list-text">在 NDE 配置期间，使用 Administrator@vsphere.local 帐户和为管理员用户选择的密码登录到 VMware vCenter 服务器。</block>
  <block id="c84400924b0e79e8325554f20350ac06" category="image-alt">vCenter 登录</block>
  <block id="efb62c4091d15a84835fa1464d8442ad" category="list-text">右键单击 `NetApp-HCI-Cluster-01` Created by NDE ，然后选择用于创建新资源池的选项。将此池命名为 `Infrastructure-Resource-Pool` ，然后单击 OK 接受默认值。此资源池将在稍后的配置步骤中使用。</block>
  <block id="404aec5d188189ec4fcbceecdabe7997" category="image-alt">新建资源池</block>
  <block id="c19ce053915155e77fa8857d1381c232" category="admonition">可以根据环境中的可用资源修改此资源池中的预留。NetApp HCI 部署为一体化解决方案。因此， NetApp 建议将基础架构服务放置在此资源池中并相应地调整资源，以预留为基础架构服务提供可用性所需的资源。基础架构服务包括 vCenter Server ， NetApp Mnode 和 F5 BIG-IP 负载平衡器。</block>
  <block id="c85ea7730f9332ef9e24c17aa2bbccae" category="list-text">重复此步骤为 Anthos 部署的 VM 创建另一个资源池。将此池命名为 Anthos-Resource-Pool ，然后单击确定按钮接受默认值。根据要部署解决方案的特定环境调整资源可用性。此资源池将在稍后的部署步骤中使用。</block>
  <block id="35c9adb5840422e38e73df05b0075764" category="list-text">要配置要用作 vSphere 数据存储库的 Element 卷，请单击下拉菜单并从列表中选择 NetApp Element 管理。</block>
  <block id="84fb379db4c253ae78d3401183ce4b6e" category="list-text">此时将显示一个 Getting Started 屏幕，其中包含有关 Element 集群的详细信息。</block>
  <block id="0394d2ac92a13325481b4010427e6c3f" category="image-alt">NetApp Element 管理</block>
  <block id="2d6df08b59509ae176decb4d7d6bd876" category="list-text">单击管理， vSphere 客户端将显示一个数据存储库列表。单击创建数据存储库可创建一个数据存储库来托管 VM ，并创建另一个数据存储库来托管 ISO ，以供将来的子系统安装使用。</block>
  <block id="f518371195d05fca38905ba53557fa18" category="list-text">接下来，单击左侧面板中的网络菜单项。此时将显示一个屏幕，其中包含有关 NDE 部署的 VDS 的信息。</block>
  <block id="be658e0f41e1393ca28ab5681a291fba" category="list-text">初始配置会定义多个虚拟端口组。NetApp 建议单独使用这些端口来支持基础架构，并为用户部署的虚拟子系统创建其他端口组。右键单击左侧面板中的 NetApp HCI VDS 01 VDS ，然后从展开的菜单中选择分布式端口组，再选择新分布式端口组选项。</block>
  <block id="256d81de75b82685990183a687c86b60" category="list-text">创建一个名为 `Mantioning_Network` 的新分布式端口组。然后单击下一步。</block>
  <block id="9311add599946f91993495948ee9825d" category="list-text">在下一屏幕中，选择 VLAN 类型作为 VLAN ，并将 VLAN ID 设置为 3480 以进行管理。单击下一步，查看完摘要页面上的选项后，再次单击下一步以完成分布式端口组的创建。</block>
  <block id="d9a0af500387580ae9c3e2c4a22100df" category="list-text">重复上述步骤，为 `VM_Network` （ VLAN 1172 ）以及可能在 NetApp HCI 环境中使用的任何其他网络创建分布式端口组。</block>
  <block id="039203c276e39b3a9799be6dc42466ca" category="admonition">可以定义其他网络，以便对任何其他已部署的 VM 进行分段。例如，如果配置了其他 F5 BIG-IP 设备，则可以使用专用 HA 网络。此类配置是在本经验证的解决方案中部署的环境之外的补充，因此不属于本 NVA 文档的范围。</block>
  <block id="3a60cf4e0a9ce1e84728468f4e1de870" category="inline-link-macro">接下来：部署和配置 F5 BIG-IP Virtual Edition 设备</block>
  <block id="a677577784bbf4af4b0197bdb1d8f0ed" category="paragraph"><block ref="a677577784bbf4af4b0197bdb1d8f0ed" category="inline-link-macro-rx"></block></block>
  <block id="b4d1fa2f3e89b8aac30bd3832b5ccd18" category="summary">设置物理环境后，您可以开始部署 Anthos 。首先，要部署解决方案并在部署后访问它，必须满足几个前提条件。</block>
  <block id="19cf0b4e797c1180d3d3a9bef5c56863" category="inline-link">《 GKE- 内部部署指南》</block>
  <block id="3731e6e77a043e06f76b0fae4ec082a1" category="paragraph">现在，物理环境已设置完毕，您可以开始部署 Anthos 。首先，要部署解决方案并在部署后访问它，必须满足几个前提条件。在 Anthos 中将对其中每个步骤进行深入讨论<block ref="34e284f8443e86b12a6873dbef56d03e" category="inline-link-rx"></block>。</block>
  <block id="07dc740533143ca118791fd51fdfb01c" category="paragraph">要为在 VMware 上部署 Anthos 的环境做好准备，请完成以下步骤：</block>
  <block id="ae5e72e4bbfa9223e6fd808503b29b0b" category="list-text">按照可用说明创建 Google Cloud 项目<block ref="81203f2c31efdeed7364656e36a450cd" category="inline-link-rx"></block>。</block>
  <block id="b3b5118be43ae9669ad7418a562aba08" category="admonition">您的组织可能已有用于此目的的项目。请咨询您的云管理团队，了解是否存在某个项目，并且该项目已配置为可访问 VMware 上的 Anthos 。所有与 Anthos 一起使用的项目都必须由 Google 列入白名单。这包括主用户帐户，其他团队成员以及稍后创建的访问服务帐户。</block>
  <block id="5bae1e6f13ab8d621da0464128712a13" category="list-text">创建一个部署工作站，用于管理在 VMware 上安装 Anthos 的操作。部署工作站可以是 Linux ， MacOS 或 Windows 。在此经过验证的部署中，我们使用了 Red Hat Enterprise Linux 7 。</block>
  <block id="59e3b1b71516572e43d0afe52acad049" category="admonition">此工作站可以托管在 NetApp HCI 部署的内部或外部。唯一的要求是， IT 必须能够成功地与部署的 VMware vCenter Server 和 Internet 进行通信，才能正常运行。</block>
  <block id="7239c1f4ed8c1f647bc4541a84a9508e" category="inline-link">Google Cloud SDK</block>
  <block id="93c2813956a6921a4d59d5926dae3f2b" category="list-text">安装<block ref="f9fdc1a65c3b24f655128a7ed70b6760" category="inline-link-rx"></block> 用于与 Google Cloud 交互。它可以作为二进制文件的归档进行下载，以供手动安装，也可以由 apt-get （ ubuntu/Debian ）或 yum （ RHEL ）软件包管理器安装。</block>
  <block id="8194f2b49c967f26bf5a8bbc79a9fd00" category="admonition">gcloud 二进制文件必须至少为版本 265.0.0 。您可以使用 gcloud 组件更新来更新手动安装。但是，如果 SDK 是由软件包管理器安装的，则将来也必须使用同一软件包管理器执行更新。</block>
  <block id="ce832e4511c0100a7bc6575ee5b54814" category="list-text">在配置了工作站的情况下，使用您的凭据登录到 Google Cloud 。为此，请在部署工作站中输入 login 命令，然后检索一个链接，该链接可以复制并粘贴到浏览器中，以便可以交互式登录到 Google 服务。登录后，此网页将显示一个代码，您可以根据提示将该代码复制并粘贴回部署工作站。</block>
  <block id="12260061ed59f90fdac295e2d55e443b" category="list-text">启用多个 API ，以便您的环境可以与 Google Cloud 进行通信。集群中部署的 Pod 必须能够访问<block ref="8001d007f5e4f57412c39956c6f69c04" category="inline-link-rx"></block> 和<block ref="8e45c13688826a177bc74a48581c12a3" category="inline-link-rx"></block> 按预期运行。因此，工作节点所连接的 VM_Network 必须能够访问 Internet 。要启用所需的 API ，请从部署工作站运行以下命令：</block>
  <block id="5fa3de5c0655d25a01610e94acabc157" category="list-text">创建一个名为 anthos-install 的工作目录，然后切换到该目录。</block>
  <block id="ac74780a6bed745d7038d6ad56bc6101" category="list-text">在 VMware 上安装 Anthos 之前，您必须创建四个服务帐户，每个帐户都有与 Google Cloud 交互的特定用途。下表列出了这些帐户及其用途。</block>
  <block id="5d55785a871474b5490ecc8da433a32d" category="cell">帐户名称</block>
  <block id="09124ee653ae9164f685cb73111787b7" category="cell">component-access-sa</block>
  <block id="04d4b0c4cf31571d7bdb95868ccc29ae" category="cell">用于从云存储下载 Anthos 二进制文件。</block>
  <block id="84ff2749f4339310b0ef1a767c7c4f44" category="cell">connect-register-sa</block>
  <block id="8dc64b8af63a11def7197ec13b0b95f2" category="cell">用于将 Anthos 集群注册到 Google Cloud 控制台。</block>
  <block id="29521ab411057558986e1ac199f19793" category="cell">connect-agent-sa</block>
  <block id="0a004da3b38f6ae3fd9909baad82e61e" category="cell">用于维护用户集群与 Google Cloud 之间的连接。</block>
  <block id="99fb6a1117c5b67de0f376f1dce0d48c" category="cell">logging-monitoring-sa.</block>
  <block id="443cda85427637f5c0013ea9bec4cacc" category="cell">用于将日志记录和监控数据写入 Stackdriver 。</block>
  <block id="d4342d1a6be3d710aa95a1f2d2d21b72" category="admonition">系统会为每个帐户分配一个电子邮件地址，其中引用了您批准的 Google Cloud 项目名称。以下示例均列出了 NetApp 验证期间使用的项目 Anthos-Dev 。请务必根据需要在语法示例中替换相应的项目名称。</block>
  <block id="781c75f889820d2a3baf13ab42eb064f" category="list-text">准备部署 Anthos 所需的环境的最后一步是，将某些特权限制在您的服务帐户中。您需要步骤 7 中列出的每个服务帐户的关联电子邮件地址。</block>
  <block id="06296877fb77ce8446d334fc1522162d" category="list-text">使用 component-access-sa 帐户为 `serviceuseage.serviceUsageViewer` ， `iam.serviceAccountCreator` 和 `iam.roleViewer` 分配角色。</block>
  <block id="f08bce9d4337c7c66c8c3218323e09e7" category="list-text">使用 connect-register-sa 服务帐户为 `gkehub.admin` 分配角色。</block>
  <block id="88c3cd1eb1107c095b10f988b8d3a0e1" category="list-text">使用 connect-agent-sa Acccount 为 `gkehub.connect` 分配角色。</block>
  <block id="f0db900c1cd014d08e52735da2db23f4" category="list-text">使用 logging-monitoring-sa 服务帐户，为 `sprokdriver.resourcesMetadata` ， `logging.logwriter` ， `monitoring.metricwriter` 和 `monitoring.dashboardEditor` 分配角色。</block>
  <block id="7e6bdbe29dfa0dcc3fba55ef0bd28e87" category="list-text">下载 VMware CA 的 vCenter 证书；此证书稍后用于在安装期间向 vCenter 进行身份验证。</block>
  <block id="9a7e3c5ca84ac18a2c43cea5bf4272bb" category="inline-link-macro">接下来：部署 Anthos 管理工作站</block>
  <block id="b8327e31181bf84803672bda879e37f2" category="paragraph"><block ref="b8327e31181bf84803672bda879e37f2" category="inline-link-macro-rx"></block></block>
  <block id="e0de217465d60d6c90f60bf1b24b849e" category="summary">NDE 可为 NetApp HCI 解决方案提供简单，简化的部署体验。这些步骤将在节点已进行机架安装和布线且已使用控制台在每个节点上配置 IPMI 端口后开始。要使用 NDE 部署 NetApp HCI 解决方案，请完成此页面上列出的步骤。</block>
  <block id="64f9789896a5d085646be59100942c8a" category="doc">3. 使用 NetApp 部署引擎部署 NetApp HCI</block>
  <block id="fc8dec034878cf979be468c4bc79dc7b" category="paragraph">NDE 可为 NetApp HCI 解决方案提供简单，简化的部署体验。有关使用 NDE 1.6 部署 NetApp HCI 系统的详细指南，请参见 <block ref="3061b4115316b9f939da4fa19ee9fe19" category="inline-link-macro-rx"></block>。</block>
  <block id="0816cbc39faab4e15f583437851fff63" category="paragraph">这些步骤将在节点已进行机架安装和布线且已使用控制台在每个节点上配置 IPMI 端口后开始。要使用 NDE 部署 NetApp HCI 解决方案，请完成以下步骤：</block>
  <block id="af045465797611091291935aa9967c73" category="list-text">访问集群中某个存储节点的带外管理控制台，并使用默认凭据 admin/admin 登录。</block>
  <block id="dae3a84dd9cccb2ab070e28bd7d371bb" category="image-alt">NDE 登录</block>
  <block id="63aeb929fb8dc91b59d413f7748f533f" category="list-text">启动虚拟控制台后，用户可以使用管理员 / 管理员用户名和密码组合登录到 HCI 存储节点。</block>
  <block id="209dffab1e901c0bd133eb10f43d09c1" category="list-text">绑定 1G 接口必须具有静态设置的 IP ，网络掩码和网关；其 VLAN 设置为 3480 ；以及为环境定义的 DNS 服务器。</block>
  <block id="db023215fe7625f9fe1d1f228575b742" category="image-alt">绑定 1G 接口配置</block>
  <block id="e48ed142b1da8207d148c887f9f841ca" category="admonition">选择要用于带内管理的子网中的 IP ，而不是要在生产环境中使用的 IP 。NDE 会在初始访问后使用生产 IP 重新配置节点。</block>
  <block id="e3a25c4cda8bae88baa9c0f025f4d335" category="admonition">此任务只能在第一个存储节点上执行。之后，如果未配置，则分配给每个存储接口的自动专用 IP 地址（ APIPA ）地址将发现基础架构中的其他节点。</block>
  <block id="ecf0123ec0b9ecac894003d0df411a8e" category="list-text">绑定 10G 接口必须更改其 MTU 设置以启用巨型帧，并且其绑定模式更改为 LACP 。</block>
  <block id="afc16b3abc6eb95dd7d76ef97b6ab075" category="image-alt">绑定 10G MTU 配置</block>
  <block id="5d19005d2682fe8a5c82b45ffa9f5613" category="admonition">以这种方式配置 NetApp HCI 解决方案中四个存储节点中的每个节点。然后， NDE 进程便可发现解决方案中的所有节点并对其进行配置。您无需修改两个计算节点上的 Bond10g 接口。</block>
  <block id="c6b56ef01634e3c4883e58b1b78b8f36" category="list-text">完成后，打开 Web 浏览器并访问为管理端口配置的 IP 地址，以使用 NDE 启动 NetApp HCI 配置。</block>
  <block id="a77c8db7474e303d47ea5537aef449b2" category="list-text">在 Welcome to NetApp HCI 页面上，单击 Get Started 按钮。</block>
  <block id="59f78f98d8f8ade77082e8bf3cba5c2f" category="list-text">选中 Prerequisites 页面上的每个关联框，然后单击 Continue 。</block>
  <block id="5e37612d757ec6e9776f06c691c67832" category="list-text">下一页将显示适用于 NetApp HCI 和 VMware vSphere 的最终用户许可证。如果您接受这些条款，请单击每个协议末尾的 I accept ，然后单击 Continue 。</block>
  <block id="8d87866bc04968689fb2d44dacd0760a" category="list-text">单击 Configure a New vSphere Deployment ，选择 vSphere 6.5U2 ，然后输入 vCenter Server 的完全限定域名（ FQDN ）。然后单击 Continue 。</block>
  <block id="348d1aa1f1fd726f27531ffdcfed3b44" category="image-alt">vSphere 配置</block>
  <block id="c8271d63eb718b1e57a8973723b96b42" category="list-text">NDE 要求提供要在环境中使用的凭据。此功能用于 VMware vSphere ， NetApp Element 存储集群和 NetApp Mnode ，后者可为集群提供管理功能。完成后，单击 Continue 。</block>
  <block id="5ea6c64e1254b8050eb99bd08008abb5" category="image-alt">vSphere 凭据</block>
  <block id="22b17becfc906cf57c027cd9b52d430d" category="list-text">然后， NDE 将提示输入用于为 NetApp HCI 环境布线的网络拓扑。本文档中经过验证的解决方案已使用双缆线选项部署计算节点，并使用四缆线选项部署存储节点。单击 Continue （继续）。</block>
  <block id="e5cace2bc07ab99c2e673ab76c9f335a" category="image-alt">网络拓扑</block>
  <block id="a68e13097af7d73bead51d59db9d90d2" category="list-text">NDE 提供的下一页是存储网络上的 APIPA 所发现的环境清单。已选中当前正在运行 NDE 的存储节点并选中绿色复选标记。选中相应的框以向 NetApp HCI 环境添加其他节点。单击 Continue （继续）。</block>
  <block id="0142f6f2d1215c01d4c8b1801374a717" category="image-alt">NDA 清单</block>
  <block id="ca04ceaf0de2dc5fc498b55f0f77f0b0" category="admonition">如果清单屏幕中缺少任何节点，请等待几分钟，然后单击刷新清单。如果此节点仍无法显示，则可能需要对环境网络进行额外调查。</block>
  <block id="468cc4ecd5413ce13003001f24c89956" category="list-text">接下来，您必须为 NetApp HCI 部署配置永久网络设置。第一页配置基础架构服务（ DNS 和 NTP ）， vCenter 网络和 Mnode 网络。</block>
  <block id="97ba4c484a0bb9e0e45e0c7533f96cb7" category="image-alt">网络设置</block>
  <block id="b931902cf841ee2f927a1b55c6a87f73" category="list-text">您可以在下一页配置环境中的每个节点。对于计算节点，您可以通过它配置主机名，管理网络， vMotion 网络和存储网络。对于存储节点，请为存储集群命名并配置每个节点所使用的管理和存储网络。单击 Continue （继续）。</block>
  <block id="dc2936e40a7e8ea518a0a15ec531c073" category="image-alt">计算节点网络</block>
  <block id="6ad53c19621412983f12e271b83b90be" category="list-text">在下一页中，展开每个部分以查看为环境定义的所有设置，如有必要，单击编辑进行更正。此页面上还有一个复选框，用于启用或禁用 Mnode 向 NetApp Active IQ 发送实时运行状况和诊断信息。如果所有信息都正确，请单击开始部署。</block>
  <block id="56e7fe75da296b40df2c21ffcec3d49c" category="admonition">如果要启用 Active IQ ，请验证您的管理网络是否可以访问 Internet 。如果 NDE 无法访问 Active IQ ，则部署可能会失败。</block>
  <block id="6ab30169d2b133a265c63034563c31ff" category="list-text">此时将显示一个摘要页面，并显示 NetApp HCI 解决方案的每个组件以及整个解决方案的进度条。完成后，您可以选择启动 vSphere 客户端并开始使用您的环境。</block>
  <block id="3404922975ef245406e0304b782ca6e2" category="image-alt">您的设置已完成</block>
  <block id="4848fa2165f98b9e983a2993ee409cb0" category="inline-link-macro">接下来：配置 vCenter Server</block>
  <block id="d526c99d5eb8aedb56038927a40033f4" category="paragraph"><block ref="d526c99d5eb8aedb56038927a40033f4" category="inline-link-macro-rx"></block></block>
  <block id="05373f5dd5ed3f273ba1e3feec7eb945" category="doc">9. 在 RHV 上下载并安装 NetApp Trident ：适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="e264232806e94d2a8b6cde2d4ab7506b" category="paragraph">要下载并安装 NetApp Trident ，请完成以下步骤：</block>
  <block id="f8dd42eabbe479d5179619978a3ec1d0" category="list-text">确保登录到 OCP 集群的用户具有足够的权限来安装 Trident 。</block>
  <block id="8cdd9001c503dd15c2fa0372ec511de7" category="list-text">验证您是否可以从注册表下载映像并访问 NetApp Element 集群的 MVIP 。</block>
  <block id="f7bd0454ebf498f79b3b621a60bbaf32" category="list-text">使用以下命令下载 Trident 安装程序包并将其解压缩到目录中。</block>
  <block id="35d8a6306c1307e1c058beb3b2d2bec8" category="list-text">Trident 安装程序包含用于定义所有所需资源的清单。使用适当的清单创建 TridentProvider 自定义资源定义。</block>
  <block id="50511d456d095bafe567a15f5c12d114" category="list-text">创建 Trident 命名空间， Trident 操作符需要使用此命名空间。</block>
  <block id="ad74fe7404923875caa64c5a86275f69" category="list-text">创建 Trident 操作员部署所需的资源，例如操作员的 ServiceAccount ， ServiceAccount 的 ClusterRole 和 ClusterRoleBinding/ 专用 PodSecurityPolicy 或操作员本身。</block>
  <block id="e316af50c91d982ef04a1dac09cd712d" category="list-text">验证是否已部署 Trident 操作员。</block>
  <block id="d70e0905b975b93abedbd20623f94990" category="list-text">安装 Trident 操作符后，使用此操作符安装 Trident 。在此示例中，创建了 TridentProvider 自定义资源（ CR ）。Trident 安装程序附带了用于创建 TridentProvider CR 的定义。可以根据需要修改这些设置。</block>
  <block id="f0cff25fcf5ae28e0875856d486235a2" category="list-text">使用 `oc get csr -o name` xargs oc adm certificate approve 来批准提供 CSR 证书的 Trident 。</block>
  <block id="bc7c799f4d0aa8be2cf9155f1e6a1364" category="list-text">使用 Trident 配置程序 CR 验证是否已安装 Trident 20.04 ，并验证与 Trident 相关的 Pod 是否已安装。</block>
  <block id="953333f8cea6798b46ca6ee4b028e872" category="list-text">创建一个存储后端， Trident 将使用该后端来配置卷。存储后端在 NetApp HCI 中指定 Element 集群。您还可以使用相应的 QoS 规格指定铜牌，银牌和金牌类型示例。</block>
  <block id="4d68eb12a82ac781b2a0f8b8d0cd8d6d" category="paragraph">修改 `backend.json` 以满足以下值的环境详细信息或要求：</block>
  <block id="b257645f54fc4c22ddb99717b6d88f60" category="list-text">端点对应于 NetApp HCI Element 集群的凭据和 MVIP 。</block>
  <block id="9e2995a1600dbda969f17831a6d52108" category="inline-link-macro">创建存储网络 VLAN</block>
  <block id="3aed26e6948de8dd1ca95c1feda62169" category="list-text">SVIP 对应于标题为的一节中通过 VM 网络配置的 SVIP <block ref="117d165d1b4c2f8937702f637ab32003" category="inline-link-macro-rx"></block>。</block>
  <block id="a41a66d0980c53c47f9e26219b9a994c" category="list-text">类型对应于不同的 QoS 带。可以通过指定确切的存储池来使用特定 QoS 设置创建新的永久性卷。</block>
  <block id="c4ebc08a27f814537c4c79d8f8c2813a" category="list-text">创建一个存储类，将 Trident 指定为配置程序，并将存储后端指定为 `solidfire-san` 。</block>
  <block id="c871444fe2365884aeb0fea1d9a0ac95" category="admonition">在此示例中，创建的 StorageClass 设置为默认值，但是 OpenShift 管理员可以根据不同的 QoS 要求以及其他因素根据其应用程序定义多个存储类。Trident 会选择一个可满足存储类定义的参数部分中指定的所有条件的存储后端。然后，最终用户可以根据需要配置存储，而无需管理干预。</block>
  <block id="ab39e2c05858c53ef52ff72c839c49b4" category="summary">在部署集群并将其注册到 Google Cloud 后，必须使用 Google Cloud 控制台登录到以进行管理并接收更多集群详细信息。要使用 GKEE 控制台访问用户集群，请完成此页面上列出的步骤。</block>
  <block id="a3837a91a5cbc0761aa3a999b89e320b" category="doc">10. 使用 GKEE 控制台启用对集群的访问</block>
  <block id="5713656ff9531d7b968a2760f1cf5b73" category="paragraph">在部署集群并将其注册到 Google Cloud 后，必须使用 Google Cloud 控制台登录到以进行管理并接收更多集群详细信息。详细介绍了部署完 Anthos 用户集群后用于访问这些集群的官方操作步骤<block ref="11b697aa4e74c73a735858b04d43a585" category="inline-link-rx"></block>。</block>
  <block id="de8ff545d988b560762d88c93181e508" category="admonition">要在 Google Cloud 控制台中访问内部集群并使用基于 VMware 的 Anthos 服务，项目和特定用户必须列入白名单。如果在部署集群后无法看到这些集群，您可能需要向 Google 打开支持服务单。</block>
  <block id="c62715535ec80ecd6cbf6f2cead1f478" category="paragraph">未列入白名单的视图如下所示：</block>
  <block id="afae7752ed8ec21861f15f056d73e8e5" category="image-alt">非白名单视图</block>
  <block id="b0461feaa0f8bdbc041284ba727e2519" category="paragraph">下图显示了集群视图。</block>
  <block id="7ae4ff989edddde688179aa2b41412e9" category="image-alt">集群视图</block>
  <block id="a9a7052e05d8c3e429da413897aa0b1d" category="paragraph">要使用 GKEE 控制台访问用户集群，请完成以下步骤：</block>
  <block id="09c9ced9b223560567cdd7959730bbbb" category="list-text">创建一个 `node-reader.yaml` 文件，用于访问集群。</block>
  <block id="6b6825fdbad7f81ce8483b20441d7913" category="list-text">使用 `kubectl` 命令将此文件应用于要登录到的集群。</block>
  <block id="403ceea65840dce55e4ca28c752ccb64" category="list-text">创建可用于登录的 Kubernetes 服务帐户（ KSA ）。将此帐户命名为使用此帐户登录到集群的用户。</block>
  <block id="e3eb1852b9fb9355460357b5d43a5499" category="list-text">创建集群角色绑定资源，将视图和新创建的节点读取器角色绑定到新创建的 KSA 。</block>
  <block id="ee5df71094b5cf5f2399efb39d6d27c9" category="list-text">如果需要进一步扩展权限，可以采用类似方式为 KSA 用户授予具有集群管理员权限的角色。</block>
  <block id="6a8e609f5ee7643938dba40921b80e70" category="list-text">创建 KSA 帐户并为其分配正确的权限后，您可以创建一个承载令牌，以允许通过 GKE控制 台进行访问。为此，请为机密名称设置一个系统变量，然后通过 `kubectl` 命令传递该变量以生成令牌。</block>
  <block id="89786972ebb5d82191ae05695b18af61" category="inline-link">Google Cloud Console</block>
  <block id="8e29ca7a8913c6720dd9768134ba67ef" category="list-text">使用此令牌，您可以访问<block ref="2e2cfb182519045b1797cff1bcbaff20" category="inline-link-rx"></block> 并通过单击登录按钮并粘贴令牌登录到集群。</block>
  <block id="bd88302487d883a7f9360df74b825ef2" category="image-alt">登录到 Google Cloud Console</block>
  <block id="c16a7da47874bffe8f1dac1270a4ba1e" category="list-text">登录完成后，集群名称旁边会显示一个绿色复选标记，并显示有关物理环境的信息。单击集群名称可显示更详细的信息。</block>
  <block id="cc12826ea70d45ddf169bc169f9470bf" category="image-alt">Kubernetes 集群详细信息</block>
  <block id="6e59101df73395f18b4fab23079e4f5c" category="inline-link-macro">接下来：安装和配置 NetApp Trident 存储配置程序。</block>
  <block id="245f68c1362fffb2a86ca8bf3a6af5dc" category="paragraph"><block ref="245f68c1362fffb2a86ca8bf3a6af5dc" category="inline-link-macro-rx"></block></block>
  <block id="a9a52a1b24bda6ce21ef1fa1067428a0" category="doc">2. 下载 OpenShift 安装文件： RHV 上适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="9411b4db8bbed1b4360a2692f92e544d" category="paragraph">要下载 OpenShift 安装文件，请完成以下步骤：</block>
  <block id="5cc416d67483449e3e7b88dc130ac24b" category="inline-link">Red Hat 登录页面</block>
  <block id="cfd1065b3ebb60b642454a33a5a3b471" category="list-text">转至 <block ref="c5f922959d3cf9b7485004ab9b8c5aaf" category="inline-link-rx"></block>并使用您的 Red Hat 凭据登录。</block>
  <block id="70319b61a7fb0ffeb5aa1eb6fa3604c5" category="list-text">在集群页面上，单击创建集群。</block>
  <block id="4cea832a3f47a0d603778b54d9b4c956" category="paragraph"><block ref="4cea832a3f47a0d603778b54d9b4c956" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b895601e0b35a05d9e66c7e799fe738b" category="list-text">选择 OpenShift 容器平台。</block>
  <block id="36f40a763c19e53f1d8843a6aada08ec" category="paragraph"><block ref="36f40a763c19e53f1d8843a6aada08ec" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4a9c104af385d6cf43a786e82298f38a" category="list-text">选择 Run on Red Hat Virtualization 。</block>
  <block id="4a8a994ad293cead4c1539af9506796c" category="list-text">在下一页中，您可以下载 OpenShift 安装程序（适用于 Linux 和 MacOS ），这是创建 `install-config` 文件和 `oc` 命令行工具（适用于 Linux ， Windows 和 MacOS ）所需的唯一提取密钥。</block>
  <block id="392a4d7053ba841cb36ad0bdabfdd376" category="paragraph">下载这些文件，将其传输到 RHEL 管理工作站，您可以从该工作站运行 OpenShift 安装，或者在 RHEL 管理工作站上使用 wget 或 curl 直接下载这些文件。</block>
  <block id="72f854c50a0953b3934469768275147c" category="inline-link-macro">下一步： 3.从 RHV 下载 CA 证书</block>
  <block id="df8ce31ebac359aa902c19f8c598b172" category="paragraph"><block ref="df8ce31ebac359aa902c19f8c598b172" category="inline-link-macro-rx"></block></block>
  <block id="cb8e8e87ec9c630a0a27910fe29abceb" category="summary">RHV 是一个企业级虚拟数据中心平台，运行在 Red Hat Enterprise Linux （ RHEL ）上，并使用 KVM 虚拟机管理程序。</block>
  <block id="603bc85f6f6f4d9e5095745d9252f1d3" category="inline-link">Red Hat 虚拟化网站</block>
  <block id="8a961382f0c47dc86706f0aa8bb93fb4" category="paragraph">有关 RHV 的详细信息，请参见<block ref="ac07861257bcab0c21d310fa00cb324b" category="inline-link-rx"></block>。</block>
  <block id="0178ef6806a57586f6c66dde7e0e86d2" category="list-text">* 集中管理 VM 和主机。 * 在部署中， RHV 管理器作为物理机或虚拟机（ VM ）运行，并提供一个基于 Web 的图形用户界面，用于从中央界面管理解决方案。</block>
  <block id="f8c0620ad449333a65fdabc11cee402c" category="list-text">* 自托管引擎。 * 为最大限度地降低硬件要求， RHV 允许将 RHV Manager （ RHV-M ）部署为运行子虚拟机的主机上的 VM 。</block>
  <block id="e42982ff142aa39bbd422d9b3c6f5837" category="list-text">* 高可用性。 * 如果主机发生故障，为了避免中断，可以通过 RHV 配置虚拟机以实现高可用性。高可用性 VM 可通过故障恢复策略在集群级别进行控制。</block>
  <block id="57fd0c0832cf4859197141f914b1d924" category="list-text">* 高可扩展性。 * 一个 RHV 集群最多可以包含 200 个虚拟机管理程序主机，从而支持大规模虚拟机的要求，以容纳资源耗用的企业级工作负载。</block>
  <block id="d34a42d924287b7387ced7af47ac3c12" category="list-text">* 增强的安全性。 * RHV 继承了 RHV 的功能，安全虚拟化（ sVirt ）和安全增强型 Linux （ SELinux ）技术被 RHV 用于提高主机和 VM 的安全性和增强性能。这些功能的主要优势是对虚拟机及其相关资源进行逻辑隔离。</block>
  <block id="01b0ee840ef208c283c3f4e959aa9427" category="paragraph"><block ref="01b0ee840ef208c283c3f4e959aa9427" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2d7e48e226974692ed3f522a2baef6db" category="paragraph">RHV 上的 Red Hat OpenShift 旨在通过使用虚拟局域网（ VLAN ）在逻辑上隔离不同用途的网络流量。此配置可以进行扩展，以满足客户需求，或者为特定网络服务提供进一步隔离。下表列出了在 NetApp 验证解决方案时实施解决方案所需的 VLAN 。</block>
  <block id="3083202a936b7d0ef8b680d7ae73fa1a" category="cell">3344</block>
  <block id="7e4be32047fe5b09a23fd956cd4e82f0" category="section-title">将 OpenShift 部署到至少包含三个节点的 RHV 集群</block>
  <block id="de4e964e7be880b328384cfedd5873d9" category="paragraph">本文档中介绍的经验证的架构介绍了适用于 HA 操作的最低硬件部署，具体方法是部署两个 RHV-H 虚拟机管理程序节点，并确保采用容错配置，两个主机均可管理托管引擎，而已部署的虚拟机可在两个虚拟机管理程序之间迁移。</block>
  <block id="b98f17dd49fc6d1c2a9b58922fae2686" category="paragraph">您可以通过启用虚拟机 / 主机关联性在多个虚拟机管理程序节点之间分布 OpenShift 主节点。</block>
  <block id="df1b58247681ba5f974a572d530dbdf9" category="paragraph">关联性是一种为一组 VM 和 / 或主机定义规则的方法，用于确定这些 VM 是在组中的同一主机上运行还是在不同主机上运行。它通过创建由具有一组相同参数和条件的 VM 和 / 或主机组成的关联组来应用于 VM 。根据关联组中的 VM 是在组中的同一主机上运行，还是在不同主机上单独运行，此关联组的参数可以定义正关联性或负关联性。</block>
  <block id="5c00bc5cb1bdae240d18551e77806abd" category="inline-link">Red Hat 6.11 。关联性组文档</block>
  <block id="f38d8cd9caeb9a037c470b7d061392a0" category="paragraph">要配置相关性组，请参见<block ref="eb1587f3cb611d53dba5bde41d49122a" category="inline-link-rx"></block>。</block>
  <block id="1050f3dc9e3ee559789e3b25f2e4f77e" category="inline-link">Red Hat OpenShift 通过自定义在 RHV 上安装集群</block>
  <block id="3c438be737391744e2fed6f73c418638" category="section-title">技术要求</block>
  <block id="ff94444190436ee7694d15be2dde0f29" category="list-text">NetApp ONTAP 存储集群</block>
  <block id="b645e117fe786bf56128cde2dec3971a" category="list-text">Red Hat OpenShift 集群</block>
  <block id="0d46ef98dfe52c8d01c0c5ace93d8165" category="section-title">Red Hat OpenShift —集群资源</block>
  <block id="c4ff2177ae2f8ed9c3e5353068cf2195" category="section-title">Red Hat OpenShift —存储资源</block>
  <block id="6c7eefdca8e3859011afa00995879a32" category="inline-link-macro">下一步：配置。</block>
  <block id="0c86c0f2c0ad5b82864ef1b20a904132" category="paragraph"><block ref="0c86c0f2c0ad5b82864ef1b20a904132" category="inline-link-macro-rx"></block></block>
  <block id="49c56bc29d001b09e3e709adba544836" category="doc">设计注意事项：基于 RHV 的适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="09c1abe510b27bc4d1086f5320bcc922" category="paragraph">HCI 解决方案上的 RHV 上的 Red Hat OpenShift 使用两个数据交换机以 25 Gbps 的速度提供主数据连接。它还使用两个额外的管理交换机，这些交换机以 1 Gbps 的速度提供连接，用于存储节点的带内管理以及 IPMI 功能的带外管理。OCP 使用 RHV 上的逻辑网络进行集群管理。本节介绍解决方案中使用的每个虚拟网段的布局和用途，并概述了部署解决方案的前提条件。</block>
  <block id="d1412e3cee246610683d3e331a3d17cd" category="paragraph">基于 RHV 解决方案的 NetApp HCI for Red Hat OpenShift 旨在通过使用虚拟局域网（ VLAN ）在逻辑上隔离不同用途的网络流量。NetApp HCI 至少需要三个网段。但是，可以扩展此配置以满足客户需求，或者为特定网络服务提供进一步隔离。下表列出了实施解决方案所需的 VLAN ，以及稍后在经验证的架构部署中使用的特定 VLAN ID 。</block>
  <block id="0c1e8c05edcc03abaec86e968a5ff2bc" category="cell">HCI 节点和 IPMI 的管理</block>
  <block id="caa1a881bff584169c037ef73701525b" category="cell">管理 HCI 节点， ovirtmgmt 和 VM</block>
  <block id="4c3c7174220e38598fca2dea88e0a87a" category="paragraph">在 NetApp HCI 解决方案上的 Red Hat 虚拟化上部署 OpenShift 容器平台（ OCP ）之前，应具备以下基础架构：</block>
  <block id="cd6ea40695e3141dee67837c43352934" category="list-text">RHV 集群应至少具有 28 个 vCPU ， 112 GB RAM 和 840GB 可用存储（具体取决于生产工作负载要求）。</block>
  <block id="712f8994578283c336e72022f402f741" category="inline-link-macro">下一步：在 RHV 上部署适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="b002cf7be83b815ce43b061e39c46004" category="paragraph"><block ref="b002cf7be83b815ce43b061e39c46004" category="inline-link-macro-rx"></block></block>
  <block id="114856cfc010d937269afe29138175fc" category="doc">部署采用 OpenShift 虚拟化的虚拟机：采用 NetApp 的 Red Hat OpenShift</block>
  <block id="e51918b4fa416aa031b62ab33af19491" category="doc">视频和演示：基于 RHV 的适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="63e2e4c63022a2ca3a58778bd242195b" category="paragraph">以下视频演示了本文档中介绍的一些功能：</block>
  <block id="8be4d62827d5de4c6fd1e61917afe925" category="inline-link-macro">接下来：追加信息： NetApp HCI for Red Hat OpenShift on Red Hat 虚拟化</block>
  <block id="60e30235f0f6a3396a766f2c4d5767f6" category="paragraph"><block ref="60e30235f0f6a3396a766f2c4d5767f6" category="inline-link-macro-rx"></block></block>
  <block id="9f9077091d74fb2c701c8c8c4a837c16" category="summary">在对此解决方案进行初始验证时， NetApp 与全球技术（ World Wide Technology ， WWT ）合作，在 WWT 的高级技术中心（ Advanced Technology Center ， ATT ）建立了一个环境。Anthos 使用 Google Cloud 提供的 bmctl 工具部署在裸机基础架构上。下一节详细介绍了用于验证的部署。</block>
  <block id="06dc93ff20817f0d5fb8a07f8e43d6cb" category="doc">部署摘要</block>
  <block id="195d9c1693fc10788ad8da5d4d9d2402" category="paragraph">采用 NetApp 解决方案的裸机上的 Anthos 是一个高可用性混合集群，其中包含三个 Anthos 控制平台节点和四个 Anthos 工作节点。</block>
  <block id="d0236eb3bd180706e0eaca7d726c66e6" category="paragraph">使用的控制面板节点是托管在机箱中的 Cisco UCS B200M3 刀片式服务器，每个节点上配置有一个虚拟网络接口卡（ vNIC ），从而可以在 Cisco UCS 平台级别进行 A/B 故障转移以实现容错。上游连接到一对 Cisco UCS 6248 互联阵列的 Cisco UCS 机箱，可提供不同的路径来分隔阵列 A 和阵列 B 上的流量这些互联阵列会上游连接到一对 Cisco Nexus 5548 数据中心交换机，这些交换机会绑定回 WWT 的核心网络。</block>
  <block id="3753f99ef321c354828532bad11422ec" category="paragraph">工作节点为 HP ProLiant DL360 节点，每个节点均运行一个支持的 Linux 分发版，用于裸机上的 Anthos ： Red Hat Enterprise Linux 8.2 ， CentOS 8.2 ， Ubuntu 20.04 LTS 或 Ubuntu 18.04 LTS 。Red Hat Enterprise Linux 8 和 CentOS 8 节点配置了在 LACP 模式下运行的 NIC 组，并通过缆线连接到两个 Nexus 9k C93180YC-FX 交换机以实现容错。Ubuntu 服务器已配置为在 LACP 模式下进行网络绑定，并已连接到同一对 Nexus 9k 交换机以实现容错。</block>
  <block id="a847089866aa2e6d9077cdc08cce930b" category="paragraph">运行 ONTAP 9.7 软件的 NetApp AFF A300 存储系统已安装并以物理方式连接到与 Anthos 工作节点相同的一对 Nexus 9k 交换机。这些网络上行链路聚合到一个接口组（ a0a ）中，并标记了相应的数据网络 VLAN ，以使工作节点能够与存储系统进行交互。创建了一个 Storage Virtual Machine （ SVM ），其中包含支持 NFS 协议并专用于 Trident 存储操作的数据 LIF ，以便为裸机集群上的 Anthos 中部署的容器提供永久性存储。这些永久性卷由 NetApp Trident 20.10 提供，该软件是完全受支持的适用于 Kubernetes 的 NetApp 开源存储编排程序的最新版本。</block>
  <block id="e5b1fecda3d68cda9e216e0e73b26dec" category="paragraph">下图展示了解决方案到机架数据中心交换机顶部的物理布线图。</block>
  <block id="aa5914d8b6d8a27fd4df86fef0c0395a" category="paragraph"><block ref="aa5914d8b6d8a27fd4df86fef0c0395a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2a7a105940efa6ed6c71004ff40b8347" category="paragraph">下图显示了在 NetApp 合作伙伴 WWT 实验室的硬件上部署和验证的解决方案逻辑视图。</block>
  <block id="ff8f4395cfa334d6d144e3a2426e7b96" category="paragraph"><block ref="ff8f4395cfa334d6d144e3a2426e7b96" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e8d3f61f51562ad245b65242dc92c0da" category="inline-link-macro">接下来：解决方案验证。</block>
  <block id="b1d15269d6e9cabdf17337c73e6a5f07" category="paragraph"><block ref="b1d15269d6e9cabdf17337c73e6a5f07" category="inline-link-macro-rx"></block></block>
  <block id="7652dcfa1608f7891f4e5c9b462354be" category="paragraph">为了应对这一挑战， Red Hat 从 OpenShift 4.6 版开始引入了 OpenShift 虚拟化（以前称为容器原生虚拟化）。通过 OpenShift 虚拟化功能，您可以在同一 OpenShift 容器平台安装中运行和管理虚拟机以及容器，从而提供混合管理功能，通过操作员自动部署和管理 VM 。除了使用 OpenShift 虚拟化在 OpenShift 中创建 VM 之外， Red Hat 还支持从 VMware vSphere ， Red Hat 虚拟化和 Red Hat OpenStack Platform 部署导入 VM 。</block>
  <block id="269bac1ed5128eacc45c06318333642a" category="image-alt">OpenShift 虚拟化</block>
  <block id="8a5bcb32f7cb878beee68d6f84b3ada7" category="paragraph">要了解有关 Red Hat OpenShift 虚拟化的详细信息，请参见相关文档<block ref="3339eb5909b80aa35681f9f3f9478c17" category="inline-link-rx"></block>。</block>
  <block id="3a86ddb85761278fa813d15edecbc2b1" category="paragraph"><block ref="3a86ddb85761278fa813d15edecbc2b1" category="inline-link-macro-rx"></block></block>
  <block id="1e5d89e661ea9ef4d5cc0a5feeddf225" category="summary">在 NetApp HCI 上部署 Red Hat OpenShift 的最佳实践</block>
  <block id="8bd5e7c9d79d21702d07c498c45089c2" category="doc">生产部署最佳实践—基于 RHV 的适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="7c7e52806f39f26bc2cf01a4d3ba6ef0" category="section-title">将 OpenShift 部署到至少包含三个节点的 RHV 集群</block>
  <block id="408e170e4b7383f0c3d3363a8499d46e" category="paragraph">本文档中介绍的经验证的架构介绍了适用于 HA 操作的最低硬件部署，具体方法是部署两个 RHV-H 虚拟机管理程序节点，并确保采用容错配置，两个主机均可管理托管引擎，而已部署的虚拟机可在两个虚拟机管理程序之间迁移。由于 Red Hat OpenShift 最初使用三个主节点进行部署，因此在双节点配置中，可以确保至少有两个主节点将占用同一节点，如果特定节点不可用，可能会导致 OpenShift 中断。因此， Red Hat 的最佳实践是，在解决方案中至少部署三个 RHV-H 虚拟机管理程序节点，以便 OpenShift 主节点可以均匀分布，并且解决方案可以获得更多的容错能力。</block>
  <block id="8b33662374d1c90db1bd25a0676eb6d1" category="section-title">配置虚拟机 / 主机关联性</block>
  <block id="6bc5289daeb7ad097e82e6d4fc961e60" category="paragraph">通过启用虚拟机 / 主机关联性，可确保在多个虚拟机管理程序节点之间分布 OpenShift 主节点。关联性是一种为一组 VM 和 / 或主机定义规则的方法，用于确定这些 VM 是在组中的同一主机上运行还是在不同主机上运行。它通过创建由具有一组相同参数和条件的 VM 和 / 或主机组成的关联组来应用于 VM 。根据关联组中的 VM 是在组中的同一主机上运行，还是在不同主机上单独运行，此关联组的参数可以定义正关联性或负关联性。为参数定义的条件可以是强制实施，也可以是软强制实施。强制实施可确保关联组中的 VM 始终严格遵循正 / 负关联性，而不考虑外部条件。另一方面，软强制实施可确保在可行的情况下为关联组中的 VM 设置更高的优先级，以便遵循正 / 负关联性。在本文档所述的两个或三个虚拟机管理程序配置中，建议使用软关联性设置，在较大的集群中，可以依赖硬关联性来确保 OpenShift 节点的分布。要配置相关性组，请参见<block ref="04bc91469d1fc9def19624ef5e67f32d" category="inline-link-rx"></block>。</block>
  <block id="59ace3eca231bc366d737293699f819d" category="paragraph">通过本文档前面讨论的交互式向导， IPI 可以轻松部署 OpenShift 集群。但是，在集群部署过程中，可能需要更改某些默认值。在这些情况下，无需立即部署集群，即可运行向导并为其分配任务，而是输出一个配置文件，以便稍后可以从该配置文件中部署集群。如果需要更改任何 IPI 默认设置，或者用户希望在其环境中部署多个相同的集群以用于多租户等其他用途，则此功能非常有用。有关为 OpenShift 创建自定义安装配置的详细信息，请参见<block ref="15427a9f842d7a49b872cf64115f33bc" category="inline-link-rx"></block>。</block>
  <block id="f1e1a1eb9f2544cda1c34910a0b4c323" category="inline-link-macro">接下来：视频和演示： Red Hat 虚拟化上的适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="8a64485bdcd3e935c94b6a9c2bccb536" category="paragraph"><block ref="8a64485bdcd3e935c94b6a9c2bccb536" category="inline-link-macro-rx"></block></block>
  <block id="ad8905a47eb465223ebe7acf569732b1" category="doc">配置： cluster-admin 任务</block>
  <block id="552eab1d1ea09d0d1733b97dee6609a1" category="paragraph">Red Hat OpenShift cluster-admin 执行以下任务：</block>
  <block id="8a4ffd494b5e8af3ac1be2cd9ab254fb" category="list-text">以 cluster-admin 身份登录到 Red Hat OpenShift 集群。</block>
  <block id="7ccd4d72e4addf5c27c53bafaeb3fdbd" category="list-text">创建两个与不同项目对应的项目。</block>
  <block id="6c98bfb16f2e9bbebd943c1f8592306d" category="list-text">为 project-1 创建开发人员角色。</block>
  <block id="3c73122271c9219b54ca745b732adc28" category="list-text">同样，为 project-2 创建开发人员角色。</block>
  <block id="7428df2e0e503f4cabb43a4667bc1983" category="list-text">所有 OpenShift 和 NetApp 存储资源通常由存储管理员管理。存储管理员的访问由安装 Trident 时创建的 Trident 操作员角色控制。此外，存储管理员还需要访问 ResourceQuotas 来控制存储的使用方式。</block>
  <block id="36e36b60ddb8f46fe0b9b4e8f4dce56f" category="list-text">为存储管理员配置 ClusterRoleBindings 。</block>
  <block id="ced38b1f1c19446862c601754b82b94c" category="list-text">为开发人员创建 RoleBindings ，将开发人员项目 1 角色绑定到项目 1 中的相应组（ OCP-project-1 ）。</block>
  <block id="2aa292f2ff8b13fe141ca55c27bc29c2" category="list-text">同样，为开发人员创建 RoleBindings ，将开发人员角色绑定到 project-2 中的相应用户组。</block>
  <block id="7d03daab3e74958fc08ebc0c90e0a6a2" category="inline-link-macro">下一步：存储管理员任务。</block>
  <block id="f3d9bb76442ab5c11e6af4dd328b2559" category="paragraph"><block ref="f3d9bb76442ab5c11e6af4dd328b2559" category="inline-link-macro-rx"></block></block>
  <block id="4ce9dd4dd576c6970202795ab4693e2a" category="doc">NVA-1149 ：基于 Red Hat 虚拟化的适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="a8ea1178e22fcfeb7c93e88be74ea1e8" category="paragraph">基于 Red Hat 虚拟化（ RHV ）的 NetApp HCI for Red Hat OpenShift 是一个最佳实践部署指南，用于通过安装程序配置基础架构（ IPI ）方法将 Red Hat OpenShift 完全自动安装到经验证的企业架构上 <block ref="50ecdabcf30d1902074cfd5c32ef0237" category="inline-link-macro-rx"></block>。本《经验证的 NetApp 架构部署指南》旨在提供一组经过验证的简明说明，以便在部署解决方案时遵循。本文档所述的架构和部署方法已由 NetApp 和 Red Hat 的主题专家联合验证，以提供解决方案的最佳实施实践。</block>
  <block id="7d789957d4fd91ba253c8825cebc1bf2" category="paragraph">基于 RHV 解决方案的 NetApp HCI for Red Hat OpenShift 旨在为客户提供卓越的价值，其使用情形如下：</block>
  <block id="e7e5ac8d33aaa27588ceb8f96979473d" category="list-text">RHV 中的企业虚拟化工作负载</block>
  <block id="28e78e22f2f0f119d5c322865c3f0598" category="list-text">Red Hat OpenShift 中的企业级容器化工作负载</block>
  <block id="29be44acdc530bafb1c09cf840cf1702" category="list-text">无中断运行和升级</block>
  <block id="eb155fc4a10d8c23e65f57e7ffe0e443" category="paragraph">基于 RHV 的 NetApp HCI for Red Hat OpenShift 认可了这些挑战，并提供了一个解决方案，通过在 RHV 企业级虚拟机管理程序上实施完全自动化的 RedHat OpenShift IPI 部署，帮助解决每个问题。本文档其余部分详细介绍了此经验证的架构中使用的组件。</block>
  <block id="9babd333d9b2560db883ed92996f5d7e" category="paragraph">NetApp HCI 是一款企业级分解式混合云基础架构（ HCI ）解决方案，可通过一个灵活，可扩展且易于管理的双机架单元（ 2RU ）四节点组件提供计算和存储资源。此外，还可以为其配置 1RU 计算和服务器节点。下图所示的最低部署包括四个 NetApp HCI 存储节点和两个 NetApp HCI 计算节点。计算节点作为 Red Hat 虚拟化主机（ RHP-H ）虚拟机管理程序安装在高可用性（ HA ）集群中。通过添加额外的 NetApp HCI 存储或计算节点以扩展可用资源，可以轻松扩展这种最低部署规模，以满足客户企业工作负载需求。</block>
  <block id="cfa4dd082cd557ce3a59a4d34edd808e" category="paragraph"><block ref="cfa4dd082cd557ce3a59a4d34edd808e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7ed512bbf9a7f1337a7898d7507c8c35" category="paragraph">有关 NetApp HCI 中计算和存储节点的详细信息，请参见<block ref="a82163c6ea3ec9190ef408eb65418f27" category="inline-link-rx"></block>。</block>
  <block id="6de472d02d58419b92d11d42b4590b1c" category="paragraph">Trident 是一款完全受支持的 NetApp 开源存储编排程序，适用于容器和 Kubernetes 分发版，包括 Red Hat OpenShift 。它适用于整个 NetApp 存储产品组合，包括作为 NetApp HCI 解决方案一部分部署的 NetApp Element 存储系统。Trident 允许最终用户从其 NetApp 存储系统配置和管理存储，而无需存储管理员干预，从而加快 DevOps 工作流的速度。管理员可以根据项目需求以及支持任意数量高级存储功能的存储系统型号配置多个存储后端，例如：压缩，特定磁盘类型或 QoS 级别，以保证特定性能。定义后，开发人员可以在其项目中利用这些后端来创建永久性卷声明（ Persistent Volume Claim ， PVC ）并按需将永久性存储附加到容器。</block>
  <block id="e4ae4f37d323768eeeef82d4ec093937" category="paragraph">RHV-M 可为 RHV 虚拟化环境中的物理和逻辑资源提供集中式企业级管理。我们提供了一个基于 Web 的 GUI ，其中包含不同的基于角色的门户，用于访问 RHV-M 功能。</block>
  <block id="3680acbe6d038708000f2f495bac2977" category="paragraph">RHV-M 通过开源社区驱动型 RESTful API 公开对 RHV 资源的配置和管理。它还支持与 Red Hat CloudForms 和 Red Hat Ansible 实现全面集成，以实现自动化和流程编排。</block>
  <block id="7b8fe62b53dc9bcfb3cfbef32801e3f9" category="paragraph">主机（也称为虚拟机管理程序）是为 VM 运行提供硬件资源的物理服务器。基于内核的虚拟机（ KVM ）可提供全面的虚拟化支持，而 Virtual Desktop Server Manager （ VDSM ）是主机代理，负责主机与 RHV-M 之间的通信</block>
  <block id="a610d9e091219f7d73179900d8064591" category="paragraph">RHV 支持两种类型的主机： RH-HH 和 RHEL 主机：</block>
  <block id="04bcc2f7ed841950672c145799b658f5" category="list-text">RHV-H-H 是一款基于 RHEL 的轻型最小操作系统，经过优化，可轻松将物理服务器设置为 RHV 虚拟机管理程序。</block>
  <block id="ae4c178ba5d246ba6841b7414f284d9b" category="list-text">RHEL 主机是运行标准 RHEL 操作系统的服务器，稍后会为其配置所需的订阅，以安装允许将物理服务器用作 RHV 主机所需的软件包。</block>
  <block id="bc2d533419760e86a3380cfffac96580" category="paragraph">RHV 可以部署在两种不同的架构中：将 RHV-M 作为基础架构中的物理服务器，或者将 RHV-M 配置为一个自托管引擎。本部署指南建议并专门使用自托管引擎部署，其中， RHL-M 是在与其他 VM 相同的环境中托管的 VM 。</block>
  <block id="18abb6a69860b19f1be2013c13702175" category="paragraph">要使子虚拟机和 RHV-M 实现高可用性，至少需要两个自托管节点，如下图所示。为了确保管理器虚拟机的高可用性， HA 服务已启用并在所有自行托管的引擎节点上运行。</block>
  <block id="dfc0d0328578b70b799656ff03bdec3c" category="paragraph">Red Hat OpenShift 容器平台是一个完全受支持的企业 Kubernetes 平台。Red Hat 对开源 Kubernetes 进行了多项增强，可提供一个应用程序平台，其中包含所有组件，这些组件均已完全集成，可用于构建，部署和管理容器化应用程序。使用 Red Hat OpenShift 4.4 ，可以通过在此解决方案中部署的 IPI 方法简化安装和管理过程。利用此部署方法，可以在不到一小时的时间内在 Red Hat 虚拟化基础上全面配置一个功能完备的 OpenShift 集群，该集群在集群和应用程序级别提供计量和监控功能。OpenShift 节点基于 RHEL CoreOS ， RHEL CoreOS 是一种不可变的系统映像，专用于运行基于 RHEL 的容器，可以根据最终用户的需求轻松地进行升级或扩展，从而帮助将公有云的优势提供给本地数据中心。</block>
  <block id="b94171e3fc119bc6b384efe0f02f4f36" category="inline-link-macro">接下来：架构概述：基于 RHV 的适用于 Red Hat OpenShift 的 NetApp HCI 。</block>
  <block id="a3ef7f8183a89ec8205d2551421970f3" category="paragraph"><block ref="a3ef7f8183a89ec8205d2551421970f3" category="inline-link-macro-rx"></block></block>
  <block id="d1efcf08698f462396af058073b4ad25" category="summary">借助 Anthos ，企业可以扩展其环境，以整合多个用户集群并在各个团队之间隔离工作负载。一个管理集群最多可支持五个用户集群，每个用户集群最多可支持二十五个节点。要将其他用户集群添加到您的部署中，请完成此页面上列出的步骤。</block>
  <block id="079e5119083e674b10f7fba6f1fe0956" category="doc">9. 部署其他用户集群：采用 Anthos 的 NetApp HCI</block>
  <block id="70b61ac6ad0930021e206411f51996c8" category="paragraph">借助 Anthos ，企业可以扩展其环境，以整合多个用户集群并在各个团队之间隔离工作负载。一个管理集群最多可支持五个用户集群，每个用户集群最多可支持二十五个节点。</block>
  <block id="dd044764601ab4f12255b94a778752c2" category="paragraph">要将其他用户集群添加到您的部署中，请完成以下步骤：</block>
  <block id="47b2f0fb8d3c91b84ada17a95763ab0c" category="list-text">将 `config.yaml` 文件复制到名为 `anthos-cluster02-config.yaml` 的新文件中。</block>
  <block id="474c2d341a9fa47f42c09fad5d150437" category="list-text">对新创建的文件进行以下编辑：</block>
  <block id="2169a3b5cd2e3c502143302f42be9028" category="list-text">使用（ # ）注释掉有关现有管理集群的章节。</block>
  <block id="953df9c5f91391b900aac29cb7e19b47" category="list-text">进入 `usercluster` 部分后，更新以下字段：</block>
  <block id="6cf200894197301246cc8fd8a8f121da" category="list-text">更新 `bigip` 部分下的分区名称。</block>
  <block id="5023c16d062ff66357f8c765794e6817" category="list-text">更新 `VIP` 部分下的 `controlplanvip` 和 `ingressvip` 值。</block>
  <block id="5e4aec5e88df45a92ab519773af99518" category="list-text">更新 `clustername` 值。</block>
  <block id="056689020832ddc8a3b060f308caa567" category="list-text">运行以下命令以再次检查配置文件，以验证是否没有语法错误。由于已删除 admin 部分，因此您必须参考名为 `kubeconfig` 的管理集群的 `kubeconfig` 文件（位于工作目录中）。</block>
  <block id="872241ee7dd570444449d90fbd6b731d" category="list-text">如果所有检查均按预期成功，则可以参考管理集群中的 `kubeconfig` 文件，以与首次创建集群非常相似的方式部署此新用户集群。</block>
  <block id="3f17024444b47529589c05c6bdfc693d" category="list-text">与先前的部署一样，此过程会运行几分钟，并可在屏幕上和 vCenter 中通过在 VM 填充时监控资源池来进行监控。完成后，您应该能够看到新的用户集群（四个节点）。</block>
  <block id="9521f39fdc1dff6732c73fa62e111399" category="image-alt">请参见新用户集群。</block>
  <block id="874ee1d82e2fa11dc6af3a03af3ff56c" category="list-text">您可以使用 kubectl 命令行工具和进程生成的 `kubeconfig` 文件（存储在工作目录中）对已部署的用户集群访问和执行命令。</block>
  <block id="d008c60ddb28c0bbad1dfabdd77327fc" category="doc">配置： storage-admin 任务</block>
  <block id="6c0ed744c737f30af364d229639c8288" category="paragraph">存储管理员必须配置以下资源：</block>
  <block id="64244866ddff81ded5e6aaa49055c6aa" category="list-text">以管理员身份登录到 NetApp ONTAP 集群。</block>
  <block id="3f8bc17bf8dd138aa2915235f0a9c0d3" category="image-alt">在 ONTAP 上创建 SVM</block>
  <block id="c9bd46366e9fb78552566f1e7a13633a" category="list-text">为 project-1 创建后端，并将其映射到专用于该项目的 SVM 。NetApp 建议使用 SVM 的 vsadmin 帐户将后端连接到 SVM ，而不是使用 ONTAP 集群管理员。</block>
  <block id="4a6c648106c1ff38316705bf986de601" category="list-text">同样，为 project-2 创建 Trident 后端，并将其映射到专用于 project-2 的 SVM 。</block>
  <block id="9a45d41277a2e8ce29709826a31fb482" category="list-text">接下来，创建存储类。为 project-1 创建存储类，并通过设置 storagePools 参数将其配置为使用后端专用于 project-1 的存储池。</block>
  <block id="4350d40426f8c94f6ca046609969adb2" category="list-text">同样，为 project-2 创建一个存储类，并将其配置为使用专用于 project-2 的后端存储池。</block>
  <block id="2ee847ebe129ae778860d6dd2da21cf6" category="list-text">创建 ResourceQuota 以限制 project-1 中的资源，从而从专用于其他项目的存储库请求存储。</block>
  <block id="c689ae18a0f5e47541dcec4afb6e187a" category="list-text">同样，也可以创建 ResourceQuota 来限制项目 2 中的资源，以便从专用于其他项目的存储库请求存储。</block>
  <block id="7f9ddc8224f28e1481299160807c876d" category="inline-link-macro">下一步：验证。</block>
  <block id="93a1440c4dcba82f234a9305a9445144" category="paragraph"><block ref="93a1440c4dcba82f234a9305a9445144" category="inline-link-macro-rx"></block></block>
  <block id="5568d55567785f154c987872c1684bfa" category="doc">工作负载迁移：采用 NetApp 的 Red Hat OpenShift</block>
  <block id="c0a9eeba0eb26952401d32c4022bc8eb" category="summary">Anthos 支持与 F5 BIG-IP 负载平衡器和 seesaw 负载平衡器进行原生集成，以便将每个 POD 中的服务公开给全世界。虽然解决方案可以使用其中一种，并且当前正在使用动态部署的 seesaw 负载平衡器，但本详细指南将帮助您配置 F5 BIG-IP 虚拟设备的安装和网络连接，该设备可以根据您的网络环境配置为双臂或三臂配置。</block>
  <block id="2bac40056a9b2a5acf1634175a8eddf6" category="doc">5. 部署和配置 F5 BIG-IP 虚拟版设备</block>
  <block id="a7e3cac6c4da1d570b960b7718bd13a8" category="paragraph">Anthos 支持原生与 F5 BIG-IP 负载平衡器集成，将每个 POD 中的服务公开给世界各地。</block>
  <block id="0e59591d0732d4a65214e886730b32fb" category="paragraph">此解决方案会使用 NDE 部署的 VMware vSphere 中部署的虚拟设备。F5 BIG-IP 虚拟设备的网络连接可以根据您的网络环境配置为双武装或三武装配置。本文档中的部署基于双武装配置。有关配置用于 Anthos 的虚拟设备的其他详细信息，请参见<block ref="f18a28d0c935319437c4d1b1e33e5728" category="inline-link-rx"></block>。</block>
  <block id="9f36ee132f12c08cb18b60e7f2ec3584" category="paragraph">要部署 F5 BIG-IP Virtual Edition 设备，请完成以下步骤：</block>
  <block id="ee5cd6f83412e93266bf30ff048db6ff" category="list-text">从 F5 下载虚拟应用程序 Open Virtual Appliance （ OVA ）文件<block ref="cafae381bde5e2381c6df42a3aa937c6" category="inline-link-rx"></block>。</block>
  <block id="fff9995f30a825c5d3e5709e7b78117a" category="admonition">要下载此设备，用户必须向 F5 注册。他们为 Big IP Virtual Edition 负载平衡器提供 30 天的演示许可证。NetApp 建议为设备的生产部署提供永久 10 Gbps 许可证。</block>
  <block id="81f55903cfc6ca1656f4fff2fc048d1f" category="list-text">右键单击基础架构资源池，然后选择 Deploy OVF Template 。此时将启动一个向导，用于选择您刚刚在步骤 1 中下载的 OVA 文件。单击下一步。</block>
  <block id="fdf7304b13d736c791bc745a330e7309" category="inline-image-macro">部署大 IP 设备</block>
  <block id="930835cee46ee894bb92b5627c286380" category="paragraph"><block ref="930835cee46ee894bb92b5627c286380" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b0c5dd13efd4858e2056c5d88267c2fa" category="list-text">单击下一步继续执行每个步骤，并接受显示的每个屏幕的默认值，直到显示存储选择屏幕为止。选择先前创建的 VM_Datastore ，然后单击下一步。</block>
  <block id="fbd07b7802c1a124a9359b27b9f46968" category="list-text">通过向导显示的下一个屏幕，您可以自定义要在环境中使用的虚拟网络。选择 VM_Network 作为外部字段，然后选择 Management_Network 作为管理字段。内部和 HA 用于 F5 BIG-IP 设备的高级配置，但未进行配置。这些参数可以单独使用，也可以配置为连接到非基础架构的分布式端口组。单击下一步。</block>
  <block id="5869793ca55f5fc50960cbd965138c70" category="inline-image-macro">部署 Big IP 设备，第 2 部分</block>
  <block id="b395903460348cc88bfae6fcad255f21" category="paragraph"><block ref="b395903460348cc88bfae6fcad255f21" category="inline-image-macro-rx" type="image"></block></block>
  <block id="93353313944577e80d34c3d9491db6ce" category="list-text">查看设备的摘要屏幕，如果所有信息都正确，请单击完成开始部署。</block>
  <block id="59273def45946bd28c3a5a7e5361a216" category="list-text">部署虚拟设备后，右键单击该设备并将其启动。它应在管理网络上收到 DHCP 地址。此设备基于 Linux ，并已部署 VMware Tools ，以便您可以查看它在 vSphere 客户端中收到的 DHCP 地址。</block>
  <block id="ca9eda681850d46169f2940362b1548f" category="inline-image-macro">部署 Big IP 设备，第 3 部分</block>
  <block id="9c7b1162de6217dfe316b9d57d67b16f" category="paragraph"><block ref="9c7b1162de6217dfe316b9d57d67b16f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d92e443c00989a23096c72b760af7de8" category="list-text">打开 Web 浏览器，然后使用上一步中的 IP 地址连接到设备。默认登录名称为 admin/admin ，首次登录后，设备会立即提示您更改管理员密码。然后，它将返回一个屏幕，您必须使用新凭据登录到该屏幕。</block>
  <block id="dbe135d0d5ae1eb2c137c81f0ce0bdfb" category="inline-image-macro">Big-IP 配置</block>
  <block id="372bcca75330a5dc5675a722489ff49b" category="paragraph"><block ref="372bcca75330a5dc5675a722489ff49b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2ea2d790bac2d3b7dcd52a6899d50cd1" category="list-text">第一个屏幕将提示您完成设置实用程序。单击下一步启动实用程序。</block>
  <block id="6e7de45031877e6ff00d3069664fbcaf" category="inline-image-macro">BIG-IP 配置，第 2 部分</block>
  <block id="cee8fbb1e19d03d10bbd1e01e76cf77b" category="paragraph"><block ref="cee8fbb1e19d03d10bbd1e01e76cf77b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="742f3d3ac34c7c1f1d8572e6efb21bfc" category="list-text">下一屏幕将提示您激活设备许可证。单击激活开始。在下一页出现提示时，粘贴注册下载时收到的 30 天评估许可证密钥或购买设备时获得的永久许可证。单击下一步。</block>
  <block id="b648434aacde9879c494bb807f510d0a" category="inline-image-macro">BIG-IP 配置，第 3 部分</block>
  <block id="abc7fe3f8ac78f7eef2f5ca730be051c" category="paragraph"><block ref="abc7fe3f8ac78f7eef2f5ca730be051c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="38d2bfb14ed98f122ce9d9b9cdb2a127" category="admonition">要使设备执行激活，在管理界面上定义的网络必须能够访问 Internet 。</block>
  <block id="6ba845d7cd0e966d0a2a21209623a5b4" category="list-text">在下一屏幕中，将显示最终用户许可协议（ EULA ）。如果许可证中的条款可接受，请单击 Accept 。</block>
  <block id="c14be37e927625fe613c8c559de70df1" category="list-text">下一个屏幕将计算经过的时间，以验证迄今为止所做的配置更改。单击 Continue 以恢复初始配置。</block>
  <block id="48f2578529c2f8c811567604f610cb5f" category="inline-image-macro">BIG-IP 配置，第 4 部分</block>
  <block id="7032ef2cca6e17b4d3590ecbbce7ff16" category="paragraph"><block ref="7032ef2cca6e17b4d3590ecbbce7ff16" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3c3d807fce3ffcb905b00324d2f7e2b9" category="list-text">此时将关闭配置更改窗口，设置实用程序将显示资源配置菜单。此窗口列出了当前已获得许可的功能以及虚拟设备和每个正在运行的服务的当前资源分配。</block>
  <block id="bfadbbb449bc1cce93c56d86a1a7df03" category="inline-image-macro">BIG-IP 配置，第 5 部分</block>
  <block id="a1855b129253775db78834b41759a5f6" category="paragraph"><block ref="a1855b129253775db78834b41759a5f6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="117c183bcbd703e6b0520f843e971c9b" category="list-text">单击左侧的平台菜单选项可对平台进行其他修改。修改包括设置使用 DHCP 配置的管理 IP 地址，设置主机名和设备安装所在的时区以及保护设备免受 SSH 访问。</block>
  <block id="c9fd499e062b35d18ef68efd381c6c09" category="inline-image-macro">BIG-IP 配置，第 6 部分</block>
  <block id="78df99aca47bd680a19574eebccf4249" category="paragraph"><block ref="78df99aca47bd680a19574eebccf4249" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fad130ca7ff2a3734a8b7547b3ebc404" category="list-text">接下来，单击网络菜单，在此可以配置标准网络功能。单击下一步开始标准网络配置向导。</block>
  <block id="f4e4f5e5f31a0b8312fb2338d9015dd0" category="inline-image-macro">BIG-IP 配置，第 7 部分</block>
  <block id="72cb9d54a4958e24c358ee0871b24454" category="paragraph"><block ref="72cb9d54a4958e24c358ee0871b24454" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ea93e45cff13f8d4083e18735eaa275b" category="list-text">向导的第一页配置冗余；保留默认值，然后单击下一步。在下一页中，您可以在负载平衡器上配置内部接口。接口 1.1 映射到 OVF 部署向导中标记为 Internal 的 vmnic 。</block>
  <block id="19ee7bbff17fca60aeffed9079a87c6b" category="inline-image-macro">BIG-IP 配置，第 8 部分</block>
  <block id="e6c2a22ac1d32011be5c32f5ed2653e0" category="paragraph"><block ref="e6c2a22ac1d32011be5c32f5ed2653e0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="df0f8d6301fee6c151f90502fb5514c6" category="admonition">此页面中的 "Self IP Address" ， "Networkmask" 和 "浮动 IP 地址 " 字段可以使用不可路由的 IP 地址作为占位符。如果要部署三种配置，也可以为其填充一个内部网络，该网络已配置为虚拟子系统的分布式端口组。要继续使用向导，必须完成这些操作。</block>
  <block id="fe112785aa60f27c8a6b38da41a26ff2" category="list-text">在下一页中，您可以配置一个外部网络，用于将服务映射到 Kubernetes 中部署的 Pod 。从 VM_Network 范围中选择一个静态 IP ，相应的子网掩码以及同一范围中的浮动 IP 。接口 1.2 映射到 OVF 部署向导中标记为外部的 vmnic 。</block>
  <block id="803c8b846cb5b5c6c8d5a2b0b07f4dba" category="inline-image-macro">BIG-IP 配置，第 9 部分</block>
  <block id="6aea1efd59f50fb0e4b413b95ca247fe" category="paragraph"><block ref="6aea1efd59f50fb0e4b413b95ca247fe" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c3966f18c8da763e8d9f315b3e44811e" category="list-text">在下一页中，如果要在环境中部署多个虚拟设备，则可以配置内部 HA 网络。要继续操作，您必须填写 Self-IP Address 和 Netmask 字段，并且必须选择 interface 1.3 作为 VLAN 接口，此接口将映射到 OVF 模板向导定义的 HA 网络。</block>
  <block id="9cd42351da162e75b1a0178bdd0ded20" category="inline-image-macro">BIG-IP 配置，第 10 部分</block>
  <block id="ca2835359be5e4e2e79ed5b6fd777515" category="paragraph"><block ref="ca2835359be5e4e2e79ed5b6fd777515" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0d469ac29aab926968093104ad6265df" category="list-text">下一页用于配置 NTP 服务器。然后单击下一步继续进行 DNS 设置。DHCP 服务器应已填充 DNS 服务器和域搜索列表。单击下一步接受默认值并继续。</block>
  <block id="97a60c27b370d45c17075cff06f473a3" category="list-text">在向导的其余部分中，单击 " 下一步 " 继续进行高级对等设置，本文档不会介绍此设置的配置。然后单击完成退出向导。</block>
  <block id="0953ce81fac634b21f33efe8dee24c28" category="list-text">为环境中部署的 Anthos 管理集群和每个用户集群创建单独的分区。单击左侧菜单中的 System ，导航到 Users ，然后单击分区列表。</block>
  <block id="ad99125325ea694a08a4db92eabb18a1" category="inline-image-macro">BIG-IP 配置，第 11 部分</block>
  <block id="d71ac8787685cb0f3b8f800520d684b1" category="paragraph"><block ref="d71ac8787685cb0f3b8f800520d684b1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="95c498526dc91468185eb4dd34bbf503" category="list-text">显示的屏幕仅显示当前通用分区。单击右侧的 Create 以创建第一个附加分区，并将其命名为 `Anthos-Admin` 。然后，单击 Repeat ，将分区命名为 `Anthos-Cluster1` ，然后再次单击 Repeat 按钮将下一个分区命名为 `Anthos-Cluster2` 。最后，单击 " 完成 " 以完成向导。此时将返回分区列表屏幕，其中列出了所有分区。</block>
  <block id="938c47fe40c045ae4bc242bf2339ab01" category="inline-image-macro">BIG-IP 配置，第 12 部分</block>
  <block id="598f9d349e1cb4c318e78a0d182dd743" category="paragraph"><block ref="598f9d349e1cb4c318e78a0d182dd743" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4328175000a344a94e1a39333c7cd35d" category="inline-link-macro">接下来：完成 Anthos 前提条件</block>
  <block id="b357d59fea80fcc09514ddeadd701f0e" category="paragraph"><block ref="b357d59fea80fcc09514ddeadd701f0e" category="inline-link-macro-rx"></block></block>
  <block id="6f412bb9e0340913f70fb3371d6ac850" category="summary">本文档中介绍的解决方案基于 NetApp HCI ， VMware vSphere 和 Anthos 混合云 Kubernetes 数据中心解决方案的坚实基础。</block>
  <block id="7e897f23ed71aef1c0a8acf1ae54e9e4" category="doc">解决方案组件</block>
  <block id="20fdf080148c72a8459dd5599327d859" category="list-text">* 可预测。 * 在多租户环境中，最大的挑战之一是为所有工作负载提供一致，可预测的性能。运行多个企业级工作负载可能会导致资源争用，其中一个工作负载可能会影响另一个工作负载的性能。NetApp HCI 通过 NetApp Element 软件本机提供的存储服务质量（ QoS ）限制缓解了这一顾虑。Element 支持精细控制每个应用程序和卷，有助于消除资源争用问题，并满足企业性能 SLA 的要求。NetApp HCI 多租户功能有助于消除许多传统的性能相关问题。</block>
  <block id="718de2922a5e0f8af4374175c05140b4" category="list-text">* 灵活。 * 前几代超融合基础架构通常需要固定的资源比率，将部署限制为四节点和八节点配置。NetApp HCI 是一种可独立扩展计算和存储资源的分解式超融合基础架构。独立扩展可防止成本高昂且效率低下的过度配置，消除控制器 VM 开销中 10% 到 30% 的 HCI 费用，并简化容量和性能规划。NetApp HCI 提供混合搭配的小型，中型和大型存储和计算配置。通过提供的架构设计选项，您可以自信地根据自己的需求进行扩展，从而使 HCI 适用于核心的第 1 层数据中心应用程序和平台。NetApp HCI 采用机箱或节点级别的组件设计。在由存储或计算节点组成的混合配置中，每个机箱可以容纳四个节点。</block>
  <block id="e76eb6e195b36635e1a5aba857c6d163" category="list-text">* 简单。 * IT 社区中的一项驱动任务是简化部署并自动执行日常任务，消除用户出错的风险，同时腾出资源专注于更有趣，价值更高的项目。NetApp HCI 可以通过简化部署和持续管理来帮助您的 IT 部门提高灵活性和响应能力。NetApp 部署引擎（ NetApp Deployment Engine ， NDE ）工具可简化物理基础架构的配置和部署，包括安装 VMware vSphere 环境以及集成适用于 vCenter Server 的 NetApp Element 插件。借助 NDE ，可以轻松执行未来的扩展操作。</block>
  <block id="dba9b03ccb1c89f06fcb169677606352" category="section-title">NetApp IP 配置</block>
  <block id="5978a8c3599e28db6927be149ae82ff4" category="paragraph">NetApp HCI 是一款企业级离散混合云基础架构（ HCI ）解决方案，可通过一个灵活，可扩展且易于管理的双机架单元（ 2RU ）四节点组件提供计算和存储资源。此外，还可以为其配置 1RU 计算和服务器节点。本指南中引用的 NetApp HCI 部署由四个 NetApp HCI 存储节点和两个 NetApp HCI 计算节点组成。计算节点作为 VMware ESXi 虚拟机管理程序安装在 HA 集群中，而无需强制实施 VMware DRS 反关联性规则。通过添加额外的 NetApp HCI 存储或计算节点以扩展可用存储，可以轻松扩展这种最低部署规模，以满足客户企业工作负载需求。下图显示了 NetApp HCI 的最低配置。</block>
  <block id="15916d24d9315b54181a65f92ca2674b" category="image-alt">NetApp HCI 最低配置</block>
  <block id="396b9f0cc2f6ce76e126580c2ffa9991" category="paragraph">NetApp HCI for Anthos 的设计在最低初始配置中包含以下组件：</block>
  <block id="918f2f163e68f0a63cf6c5bb0f58bea3" category="list-text">运行 VMware vSphere 6.7U3 的 NetApp H 系列计算节点</block>
  <block id="fd2a76b02a47525da77b129cff644a0a" category="paragraph">有关 NetApp HCI 中计算和存储节点的详细信息，请参见<block ref="497dd93ca7f22c00fab80ebba794a240" category="inline-link-rx"></block>。</block>
  <block id="3938cfdbe176bad61cedb25bdb572858" category="section-title">NetApp Element 软件</block>
  <block id="376857a931856167ce8224d2be9b5923" category="paragraph">iSCSI 登录重定向是 NetApp Element 软件集群的一个关键部分。收到主机登录请求后，节点将根据 IOPS 和卷的容量要求确定集群中应由哪个成员处理流量。卷分布在 NetApp Element 软件集群中，如果单个节点处理的卷流量过多或添加了新节点，则会重新分配这些卷。给定卷的多个副本会在阵列中分配。这样，如果节点发生故障后又发生卷重新分布，则除了注销和登录并重定向到新位置之外，对主机连接不会产生任何影响。通过 iSCSI 登录重定向， NetApp Element 软件集群是一种自我修复型横向扩展架构，能够实现无中断升级和操作。</block>
  <block id="efc00fce2a8307e83f48d74e73307357" category="list-text">启用了 * VPN 路由 / 转发（ VFR ）的 VLAN 。 * 为了进一步支持数据中心的安全性和可扩展性，您可以使用 NetApp Element 软件为任何租户 VLAN 启用类似 VRF 的功能。此功能增加了以下两项关键功能：</block>
  <block id="286089ad22f469d193dafe8fa35c6257" category="list-text">* IP 子网重叠或重复。 * 此功能可用于向租户环境添加模板，从而可以从同一 IP 子网为每个租户 VLAN 分配 IP 地址。对于扩展和保留 IP 空间非常重要的服务提供商环境，此功能非常有用。</block>
  <block id="2b4a07a0574dd98e537b1deffda95824" category="list-text">* 重复数据删除。 * 系统仅存储唯一的 4 K 块。任何重复的 4K 块都会自动与已存储的数据版本关联。数据位于块驱动器上，并通过 Element Helix 数据保护进行镜像。此系统可显著减少系统中的容量消耗和写入操作。</block>
  <block id="0a71bdde99289d970ec9c69987f724e3" category="list-text">* 精简配置。 * 此功能可在需要时提供适当数量的存储，从而消除因过度配置卷或未充分利用卷而导致的容量消耗。</block>
  <block id="25d5e89209092178b65feae2a9ebaee8" category="paragraph">* 注： * Element 专为自动化而设计。上述所有存储功能均可通过 API 进行管理。这些 API 是用户界面用来控制系统是直接通过 Element 执行操作还是通过 vSphere Element 插件执行操作的唯一方法。</block>
  <block id="01f7a928aff59fa9181470c54dec10e9" category="paragraph">VMware vSphere 是行业领先的虚拟化解决方案，它基于 VMware ESXi 虚拟机管理程序构建，并由 vCenter Server 管理，可提供企业数据中心通常需要的高级功能。在将 NDE 与 NetApp HCI 结合使用时，会配置并安装 VMware vSphere 环境。部署环境后，可以使用以下功能：</block>
  <block id="1918f5477c19e37d5a34079810f49969" category="list-text">* 集中式管理。 * 通过 vSphere ，各个虚拟机管理程序可以分组到数据中心并组合到集群中，从而使高级组织可以轻松地对资源进行整体管理。</block>
  <block id="cdfc7f53ee27b171240808ee2c28d38b" category="list-text">* VMware HA 。 * 此功能允许虚拟子系统在其主机不可用时自动重新启动。启用此功能后，虚拟子系统将成为容错系统，当环境中发生物理故障时，虚拟基础架构的中断将降至最低。</block>
  <block id="3b76fc975f49b5b2ea46e80551e110b5" category="list-text">* VMware 分布式资源计划程序（ DRS ）。 * VMware vMotion 允许在满足特定用户定义的阈值时无中断地在主机之间移动子系统。此功能可使虚拟子系统在环境中具有高可用性。</block>
  <block id="a87f18fefb2f4502590080cbfe6246cf" category="list-text">* vSphere 分布式交换机（ VDS ）。 * 虚拟交换机由 vCenter Server 控制，通过创建映射到每个主机上的物理接口的端口组，可以集中配置和管理每个主机的连接。</block>
  <block id="72efb373513d77a08aa5dd7e375a418f" category="section-title">Anthos</block>
  <block id="2a7b0a47ef96e1d4b1afefe06a74297a" category="paragraph">Anthos 是一款混合云 Kubernetes 数据中心解决方案，可帮助企业构建和管理现代混合云基础架构，同时采用专注于应用程序开发的灵活工作流。基于 VMware 的 Anthos 是一种基于开源技术的解决方案，在基于 VMware vSphere 的基础架构中在内部运行，该基础架构可以与 Google Cloud 中的 Anthos GKEE 进行连接和互操作。通过采用容器，服务网状和其他转型技术，企业可以在本地和基于云的环境中体验一致的应用程序开发周期和可随时投入生产的工作负载。下图展示了 Anthos 解决方案以及内部数据中心中的部署如何与云中的基础架构互连。有关 Anthos 的详细信息，请参见位于的 Anthos 网站<block ref="6c38b407e9371b467dc600778f1c721d" category="inline-link-rx"></block>。</block>
  <block id="ed4b514e0a9558c7acbec81ecc5fe0e1" category="list-text">* 适用于 Kubernetes 应用程序的 Google Cloud Marketplace 。 * 一个精心设计的容器应用程序目录，可用于轻松部署。</block>
  <block id="b2f70465e1ea6dcdc0843dc8ed3b7f55" category="list-text">* 迁移 for Anthos.* 将物理服务和 VM 从内部环境自动迁移到云。</block>
  <block id="52bc26b321a0b4cd1f91f7961a0783c8" category="list-text">* Stackdriver.* Google 提供的管理服务，用于记录和监控云实例。</block>
  <block id="f9b3fef27d8b4aefadf2ae7eb3e634ff" category="image-alt">Anthos 架构。</block>
  <block id="11a034a02af9e10597c2d49f1883839c" category="section-title">容器和 Kubernetes 流程编排</block>
  <block id="0984ea6af510354c7aa97f5cde69da91" category="paragraph">容器技术已为开发人员提供了很长时间。但是，随着越来越多的企业采用特定于应用程序的工作负载要求， IT 才成为数据中心架构和设计的核心概念。</block>
  <block id="60f6fc9469d174cc8e1b1b696967c0c0" category="paragraph">传统开发环境需要在裸机或虚拟服务器上部署专用开发主机。此类环境要求每个应用程序都有自己的专用计算机，并具有操作系统（ OS ）和网络连接。这些计算机通常必须由企业系统管理团队管理，他们必须考虑安装的应用程序版本以及主机操作系统修补程序。相比之下，按设计部署容器所需的开销更少。只需将应用程序代码和支持库打包在一起，因为所有其他服务都取决于主机操作系统。开发人员可以专注于应用程序开发流程，而不是管理完整的虚拟机（ VM ）环境。</block>
  <block id="f90dfb80de662de3fb1bd27d07612906" category="paragraph">随着容器技术在企业环境中开始受到吸引力，许多企业功能（例如容错和应用程序扩展）都是需要的和预期的。为此， Google 与 Linux 基金会合作，组建了 Cloud 原生计算基金会（ Cloud Computing Foundation ， CNCF ）。他们共同推出了 Kubernetes （ K8s ），这是一个用于编排和管理容器的开源平台。Kubernetes 由 Google 设计，是 Omega 和 Borg 容器管理平台的后继产品，这些平台在其数据中心中已使用过。</block>
  <block id="332476dddb31074656d12a580d4b3902" category="section-title">Anthos GKE</block>
  <block id="e57527d7648b4bc1baa9dfe02c5b64c6" category="paragraph">Anthos GKEE 是经过认证的 Kubernetes 在 Google Cloud 中的分销商。它可以让最终用户轻松部署托管的生产就绪型 Kubernetes 集群，使开发人员能够主要专注于应用程序开发，而不是管理其环境。在 Anthos GKEE 中部署 Kubernetes 集群具有以下优势：</block>
  <block id="91ef673213163218a5f274794fdbef3b" category="list-text">* 简化应用程序部署。 * Anthos GKEE 支持快速开发，部署和更新应用程序和服务。通过简单地描述应用程序容器所需的预期系统资源（计算，内存和存储）， Kubernetes Engine 可以自动配置和管理集群环境的生命周期。</block>
  <block id="d94acc3c901f153dac6fb45ed4526321" category="list-text">* 确保集群的可用性。 * 使用 Google Cloud 控制台中内置的信息板，可使环境变得极其易于访问和管理。Google Site Reliability Engineers （ SRE ）会持续监控 Anthos GKEE 集群，通过收集定期指标并观察分配的系统资源的使用情况来确保集群按预期运行。用户还可以利用可用的运行状况检查来确保其部署的应用程序具有高可用性，并在发生异常时轻松恢复。</block>
  <block id="98aacf26f3f9b4eccbaa6528f7ffc85f" category="list-text">* 在 Google Cloud 中保护集群安全。 * 最终用户可以通过自定义 Google Cloud 的全球虚拟私有云中提供的网络策略来确保集群安全且可访问。可以将公有服务放置在一个全局 IP 地址的后面，以实现负载平衡。一个 IP 可以帮助为应用程序提供高可用性，并防止分布式拒绝服务（ DDoS ）和其他可能妨碍服务性能的攻击。</block>
  <block id="210e30f19596794c401b3f632512629d" category="list-text">* 轻松扩展以满足需求。 * 最终用户可以在其集群上启用自动扩展，轻松应对计划内和意外增加的应用程序需求。自动扩展有助于通过在高需求时段增加容量来确保系统资源始终可用。它还允许集群在高峰需求减少后恢复到先前的状态和大小。</block>
  <block id="dd14ec821fcb89adefea8641db4c792b" category="paragraph">VMware 上的 Anthos 是部署在最终用户私有数据中心的 Google Kubernetes 引擎的扩展。企业可以部署设计用于在内部 Kubernetes 集群中 Google Cloud 容器中运行的相同应用程序。VMware 上的 Anthos 具有以下优势：</block>
  <block id="683d0166350b6d92e8f1f77b1f34f1f5" category="list-text">* 节省成本。 * 最终用户可以通过将自己的物理资源用于应用程序部署，而不是在 Google Cloud 环境中配置资源来显著节省成本。</block>
  <block id="8af05e59ee5758dd03ef2ce006304750" category="list-text">* 先开发再发布。 * 在开发应用程序时，可以使用内部部署，这样可以在本地数据中心的隐私环境下测试应用程序，然后再在云中公开发布。</block>
  <block id="505a8f265dca3d64b32e85a52991100b" category="paragraph"><block ref="505a8f265dca3d64b32e85a52991100b" category="inline-link-macro-rx"></block></block>
  <block id="b917a2bfe0dd0160c3ad88751f355f5d" category="inline-link-macro">下一步：集群管理员任务。</block>
  <block id="7a9f102fda0e3438bff54da4acdbccbb" category="paragraph"><block ref="7a9f102fda0e3438bff54da4acdbccbb" category="inline-link-macro-rx"></block></block>
  <block id="f41043c73a62a435944d8abfb45094cb" category="list-text">适用于受管集群的 Red Hat OpenShift 集群（高于 4.5.3 版）</block>
  <block id="374185e020d06ceed3f020af518a1c14" category="list-text">适用于 Kubernetes 的 Red Hat 高级集群管理订阅</block>
  <block id="9afcd045ce0197d71ba631e3fbe43095" category="paragraph">高级集群管理是 OpenShift 集群的一个附加功能，因此，根据在集线器和受管集群中使用的功能，硬件资源具有某些要求和限制。在对集群进行规模估算时，您需要考虑这些问题。请参见文档<block ref="a5d2b81b971715f092f7296621743e22" category="inline-link-rx"></block> 有关详细信息：</block>
  <block id="65a62318377ddbc5fe3f73548dc3d677" category="paragraph">或者，如果集线器集群具有专用节点来托管基础架构组件，并且您希望仅在这些节点上安装高级集群管理资源，则需要相应地为这些节点添加容错和选择器。有关详细信息，请参见文档<block ref="df4d7b25534e8f26e8ab3acc1c646101" category="inline-link-rx"></block>。</block>
  <block id="3f71071db67a1d6b5b63e2d9cc6b0e93" category="inline-link-macro">下一步：安装。</block>
  <block id="2a9cc50366c16ec40c1a5132f8fe5533" category="paragraph"><block ref="2a9cc50366c16ec40c1a5132f8fe5533" category="inline-link-macro-rx"></block></block>
  <block id="03cae7751c31cc76a90cf5e94e86eb3a" category="section-title">监管和风险</block>
  <block id="9d7264067197bc9ff368288f98750fd6" category="paragraph">通过此功能，您可以为不同的集群定义合规性策略，并确保集群遵循此策略。您可以对策略进行配置，以通知或修复任何规则偏差或违规行为。</block>
  <block id="f6262e5369e2b989638aaa9d4f333d91" category="image-alt">创建合规性策略</block>
  <block id="0a1575621f2b12d5216e6d1c95eed2e6" category="list-text">配置完所有必需的策略后，可以通过高级集群管理监控和修复任何策略或集群违规。</block>
  <block id="38c080ff2128a92954fb61942ea497c0" category="image-alt">策略监控</block>
  <block id="465d1c9d2d9ea711e43e2e20077e10f9" category="inline-link-macro">接下来：功能—可观察性。</block>
  <block id="056789fad8ccaddf0ac3b4ef0a68b61a" category="paragraph"><block ref="056789fad8ccaddf0ac3b4ef0a68b61a" category="inline-link-macro-rx"></block></block>
  <block id="4b6826f4f20a8e7e7a3b42ccb81d514f" category="section-title">VM 克隆</block>
  <block id="0ea820e58acf3d0c3acac3f64518c517" category="image-alt">VM 克隆架构</block>
  <block id="a1dbf280b3b5da141010127710d68ba7" category="paragraph">要考虑 CSI 卷克隆的某些限制：</block>
  <block id="7f8cb9ac957166d3d134bf9df8861f5b" category="list-text">源 PVC 和目标 PVC 必须位于同一项目中。</block>
  <block id="058d8141e417cb514573ba1a70e2e0cd" category="list-text">在同一存储类中支持克隆。</block>
  <block id="611b1b227968093cc5c73e69f7ac0fda" category="list-text">只有当源卷和目标卷使用相同的卷模式设置时，才能执行克隆；例如，一个块卷只能克隆到另一个块卷。</block>
  <block id="557d036c1a69ab0889c0820deb1e88de" category="paragraph">可以通过两种方式克隆 OpenShift 集群中的 VM ：</block>
  <block id="e1230e5b1f51d793ea14fb31df500399" category="list-text">关闭源 VM</block>
  <block id="29ec5d7b455e19c4f8141df877a9af0a" category="list-text">使源 VM 保持活动状态</block>
  <block id="84d19f7437a8329c49099517eccd37dc" category="section-title">关闭源 VM</block>
  <block id="375000776ee4694734b1d066c46e7096" category="list-text">单击克隆虚拟机并提供新虚拟机的详细信息。</block>
  <block id="b22c43b0906ef8ba78f3fbb7d5b1ff20" category="image-alt">克隆虚拟机</block>
  <block id="cf702a835a3fd4b019603d29ec402106" category="list-text">单击克隆虚拟机；此操作将关闭源 VM 并启动克隆 VM 的创建。</block>
  <block id="82cfb538b52ee01d4a9901d4d2cfad4d" category="list-text">完成此步骤后，您可以访问并验证克隆的虚拟机的内容。</block>
  <block id="3c7aa222cd4c9ee079b31567a347c05f" category="paragraph">也可以通过克隆源 VM 的现有 PVC ，然后使用克隆的 PVC 创建新 VM 来克隆现有 VM 。此方法不需要关闭源 VM 。要克隆虚拟机而不关闭它，请完成以下步骤。</block>
  <block id="545ce69617c1c157be6073dcc63bfbae" category="list-text">单击克隆 PVC 并提供新 PVC 的详细信息。</block>
  <block id="e659422cf737778a2fb1cdd50cc8003e" category="image-alt">克隆 PVC</block>
  <block id="07c24ffdbaf9583216cca9f030058c11" category="list-text">然后单击克隆。这样就会为新虚拟机创建一个 PVC 。</block>
  <block id="19e005e0709674157e554800d5ea7ef9" category="list-text">成功创建 VM 后，访问并验证新 VM 是否为源 VM 的克隆。</block>
  <block id="fdbfc131399a8776fecd30fa821de4d0" category="inline-link-macro">接下来：工作流：从 Snapshot 创建 VM 。</block>
  <block id="c5c4205f35e83d4dc33cfa7821ceb5a7" category="paragraph"><block ref="c5c4205f35e83d4dc33cfa7821ceb5a7" category="inline-link-macro-rx"></block></block>
  <block id="acfb8ed0b738c5423eb0a1962b72d983" category="doc">7. 访问控制台 /Web 控制台： RHV 上适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="1517e0ab9297a2179c844e43e15535f9" category="paragraph">要访问控制台或 Web 控制台，请完成以下步骤：</block>
  <block id="3d80b81e2c565f0e8aff0bf400c060b5" category="list-text">要通过 CLI 访问 OCP 集群，请提取 `oc` 命令行工具 tar 文件，并将其内容放置在用户路径中的目录中。</block>
  <block id="d02f44b01675b9d908509c367032b8ab" category="list-text">要通过 CLI 与集群交互，您可以使用由 IPI 进程提供的 `kubeconfig` 文件，该文件位于启动安装程序的文件夹内的 ` /auth` 目录中。要轻松与集群交互，请导出在目录中创建的文件。成功部署集群后，将显示文件位置和以下命令。</block>
  <block id="977fca81ea0d7ef26808a4d9c331ba72" category="list-text">验证您是否有权访问集群以及节点是否处于就绪状态。</block>
  <block id="507923d3a8980dd3c4a534853c9010d6" category="list-text">使用成功部署集群后提供的凭据登录到 Web 控制台 URL ，然后验证对集群的 GUI 访问。</block>
  <block id="5bb7e93aebf502a313d04f1a5c2b6a77" category="paragraph"><block ref="5bb7e93aebf502a313d04f1a5c2b6a77" category="inline-image-macro-rx" type="image"></block></block>
  <block id="aa4518c2c6bc34d2183ed94097586645" category="inline-link-macro">下一步： 8.配置工作节点以运行存储服务</block>
  <block id="33ca91b51c20df94a32b1801c25cbc79" category="paragraph"><block ref="33ca91b51c20df94a32b1801c25cbc79" category="inline-link-macro-rx"></block></block>
  <block id="b2f35a84b813ef160b585d350d2fcd58" category="summary">在裸机上使用 Anthos 与硬件无关的功能，您可以选择针对您的用例优化的计算平台。因此，您可以匹配现有基础架构并减少资本支出。</block>
  <block id="5f95fbda20eeb9ce0859afe2ac6f42fa" category="doc">解决方案要求</block>
  <block id="7d4009b9254a61f6afd71a2656a3a78f" category="section-title">计算：自带服务器</block>
  <block id="dee41946d9d6ca32131352cb4374f12b" category="paragraph">下表列出了实施此解决方案所需的最低计算硬件组件数量，尽管所使用的硬件型号可能因客户要求而异。</block>
  <block id="c64518704ce0c0d5501a45763f464276" category="cell">使用情况</block>
  <block id="602f72fff77475a16eff159759656261" category="cell">硬件和型号</block>
  <block id="06e9950a2c1bb489cf54d03d4547e913" category="cell">管理节点</block>
  <block id="b349dcffed4594674c8ce6c91e72e42f" category="cell">Cisco UCS B200</block>
  <block id="fcb81a84511da525a1581c4ccc00d0fb" category="cell">工作节点</block>
  <block id="4867cc2ab4385d91c3a36d6ace67a984" category="cell">HP ProLiant DL360</block>
  <block id="2c0b20f0fbc047d58ca10a50c6a32bc7" category="section-title">存储： NetApp ONTAP</block>
  <block id="604e83a5a6c4302c60ee5e331dcd342c" category="paragraph">下表列出了实施解决方案所需的最低存储硬件组件数量，尽管所使用的硬件型号可能因客户要求而异。</block>
  <block id="8bf5bd6530ea430a8edac8a795165179" category="cell">NetApp AFF</block>
  <block id="eb8440af98c502b8095408e970297e6b" category="cell">NetApp AFF A300</block>
  <block id="e8d610d6c2d243856beaade33b5aa123" category="cell">2 个（ 1 个 HA 对）</block>
  <block id="b6ce11f078022a4ab598b8016db52a13" category="paragraph">下表中标识的软件版本由 NetApp 和我们的合作伙伴使用，用于向 NetApp 验证解决方案，但所使用的软件组件可能因客户要求而异。</block>
  <block id="3d945423f8e9496c429a5d8c65b4604f" category="cell">Ubuntu</block>
  <block id="128b9c7509f09d8ff4b08e87def0ac74" category="cell">操作系统位于 3 个管理员上</block>
  <block id="836a05a21ac6df3b6bcf9838895b017e" category="cell">基于 Worker4 的操作系统</block>
  <block id="bbd243e896202aa0eb00ce19d8a7fea8" category="cell">基于 Worker3 的操作系统</block>
  <block id="4077fabc9a8b0e761cfd9bf752e03c8a" category="cell">18.04</block>
  <block id="aa1fc3398e84bda331b47203c1e53ad5" category="cell">CentOS</block>
  <block id="aaad0494526f271ca02ebd06a79e7382" category="cell">基于 Worker2 的操作系统</block>
  <block id="2a568439f8e6ff92daa9925ce8a03adf" category="cell">8.2</block>
  <block id="7ac53708026d8515ce15cc154e95f46b" category="cell">基于 Worker1 的操作系统</block>
  <block id="d6422a625045167156b3c0d85ca23ebf" category="cell">8.1</block>
  <block id="ca9f0d77f73d954e88e6ab43539ac7cb" category="cell">1.6.0</block>
  <block id="ea704238343d48baa3a08f039015185f" category="cell">存储 OS</block>
  <block id="f33749dd101d316dcf2e6953732629f9" category="cell">9.7P8.</block>
  <block id="8fe1ffd8f7dcf339dd4f34aabb6e1c99" category="cell">容器存储管理</block>
  <block id="a84024ce06ef98519b3b51300b2c8fbf" category="cell">20.10</block>
  <block id="37979dccdf7857a1abffb7df7c837853" category="admonition">此多操作系统环境显示了与裸机解决方案上受支持的操作系统版本的 Anthos 的互操作性。我们预计，客户将在部署时对一个或一小部分操作系统进行标准化。</block>
  <block id="d94e09dc1956d9513e690f8d24852f05" category="inline-link">裸机文档上的 Anthos</block>
  <block id="dea0bcd20b41ad5a5b5830e0facf5d5d" category="paragraph">有关裸机硬件和软件上的 Anthos 要求，请参见<block ref="39597b4f74e08019db4cace51500cfd6" category="inline-link-rx"></block> 页面。</block>
  <block id="71196ec10a92c76a666a93f55523b96e" category="inline-link-macro">接下来：部署摘要。</block>
  <block id="1b8d67e147d4d9c532832778cca5fee8" category="paragraph"><block ref="1b8d67e147d4d9c532832778cca5fee8" category="inline-link-macro-rx"></block></block>
  <block id="ae6f5747bf29f889c1d28208afab2a1a" category="doc">部署应用程序</block>
  <block id="cef52206f11ced919c8d0dd4b2c791a4" category="paragraph">以下各节介绍了如何安装和部署应用程序。</block>
  <block id="d0954433c0b62861850b87d9cba7599f" category="inline-link-macro">下一步：从 GitHub 获取代码</block>
  <block id="255a6bf7e1d34563f76daaf2b6cd6184" category="paragraph"><block ref="26e27ac56fb4c03c9632ab9bd4fc068b" category="inline-link-macro-rx"></block>。</block>
  <block id="889e515dfd0973ffc980c7c6ea995a4d" category="doc">部署 NetApp HCI —在边缘进行人工智能推理</block>
  <block id="703b25a91a6809c7976a02a2aba7b783" category="doc">在 VMware 虚拟基础架构中部署和配置 ONTAP Select （自动化部署）</block>
  <block id="cdfcf4d51311eae8f2898f49dbb51391" category="paragraph">要在 VMware 虚拟基础架构中部署和配置 ONTAP Select 实例，请完成以下步骤：</block>
  <block id="9d2169c1c2855b78a7aeaa4f42d27dc7" category="inline-link">NetApp 支持站点</block>
  <block id="f6991e15085ac27a0087850b452e4017" category="list-text">从 Deployment Jump VM 中，登录到<block ref="610cab0a0d2eeff0ada3a9d8b28a0870" category="inline-link-rx"></block> 并下载适用于 ESXi 的 ONTAP Select OVA 。</block>
  <block id="749a26ebea78daea7aa7392b0eb35432" category="list-text">创建目录 OTS 并获取用于部署 ONTAP Select 的 Ansible 角色。</block>
  <block id="57879b3dfe9dfd2fc76edf45d1c4ee50" category="list-text">安装前提条件库。</block>
  <block id="6e0ff577e6d823a18899bc0cf9bf71fc" category="list-text">打开 VI 编辑器，创建一个变量文件 `ots_deploy_vars.yaml` ，然后填写以下参数：</block>
  <block id="595c9d10bb77f6838008f3ea7a4cad50" category="paragraph">更新变量以匹配您的环境。</block>
  <block id="7cd0d04c8a60aae81b83ddaf628abaf0" category="list-text">打开 VI 编辑器，创建一个变量文件 `ots_cluster_vars.yaml` ，并使用以下参数填写该变量：</block>
  <block id="72e4a28180db32208c237c5a621cb0bb" category="list-text">启动 ONTAP Select 设置。</block>
  <block id="18b30c6ff5fdcdd9d0a831feb43fbc40" category="list-text">使用 `deDeploy pwd ` （ ONTAP Select VM 实例）， `vcvc_password` （ vCenter ）， `ontap_pwd` （ ONTAP 登录密码）， `host_esx_password` （ VMware ESXi ）， `host_password` （ vCenter ）和 `deDeploy _password` （ ONTAP Select VM 实例）更新命令。</block>
  <block id="3a3a2124344e9eec892ebf037841668d" category="section-title">配置 ONTAP Select 集群—手动部署</block>
  <block id="2c34d2d07d8c4756cb68ab7b0e7b71b7" category="paragraph">要配置 ONTAP Select 集群，请完成以下步骤：</block>
  <block id="c3ecfa82748828bfbdf2d03f86f8b4bb" category="list-text">打开浏览器并使用其集群管理 IP 登录到 ONTAP 集群的 System Manager 。</block>
  <block id="178adf645e0b5be312d9a846daf76834" category="list-text">在信息板页面上，单击容量下的准备存储。</block>
  <block id="5fd091a4d688abb665a32f0a5616040c" category="paragraph"><block ref="5fd091a4d688abb665a32f0a5616040c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="08afbcd18f79dd9c456ba892b4701f04" category="list-text">选择单选按钮继续而不使用板载密钥管理器，然后单击准备存储。</block>
  <block id="32d5c93ea324190fcfd0b77ab6e0ff1d" category="list-text">在网络页面上，单击广播域窗口中的 ` +` 符号。</block>
  <block id="9e14d2ebd900e7610939fc8b0633eb03" category="paragraph"><block ref="9e14d2ebd900e7610939fc8b0633eb03" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a078c8ea8f5eb6e2bde7d5e4192caf93" category="list-text">输入 Name as `NFS` ，将 MTU 设置为 `9000` ，然后选择端口 `e0b` 。单击保存。</block>
  <block id="a1351b9a8b26049dded92c4c12502e4f" category="paragraph"><block ref="a1351b9a8b26049dded92c4c12502e4f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="027d9eb89851395b42eb24420724fb08" category="list-text">在信息板页面上，单击网络下的 `配置协议` 。</block>
  <block id="dfe592aef0e3b897bb06f6ec965bae6f" category="paragraph"><block ref="dfe592aef0e3b897bb06f6ec965bae6f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1bcd88faebea62e9371a67d3daf46b74" category="list-text">输入 SVM 的名称，选择启用 NFS ，为 NFS LIF 提供 IP 和子网掩码，将广播域设置为 NFS ，然后单击保存。</block>
  <block id="25d256343ee6820b8c948b2d4033ce77" category="paragraph"><block ref="25d256343ee6820b8c948b2d4033ce77" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2b19686937631f0e6fd7908c0ebcc1a7" category="list-text">单击左窗格中的 storage ，然后从下拉列表中选择 Storage VM</block>
  <block id="719180828f27258080377dc2e65198bf" category="list-text">编辑 SVM 。</block>
  <block id="7524b7a05fb1a647eee74009718a2023" category="paragraph"><block ref="7524b7a05fb1a647eee74009718a2023" category="inline-image-macro-rx" type="image"></block></block>
  <block id="01a7bcae1d1868930aa6ea34fb1da270" category="list-text">选中 " 资源分配 " 下的复选框，确保已列出本地层，然后单击 " 保存 " 。</block>
  <block id="91e15161cabd7c7875eef59911dad22c" category="paragraph"><block ref="91e15161cabd7c7875eef59911dad22c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="993e15d6ab4edbac3ea9b88ecb91a229" category="list-text">单击 SVM 名称，然后在右侧面板上向下滚动到策略。</block>
  <block id="b09b476fc04d952883d068a0f1cf88e8" category="list-text">单击导出策略磁贴中的箭头，然后单击默认策略。</block>
  <block id="27f0ef565530d28a9c9e4ea9d7ded47d" category="list-text">如果已定义某个规则，您可以对其进行编辑；如果不存在任何规则，请创建一个新规则。</block>
  <block id="5196de76a9d0081f6197f2425a89e383" category="list-text">选择 NFS 网络客户端作为客户端规范。</block>
  <block id="7840e9f9ef796efb55572154a4692792" category="list-text">选中只读和读 / 写复选框。</block>
  <block id="84352ea03578adf54199b3c4535f61db" category="list-text">选中复选框以允许超级用户访问。</block>
  <block id="5f708950689c11aaa3a89e0046281ffd" category="paragraph"><block ref="5f708950689c11aaa3a89e0046281ffd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4a415adbb9daf4c8d68ff100a3e26269" category="inline-link-macro">下一步：部署 NetApp Trident （自动化部署）</block>
  <block id="df23c9aae42f26e943ea89039142e3ed" category="paragraph"><block ref="df23c9aae42f26e943ea89039142e3ed" category="inline-link-macro-rx"></block></block>
  <block id="1ff399e81b5366a78d46555e7e9db33a" category="doc">部署 NVIDIA Triton 推理服务器（自动化部署）</block>
  <block id="2ba374569798bf9801c1b51d312c8c81" category="paragraph">要为 Triton 推理服务器设置自动部署，请完成以下步骤：</block>
  <block id="0f9301ad30eaa9306f11998152406e57" category="list-text">打开 VI 编辑器并创建 PVC YAML 文件 `vi PVA-Triton-model- repo.yaml` 。</block>
  <block id="e1f83bd8f580cc9a48311142d551b3cf" category="list-text">创建 PVC 。</block>
  <block id="708b93cf646a53435879ab3c09bf568b" category="list-text">打开 VI 编辑器，为 Triton 推理服务器创建部署，然后调用文件 `Triton_deployment.YAML` 。</block>
  <block id="7566f251ebe8ac9df275d29906223ec9" category="paragraph">此处创建了两个部署示例。第一个部署会启动一个 POD ，该 POD 使用三个 GPU 并将副本设置为 1 。另一个部署使用一个 GPU 生成三个 Pod ，而副本设置为 3 。根据您的要求，您可以更改 GPU 分配和副本计数。</block>
  <block id="bab4c4a31fdd8a812698237b8c07da4a" category="paragraph">这两种部署都使用先前创建的 PVC ，并且此永久性存储将提供给 Triton 推理服务器作为模型存储库。</block>
  <block id="c995cdb6ecedfc6b23b976a2f11eb971" category="paragraph">对于每个部署，都会创建一个类型为 loadbalancer 的服务。可以使用应用程序网络中的负载平衡器 IP 访问 Triton 推理服务器。</block>
  <block id="c120b011b8f58e8aa642cb232bbed749" category="paragraph">节点选择器用于确保两种部署都能获得所需数量的 GPU ，而不会出现任何问题。</block>
  <block id="68555de90e40a68aad9470bc9cb46901" category="list-text">为 K8 工作节点贴上标签。</block>
  <block id="91ff76fed2ef71447d799beb4525b4bd" category="list-text">创建部署。</block>
  <block id="86c8bf4b7804e9b6178b0609b1fbc7c3" category="list-text">记下负载平衡器服务外部 LPS 。</block>
  <block id="714d76674c9c8f79aa7aec23a6e381c9" category="paragraph">预期示例输出如下：</block>
  <block id="b111b35b323541fdef530c5c6fedd35f" category="paragraph"><block ref="b111b35b323541fdef530c5c6fedd35f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9a72d82ad7d456efc5ca683890fba3aa" category="list-text">连接到通过部署创建的任何一个 Pod 。</block>
  <block id="11c6c077ded736754af23364bd634846" category="list-text">使用示例模型存储库设置模型存储库。</block>
  <block id="029f7f3f93786defc05508fb4abd6d0b" category="list-text">提取任何缺失的模型定义文件。</block>
  <block id="58f35d97535ad9607503cc85792dd23b" category="list-text">将所有型号复制到型号存储库位置或仅复制您要使用的特定型号。</block>
  <block id="d3393551873553ee086d17f469994d90" category="paragraph">在此解决方案中，仅会将 resnet50_netdef 模型复制到模型存储库中作为示例。</block>
  <block id="c9886df060bf56fce0635b18506a98e6" category="list-text">检查 Triton 推理服务器的状态。</block>
  <block id="c270475835abd82427f9f2f298a0775e" category="inline-link-macro">下一步：部署用于 Triton 推理服务器的客户端（自动部署）</block>
  <block id="4f35a3d363ec67fdb9f71884cc90ea98" category="paragraph"><block ref="4f35a3d363ec67fdb9f71884cc90ea98" category="inline-link-macro-rx"></block></block>
  <block id="84ffd62e595c9d0122e136c3b255f4df" category="doc">致谢</block>
  <block id="74f47434914d29c7ec7d7d42593303b7" category="list-text">NetApp 技术营销工程师 Mike Oglesby</block>
  <block id="94a8512f59eafd68b470105fc3269fd4" category="list-text">NetApp 高级技术总监 Santosh Rao</block>
  <block id="17e1dd6389643aeecf567ba08bf1df2c" category="paragraph"><block ref="17e1dd6389643aeecf567ba08bf1df2c" category="inline-link-macro-rx"></block></block>
  <block id="bd3114e9e2000f42e265a067e98b0d25" category="doc">以履行引擎的形式连接到第三方 API</block>
  <block id="1aea646cd3c044dd0758af18e73cfef3" category="paragraph">我们将以下第三方 API 作为履行引擎连接到问题解答问题：</block>
  <block id="94c494471216991658782a32f1e3ef37" category="inline-link">WeatherStack API</block>
  <block id="f7eb24e530470f21243c27770bd2c549" category="list-text"><block ref="c8600f69e922164a09610e481537b92d" category="inline-link-rx"></block>：返回给定位置的天气，温度，雨和雪。</block>
  <block id="1c96228fa1453bf3f691d5081cbd6adb" category="inline-link">Yelp Fusion API</block>
  <block id="55a3b552be8202b066ea237b831186f4" category="list-text"><block ref="8af0de0530d799485b6d6a2d146ab784" category="inline-link-rx"></block>：返回给定位置中最接近的存储信息。</block>
  <block id="114e8180b93cb1b21cd00067e446e5f0" category="inline-link">eBay Python SDK</block>
  <block id="da6816adc86546982065d9aef78845e5" category="list-text"><block ref="3d046b40b6d382ee41dd02d3b6ab007c" category="inline-link-rx"></block>：返回给定项目的价格。</block>
  <block id="3f7ba19f5b656e6cf8db9c69330a6d6e" category="inline-link-macro">接下来： NetApp 零售助理演示</block>
  <block id="23e96dc8693037c8fa1d7c0587a2d5eb" category="paragraph"><block ref="23e96dc8693037c8fa1d7c0587a2d5eb" category="inline-link-macro-rx"></block></block>
  <block id="e88a70d67e9de42d391fd019f2d06484" category="summary">要了解有关本文档所述信息的更多信息，请查看以下文档和网站。</block>
  <block id="0f68b904e33d9ac04605aecc958bcf52" category="doc">追加信息</block>
  <block id="b49efd5b259d6a3bceda1ebb8e34064a" category="list-text">数据集： TuSimple</block>
  <block id="61554b11b65c50bf7a094a86d699c8d5" category="inline-link"><block ref="61554b11b65c50bf7a094a86d699c8d5" category="inline-link-rx"></block></block>
  <block id="b150fd9c1d7740c871626031a398c8a3" category="paragraph"><block ref="b150fd9c1d7740c871626031a398c8a3" category="inline-link-rx"></block></block>
  <block id="a3a3504f7b11916e352125a598e15797" category="list-text">深度学习网络架构：空间对流神经网络</block>
  <block id="6467a460cb421335f9f5b0523c38c9a6" category="inline-link"><block ref="6467a460cb421335f9f5b0523c38c9a6" category="inline-link-rx"></block></block>
  <block id="35527148b08f99f1d85797af833430dc" category="paragraph"><block ref="35527148b08f99f1d85797af833430dc" category="inline-link-rx"></block></block>
  <block id="cc1881adebe7ddf5b873966741a32ef1" category="list-text">分布式深度学习培训框架： Horovod</block>
  <block id="732f85d0d5eaa9222831dd5290518ff2" category="inline-link"><block ref="732f85d0d5eaa9222831dd5290518ff2" category="inline-link-rx"></block></block>
  <block id="655c281079d0281fcf4b8f2f08634c16" category="paragraph"><block ref="655c281079d0281fcf4b8f2f08634c16" category="inline-link-rx"></block></block>
  <block id="934b1fbd011b584c4878284f454f812e" category="list-text">运行： AI 容器编排解决方案：运行： AI 产品简介</block>
  <block id="64b899832bfcad18bb426fb355a0d03b" category="inline-link"><block ref="64b899832bfcad18bb426fb355a0d03b" category="inline-link-rx"></block></block>
  <block id="b78ec84f003a4d277e318031a163e191" category="paragraph"><block ref="b78ec84f003a4d277e318031a163e191" category="inline-link-rx"></block></block>
  <block id="275dbaaa3169640f82917075918df905" category="list-text">运行： AI 安装文档</block>
  <block id="1173c05ffb489483ec926c6c1dbc3c26" category="inline-link"><block ref="1173c05ffb489483ec926c6c1dbc3c26" category="inline-link-rx"></block></block>
  <block id="517046a8acf2e7fa61798debc5b6e25e" category="inline-link"><block ref="517046a8acf2e7fa61798debc5b6e25e" category="inline-link-rx"></block></block>
  <block id="b8b2e04f115b148d49a8cb477ed86af9" category="paragraph"><block ref="f03e58e4917966d9b82995c8ce69643b" category="inline-link-rx"></block><block ref="3530112fad5ba376549c9e0750df83f3" category="inline-link-rx"></block></block>
  <block id="8787c0bfc5af7ce34db56c9a5739f788" category="list-text">在运行中提交作业： AI CLI</block>
  <block id="99a4cc6ec01bd067dc6642e6fd5efa0a" category="inline-link"><block ref="99a4cc6ec01bd067dc6642e6fd5efa0a" category="inline-link-rx"></block></block>
  <block id="ca4ef6cf830a9de78ea71279d0d5417c" category="paragraph"><block ref="ca4ef6cf830a9de78ea71279d0d5417c" category="inline-link-rx"></block></block>
  <block id="984fd97f526f8afe9d2472b0894b84c2" category="inline-link"><block ref="984fd97f526f8afe9d2472b0894b84c2" category="inline-link-rx"></block></block>
  <block id="65640a241681656a4410cd7184278c9b" category="paragraph"><block ref="65640a241681656a4410cd7184278c9b" category="inline-link-rx"></block></block>
  <block id="33a756969a35b0a9029bf2a2c10e6d67" category="list-text">Azure 云资源： Azure NetApp Files</block>
  <block id="99ac98f589f6b551211f31e86cb9a212" category="inline-link"><block ref="99ac98f589f6b551211f31e86cb9a212" category="inline-link-rx"></block></block>
  <block id="3085d4407b575d4a8938814c7db17d92" category="paragraph"><block ref="3085d4407b575d4a8938814c7db17d92" category="inline-link-rx"></block></block>
  <block id="f938809a358080d4c7a941e59abfca40" category="list-text">Azure Kubernetes Service</block>
  <block id="21d0acc34f6416d6ebd8074617c57439" category="inline-link"><block ref="21d0acc34f6416d6ebd8074617c57439" category="inline-link-rx"></block></block>
  <block id="91c4b230ded9b13564b447ba71304aeb" category="paragraph"><block ref="91c4b230ded9b13564b447ba71304aeb" category="inline-link-rx"></block></block>
  <block id="d9d650693b25d0540fbb606b1d1fbe4e" category="list-text">Azure VM SKUs</block>
  <block id="08318cbecd61665ab1824d118c1029a5" category="inline-link"><block ref="08318cbecd61665ab1824d118c1029a5" category="inline-link-rx"></block></block>
  <block id="3e05fd8f7e2e0ac6116dd746a8823eaa" category="paragraph"><block ref="3e05fd8f7e2e0ac6116dd746a8823eaa" category="inline-link-rx"></block></block>
  <block id="b9a1a7c8f2194407b24183f7826d2e44" category="list-text">采用 GPU SKU 的 Azure VM</block>
  <block id="6046df9266bb79e1d99f9c232c1835e3" category="inline-link"><block ref="6046df9266bb79e1d99f9c232c1835e3" category="inline-link-rx"></block></block>
  <block id="d0bf246853f6f35070f6a8231d468c87" category="paragraph"><block ref="d0bf246853f6f35070f6a8231d468c87" category="inline-link-rx"></block></block>
  <block id="43a545df8285ba2aba289a52824f250d" category="inline-link"><block ref="43a545df8285ba2aba289a52824f250d" category="inline-link-rx"></block></block>
  <block id="944823ac69152177e369bd5d9a61a02f" category="paragraph"><block ref="944823ac69152177e369bd5d9a61a02f" category="inline-link-rx"></block></block>
  <block id="a9359a0f51034e1b1972f7690fe03f71" category="list-text">由 NetApp 提供支持的 Data Fabric</block>
  <block id="781262103885a96ffc9275431a7ef132" category="inline-link"><block ref="781262103885a96ffc9275431a7ef132" category="inline-link-rx"></block></block>
  <block id="93e35e3e458c1d81846aa83c346e240e" category="paragraph"><block ref="93e35e3e458c1d81846aa83c346e240e" category="inline-link-rx"></block></block>
  <block id="bc4fe2352063642d68529f2aa0ca7ca3" category="list-text">NetApp 产品文档</block>
  <block id="3cd8b5fe5ca94a9fdb5caaf96875ef7e" category="inline-link"><block ref="3cd8b5fe5ca94a9fdb5caaf96875ef7e" category="inline-link-rx"></block></block>
  <block id="6bfac05f3cc2c0adace9c385ef708fd9" category="paragraph"><block ref="6bfac05f3cc2c0adace9c385ef708fd9" category="inline-link-rx"></block></block>
  <block id="37e875b843ef9539c02d09d3bbee6668" category="doc">第 4.8 节的测试详细信息</block>
  <block id="638c2d891d4e85bcfae409499fba817c" category="inline-link-macro">通过过度配额 GPU 分配实现高集群利用率</block>
  <block id="d9ed812c8dd9083f1fb345425b8ce100" category="paragraph">此部分包含此部分的测试详细信息 <block ref="fdc629b29ea94e672f68b28bf3b661b4" category="inline-link-macro-rx"></block>。</block>
  <block id="f354c9a7a0a52e7a5a3514252ea5f8b7" category="paragraph">按以下顺序提交作业：</block>
  <block id="9e727fdd3aec8274f46685441900280d" category="cell">项目</block>
  <block id="b3428404a5be1cf95d4e53b2ddc8288a" category="cell">GPU 数量</block>
  <block id="96b0141273eabab320119c467cdcaf17" category="cell">总计</block>
  <block id="0be8406951cdfda82f00f79328cf4efc" category="cell">comment</block>
  <block id="9320270de4ff6824ae7a21f729fb7d44" category="cell">团队 A</block>
  <block id="c6e328a3639bc00374d81e681f89f609" category="cell">Jupyter</block>
  <block id="c4ca4238a0b923820dcc509a6f75849b" category="cell">1.</block>
  <block id="ff8bed43ac09b1148fc7648f5845f698" category="cell">1 ， 4</block>
  <block id="37ce74088416f28dc9bb04355c2e5a28" category="cell">–</block>
  <block id="cfaa375bf6c7f9fcc1bc04d4f30c9154" category="cell">NetApp</block>
  <block id="6408e079aefee9702aa00f77228dd941" category="cell">2 ， 4</block>
  <block id="00833fac70036c049bd75443869cacb5" category="cell">运行： AI</block>
  <block id="36d2df43ead992a1e3c86acd0cec69f9" category="cell">4.4</block>
  <block id="d2313e844e73fe4a8f63d93f4df355fc" category="cell">正在使用其所有配额</block>
  <block id="238ff8d9192e9c01e50a8d6d21f1607b" category="cell">团队 b</block>
  <block id="e95e1ca27d0e39aa03eb5a611ce4122f" category="cell">0.6</block>
  <block id="e4275e3860ed32f489dbb6a5d4a10f5f" category="cell">0.6/2</block>
  <block id="8457d97e0a0f74a5926d1dee27e53541" category="cell">GPU 百分比</block>
  <block id="54fbf38cf649866815e0fefc46a1f6c7" category="cell">0.4</block>
  <block id="975ca8804565c1a569450d61090b2743" category="cell">1.2</block>
  <block id="867c7d7d65c50ae3679fabce2eab87a3" category="cell">2/2</block>
  <block id="c3a4885d143dc5b306446fb380c6cfda" category="cell">4/2</block>
  <block id="411472b1216ec08457e653eac42d7bbd" category="cell">两个超过配额</block>
  <block id="3b40d1328b825dda4b761a8e534669b7" category="cell">团队 c</block>
  <block id="d310cb367d993fb6fb584b198a2fd72c" category="cell">0.5</block>
  <block id="76169512ef5ca1abe70b32c0993856af" category="cell">0.5/2</block>
  <block id="e85b79abfd76b7c13b1334d8d8c194a5" category="cell">0 ， 3.</block>
  <block id="5c2b079fc9750c2995852b8fb354aae3" category="cell">0.8/2</block>
  <block id="3d522deaf85577451c01974654b36ad3" category="cell">0.2</block>
  <block id="00fd1da21e8b4ef31d987665dc575099" category="cell">3/2</block>
  <block id="0375b76ff57435094e28e94015a5f052" category="cell">一个超过配额</block>
  <block id="ae7ccf7b1a6a1a023f611a294572a900" category="cell">团队</block>
  <block id="ecdb9acc2db02134680a9c49abe3e991" category="cell">4 ， 8.</block>
  <block id="30c006c71ada68e2273b128bc2e6831b" category="cell">正在使用配额的一半</block>
  <block id="36cf0dc9f04c54214fa577ec66ff53fc" category="paragraph">命令结构：</block>
  <block id="7b3a4ccf5e0cc7918cd458f7e46b9c8e" category="paragraph">测试中使用的实际命令顺序：</block>
  <block id="3bf38f884fd74f6e6f1ec3d80018edd8" category="paragraph">此时，您应处于以下状态：</block>
  <block id="e55f05703a3e04fbd9e10f76ae925cc9" category="cell">已分配 GPU</block>
  <block id="26cc9c6ccae01f319282379c339cd90b" category="cell">已排队的工作负载</block>
  <block id="478eb1c4e698b325048b6bccfb8974f6" category="cell">4/4 （软配额 / 实际分配）</block>
  <block id="6adf97f83acf6453d4a6a4b1070f3754" category="cell">无</block>
  <block id="2df6f557cc57e6d4044b9611b1f56439" category="inline-link-macro">通过过度分配 GPU 实现高集群利用率</block>
  <block id="3667ebc7f28f59fc13bfcf314c67de05" category="paragraph">请参见一节 <block ref="dee5d16c649661a62d3a765af5b1a963" category="inline-link-macro-rx"></block> 用于讨论继续测试场景。</block>
  <block id="ac8466404b94a669f51a3d2db2401cf0" category="inline-link-macro">接下来：第 4.9 节的测试详细信息</block>
  <block id="84b7d04f598931bc149a92c543d3146f" category="paragraph"><block ref="84b7d04f598931bc149a92c543d3146f" category="inline-link-macro-rx"></block></block>
  <block id="1e92efa8f46c28a3c3a1c03ababfa7be" category="doc">NetApp 零售助理演示</block>
  <block id="c2e2fce3a995f59900d7afbbe58683f5" category="inline-link">此链接。</block>
  <block id="bb07f1ff94c6f99bf48a403706bea4ca" category="paragraph">我们录制了 NetApp 零售助理（ Nara ）的演示视频。单击<block ref="c1305d6e7f2e06345748f63e36abba33" category="inline-link-rx"></block> 打开下图并播放视频演示。</block>
  <block id="088070f65f454d6b38e8e40e332e70a8" category="paragraph"><block ref="088070f65f454d6b38e8e40e332e70a8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3d81ccbd202a60c621000abca3f6f3de" category="inline-link-macro">下一步：使用 NetApp Cloud Sync 归档对话历史记录</block>
  <block id="a165baa9089720dc90e8baf16267821f" category="paragraph"><block ref="a165baa9089720dc90e8baf16267821f" category="inline-link-macro-rx"></block></block>
  <block id="6f7f6c0b1054487e622896990b1d6d55" category="doc">TR-4841 ：采用数据缓存的混合云 AI 操作系统</block>
  <block id="1b55e21d5b19a6ba57ae9bbd6f3a0630" category="paragraph">Rick Huang ， David Arnette ， NetApp Ychay Ettun ， cnvrg.io</block>
  <block id="28d9fd6fa10254fdcc59aa182ae32dc9" category="paragraph">数据的爆炸式增长以及 ML 和 AI 的指数级增长已经融合在一起，形成了一个具有独特开发和实施挑战的超字节经济。</block>
  <block id="eb35f773ff882afb6d6d67613a4701ee" category="paragraph">尽管众所周知， ML 模型需要大量数据，并且需要接近计算资源的高性能数据存储，但在实践中，实施这种模型并不是那么直接，尤其是在混合云和弹性计算实例中。大量数据通常存储在低成本数据湖中， GPU 等高性能 AI 计算资源无法高效访问这些数据。在混合云基础架构中，如果某些工作负载在云中运行，而某些工作负载完全位于内部或不同的 HPC 环境中，则此问题会更加严重。</block>
  <block id="2b8ab86ccf473cca225e50ddb8c47e25" category="paragraph">在本文档中，我们介绍了一款全新的解决方案， IT 专业人员和数据工程师可以利用可感知拓扑的数据中心创建一个真正的混合云 AI 平台，数据科学家可以利用该平台在计算资源附近即时自动创建数据集缓存。 无论它们位于何处。因此，不仅可以完成高性能模型培训，而且还可以带来更多优势，包括多名 AI 实践者的协作，他们可以立即访问数据集版本中心内的数据集缓存，版本和行。</block>
  <block id="3bc3b194b0ef70e2e6ce113f819619c4" category="inline-link-macro">下一步：使用案例概述和问题陈述</block>
  <block id="3eb8a6b81400ec3a497fb59a7e6f4360" category="paragraph"><block ref="3eb8a6b81400ec3a497fb59a7e6f4360" category="inline-link-macro-rx"></block></block>
  <block id="a6214fe1ac9a6825ffe38f3b34489c9d" category="summary">NetApp Run AI 合作创建了本技术报告，展示了 Azure NetApp Files 与 Run AI 平台在简化 AI 工作负载流程方面的独特功能。</block>
  <block id="a55106260c16aab506cebfb58e07e030" category="paragraph">NetApp 与 Run ： AI 合作创建了本技术报告，展示了 Azure NetApp Files 的独特功能以及用于简化 AI 工作负载流程的 Run ： AI 平台。本技术报告提供了一个参考架构，用于简化分布式通道检测培训的数据管道和工作负载流程编排流程。</block>
  <block id="4e51614a389f3ad4fa17e2ce7ad984e7" category="paragraph">总之，对于大规模分布式培训（尤其是在公有云环境中），资源编排和存储组件是解决方案的重要组成部分。确保数据管理不会妨碍多个 GPU 处理，从而实现 GPU 周期的最佳利用率。这样，就可以使该系统尽可能地经济高效地用于大规模分布式培训。</block>
  <block id="269c35b1959d92e9ef6665bb4c60ad5d" category="paragraph">NetApp 提供的 Data Fabric 可以帮助数据科学家和数据工程师在内部和云中相互连接，以实现同步数据，而无需执行任何手动干预，从而克服了这一挑战。换言之， Data Fabric 可以平稳地管理分布在多个位置的 AI 工作流。此外，它还可以将数据贴近计算，并在需要时随时随地执行分析，培训和验证，从而促进基于需求的数据可用性。此功能不仅可以实现数据集成，还可以保护和保障整个数据管道的安全。</block>
  <block id="1d22ea3c852f35081a408a42b1caa719" category="doc">cnvrg.io 部署</block>
  <block id="e1d91df1cfd0e5839c45e06d0504c9d6" category="section-title">使用 Helm 部署 cnvrg 核心</block>
  <block id="7e9e2a4317009b27ebfc0b4cd222ba30" category="paragraph">使用任何集群，内部， MinikubE 或任何云集群（如 AKS ， EKS 和 GKE） ， Helm 是快速部署 cnvrg 的最简单方法。本节介绍如何在安装了 Kubernetes 的内部（ DGX-1 ）实例上安装 cnvrg 。</block>
  <block id="ea6de3fdf29035cd2d521949527c2a44" category="paragraph">在完成安装之前，您必须在本地计算机上安装并准备以下依赖项：</block>
  <block id="6f49e891fdb1bb11823492f4d315b2fd" category="list-text">Kubectl</block>
  <block id="5e6cef7c129d4703b20be420ac32145c" category="list-text">Helm 3.x</block>
  <block id="93fafc2be5db6c259030d6d8dc989752" category="list-text">Kubernetes 集群 1.15 及更高版本</block>
  <block id="116efea8faeef9714de76fe9f81d9b82" category="section-title">使用 Helm 部署</block>
  <block id="237800170a9b824a7de8c08766ea114e" category="list-text">要下载最新的 cnvrg Helm 图表，请运行以下命令：</block>
  <block id="9b821098b02043dada6b07b924f4ef5f" category="list-text">在部署 cnvrg 之前，您需要集群的外部 IP 地址以及要部署 cnvrg 的节点的名称。要在内部 Kubernetes 集群上部署 cnvrg ，请运行以下命令：</block>
  <block id="1d1eb4e0da8bac1b4eaa79c1f0be9e04" category="list-text">运行 `helm install` 命令。所有服务和系统都会自动安装在集群上。此过程可能需要长达 15 分钟。</block>
  <block id="e269e5751f8883222b6d2f55da7ed811" category="list-text">`helm install` 命令可能需要长达 10 分钟的时间。部署完成后，转到新部署的 cnvrg 的 URL 或将新集群添加为组织内部的资源。使用 `helm` 命令可向您告知正确的 URL 。</block>
  <block id="ac0cc75e8d4f0df818dd93a00041897a" category="list-text">当所有容器的状态为 running 或 complete 时，已成功部署 cnvrg 。它应类似于以下示例输出：</block>
  <block id="3e82668da957bceb0d0c7024273ab624" category="section-title">使用 ResNet50 和 Chest X 射线数据集的计算机视觉模型培训</block>
  <block id="c9c734dfca60f137a58e1a5cb9c89b62" category="inline-link">NIH 下载站点</block>
  <block id="0c7f26c15912f9f5d0e0473bb21cb9a2" category="paragraph">cnvrg.io AI 操作系统部署在 Kubernetes 设置中，并部署在由 NVIDIA DGX 系统提供支持的 NetApp ONTAP AI 架构上。为了进行验证，我们使用了 NIH Chest X ray 数据集，该数据集包含经去除身份识别的胸 x 射线图像。这些映像采用 PNG 格式。这些数据由 NIH 临床中心提供，可通过获取<block ref="4e3f11b94ad47864cbd9c6049036ac93" category="inline-link-rx"></block>。我们使用了一个 250 GB 的数据样本，其中包含 627 ， 615 个图像，分布在 15 个类别中。</block>
  <block id="de53b795a18176edb91a88632f621868" category="paragraph">数据集已上传到 cnvrg 平台，并在 NetApp AFF A800 存储系统的 NFS 导出中进行缓存。</block>
  <block id="ec948f075c372d4beb7d19a5266f22d5" category="section-title">设置计算资源</block>
  <block id="42af2f71dc8561eb9cfe43d45664ecb3" category="paragraph">借助 cnvrg 架构和元数据计划功能，工程师和 IT 专业人员可以将不同的计算资源连接到一个平台。在我们的设置中，我们使用了为运行深度学习工作负载而部署的相同集群 cnvrg 。如果需要连接其他集群，请使用 GUI ，如以下屏幕截图所示。</block>
  <block id="df25fca4c07e68ed339b0e1974a9d59f" category="paragraph"><block ref="df25fca4c07e68ed339b0e1974a9d59f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f541774a08fc687f6e2016c77a6ebca5" category="section-title">加载数据</block>
  <block id="564bfd33ed32c02158989dfcee59ae89" category="paragraph">要将数据上传到 cnvrg 平台，您可以使用 GUI 或 cnvrg CLI 。对于大型数据集， NetApp 建议使用 CLI ，因为它是一款强大，可扩展且可靠的工具，可以处理大量文件。</block>
  <block id="41ad6001e0d3c17bd4a7957e18bd8bab" category="paragraph">要上传数据，请完成以下步骤：</block>
  <block id="192b006166881688d04f398db712aaeb" category="inline-link">cnvrg 命令行界面</block>
  <block id="8e9fbcfb57e26d7a14f0292c11fae122" category="list-text">下载<block ref="d3ae4cf97b77cb5805c16205cd459ce4" category="inline-link-rx"></block>。</block>
  <block id="5cea56fcf2481a021f3d93843a22c319" category="list-text">导航到 x-ray 目录。</block>
  <block id="1c5a650f398227a4f97ed81accfbbb4b" category="list-text">使用 `cnvrg data init` 命令初始化平台中的数据集。</block>
  <block id="5c48f13a3d988e0d618145098a829e3a" category="list-text">使用 `cnvrg data sync` 命令将目录的所有内容上传到中央数据湖。将数据上传到中央对象存储（ StorageGRID ， S3 或其他）后，您可以使用 GUI 进行浏览。下图显示了一个已加载的胸 X 射线纤维化影像 PNG 文件。此外， cnvrg 会对数据进行版本控制，以便您构建的任何模型都可以复制到数据版本。</block>
  <block id="935b6e25167b65d839bc1487ebb2fa6e" category="paragraph"><block ref="935b6e25167b65d839bc1487ebb2fa6e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="308e9394a715dc64aa4e48e0054775ed" category="section-title">Cach 数据</block>
  <block id="556cde11a66a789acb7e62b934c1a88c" category="paragraph">为了加快训练速度并避免为每个模型训练和实验下载 60 万多个文件，在数据最初上传到中央数据湖对象存储之后，我们使用了数据缓存功能。</block>
  <block id="3d163413cac9b6cc4726a9c83d37fed3" category="paragraph"><block ref="3d163413cac9b6cc4726a9c83d37fed3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d006c100d76e7d21d64055ce3cfe6a24" category="paragraph">用户单击缓存后， cnvrg 将从远程对象存储下载其特定提交中的数据，并将其缓存到 ONTAP NFS 卷上。完成后，可以使用这些数据进行即时培训。此外，如果数据在几天内未使用（例如用于模型训练或探索），则 cnvrg 会自动清除缓存。</block>
  <block id="53ad459d9bb7a65de3d1cc839b75c19f" category="section-title">使用缓存数据构建 ML 管道</block>
  <block id="db226c80bcb6098ce2f47dd3982cca26" category="paragraph">借助 cnvrg 流，您可以轻松构建生产 ML 管道。流非常灵活，可用于任何类型的 ML 用例，并可通过 GUI 或代码创建。一个流中的每个组件都可以使用不同的 Docker 映像在不同的计算资源上运行，从而可以构建混合云和优化的 ML 管道。</block>
  <block id="6b0eae96748d48b032362774a6467411" category="paragraph"><block ref="6b0eae96748d48b032362774a6467411" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e1f18dfff2566b35d7d0e528565c43aa" category="section-title">构建箱内 X 射线流：设置数据</block>
  <block id="adec555cb8cd4de3f288baed510d1163" category="paragraph">我们已将数据集添加到新创建的流中。添加数据集时，您可以选择特定版本（提交）并指示是否需要缓存版本。在此示例中，我们选择了缓存的提交。</block>
  <block id="6dd780034ed574b328dbc16a6b485b79" category="paragraph"><block ref="6dd780034ed574b328dbc16a6b485b79" category="inline-image-macro-rx" type="image"></block></block>
  <block id="13e0789c536fc18ddcdc32b4ca598b58" category="section-title">构建箱内 X 射线流：设置训练模型： ResNet50</block>
  <block id="fa3c48d58d8e9fd17365fd986906dd52" category="paragraph">在管道中，您可以添加所需的任何类型的自定义代码。在 cnvrg 中，还提供了 AI 库，这是一个可重复使用的 ML 组件集合。在 AI 库中，有算法，脚本，数据源以及其他解决方案可用于任何 ML 或深度学习流。在此示例中，我们选择了预构建的 ResNet50 模块。我们使用的是默认参数，例如 batch_size ： 128 ， epodchs ： 10 等。可以在 AI 库文档中查看这些参数。以下屏幕截图显示了将 X 线数据集连接到 ResNet50 的新流。</block>
  <block id="defe5cc08faaa501eeb5fc5500664d29" category="paragraph"><block ref="defe5cc08faaa501eeb5fc5500664d29" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bf9bb479506589dfd719446fe3e054c7" category="section-title">为 ResNet50 定义计算资源</block>
  <block id="943cb3f5c7789c68e811b0accdb6c5d9" category="paragraph">cnvrg 流中的每个算法或组件都可以使用不同的 Docker 映像在不同的计算实例上运行。在我们的设置中，我们希望使用 NetApp ONTAP AI 架构在 NVIDIA DGX 系统上运行训练算法。在下图中，我们选择了 `GPU Real` ，这是我们内部集群的计算模板和规范。我们还创建了一个模板队列并选择了多个模板。这样，如果无法分配 `GPU-Real` 资源（例如，如果其他数据科学家正在使用该资源），则可以通过添加云提供商模板来启用自动云突发功能。以下屏幕截图显示了如何使用 GPU Real 作为 ResNet50 的计算节点。</block>
  <block id="27c8450e6f62877ec794262ae4c5a713" category="paragraph"><block ref="27c8450e6f62877ec794262ae4c5a713" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bee38713f37ae72239f6bda08384dfbb" category="section-title">跟踪和监控结果</block>
  <block id="546b7da7049f1d7fdf35cdb57fa96c7c" category="paragraph">执行流量后， cnvrg 将触发跟踪和监控引擎。每次运行流程都会自动记录并实时更新。超参数，指标，资源使用情况（ GPU 利用率等），代码版本，项目，日志， 实验部分会自动提供，如以下两个屏幕截图所示。</block>
  <block id="8fabeb8b8d143d509bb92087cbbf953c" category="paragraph"><block ref="8fabeb8b8d143d509bb92087cbbf953c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fdbd22304f732000189e44de22498da1" category="paragraph"><block ref="fdbd22304f732000189e44de22498da1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="254a4a0ddc892d6a01d7e7ef286fbb71" category="inline-link-macro">接下来：总结。</block>
  <block id="debe391efc3dc12a7d87720a4cf068a5" category="paragraph"><block ref="debe391efc3dc12a7d87720a4cf068a5" category="inline-link-macro-rx"></block></block>
  <block id="c83553858a60514501e9751c0747dea0" category="doc">基本资源分配公平</block>
  <block id="dc12a1ce34c0a7a264de91bc9b933a62" category="paragraph">在本节中，我们会显示，当 `team-d` 请求更多 GPU （它们低于其配额）时，系统会暂停 `team-b` 和 `team-c` 的工作负载，并以公平的方式将其移至待定状态。</block>
  <block id="ccc33823c0dc5e9ee0838a5eaa86f076" category="inline-link-macro">第 4.9 节的测试详细信息</block>
  <block id="86bbd55ea7850716c0c192b19c86176a" category="paragraph">有关提交作业，使用的容器映像以及执行的命令序列等详细信息，请参见一节 <block ref="94d73a1896276f719be59227f0e93a14" category="inline-link-macro-rx"></block>。</block>
  <block id="b6ea2a2f48a443e7d027bd652ac84762" category="paragraph">下图显示了由于自动负载平衡和预先计划而产生的集群利用率，每个组分配的 GPU 以及待处理作业。我们可以观察到，当所有团队工作负载请求的 GPU 总数超过集群中可用的 GPU 总数时， Run ： AI 的内部公平算法会分别为 `team-b` 和 `team-c` 暂停一个作业，因为它们已达到项目配额。这样可以提供整体较高的集群利用率，而数据科学团队仍在管理员设置的资源限制下工作。</block>
  <block id="d1a54cf8cb2a06c0715d2f042fbf44bd" category="paragraph"><block ref="d1a54cf8cb2a06c0715d2f042fbf44bd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d52816ece2166f7a2e0eadf58d617df9" category="paragraph">此测试场景的结果显示以下内容：</block>
  <block id="bce83ec0a92a5b10380007a1643b2fd0" category="list-text">* 自动负载平衡。 * 系统会自动平衡 GPU 的配额，使每个团队现在都在使用其配额。暂停的工作负载属于超过其配额的团队。</block>
  <block id="f8be0d1ca354f8cb4aaa4c8aadcea80b" category="list-text">* 公平共享暂停。 * 系统会选择停止超过配额的一个组的工作负载，然后停止另一个组的工作负载。Run ： AI 具有内部公平算法。</block>
  <block id="c088b6e407ba7f9c0274382acfa3eae0" category="inline-link-macro">下一步：过度配额公平</block>
  <block id="8e015e1b989b11d70fcb778747b8c614" category="paragraph"><block ref="8e015e1b989b11d70fcb778747b8c614" category="inline-link-macro-rx"></block></block>
  <block id="4ac9fa791a6d1c7c97bbae134dd22586" category="paragraph">一个真正的人工智能对话系统可以进行类似于人类的对话，了解相关背景并提供智能响应。此类 AI 模型通常非常庞大且非常复杂。借助 NVIDIA GPU 和 NetApp 存储，可以对大规模的一流语言模型进行培训和优化，以快速运行推理。这是一个重大的进步，旨在结束快速 AI 模型与大型复杂 AI 模型之间的权衡。GPU 优化的语言理解模式可以集成到医疗保健，零售和金融服务等行业的 AI 应用程序中，为智能扬声器和客户服务线中的高级数字语音助理提供支持。通过这些高质量的对话式 AI 系统，各个垂直行业的企业可以在与客户接洽时提供以前无法实现的个性化服务。</block>
  <block id="45d5663acc501eba25058f8956035e9a" category="paragraph">借助 JARVIS ，可以部署虚拟助手，数字 avatars ，多模式传感器 Fusion （ CV 与 ASS/NLP/TTs 融合）或任何 ASS/NLP/TTS/CV 独立用例，如记录。我们构建了一个虚拟零售助理，可以对天气，关注点和库存定价方面的问题进行问题解答处理。此外，我们还展示了如何通过使用 Cloud Sync 归档对话历史记录并对 Nemo 模型进行新数据培训来提高对话 AI 系统的自然语言理解能力。</block>
  <block id="c6a4d485e7c4cefa4c121ce6c59b28dc" category="inline-link-macro">下一步：致谢</block>
  <block id="38a609a97a676f2cc28ccec3d3097d4b" category="paragraph"><block ref="38a609a97a676f2cc28ccec3d3097d4b" category="inline-link-macro-rx"></block></block>
  <block id="1d91c2c04b7f73cb59edb799d095c75c" category="paragraph">本白皮书为客户提供了一些指导原则，帮助他们使用 NVIDIA JarVis 框架以及 NetApp ONTAP AI 和 Cloud Sync 构建适用于零售和其他使用情形的对话人工智能（人工智能， AI ）解决方案。其中包括有关在为虚拟助手开发自然语言处理（ NLP ）模型时使用的高级工作流的信息，经过验证的测试用例和结果。</block>
  <block id="4c2588a1e3dbf6824a4f05095df75f83" category="paragraph">尽管当今所有应用程序都不是人工智能驱动的，但它们正在不断发展的功能，使其能够获得人工智能的巨大优势。为了支持采用 AI ，应用程序需要一个基础架构，以便为其提供最佳运行级别所需的资源，并支持其持续发展。</block>
  <block id="31965de7c735983bb41a0b7e70361db2" category="paragraph">对于 AI 驱动的应用程序，边缘位置是主要的数据源。如果在一段时间内从多个边缘位置收集可用数据以构成培训数据集，则可以将这些数据用于培训。然后，可以将经过培训的模型部署回收集数据的边缘位置，从而加快推理速度，而无需将生产数据重复传输到专用推理平台。</block>
  <block id="9e53c147a93fed13d4349cba2a35e36b" category="paragraph">NetApp HCI AI 推理解决方案由采用 NVIDIA T4 GPU 和 NetApp 云连接存储系统的 NetApp H615c 计算节点提供支持，由 NetApp 和 NVIDIA 开发并验证。NetApp HCI 通过解决不确定性问题，消除设计复杂性和结束猜测，简化了在边缘数据中心部署 AI 推理解决方案的过程。此解决方案为 IT 组织提供了一个规范化的架构，可以：</block>
  <block id="9c4a53996590c74a0de3bba81f878254" category="list-text">在边缘数据中心启用 AI 推理</block>
  <block id="20c3f996d396cc8c92788bb3585a6e86" category="list-text">优化 GPU 资源的使用</block>
  <block id="06e81c54cb9157aa59541289f1163daf" category="list-text">提供基于 Kubernetes 的推理平台，以提高灵活性和可扩展性</block>
  <block id="9c6bd300c8cf3ca98c8548bbb27cc34a" category="list-text">消除设计复杂性</block>
  <block id="ba37c372c4a9119e45c7f525f4743cfc" category="paragraph">边缘数据中心在非常接近生成点的位置管理和处理数据。这种接近性可提高处理数据时的效率并减少相关延迟。许多垂直市场已经实现了边缘数据中心的优势，并在很大程度上采用这种分布式数据处理方法。</block>
  <block id="b501a0f0a3e7d559cecfad08c330227e" category="paragraph">下表列出了边缘垂直市场和应用程序。</block>
  <block id="06ce2a25e5d12c166a36f654dbea6012" category="cell">垂直</block>
  <block id="077262cc53a1fb1b5f651d31b6bf81ba" category="cell">医疗</block>
  <block id="9da98fbc1c3d290fefb743a2df8914b4" category="cell">计算机辅助诊断可帮助医务人员进行早期疾病检测</block>
  <block id="fa0a7aa1622ad105e9cdf5a706058333" category="cell">石油和天然气</block>
  <block id="55dae4e2e7f267e43e5768e66c7c3771" category="cell">对远程生产设施，视频和图像分析进行自主检查</block>
  <block id="252ddb15657f2c60bddc73633a7bf8c0" category="cell">航空</block>
  <block id="7a84f6faf76fd3533ae6ca65d28c53eb" category="cell">空中交通控制辅助和实时视频源分析</block>
  <block id="81ea9456adf225bcf11b668b427fd4f2" category="cell">媒体和娱乐</block>
  <block id="5015819e58d425b19f8acc93866e76fa" category="cell">音频 / 视频内容筛选功能，可提供适合家庭使用的内容</block>
  <block id="616e90f12cb95950bc1c75396902393a" category="cell">业务分析</block>
  <block id="3e4c06851690089d4952320e9df36dc2" category="cell">品牌认知度，用于分析在流式直播电视活动中的品牌表现</block>
  <block id="a9f7ecebb493e129aafb4cbfd73e85df" category="cell">电子商务</block>
  <block id="5df4fc692c9317012855d6935bf10310" category="cell">将供应商产品智能捆绑在一起，找到理想的商家和仓库组合</block>
  <block id="053e0bc8b9627b28e2ed8029a34b35bd" category="cell">零售</block>
  <block id="7cf7816e39e6e0c259a79dc29c5a5e7c" category="cell">自动结账，用于识别客户放入购物车的物品，并便于进行数字支付</block>
  <block id="165f5687ea9050fba239731810d0abe8" category="cell">智慧城市</block>
  <block id="a47b360ffbe39c5a39c7e12e2ae8fdf5" category="cell">改善交通，优化停车，增强人行和骑行者的安全</block>
  <block id="e86883c7cfc07afcf1e5ad8dffd7e1cc" category="cell">制造</block>
  <block id="f4d790a35097fa97c2687ac573b25338" category="cell">质量控制，装配线监控和缺陷识别</block>
  <block id="2273d1167a6212812d95dc8fadbae78e" category="cell">客户服务</block>
  <block id="bf4948e47ea0d77a86e639979879262d" category="cell">客户服务自动化，用于分析和鉴别咨询（电话，电子邮件和社交媒体）</block>
  <block id="8e54e9aa508ea37f7fe734e86ba9da27" category="cell">农业</block>
  <block id="7fb956270d49b22c3226bc1db2b0269f" category="cell">智能的农场运营和活动规划，可优化肥料和除草剂应用</block>
  <block id="3190a811a89bc9da4384152bc43d1b94" category="section-title">目标受众</block>
  <block id="549c608b9fe93192110cc2552d28da22" category="paragraph">解决方案的目标受众包括以下组：</block>
  <block id="134481f7bea652a34fa2ada120d250e5" category="list-text">数据科学家</block>
  <block id="8d26f0555c7ace3d4b297da8c12fb31b" category="list-text">IT 架构师</block>
  <block id="c114d2813b0041352b49187ebc28b62b" category="list-text">现场顾问</block>
  <block id="2d6d0cc18609f97853f883c1891397d2" category="list-text">专业服务</block>
  <block id="467f739adb5605167109d76676b44696" category="list-text">IT 经理</block>
  <block id="dcfa1c08d3b0126217af0b8690305c08" category="list-text">需要在边缘位置提供 IT 创新和强大数据和应用程序服务的基础架构的任何其他人</block>
  <block id="dcea35e5c6c7dfb5a3d0b5083bb4bb90" category="paragraph"><block ref="dcea35e5c6c7dfb5a3d0b5083bb4bb90" category="inline-link-macro-rx"></block></block>
  <block id="3bb420314fa4b29837c4b0528524000f" category="doc">NetApp ONTAP AI 和 AI 控制平台</block>
  <block id="1b85c0e7f381bd6f8c3150cafe56a9f0" category="paragraph">NetApp ONTAP AI 架构，由 NVIDIA DGX 系统和 NetApp 云连接存储系统提供支持。此参考架构为 IT 组织提供了以下优势：</block>
  <block id="5116c5071beb9f4f5b673c988c417c71" category="list-text">支持独立扩展计算和存储</block>
  <block id="eccaf37681e446d183db0332d1e50552" category="list-text">支持客户从小规模入手，无缝扩展</block>
  <block id="bae698d3cdcc290d6a0048c7b786446c" category="list-text">为各种性能和成本点提供一系列存储选项 NetApp ONTAP AI 可将 DGX 系统和 NetApp AFF A800 存储系统与一流的网络紧密集成在一起。NetApp ONTAP AI 和 DGX 系统消除了设计复杂性和猜测性工作，从而简化了 AI 部署。客户可以从小规模入手，无中断地扩展系统，同时智能地管理从边缘到核心再到云再到云的数据。</block>
  <block id="c729dcbcad9e1c72ae15d4b823e9f311" category="paragraph">NetApp AI 控制平台是一个全堆栈 AI ， ML 和深度学习（ DL ）数据和实验管理解决方案，适用于数据科学家和数据工程师。随着企业越来越多地使用 AI ，他们面临着许多挑战，包括工作负载可扩展性和数据可用性。NetApp AI 控制平台可通过各种功能来应对这些挑战，例如像 Git repo一样 快速克隆数据命名空间，以及定义和实施 AI 培训工作流，这些工作流可近乎即时地创建数据和模型基线以实现版本控制和可追溯性。借助 NetApp AI 控制平台，您可以在站点和区域之间无缝复制数据，并快速配置 Jupyter 笔记本工作空间，以便访问海量数据集。</block>
  <block id="42cac0fcbbddfc99b31ff898d7902c83" category="inline-link-macro">接下来：运行 AI 工作负载编排的 AI 平台</block>
  <block id="e3683938a3c34e6a7cf5b3896258e91e" category="paragraph"><block ref="a8dcbc617641d20db42fd66f3a42caae" category="inline-link-macro-rx"></block>。</block>
  <block id="6b4330df9a37bcfef1faecd1e8973464" category="inline-link-macro">配额过度公平</block>
  <block id="5648f06cc2dff861e557e088190ccbe2" category="paragraph">在本节和各节中 <block ref="26be59a535445b1fffeef12f5e70f3e6" category="inline-link-macro-rx"></block>，和 <block ref="2783e1454358e180d4e2876ef9492c64" category="inline-link-macro-rx"></block>，我们设计了高级测试方案，用于演示运行： AI 流程编排功能，以实现复杂的工作负载管理，自动抢占式计划和超配额 GPU 配置。我们这样做是为了在 ONTAP AI 环境中实现高集群资源利用率并优化企业级数据科学团队的工作效率。</block>
  <block id="fed09193953a2a2d15bfba4063981f8c" category="paragraph">对于这三个部分，请设置以下项目和配额：</block>
  <block id="d2d5c3e087f684e56b5b81d6212d7ccb" category="cell">配额</block>
  <block id="c9f0f895fb98ab9159f51fd0297e236d" category="cell">8.</block>
  <block id="207b738b6cd0e1cf6ac4a405dc72102f" category="paragraph">此外，我们还会对这三个部分使用以下容器：</block>
  <block id="cc6f12794ea24a191cb4f699f1b95036" category="list-text">Jupyter 笔记本电脑： `jupyter/base-notebook`</block>
  <block id="b8d0bb7e356bfdd7e018a7c62f9343fa" category="list-text">Run ： AI Quickstart ： `gcr.io/run-ai-demo/Quickstart`</block>
  <block id="c9582d103b2fe8050364d3e629c4e80e" category="paragraph">我们为此测试场景设定了以下目标：</block>
  <block id="c2d51205301247cd0aa0eca284d3889b" category="list-text">展示资源配置的简便性以及如何从用户中提取资源</block>
  <block id="dfd4af458e74e30246827532e692dca7" category="list-text">展示用户如何轻松配置 GPU 的小部分和 GPU 的整数</block>
  <block id="d7bf7c7f0d7884bd8fe07da4f6a8aba3" category="list-text">展示如果集群中存在可用 GPU ，系统如何通过允许团队或用户超过其资源配额来消除计算瓶颈</block>
  <block id="f93609e9c7f7c826e6c83bb1f8416207" category="list-text">展示如何在运行计算密集型作业（例如 NetApp 容器）时使用 NetApp 解决方案消除数据管道瓶颈</block>
  <block id="8ac218f5a62c8021756a192ac737a7f2" category="list-text">显示如何使用系统运行多种类型的容器</block>
  <block id="802125395813e0bec35472d0403ab94e" category="list-text">Jupyter 笔记本电脑</block>
  <block id="91c4a4ef606f959264719f8d084aab0e" category="list-text">运行： AI 容器</block>
  <block id="23edbe937c996eb973ab4c69f9648893" category="list-text">集群已满时显示高利用率</block>
  <block id="815a27a2c38741e36d920cbea5587384" category="paragraph">有关在测试期间执行的实际命令序列的详细信息，请参见 <block ref="3a65193f11bb9f699d19b0e9a996cd93" category="inline-link-macro-rx"></block>。</block>
  <block id="9d020ce52f8e9ff0d2f2defe3942d660" category="paragraph">提交所有 13 个工作负载后，您可以看到一个容器名称和分配的 GPU 列表，如下图所示。我们有七个培训和六个互动作业，模拟四个数据科学团队，每个团队都有自己的模型运行或开发。对于交互式作业，各个开发人员都在使用 Jupyter 笔记本电脑编写或调试其代码。因此，它适合在不使用过多集群资源的情况下配置 GPU 分段。</block>
  <block id="5deafc9e56279ca519f1e3c351856aa8" category="paragraph"><block ref="5deafc9e56279ca519f1e3c351856aa8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1aa04853a58b1b9ab0033c7e24b9d929" category="paragraph">此测试场景的结果如下：</block>
  <block id="dbaf41fcdcf0aa8cd93bfdf0e7f916f2" category="list-text">集群应已满：使用了 16/16 个 GPU 。</block>
  <block id="25421e793bda820f3023762c547a2495" category="list-text">集群利用率高。</block>
  <block id="fdf3de6e0502b5404d2e0b379421f759" category="list-text">由于分配百分比的影响，比 GPU 的实验更多。</block>
  <block id="68cf93a70e0f0fe62bc0428ce8a8b348" category="list-text">`team-d` 并未使用所有配额；因此， `team-b` 和 `team-c` 可以在其实验中使用额外的 GPU ，从而加快创新速度。</block>
  <block id="9083e59932e59a6f85524ab956fcf772" category="inline-link-macro">下一步：基本资源分配公平</block>
  <block id="654c44d69d64b0a5a656dd7b1375ac03" category="paragraph"><block ref="654c44d69d64b0a5a656dd7b1375ac03" category="inline-link-macro-rx"></block></block>
  <block id="3642f282b12269091ab196a3aabf0858" category="summary">Trident 操作示例</block>
  <block id="7f41e102595a65d30401b887b75060a4" category="paragraph">本节包括您可能希望使用 Trident 执行的各种操作的示例。</block>
  <block id="5a95bc44d2d93c77b65585a52a71d631" category="section-title">导入现有卷</block>
  <block id="37e60d34ab15afa59aac0989309fc77a" category="paragraph">如果您的 NetApp 存储系统 / 平台上有要挂载到 Kubernetes 集群中的容器上但未与集群中的 PVC 绑定的现有卷，则必须导入这些卷。您可以使用 Trident 卷导入功能导入这些卷。</block>
  <block id="f363c1a10e150fdee0f4f310a06acb5e" category="inline-link-macro">ONTAP AI 部署的 Trident 后端示例</block>
  <block id="8f811f6151a10e9d15de57c2af8fcfed" category="inline-link">Kubernetes 官方文档</block>
  <block id="40ef3fb23e015d9b4b46a16fa50f10d3" category="inline-link">Trident 文档</block>
  <block id="4330c34147b36030c50afe1d04ec2213" category="paragraph">以下示例命令显示了为在本节示例中创建的每个 Trident 后端导入相同卷 `PB_FG_ALL` 两次 <block ref="5ce2b96729b1637e197bdd36eb4db4ee" category="inline-link-macro-rx"></block>，步骤 1 。通过以这种方式导入同一卷两次，您可以在不同 LIF 之间多次挂载此卷（现有 FlexGroup 卷），如一节所述 <block ref="5ce2b96729b1637e197bdd36eb4db4ee" category="inline-link-macro-rx"></block>，步骤 1 。有关 PVCs 的详细信息，请参见<block ref="ca589c3cf5b20ae0a636e2b7691f2873" category="inline-link-rx"></block>。有关卷导入功能的详细信息，请参见<block ref="e6b3671f5db59046617458d31ef4f50b" category="inline-link-rx"></block>。</block>
  <block id="313da63dfeb95842dd6a105fdcf40ebc" category="paragraph">在示例 PVC 规范文件中指定了 `accessModes` 值 `ReadOnlyMany` 。有关 `accessMode` 字段的详细信息，请参见<block ref="ca589c3cf5b20ae0a636e2b7691f2873" category="inline-link-rx"></block>。</block>
  <block id="6631bf64346739a9880a9789a941a8d6" category="inline-link-macro">适用于 ONTAP AI 部署的 Kubernetes StorageClasses 示例</block>
  <block id="e6d82e60d43fe02e01930addfe670e8f" category="admonition">以下示例导入命令中指定的后端名称与在本节的示例中创建的后端相对应 <block ref="5ce2b96729b1637e197bdd36eb4db4ee" category="inline-link-macro-rx"></block>，步骤 1 。以下示例 PVC 定义文件中指定的 StorageClass 名称与在本节的示例中创建的 StorageClasses 相对应 <block ref="6d8c8eb29a4e4c3a50119b70d2e8171e" category="inline-link-macro-rx"></block>，步骤 1 。</block>
  <block id="533fff63e0b7486b2768ad15b5e2981c" category="section-title">配置新卷</block>
  <block id="e149d2e1fdb31ad28f79dd3d2c7ee8ff" category="paragraph">您可以使用 Trident 在 NetApp 存储系统或平台上配置新卷。以下示例命令显示了新 FlexVol 卷的配置。在此示例中，使用在一节的示例中创建的 StorageClass 配置卷 <block ref="6d8c8eb29a4e4c3a50119b70d2e8171e" category="inline-link-macro-rx"></block>，步骤 2 。</block>
  <block id="78b7c8c28867630a421236d6f1ff9ba3" category="paragraph">在以下示例 PVC 定义文件中指定了 `accessModes` 值 `ReadWriteMany` 。有关 `accessMode` 字段的详细信息，请参见<block ref="ca589c3cf5b20ae0a636e2b7691f2873" category="inline-link-rx"></block>。</block>
  <block id="ae746e0def70d2ab7fa50a176111dcb4" category="inline-link-macro">接下来： ONTAP AI 部署高性能作业示例概述</block>
  <block id="798e149b007e44cd94dd2804adfd6be8" category="paragraph"><block ref="798e149b007e44cd94dd2804adfd6be8" category="inline-link-macro-rx"></block></block>
  <block id="c701c7fe143bef79cc6eebc32606262e" category="paragraph">要了解有关本文档中所述信息的更多信息，请参见以下资源：</block>
  <block id="e40030fd64108859627c7a126638f0e6" category="list-text">NetApp AI 控制平台：</block>
  <block id="63178726ae501745b3914ec3aa50969e" category="list-text">NetApp AI 控制平面技术报告</block>
  <block id="3ce56c027572d1908d65b63056be024f" category="inline-link"><block ref="3ce56c027572d1908d65b63056be024f" category="inline-link-rx"></block></block>
  <block id="445a4d3400bdde832e8898d8349696c0" category="paragraph"><block ref="445a4d3400bdde832e8898d8349696c0" category="inline-link-rx"></block></block>
  <block id="de1e4a3a0cae539a34678546eb6e91b3" category="list-text">适用于容器的 NetApp 持久存储：</block>
  <block id="36c1c8df527a7721115f4ba53b5ea5a6" category="inline-link"><block ref="36c1c8df527a7721115f4ba53b5ea5a6" category="inline-link-rx"></block></block>
  <block id="e582bd0f584c041fb70164ea1502666b" category="paragraph"><block ref="e582bd0f584c041fb70164ea1502666b" category="inline-link-rx"></block></block>
  <block id="193721fbb9ea3851cafcea43a4d95f73" category="list-text">ML 框架和工具：</block>
  <block id="c8c2399b3aef347e9bdc7ab4ff8da4e0" category="inline-link"><block ref="c8c2399b3aef347e9bdc7ab4ff8da4e0" category="inline-link-rx"></block></block>
  <block id="9a8ec45d909b996af4c042e44b5c5f29" category="list-text">TensorFlow ：适用于所有人的开源机器学习框架<block ref="db3465122fd83ad1dc4cff7e67d794df" category="inline-link-rx"></block></block>
  <block id="c5fd214cdd0d2b3b4272e73b022ba5c2" category="list-text">Docker</block>
  <block id="4c3db4ae25b5f5aaa206a7fedd201322" category="inline-link"><block ref="4c3db4ae25b5f5aaa206a7fedd201322" category="inline-link-rx"></block></block>
  <block id="60ea9e9ecbf839c413c5e977002eabf4" category="paragraph"><block ref="60ea9e9ecbf839c413c5e977002eabf4" category="inline-link-rx"></block></block>
  <block id="30136395f01879792198317c11831ea4" category="list-text">Kubernetes</block>
  <block id="9b4643ea7f05b216a0cf56ceddb43241" category="inline-link"><block ref="9b4643ea7f05b216a0cf56ceddb43241" category="inline-link-rx"></block></block>
  <block id="6bd14be39aedfe96ceacec2caaac0532" category="paragraph"><block ref="6bd14be39aedfe96ceacec2caaac0532" category="inline-link-rx"></block></block>
  <block id="bb643a3a76aab569f9245a19f77d4b65" category="list-text">Kubeflow</block>
  <block id="a33d91971f7757996ab0eb8eb0362814" category="inline-link"><block ref="a33d91971f7757996ab0eb8eb0362814" category="inline-link-rx"></block></block>
  <block id="6771540ad76dbed724cb9025978b8510" category="paragraph"><block ref="6771540ad76dbed724cb9025978b8510" category="inline-link-rx"></block></block>
  <block id="cc68740519bf7afc9dc5c17acc7db61e" category="list-text">Jupyter 笔记本电脑服务器</block>
  <block id="c90a0598d42425e6ec2dfb3058534b35" category="inline-link"><block ref="c90a0598d42425e6ec2dfb3058534b35" category="inline-link-rx"></block></block>
  <block id="ef9e62eeb81c0987fbe61de48635886a" category="paragraph"><block ref="ef9e62eeb81c0987fbe61de48635886a" category="inline-link-rx"></block></block>
  <block id="3bc4d41311862190a8fd0d6c8f661971" category="list-text">Iguazio 数据科学平台</block>
  <block id="737d4d1e81ff236001338f46d1623aaa" category="list-text">Iguazio 数据科学平台文档</block>
  <block id="7911479a3e8e121b0dc1c551f56fa6ca" category="inline-link"><block ref="7911479a3e8e121b0dc1c551f56fa6ca" category="inline-link-rx"></block></block>
  <block id="bcdc0ac9ae93bcfb8ae21a0a8713528e" category="paragraph"><block ref="bcdc0ac9ae93bcfb8ae21a0a8713528e" category="inline-link-rx"></block></block>
  <block id="4f0f362becf6baf6e08f490115d76d98" category="list-text">Nercio 无服务器功能</block>
  <block id="89aa84cdf5db1bece2993801c78914de" category="inline-link"><block ref="89aa84cdf5db1bece2993801c78914de" category="inline-link-rx"></block></block>
  <block id="93eac034cc1c1aaedaf6ed41063825ee" category="paragraph"><block ref="93eac034cc1c1aaedaf6ed41063825ee" category="inline-link-rx"></block></block>
  <block id="b5266d58998338015b5e02ee7e84a833" category="list-text">MLRun 开源渠道业务流程框架</block>
  <block id="b96a861dccea968edc0b7a9ff96203e9" category="inline-link"><block ref="b96a861dccea968edc0b7a9ff96203e9" category="inline-link-rx"></block></block>
  <block id="70a8a001358e056f435199da7e17e427" category="paragraph"><block ref="70a8a001358e056f435199da7e17e427" category="inline-link-rx"></block></block>
  <block id="b3f90aaddad391963c2090db8f1b727e" category="list-text">NVIDIA DGX-1 系统</block>
  <block id="45a310b0e4b087b75cb073303044f6f9" category="inline-link"><block ref="45a310b0e4b087b75cb073303044f6f9" category="inline-link-rx"></block></block>
  <block id="af828c56c03364ebbde4c582adeb8de3" category="paragraph"><block ref="af828c56c03364ebbde4c582adeb8de3" category="inline-link-rx"></block></block>
  <block id="d6a377b23d0f4dbe3f5bf91d5f6abf74" category="list-text">NVIDIA Tesla V100 Tensor 核心 GPU</block>
  <block id="fad8218d69ce01748faed5492aa5d3ef" category="inline-link"><block ref="fad8218d69ce01748faed5492aa5d3ef" category="inline-link-rx"></block></block>
  <block id="a724832176ce84a9d4be5c34e44891d3" category="paragraph"><block ref="a724832176ce84a9d4be5c34e44891d3" category="inline-link-rx"></block></block>
  <block id="0df7621d860637a2e6e462c56322edab" category="list-text">NVIDIA GPU 云</block>
  <block id="5c75bfead88762783d54deaaa3d62735" category="inline-link"><block ref="5c75bfead88762783d54deaaa3d62735" category="inline-link-rx"></block></block>
  <block id="839d9b8469a8d9554891a7515a2b9be7" category="paragraph"><block ref="839d9b8469a8d9554891a7515a2b9be7" category="inline-link-rx"></block></block>
  <block id="b2412d3528eff2c1e191154bf1ecfd60" category="list-text">NetApp AFF 系统</block>
  <block id="584122d1d5e8c2c4232e029a6896ba40" category="list-text">AFF 产品规格</block>
  <block id="9a84c14d2692222552174943486e7136" category="inline-link"><block ref="9a84c14d2692222552174943486e7136" category="inline-link-rx"></block></block>
  <block id="0d9d8991a05834f0e52a99b37ce360b8" category="paragraph"><block ref="0d9d8991a05834f0e52a99b37ce360b8" category="inline-link-rx"></block></block>
  <block id="5f662f6dc276dd5a2a83440d0fe63e9b" category="list-text">适用于 AFF 的 NetApp 闪存优势</block>
  <block id="9dcd8a7bfc88cf6bbca4b422861950bf" category="inline-link"><block ref="9dcd8a7bfc88cf6bbca4b422861950bf" category="inline-link-rx"></block></block>
  <block id="72cf25e9f1e13167cd0dde6f285552ea" category="paragraph"><block ref="72cf25e9f1e13167cd0dde6f285552ea" category="inline-link-rx"></block></block>
  <block id="30df7f622635480ab538fb3016f9c36a" category="list-text">ONTAP 9.x 文档</block>
  <block id="a5bc7bee9fd33d829e41934aedd6404c" category="inline-link"><block ref="a5bc7bee9fd33d829e41934aedd6404c" category="inline-link-rx"></block></block>
  <block id="a5d59e86f09bafae4247836d5135b6a3" category="paragraph"><block ref="a5d59e86f09bafae4247836d5135b6a3" category="inline-link-rx"></block></block>
  <block id="35d8efcf211e40a836698bff14ed0ff6" category="list-text">NetApp FlexGroup 技术报告</block>
  <block id="1ab29fc7fde3319a82a477ec308cf820" category="inline-link"><block ref="1ab29fc7fde3319a82a477ec308cf820" category="inline-link-rx"></block></block>
  <block id="7a26d62dac2be507dcc3e5b9da0ed765" category="paragraph"><block ref="7a26d62dac2be507dcc3e5b9da0ed765" category="inline-link-rx"></block></block>
  <block id="af2063646dcea30a4bac90a1c51b14aa" category="list-text">NetApp ONTAP AI</block>
  <block id="47c991332229e0cbfe947beaa428ea61" category="list-text">采用 DGX-1 的 ONTAP AI 和 Cisco 网络设计指南</block>
  <block id="b141781260425e95eee945147e2f0d99" category="inline-link"><block ref="b141781260425e95eee945147e2f0d99" category="inline-link-rx"></block></block>
  <block id="9fbee18519e76388280bc1f8e3fd6c7e" category="paragraph"><block ref="9fbee18519e76388280bc1f8e3fd6c7e" category="inline-link-rx"></block></block>
  <block id="0be3b0697a0ffdfe9065df24ec1d3e16" category="list-text">《采用 DGX-1 的 ONTAP AI 和 Cisco 网络部署指南》</block>
  <block id="921f17c41dea89b0a711f380e9864e09" category="inline-link"><block ref="921f17c41dea89b0a711f380e9864e09" category="inline-link-rx"></block></block>
  <block id="aef3d0752148699921f8a251537d5ff3" category="paragraph"><block ref="aef3d0752148699921f8a251537d5ff3" category="inline-link-rx"></block></block>
  <block id="205a4f16a51f3acd6dbba76dbeb10818" category="list-text">采用 DGX-1 和 Mellanox 网络设计指南的 ONTAP AI</block>
  <block id="07dc94af34e2f98bbc8328d8ef9ea1e0" category="inline-link"><block ref="07dc94af34e2f98bbc8328d8ef9ea1e0" category="inline-link-rx"></block></block>
  <block id="0a9e1455c4a5a9965867a5efd6b8cc9b" category="paragraph"><block ref="0a9e1455c4a5a9965867a5efd6b8cc9b" category="inline-link-rx"></block></block>
  <block id="913c29df09bcb5715ed7a48c12f3a0da" category="list-text">ONTAP AI 网络</block>
  <block id="ae2703e9b1dff6da048c786142c2e7db" category="list-text">Cisco Nexus 3232C 系列交换机</block>
  <block id="bb31172f259c591005fd4cbcdbfadd11" category="inline-link"><block ref="bb31172f259c591005fd4cbcdbfadd11" category="inline-link-rx"></block></block>
  <block id="96eb8aa0e86d101fdf87284d7d6f1bc7" category="paragraph"><block ref="96eb8aa0e86d101fdf87284d7d6f1bc7" category="inline-link-rx"></block></block>
  <block id="8a27a2062df55e0aa73964ea8ec2ab55" category="list-text">Mellanox 横向扩展 SN2000 以太网交换机系列</block>
  <block id="87a849c2f3c412a491f97674d5e27ed1" category="inline-link"><block ref="fd77c1cd25d650110f7047fa02f8327d" category="inline-link-rx"></block></block>
  <block id="a6c16c720941d75800533dedd69929cc" category="paragraph"><block ref="ad90d1952f7d0f85370461937e4484b7" category="inline-link-rx"></block></block>
  <block id="9e7ed405a093d845e28cae41085bc436" category="paragraph">要成功部署 NetApp HCI 流量，需要对用于处理此流量的交换机进行特定配置。</block>
  <block id="00693354ac7b265a2b5ba89c2979664d" category="paragraph">有关物理布线和交换机的详细信息，请参见《 NetApp HCI 网络设置指南》。此解决方案对计算节点采用双缆线设计。此外，还可以在六节点缆线设计中配置计算节点，以便为部署计算节点提供选项。</block>
  <block id="0bcba66f43174baed477d3e7c9ef2f26" category="paragraph">下图显示在下 <block ref="4810ed94c68c63c308571475c543717e" category="inline-link-macro-rx"></block> 描绘了此 NetApp HCI 解决方案的网络拓扑结构，并为计算节点设计了双缆线。</block>
  <block id="bc7819df07e586f4dc775cf9ff53de93" category="paragraph">NetApp HCI 计算节点提供两种外形规格：半宽和全宽，两种机架单元大小为 1 RU 和 2 RU 。此解决方案中使用的 410c 节点为半宽和 1 RU ，位于一个机箱中，最多可容纳四个此类节点。此解决方案中使用的另一个计算节点是 H615c ，它是一个全宽节点，大小为 1 RU 。H410c 节点基于 Intel Skylake 处理器， H615c 节点基于第二代 Intel 级联湖处理器。可以将 NVIDIA GPU 添加到 H615c 节点中，每个节点最多可以托管三个 NVIDIA Tesla T4 16 Gb GPU 。</block>
  <block id="76625a88bc28056ebbda6441ab9e6d6e" category="paragraph">H615c 节点是适用于 NetApp HCI 的最新系列计算节点，也是可支持 GPU 的第二系列计算节点。第一个支持 GPU 的型号是 H610c 节点（全宽， 2RU ），它可以支持两个 NVIDIA Tesla M10 GPU 。</block>
  <block id="38df529f92547bec09e6de9c5c54e1f4" category="paragraph">在此解决方案中， H615c 节点优于 H610c 节点，因为具有以下优势：</block>
  <block id="a0e8b396fe6410a02f4b36f78183ad81" category="list-text">减少数据中心占用空间，这对于边缘部署至关重要</block>
  <block id="dcd21caecb52c5617b3befe18ff83466" category="list-text">支持为加快推理速度而设计的新一代 GPU</block>
  <block id="2c75f8157cd1826f68ece0d367d68ca3" category="list-text">降低电耗</block>
  <block id="6948a911f3c844ee90cb547232f2fe61" category="list-text">降低散热</block>
  <block id="afa461255f60ded6b06aebac209e3d5f" category="section-title">NVIDIA T4 GPU</block>
  <block id="f0ed3fa53795a6b773bca8af69f057ee" category="paragraph">推理所需的资源与训练工作负载所需的资源几乎没有什么关系。事实上，大多数现代手持设备都能够在没有 GPU 等强大资源的情况下处理少量推理。但是，对于处理各种应用程序的任务关键型应用程序和数据中心来说， GPU 在减少推理时间和提高应用程序性能方面起着关键作用，这些应用程序需要极低的推理延迟，同时又需要极高的并行处理能力和大量的输入批处理大小。</block>
  <block id="4ca2fcb3fcd9ccd1856ff371ea18d8cf" category="paragraph">NVIDIA Tesla T4 是一种基于 Turing 架构的 x16 PCIe 第 3 代单插槽低性能 GPU 。T4 GPU 可实现通用推理加速，涵盖图像分类和标记，视频分析，自然语言处理，自动语音识别和智能搜索等应用。Tesla T4 的推理功能范围广泛，可用于企业级解决方案和边缘设备。</block>
  <block id="ba5aae131acb4a9e1f7a3a21839b926e" category="paragraph">由于这些 GPU 的功耗较低且采用小型 PCIe 外形，因此非常适合部署在边缘基础架构中。由于 T4 GPU 的大小，可以在与双插槽全尺寸 GPU 相同的空间中安装两个 T4 GPU 。T4S 虽然较小，但具有 16 GB 内存，但可以支持大型 ML 型号，也可以同时在多个较小型号上运行推理。</block>
  <block id="3fa5c3f120f5c88d9432d5166c0ab0d6" category="paragraph">基于 Turing 的 T4 GPU 包括一个增强版 Tensor 核心，并支持用于推理 FP32 ， FP16 ， INT8 和 INT4 的一系列预收件。GPU 包括 2 ， 560 个 CUDA 核心和 320 个 Tensor 核心，可提供高达 130 tera 每秒操作数（ TOPS ）的 INT8 以及高达 260 个 TOPS 的 INT4 推理性能。与基于 CPU 的推理相比，由新的 Turing Tensor 核心提供支持的 Tesla T4 可将推理性能提高多达 40 倍。</block>
  <block id="e3a8bc4d0b0b713ad331e0f2f4059411" category="paragraph">Turing Tensor 核心可加快神经网络训练和推理功能核心的矩阵 - 矩阵乘法的速度。它们尤其擅长推理计算，在推理计算中，经过培训的深度神经网络可以根据给定输入推断和提供有用的相关信息。</block>
  <block id="3ffa5a061e6c8405f2368852240a1056" category="paragraph">Turing GPU 架构继承了 Volta 架构中引入的增强型多进程服务（ MPS ）功能。与基于 Pascal 的 Tesla GPU 相比， Tesla T4 上的 MPS 可提高小型批处理的推理性能，降低启动延迟，提高 QoS 并支持处理更多并发客户端请求。</block>
  <block id="3e8439fbd665d622db08f05220ec0854" category="paragraph">NVIDIA T4 GPU 是 NVIDIA AI 推理平台的一部分，该平台支持所有 AI 框架，并提供全面的工具和集成，可显著简化高级 AI 的开发和部署。</block>
  <block id="47ffbca950709cb9bb458b13d5b04b6c" category="section-title">存储设计： Element 软件</block>
  <block id="b84d9ff0a4d2c14a68e6ceb7c486c2d8" category="paragraph">NetApp Element 软件为 NetApp HCI 系统的存储提供支持。它通过横向扩展灵活性和有保障的应用程序性能提供灵活的自动化，以加速提供新服务。</block>
  <block id="d1873042686b2a7d3a594c6b360da833" category="paragraph">存储节点可以按一个增量无中断地添加到系统中，并且存储资源可立即供应用程序使用。添加到系统中的每个新节点都会为可用池提供精确的额外性能和容量。数据会在后台自动在集群中的所有节点之间进行负载平衡，从而在系统增长时保持平均利用率。</block>
  <block id="89636a6d82f2d4860808575033442879" category="paragraph">Element 软件支持 NetApp HCI 系统通过保证每个工作负载的 QoS 来轻松托管多个工作负载。通过为每个工作负载提供精确的性能控制以及最小，最大和突发设置，该软件可以实现精心规划的整合，同时保护应用程序性能。它可以将性能与容量分离，并允许为每个卷分配特定的容量和性能。可以动态修改这些规范，而不会中断数据访问。</block>
  <block id="09aec52f9d746d095e820963f7d39a08" category="paragraph">如下图所示， Element 软件与 NetApp ONTAP 集成，可在运行不同存储操作系统的 NetApp 存储系统之间实现数据移动。可以使用 NetApp SnapMirror 技术将数据从 Element 软件移动到 ONTAP ，反之亦然。Element 通过与 NetApp Cloud Volumes ONTAP 集成来使用相同的技术提供云连接，从而实现从边缘到核心以及多个公有云服务提供商的数据移动。</block>
  <block id="eb835bc3880e130f1e66a13b18044aa3" category="paragraph">在此解决方案中，基于 Element 的存储可提供在 NetApp HCI 系统上运行工作负载和应用程序所需的存储服务。</block>
  <block id="bdb764c650b58f392fce1f5d97b72a21" category="paragraph"><block ref="bdb764c650b58f392fce1f5d97b72a21" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5f54bbe373308e89b96494226e68b57c" category="section-title">存储设计： ONTAP Select</block>
  <block id="bd8c0843a75eb43a8db22e340ecc8d8e" category="paragraph">NetApp ONTAP Select 在 NetApp HCI 上引入了软件定义的数据存储服务模式。它基于 NetApp HCI 功能构建，在扩展数据网络结构的同时，为 HCI 平台添加了一组丰富的文件和数据服务。</block>
  <block id="6dfe47c54de099221d5b5e659141debe" category="paragraph">虽然 ONTAP Select 是实施此解决方案的可选组件，但它确实具有诸多优势，包括数据收集，保护，移动性等。 在整个 AI 数据生命周期中非常有用。它有助于简化数据处理中的几个日常挑战，包括载入，收集，培训，部署， 和分层。</block>
  <block id="1c6ab66655986b8d034944980eaf4f2b" category="paragraph"><block ref="1c6ab66655986b8d034944980eaf4f2b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b6c0fc6563f861c28ec02f7691929677" category="paragraph">ONTAP Select 可以作为 VM 在 VMware 上运行，但仍可提供在专用 FAS 平台上运行时可用的大多数 ONTAP 功能，例如：</block>
  <block id="5f53a7027a72c2a8fb0db840b0dbfc69" category="list-text">支持 NFS 和 CIFS</block>
  <block id="8d9a9b19531e4a85c6a70c90ddccfe61" category="list-text">NetApp FlexClone 技术</block>
  <block id="79849c69657d54d5bfdd901f71375897" category="list-text">NetApp FlexCache 技术</block>
  <block id="13a72825b6e9e6e2e2ceb08b2157bcab" category="list-text">NetApp ONTAP FlexGroup 卷</block>
  <block id="982a232281d5c8f4cf6fb14ae274ed72" category="list-text">NetApp SnapMirror 软件</block>
  <block id="c55856bdcaf460995cddbb5b99a10fd4" category="paragraph">ONTAP Select 可用于利用 FlexCache 功能，该功能可通过缓存后端原始卷中的频繁读取数据来帮助减少数据读取延迟，如下图所示。对于具有大量并行处理的高端推理应用程序，同一模型的多个实例会部署在推理平台上，从而导致对同一模型进行多次读取。通过验证所需模型是否可在原始卷或源卷中使用，可以将经过训练的模型的更新版本无缝引入推理平台。</block>
  <block id="d4fa67b64d22da2ce1615104d6877b06" category="paragraph"><block ref="d4fa67b64d22da2ce1615104d6877b06" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e402cbf44fb6b7d967e50bf9f109b60c" category="paragraph">NetApp Trident 是一款开源动态存储编排程序，可用于管理所有主要 NetApp 存储平台上的存储资源。它与 Kubernetes 本机集成，因此可以使用原生 Kubernetes 接口和构造按需配置永久性卷（ PV ）。Trident 支持微服务和容器化应用程序使用企业级存储服务，例如 QoS ，存储效率和克隆，以满足应用程序的持久存储需求。</block>
  <block id="982062f4e0e8942dadfab12129bf75ce" category="paragraph">容器是最常用的应用程序打包和部署方法之一， Kubernetes 是托管容器化应用程序的最常用平台之一。在此解决方案中，推理平台基于 Kubernetes 基础架构构建。</block>
  <block id="4dd2b8a3976248dba03f3d14961b5dca" category="paragraph">Trident 目前支持跨以下平台的存储编排：</block>
  <block id="1b98c3cc50c633363023febad76feab6" category="list-text">ONTAP ： NetApp AFF ， FAS 和 Select</block>
  <block id="00013a1e9377085a8a0ea38707a061ed" category="list-text">Element 软件： NetApp HCI 和 NetApp SolidFire 全闪存存储</block>
  <block id="cba7a3fe703fc3fbf6352cbdb4960422" category="list-text">NetApp SANtricity 软件： E 系列和 EF 系列</block>
  <block id="7450cfde7058dc5e1f7909d0280fd7ae" category="list-text">Azure NetApp Files</block>
  <block id="93a86ad5e51f4005cd28170e83bcf6b3" category="list-text">NetApp Cloud Volumes Service ： AWS 和 Google Cloud</block>
  <block id="16872b6d335ee83d3f40b6bf3483f767" category="paragraph">Trident 是一款简单但功能强大的工具，不仅可以跨多个存储平台实现存储编排，还可以跨从边缘到核心再到云的整个 AI 数据生命周期范围实现存储编排。</block>
  <block id="666a7c8e00eed8b242b14821b9aed8bc" category="paragraph">Trident 可用于从构成经过培训的模型的 NetApp Snapshot 副本配置 PV 。下图显示了通过引用现有 Snapshot 副本创建永久性卷请求（ PVC ）的 Trident 工作流。之后， Trident 将使用 Snapshot 副本创建卷。</block>
  <block id="aab402bb29dbbefe5df798d88cfb7f9a" category="paragraph"><block ref="aab402bb29dbbefe5df798d88cfb7f9a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8d4609f6072df23a786f691791f15228" category="paragraph">这种从 Snapshot 副本引入经过培训的模型的方法支持强大的模型版本控制。它简化了向应用程序引入较新版本的模型以及在不同版本的模型之间切换推理的过程。</block>
  <block id="142f782bb2b326679982208fe40cec31" category="section-title">NVIDIA DeepOps</block>
  <block id="6074efef06402d4ca0ae5c303ee9abec" category="paragraph">NVIDIA DeepOps 是 Ansible 脚本的模块化集合，可用于自动部署 Kubernetes 基础架构。您可以使用多种部署工具来自动部署 Kubernetes 集群。在此解决方案中， DeepOps 是首选，因为它不仅部署 Kubernetes 基础架构，还安装了必要的 GPU 驱动程序，适用于 Docker 的 NVIDIA 容器运行时（ NVIDIA-docker2 ）以及各种其他依赖项，以实现 GPU 加速工作。它囊括了 NVIDIA GPU 的最佳实践，并可根据需要自定义或作为单独的组件运行。</block>
  <block id="2341e2a337115dfc4132ea76f2f2a8e2" category="paragraph">DeepOps 在内部使用 Kubespre 部署 Kubernetes ，它作为子模块包含在 DeepOps 中。因此，应使用 Kubernetes 执行常见的 Kubernetes 集群管理操作，例如添加节点，删除节点和升级集群。</block>
  <block id="cf6cd1956ce944bac905f4bf84d9feca" category="paragraph">使用 MetalLb 的基于软件的 L2 负载平衡器以及基于 NGINX 的传入控制器，也可通过使用 DeepOps 提供的脚本在此解决方案中部署。</block>
  <block id="97544c0d23c293b52ffc5306310347b7" category="paragraph">在此解决方案中，三个 Kubernetes 主节点部署为 VM ，两个采用 NVIDIA Tesla T4 GPU 的 H615c 计算节点设置为 Kubernetes 工作节点。</block>
  <block id="ae9509dc43ae89755f49a52c385e41df" category="section-title">NVIDIA GPU 操作员</block>
  <block id="cd3ca079b15fb3d5ee85efddd39c1959" category="paragraph">GPU 操作员部署 NVIDIA K8s-device-plugin 以支持 GPU ，并将 NVIDIA 驱动程序作为容器运行。它基于 Kubernetes 操作员框架，可帮助自动管理配置 GPU 所需的所有 NVIDIA 软件组件。这些组件包括 NVIDIA 驱动程序，适用于 GPU 的 Kubernetes 设备插件， NVIDIA 容器运行时以及与 Kubernetes Node 功能发现结合使用的自动节点标记。</block>
  <block id="ec330edae4de0cf0faedc48b8b6c2023" category="inline-link">NVIDIA EGX</block>
  <block id="070e3b6d1677feec2b51db9d6754a11b" category="paragraph">GPU 操作员是的一个重要组件<block ref="22244c005fb9a4c4fdd76fe023579dbe" category="inline-link-rx"></block> 软件定义的平台，旨在实现大规模混合云和边缘运营并提高运营效率。当 Kubernetes 集群需要快速扩展时，该功能尤其有用，例如，在配置更多基于 GPU 的工作节点以及管理底层软件组件的生命周期时。由于 GPU 操作员将所有内容作为容器运行，包括 NVIDIA 驱动程序，因此管理员只需启动或停止容器即可轻松交换各种组件。</block>
  <block id="2c5e74d45708e2fae638e03f88353b75" category="section-title">NVIDIA Triton 推理服务器</block>
  <block id="d06c74e5451eca611957412f4abca383" category="paragraph">NVIDIA Triton 推理服务器（ Triton 服务器）可简化在生产数据中心部署 AI 推理解决方案的过程。此微服务专为在生产数据中心进行推理而设计。它可以最大限度地提高 GPU 利用率，并与 Docker 和 Kubernetes 无缝集成到 DevOps 部署中。</block>
  <block id="3384968d00477a39d73a5c6c33d4924e" category="paragraph">Triton 服务器为 AI 推理提供了一个通用解决方案。因此，研究人员可以专注于创建经过培训的高质量模型，开发运营工程师可以专注于部署，开发人员可以专注于应用程序，而无需为每个采用 AI 的应用程序重新设计平台。</block>
  <block id="d86cce4721af519b3bb7d889c40ed134" category="paragraph">以下是 Triton Server 的一些主要功能：</block>
  <block id="77f3ce02ff0ffe857ab726850eaa1c17" category="list-text">* 支持多个框架。 * Triton 服务器可以处理多种型号组合，型号数量仅受系统磁盘和内存资源的限制。它可以支持 TensorRT ， TensorFlow GraphDef ， TensorFlow SavedModel ， ONNX ， PyTorch ， 和 Caffe2 NetDef 型号格式。</block>
  <block id="69bbd3dc0108516814091b9110ab1302" category="list-text">* 并发模式执行。* 同一型号的多个型号或多个实例可以在一个 GPU 上同时运行。</block>
  <block id="c898c7f97ff89e5fd449450cc2379949" category="list-text">* 多 GPU 支持。 * Triton 服务器可通过在一个或多个 GPU 上对多个型号启用推理来最大限度地提高 GPU 利用率。</block>
  <block id="05e8ec290b0fc48f2bcca545bdc12da8" category="list-text">* 支持批处理。 * Triton 服务器可以接受对一批输入的请求，并使用相应的一批输出进行响应。推理服务器支持多种计划和批处理算法，这些算法可将各个推理请求组合在一起，以提高推理吞吐量。无状态和有状态应用程序都可以使用批处理算法，需要正确使用。这些计划和批处理决策对于请求推理的客户端是透明的。</block>
  <block id="5d71858d793efb2c8fa3fe8692a4667c" category="list-text">* 整体支持。 * 集合是一个管道，包含多个模型，这些模型之间具有输入和输出感应器连接。可以向集合发出推理请求，从而执行整个管道。</block>
  <block id="3ff996abd5f2ccddeed18813019d0734" category="list-text">* 指标。 * 指标是有关自动扩展和负载平衡的 GPU 利用率，服务器吞吐量，服务器延迟和运行状况的详细信息。</block>
  <block id="279b1a43962ad2cf8a3d1f4d38a04cf4" category="paragraph">NetApp HCI 是一种混合多云基础架构，可托管多个工作负载和应用程序， Triton 推理服务器设备齐全，可满足多个应用程序的推理要求。</block>
  <block id="460aa9e541c9e2f64ff07014b262da83" category="paragraph">在此解决方案中，使用部署文件在 Kubernetes 集群上部署 Triton 服务器。使用此方法，可以根据需要覆盖和自定义 Triton Server 的默认配置。此外， Triton Server 还可以使用 HTTP 或 gRPC 端点提供推理服务，从而使远程客户端可以为服务器管理的任何模型请求推理。</block>
  <block id="d3760f392f25f12d4336b53186b52753" category="paragraph">永久性卷通过 NetApp Trident 提供给运行 Triton 推理服务器的容器，并且此永久性卷配置为推理服务器的模型存储库。</block>
  <block id="ea651f715eeffba90000bca1c4596a5e" category="paragraph">Triton 推理服务器使用 Kubernetes 部署文件使用不同的资源集进行部署，每个服务器实例都提供了一个负载平衡器前端以实现无缝可扩展性。这种方法还说明了为推理工作负载分配资源的灵活性和简便性。</block>
  <block id="8a2653563ed235b7b41eacd89fa02136" category="inline-link-macro">接下来：部署 NetApp HCI —在边缘部署人工智能推理</block>
  <block id="27434d2887a732fdf3fef2313f44c604" category="paragraph"><block ref="27434d2887a732fdf3fef2313f44c604" category="inline-link-macro-rx"></block></block>
  <block id="337f05fad2de58e4a8b74cb25536b52d" category="doc">设置概述</block>
  <block id="666f45aef7a28ef5ba6e4bfb2f71bcee" category="section-title">安装 Iguazio</block>
  <block id="b681b0e4b3576aa1cd854e2b66c16dcd" category="paragraph">Iguazio 可以安装在内部或云提供商上。配置可以作为一项服务来完成，并由 Iguazio 或客户进行管理。在这两种情况下， Iguazio 都会提供一个部署应用程序（ Provazio ）来部署和管理集群。</block>
  <block id="3b31e2e4387e938056251a113831e6da" category="inline-link">NVA-1121</block>
  <block id="8334797b9b3383d4f48d98178b8845ea" category="inline-link">此页面</block>
  <block id="ade8a7efee71036d2ca57676a54b31e3" category="paragraph">有关内部安装，请参见<block ref="c37aff28e1a25306bf31a11e21ff2c71" category="inline-link-rx"></block> 用于计算，网络和存储设置。Iguazio 的内部部署由 Iguazio 提供，客户无需支付额外费用。请参见<block ref="d273dd0a16e6003b56381a70823807f7" category="inline-link-rx"></block> DNS 和 SMTP 服务器配置。Provazio 安装页面如下所示。</block>
  <block id="8e72dced5918c4009ff80044ba6f44db" category="paragraph"><block ref="8e72dced5918c4009ff80044ba6f44db" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c16d8d5e717cd029389f76abddf769b7" category="inline-link-macro">下一步：配置 Kubernetes 集群</block>
  <block id="1d42e0b2a8893ff00a35554162554936" category="paragraph"><block ref="1d42e0b2a8893ff00a35554162554936" category="inline-link-macro-rx"></block></block>
  <block id="0f28f2d5a1862e1dfa785e62ba401687" category="doc">配置网络交换机（自动部署）</block>
  <block id="25dd3edc568345b2ce31589c00bf9806" category="section-title">准备所需的 VLAN ID</block>
  <block id="3d1f851eb8da06c38ed0e4ba937235eb" category="paragraph">下表列出了部署所需的 VLAN ，如此解决方案验证中所述。在执行 NDE 之前，您应在网络交换机上配置这些 VLAN 。</block>
  <block id="712bd8f4b8f53d67fbfdac1d6b997f2b" category="cell">网段</block>
  <block id="3ec365dd533ddb7ef3d1c111186ce872" category="cell">详细信息</block>
  <block id="cc009596b23ce571e68585a71f96e225" category="cell">HCI 终端用户界面（ TUI ）网络</block>
  <block id="2969c98ec9e883e282f776f2f809d6ba" category="cell">用于访问节点，主机和子系统的管理接口的网络</block>
  <block id="c7b90b0fc23725f299b47c5224e6ec0d" category="cell">3488</block>
  <block id="d86030abdf90a0e463f815e6366bf38e" category="cell">VMware vMotion</block>
  <block id="c1200926d768dde04260be329de8198a" category="cell">用于实时迁移虚拟机的网络</block>
  <block id="1b318124e37af6d74a03501474f44ea1" category="cell">3489</block>
  <block id="7413e03d733b1996cd31b7a43839da25" category="cell">iSCSI SAN 存储</block>
  <block id="3d38d014122f0ebf1daf5265871ed1e7" category="cell">用于 iSCSI 存储流量的网络</block>
  <block id="72f67e70f6b7cdc4cc893edaddf0c4c6" category="cell">3490</block>
  <block id="e498749f3c42246d50b15c81c101d988" category="cell">应用程序</block>
  <block id="c93d01ddb05f187c03071fb85e98a652" category="cell">应用程序流量网络</block>
  <block id="944a5ae3483ed5c1e10bbccb7942a279" category="cell">3487</block>
  <block id="1d1a594959ec615f56516f5d0f5e8ddb" category="cell">NFS</block>
  <block id="e8ccc396ff9ec8f50e57c82ed49902b6" category="cell">NFS 存储流量的网络</block>
  <block id="6c91724b896cdcf48285039ab05b3aaf" category="cell">3491.</block>
  <block id="26f939ce1e4420fef88a7c8614f77386" category="cell">IPL*</block>
  <block id="ec6be72040409d09cd50da500a6c235f" category="cell">Mellanox 交换机之间的对等链路</block>
  <block id="1bd69c7df3112fb9a584fbd9edfc6c90" category="cell">4000</block>
  <block id="925641e0b76c28cc940e8f3ca178d826" category="cell">原生</block>
  <block id="9eb9be47b9f401b44920a23e828329b0" category="cell">原生 VLAN</block>
  <block id="7ddb14649c8f3b5b5f7e5feb68448cf9" category="paragraph">* 仅适用于 Mellanox 交换机</block>
  <block id="85e6ae49aa5d98ee3929f1af40d9574f" category="section-title">交换机配置</block>
  <block id="a2ff2f103282cf94fce005bda646f55b" category="paragraph">此解决方案使用运行 Onyx 的 Mellanox SN2010 交换机。Mellanox 交换机使用 Ansible 攻略手册进行配置。在运行 Ansible 攻略手册之前，您应手动执行交换机的初始配置：</block>
  <block id="396d487d11432eade842c671d7da18d5" category="list-text">将交换机安装到上行链路交换机，计算和存储节点并通过缆线连接。</block>
  <block id="70daf4ca9e45f39ff9591f25569ba65d" category="list-text">打开交换机的电源，并使用以下详细信息对其进行配置：</block>
  <block id="dae4a538d4ca7b6c0789932062fe718d" category="list-text">主机名</block>
  <block id="d5b5ac8b487d348e9c4d49812a0a0be7" category="list-text">管理 IP 和网关</block>
  <block id="3c136fc0cd16243d4f35d9d8c34d29b5" category="list-text">登录到 Mellanox 交换机并运行以下命令：</block>
  <block id="cca060472ed505fe62f272efab2559f8" category="paragraph">创建的 `Pre-Ansible` 配置文件可用于将交换机的配置还原到 Ansible 攻略手册执行前的状态。</block>
  <block id="a6913381d3fd82b6a03aa1d09b146ee9" category="paragraph">此解决方案的交换机配置存储在 `POST/Ansible` 配置文件中。</block>
  <block id="11c7f49a73133e0306e8f6a889185632" category="inline-link">NetApp HCI 工具包</block>
  <block id="49fbb4d43f76554eedd3ae0f5375f7cd" category="list-text">可以从下载符合 NetApp HCI 最佳实践和要求的 Mellanox 交换机配置攻略手册<block ref="e3c4cad4566affebd4eeacde2f41f5dd" category="inline-link-rx"></block>。</block>
  <block id="290af62ff4da6a60ad1266edf5186804" category="admonition">HCI 工具包还提供了一本攻略手册，用于为 Cisco Nexus 交换机设置与 NetApp HCI 类似的最佳实践和要求。</block>
  <block id="d09fa2536df7ebd110baae07515c5af5" category="admonition">有关填充变量和执行攻略手册的其他指导，请参见相应的交换机 README.md 文件。</block>
  <block id="3cd37d4143edb59b82fc1d0d7cf661e7" category="list-text">填写凭据以访问环境所需的交换机和变量。以下文本是此解决方案的变量文件示例。</block>
  <block id="7445dcd3ec2c0aeacdcaab25ac513f36" category="admonition">交换机密钥的指纹必须与执行攻略手册的主机中的指纹一致。要确保这一点，请将此密钥添加到 ` /root/ 。SSH/known_host` 或任何其他适当位置。</block>
  <block id="d0cfa17de5475e940063d13776c0bb2a" category="section-title">回滚交换机配置</block>
  <block id="f90f9d2559d777a72b7fc4fa675b18e0" category="list-text">如果发生任何超时故障或部分配置，请运行以下命令将交换机回滚到初始状态。</block>
  <block id="d42814d93eb7a83a056bc8caa5f4324c" category="admonition">此操作需要重新启动交换机。</block>
  <block id="f46db41f4d815d9669f40d6d97d789d0" category="list-text">在运行 Ansible 攻略手册之前，将配置切换为状态。</block>
  <block id="49a3608d8614f54092e625cf6a493774" category="list-text">从 Ansible 攻略手册中删除具有此配置的后 Ansible 文件。</block>
  <block id="0fef5ef8a82121b1e4307a1f5b5c38cb" category="list-text">创建一个名称与 POST/Ansible 相同的新文件，将 Pre-Ansible 配置写入该文件，然后切换到新配置以重新启动配置。</block>
  <block id="d02c2f45d208e88bd2f8da0a7329bd82" category="section-title">IP 地址要求</block>
  <block id="0646250c451d704cbbfe5c550c137d80" category="paragraph">在 VMware 和 Kubernetes 中部署 NetApp HCI 推理平台需要分配多个 IP 地址。下表列出了所需的 IP 地址数量。除非另有说明，否则 NDE 会自动分配地址。</block>
  <block id="ff2c3c150cb18cb274845be106292e68" category="cell">IP 地址数量</block>
  <block id="5b8c99dad1893a85076709b2d3c2d2d0" category="cell">IP 地址</block>
  <block id="b436c5cdfa7f8ed6148d16f028a6917f" category="cell">每个存储和计算节点一个 *</block>
  <block id="58902d22cbe0567a5f804e857704e640" category="cell">HCI 终端用户界面（ TUI ）地址</block>
  <block id="9901533df1a61d9608ec2df3c21f7387" category="cell">每个 vCenter Server （ VM ）一个</block>
  <block id="f1011d995a14d47eb99e642fb6870d34" category="cell">vCenter Server 管理地址</block>
  <block id="594b43f115771b19337d41b373bba23e" category="cell">每个管理节点（ VM ）一个</block>
  <block id="56d6729d1cae47486f4c4c9350f9d864" category="cell">管理节点 IP 地址</block>
  <block id="765b93bbe3390324328050fafac75c76" category="cell">每个 ESXi 主机一个</block>
  <block id="f7f4245fde61fc70b8e5014e8d75df59" category="cell">ESXi 计算管理地址</block>
  <block id="3915b9b619e2dc784c343a24a9f7f25e" category="cell">每个存储 / 见证节点一个</block>
  <block id="f3518ead704e772357fca67b45f0cfca" category="cell">NetApp HCI 存储节点管理地址</block>
  <block id="3d281513217d9025c9fa1195ef4610fa" category="cell">每个存储集群一个</block>
  <block id="3737508fbbc5dc4b020535e0df399dad" category="cell">存储集群管理地址</block>
  <block id="d177ee44c8692c2615cf2c92118ca9b1" category="cell">VMware vMotion 地址</block>
  <block id="984b9a0812209f6e5027fdc49fa561d6" category="cell">每个 ESXi 主机两个</block>
  <block id="c941135d0f3d3ac03a9a1acbd3e4ebe0" category="cell">iSCSI 存储流量的 ESXi 主机启动程序地址</block>
  <block id="4d22adc47afdaf247e163373eb4c62b0" category="cell">每个存储节点两个</block>
  <block id="d65d0c9415b88d12d0835a9c396f8673" category="cell">iSCSI 存储流量的存储节点目标地址</block>
  <block id="43a5b83655772fbbf0cb65464e6bf166" category="cell">每个存储集群两个</block>
  <block id="efc8ec614b96164f5dbab5e42c4bea7d" category="cell">iSCSI 存储流量的存储集群目标地址</block>
  <block id="23180f918a83971bb2301a6526e8c5f7" category="cell">两个用于 mNode</block>
  <block id="600623cd1cf805a41135d84e9550de9b" category="cell">mNode iSCSI 存储访问</block>
  <block id="87ec0f0324f1426e5c88871618e4d5c3" category="paragraph">配置相应组件时，系统会手动分配以下 IP 。</block>
  <block id="b524d2f979e4b9e0d98e29249a9aa891" category="cell">一个用于部署跳转管理网络</block>
  <block id="05e245e83f0b347a4f0b80ebd65ab661" category="cell">部署跳转 VM 以执行 Ansible 攻略手册并配置系统的其他部分—管理连接</block>
  <block id="0d4cc08ab5663f671918f6c784b3893a" category="cell">每个 Kubernetes 主节点一个管理网络</block>
  <block id="4ce20981af2bb1a76564db9e6bbb00d1" category="cell">Kubernetes 主节点 VM （三个节点）</block>
  <block id="8ca06690f4089b5f6ed4dd3638b75bc4" category="cell">每个 Kubernetes 工作节点一个管理网络</block>
  <block id="782237108382d776c2ed77a289c98028" category="cell">Kubernetes 工作节点（两个节点）</block>
  <block id="73ad40a9447ed18369cc1bc4234c08cd" category="cell">每个 Kubernetes 工作节点一个— NFS 网络</block>
  <block id="730c2909cd81d6a9febbe6927e6d5feb" category="cell">每个 Kubernetes 工作节点一个—应用程序网络</block>
  <block id="ed5a25deba49431645582925250bccc7" category="cell">三个用于 ONTAP Select 管理网络</block>
  <block id="bdbdfa4cf8effefb41a65721dac30cf0" category="cell">ONTAP Select 虚拟机</block>
  <block id="5117e234737627d438159db14118b2fb" category="cell">一个用于 ONTAP Select — NFS 网络</block>
  <block id="093e537a996c33fb0903969067710640" category="cell">ONTAP Select VM — NFS 数据流量</block>
  <block id="fe0859e55ff8658f065dc145bfe12287" category="cell">至少两个用于 Triton 推理服务器负载平衡器—应用程序网络</block>
  <block id="02e15afcf217b89d9be498bce9d1bd85" category="cell">Kubernetes 负载平衡器服务的负载平衡器 IP 范围</block>
  <block id="90b9a23bc8eb737af1e6f27c391e40f3" category="paragraph">* 此验证需要初始设置第一个存储节点 TUI 地址。NDE 会自动为后续节点分配 TUI 地址。</block>
  <block id="c76b63b9164c213166b850bae206cb40" category="section-title">DNS 和计时要求</block>
  <block id="eceadb7765ac063c4b70dd1dc1894d6b" category="paragraph">根据您的部署，您可能需要为 NetApp HCI 系统准备 DNS 记录。NetApp HCI 需要一个有效的 NTP 服务器来进行计时；如果您的环境中没有可用的时间服务器，则可以使用一个公共时间服务器。</block>
  <block id="384fb4e939ed5a46691a8cf6ea1a02f1" category="paragraph">此验证涉及使用完全限定域名（ FQDN ）为新的 VMware vCenter Server 实例部署 NetApp HCI 。在部署之前，必须在 DNS 服务器上创建一个指针（ PTR ）记录和一个地址（ A ）记录。</block>
  <block id="fec6e1038c9f50ccd9095fbb27a95d9d" category="inline-link-macro">接下来：采用自动化部署的虚拟基础架构</block>
  <block id="d89672437cbf5891d14eb45712a15d8f" category="paragraph"><block ref="d89672437cbf5891d14eb45712a15d8f" category="inline-link-macro-rx"></block></block>
  <block id="ed4a202c34987f40d5e245e76a65a243" category="paragraph">下图显示了建议的对话 AI 系统架构。您可以使用语音信号或文本输入与系统进行交互。如果检测到语音输入，则 JARVIS AI as-service （ AIaaS ）将执行 As1 ，以便为对话框管理器生成文本。对话框管理器会记住对话状态，将文本路由到相应的服务，并将命令传递到实施引擎。JARVIS NLP 服务会输入文本，识别意向和实体，并将这些意向和实体插槽输出回对话框管理器，然后由该对话框管理器向执行引擎发送操作。履行引擎由问题解答用户查询的第三方 API 或 SQL 数据库组成。从实施引擎收到结果后，对话管理器会将文本路由到 JarVis TTSAIaaS ，以便为最终用户生成音频响应。我们可以归档对话历史记录，为 Nemo 培训添加意向和插槽，以便随着更多用户与系统交互， NLP 服务得到改进。</block>
  <block id="308a0722262fbc3adde5d5d900ad0c36" category="paragraph"><block ref="308a0722262fbc3adde5d5d900ad0c36" category="inline-image-macro-rx" type="image"></block></block>
  <block id="863eef2617ffc374c485389aabdd8a24" category="paragraph">此解决方案已通过一个 DGX 工作站和一个 AFF A220 存储系统的验证。JARVIS 需要使用 T4 或 V100 GPU 来执行深度神经网络计算。</block>
  <block id="6c4fbfa85e86ba1acd8a66b367a3b2c4" category="paragraph">下表列出了在测试中实施解决方案所需的硬件组件。</block>
  <block id="71c9e70899509bff35197ba9da10dafc" category="cell">T4 或 V100 GPU</block>
  <block id="8f452959667e7665cddf2484ddca1724" category="cell">NVIDIA DGX Station</block>
  <block id="f7a05af899e536cde0a9c8476c2da0a1" category="paragraph">下表列出了在测试中实施解决方案所需的软件组件。</block>
  <block id="5acec1d6c6e07042eb0c19bc926d2633" category="cell">版本或其他信息</block>
  <block id="5339d389f2f896062fb28b05454dc94a" category="cell">NetApp ONTAP 数据管理软件</block>
  <block id="eaf2f97729e8d5e4d205672da8afc9a5" category="cell">9.6</block>
  <block id="efdec37786e687a58664ebd4ef6bdba4" category="cell">Cisco NX-OS 交换机固件</block>
  <block id="976d6c35e21478ef03ca2cec2a74dc71" category="cell">7.0 （ 3 ） I6 （ 1 ）</block>
  <block id="a62649c559be1634e22dd7df0b58ad32" category="cell">NVIDIA DGX 操作系统</block>
  <block id="4a5be8fea83a32ad5c7fc31b02ef1028" category="cell">4.0.4 — Ubuntu 18.04 LTS</block>
  <block id="0664d9eb73230b2a0b514b0facae8ade" category="cell">NVIDIA JarVis Framework</block>
  <block id="cc5f21cb121669006a19c9fde049f048" category="cell">EA v0.2</block>
  <block id="dfcc0491fc5a6e738ca8b5ef3a258093" category="cell">NVIDIA Nemo</block>
  <block id="317fe32bf712dffb43ddc0ee8dde8c3c" category="cell">nvcr.io/nvidia/nemo ： v0.10</block>
  <block id="44769dc982b2126503d2d014bcf7c15a" category="cell">Docker 容器平台</block>
  <block id="0cc9a8e76e0a79d0e0072e0a0d675fe5" category="cell">18.06.1-ce [e68fc7a]</block>
  <block id="3032d0de2852f0bb1e13142c2c47cd5b" category="inline-link-macro">接下来：使用 Jarvis ， Cloud Sync 和 Nemo 概述构建虚拟助手</block>
  <block id="5cefb81f0324c44ec13c02fa7700924b" category="paragraph"><block ref="5cefb81f0324c44ec13c02fa7700924b" category="inline-link-macro-rx"></block></block>
  <block id="9783bbad26249ed7f40d89e12ba42020" category="doc">运行：适用于 AI 工作负载编排的 AI 平台</block>
  <block id="cb39fb629a91fdf37928a15d38e05318" category="list-text">加快创新速度。通过将运行： AI 资源池化，排队和优先级划分机制与 NetApp 存储系统结合使用，研究人员可以消除基础架构管理方面的麻烦，并可以专注于数据科学。运行： AI 和 NetApp 客户可以根据需要运行任意数量的工作负载，而不会出现计算或数据管道瓶颈，从而提高工作效率。</block>
  <block id="8df86cf2931aab70fd9ad1f919f40449" category="list-text">提高团队工作效率。Run ： AI 公平算法可确保所有用户和团队都能获得他们应得的资源份额。可以预设优先级项目的策略，该平台支持将资源从一个用户团队动态分配到另一个用户团队，从而帮助用户及时访问所需的 GPU 资源。</block>
  <block id="c835378d4be1896f62ef5d2760340909" category="list-text">提高 GPU 利用率。通过 Run ： AI 计划程序，用户可以轻松地使用部分 GPU ，整数 GPU 和多个 GPU 节点在 Kubernetes 上进行分布式培训。这样， AI 工作负载就可以根据需求运行，而不是根据容量运行。数据科学团队可以在同一基础架构上运行更多 AI 实验。</block>
  <block id="5960deb1522a82336a7a31213acea4b0" category="inline-link-macro">接下来：解决方案技术</block>
  <block id="dde440f8f7c47863e65c2d82a820b8a5" category="paragraph"><block ref="d9533ea5c6cb975dff314dace88f2aa4" category="inline-link-macro-rx"></block>。</block>
  <block id="fa752e98365b630341b8478c89a6757f" category="doc">正在配置 Kubernetes 集群</block>
  <block id="f12c340e651d989970371432778f9be2" category="paragraph">本节将分别分为两部分，分别用于云和内部部署。</block>
  <block id="ee06675a624f2ec74e8b71b5a57f8f9e" category="section-title">云部署 Kubernetes 配置</block>
  <block id="b513a0297a0d2efdebed8ce18e2f1715" category="paragraph">通过 NetApp Cloud Manager ，您可以定义与 Iguazio Kubernetes 集群的连接。要使卷可用， Trident 需要访问集群中的多个资源。</block>
  <block id="2d5bc331cc722113dd483838e908804c" category="list-text">要启用访问，请从一个 Iguazio 节点获取 Kubernetes 配置文件。该文件位于 ` /home/Iguazio/.Kube/config 下。` 将此文件下载到桌面。</block>
  <block id="17c6b0de5b91c5c06a0d8173c89110d8" category="list-text">转至 Discover Cluster 以进行配置。</block>
  <block id="df37cca51036f4c5b59db211df5354bc" category="paragraph"><block ref="df37cca51036f4c5b59db211df5354bc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b848e07dc3f62b4307419421d844f123" category="list-text">上传 Kubernetes 配置文件。请参见下图。</block>
  <block id="5bcc42d0a2624f1586064488c3484529" category="paragraph"><block ref="5bcc42d0a2624f1586064488c3484529" category="inline-image-macro-rx" type="image"></block></block>
  <block id="63de24a45facebf9f65cb6578847f2b4" category="list-text">部署 Trident 并将卷与集群相关联。有关定义永久性卷并将其分配给 Iguazio 集群的信息，请参见下图。此过程将在 Iguazio 的 Kubernetes 集群中创建永久性卷（ PV ）。在使用它之前，您必须定义永久性卷声明（ PVC ）。</block>
  <block id="eee185b539f0e52d8b64916066463222" category="paragraph"><block ref="eee185b539f0e52d8b64916066463222" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8b69025b2efa1b2ccb917bc911d30ccd" category="section-title">内部部署 Kubernetes 配置</block>
  <block id="31bbf80f0649d07d3e8340123f1a6963" category="inline-link">TR-4798</block>
  <block id="5be8900878997a404baf02b07ff271c6" category="paragraph">有关 NetApp Trident 的内部安装，请参见<block ref="7ccf7acaa308282d5274101157fd43e5" category="inline-link-rx"></block> 了解详细信息。配置 Kubernetes 集群并安装 NetApp Trident 后，您可以将 Trident 连接到 Iguazio 集群以启用 NetApp 数据管理功能，例如为数据和型号创建 Snapshot 副本。</block>
  <block id="50af1dc10d66589053fc82292fe61444" category="inline-link-macro">下一步：定义永久性卷声明</block>
  <block id="bb0c0300eb362a15d2d6480d832ecfbe" category="paragraph"><block ref="bb0c0300eb362a15d2d6480d832ecfbe" category="inline-link-macro-rx"></block></block>
  <block id="677b450634b1a6a563206526cb4d9075" category="doc">TR-4858 ：《 NetApp Orchestration 解决方案与 Run ： AI 》</block>
  <block id="0959ee1db60e15d1e8e42d1206ca6a19" category="paragraph">Rick Huang ， David Arnette ， Sung-Han Lin ， NetApp Yaron Goldberg ， Run ： AI</block>
  <block id="c87cafeb37457343ef978bbf8cad88b5" category="paragraph">NetApp AFF 存储系统可提供极致性能和行业领先的混合云数据管理功能。NetApp 与 Run ： AI 合作展示了 NetApp ONTAP AI 解决方案在人工智能（ AI ）和机器学习（ ML ）工作负载方面的独特功能，这些功能可提供企业级性能，可靠性和支持。Run ： AI 工作负载的 AI 流程编排增加了一个基于 Kubernetes 的计划和资源利用率平台，可帮助研究人员管理和优化 GPU 利用率。NetApp ， NVIDIA 和 Run ： AI 的解决方案与 NVIDIA DGX 系统相结合，可提供一个专为企业 AI 工作负载构建的基础架构堆栈。本技术报告为客户构建对话式 AI 系统以支持各种用例和行业垂直市场提供了方向性指导。其中包括有关部署 Run ： AI 和 NetApp AFF A800 存储系统的信息，并可作为参考架构来快速成功地部署 AI 计划。</block>
  <block id="cae36004793b7131e0fc2323f598e7bb" category="list-text">为容器化微服务等基于 Kubernetes 的用例设计 AI 模型和软件开发解决方案的企业架构师</block>
  <block id="5d138e1f42e31fb645a3e3f5a8d37929" category="list-text">数据科学家正在寻找高效的方法，以便在具有多个团队和项目的集群环境中实现高效的模型开发目标</block>
  <block id="0d43a0c7aeec219a746e836746c0b208" category="list-text">负责维护和运行生产模型的数据工程师</block>
  <block id="00d764d2e91381a99d6f2c7b108e7c8e" category="list-text">希望打造最佳 Kubernetes 集群资源利用体验并通过 AI 计划缩短上市时间的高管和 IT 决策者和业务主管</block>
  <block id="7a83f363d45e73d7915a600e1bbc92ba" category="inline-link-macro">接下来：解决方案概述。</block>
  <block id="29d90e44a805022079f5ad8bc748f89f" category="paragraph"><block ref="29d90e44a805022079f5ad8bc748f89f" category="inline-link-macro-rx"></block></block>
  <block id="01360221b637a04fa184dc6b9355fa46" category="summary">在创建此解决方案时，我们执行了简单的性能比较。我们使用 Kubernetes 执行了多个标准 NetApp 基准测试作业，并将基准测试结果与使用简单 Docker run 命令执行的执行情况进行了比较。</block>
  <block id="0e2f0f77407bfd956f621e13b8c1be34" category="doc">性能测试</block>
  <block id="467941822b3a557a8db7197e12285f14" category="paragraph">在创建此解决方案时，我们执行了简单的性能比较。我们使用 Kubernetes 执行了多个标准 NetApp AI 基准测试作业，并将基准测试结果与使用简单 Docker run 命令执行的执行情况进行了比较。我们没有发现任何明显的性能差异。因此，我们得出的结论是，使用 Kubernetes 编排容器化 AI 培训作业不会对性能产生负面影响。有关性能比较结果，请参见下表。</block>
  <block id="74575b23d5305310e904f87eb02ff980" category="cell">基准测试</block>
  <block id="239658e016e3d5d06ae719d280a79fec" category="cell">数据集</block>
  <block id="c269688995d2959579fca276425898b8" category="cell">Docker 运行（映像 / 秒）</block>
  <block id="b3acbf223e2bb7a3a796e3b698a7748d" category="cell">Kubernetes （图像 / 秒）</block>
  <block id="6de4dbc350a60fb9d5ea80ac7854681d" category="cell">单节点 TensorFlow</block>
  <block id="2ec7cdace40d8a092e842288dfe854f7" category="cell">合成数据</block>
  <block id="a5ee9f5535788c17b947b7f2d8354351" category="cell">6,667.2475</block>
  <block id="b573d76a35b8d44de29524f11e873c60" category="cell">6,661.93125</block>
  <block id="b318879f822314efe94c2f096d06465c" category="cell">ImageNet</block>
  <block id="f9622443c76d58838af97acd4f0c12ed" category="cell">6,570.2025</block>
  <block id="f93ed9c22230ae6e2ed85323e8d3dff7" category="cell">6,530.59125</block>
  <block id="83817408eae44458daefc1a9516ad170" category="cell">同步分布式双节点 TensorFlow</block>
  <block id="d4b63997154f30598f823403bb4df7ba" category="cell">13,213.70625</block>
  <block id="a328a929a422e4b69be5bbe94694282e" category="cell">13,218.288125</block>
  <block id="209f721713f475a9a0f4ba2743b40853" category="cell">12,941.69125</block>
  <block id="1f07dab13107a813c6d35bb76648ec48" category="cell">12,881.33875</block>
  <block id="0c4047d9921335119be58c32beba9858" category="paragraph"><block ref="0c4047d9921335119be58c32beba9858" category="inline-link-macro-rx"></block></block>
  <block id="66bc9494be0116470b223f2e07873f77" category="summary">本页介绍部署 Kubernetes 集群以实施 NetApp AI 控制平面解决方案时必须完成的任务。如果您已有 Kubernetes 集群，则只要您运行的是 Kubernetes 和 NetApp Trident 支持的 Kubernetes 版本，就可以跳过本节。</block>
  <block id="2034cc978abb3057c4cf27e92b16ee74" category="doc">Kubernetes 部署</block>
  <block id="7236436bac67d8eaadbf52811774b916" category="inline-link">Kubeflow 官方文档</block>
  <block id="7c1ab988344d6a8d8cd9a30d6240955a" category="paragraph">本节介绍部署 Kubernetes 集群以实施 NetApp AI 控制平面解决方案时必须完成的任务。如果您已有 Kubernetes 集群，则只要您运行的是 Kubernetes 和 NetApp Trident 支持的 Kubernetes 版本，就可以跳过本节。有关 Kubeflow 支持的 Kubernetes 版本列表，请参见<block ref="01b2e82a7080cdbeb934280240df876e" category="inline-link-rx"></block>。有关 Trident 支持的 Kubernetes 版本列表，请参见<block ref="e6b3671f5db59046617458d31ef4f50b" category="inline-link-rx"></block>。</block>
  <block id="ef8333b35fd982099a6ca0c7799b5618" category="paragraph">对于采用采用 NVIDIA GPU 的裸机节点的内部 Kubernetes 部署， NetApp 建议使用 NVIDIA 的 DeepOps Kubernetes 部署工具。本节概述了使用 DeepOps 部署 Kubernetes 集群的过程。</block>
  <block id="e5595c75c723712666f834213ee6568f" category="paragraph">在执行本节所述的部署练习之前，我们假定您已执行以下任务：</block>
  <block id="612cba744b0eac9a7f153d2c4b8975da" category="list-text">您已按照标准配置说明配置任何裸机 Kubernetes 节点（例如，属于 ONTAP AI POD 的 NVIDIA DGX 系统）。</block>
  <block id="5a881e8e37e19924ac592136b5e7cfd3" category="inline-link">DeepOps GitHub 站点</block>
  <block id="452f5f6e8da4512f6cce223a76ae3558" category="list-text">您已在所有 Kubernetes 主节点和工作节点以及部署跳转主机上安装受支持的操作系统。有关 DeepOps 支持的操作系统列表，请参见<block ref="253a2cf380d7db7eaadb375aa91e2221" category="inline-link-rx"></block>。</block>
  <block id="a711e4ccced882d1762a8c653be8e921" category="section-title">使用 NVIDIA DeepOps 安装和配置 Kubernetes</block>
  <block id="47302a7393e0a038a150e679c9b3e80d" category="paragraph">要使用 NVIDIA DeepOps 部署和配置 Kubernetes 集群，请从部署跳转主机执行以下任务：</block>
  <block id="5c51dc3fcfdd9653809e90fa3948c2f4" category="inline-link">Getting Started 页面</block>
  <block id="0e91d2e60705ecb1730e9b96510019af" category="list-text">按照上的说明下载 NVIDIA DeepOps<block ref="6fb71807bf6999d2aec034d498e3ebf6" category="inline-link-rx"></block> 在 NVIDIA DeepOps GitHub 站点上。</block>
  <block id="2ed5978807d3da780c60a19b3f38a293" category="inline-link">Kubernetes 部署指南页面</block>
  <block id="5c18e4efa8c5cc9efb26e3f748b4e26d" category="list-text">按照上的说明在集群中部署 Kubernetes<block ref="b336a8bbad16f0e8d58bf87e261f51fa" category="inline-link-rx"></block> 在 NVIDIA DeepOps GitHub 站点上。</block>
  <block id="3c4e62d214101c80166b654bcf13e616" category="inline-link-macro">接下来： NetApp Trident 部署和配置概述</block>
  <block id="dee369e92794b7ef4038c5cb0ecbacc2" category="paragraph"><block ref="dee369e92794b7ef4038c5cb0ecbacc2" category="inline-link-macro-rx"></block></block>
  <block id="cb2418c01859c7704da751aa5a7d2421" category="doc">解决方案概述</block>
  <block id="4ed0a51bc1c995651eec6f50591eec1a" category="section-title">NetApp ONTAP AI 和 Cloud Sync</block>
  <block id="bff183f31dd9706bece9767f4388a819" category="paragraph">由 NVIDIA DGX 系统和 NetApp 云连接存储系统提供支持的 NetApp ONTAP AI 架构由 NetApp 和 NVIDIA 开发并验证。此参考架构为 IT 组织提供了以下优势：</block>
  <block id="88acd7d612f76d7928b6b0448806e1ea" category="list-text">为各种性能和成本点提供一系列存储选项 NetApp ONTAP AI 可将 DGX 系统和 NetApp AFF A220 存储系统与一流的网络紧密集成在一起。NetApp ONTAP AI 和 DGX 系统消除了设计复杂性和猜测性工作，从而简化了 AI 部署。客户可以从小规模入手，无中断地扩展系统，同时智能地管理从边缘到核心再到云再到云的数据。</block>
  <block id="69be3bc10a1ad78dbe823def1907c730" category="paragraph">通过 NetApp Cloud Sync ，您可以通过各种协议轻松移动数据，无论是在两个 NFS 共享，两个 CIFS 共享还是一个文件共享与 Amazon S3 ， Amazon Elastic File System （ EFS ）或 Azure Blob 存储之间。主动 - 主动操作意味着您可以继续同时使用源和目标，并在需要时逐步同步数据更改。通过使您能够在任何源系统和目标系统之间移动和增量同步数据，无论是内部系统还是基于云的系统， Cloud Sync 为您打开了多种新的数据使用方式。在内部系统，云入网和云迁移或协作和数据分析之间迁移数据变得非常容易。下图显示了可用的源和目标。</block>
  <block id="1e01782ef13699818c9eb9eab796bffc" category="paragraph">在对话式 AI 系统中，开发人员可以利用 Cloud Sync 将对话历史记录从云归档到数据中心，以便对自然语言处理（ NLP ）模型进行脱机培训。通过培训模式识别更多意向，对话式 AI 系统将更好地处理最终用户提出的更复杂的问题。</block>
  <block id="45f2cdf50f8bb89b245e814009b4244c" category="section-title">NVIDIA JarVis 多模式框架</block>
  <block id="7e3a7922ac3cd73ae37b26c0b9c99ee3" category="paragraph"><block ref="7e3a7922ac3cd73ae37b26c0b9c99ee3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7ad66827309f61fd22dc58cbbb2f8273" category="inline-link">NVIDIA JarVis</block>
  <block id="241d985aedf9124840f9adfa9496755d" category="paragraph"><block ref="9f89431954623c8e5c580e4350b427e7" category="inline-link-rx"></block> 是一个端到端框架，用于构建对话式 AI 服务。它包括以下经过 GPU 优化的服务：</block>
  <block id="bb3e7af8136880e3a92118c172aed302" category="list-text">自动语音识别（ Automatic Speech Recognition ， As1 ）</block>
  <block id="3c07089a439435a2998f14ea97f90825" category="list-text">自然语言理解（ NLF ）</block>
  <block id="8375cc1d63ce172363c4ed9c3cddd508" category="list-text">与域特定的履行服务集成</block>
  <block id="84fb561f92aa70d5e118f429e98ee99b" category="list-text">文本语音转换（ TTS- 语音转换）</block>
  <block id="9478a4e1be70e1be0fdd56f3929bbdc2" category="list-text">基于计算机视觉（ CV ） Jarvis 的服务使用最先进的深度学习模型来应对实时对话 AI 这一复杂且极具挑战性的任务。要与最终用户进行实时自然的交互，模型需要在 300 毫秒内完成计算。自然交互具有挑战性，需要多模式感知集成。模型管道也很复杂，需要在上述服务之间进行协调。</block>
  <block id="c29efa8b1d5c9d6d647a8ce72bef1b74" category="paragraph">JarVis 是一个完全加速的应用程序框架，用于构建使用端到端深度学习管道的多模式对话 AI 服务。JARVIS 框架包括经过预先培训的人工智能对话模型，工具以及针对语音，视觉和 NLU 任务优化的端到端服务。除了 AI 服务之外， JarVis 还支持您同时融合视觉，音频和其他传感器输入，以便在虚拟助手，多用户化和呼叫中心助理等应用程序中提供多用户，多上下文对话等功能。</block>
  <block id="dc3652fc64a2a6ea2a3cfd5c40443b16" category="paragraph"><block ref="4282ee73b9eecd67e90ed51f4f36b077" category="inline-link-rx"></block> 是一款开源 Python 工具包，用于使用易于使用的应用程序编程接口（ API ）构建，培训和微调 GPU 加速的一流对话 AI 模型。Nemo 使用 NVIDIA GPU 中的 Tensor 核心运行混合精度计算，并可轻松扩展到多个 GPU ，以提供尽可能高的训练性能。Nemo 用于为视频呼叫记录，智能视频助理以及医疗保健，金融，零售和电信等不同行业的自动呼叫中心支持等实时应用程序构建模型。</block>
  <block id="4e5ae683e2a399c166a1724b0aa6952e" category="paragraph">我们使用 Nemo 来训练模型，以便识别归档对话历史记录中用户问题的复杂意图。此培训将零售虚拟助手的功能扩展到了 Jarvis 所提供的功能之外。</block>
  <block id="053bc62e92a61e44afd338bcb27c422f" category="section-title">零售用例摘要</block>
  <block id="e1196fc000d661461f32bcaab7319c6a" category="inline-link">针对零售用例自定义状态和流程</block>
  <block id="8b6b761738b93e745ffa4f73dd233c08" category="paragraph">我们使用 NVIDIA Jarvis 构建了一个虚拟零售助理，可接受语音或文本输入并回答有关天气，关注点和库存定价的问题。对话式 AI 系统能够记住对话流，例如，如果用户未指定天气或感兴趣点的位置，可以询问跟进问题。系统还可以识别诸如 " 泰国食品 " 或 " 笔记本电脑内存 " 等复杂实体。 它了解自然语言问题，例如 " 下星期在洛杉矶会下雨吗？ " 有关零售虚拟助手的演示，请参见<block ref="0ba395e7fb59bace5ff35ab3c02ad737" category="inline-link-rx"></block>。</block>
  <block id="af8f881c5074e5e10cd7a34ccbaa9e57" category="paragraph"><block ref="af8f881c5074e5e10cd7a34ccbaa9e57" category="inline-link-macro-rx"></block></block>
  <block id="c755c33dca37a8aaffbf190bdf3f5fef" category="paragraph">此解决方案是在一个 NetApp AFF A800 系统，两个 DGX-1 服务器和两个 Cisco Nexus 3232C 100GbE 交换机上实施的。每个 DGX-1 服务器都通过四个 100GbE 连接连接连接到 Nexus 交换机，这些连接可通过使用基于融合以太网（ RoCE ）的远程直接内存访问（ RDMA ）进行 GPU 间通信。NFS 存储访问的传统 IP 通信也发生在这些链路上。每个存储控制器均使用四个 100GbE 链路连接到网络交换机。下图显示了本技术报告中用于所有测试场景的 ONTAP AI 解决方案架构。</block>
  <block id="782c9fdc3f29358987c2f5b99fe9e6b9" category="paragraph"><block ref="782c9fdc3f29358987c2f5b99fe9e6b9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bf8b135ff3c775c5b9bbba1b2f7a61ce" category="section-title">此解决方案中使用的硬件</block>
  <block id="a4ec49885c617f2b2500789af7e6eebf" category="paragraph">此解决方案已使用 ONTAP AI 参考架构两个 DGX-1 节点和一个 AFF A800 存储系统进行了验证。请参见<block ref="c37aff28e1a25306bf31a11e21ff2c71" category="inline-link-rx"></block> 有关此验证中使用的基础架构的更多详细信息。</block>
  <block id="fe59cdcdefd7c53625e1e745b9c5be09" category="cell">DGX-1 系统</block>
  <block id="53270fbfda62583949b287e08ae3d063" category="cell">AFF A800</block>
  <block id="6da64488bfb7f3216610e30ced34ff23" category="cell">Nexus 3232C 交换机</block>
  <block id="8e926487edd9348114ada5fa88a732df" category="paragraph">此解决方案已通过安装了 Run ： AI 操作员的基本 Kubernetes 部署进行验证。Kubernetes 是使用部署的<block ref="1c894f7463797b81796e78efc8345fb0" category="inline-link-rx"></block> 部署引擎，用于为生产就绪环境部署所有必需的组件。DeepOps 会自动部署<block ref="ca1c90879f9a0e8dc4ff805fb398f7ff" category="inline-link-rx"></block> 为了与 K8s 环境实现持久存储集成，我们创建了默认存储类，以便容器可以利用 AFF A800 存储系统中的存储。有关在 ONTAP AI 上使用 Kubernetes 进行 Trident 的详细信息，请参见<block ref="7ccf7acaa308282d5274101157fd43e5" category="inline-link-rx"></block>。</block>
  <block id="a2525584dd9d2a9522ddea95841c06b3" category="cell">9.6 第 4 页</block>
  <block id="80afba45eb055fc9bdc48c90d1debd06" category="cell">Kubernetes 版本</block>
  <block id="4bbe90408850f459864a71c8054732f1" category="cell">1.17</block>
  <block id="f1112223b41fddc71fd6a626582dfb78" category="cell">Trident 版本</block>
  <block id="43d66966083b0e0feac8fb9be14ba5b8" category="cell">20.04.0</block>
  <block id="e993176eed424766bc6bd4758eaf2cb6" category="cell">运行： AI 命令行界面</block>
  <block id="5e6305186adf6e7dcf03f5cbfc802c49" category="cell">v2.1.13</block>
  <block id="f3eeed8e4b2791f80e2f123c4720aef5" category="cell">运行： AI Orchestration Kubernetes Operator 版本</block>
  <block id="bf8c2933a2f54ce25fe986f66d3bffa3" category="cell">1.0.39</block>
  <block id="076ca75e2fc5b6ea85d72b0a9adc8844" category="inline-link">运行： AI GPU 集群前提条件</block>
  <block id="eaec7f01752b17abf6125d8f29a8543c" category="paragraph">有关 Run ： AI 的其他软件要求，请参见<block ref="98bb21d82bcd499a183c82dcfc9b02f3" category="inline-link-rx"></block>。</block>
  <block id="cc352f05f03c970b081b8afa29693b60" category="inline-link-macro">接下来：使用 Run AI 优化集群和 GPU 利用率</block>
  <block id="b1b09355c9538fe149372d3728c98bb1" category="paragraph"><block ref="b1b09355c9538fe149372d3728c98bb1" category="inline-link-macro-rx"></block></block>
  <block id="7fd01fa95033c040ddfe882c5258bda9" category="paragraph">= ： hardbress ：：： nod页 脚：：： icons ：字体： linkattrs ：：： imagesdir ： ./../media/</block>
  <block id="dbb4dd9a11f48db13d63eedaae717fe5" category="doc">为数据科学团队创建项目并分配 GPU</block>
  <block id="22d09d229a06f294b0f45804f8e639d3" category="paragraph">研究人员可以通过 Run ： AI CLI ， Kubeflow 或类似流程提交工作负载。为了简化资源分配并创建优先级， Run ： AI 引入了项目概念。项目是指将项目名称与 GPU 分配和首选项关联的配额实体。这是一种管理多个数据科学团队的简单便捷的方式。</block>
  <block id="c0bd05e9d88cf015eac684873bfd14c7" category="paragraph">提交工作负载的研究人员必须将项目与工作负载请求相关联。运行： AI 计划程序会将请求与当前分配和项目进行比较，并确定是否可以为工作负载分配资源或是否应保持待定状态。</block>
  <block id="800f40fa67f69116bf6f38cd07456608" category="paragraph">作为系统管理员，您可以在 Run ： AI projects 选项卡中设置以下参数：</block>
  <block id="9c429f2284a95aaa299c7d85ccb16734" category="list-text">* 模拟项目。 * 为每个用户设置一个项目，为每个用户团队设置一个项目，并为每个实际组织项目设置一个项目。</block>
  <block id="b2f1422cf0d082a495bbf865b9a5621d" category="list-text">* 项目配额。 * 每个项目都与一个 GPU 配额相关联，可以同时为此项目分配 GPU 配额。这是一个有保障的配额，因为使用此项目的研究人员无论在集群中处于何种状态，都可以获得这一数量的 GPU 。通常，项目分配总和应等于集群中的 GPU 数量。除此之外，此项目的用户还可以收到超配额。只要未使用 GPU ，使用此项目的研究人员就可以获得更多 GPU 。我们在中演示了超额配额测试场景和公平考虑事项<block ref="9563fd9ab6978412dc97d80a70e51786" category="inline-link-rx"></block>，<block ref="a8ad108feafc827856baa28b0b9070ed" category="inline-link-rx"></block>，和<block ref="be867f64efefe193012b1dfc6c82f783" category="inline-link-rx"></block>。</block>
  <block id="20a3a45fbbd9502add12fd216350d569" category="list-text">创建新项目，更新现有项目并删除现有项目。</block>
  <block id="3bf13b237342258b6ddb3f167d679a3b" category="inline-link">运行： AI 文档</block>
  <block id="77332641abf52ec5dc1af8b23b2339f3" category="list-text">* 限制作业在特定节点组上运行 * 。您可以分配仅在特定节点上运行的特定项目。如果项目团队需要专用硬件，例如具有足够内存的硬件，则此功能非常有用。或者，项目团队也可能是特定硬件的所有者，这些硬件是通过专门预算获得的，或者您可能需要直接构建或交互式工作负载来处理较弱的硬件，并将较长的培训或无人看管的工作负载定向到较快的节点。有关对节点进行分组并为特定项目设置相关性的命令，请参见 <block ref="eae60ce89b8727160634b52e7654bf73" category="inline-link-rx"></block>。</block>
  <block id="2bd802cca9bf193b441123437f5d39ca" category="list-text">* 限制交互作业的持续时间 * 。研究人员经常忘记关闭交互式作业。这可能会导致资源浪费。一些组织倾向于限制交互式作业的持续时间并自动关闭这些作业。</block>
  <block id="10c2495ded559d79de96be22751712dc" category="paragraph">下图显示了已创建四个团队的 " 项目 " 视图。每个团队分配不同数量的 GPU 来处理不同的工作负载， GPU 总数等于由两个 DGX-1 组成的集群中可用 GPU 总数。</block>
  <block id="9ba047faa1d241a6153be986be27097f" category="paragraph"><block ref="9ba047faa1d241a6153be986be27097f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c4804b15e4766599ceade052b5ca8af9" category="inline-link-macro">下一步：在 Run AI CLI 中提交作业</block>
  <block id="9c6088fad9917e07026030c1d3eaad09" category="paragraph"><block ref="9c6088fad9917e07026030c1d3eaad09" category="inline-link-macro-rx"></block></block>
  <block id="9e40fd8f5f0e113c758dfa63adc1221d" category="summary">Kubeflow 能够快速配置新的 Jupyter 笔记本电脑服务器，以充当数据科学家工作空间。要使用 Kubeflow 配置新的 Jupyter 笔记本电脑服务器，请执行此页面上列出的任务。</block>
  <block id="7fad49a67f130cbd7629be2d6c719aea" category="doc">为数据科学家或开发人员配置 Jupyter 笔记本电脑工作空间</block>
  <block id="52d84951381eb0ab7a285dd32b31702c" category="paragraph">Kubeflow 能够快速配置新的 Jupyter 笔记本电脑服务器，以充当数据科学家工作空间。要使用 Kubeflow 配置新的 Jupyter 笔记本电脑服务器，请执行以下任务。有关 Kubeflow 上下文中 Jupyter 笔记本电脑的详细信息，请参见<block ref="05932219411c169f9e48f874e56f1ed3" category="inline-link-rx"></block>。</block>
  <block id="5e82e4aa94a53b3b50acf347914be197" category="list-text">从 Kubeflow 中央信息板中，单击主菜单中的 Notebook Servers 以导航到 Jupyter 笔记本电脑服务器管理页面。</block>
  <block id="358d18b5a42ec1d80b04e767298ea372" category="paragraph"><block ref="358d18b5a42ec1d80b04e767298ea372" category="inline-image-macro-rx" type="image"></block></block>
  <block id="208feb7a4d57f0afc49e53fe1fe8b978" category="list-text">单击新服务器以配置新的 Jupyter 笔记本电脑服务器。</block>
  <block id="3541a3b25823fa3b302c686b6fe2a212" category="paragraph"><block ref="3541a3b25823fa3b302c686b6fe2a212" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5f95069a2e81949b101427e1fa4afddf" category="list-text">为新服务器指定一个名称，选择希望服务器基于的 Docker 映像，并指定服务器要预留的 CPU 和 RAM 量。如果命名空间字段为空，请使用页面标题中的选择命名空间菜单选择命名空间。然后， Namespace 字段将自动填充所选命名空间。</block>
  <block id="4fbbbc4aaa49d653f486738eed12357a" category="paragraph">在以下示例中，选择了 `kubeflow-anonymous` 命名空间。此外，还接受 Docker 映像， CPU 和 RAM 的默认值。</block>
  <block id="69bc8b3ae7667985c27ce3ef5de0e6ca" category="paragraph"><block ref="69bc8b3ae7667985c27ce3ef5de0e6ca" category="inline-image-macro-rx" type="image"></block></block>
  <block id="124793fd2a85b1699a94b12bf4661758" category="inline-link-macro">Kubeflow 部署</block>
  <block id="095efbb867f01094d56c633d3337a412" category="list-text">指定工作空间卷详细信息。如果选择创建新卷，则会使用默认 StorageClass 配置该卷或 PVC 。因为在部分中，使用 Trident 的 StorageClass 被指定为默认 StorageClass <block ref="b868c02e3d390c0001190527c8f4ba0b" category="inline-link-macro-rx"></block>，卷或 PVC 配置有 Trident 。此卷会自动挂载为 Jupyter 笔记本电脑服务器容器中的默认工作空间。用户在服务器上创建但未保存到单独数据卷的任何笔记本电脑将自动保存到此工作空间卷。因此，这些笔记本电脑在重新启动后会持久存在。</block>
  <block id="c44927b0124469511a724e179c80bfb5" category="paragraph"><block ref="c44927b0124469511a724e179c80bfb5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="555e44b3745904843417371073338d08" category="list-text">添加数据卷。以下示例指定了一个名为 "pt-fg-all" 的现有 PVC 并接受默认挂载点。</block>
  <block id="0c73069b282d8e99ecbd8feb39164d40" category="paragraph"><block ref="0c73069b282d8e99ecbd8feb39164d40" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b120f9006af3d27ef70eb256c99c6617" category="list-text">* 可选： * 请求将所需数量的 GPU 分配给您的笔记本服务器。在以下示例中，请求一个 GPU 。</block>
  <block id="c969e6364e4561a959d1ce20f7187723" category="paragraph"><block ref="c969e6364e4561a959d1ce20f7187723" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b8da2142543d647576288d71dddabb01" category="list-text">单击启动以配置新的笔记本电脑服务器。</block>
  <block id="37a742c47c216725dd178d8c3c7a3f31" category="list-text">等待笔记本电脑服务器完全配置完毕。如果您从未使用您指定的 Docker 映像配置服务器，则可能需要几分钟的时间，因为需要下载此映像。服务器配置完成后， Jupyter 笔记本电脑服务器管理页面上的状态列会显示一个绿色复选标记。</block>
  <block id="417a2eafac6842560d3900cf9d12b5bb" category="paragraph"><block ref="417a2eafac6842560d3900cf9d12b5bb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0463a63e8059055e703ecd9ffa72e106" category="list-text">单击连接以连接到新的服务器 Web 界面。</block>
  <block id="4fbf21602f4888216386998d62f1defd" category="list-text">确认步骤 6 中指定的数据集卷已挂载到服务器上。请注意，默认情况下，此卷会挂载在默认工作空间中。从用户的角度来看，这只是工作空间中的另一个文件夹。用户可能是数据科学家，而不是基础架构专家，因此使用此卷无需具备任何存储专业知识。</block>
  <block id="c4b6acc44505864a5dccae2571b74f6a" category="paragraph"><block ref="c4b6acc44505864a5dccae2571b74f6a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a7d375154397ce9358d2234ec578ff7e" category="paragraph"><block ref="a7d375154397ce9358d2234ec578ff7e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="479d03862d87da58784e60e5cfcec977" category="list-text">打开一个终端，假设步骤 5 中请求了一个新卷，请执行 `df -h` 以确认已挂载新的 Trident 配置的永久性卷作为默认工作空间。</block>
  <block id="68f39a4f77e618e6617c3830fb47de7c" category="paragraph">默认工作空间目录是首次访问服务器的 Web 界面时显示的基目录。因此，使用 Web 界面创建的任何项目都会存储在此 Trident 配置的永久性卷上。</block>
  <block id="d3e91c75db0cb717734224e6eb72e201" category="paragraph"><block ref="d3e91c75db0cb717734224e6eb72e201" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1d739fe0e421e9cb4d6315f0021cc5eb" category="paragraph"><block ref="1d739fe0e421e9cb4d6315f0021cc5eb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b8c20de15cf5efa2297f9d40d899450e" category="list-text">使用终端运行 `nvidia-smi` 以确认为笔记本电脑服务器分配了正确数量的 GPU 。在以下示例中，已按照步骤 7 中的请求为笔记本电脑服务器分配一个 GPU 。</block>
  <block id="ed4e7225349e5c6cd33dfd15ad878438" category="paragraph"><block ref="ed4e7225349e5c6cd33dfd15ad878438" category="inline-image-macro-rx" type="image"></block></block>
  <block id="39765f9f4940bfb89204b387b28027db" category="inline-link-macro">接下来：笔记本电脑和管道示例</block>
  <block id="13c712398e8b2c10a7741ca02e9889f0" category="paragraph"><block ref="13c712398e8b2c10a7741ca02e9889f0" category="inline-link-macro-rx"></block></block>
  <block id="0a37acabf89826767b5a5fcb8dacffa3" category="summary">此页面介绍了在 Kubernetes 集群中部署 Kubeflow 必须完成的任务。</block>
  <block id="e560b8ed748180150ee1a196f2247fce" category="paragraph">本节介绍在 Kubernetes 集群中部署 Kubeflow 必须完成的任务。</block>
  <block id="f48269a81318d4bd2dd9e57a8239fe56" category="list-text">您已有一个有效的 Kubernetes 集群，并且正在运行 Kubernetes 支持的版本。有关支持的版本列表，请参见<block ref="01b2e82a7080cdbeb934280240df876e" category="inline-link-rx"></block>。</block>
  <block id="3429b7e0331de8d2f8d377b034ca6855" category="inline-link-macro">Trident 部署和配置</block>
  <block id="9fc644d78f21555decceeddf5b691fa4" category="list-text">您已在 Kubernetes 集群中安装和配置 NetApp Trident ，如中所述 <block ref="ec7700e2b8d95edf2f2700b590eab273" category="inline-link-macro-rx"></block>。</block>
  <block id="72727333279dd1f9e8b63f969075bca8" category="section-title">设置默认 Kubernetes StorageClass</block>
  <block id="e1be30d98edccc10974d5d339832197c" category="paragraph">在部署 Kubeflow 之前，您必须在 Kubernetes 集群中指定一个默认 StorageClass 。Kubeflow 部署过程会尝试使用默认 StorageClass 配置新的永久性卷。如果未将任何 StorageClass 指定为默认 StorageClass ，则部署将失败。要在集群中指定默认 StorageClass ，请从部署跳转主机执行以下任务。如果已在集群中指定默认 StorageClass ，则可以跳过此步骤。</block>
  <block id="e3e4fbe325df2b20670ca04ad0c2a517" category="list-text">将现有 StorageClasses 之一指定为默认 StorageClass 。以下示例命令显示了名为 `ontap-ai- FlexVols-Retain` 的 StorageClass 的默认 StorageClass 。</block>
  <block id="f830a6eea70ae3a0e7af4606462ad281" category="admonition">`ontap-nas-flexgroup` Trident 后端类型的最小 PVC 大小相当大。默认情况下， KubeFlow 会尝试配置大小只有少数几 GB 的 PVC 。因此，在部署 Kubeflow 时，不应将利用 `ontap-nas-flexgroup` 后端类型的 StorageClass 指定为默认 StorageClass 。</block>
  <block id="f12aad36b1ab9194dd8bc67542366bff" category="section-title">使用 NVIDIA DeepOps 部署 Kubeflow</block>
  <block id="3e1922d78dd7bdb1e8d7e7bd8f5aa92c" category="paragraph">NetApp 建议使用 NVIDIA DeepOps 提供的 Kubeflow 部署工具。要使用 DeepOps 部署工具在 Kubernetes 集群中部署 Kubeflow ，请从部署跳转主机执行以下任务。</block>
  <block id="3ede8bc1f55c95b9a16b2429e0b9bbcc" category="admonition">或者，您也可以按照手动方式部署 Kubeflow<block ref="c75d7e23bc80ca81cea11fe427173cb3" category="inline-link-rx"></block> 在 Kubeflow 官方文档中</block>
  <block id="a73d6d865f72179145299c720c53d39c" category="inline-link">Kubeflow 部署说明</block>
  <block id="04e3c704baa1b4c23cd48a18c10fcf39" category="list-text">按照中的说明在集群中部署 Kubeflow<block ref="5e7f04c1dfa70dd058d2720be031c44b" category="inline-link-rx"></block> 在 NVIDIA DeepOps GitHub 站点上。</block>
  <block id="2efdbab31c5d41a149e5092f4b8d7e48" category="list-text">记下 DeepOps Kubeflow 部署工具输出的 Kubeflow 信息板 URL 。</block>
  <block id="b714a06d49f16f8b7f988d95734d177f" category="list-text">确认在 Kubeflow 命名空间中部署的所有 Pod 均显示 `Ststatus` of `running` ，并确认命名空间中部署的任何组件均未处于错误状态。可能需要几分钟时间，才能启动所有 Pod 。</block>
  <block id="d6049afd6b1943d1e98ca6347dd907c5" category="list-text">在 Web 浏览器中，通过导航到步骤 2 中记下的 URL 来访问 Kubeflow 中央信息板。</block>
  <block id="64f559cf2e77f73aca6bd3dc9649f62c" category="paragraph">默认用户名为 `admin@kubeflow.org` ，默认密码为 `1231234` 。要创建其他用户，请按照中的说明进行操作<block ref="f529217f090b2c9cc3764f14abdec5f7" category="inline-link-rx"></block>。</block>
  <block id="2d84920115f9dc91fe2d35c4dc07eaf0" category="paragraph"><block ref="2d84920115f9dc91fe2d35c4dc07eaf0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e7d76b05b4c77c781c38fcce5dfe4df1" category="inline-link-macro">接下来： Kubeflow 操作和任务示例</block>
  <block id="699e1c13c585d91ea0f5eacbaf32010b" category="paragraph"><block ref="699e1c13c585d91ea0f5eacbaf32010b" category="inline-link-macro-rx"></block></block>
  <block id="48c4dc7fbfa1197490124f13eb565bd2" category="doc">ONTAP AI 部署</block>
  <block id="70d5c23ad68d59b2546133efdd1c3267" category="inline-link">NVA-1121-Deploy ：由 NVIDIA 提供支持的 NetApp ONTAP AI</block>
  <block id="b393f072bc6b17085b75486a2abbcf97" category="paragraph">部署 ONTAP AI 需要安装和配置网络，计算和存储硬件。本文档不会介绍有关部署 ONTAP AI 基础架构的具体说明。有关详细的部署信息，请参见<block ref="8c03c9c25bc6aba17e86c510148a3423" category="inline-link-rx"></block>。</block>
  <block id="03e335ae74b1356b294af55e07eb6b70" category="paragraph">在此解决方案验证中，创建了一个卷并将其挂载到 DGX-1 系统。然后，该挂载点会挂载到容器中，以使数据可供训练访问。对于大规模部署， NetApp Trident 可自动创建和挂载卷，以消除管理开销并支持最终用户管理资源。</block>
  <block id="328d9c8854162b6d9dae70c57baa7505" category="inline-link-macro">接下来： Kubernetes 部署</block>
  <block id="5102c02ef61bdeaa79904c17f58ca7e3" category="paragraph"><block ref="5102c02ef61bdeaa79904c17f58ca7e3" category="inline-link-macro-rx"></block></block>
  <block id="7a879e305f90568b91e8623ce5f9ee39" category="summary">自 2019 年 5 月起， Microsoft 推出了 Azure 原生，这是基于 NetApp ONTAP 技术的第一方门户服务，适用于企业级 NFS 和 SMB 文件服务。</block>
  <block id="0bf51d984b6a6d3fddc0e24f62eb1a14" category="doc">TR-4896 ： Azure 中的分布式培训：通道检测—解决方案设计</block>
  <block id="0ab5aa2896d8eed7732e69be5e5782b4" category="paragraph">NetApp Ronen Dar 的 Mameer Ahmad 和 Verron Martina ， Run ： AI</block>
  <block id="a89ade32996e322edf837476febbc9bd" category="paragraph">自 2019 年 5 月起， Microsoft 推出了 Azure 原生，这是基于 NetApp ONTAP 技术的第一方门户服务，适用于企业级 NFS 和 SMB 文件服务。这一发展由 Microsoft 和 NetApp 之间的战略合作伙伴关系推动，进一步将世界级 ONTAP 数据服务的覆盖范围扩展到 Azure 。</block>
  <block id="d6312cb01ee08559dbaa35c308e72268" category="paragraph">作为领先的云数据服务提供商， NetApp 与 Run ： AI 合作，这是一家对 AI 基础架构进行虚拟化的公司，可以利用全 GPU 利用率加快 AI 实验速度。通过这种合作关系，团队可以并行运行多项实验，快速访问数据并利用无限计算资源，从而加快 AI 的运行速度。运行： AI 通过自动分配资源来充分利用 GPU ，而经验证的 Azure NetApp Files 架构可以消除数据管道障碍，让每个实验都能以最高速度运行。</block>
  <block id="5234f8ee670afed8c398940a707f25df" category="paragraph">NetApp 和 Run ： AI 联手为客户在 Azure 中的人工智能之旅提供一个适应未来需求的平台。从分析和高性能计算（ HPC ）到自主决策（客户只需在需要时为所需的资源付费，即可优化 IT 投资）， NetApp 与 Run 之间的联合： AI 在 Azure Cloud 中提供统一的体验。</block>
  <block id="74c071ff3c1d6d6fc39b72d617aefdf8" category="doc">解决方案部署和验证详细信息</block>
  <block id="b122830b8b8edd9e76690ea23b0c4cbd" category="paragraph">以下各节将讨论解决方案部署和验证的详细信息。</block>
  <block id="ebe48d794d8ada5d4e067cd5993bdd3e" category="inline-link-macro">接下来： ONTAP AI 部署</block>
  <block id="3b103491115e62f2388d69086a2eff9d" category="paragraph"><block ref="3b103491115e62f2388d69086a2eff9d" category="inline-link-macro-rx"></block></block>
  <block id="f7235eb2146d800446cbbbac3a57548c" category="paragraph"><block ref="b1b09355c9538fe149372d3728c98bb1" category="inline-link-macro-rx"></block>。</block>
  <block id="6049acdcbc339e7528afede90eef822b" category="doc">为 Triton 推理服务器部署客户端（自动化部署）</block>
  <block id="f3cf3497441242bf8585a3d5c22d8f81" category="paragraph">要为 Triton 推理服务器部署客户端，请完成以下步骤：</block>
  <block id="6e51cd4c70353cd71e312e622f9b7e21" category="list-text">打开 VI 编辑器，为 Triton 客户端创建部署，然后调用文件 `Triton_client.YAML` 。</block>
  <block id="21c9ac1c12daa82c9f7bf30b3c0f7e12" category="list-text">部署客户端。</block>
  <block id="ce10271b853d317589023ece3d03f625" category="inline-link-macro">下一步：从 Triton 推理服务器收集推理指标</block>
  <block id="dfb6ed0df181f085358b49c5a1cecd75" category="paragraph"><block ref="dfb6ed0df181f085358b49c5a1cecd75" category="inline-link-macro-rx"></block></block>
  <block id="d052a88935efadcc9eebf94684d52e19" category="doc">实现高集群利用率</block>
  <block id="27d597678185c0988ffb2dbb0c1b941d" category="inline-link-macro">使用 ImageNet 数据集的 RESNET-50 基准测试摘要</block>
  <block id="8d46742dbd21a217f738a9ca6a31f634" category="paragraph">在本节中，我们模拟了一个实际场景，其中四个数据科学团队各自提交自己的工作负载，以展示 Run ： AI Orchestration 解决方案，它可以在保持 GPU 资源优先级和平衡的同时实现高集群利用率。我们首先使用一节中所述的 RESNET-50 基准测试 <block ref="5872a8c23866a6bf186843724ee58ad7" category="inline-link-macro-rx"></block>：</block>
  <block id="14f48338822299bdf82bb4528d3c9e07" category="paragraph">我们运行的 RESNET-50 基准测试与中相同<block ref="c37aff28e1a25306bf31a11e21ff2c71" category="inline-link-rx"></block>。对于不驻留在公有 Docker 存储库中的容器，我们使用了标志 ` -local-image` 。我们将主机 DGX-1 节点上的目录 ` /mnt` 和 ` /tm` 分别挂载到 ` /mnt` 和 ` /tm` 。该数据集位于 NetApp AFFA800 上，并且 `dataset_dir` 参数指向目录。` -num_devices=1` 和 ` -g 1` 表示我们为此作业分配一个 GPU 。前者是 `run.py` 脚本的参数，而后者是 `runai Submit` 命令的标志。</block>
  <block id="bccb844975c2eec86eb25c0d8e2a989b" category="paragraph">下图显示了一个系统概述信息板，其中 GPU 利用率为 97% ，所有十六个可用 GPU 均已分配。您可以在 GPU/ 项目条形图中轻松查看为每个团队分配的 GPU 数量。" 正在运行的作业 " 窗格显示当前正在运行的作业名称，项目，用户，类型，节点， GPU 已用，运行时间，进度和利用率详细信息。队列中的工作负载列表及其等待时间显示在 "Pending" 作业中。最后，节点框将提供集群中各个 DGX-1 节点的 GPU 编号和利用率。</block>
  <block id="1acc627e7c9d8002628b2e12c91ac683" category="paragraph"><block ref="1acc627e7c9d8002628b2e12c91ac683" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9d5d3b5670d9303fddfb021e681546c0" category="inline-link-macro">接下来：为要求较低的工作负载或交互式工作负载分配的 GPU 百分比</block>
  <block id="3d9997e0f8b3b6a279c8779455e7c760" category="paragraph"><block ref="3d9997e0f8b3b6a279c8779455e7c760" category="inline-link-macro-rx"></block></block>
  <block id="3ff1a758f526c5ceb434059efe27020a" category="summary">Apache 气流工作流示例</block>
  <block id="6e4cd672cd8bd06c42a9e4ba697c61de" category="inline-link">适用于 Kubernetes 的 NetApp 数据科学工具包</block>
  <block id="c5da96d7204df28dd9fdc33139c8a776" category="paragraph">。<block ref="42224cf159df1ff428bf611c27a06039" category="inline-link-rx"></block> 可与气流结合使用。通过将 NetApp 数据科学工具包与 Airflow 结合使用，您可以将 NetApp 数据管理操作整合到由 Airflow 协调的自动化工作流中。</block>
  <block id="dee957e8ec77b256b931e812220f0553" category="inline-link">气流示例</block>
  <block id="9fc322b3a5bb56d2d6ac18c15773d1c2" category="paragraph">请参见<block ref="c50bba54faf39c027cd571674d44a9c0" category="inline-link-rx"></block> 有关在 Airflow 中使用工具包的详细信息，请参见 NetApp Data Science Toolkit GitHub 存储库中的一节。</block>
  <block id="c2fa42c66e1525408bfdd7803587c4d7" category="inline-link-macro">接下来： Trident 操作示例</block>
  <block id="a59800a48172a51a7d63357208d8c14b" category="paragraph"><block ref="a59800a48172a51a7d63357208d8c14b" category="inline-link-macro-rx"></block></block>
  <block id="fbe29309a183681bc26203d4c65853a2" category="paragraph">本节将介绍传统数据科学管道及其缺点。此外，还介绍了建议的数据集缓存解决方案的架构。</block>
  <block id="1f14aecc1193f646e0005e27fbc6e63d" category="section-title">传统数据科学管道和缺点</block>
  <block id="17fb7d0ba5495199d3e18fe23dff7b59" category="paragraph">ML 模型开发和部署的典型顺序涉及以下迭代步骤：</block>
  <block id="63e1ded7e3ae73253b5c287bc9bdef02" category="list-text">正在载入数据</block>
  <block id="52e028dc7ac82e9d4b7b1ae588fecc9a" category="list-text">数据预处理（创建多个版本的数据集）</block>
  <block id="33cd0fcdd9ee7e650043133b12516155" category="list-text">运行多个涉及超参数优化，不同型号等的实验</block>
  <block id="b85c416c94e0c5314a1e6fcc21d4139e" category="list-text">Monitoringcnvrg.io 开发了一个全面的平台，可以自动执行从研究到部署的所有任务。下图显示了与管道相关的一小部分信息板屏幕截图。</block>
  <block id="5a5ade85e7f7478bcba59e8c3891c914" category="paragraph"><block ref="5a5ade85e7f7478bcba59e8c3891c914" category="inline-image-macro-rx" type="image"></block></block>
  <block id="26d6a4638ffd0b7779f1353f5fe54f0d" category="paragraph">从公有存储库和私有数据中使用多个数据集非常常见。此外，每个数据集可能具有多个版本，这些版本是由数据集清理或功能工程产生的。需要一个信息板来提供数据集中心和版本中心，以确保团队可以使用协作和一致性工具，如下图所示。</block>
  <block id="e884d73b6a4214bea010ec3bbfdad8b6" category="paragraph"><block ref="e884d73b6a4214bea010ec3bbfdad8b6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="93661dde7027bf31b3d007740a3d4648" category="paragraph">管道的下一步是培训，这需要多个并行的培训模型实例，每个实例都与一个数据集和一个特定计算实例相关联。将数据集绑定到使用特定计算实例的特定实验是一项挑战，因为某些实验可能由 Amazon Web Services （ AWS ）中的 GPU 实例执行，而其他实验则由内部 DGX-1 或 DGX-2 实例执行。可能会在 GCP 的 CPU 服务器中执行其他实验，但数据集位置与执行培训的计算资源不是很近。如果距离合理，则从数据集存储到计算实例的连接将达到全 10GbE 或更高的低延迟。</block>
  <block id="ba4f5ee1b0d01d3416723cfc3ec296ec" category="paragraph">数据科学家通常会将数据集下载到执行培训和实验的计算实例中。但是，此方法可能会出现以下几个问题：</block>
  <block id="90b6a1c5b483f6c6b399bc17c5e1af9a" category="list-text">当数据科学家将数据集下载到计算实例时，无法保证集成计算存储具有高性能（高性能系统的一个示例是 ONTAP AFF A800 NVMe 解决方案）。</block>
  <block id="5713a88504bb65e3808faac627a6a0fc" category="list-text">如果下载的数据集驻留在一个计算节点中，则在多个节点上执行分布式模型时，存储可能会成为瓶颈（与 NetApp ONTAP 高性能分布式存储不同）。</block>
  <block id="299b9ae5439d32ed932f51f3b3aa92d6" category="list-text">由于队列冲突或优先级问题，下次迭代训练实验可能会在不同的计算实例中执行，这再次导致从数据集到计算位置的网络距离过长。</block>
  <block id="30e37003024e85518a26760a7ab58f4e" category="list-text">在同一计算集群上执行训练实验的其他团队成员不能共享此数据集；每个团队成员都从任意位置执行数据集（昂贵的）下载。</block>
  <block id="9e5d53150336efb0446a063309805f01" category="list-text">如果后续培训作业需要使用同一数据集的其他数据集或版本，则数据科学家必须再次将数据集（昂贵）下载到执行 training.NetApp 的计算实例中，而 cnvrg.io 已创建一个新的数据集缓存解决方案来消除这些障碍。解决方案通过在 ONTAP 高性能存储系统上缓存热数据集，加快了 ML 管道的执行速度。使用 ONTAP NFS 时，数据集会在由 NetApp 提供支持的数据网络结构（例如 AFF A800 ）中缓存一次（并且只缓存一次），该数据网络结构与计算搭配使用。由于 NetApp ONTAP NFS 高速存储可以为多个 ML 计算节点提供服务，因此培训模型的性能得到了优化，从而为企业节省了成本，提高了工作效率并提高了运营效率。</block>
  <block id="9f6302143996033ebb94d536b860acc3" category="section-title">解决方案架构</block>
  <block id="a63af1f206939a3c956a2e8b6ab53103" category="paragraph">NetApp 和 cnvrg.io 提供的此解决方案可提供数据集缓存，如下图所示。通过数据集缓存，数据科学家可以选择所需的数据集或数据集版本，并将其移动到靠近 ML 计算集群的 ONTAP NFS 缓存中。现在，数据科学家可以运行多个实验，而不会造成延迟或下载。此外，所有协作工程师都可以将同一数据集与连接的计算集群结合使用（并可自由选择任何节点），而无需从数据湖中进行额外下载。数据科学家可以获得一个信息板，用于跟踪和监控所有数据集和版本，并查看缓存的数据集。</block>
  <block id="612eaee91b23ecc385c1b402d44c081f" category="paragraph">cnvrg.io 平台会自动检测某个时间内未使用的过期数据集，并从缓存中将其转出，从而为更常用的数据集保留可用的 NFS 缓存空间。需要注意的是，使用 ONTAP 的数据集缓存可在云端和内部环境中运行，从而提供最大的灵活性。</block>
  <block id="0cb5e14601fcf39745352a9556939aa3" category="paragraph"><block ref="0cb5e14601fcf39745352a9556939aa3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="810aceabf729ffa8c2dfd61a3aaeafaa" category="inline-link-macro">接下来：概念和组件</block>
  <block id="0a01ff9defa9120e928e7e306e3e3234" category="paragraph"><block ref="0a01ff9defa9120e928e7e306e3e3234" category="inline-link-macro-rx"></block></block>
  <block id="fb1290be14b9bc3c64a2c3c9ace6c065" category="doc">用例概述和问题陈述</block>
  <block id="aa04a8198c7c60df7adcd6cd49bec6f8" category="paragraph">数据集和数据集版本通常位于数据湖中，例如 NetApp StorageGRID 基于对象的存储，这样可以降低成本并获得其他运营优势。数据科学家利用这些数据集，通过多个步骤对其进行设计，使其为使用特定模型进行培训做好准备，通常会在整个过程中创建多个版本。下一步，数据科学家必须选择经过优化的计算资源（ GPU ，高端 CPU 实例，内部集群等）来运行此模型。下图显示了 ML 计算环境中数据集不接近的情况。</block>
  <block id="cc054601488581e80cc1d19c227126f6" category="paragraph"><block ref="cc054601488581e80cc1d19c227126f6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="88515fca547c502286d6f2a9081fc734" category="paragraph">但是，多个训练实验必须在不同的计算环境中并行运行，每个实验都需要从数据湖中下载数据集，这是一个昂贵且耗时的过程。无法保证数据集与计算环境（尤其是混合云）的距离。此外，使用同一数据集运行自己实验的其他团队成员也必须经历同样艰巨的过程。除了明显缓慢的数据访问之外，还存在一些挑战，包括跟踪数据集版本，数据集共享，协作和可重现性方面的困难。</block>
  <block id="30b64502c0cb2f8a9bf951993e0abbac" category="section-title">客户要求</block>
  <block id="5243f720d7e440d7746f03df97ef885f" category="paragraph">为了在高效利用资源的同时实现高性能 ML 运行，客户要求可能有所不同；例如，客户可能需要满足以下要求：</block>
  <block id="1735cf11ce0034dbb80c297fb204bc21" category="list-text">从执行训练模型的每个计算实例快速访问数据集，而不会导致昂贵的下载和复杂的数据访问</block>
  <block id="80085a846f90523080cf086e66561d52" category="list-text">在云或内部环境中使用任何计算实例（ GPU 或 CPU ），而无需考虑数据集的位置</block>
  <block id="de79912b1ab8764406a232888aab85e5" category="list-text">通过在同一数据集中与不同计算资源并行运行多个训练实验，而不会出现不必要的延迟和数据延迟，提高了效率和工作效率</block>
  <block id="5211203793a223f02322b88b2e698a82" category="list-text">最大限度地降低计算实例成本</block>
  <block id="6a6fcee71b4e22ac6a4afdfdb5940b67" category="list-text">利用工具来保留数据集，其沿袭，版本和其他元数据详细信息的记录，从而提高了可重现性</block>
  <block id="930d18875813298018f8364069441eee" category="list-text">增强了共享和协作功能，使团队中的任何授权成员都可以访问数据集并运行实验</block>
  <block id="5f700d00ad72470694a5aa06cd515c8b" category="paragraph">要使用 NetApp ONTAP 数据管理软件实施数据集缓存，客户必须执行以下任务：</block>
  <block id="41fac0272180c0141b5cd7ad6ad85a44" category="list-text">配置和设置最接近计算资源的 NFS 存储。</block>
  <block id="25a3a7ee3cfbb4afc291cd5b94dec000" category="list-text">确定要缓存的数据集和版本。</block>
  <block id="dbffd2a20c35c06fbb6ba0cd17e54ef6" category="list-text">监控提交到缓存数据集的总内存以及可用于其他缓存提交的 NFS 存储容量（例如缓存管理）。</block>
  <block id="61d5e7050cbe037ad5adeaf246e6be19" category="list-text">如果数据集在特定时间未使用，则会使其过期。默认值为一天；其他配置选项可用。</block>
  <block id="36691dc48fac4774974c970e3bfa1a7d" category="paragraph"><block ref="36691dc48fac4774974c970e3bfa1a7d" category="inline-link-macro-rx"></block></block>
  <block id="0a1bc6b4024485ff9b55c99c1237e175" category="doc">使用 Run ： AI 优化集群和 GPU 利用率</block>
  <block id="b8b025dc1895637326d2420e912751e0" category="summary">在使用 Trident 在 Kubernetes 集群中动态配置存储资源之前，必须先创建一个或多个 Trident 后端。此页面上的示例展示了在 ONTAP AI POD 上部署 NetApp AI 控制平面解决方案时可能需要创建的不同类型的后端。</block>
  <block id="c0fe00dd01499e23426b850b65782c77" category="paragraph">在使用 Trident 在 Kubernetes 集群中动态配置存储资源之前，必须先创建一个或多个 Trident 后端。以下示例展示了在 ONTAP AI POD 上部署 NetApp AI 控制平台解决方案时可能需要创建的不同类型的后端。有关后端的详细信息，请参见<block ref="e6b3671f5db59046617458d31ef4f50b" category="inline-link-rx"></block>。</block>
  <block id="1e698f68960fb964df99e73068c9377c" category="list-text">NetApp 建议为要在 NetApp AFF 系统上使用的每个数据 LIF （提供数据访问的逻辑网络接口）创建一个启用了 FlexGroup 的 Trident 后端。这样，您可以在 LIF 之间平衡卷挂载</block>
  <block id="327a3876126e4773cfcc5e30649c9483" category="paragraph">以下示例命令显示了为与同一 ONTAP Storage Virtual Machine （ SVM ）关联的两个不同数据 LIF 创建两个启用了 FlexGroup 的 Trident 后端。这些后端使用 `ontap-nas-flexgroup` 存储驱动程序。ONTAP 支持两种主要数据卷类型： FlexVol 和 FlexGroup 。FlexVol 卷具有大小限制（截至本文撰写时，最大大小取决于特定部署）。另一方面， FlexGroup 卷可以线性扩展到高达 20 PB 和 4000 亿个文件，从而提供一个可显著简化数据管理的命名空间。因此， FlexGroup 卷最适合依赖大量数据的 AI 和 ML 工作负载。</block>
  <block id="ba9f56aafb45a750a8dffe5de6d2ed78" category="paragraph">如果您使用的是少量数据，并且希望使用 FlexVol 卷而不是 FlexGroup 卷，则可以创建使用 `ontap-NAS` 存储驱动程序而不是 `ontap-nas-flexgroup` 存储驱动程序的 Trident 后端。</block>
  <block id="d04adbc45ec06c05c1826745b8f4ddf2" category="list-text">NetApp 还建议创建一个或多个启用了 FlexVol 的 Trident 后端。如果您使用 FlexGroup 卷来训练数据集存储，则可能需要使用 FlexVol 卷来存储结果，输出，调试信息等。如果要使用 FlexVol 卷，必须创建一个或多个启用了 FlexVol 的 Trident 后端。下面的示例命令显示了如何创建一个使用单个数据 LIF 且已启用 FlexVol 的 Trident 后端。</block>
  <block id="b2fd42bdee0b5c2c43b5b337ed0fb6e3" category="inline-link-macro">接下来：适用于 ONTAP AI 部署的 Kubernetes Storageclasses 示例</block>
  <block id="7f79fcf9bd5d475baa13a8df72b9aa31" category="paragraph"><block ref="7f79fcf9bd5d475baa13a8df72b9aa31" category="inline-link-macro-rx"></block></block>
  <block id="e2b5e920360785877a1831ff4b128520" category="summary">NetApp 设置</block>
  <block id="ad2376beebecdcf7846ba973fa1a005b" category="doc">设置</block>
  <block id="9af8334f3fca73145524498c2f49ee10" category="inline-link-macro">下一步：概述</block>
  <block id="02e8a07ffc2e2c5240049e5214d70427" category="paragraph"><block ref="02e8a07ffc2e2c5240049e5214d70427" category="inline-link-macro-rx"></block></block>
  <block id="9dc7cfc5bd8fb85bad9fdab5cdded288" category="doc">运行： AI 安装</block>
  <block id="c1b7d088e01f6ec6ec89bf69437e4bb1" category="paragraph">要安装 Run ： AI ，请完成以下步骤：</block>
  <block id="7ad0483bc07dbde29ffd404af83f8305" category="list-text">使用 DeepOps 安装 Kubernetes 集群并配置 NetApp 默认存储类。</block>
  <block id="16d20d34f759cd25fd7486bbc4046a50" category="list-text">准备 GPU 节点：</block>
  <block id="d3eff3861b26ba61222bacaa41bc0fa7" category="list-text">验证是否已在 GPU 节点上安装 NVIDIA 驱动程序。</block>
  <block id="3683aa7fe695a205b8e40e9589c94a2e" category="list-text">验证是否已安装 `nvidia-Docker` 并将其配置为默认 Docker 运行时。</block>
  <block id="cef990020518a58fb1e70a90b5df80fe" category="list-text">安装运行： AI ：</block>
  <block id="e2d6778a342979b567501f951e36118a" category="inline-link">运行： AI 管理员 UI</block>
  <block id="6fc7ea9b01c6028f691aac2aeac528f1" category="list-text">登录到<block ref="668d940d94d02be49a88c4cfd2736fa9" category="inline-link-rx"></block> 以创建集群。</block>
  <block id="fe8f08cfda6726e2dcc5d0b85ed2c67d" category="list-text">下载创建的 `runai-operator-&lt;clustername&gt;.yaml` 文件。</block>
  <block id="b428155da5c27d208abd6c179c7669d3" category="list-text">将操作员配置应用于 Kubernetes 集群。</block>
  <block id="fac4447e0ea2e4cd1a2d9e2fefeab694" category="list-text">验证安装。</block>
  <block id="d63ebd1b7a89c0dad6259299d710b16e" category="inline-link"><block ref="d63ebd1b7a89c0dad6259299d710b16e" category="inline-link-rx"></block></block>
  <block id="2d14c64dc5dfa79a68cd6965fbf9e4b7" category="list-text">转至<block ref="115d2727bd1dc614110a31f98c029830" category="inline-link-rx"></block>。</block>
  <block id="feb48a27d95fc7a7e0c6db496c54d2fa" category="list-text">转到 " 概述 " 信息板。</block>
  <block id="09fa3891e2b39bb62217c6d097310577" category="inline-link">在内部 Kubernetes 集群上安装 Run ： AI</block>
  <block id="45d7be937e1eddf966adaf68562966d4" category="inline-link">安装 Run ： AI 命令行界面</block>
  <block id="728f8fd776de1dc47f318473052286db" category="list-text">验证右上角的 GPU 数量是否反映了预期的 GPU 数量，并且 GPU 节点均位于服务器列表中。有关 Run ： AI 部署的详细信息，请参见<block ref="089aa48f8d7b3b135b035765dd1e17ba" category="inline-link-rx"></block> 和<block ref="f2f48a2074c9edc0c2dea174863a4f6e" category="inline-link-rx"></block>。</block>
  <block id="db9d1f740f050b1d20ab43a459bb225a" category="inline-link-macro">接下来：运行 AI 信息板和视图</block>
  <block id="c56b5d251d18e9b020f95696fef9f0b9" category="paragraph"><block ref="c56b5d251d18e9b020f95696fef9f0b9" category="inline-link-macro-rx"></block></block>
  <block id="91c847ff0ec1e96ccc74039eaf1b5bf3" category="section-title">NetApp 概述</block>
  <block id="d30aa8861afaf98888c2367f107a8bc6" category="paragraph">NetApp 是混合云数据管理领域的权威企业。NetApp 提供全套混合云数据服务，可简化云和内部环境中的应用程序和数据管理，加速数字化转型。NetApp 与我们的合作伙伴携手，赋予全球企业充分释放数据的全部潜能，以扩大客户接触点，促进更大的创新并优化运营的能力。</block>
  <block id="ee86473f0dbd191846077276ce455778" category="paragraph">NetApp ONTAP AI 由 NVIDIA DGX 系统和 NetApp 云互联全闪存存储提供支持，可可靠地简化数据流，并加快从边缘到核心再到云的数据网络结构的分析，培训和推理速度。它为 IT 组织提供了一个架构，可提供以下优势：</block>
  <block id="cee5abf75433f502c31530bc72eecd6a" category="list-text">支持独立扩展计算和存储</block>
  <block id="6cb062d50ca0d4a2bfa0caec33fea16f" category="list-text">为各种性能和成本点提供一系列存储选项 NetApp ONTAP AI 提供融合基础架构堆栈，其中包括 NVIDIA DGX-1 ，一个 petaflop 级 AI 系统和 NVIDIA Mellanox 高性能以太网交换机，可统一 AI 工作负载，简化部署并加快 ROI 。在本技术报告中，我们将 ONTAP AI 与一个 DGX-1 和一个 NetApp AFF A800 存储系统结合使用。下图显示了此验证中使用的 DGX-1 系统的 ONTAP AI 拓扑。</block>
  <block id="3eedc2d7451e7ff0440f17c9e61227dc" category="paragraph"><block ref="3eedc2d7451e7ff0440f17c9e61227dc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="543ca2d3d9aa63e1a63c69dd219d5f2a" category="section-title">NetApp AI 控制平台</block>
  <block id="e1fc355cf7f97dbf25407695f8852241" category="paragraph">借助 NetApp AI 控制平台，您可以借助解决方案充分发挥 AI 和 ML 的潜能，该平台可提供极高的可扩展性，简化的部署以及无中断的数据可用性。AI 控制平面解决方案将 Kubernetes 和 Kubeflow 与 NetApp 支持的数据网络结构相集成。Kubernetes 是适用于云原生部署的行业标准容器编排平台，可实现工作负载的可扩展性和可移动性。Kubeflow 是一款开源机器学习平台，可简化管理和部署，使开发人员能够在更短的时间内完成更多的数据科学工作。NetApp 支持的 Data Fabric 可提供无与伦比的数据可用性和可移植性，确保您的数据可通过管道从边缘到核心再到云进行访问。本技术报告在 MLRun 管道中使用 NetApp AI 控制平台。下图显示了 Kubernetes 集群管理页面，您可以在其中为每个集群设置不同的端点。我们将 NFS 永久性卷连接到 Kubernetes 集群，下图显示了连接到集群的永久性卷，其中<block ref="33155b45dbdad2f412212744fbe6f8dc" category="inline-link-rx"></block> 提供持久存储支持和数据管理功能。</block>
  <block id="b058638c35435549e77a90b91abd3305" category="paragraph"><block ref="b058638c35435549e77a90b91abd3305" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7d371ade9f9702601a7e2f8f57c8b013" category="paragraph"><block ref="7d371ade9f9702601a7e2f8f57c8b013" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a1dc271f7d3ae88e2a019314b7e4fd8e" category="section-title">Iguazio 概述</block>
  <block id="0c9fe13fe6a660070e99a54151edd7c3" category="paragraph">Iguazio 数据科学平台是一个完全集成且安全的数据科学平台即服务（ PaaS ），可简化开发，加快性能，促进协作并解决运营难题。此平台包含以下组件， Iguazio 数据科学平台如下图所示：</block>
  <block id="2137518d79f0a3dfe335e8c02312cf96" category="list-text">数据科学工作台，包括 Jupyter 笔记本电脑，集成分析引擎和 Python 软件包</block>
  <block id="68ed19bfa85e4c4677e50979864e169b" category="list-text">通过试验跟踪和自动化管道功能进行模型管理</block>
  <block id="37a28d84cd653345f1f2c036cb732f2d" category="list-text">通过可扩展的 Kubernetes 集群管理数据和 ML 服务</block>
  <block id="77fdda1a79199ac02cde44b4249cb509" category="list-text">Nutrio ，一种实时无服务器功能框架</block>
  <block id="96a6f4a99a7526e82a294d44ed005701" category="list-text">一个速度极快且安全的数据层，支持 SQL ， NoSQL ，时间序列数据库，文件（简单对象）和流式传输</block>
  <block id="00a48f02675717eaf6082c4ba536a366" category="list-text">与 NetApp ， Amazon S3 ， HDFS ， SQL 数据库以及流式传输或消息传送协议等第三方数据源集成</block>
  <block id="901630ad39a688431a68dc119f5378a3" category="list-text">基于 Grafana 的实时信息板</block>
  <block id="887fce38ef8ddd8546748bb746ed7e5a" category="paragraph"><block ref="887fce38ef8ddd8546748bb746ed7e5a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="961027a0ac9a1d9515fa54a5d5372c79" category="inline-link-macro">接下来：软件和硬件要求</block>
  <block id="a10e3ee0949323f601d4c9624980eb47" category="paragraph"><block ref="a10e3ee0949323f601d4c9624980eb47" category="inline-link-macro-rx"></block></block>
  <block id="a905494ad30a6d54678a2122c04bfd54" category="summary">Jupyter 笔记本电脑和 Kubeflow 管道示例</block>
  <block id="80e94617849fe0b057f3edcc76a6ac72" category="doc">示例笔记本电脑和管道</block>
  <block id="3da57858cd6a76521b38784effc6a06f" category="paragraph">。<block ref="42224cf159df1ff428bf611c27a06039" category="inline-link-rx"></block> 可与 Kubeflow 结合使用。将 NetApp 数据科学工具包与 Kubeflow 结合使用具有以下优势：</block>
  <block id="624a53dc5871ce49612a285ee2bf367e" category="list-text">数据科学家可以直接在 Jupyter 笔记本电脑中执行高级 NetApp 数据管理操作。</block>
  <block id="1c7d37cb415e8b7777b071784911a77a" category="list-text">可以使用 Kubeflow 管道框架将高级 NetApp 数据管理操作整合到自动化工作流中。</block>
  <block id="5e646a4ae4330cb948544333980f9f49" category="inline-link">Kubeflow 示例</block>
  <block id="987823970c7b662272fb9e0058bf5ff1" category="paragraph">请参见<block ref="3eb5d4ffd5360858e22dfb9799f211d7" category="inline-link-rx"></block> 有关将工具包与 Kubeflow 结合使用的详细信息，请参见 NetApp Data Science Toolkit GitHub 存储库中的一节。</block>
  <block id="927743800667c01263ab493409a78dbc" category="inline-link-macro">接下来： Apache Airflow 部署</block>
  <block id="4ad8ac0bb69dfe62124a01353d776480" category="paragraph"><block ref="4ad8ac0bb69dfe62124a01353d776480" category="inline-link-macro-rx"></block></block>
  <block id="7c0ea3e86521674f72e056d148d4f2ce" category="paragraph">NetApp 和 Run ： AI 已在本技术报告中展开合作，展示了 NetApp ONTAP AI 解决方案与 Run ： AI 平台在简化 AI 工作负载流程方面的独特功能。上述步骤提供了一个参考架构，用于简化深度学习的数据管道和工作负载流程。建议希望实施这些解决方案的客户联系 NetApp 和 Run ： AI 了解更多信息。</block>
  <block id="f797637684ff1290d12e5495dac050a6" category="inline-link-macro">接下来：第 4.8 节的测试详细信息</block>
  <block id="bbe251d46ac2a6899a2a4d5d0e331a43" category="paragraph"><block ref="bbe251d46ac2a6899a2a4d5d0e331a43" category="inline-link-macro-rx"></block></block>
  <block id="cacf19a633c323f6bf997c65d0fc8a8f" category="doc">设置部署跳转 VM 和 Kubernetes 主节点 VM （手动部署）</block>
  <block id="dca41dcf55fc025bde05897304e3b0b6" category="paragraph">运行 Linux 分发版的部署跳转虚拟机用于以下目的：</block>
  <block id="cc6150bd7322c1b0002cd2615fd667f0" category="list-text">使用 Ansible 部署 ONTAP Select 攻略手册</block>
  <block id="09967e25c3fd08cceb9a1a360a59b085" category="list-text">使用 NVIDIA DeepOps 和 GPU 操作员部署 Kubernetes 基础架构</block>
  <block id="1fc5fc7776b5e49627486e163a71bef9" category="list-text">安装和配置 NetApp Trident</block>
  <block id="0e63bf4edd01856e53f0db82ea5c011c" category="paragraph">另外还设置了三个运行 Linux 的 VM ；这些 VM 将在此解决方案中配置为 Kubernetes 主节点。</block>
  <block id="a326dbcd9a5d846138b001028542b1f3" category="paragraph">此解决方案部署使用了 Ubuntu 18.04.4 LTS 。</block>
  <block id="12575943d8f75b79f762d95f155d249c" category="list-text">使用 VMware 工具部署 Ubuntu 18.04.4 LTS VM</block>
  <block id="16dd6a047886a48ce4460c835010d7f4" category="inline-link-macro">安装 Ubuntu 18.04.4 LTS</block>
  <block id="32600657d9966e65bab3eee7e7fe15bb" category="paragraph">您可以参考第节中所述的高级步骤 <block ref="59548ba40aa53d13220a6e698c79d070" category="inline-link-macro-rx"></block>。</block>
  <block id="7aa09469863e6ec98f1c9a957c8e631a" category="list-text">为 VM 配置带内管理网络。请参见以下网络计划模板示例：</block>
  <block id="63c6eb6a94466d4327ad6cb773c0da50" category="paragraph">此模板不是设置网络的唯一方式。您可以使用自己喜欢的任何其他方法。</block>
  <block id="774b7bcb4359594dfb7c52e6796822d3" category="list-text">应用网络计划。</block>
  <block id="1e288603a8ccbf24b1aafd41e82f0de0" category="list-text">如果 Network Manager 正在运行，请停止并禁用它。</block>
  <block id="5f9008a63e2464a9a2537719d128f479" category="list-text">打开一个 VI 编辑器以 ` /etc/iproute2/RT_Tables` 并添加表条目。</block>
  <block id="31e62848872ffee09afab9849efd884d" category="list-text">在 DNS 中为 VM 添加主机记录。</block>
  <block id="35069f339c8e7dbcfd422e61d0df0c26" category="list-text">验证出站 Internet 访问。</block>
  <block id="e24be93da54fa5effeabde76cdd63f49" category="list-text">更新系统。</block>
  <block id="5d136e5b0b370603cc0afb0f18feb921" category="list-text">重新启动系统。</block>
  <block id="13d0dc5bdcc23f736605e5bc174d97c6" category="list-text">重复步骤 1 到 9 以设置其他三个 VM 。</block>
  <block id="ebba79d0c45c42fab1c3208da3646c1d" category="inline-link-macro">下一步：使用 NVIDIA DeepOps 部署 Kubernetes 集群（自动化部署）</block>
  <block id="4eb19656ee8cfd5729c22a27ff3ccf1a" category="paragraph"><block ref="4eb19656ee8cfd5729c22a27ff3ccf1a" category="inline-link-macro-rx"></block></block>
  <block id="8383a1cf96c028a0986b7371049c8495" category="doc">网络设备故障预测用例摘要</block>
  <block id="dea416ff04e558b0d76cce896b618880" category="paragraph">本用例基于亚洲电信领域的 Iguazio 客户。每年有 10 万个企业客户和 125 万个网络中断事件，因此迫切需要预测并采取主动行动，防止网络故障影响客户。此解决方案为他们提供了以下优势：</block>
  <block id="feb68271e6d14db0b1ff524f3eb47a27" category="list-text">对网络故障进行预测性分析</block>
  <block id="70e00676492bea584fb8e7d551515eb5" category="list-text">与票证系统集成</block>
  <block id="6de8d1444549249c0161228a7b7c1d27" category="list-text">通过主动采取措施，防止因实施 Iguazio 而导致网络故障， 60% 的故障都是主动预防的。</block>
  <block id="fd80dbb606385d62c59605ec96147d3f" category="inline-link-macro">下一步：设置概述</block>
  <block id="d31627f0c8fea1236773b2420ab9cd39" category="paragraph"><block ref="d31627f0c8fea1236773b2420ab9cd39" category="inline-link-macro-rx"></block></block>
  <block id="8fcbbd73e86fa0b56d72d6127c318c85" category="paragraph">数据的爆炸式增长以及机器学习（ ML ）和人工智能（ AI ）的指数级增长已经融合在一起，形成了一个具有独特开发和实施挑战的新经济。大量数据通常存储在低成本的数据湖中， GPU 等高性能 AI 计算资源无法高效地访问它。在本报告中，我们介绍了一款全新的解决方案，数据科学实践者可以在其中实施数据中心，只需单击一下，即可在数据集的计算资源附近创建一个数据集缓存，无论这些数据集位于何处。因此，借助新的数据集版本中心所支持的增强协作， AI 实践者可以更轻松地执行高性能模型培训。</block>
  <block id="0c8a89e4d7937b03d3adc0f1d6530b08" category="paragraph"><block ref="0c8a89e4d7937b03d3adc0f1d6530b08" category="inline-link-macro-rx"></block></block>
  <block id="321cf11d6ad313e01614cfa7817893fb" category="doc">JarVis 部署</block>
  <block id="24a0684c018bf0ed5e7001773d8df2c5" category="inline-link">JARVIS 早期访问计划</block>
  <block id="55ce258288b89404cc493de8c839e20a" category="paragraph">您可以注册<block ref="de4a7b23900edb1996cbcb27f4a65904" category="inline-link-rx"></block> 访问 NVIDIA GPU Cloud （ NGC ）上的 JarVis 容器。从 NVIDIA 收到凭据后，您可以使用以下步骤部署 JarVis ：</block>
  <block id="e5a6dabbbe3f9144d9f6e72b568893cd" category="list-text">登录到 NGC 。</block>
  <block id="a668e3da095eca41ef93e0c494a6ebad" category="list-text">在 NGC 上设置您的组织： `ea-2-JarVis` 。</block>
  <block id="f3b0315f8d213517a6076eb7aff49cb6" category="list-text">找到 JarVis EA v0.2 资产： JarVis containers are in `Private Registry` &gt; `Organization Containers` 。</block>
  <block id="6db8e9899d42bcac6aeb824da5e952ef" category="list-text">选择 JarVis ：导航到 `Model Scripts` ，然后单击 `JarVis Quick Start`</block>
  <block id="737af365257800065a6412e56d652acc" category="list-text">验证所有资产是否均正常工作。</block>
  <block id="8a5fd124171d01a74b1af73e73ab7761" category="list-text">查找用于构建您自己的应用程序的文档： PDF 可在 `Model Scripts` &gt; `JarVis Documentation` &gt; `File Browser` 中找到。</block>
  <block id="f3e3b1e7550f6cf9fe883b01695163b7" category="inline-link-macro">接下来：针对零售用例自定义状态和流程</block>
  <block id="3ae7e712d75bd01d43546679548a28a1" category="paragraph"><block ref="3ae7e712d75bd01d43546679548a28a1" category="inline-link-macro-rx"></block></block>
  <block id="f68b67869778246b8f0d8a98ed043512" category="paragraph">本节详细介绍了虚拟零售助理的实施。</block>
  <block id="02216530e0245f79b0b7448e14bffbce" category="inline-link-macro">接下来： JarVis 部署</block>
  <block id="a9ca2532d8607b5827969961f314249e" category="paragraph"><block ref="a9ca2532d8607b5827969961f314249e" category="inline-link-macro-rx"></block></block>
  <block id="1703cadf8e847114fb353feaaf03beb9" category="summary">本节包括在 ONTAP AI POD 上部署 Kubernetes 时可以执行的各种高性能作业的示例。</block>
  <block id="639ce1b23959b4470d67802f0e5e412a" category="doc">ONTAP AI 部署的高性能作业示例</block>
  <block id="57eba472576fad7371f43a10ff20428e" category="inline-link-macro">接下来：执行单节点 AI 工作负载</block>
  <block id="5838b0381430a7b4bc84daba23bab95e" category="paragraph"><block ref="5838b0381430a7b4bc84daba23bab95e" category="inline-link-macro-rx"></block></block>
  <block id="e7446d382d8184be0a342a2fc45d4394" category="doc">WP-7328 ：使用 NVIDIA JarVis 的 NetApp 对话 AI</block>
  <block id="5dabc617366db74ce2a9fa3915f6af5a" category="paragraph">Rick Huang ， Sung-Han Lin ， NetApp ， NVIDIA 公司的 Dide Onofino</block>
  <block id="018aacc6ea95e20996bf57b319fd037a" category="paragraph">NVIDIA DGX 系统系列由全球首款基于人工智能（ AI ）的集成系统组成，这些系统专为企业 AI 而构建。NetApp AFF 存储系统可提供极致性能和行业领先的混合云数据管理功能。NetApp 和 NVIDIA 合作创建了 NetApp ONTAP AI 参考架构，这是一款适用于人工智能和机器学习（ ML ）的统包解决方案工作负载，可提供企业级性能，可靠性和支持。</block>
  <block id="1a76c739ce37834495a22c5db663d24b" category="paragraph">本白皮书为客户构建对话式 AI 系统提供了方向性指导，以支持各个行业的不同使用情形。其中包括有关使用 NVIDIA JarVis 部署系统的信息。这些测试是使用 NVIDIA DGX 工作站和 NetApp AFF A220 存储系统执行的。</block>
  <block id="f813bd56d696cb8de386a53a37eed6f6" category="list-text">企业架构师，负责设计用于开发人工智能模型和软件的解决方案，用于虚拟零售助理等人工智能对话用例</block>
  <block id="0497dfe9ff978e87977c978d3443e206" category="list-text">寻求高效方式实现语言建模开发目标的数据科学家</block>
  <block id="e84c345e30f668aa19a041e2e12bc9fe" category="list-text">负责维护和处理客户问题和对话记录等文本数据的数据工程师</block>
  <block id="00101e6b2bf526b1ee79d39389f461fa" category="list-text">有兴趣转变对话式 AI 体验并加快 AI 计划上市速度的高管和 IT 决策者以及业务主管</block>
  <block id="88851610d9d91a7b78ab814276bebba7" category="paragraph"><block ref="88851610d9d91a7b78ab814276bebba7" category="inline-link-macro-rx"></block></block>
  <block id="b682eee68510f6de72c9f48b832fba3c" category="inline-link"><block ref="b682eee68510f6de72c9f48b832fba3c" category="inline-link-rx"></block></block>
  <block id="3e5d8230d86c09995fcd8e9ccf335813" category="list-text">cnvrg-io （<block ref="0691e14f48847a7f13eaf800c0f5813a" category="inline-link-rx"></block>）：</block>
  <block id="6536b07bf755c64528073e655a567c32" category="list-text">cnvrg 核心（免费 ML 平台）</block>
  <block id="0a16af2994c8e10c6c5976d774430a92" category="paragraph"><block ref="0a16af2994c8e10c6c5976d774430a92" category="inline-link-rx"></block></block>
  <block id="1b21ae34f592a7f2ca92d4a44122475d" category="list-text">Cnvrg 文档</block>
  <block id="0730c44e9dc233c7fce5d95816294f52" category="inline-link"><block ref="0730c44e9dc233c7fce5d95816294f52" category="inline-link-rx"></block></block>
  <block id="f3a2f110576ed38849e70a6bb9794ae8" category="paragraph"><block ref="f3a2f110576ed38849e70a6bb9794ae8" category="inline-link-rx"></block></block>
  <block id="c7c082299876892b4274ecfb3c3f7bcd" category="list-text">NVIDIA DGX-1 服务器：</block>
  <block id="d2647f7d8e79758eea27c6cdcf636638" category="list-text">NVIDIA DGX-1 服务器</block>
  <block id="65d1be94e9f29dc4af77bef169d5be14" category="list-text">NVIDIA Tesla V100 Tensor 核心 GPU</block>
  <block id="9052758d35faeab8995feefc50d729ed" category="list-text">NVIDIA GPU Cloud （ NGC ）</block>
  <block id="64ba1593b4427fb62b53b007d4a1c26e" category="list-text">NetApp AFF 系统：</block>
  <block id="092940c9deac7c0f10a0ed36613c28c2" category="paragraph"><block ref="092940c9deac7c0f10a0ed36613c28c2" category="inline-link-rx"></block></block>
  <block id="b4199ce9c494dec10c6ee051ddb413e2" category="list-text">适用于 AFF 的 NetApp FlashAdvantage</block>
  <block id="974aeb47ab8fd0a635d02d8ac80b9eb1" category="paragraph"><block ref="974aeb47ab8fd0a635d02d8ac80b9eb1" category="inline-link-rx"></block></block>
  <block id="1cb9a8619999ebc0a2d9c07624d76166" category="list-text">NetApp 互操作性表</block>
  <block id="d51c982ce98a1e197c234ea0b9a5e7d9" category="paragraph"><block ref="d51c982ce98a1e197c234ea0b9a5e7d9" category="inline-link-rx"></block></block>
  <block id="7a211d267d46c5b44662098f9234fcd0" category="list-text">ONTAP AI 网络：</block>
  <block id="b8a60c56690ddfc62bd735d0b212c396" category="list-text">Cisco Nexus 3232C 交换机</block>
  <block id="926dc08a3a3a3946402bb1beab6545cc" category="list-text">Mellanox Spectrum 2000 系列交换机</block>
  <block id="492f548658890a1d2495b8af5cebef8c" category="paragraph"><block ref="11ff6f8fb3928ea5c0863401e5e79d17" category="inline-link-rx"></block></block>
  <block id="edb7d6728a9813b505cb306367d453e3" category="list-text">DALI</block>
  <block id="bdee52e8a4d1d258eb5a296fbd0ad9b5" category="paragraph"><block ref="bdee52e8a4d1d258eb5a296fbd0ad9b5" category="inline-link-rx"></block></block>
  <block id="1b2766572fa1896116e3c218eb697113" category="list-text">TensorFlow ：适用于所有人的开源机器学习框架</block>
  <block id="26909d0380bdba02e2fcf7f7157cd78b" category="list-text">Horovod ： Uber 的 TensorFlow 开源分布式深度学习框架</block>
  <block id="3ffa9619031400d374ed5c0860d434ab" category="paragraph"><block ref="3ffa9619031400d374ed5c0860d434ab" category="inline-link-rx"></block></block>
  <block id="c9cbaff7c173f4b7bc923573ca753577" category="list-text">在容器运行时生态系统中启用 GPU</block>
  <block id="b3a776c1e64d267ebe62a7bf45c6c1b7" category="paragraph"><block ref="b3a776c1e64d267ebe62a7bf45c6c1b7" category="inline-link-rx"></block></block>
  <block id="ccd09fd9430cf2df88a137dbec97676b" category="paragraph"><block ref="ccd09fd9430cf2df88a137dbec97676b" category="inline-link-rx"></block></block>
  <block id="22d149e351657eac5bd1db4934498bbe" category="list-text">数据集和基准测试：</block>
  <block id="717108fd0999828c4a6d8290d419733b" category="list-text">NIH Chest X 射线数据集</block>
  <block id="4eb7427d14327fa86230f324870dc6b8" category="paragraph"><block ref="4eb7427d14327fa86230f324870dc6b8" category="inline-link-rx"></block></block>
  <block id="f249b6ce18772b83efb8a6e58ac09d47" category="list-text">王晓松，彭义文，卢乐，陆志勇，莫哈马达迪 · 巴格里， Ronald Summers ， ChestX-ray8 ：《医院级胸 X 射线数据库和常见胸病的弱监督分类和本地化基准》， IEEE CVPR ，第页3462-3471 ， 2017TR-4841-0620</block>
  <block id="1e3ecab57c1572b4a25412b1e395562a" category="paragraph">您可以针对特定使用情形自定义对话框管理器的状态和流。在我们的零售示例中，我们提供了以下四个 YAML 文件，用于根据不同意向指导对话。</block>
  <block id="608f6d7dfd7bc98630446f0c601cc730" category="paragraph">查看以下文件名列表以及每个文件的问题描述：</block>
  <block id="77d10e2958e3d21f89adae8647e8d0d2" category="list-text">`main_flow.yml` ：定义主要对话流和状态，并在必要时将此流定向到其他三个 YAML 文件。</block>
  <block id="96b445ea5c6b049dfc1250466b6bdf2e" category="list-text">`retail _flow.yml` ：包含与零售或感兴趣点问题相关的状态。系统会提供最近商店的信息或给定商品的价格。</block>
  <block id="17a0ea5055e6be908d7e2f6f983aa471" category="list-text">`weather flow.yml` ：包含与天气问题相关的状态。如果无法确定位置，系统会询问一个跟进问题以进行澄清。</block>
  <block id="ade7d8cc2b23f24add45c4096dd41795" category="list-text">`error_flow.yml` ：处理用户意向不属于上述三个 YAML 文件的情况。显示错误消息后，系统会重新路由到接受用户问题。以下各节包含这些 YAML 文件的详细定义。</block>
  <block id="ef7c28f5093b59a07761555c8914df26" category="section-title">main_flow.yml</block>
  <block id="dfc9a806326d590aa4ccf49aa6909cda" category="section-title">Retail ， flow.yml</block>
  <block id="6e08d9d65c68d5f447f4fd239052c12e" category="section-title">weather flow.yml</block>
  <block id="b7dc1d2ced2caa9352158983c5ffeda1" category="section-title">error_flow.yml</block>
  <block id="c6496825f1a87696b60935af9416283a" category="inline-link-macro">下一步：连接到第三方 API 作为实施引擎</block>
  <block id="3a9d38bca913120b9d3638cb194cd7e6" category="paragraph"><block ref="3a9d38bca913120b9d3638cb194cd7e6" category="inline-link-macro-rx"></block></block>
  <block id="39cf3ca3e5dbe56d6eade7cbe3cc40e6" category="doc">Kubeflow 操作和任务示例</block>
  <block id="368c8f521d74a015b7a3e1a46c8847b1" category="paragraph">本节包括您可能希望使用 Kubeflow 执行的各种操作和任务的示例。</block>
  <block id="0790eb8f3ff91edc1f86333018edbe64" category="inline-link-macro">下一步：为数据科学家或开发人员配置 Jupyter 笔记本电脑工作空间</block>
  <block id="1b8f0c6e9f5e8de3bd40cbbb72ad814f" category="paragraph"><block ref="1b8f0c6e9f5e8de3bd40cbbb72ad814f" category="inline-link-macro-rx"></block></block>
  <block id="33204bfa9ee287508f03782fd7ad512e" category="summary">在使用 Trident 在 Kubernetes 集群中动态配置存储资源之前，必须创建一个或多个 Kubernetes StorageClasses 。此页面上的示例展示了在 ONTAP AI POD 上部署 NetApp AI 控制平面解决方案时可能需要创建的不同类型的 StorageClasses 。</block>
  <block id="d9206a5144976221af82df78ad3d7977" category="paragraph">在使用 Trident 在 Kubernetes 集群中动态配置存储资源之前，必须创建一个或多个 Kubernetes StorageClasses 。以下示例展示了在 ONTAP AI POD 上部署 NetApp AI 控制平面解决方案时可能需要创建的不同类型的 StorageClasses 。有关 StorageClasses 的详细信息，请参见<block ref="e6b3671f5db59046617458d31ef4f50b" category="inline-link-rx"></block>。</block>
  <block id="993143e7434e63409a07cf3e8c422505" category="list-text">NetApp 建议为在一节中创建的每个启用了 FlexGroup 的 Trident 后端创建一个单独的 StorageClass <block ref="5ce2b96729b1637e197bdd36eb4db4ee" category="inline-link-macro-rx"></block>，步骤 1 。通过这些粒度级 StorageClasses ，您可以将与特定 LIF （创建 Trident 后端时指定的 LIF ）相对应的 NFS 挂载添加为 StorageClass 规范文件中指定的特定后端。下面的示例命令显示了两个 StorageClasses 的创建过程，这两个 StorageClasses 对应于在部分中创建的两个示例后端 <block ref="5ce2b96729b1637e197bdd36eb4db4ee" category="inline-link-macro-rx"></block>，步骤 1 。有关 StorageClasses 的详细信息，请参见<block ref="e6b3671f5db59046617458d31ef4f50b" category="inline-link-rx"></block>。</block>
  <block id="d9348d075dc7b3c91cff99d56dfc327b" category="inline-link">Kubernetes 文档</block>
  <block id="a596fcc71d1c43e3ba86b1557ac7af81" category="paragraph">为了在删除相应的 PersistentVolumeClaim （ PVC ）时不删除永久性卷，以下示例使用了 `reClaimPolicy` 值 `Retain` 。有关 `re"claimPolicy` " 字段的详细信息，请参见相关官员<block ref="2b8f9bbf9efeff879b3debc5484f0056" category="inline-link-rx"></block>。</block>
  <block id="f053cb3a491d2bc48d41230b10a9b164" category="list-text">NetApp 还建议创建一个与您在部分中创建的启用了 FlexVol 的 Trident 后端对应的 StorageClass <block ref="5ce2b96729b1637e197bdd36eb4db4ee" category="inline-link-macro-rx"></block>，步骤 2 。下面的示例命令显示了为 FlexVol 卷创建一个 StorageClass 的过程。</block>
  <block id="99608a01905f0e69895bbb864a0deba3" category="paragraph">在以下示例中，未在 StorageClass 定义文件中指定特定后端，因为仅创建了一个启用了 FlexVol 的 Trident 后端。使用 Kubernetes 管理使用此 StorageClass 的卷时， Trident 会尝试使用使用 `ontap-NAS` 驱动程序的任何可用后端。</block>
  <block id="ee1d27a4ae3e30ff30ef72e305b029e7" category="list-text">NetApp 还建议为 FlexGroup 卷创建通用存储类。以下示例命令显示了如何为 FlexGroup 卷创建一个通用 StorageClass 。</block>
  <block id="d4a43a35c5d5a5ce3aefe77ceaa73a5c" category="paragraph">请注意， StorageClass 定义文件中未指定特定后端。因此，在使用 Kubernetes 管理使用此 StorageClass 的卷时， Trident 会尝试使用使用 `ontap-nas-flexgroup` 驱动程序的任何可用后端。</block>
  <block id="f4f693e817e9d1ba266a89d7cc39741f" category="inline-link-macro">接下来： Kubeflow 部署概述</block>
  <block id="f67586c4cd0ee54e4c5b25800396c58a" category="paragraph"><block ref="f67586c4cd0ee54e4c5b25800396c58a" category="inline-link-macro-rx"></block></block>
  <block id="2732cb29fe3befd83c06e7c220b5456d" category="doc">第 4.10 节的测试详细信息</block>
  <block id="273936fc522fd7dbe4473de8a0b2a985" category="paragraph">此部分包含此部分的测试详细信息 <block ref="2783e1454358e180d4e2876ef9492c64" category="inline-link-macro-rx"></block>。</block>
  <block id="cf46f9264bb33ef7576cf671194a0275" category="paragraph">按以下顺序提交 `team-A` ， `team-b` 和 `team-c` 的作业：</block>
  <block id="fac80c1054e849e1ec88244c017978e7" category="cell">1 个工作负载已排队</block>
  <block id="eefc99cd833e14811fb22b758cbc62e5" category="cell">已排队 2 个工作负载</block>
  <block id="be46ffa9e65cb964fc3236de02c41e4e" category="paragraph">请参见以下已执行的命令序列：</block>
  <block id="001f9003205f670658ffc60b1e4d62d8" category="cell">两个工作负载要求每个 GPU 两个</block>
  <block id="f0f10ddbe8f00433aad17626c8d96a73" category="cell">两个工作负载，每个工作负载需要两个 GPU</block>
  <block id="f82056dbbe3376b10ac622b0bdaae914" category="cell">8/8.</block>
  <block id="61b8291124bff8ee36a1c799e35395e9" category="paragraph">接下来，删除 `team-d` 的所有工作负载：</block>
  <block id="ed9cf33d84548b5953f8b042c72faef4" category="paragraph">请参见一节 <block ref="2783e1454358e180d4e2876ef9492c64" category="inline-link-macro-rx"></block>，用于讨论后续测试场景。</block>
  <block id="543cdcd352596e4ad69b4597a2188c02" category="paragraph"><block ref="543cdcd352596e4ad69b4597a2188c02" category="inline-link-macro-rx"></block></block>
  <block id="5b7a8a379330d9d43907b47a6d7ee306" category="doc">使用 Nemo 培训扩展意向模型</block>
  <block id="a7fbadb37067070a61a3da62b548ba3c" category="paragraph">NVIDIA Nemo 是由 NVIDIA 构建的一个工具包，用于创建对话式 AI 应用程序。该工具包包含一系列针对 ASL ， NLP 和 TTS- 的预培训模块，使研究人员和数据科学家能够轻松构建复杂的神经网络架构，并更加专注于设计自己的应用程序。</block>
  <block id="1a56a4858eeec63d31bc890d38325b84" category="paragraph">如上例所示， Nara 只能处理有限类型的问题。这是因为经过预先培训的 NLP 模型只会对这些类型的问题进行训练。如果我们希望 Nara 能够处理更广泛的问题，我们需要使用自己的数据集对其进行重新训练。因此，我们将在此演示如何使用 Nemo 扩展 NLP 模型以满足要求。我们首先将从 Nara 收集的日志转换为 Nemo 的格式，然后训练数据集以增强 NLP 模型。</block>
  <block id="4e19d1e300ea3cd63472939c24caf65d" category="paragraph">我们的目标是使 Nara 能够根据用户首选项对项目进行排序。例如，我们可能会要求 Nara 推荐排名最高的寿司店，也可能希望 Nara 寻找价格最低的 jeans 。为此，我们使用 Nemo 中提供的意向检测和插槽填充模型作为我们的培训模型。通过此模型， Nara 可以了解搜索首选项的意图。</block>
  <block id="5cb83e5ef3cd25eb53fa55d635a7758f" category="section-title">数据准备</block>
  <block id="807cace7b07fcded06b9d106c4dd4d2d" category="paragraph">为了训练模型，我们会收集此类问题的数据集，并将其转换为 Nemo 格式。我们在此处列出了用于训练模型的文件。</block>
  <block id="dc1d3747ed1059f234cbe4a104700abd" category="section-title">dict.intents.csv</block>
  <block id="e803005a5c3a99889733e9c8e8bba406" category="paragraph">此文件列出了我们希望 Nemo 了解的所有意向。此处，我们有两个主要意向，一个意图仅用于对不符合任何主要意向的问题进行分类。</block>
  <block id="ce2440c5074ba6a1e30fa2ec906dafb4" category="section-title">dict.slots.csv</block>
  <block id="a3fc542c51797c85b30365ba9b2d12c5" category="paragraph">此文件列出了我们可以在培训问题上标记的所有插槽。</block>
  <block id="795cab38744084526a62914e47789fbe" category="section-title">Traine.tsv</block>
  <block id="8a5ae45ea3762f79d1a520bcf61275d5" category="paragraph">这是主要的培训数据集。每行都以文件 dict.intent.csv 中列出的意图类别后面的问题开头。此标签将从零开始枚举。</block>
  <block id="db487d8daea13e36203f660d46b3cdfc" category="section-title">Train_slots.tsv</block>
  <block id="73ade6fc5004174d2abe822c85cdfbef" category="section-title">训练模型</block>
  <block id="c764142480a5daa39ac98125503352e8" category="paragraph">然后，我们将使用以下命令启动此容器。在此命令中，我们会将容器限制为使用单个 GPU （ GPU ID = 1 ），因为这是一项轻型训练练习。此外，我们还会将本地工作空间 /workstore/nemo/ 映射到容器 /nemo 中的文件夹。</block>
  <block id="a712c52af847db1e143ca43fdd44bd39" category="paragraph">在容器中，如果要从最初的预先培训的 Bert 模型开始，我们可以使用以下命令启动培训操作步骤。data_dir 是用于设置训练数据路径的参数。work_dir 用于配置检查点文件的存储位置。</block>
  <block id="9e654b2215e90d20951b3ddd67a15bc6" category="paragraph">如果我们有新的培训数据集并希望改进先前的模型，则可以使用以下命令从停止的位置继续操作。checkpoint_dir 获取上一个检查点文件夹的路径。</block>
  <block id="87eea49f703666c49da2d7987ba093b2" category="section-title">推理模型</block>
  <block id="484c4e9e4a0a20bf41551f65663fa9d2" category="paragraph">我们需要在经过一定次数的时间之后验证经过训练的模型的性能。使用以下命令，我们可以逐个测试查询。例如，在此命令中，我们希望检查我们的模型是否能够正确识别查询的目的 `在哪里可以获得最好的意大利面` 。</block>
  <block id="de558a28e6333ac9f453a42631f44c12" category="paragraph">然后，以下是推理的输出。在输出中，我们可以看到经过培训的模型可以正确预测 DETAINT_the_store 的意向，并返回我们感兴趣的关键字。通过这些关键字，我们可以使 Nara 搜索用户所需内容并进行更精确的搜索。</block>
  <block id="5b7f09a1d5da38512130330f4d38fd32" category="paragraph"><block ref="5b7f09a1d5da38512130330f4d38fd32" category="inline-link-macro-rx"></block></block>
  <block id="84860cc77161e23e44eccd05430c00ea" category="doc">在 Run ： AI 命令行界面中提交作业</block>
  <block id="68c9d249f35c91dfcc4a11e209ccbdba" category="paragraph">本节详细介绍了可用于运行任何 Kubernetes 作业的基本 Run ： AI 命令。它会根据工作负载类型分为三部分。AI/ML/DL 工作负载可分为两种通用类型：</block>
  <block id="754edd5bae16b4a2ed8e6673821d3339" category="list-text">* 无人参与的培训课程 * 。对于这些类型的工作负载，数据科学家会准备一个自运行的工作负载并将其发送给执行。执行期间，客户可以检查结果。此类工作负载通常用于生产或模型开发阶段，无需人工干预。</block>
  <block id="fdfda155b7c1021ae5e73d2ab01c0129" category="list-text">* 交互式构建会话 * 。对于这些类型的工作负载，数据科学家将与 Bash ， Jupyter Notebook ，远程 PyCharm 或类似的 IDE 打开交互式会话，并直接访问 GPU 资源。我们还提供了第三种使用连接的端口运行交互式工作负载的方案，以便向容器用户显示内部端口。</block>
  <block id="6ec08732676824c58d76b0ecdc2aed24" category="section-title">无人参与的培训工作负载</block>
  <block id="18cb2734d0533ff093ddcb1b3005e216" category="paragraph">设置项目并分配 GPU 后，您可以在命令行中使用以下命令运行任何 Kubernetes 工作负载：</block>
  <block id="68e667063c4711033bbf6b7f8b312e1f" category="paragraph">此命令将为团队 A 启动无人参与的培训作业，并分配一个 GPU 。此作业基于示例 Docker 映像 `gcr.io/run-ai-demo/Quickstart` 。我们将作业命名为 `hyper1` 。然后，您可以运行以下命令来监控作业的进度：</block>
  <block id="cbae10285b6d282e740369a59fd25aaf" category="paragraph">下图显示了 `runai list` 命令的结果。您可能看到的典型状态包括：</block>
  <block id="e749e4e3bf7ed6d5368f336ba6ceeead" category="list-text">`容器创建` 。正在从云存储库下载 Docker 容器。</block>
  <block id="f5231f23820da3ad520bb16a9dfe97a7" category="list-text">`待定` 。作业正在等待计划。</block>
  <block id="411497b40a902afd2813d3c7af137ffb" category="list-text">`运行` 。作业正在运行。</block>
  <block id="c0801feb8216aa6b36a769e14c3bc138" category="paragraph"><block ref="c0801feb8216aa6b36a769e14c3bc138" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4f5f0c8fb5ec5bccf18cfd167b1d3bc5" category="paragraph">要获取作业的其他状态，请运行以下命令：</block>
  <block id="db0b192c9c9b9885b435e466b9ac861c" category="paragraph">要查看作业日志，请运行 `runai logs &lt;job-name&gt;` 命令：</block>
  <block id="280782f59c990a941b600c998427a52c" category="paragraph">在此示例中，您应看到正在运行的 DL 会话的日志，包括当前训练时间， ETA ，损失函数值，准确性以及每个步骤所用时间。</block>
  <block id="848ad760ae00e3eca33445cd09cfdf34" category="paragraph">您可以在运行： AI UI 上查看集群状态，网址为<block ref="115d2727bd1dc614110a31f98c029830" category="inline-link-rx"></block>。在 Dashboards &gt; Overview 下，您可以监控 GPU 利用率。</block>
  <block id="f899123d07ffe99c3d97952ae96017ed" category="paragraph">要停止此工作负载，请运行以下命令：</block>
  <block id="1f979b6140776c287d458036805ad8aa" category="inline-link">启动无人参与的培训工作负载</block>
  <block id="637552715214e8c0c87022bac459e824" category="paragraph">此命令将停止训练工作负载。您可以再次运行 `runai list` 来验证此操作。有关详细信息，请参见<block ref="e5fbbc266c1fd3a9a029581f5747622d" category="inline-link-rx"></block>。</block>
  <block id="7afece97948db40e546138d81dd343e1" category="section-title">交互式构建工作负载</block>
  <block id="30330792601ba24e9ad5f4f5ee0d5151" category="paragraph">设置项目并分配 GPU 后，您可以在命令行中使用以下命令运行交互式构建工作负载：</block>
  <block id="ca57038d87e3f48eb98329e6fd449824" category="paragraph">此作业基于示例 Docker 映像 python 。我们将作业 BUILD1 命名为。</block>
  <block id="39fd96ce47a2aa757eb5cc98cd910730" category="admonition">` - 交互式` 标志表示作业没有开始或结束研究人员有责任完成此项工作。管理员可以为交互式作业定义一个时间限制，在该时间限制之后，系统会终止这些作业。</block>
  <block id="d39d9c693980c2af510d4a58be6f2620" category="paragraph">` -g 1` 标志可为此作业分配一个 GPU 。提供的命令和参数为 ` —命令休眠— args infinity` 。您必须提供命令，否则容器将立即启动并退出。</block>
  <block id="aedc6bf8e3cb52af4a660584c69353ca" category="paragraph">以下命令的工作方式与中所述的命令类似 <block ref="a09c3ced87a580a4004dfa2429aba9c7" category="inline-xref-macro-rx"></block>：</block>
  <block id="1d2bac5ee25c12c0ee793df98c1b4d49" category="list-text">`runai list` ：显示名称，状态，期限，节点，映像， 用于作业的项目，用户和 GPU 。</block>
  <block id="6b5b5fdb13c8b8af02a41b296af91a2e" category="list-text">`runai get build1` ：显示作业 build1 的其他状态。</block>
  <block id="9c1e129aa488b11d05275f016f42dda5" category="list-text">`runai delete build1` ：停止交互式工作负载 BUILD1.To get a bash shell to the container ， the following command ：</block>
  <block id="ac97b61bdc50cfc22ffd507de190d00c" category="paragraph">这样就可以直接将 shell 连接到计算机。然后，数据科学家可以在容器中开发或微调其模型。</block>
  <block id="5051a9eb1fad38f876a260ba0a4850af" category="inline-link"><block ref="5051a9eb1fad38f876a260ba0a4850af" category="inline-link-rx"></block></block>
  <block id="c7fdd5fcf033fb9395c27ecbf2e54fc9" category="inline-link">启动和使用交互式构建工作负载</block>
  <block id="ff53dc42327d97c7410a6ac241222ffe" category="paragraph">您可以在运行： AI UI 上查看集群状态，网址为<block ref="29f2b88109b12c4db8e875d3f5ba7aae" category="inline-link-rx"></block>。有关详细信息，请参见<block ref="f3d6ab8050b43c83f452779c7622ab1d" category="inline-link-rx"></block>。</block>
  <block id="1028c65994f7201e0f43b3bf5d3c6b41" category="section-title">使用已连接端口的交互式工作负载</block>
  <block id="7d05c708b92b4809bfe9bf66edf8f765" category="inline-link">传入</block>
  <block id="34274fcc13408f06acfe43c4065c3f3b" category="paragraph">作为交互式构建工作负载的扩展，在使用 Run ： AI CLI 启动容器时，您可以向容器用户显示内部端口。这对于云环境，使用 Jupyter 笔记本电脑或连接到其他微服务非常有用。<block ref="fd51448530c36b6101cc67fbacf525b9" category="inline-link-rx"></block> 允许从 Kubernetes 集群外部访问 Kubernetes 服务。您可以通过创建一组规则来配置访问，这些规则定义哪些入站连接访问哪些服务。</block>
  <block id="e7f72a2c9a0cb7337eb00a3093f846da" category="paragraph">为了更好地管理对集群中服务的外部访问，我们建议集群管理员安装<block ref="fd51448530c36b6101cc67fbacf525b9" category="inline-link-rx"></block> 并配置负载平衡器。</block>
  <block id="16d79943625573d5b80809fe2a7ddbdd" category="paragraph">要使用传入作为服务类型，请在提交工作负载时运行以下命令以设置方法类型和端口：</block>
  <block id="79fcc0299f1a85ebab053926e2222bca" category="paragraph">容器成功启动后，执行 `runai list` 以查看用于访问 Jupyter 笔记本电脑的 `S服务 URL （ S ）` 。此 URL 由入口端点，作业名称和端口组成。例如，请参见<block ref="0309fbe8f364c8f6dfe6f383da8c46c2" category="inline-link-rx"></block>。</block>
  <block id="451b08ed1bf6f7f0a8931cff52c4c45e" category="inline-link">使用连接的端口启动交互式构建工作负载</block>
  <block id="b524842923f8cb1e38064fadc680893f" category="paragraph">有关详细信息，请参见<block ref="414875add8a18a03ddddfb14fb1c47f4" category="inline-link-rx"></block>。</block>
  <block id="5bb97c2dd089da990a792356c72a6128" category="inline-link-macro">接下来：实现高集群利用率</block>
  <block id="8f87de13e6ff3dd2fc164bdb930759bb" category="paragraph"><block ref="8f87de13e6ff3dd2fc164bdb930759bb" category="inline-link-macro-rx"></block></block>
  <block id="86608a0b346f307c76f8ae00c9f6bcb9" category="summary">此报告介绍如何快速克隆数据命名空间。它演示了如何定义和实施 AI 培训工作流，这些工作流可以近乎即时地创建数据和模型基线，以实现可追溯性和版本控制。同时，还介绍了如何在站点和区域之间无缝复制数据，以及如何快速配置 Jupyter 笔记本电脑工作空间，以便访问海量数据集。</block>
  <block id="f0829d8f9d70b9de9de7beae86dc2129" category="paragraph">NetApp 公司 Mike Oglesby</block>
  <block id="27114500e25aba7a27847b772d396575" category="paragraph">各行各业各种规模的企业和组织都在转向人工智能（ AI ），机器学习（ ML ）和深度学习（ DL ），以解决实际问题，提供创新产品和服务，并在竞争日益激烈的市场中占据优势。随着企业越来越多地使用 AI ， ML 和 DL ，他们面临着许多挑战，包括工作负载可扩展性和数据可用性。本文档演示了如何使用 NetApp AI 控制平台来应对这些挑战， NetApp AI 控制平台是一种将 NetApp 数据管理功能与常见开源工具和框架配对的解决方案。</block>
  <block id="98300151efa6f504dee4866e49cf2078" category="paragraph">此报告介绍如何快速克隆数据命名空间。此外，还将向您展示如何在站点和区域之间无缝复制数据，以创建统一的统一 AI/ML/DL 数据管道。此外，它还会指导您完成 AI ， ML 和 DL 培训工作流的定义和实施，这些工作流可近乎即时地创建数据和模型基线，以实现可追溯性和版本控制。使用此解决方案，您可以跟踪每个模型训练返回到用于训练和 / 或验证模型的确切数据集。最后，本文档将向您介绍如何快速配置 Jupyter 笔记本电脑工作空间，以便访问海量数据集。</block>
  <block id="3a8a3991c7ef251983bda0fd052b9b10" category="inline-link-macro">TR-4890</block>
  <block id="3cbee33bcafaf0315e821a3331b91eb5" category="inline-link-macro">NetApp 完全支持的并行文件系统解决方案 BeeGFS</block>
  <block id="63de7cb3a054a3754335c60a0c8ba878" category="paragraph">注意：对于涉及大量需要共享访问同一数据集的 GPU 服务器的 HPC 模式大规模分布式培训，或者如果您需要 / 更喜欢并行文件系统，请查看 <block ref="f82f3a4db7a848244fd5070f378c86fb" category="inline-link-macro-rx"></block>。本技术报告介绍了如何包括 <block ref="99c493838dffa23aa6d1149e33e3edf0" category="inline-link-macro-rx"></block> 作为 NetApp AI 控制平台的一部分。此解决方案可从少数 NVIDIA DGX A100 系统扩展到全闪满的 140 节点 SuperPOD 。</block>
  <block id="9f1cc947f3e0236f8d5bc32d8d33509a" category="inline-link">cloud.netapp.com</block>
  <block id="9d50c340b35848862ab6ecbdadc401ed" category="paragraph">NetApp AI 控制平台面向数据科学家和数据工程师，因此只需极少的 NetApp 或 NetApp ONTAP ® 专业知识即可。借助此解决方案，可以使用简单熟悉的工具和界面来执行数据管理功能。如果您的环境中已有 NetApp 存储，您可以立即测试运行 NetApp AI Control 平台。如果您要测试解决方案驱动器，但尚未安装 NetApp 存储，请访问<block ref="d72e38e0d1c5ca8869f2dd987734920b" category="inline-link-rx"></block>，您只需几分钟即可使用基于云的 NetApp 存储解决方案启动并运行。下图显示了解决方案的可视化视图。</block>
  <block id="1f39acb56ba2a8669371819a64348c74" category="paragraph"><block ref="1f39acb56ba2a8669371819a64348c74" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8b3773d1a432fb6daacfb9a00676e23f" category="paragraph"><block ref="8b3773d1a432fb6daacfb9a00676e23f" category="inline-link-macro-rx"></block></block>
  <block id="ed8e4613850a4014b0e6ef830982caf2" category="paragraph">此部分包含此部分的测试详细信息 <block ref="26be59a535445b1fffeef12f5e70f3e6" category="inline-link-macro-rx"></block>。</block>
  <block id="17b3673d5c28fb72e7cc48549f489dd4" category="cell">6/8</block>
  <block id="ffe090618e54b7916fa47cf8881019b1" category="cell">team-b/c 工作负载暂停并移至 `pending` 。</block>
  <block id="bccfe4ac65004fb31c146d17003d00e8" category="cell">其他团队（ b/c ）工作负载暂停并移至 `pending` 。</block>
  <block id="3b099141b6a7e4e8804c3fda5ed4f440" category="paragraph">请参见一节 <block ref="26be59a535445b1fffeef12f5e70f3e6" category="inline-link-macro-rx"></block> 有关继续测试场景的讨论。</block>
  <block id="5d52789e4f8028aca21d5650bed8273b" category="inline-link-macro">接下来：第 4.10 节的测试详细信息</block>
  <block id="61a1556247485f1d0fbb34dbe36d1503" category="paragraph"><block ref="61a1556247485f1d0fbb34dbe36d1503" category="inline-link-macro-rx"></block></block>
  <block id="aa364e0963e38930007df2b60bdba067" category="doc">将数据保存到 Trident 配置的 PersistentVolume</block>
  <block id="ef1fb51957f2aa894de5476a9a0112a2" category="paragraph">NetApp Trident 是一个完全受支持的开源项目，旨在帮助您满足容器化应用程序的复杂持久性需求。您可以将数据读写到 Trident 配置的 Kubernetes PersistentVolume （ PV ）中，并通过 NetApp ONTAP 数据管理软件提供数据分层，加密， NetApp Snapshot 技术，合规性和高性能优势。</block>
  <block id="a821f368daf439d909bfed3c8e95d4b9" category="section-title">重复使用现有命名空间中的 PVC</block>
  <block id="be3455a34c69a26df1a5f04a6245249b" category="inline-link">NetApp Trident 文档</block>
  <block id="15040fc521e7fa5e8ef42694ca89e53d" category="paragraph">对于规模较大的 AI 项目，不同容器向同一个 Kubernetes PV 读取和写入数据可能会更高效。要重复使用 Kubernetes 永久性卷声明（ PVC ），用户必须已创建 PVC 。请参见<block ref="5b6274adc29653ed1820027957bdb4e2" category="inline-link-rx"></block> 有关创建 PVC 的详细信息。以下是重复使用现有 PVC 的示例：</block>
  <block id="743520c366f0d11ca817811dda85fcf1" category="paragraph">运行以下命令查看项目 `team-A` 的作业 `pvc 测试` 的状态：</block>
  <block id="7d4c508442c775f946e3d9318b75b1a0" category="paragraph">您应看到 PV /tmp/pvc1mount 挂载到 `team-A` job `vc-test` 。这样，多个容器就可以从同一个卷读取数据，这在开发或生产环境中存在多个竞争模式时非常有用。数据科学家可以构建一系列模型，然后通过多数投票或其他技术将预测结果结合起来。</block>
  <block id="dae81aa45b8ce281aabbd1402afe277b" category="paragraph">使用以下命令访问容器 Shell ：</block>
  <block id="bc63da8fa87210da818596598e359427" category="paragraph">然后，您可以检查已挂载的卷并访问容器中的数据。</block>
  <block id="fc180b17e3fccb2beb46854f71d31406" category="paragraph">这种重复使用 PVC 的功能可与 NetApp FlexVol 卷和 NetApp ONTAP FlexGroup 卷配合使用，从而使数据工程师可以使用更灵活，更强大的数据管理选项来利用由 NetApp 提供支持的数据网络结构。</block>
  <block id="2e203cb5454e63a32bcdb87dc9cb77ad" category="paragraph"><block ref="2e203cb5454e63a32bcdb87dc9cb77ad" category="inline-link-macro-rx"></block></block>
  <block id="52c7321ea4e3d5b264fdc8639a65e280" category="doc">部署 Grafana 信息板</block>
  <block id="c843fc0ceca9c58b409cab519799c125" category="paragraph">部署完所有内容后，我们会对新数据运行推断。这些型号可预测网络设备故障。预测结果存储在 Iguazio 时间序列表中。您可以在与 Iguazio 的安全和数据访问策略集成的平台中使用 Grafana 来查看结果。</block>
  <block id="ae93e86067cc1d0e7bb1ec8fdca6fbc3" category="paragraph">您可以通过将提供的 JSON 文件导入到集群中的 Grafana 接口来部署信息板。</block>
  <block id="213977705fe35a4cb0cfc9365088fc87" category="list-text">要验证 Grafana 服务是否正在运行，请查看服务下的。</block>
  <block id="b426c25dbb35de6b9c6bff0b10b8bef9" category="paragraph"><block ref="b426c25dbb35de6b9c6bff0b10b8bef9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="58b6e0cc0a098260878a0e8fa4eb7766" category="list-text">如果不存在此实例，请从服务部分部署此实例：</block>
  <block id="cd40a7a2e0a86f4a0283af5999a050db" category="list-text">单击新建服务。</block>
  <block id="59c4bcb990174489660974167376a50a" category="list-text">从列表中选择 Grafana 。</block>
  <block id="7e280ecf88737f34a1972ac94f9ae2a1" category="list-text">接受默认值。</block>
  <block id="9e47b36567e5001dea59ffee81456737" category="list-text">单击下一步。</block>
  <block id="4fa350b43dd079673b6fca4852841147" category="list-text">输入您的用户 ID 。</block>
  <block id="af81385be6cef15b54f8c8c126c0eab0" category="list-text">单击 Save Service 。</block>
  <block id="568c8b6f668936384414e470f9ddd939" category="list-text">单击顶部的 Apply Changes 。</block>
  <block id="b5be50b376063d6c3ffaa3be10d4a9d3" category="list-text">要部署信息板，请通过 Jupyter 界面下载文件 `NetopsPredictions-Dashboard.json` 。</block>
  <block id="587b311a501585c3a1d9260d4f147990" category="paragraph"><block ref="587b311a501585c3a1d9260d4f147990" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4ad16c6527a3abd13b6864b8b078586b" category="list-text">从服务部分打开 Grafana 并导入信息板。</block>
  <block id="0b78dd574d02d72071845d040fdde57c" category="paragraph"><block ref="0b78dd574d02d72071845d040fdde57c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5c3ce0bca8ff75db7ff2bbc3e76532b2" category="list-text">单击 Upload ` * 。 json` File ，然后选择先前下载的文件（`NetopsPredictions-Dashboard.json` ）。上传完成后，将显示信息板。</block>
  <block id="7cd4d06091771aa3f16d2759a067e18c" category="paragraph"><block ref="7cd4d06091771aa3f16d2759a067e18c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a0258dc4515b0e18ecd4b55651e27671" category="section-title">部署清理功能</block>
  <block id="ff4bdefb3ddd7532393d08c8df14d786" category="paragraph">当您生成大量数据时，保持数据干净有序非常重要。为此，请使用 `cleanup.ipynb` 笔记本部署清理功能。</block>
  <block id="e654f7a86a4458b9cd662267e0f29b52" category="section-title">优势</block>
  <block id="6d0f7ccc9b17bcabb743cabdfb56e0da" category="paragraph">NetApp 和 Iguazio 通过构建 Kubeflow ， Apache Spark 和 TensorFlow 等基本框架以及 Docker 和 Kubernetes 等业务流程工具，加快并简化 AI 和 ML 应用程序的部署。通过统一端到端数据管道， NetApp 和 Iguazio 可以减少许多高级计算工作负载固有的延迟和复杂性，从而有效地缩小开发和运营之间的差距。在培训阶段，数据科学家可以对大型数据集运行查询，并与授权用户安全地共享数据和算法模型。容器化模型准备好投入生产后，您可以轻松地将其从开发环境迁移到操作环境。</block>
  <block id="daee7e425c63dff416cde0a8932a8483" category="paragraph"><block ref="daee7e425c63dff416cde0a8932a8483" category="inline-link-macro-rx"></block></block>
  <block id="612edeb05f6d237e20f3d843d6e7eba4" category="paragraph">以下各节详细介绍了运行： AI 安装，测试场景以及在此验证中执行的结果。</block>
  <block id="2df14da3d7db15550e8eafc892e89d8e" category="paragraph">我们使用行业标准基准测试工具（包括 TensorFlow 基准测试）验证了此系统的运行和性能。ImageNet 数据集用于训练 RESNET-50 ，它是一种著名的神经网络（ Convolutional Neural Network ， CNN ） DL 图像分类模型。RESNET-50 可提供准确的训练结果，并缩短处理时间，从而使我们能够对存储产生足够的需求。</block>
  <block id="a89cd2a9c8244dab756ec04aeb8247e9" category="inline-link-macro">下一步：运行 AI 安装</block>
  <block id="13bb3aa52565b3e3f517764c0e88c324" category="paragraph"><block ref="123704fec3ddad892d7c2ae5c4de301b" category="inline-link-macro-rx"></block>。</block>
  <block id="afee48a46dd68b9618cec81a8ee5ba86" category="paragraph">本节介绍 ONTAP AI 解决方案的技术要求。</block>
  <block id="e96b7604f8b75ae786c6c0e1016e46fd" category="inline-link">ONTAP AI 网站</block>
  <block id="929f5f13d86d1be55b96dba26e773c6f" category="paragraph">虽然硬件要求取决于特定的客户工作负载，但 ONTAP AI 可以在任何规模部署，用于数据工程，模型培训和生产推理，从单个 GPU 到机架级配置，用于大规模 ML/DL 操作。有关 ONTAP AI 的详细信息，请参见<block ref="7ec9b089c41da1b986bad97e1099df1c" category="inline-link-rx"></block>。</block>
  <block id="41e840b508d9e839f95d16dd582af8d6" category="paragraph">此解决方案已通过使用 DGX-1 系统进行计算，使用 NetApp AFF A800 存储系统和使用 Cisco Nexus 3232C 进行网络连接的验证。在此验证中使用的 AFF A800 可支持多达 10 个 DGX-1 系统，用于大多数 ML/DL 工作负载。下图显示了此验证中用于模型培训的 ONTAP AI 拓扑。</block>
  <block id="bc2eb92d1e1797a759b677c38f619a8f" category="paragraph"><block ref="bc2eb92d1e1797a759b677c38f619a8f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d98e5c43e7b3be89fe8a9076f89f1e99" category="paragraph">要将此解决方案扩展到公有云，可以将 Cloud Volumes ONTAP 与云 GPU 计算资源一起部署，并集成到混合云数据网络结构中，使客户能够使用适合任何给定工作负载的任何资源。</block>
  <block id="4dc70b997a39a64b2def3ef74a96fdb4" category="paragraph">下表显示了此解决方案验证中使用的特定软件版本。</block>
  <block id="2cb05e4bb7830be982f0922fed86b4cd" category="cell">组件</block>
  <block id="d173e10eb6a0fc7969fe540c987e0c7d" category="cell">18.04.4 LTS</block>
  <block id="9b4bffa460105781f82b1d463bde8200" category="cell">4.4.0</block>
  <block id="3c1d47ba5c1ada327abd4532ff9f4437" category="cell">20.02.1</block>
  <block id="0083e57a258edd18b949d3afbf6cfc2a" category="cell">1.15</block>
  <block id="152090ff5e9a05ea7e1cf0c248449638" category="cell">掌舵</block>
  <block id="232de5556d4148d75b55012e1230616c" category="cell">3.1.0</block>
  <block id="e5e8ab661917b89b4161959c7dc28442" category="cell">cnvrg.io</block>
  <block id="272f0a04b740763e0a29316bc4af89a4" category="cell">3.0.0</block>
  <block id="d8a31094f88724af6834c47a6697dc56" category="cell">9.6P4</block>
  <block id="9909115a4f9fe32731077286c367501c" category="paragraph">在此解决方案验证中， Kubernetes 会在 DGX-1 系统上部署为单节点集群。对于大规模部署，应部署独立的 Kubernetes 主节点，以提供高可用性的管理服务，并为 ML 和 DL 工作负载预留有价值的 DGX 资源。</block>
  <block id="1c428dd76324aae91879799ae73fbc37" category="inline-link-macro">接下来：解决方案部署和验证详细信息</block>
  <block id="5e5761a91dc25c881f4ca86678634b1b" category="paragraph"><block ref="5e5761a91dc25c881f4ca86678634b1b" category="inline-link-macro-rx"></block></block>
  <block id="ecb81ab37e1d2a7ed6dfce3807622e3d" category="summary">本节详细介绍了如何使用 Run AI Orchestrator 设置平台，以便大规模执行车道检测分布式培训。</block>
  <block id="0714a752696f8feed939bbf52a6214f7" category="doc">车道检测—使用 Run ： AI 进行分布式培训</block>
  <block id="dbf10b854b8b7fc90297279e7ad0f745" category="paragraph">本节详细介绍了如何设置平台，以便使用 run ： AI orchator 大规模执行车道检测分布式培训。我们将讨论所有解决方案要素的安装以及在所述平台上运行分布式培训作业的问题。可以使用 NetApp SnapshotTM 并将其与 run ： AI 实验相链接来完成 ML 版本控制，以实现数据和模型可重现性。在跟踪模型，团队成员之间共享工作，结果的可重现性，将新型号版本投入生产以及数据来源方面， ML 版本控制起着至关重要的作用。NetApp ML 版本控制（ Snapshot ）可以捕获与每个实验相关的数据，经过培训的模型和日志的时间点版本。它具有丰富的 API 支持，可以轻松地与运行： AI 平台集成；您只需根据训练状态触发事件即可。此外，您还必须捕获整个实验的状态，而不更改 Kubernetes （ K8 ）上运行的代码或容器中的任何内容。</block>
  <block id="25d19977e35c6d286c5b051982ae3f3c" category="paragraph">最后，本技术报告将对 AKS 中多个启用了 GPU 的节点进行性能评估。</block>
  <block id="1987a7039dccb848f2e8ce693ba3faff" category="section-title">针对使用 TuSimple 数据集的通道检测用例的分布式培训</block>
  <block id="f75a7cb3d80e7be148c1ce86a4347011" category="paragraph">在本技术报告中，对 TuSimple 数据集进行了分布式培训，用于检测通道。在本培训代码中， Horovod 用于通过 AKS 在 Kubernetes 集群中的多个 GPU 节点上同时执行数据分布式培训。代码作为容器映像打包，以供 TuSimple 数据下载和处理。处理后的数据存储在 NetApp Trident 插件分配的永久性卷上。在培训中，还会创建一个容器映像，并使用在下载数据期间创建的永久性卷上存储的数据。</block>
  <block id="58b4798157820b4e4415d8136cf60fe9" category="paragraph">要提交数据和培训作业，请使用 run ： ai 编排资源分配和管理。Run ： AI 允许您执行 Horovod 所需的消息传递接口（ Message Passing Interface ， MPI ）操作。此布局允许多个 GPU 节点彼此通信，以便在每次训练迷你批处理后更新训练权重。此外，它还可以通过 UI 和 CLI 监控训练，从而轻松监控实验进度。</block>
  <block id="ecbeff08f5ec15c6952355b518d4ae02" category="paragraph">NetApp Snapshot 集成在培训代码中，可捕获每个实验的数据状态和经过培训的模型。通过此功能，您可以跟踪所用数据和代码的版本以及生成的相关培训模型。</block>
  <block id="63addc90b28c066bd235c900fed65314" category="section-title">AK 设置和安装</block>
  <block id="50f7d8213ee52350926ec407074e68f1" category="inline-link">创建 AKS 集群</block>
  <block id="55b295c729173e8c0c745bb036b03270" category="paragraph">要设置和安装 AKS 集群，请转至<block ref="77c1c334ebc4c997080bda32aa569d69" category="inline-link-rx"></block>。然后，按照以下一系列步骤进行操作：</block>
  <block id="8f9d847fad9782b080de76b0161b1c45" category="list-text">选择节点类型（无论是系统（ CPU ）节点还是辅助（ GPU ）节点）时，请选择以下项：</block>
  <block id="957d1a35f975177c3fd161490f3e2d83" category="list-text">以 `Standard_DS2_v2` 大小添加名为 `agentpool` 的主系统节点。使用默认的三个节点。</block>
  <block id="8853a13db2e2a03cb5b2f1186fbcd0a6" category="list-text">添加工作节点 `gpupool` 并使用 `Standard_Nc6s_v3` 池大小。至少为 GPU 节点使用三个节点。</block>
  <block id="5085043d6dea89934a2e516fc46f891a" category="paragraph"><block ref="5085043d6dea89934a2e516fc46f891a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="633b880bff72a9f1c1114df31dec55bf" category="admonition">部署需要 5 – 10 分钟。</block>
  <block id="f55bb34768c41f91318fb57b85c1def9" category="inline-link">安装工具</block>
  <block id="6369fc9d36c9d56cbebefdeccda5fbff" category="list-text">部署完成后，单击 Connect to Cluster 。要连接到新创建的 AKS 集群，请从本地环境（笔记本电脑 /PC ）安装 Kubernetes 命令行工具。请访问<block ref="bcd577f96ff7023ec6fd5c904f040896" category="inline-link-rx"></block> 以根据您的操作系统进行安装。</block>
  <block id="811c47e56617f97db3579bc32a9085c9" category="inline-link">在本地环境中安装 Azure CLI</block>
  <block id="ea5d45554a3e9cb9cbc0ddea4c228b28" category="list-text"><block ref="2db79c584144175dd0bb69b6c7045fc9" category="inline-link-rx"></block>。</block>
  <block id="825ca3bff78c42ec87920dfbce105fae" category="list-text">要从终端访问 AKS 集群，请先输入 `az login` 并输入凭据。</block>
  <block id="3394029cd334ed00686c86c088d73c24" category="list-text">运行以下两个命令：</block>
  <block id="193937b265ce655417f00a79334d3937" category="list-text">在 Azure 命令行界面中输入此命令：</block>
  <block id="cbf78d8bb0be543834c56e61560773b0" category="admonition">如果所有六个节点均按此处所示启动并运行，则 AKS 集群已准备就绪并连接到本地环境。</block>
  <block id="e8085ec7505cfe6f3cfbe2c2628386dc" category="paragraph"><block ref="e8085ec7505cfe6f3cfbe2c2628386dc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0143a2caee1b9ab090de587206b65fe6" category="section-title">为 Azure NetApp Files 创建委派子网</block>
  <block id="450cf7e7f8262fdaa3454c2e11aad687" category="paragraph">要为 Azure NetApp Files 创建委派子网，请执行以下一系列步骤：</block>
  <block id="0ca30ab1eb5e523356720465eb7439c8" category="list-text">导航到 Azure 门户中的虚拟网络。查找新创建的虚拟网络。它应具有前面板，如 AK vnet ，如此处所示。单击虚拟网络的名称。</block>
  <block id="ce0c628aca3577055043c7f8364600d9" category="paragraph"><block ref="ce0c628aca3577055043c7f8364600d9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="25157709e5a253560f5ec68b8262563c" category="list-text">单击子网，然后从顶部工具栏中选择 +Subnet 。</block>
  <block id="d9bf5876b80dbf558587f06630e3915c" category="paragraph"><block ref="d9bf5876b80dbf558587f06630e3915c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6a07ef5dbc59d5ba150de82d519fb4f8" category="list-text">为子网提供名称，例如 `ANF.SN` ，然后在 Subnet delegation 标题下选择 Microsoft.NetApp/volumes 。请勿更改任何其他内容。单击确定。</block>
  <block id="a8ccea52e17d54aea1295a99ab4d5c2e" category="paragraph"><block ref="a8ccea52e17d54aea1295a99ab4d5c2e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d182b62071ada1a29e4f9c26487c1121" category="paragraph">Azure NetApp Files 卷将分配给应用程序集群，并在 Kubernetes 中用作永久性卷声明（ Persistent Volume Claim ， PVC ）。反过来，这种分配也为我们提供了将卷映射到不同服务的灵活性，包括 Jupyter 笔记本电脑，无服务器功能等</block>
  <block id="a74ff852d3b3b8447b0306018a76c4f1" category="paragraph">服务用户可以通过多种方式使用平台中的存储。Azure NetApp Files 的主要优势包括：</block>
  <block id="a7c5a83cc4ccf14374e496bcbb4363f5" category="list-text">使用户能够使用快照。</block>
  <block id="ea437fe76a4bba5bf335daccbbd24b50" category="list-text">允许用户在 Azure NetApp Files 卷上存储大量数据。</block>
  <block id="cedebf66380d43f58c07dfb1d4d686a6" category="list-text">在一组大型文件上运行 Azure NetApp Files 卷的型号时，可以获得这些卷的性能优势。</block>
  <block id="75ab13308585f62c3cd57a246d0e0c64" category="section-title">Azure NetApp Files 设置</block>
  <block id="8c060d9ae24c7bc4518e54cd5ed13098" category="inline-link">快速入门：设置 Azure NetApp Files 并创建 NFS 卷</block>
  <block id="fd01c32c80d631ed4bebff78fa83b23e" category="paragraph">要完成 Azure NetApp Files 的设置，必须先按照中所述对其进行配置<block ref="2f4e63e538c7dd311b18db058621cef8" category="inline-link-rx"></block>。</block>
  <block id="e26f032bd6f7f5636860d6b94ac84859" category="paragraph">但是，您可以省略为 Azure NetApp Files 创建 NFS 卷的步骤，因为您将通过 Trident 创建卷。在继续操作之前，请确保您已：</block>
  <block id="e953b5e281d40c5db3cc047889eec4f2" category="inline-link">注册 Azure NetApp Files 和 NetApp 资源提供商（通过 Azure Cloud Shell ）</block>
  <block id="3b46d13fb20fe6a92456f742b5732774" category="list-text"><block ref="527fb205c939c551ed93f597562513fb" category="inline-link-rx"></block>。</block>
  <block id="d0652e942d3d4b469179248d72ccaa5c" category="inline-link">已在 Azure NetApp Files 中创建帐户</block>
  <block id="82a51bbfec23ca7366c216813caeacc8" category="list-text"><block ref="874637dbfce24ba5a63adadd91968dc9" category="inline-link-rx"></block>。</block>
  <block id="02209b9e3a221b39bf0ce87641e7afc6" category="inline-link">设置容量池</block>
  <block id="7b4cb99ad8c150ff95b1a65d0f0524cc" category="list-text"><block ref="0fa33cef09dfad4c8795f42dd9dd5248" category="inline-link-rx"></block> （最低 4 TiB 标准版或高级版，具体取决于您的需求）。</block>
  <block id="1c7c9057bf4f7aee40c5a117c160c0fd" category="section-title">建立 AKS 虚拟网络和 Azure NetApp Files 虚拟网络对等关系</block>
  <block id="998069ab494c49ade2cc77591c02d9fa" category="paragraph">接下来，按照以下步骤将 AKS 虚拟网络（ vNet ）与 Azure NetApp Files vNet 建立对等关系：</block>
  <block id="bf12dce8dcc6febfeddec5ed2570e7d7" category="list-text">在 Azure 门户顶部的搜索框中，键入虚拟网络。</block>
  <block id="3f961f79effdf0aa37042e1733ee53ef" category="list-text">单击 vNet AK - vnet-name ，然后在搜索字段中输入 Peeids 。</block>
  <block id="0249aa06ef3e10e8754106189b542be4" category="list-text">单击 +Add ，然后输入下表中提供的信息：</block>
  <block id="6f16a5f8ff5d75ab84c018adacdfcbb7" category="cell">字段</block>
  <block id="88645c17102d75583e93db9aa716b012" category="cell">值或问题描述</block>
  <block id="f80824cb9ab9f704542dec0c71c5f38b" category="cell">对等链路名称</block>
  <block id="5d43607a5a0ebb50f3ea9348485daa15" category="cell">aps-vnet-name_to_anf</block>
  <block id="62912b52e584278e26870d9e5092e723" category="cell">subscriptionId</block>
  <block id="7d97336a164d9ce685e88a121141b189" category="cell">订阅要与之建立对等关系的 Azure NetApp Files vNet</block>
  <block id="82a60e720574cf435dda0a03976e8323" category="cell">vNet 对等配对节点</block>
  <block id="d2ade9376eb8b87db099330d20c4f180" category="cell">Azure NetApp Files vNet</block>
  <block id="5b92ad691782a9e4cc701e479c90997f" category="admonition">保留所有非星号部分的默认设置</block>
  <block id="0e5883528161213f3edc02dd718e1693" category="list-text">单击添加或确定将对等添加到虚拟网络。</block>
  <block id="12eee9bf8836d675f26602260016f7da" category="inline-link">创建，更改或删除虚拟网络对等关系</block>
  <block id="fa1f15d2aebd0592f338ea9f49e06377" category="paragraph">有关详细信息，请访问<block ref="610fa6db13a2eefe4a391b16732fbbf0" category="inline-link-rx"></block>。</block>
  <block id="91d2f55da5f23abbcf1a0656897d101b" category="paragraph">Trident 是 NetApp 为应用程序容器永久性存储维护的一个开源项目。Trident 已作为外部配置程序控制器实施，该控制器本身作为 POD 运行，可监控卷并完全自动化配置过程。</block>
  <block id="4088b2a65b2a3182209479dced5e78c5" category="paragraph">NetApp Trident 通过创建和附加永久性卷来存储培训数据集和经过培训的模型，可以与 K8 平稳集成。借助此功能，数据科学家和数据工程师可以更轻松地使用 K8 ，而无需手动存储和管理数据集。Trident 还可以通过逻辑 API 集成将数据管理相关任务集成在一起，因此数据科学家无需学习管理新的数据平台。</block>
  <block id="b8b9eab8c1ed7b79387652490f5724ec" category="section-title">安装 Trident</block>
  <block id="77dc68d199719a4b8f5eba742ecb7056" category="paragraph">要安装 Trident 软件，请完成以下步骤：</block>
  <block id="2f2e9ef9449e2f31756b1d3683a207b3" category="inline-link">首先安装 Helm</block>
  <block id="089f0e488d4e2b1a4b02d6d6b638c9d3" category="list-text"><block ref="b3c10ddb3b7f0e3e121ce123f60cc497" category="inline-link-rx"></block>。</block>
  <block id="e12559703ec38e80de7b94fecc84a043" category="list-text">下载并解压缩 Trident 21.01.1 安装程序。</block>
  <block id="7ee913d1a8b01e1a461f9eb99b0bba74" category="list-text">将目录更改为 `trident 安装程序` 。</block>
  <block id="8ad5650fb94bff45b328581838d836fd" category="list-text">将 `tridentctl` 复制到系统中的目录 ` $path.`</block>
  <block id="6da8d48465deb31425595b33a9172acf" category="list-text">使用 Helm 在 K8s 集群上安装 Trident ：</block>
  <block id="7b09729551ddb1a7445f559eb1186978" category="list-text">将目录更改为 helm 目录。</block>
  <block id="27b4c36cae8d1c4fd515d289942c87cc" category="list-text">安装 Trident 。</block>
  <block id="cea04f1ceb2ba2472ec50de3a03a689c" category="list-text">按照通常的 K8s 方式检查 Trident Pod 的状态：</block>
  <block id="6ac3c5fc780260af91dd10523188e6fd" category="list-text">如果所有 Pod 均已启动且正在运行，则会安装 Trident ，您可以继续操作。</block>
  <block id="7862dabe13bf66a99fcfd3a6b1af4d94" category="section-title">设置 Azure NetApp Files 后端和存储类</block>
  <block id="7e98dce86779e84763b71398d851f7bb" category="paragraph">要设置 Azure NetApp Files 后端和存储类，请完成以下步骤：</block>
  <block id="dadab4bead78e450739c0f56bad40cda" category="list-text">切换回主目录。</block>
  <block id="65b8f7db2e9a3793e76d2ec3787f71fa" category="inline-link">项目存储库</block>
  <block id="03636accad716972f761628ea21e43f6" category="list-text">克隆<block ref="2b240ffa21ddbdc99d1706dee4302f7e" category="inline-link-rx"></block> `lan-detect-scnan-horovod` 。</block>
  <block id="0ea725833b806058fe7810e6be91f9c0" category="list-text">转至 `trident — config` 目录。</block>
  <block id="c51fa2034e7d5d97ec8c31248fc18e98" category="list-text">创建 Azure 服务原则（服务原则是 Trident 如何与 Azure 通信以访问 Azure NetApp Files 资源）。</block>
  <block id="7c794fc1e683a6843753158bb92cab75" category="paragraph">输出应类似于以下示例：</block>
  <block id="203565dfd87ac32927ce5a828d45babd" category="list-text">创建 Trident `backend json` 文件。</block>
  <block id="d7e47f31bf1c921dd5e28ee7e6f5cd34" category="list-text">使用您的首选文本编辑器，填写 `anf-backend.json` 文件中下表中的以下字段。</block>
  <block id="689202409e48743b914713f96d93947c" category="cell">价值</block>
  <block id="8c443e170595ba0feac007ffb92cb49a" category="cell">subscriptionId</block>
  <block id="deb6a9aaa10be6bb24feea6a3540128c" category="cell">您的 Azure 订阅 ID</block>
  <block id="bc54592d6183695b841c6d1880ec0bf8" category="cell">tenantId</block>
  <block id="b147f00fa948b22faa89aa8044904495" category="cell">您的 Azure 租户 ID （上一步 AZ AD sp 的输出）</block>
  <block id="93c5bebdea9c94a0740fe6fd9bb250f0" category="cell">clientId</block>
  <block id="5760e6800c58c7dc9ee68efdc6db38de" category="cell">您的应用程序 ID （来自上一步 AZ AD sp 的输出）</block>
  <block id="2b53761249254ce6b502f521e5cc0683" category="cell">客户端机密</block>
  <block id="0571f76a94493cb2020d6c3b7453a367" category="cell">您的密码（上一步 AZ AD sp 的输出）</block>
  <block id="25e6b7ea847b31b4f88b60acd65052db" category="paragraph">此文件应类似于以下示例：</block>
  <block id="49356331b94221561b7751ae1f5343a9" category="list-text">指示 Trident 在 `trident` 命名空间中创建 Azure NetApp Files 后端，使用 `anf-backend.json` 作为配置文件，如下所示：</block>
  <block id="bd9c5e9bd5f130a6fbdbcaeb04656652" category="list-text">创建存储类：</block>
  <block id="a9fa0a3d8bf1bce76ef654f0a047b8fe" category="list-text">K8 用户使用按名称指定存储类的 PVC 配置卷。指示 K8s 使用以下命令创建一个存储类 `azurenetappfiles` ，该存储类将引用上一步中创建的 Azure NetApp Files 后端：</block>
  <block id="5e121b263b32950e629eaf774c12da78" category="list-text">使用以下命令检查是否已创建存储类：</block>
  <block id="202ed88f7ec48eda708f6c062786f474" category="paragraph"><block ref="202ed88f7ec48eda708f6c062786f474" category="inline-image-macro-rx" type="image"></block></block>
  <block id="72611a189b0331f709788d99912a1bd7" category="section-title">在 AKS 上部署和设置卷快照组件</block>
  <block id="3ea90db69187da57e9739e033add6801" category="paragraph">如果集群未预安装正确的卷快照组件，则可以通过运行以下步骤手动安装这些组件：</block>
  <block id="c3987ca9f11aad20ef5d2ae0dd30f9cb" category="admonition">AK 1.18.14 没有预安装的 Snapshot 控制器。</block>
  <block id="312e34d756f6ef39f0bd74e2f844773f" category="list-text">使用以下命令安装 Snapshot 测试版 CRD ：</block>
  <block id="529616f838a47cade6e5fac6f879ce5a" category="list-text">使用 GitHub 中的以下文档安装 Snapshot 控制器：</block>
  <block id="90a2427d3a3145723cd2a130c5372865" category="inline-link">卷快照类</block>
  <block id="8f2838f14b6a64dd466dc23bcf7e3c01" category="list-text">设置 K8s `volumesnapshotclass` ：创建卷快照之前，请先执行<block ref="cba124de563550c68e57cf9a6641a5d1" category="inline-link-rx"></block> 必须已设置。为 Azure NetApp Files 创建卷快照类，并使用它通过 NetApp Snapshot 技术实现 ML 版本控制。create `volumesnapshotclass netapp-csI-snapclass` 并将其设置为 default `volumesnapshotclass `，如下所例：</block>
  <block id="adc3a39a071327998da9cc6708ef4fe8" category="paragraph"><block ref="adc3a39a071327998da9cc6708ef4fe8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="770bec683fa99c1a917babb074d95e66" category="list-text">使用以下命令检查是否已创建卷 Snapshot 副本类：</block>
  <block id="99b5a364457d91999df6ca6488b800f2" category="paragraph"><block ref="99b5a364457d91999df6ca6488b800f2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2d9a6cca62c9095cbae70692ef82741c" category="section-title">运行： AI 安装</block>
  <block id="d1d2b81816d977b7a9d3480a495beda5" category="paragraph">要安装 run ： ai ，请完成以下步骤：</block>
  <block id="7899a1a12ecf76a5676a6d5ddb64842f" category="inline-link">在 AKS 上安装 run ： ai 集群</block>
  <block id="54437101a8cdfe297499d517331ced60" category="list-text"><block ref="400679f1b873ae4a832f018613d486cc" category="inline-link-rx"></block>。</block>
  <block id="5f854e827ba37f66f45f8e47643e23ea" category="list-text">转至 app.runai.ai ，单击创建新项目，然后将其命名为 LAN-detection 。它将在 K8s 集群上创建一个命名空间，其开头为 `runai` - ，后跟项目名称。在这种情况下，创建的命名空间将为 runai-lane 检测。</block>
  <block id="e699d582d1b58a9a23ebd74cab11d5bc" category="paragraph"><block ref="e699d582d1b58a9a23ebd74cab11d5bc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="546524b2c8ed6fd083c9286159ebd55a" category="inline-link">安装 run ： ai 命令行界面</block>
  <block id="f3a9807f54199fd5dbad651af2ea853a" category="list-text"><block ref="6291ffcd5a23a3d0b996bc90930ef0b3" category="inline-link-rx"></block>。</block>
  <block id="08d1d73b27232763a82ef46a413779ce" category="list-text">在您的终端上，使用以下命令将通道检测设置为默认运行： AI project ：</block>
  <block id="0ca589f93fd9565aa5fc097fd66437ae" category="paragraph"><block ref="0ca589f93fd9565aa5fc097fd66437ae" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4cd1a85dd18a7a0b8f1d07b4240fafcf" category="list-text">为项目命名空间创建 ClusterRole 和 ClusterRoleBinding （例如， `LANE-detection ）` 因此，属于 `runai-lan-detection` namespace 的默认服务帐户有权在作业执行期间执行 `volumesnapshot` 操作：</block>
  <block id="351495b134e625df33dfb5230d6eab7b" category="list-text">使用以下命令列出命名空间以检查 `runai-lan-detection` 是否存在：</block>
  <block id="bd546162071f28fd50f8c977ac61149e" category="paragraph">输出应类似于以下示例：</block>
  <block id="8c33c9910dfecb6260489cd05f43b275" category="paragraph"><block ref="8c33c9910dfecb6260489cd05f43b275" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f23930532ba19f8970c6dcb4b6ad778f" category="list-text">使用以下命令创建 ClusterRole `netappsnapshot` 和 ClusterRoleBinding`netappsnapshot` ：</block>
  <block id="7e3ec6f763cd8a13380162aba60c47e0" category="section-title">下载并将 TuSimple 数据集作为 run ： ai 作业处理</block>
  <block id="c0cc307d9f63d0a096f8d6e3193cd561" category="paragraph">下载并处理运行时的 TuSimple 数据集的过程： AI 作业是可选的。其中包括以下步骤：</block>
  <block id="52eeaf7bac6d3e2111d129a11d0bafed" category="list-text">构建并推送 Docker 映像，或者如果要使用现有 Docker 映像（例如， `muneer7589/download-tusimple ： 1.0 ）` ，则省略此步骤</block>
  <block id="0d5647db76048e129c1146a822abbdd8" category="list-text">切换到主目录：</block>
  <block id="02c403c221afbdccdc4f7182e2eb5cb7" category="list-text">转到项目的数据目录 `lan-detect-scnan-horovod` ：</block>
  <block id="eed104c2f8af7c3526ec55b8cc69dde7" category="list-text">修改 `build_image.sh` shell 脚本并将 Docker 存储库更改为您的。例如，将 `muneer7589` 替换为 Docker 存储库名称。您还可以更改 Docker 映像名称和标记（例如 `download-tusimple` 和 `1.0` ）：</block>
  <block id="689ff7d72d2cc0f0d595b0c8ace1cdfa" category="paragraph"><block ref="689ff7d72d2cc0f0d595b0c8ace1cdfa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6ed49e04589e6c9071bbd1af307f83a0" category="list-text">运行脚本以构建 Docker 映像，并使用以下命令将其推送到 Docker 存储库：</block>
  <block id="8ebf5e70d0ed304519c7c9b525d80af1" category="list-text">提交运行： AI 作业，以下载，提取，预处理并将 Tubple 通道检测数据集存储在一个 `PVC` 中，该 PVC 由 NetApp Trident 动态创建：</block>
  <block id="050d58b165aef32cad86839521b721b2" category="list-text">使用以下命令提交运行： AI 作业：</block>
  <block id="83b4fb868b7505e293871c3e5accc98c" category="list-text">输入下表中的信息以提交运行： AI 作业：</block>
  <block id="e50d72d773874b2be58530daec43900c" category="cell">name</block>
  <block id="37e9bb74490b0ac510effff5a546f11d" category="cell">作业的名称</block>
  <block id="5503ed8f71ae365eb6f5e8221562a0eb" category="cell">-pvc</block>
  <block id="626299ff067d1e6a178beced1631ab43" category="cell">PVC 格式为 [StorageClassName] ： size ： ContainerMountPath 在上述作业提交中，您正在使用具有存储类 azurenetappfiles 的 Trident 根据需要创建 PVC 。此处的永久性卷容量为 100Gi ，并挂载在路径 /mnt 处。</block>
  <block id="0247d7fb481075907b9eb467cfe90e3a" category="cell">图像</block>
  <block id="b30f1ca8b35fd6ccab829a959f414a51" category="cell">创建此作业的容器时要使用的 Docker 映像</block>
  <block id="22a55ba6c8590fa98f1b3234141f2848" category="paragraph"><block ref="22a55ba6c8590fa98f1b3234141f2848" category="inline-image-macro-rx" type="image"></block></block>
  <block id="af270e479cd849e4a9cb6d17b76585ef" category="list-text">列出已提交的运行： AI 作业。</block>
  <block id="f740410b6ea33d3ffc740140cc23a0e2" category="paragraph"><block ref="f740410b6ea33d3ffc740140cc23a0e2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="51869a860c4af748ec2815d406929a17" category="list-text">检查提交的作业日志。</block>
  <block id="ab353387b0e5276e03aecae4cc95d150" category="paragraph"><block ref="ab353387b0e5276e03aecae4cc95d150" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d84dd51baa0cf15db0a639dbb6d5d8ee" category="list-text">列出已创建的 `PVC` 。在下一步中使用此 `PVC` 命令进行培训。</block>
  <block id="cc2e05fe54a847aee415a2deb0b7f13e" category="paragraph"><block ref="cc2e05fe54a847aee415a2deb0b7f13e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b20e4749f78095f0b9adf5c3cad36f81" category="list-text">在 run ： ai UI （或 `app.run.ai` ）中检查作业。</block>
  <block id="ced39410c19f3968638fc81e16743f32" category="paragraph"><block ref="ced39410c19f3968638fc81e16743f32" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3dee54cb181d3bfde644600fb15bbac4" category="section-title">使用 Horovod 执行分布式通道检测培训</block>
  <block id="645e2c981858a720c673c6a782efd9ea" category="paragraph">使用 Horovod 执行分布式通道检测培训是一个可选过程。但是，需要执行以下步骤：</block>
  <block id="04e568eec6dda4a0cfb1fc6680509d35" category="list-text">构建并推送 Docker 映像，或者如果要使用现有 Docker 映像（例如， `muneer7589/dist-lan-detection ： 3.1 ），请跳过此步骤：`</block>
  <block id="b01fdc5088b4a04549ed5e7cc71f898b" category="list-text">切换到主目录。</block>
  <block id="14e21ef8495bc1dd543db0aebbe06c5b" category="list-text">转到项目目录 `lan-detect-scnan-horovod.`</block>
  <block id="0a27aa824e245e7b31f5f8d990636ead" category="list-text">修改 `build_image.sh` shell 脚本并将 Docker 存储库更改为您的（例如，将 `muneer7589` 替换为您的 Docker 存储库名称）。您也可以更改 Docker 映像名称和标记（例如， `dist-lan-detection` 和 `3.1 ）` 。</block>
  <block id="c9ce95c3d4cf96d5e894e4a834754cb6" category="paragraph"><block ref="c9ce95c3d4cf96d5e894e4a834754cb6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2776d43d1e635424496622f14cfd745c" category="list-text">运行脚本以构建 Docker 映像并推送到 Docker 存储库。</block>
  <block id="b9bcfd06c5cdfc67a00ffe8a0c846318" category="list-text">提交 Run ： AI 作业以执行分布式培训（ MPI ）：</block>
  <block id="f3b76b64a9761cfb85f0ddc37d910fef" category="list-text">使用提交运行： AI 在上一步中自动创建 PVC （用于下载数据）仅允许您访问 RW ，这样不允许多个 Pod 或节点在分布式培训中访问同一 PVC 。将访问模式更新为 ReadWriteMany ，然后使用 Kubernetes 修补程序执行此操作。</block>
  <block id="2874172b683ddc4047fd63f29baf543d" category="list-text">首先，运行以下命令以获取 PVC 的卷名称：</block>
  <block id="bcc0952c2970bfd6c85cd65050e00533" category="paragraph"><block ref="bcc0952c2970bfd6c85cd65050e00533" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f64ac0e4e6343f4593e210b98f9c91de" category="list-text">修补卷并将访问模式更新为 ReadWriteMany （在以下命令中将卷名称替换为您的）：</block>
  <block id="7a9d347cf2f324e82478a9cf243448f7" category="list-text">使用下表中的信息提交运行： AI MPI 作业以执行分布式培训` 作业：</block>
  <block id="b068931cc450442b63f5b3d276ea4297" category="cell">name</block>
  <block id="e4580c1854231c935f0cf2eb4609d97a" category="cell">分布式培训作业的名称</block>
  <block id="384dd16a327b7f16278642f008c27fab" category="cell">大型 shm</block>
  <block id="fc9fed4d0a3cb207102499ba041f2603" category="cell">挂载大型 /dev/shm 设备这是一个挂载在 RAM 上的共享文件系统，可为多个 CPU 工作人员提供足够大的共享内存来处理批处理并将其加载到 CPU RAM 中。</block>
  <block id="530968b205d33b3869aa32e2933fbfad" category="cell">流程</block>
  <block id="403e4aa48fedb1c5777ee913b2f2bedb" category="cell">分布式培训流程的数量</block>
  <block id="0aa0be2a866411d9ff03515227454947" category="cell">GPU</block>
  <block id="031492a2d708ca774bd08c099eb4dd79" category="cell">要为此作业中的作业分配的 GPU/ 进程数，有三个 GPU 工作进程（ -processes=3 ），每个进程都分配有一个 GPU （ -GPU 1 ）</block>
  <block id="642542e40351edbd731ebad352b31317" category="cell">PVC</block>
  <block id="c50723a53a74a682495f8c3810ce4a65" category="cell">使用由先前作业（ download-tusimple 数据）创建并挂载到路径 /mnt 的现有永久性卷（ vpvc 下载 -tusimple 数据 0 ）</block>
  <block id="78805a221a988e79ef3f42d7c5bfd418" category="cell">图像</block>
  <block id="8c236f63f205a50942b609a6d45734a7" category="cell">定义要在容器中设置的环境变量</block>
  <block id="61dcf83940f915d0c5fe5b985eed7be8" category="cell">use_works.</block>
  <block id="f84e120605e14d9755a1ed2e8e03cea6" category="cell">如果将参数设置为 true ，则会启用多进程数据加载</block>
  <block id="90b186f5d2a6890e77373c8aa60461e7" category="cell">num_works.</block>
  <block id="a10574eb8e119b847fb5ab95b788e723" category="cell">数据加载程序工作进程的数量</block>
  <block id="61c67ea819106ff81c08249014791d3b" category="cell">batch_size</block>
  <block id="243f7fe32e2dbb7748c1a018fe60016e" category="cell">训练批大小</block>
  <block id="d07f4474a5e5996da9b6e57abb250331" category="cell">使用 VAL</block>
  <block id="919bc92a851c1d3e2c467e844398b751" category="cell">如果将参数设置为 true ，则可以进行验证</block>
  <block id="c4407b612c3b5e2c00c1b5522c686c84" category="cell">Val_batch_size</block>
  <block id="597765782da042e86019b4c919a86248" category="cell">验证批处理大小</block>
  <block id="18e0d33045db50bb37e6f2fcd5c0b842" category="cell">enable_snapshot</block>
  <block id="67c5deea68dff022b0f807ffb3bf56e2" category="cell">如果将参数设置为 true ，则可以为 ML 版本控制创建数据和经过培训的模型快照</block>
  <block id="cdd7dd1603420ef6c3efe7b264205137" category="cell">PVC_NAME</block>
  <block id="d95926771c9100db9ba3e3247c86a192" category="cell">要为其创建快照的 PVC 的名称。在提交的上述作业中，您将创建由数据集和经过培训的模型组成的 PVC-download-tusimple data-0 的快照</block>
  <block id="b302d66ab7f3f0c94236ff26c8ead4d9" category="inline-image-macro">错误：缺少图形映像</block>
  <block id="d52f66f6b7bb9cf3c7382d8ce6f6b9ea" category="paragraph"><block ref="d52f66f6b7bb9cf3c7382d8ce6f6b9ea" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3299ed00d03beff0cc2ebaf178a91786" category="list-text">列出已提交的作业。</block>
  <block id="2e593aa2ccf62807184e56a543d23e97" category="paragraph"><block ref="2e593aa2ccf62807184e56a543d23e97" category="inline-image-macro-rx" type="image"></block></block>
  <block id="82abe908a319245230ef0f3ec84c263f" category="list-text">已提交作业日志：</block>
  <block id="dab56217fc48a1919fee48434a7c7204" category="paragraph"><block ref="dab56217fc48a1919fee48434a7c7204" category="inline-image-macro-rx" type="image"></block></block>
  <block id="981528b0e4cd4a19c56310c6b9c915ce" category="list-text">查看 Run 中的培训作业： AI GUI （或 app.runai.ai): run ： AI Dashboard ，如下图所示。第一个图详细介绍了为分布在 AKS 三个节点上的分布式培训作业分配的三个 GPU ，以及第二个运行： AI 作业：</block>
  <block id="d8cbd4299e4baf5de5572bf6af32dd52" category="paragraph"><block ref="d8cbd4299e4baf5de5572bf6af32dd52" category="inline-image-macro-rx" type="image"></block></block>
  <block id="90fdc4068f0b660d1d6b102946986bd1" category="paragraph"><block ref="90fdc4068f0b660d1d6b102946986bd1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9e8bb0b427c33dd6cf63d1a3a37c7022" category="list-text">完成培训后，请检查创建的 NetApp Snapshot 副本，并将其与 run ： ai 作业链接在一起。</block>
  <block id="6c94f812a836696605e3e2b6bd5ca768" category="paragraph"><block ref="6c94f812a836696605e3e2b6bd5ca768" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e4c0a1395081fc81855e465c493f4967" category="section-title">从 NetApp Snapshot 副本还原数据</block>
  <block id="ec8de1dcfce51c9d877901e2f6f5971e" category="paragraph">要从 NetApp Snapshot 副本还原数据，请完成以下步骤：</block>
  <block id="5adc4d7860e7ad0f78ada0bb1f0eaca6" category="list-text">转到项目目录 `lan-detect-scnan-horovod` 。</block>
  <block id="6344772f26907403fed713060f33b8f4" category="list-text">修改 `restore-snaphot-vc.yaml` 并将 `dataSource` `name` 字段更新到要从中还原数据的 Snapshot 副本。您也可以更改要将数据还原到的 PVC 名称，在此示例中为其 `restored-tusimple` 。</block>
  <block id="b3b5448c329ac882bc890a1be1a1b369" category="paragraph"><block ref="b3b5448c329ac882bc890a1be1a1b369" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8f8efb3d1b86c88cfab193291776b6ad" category="list-text">使用 `restore-snapshot-vc.yaml` 创建新的 PVC 。</block>
  <block id="34c7c2e95019754701182fe2ab194499" category="paragraph"><block ref="34c7c2e95019754701182fe2ab194499" category="inline-image-macro-rx" type="image"></block></block>
  <block id="070856555a817dbf9a4061542b2098ca" category="list-text">如果您要使用刚刚还原的数据进行培训，则作业提交将保持不变；在提交培训作业时，只需将 `vc_name` 替换为已还原的 `vc_name` ，如以下命令所示：</block>
  <block id="e945ddc4d35a9c49a17bd00c53db05a6" category="section-title">性能评估</block>
  <block id="3451b157ef07ae84bfaba5fb6639c1ba" category="paragraph">为了显示解决方案的线性可扩展性，我们对以下两种情形进行了性能测试：一个 GPU 和三个 GPU 。在有关 TuSimple 通道检测数据集的培训中，我们捕获了 GPU 分配， GPU 和内存利用率，不同的单节点和三节点指标。为了分析培训过程中的资源利用率，数据增加了五倍。</block>
  <block id="b8077d533d2f9918c47d330cbac4392d" category="inline-link-macro">Azure NetApp Files 服务级别</block>
  <block id="da9b7dc2993c3c848d5d9a9a15806d8c" category="paragraph">借助解决方案，客户可以从一个小型数据集和几个 GPU 入手。当数据量和 GPU 需求增加时，客户可以动态地横向扩展标准层中的 TB ，并快速扩展到高级层，从而在不移动任何数据的情况下获得每 TB 吞吐量的四倍。本节将进一步介绍此过程。 <block ref="bdbab4daa7de478307acc7147c869853" category="inline-link-macro-rx"></block>。</block>
  <block id="090a231c840a0cb23aa29c8d1afc7832" category="paragraph">一个 GPU 的处理时间为 12 小时 45 分钟。三个节点上的三个 GPU 的处理时间约为 4 小时 30 分钟。</block>
  <block id="49eca64b9f03702167beb48ebd38587b" category="paragraph">本文档其余部分中显示的图说明了根据各个业务需求提供的性能和可扩展性示例。</block>
  <block id="abfc10c2bc00a990735e6d27797295a8" category="paragraph">下图显示了 1 个 GPU 分配和内存利用率。</block>
  <block id="8d7e3abab70510c3f4636ff7bf953250" category="paragraph"><block ref="8d7e3abab70510c3f4636ff7bf953250" category="inline-image-macro-rx" type="image"></block></block>
  <block id="31a3d2def4927574922946c38f043c0b" category="paragraph">下图显示了单节点 GPU 利用率。</block>
  <block id="58cf0f270760f08ac96254402d0696dc" category="paragraph"><block ref="58cf0f270760f08ac96254402d0696dc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dcca9cfd87d9f2087d720ef187655cea" category="paragraph">下图显示了单节点内存大小（ 16 GB ）。</block>
  <block id="e22d39f2830d0f3e3944644d0f605d41" category="paragraph"><block ref="e22d39f2830d0f3e3944644d0f605d41" category="inline-image-macro-rx" type="image"></block></block>
  <block id="576c0843e21d5ee884a067aa7b6a1a40" category="paragraph">下图显示了单节点 GPU 计数（ 1 ）。</block>
  <block id="ef855771be83c072ebaafc60d2d1933f" category="paragraph"><block ref="ef855771be83c072ebaafc60d2d1933f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a2c50f1b8fc86c36cc0df94dd14b46b9" category="paragraph">下图显示了单节点 GPU 分配（ % ）。</block>
  <block id="e295f84458327d01315b814d8deb2aea" category="paragraph"><block ref="e295f84458327d01315b814d8deb2aea" category="inline-image-macro-rx" type="image"></block></block>
  <block id="54b2b7f256373eac14419bfec5b84b21" category="paragraph">下图显示了三个节点上的三个 GPU — GPU 分配和内存。</block>
  <block id="e763ef0e4b7cb9d022bf6db49319c570" category="paragraph"><block ref="e763ef0e4b7cb9d022bf6db49319c570" category="inline-image-macro-rx" type="image"></block></block>
  <block id="94ab4242b167972f7a9f0513ca772555" category="paragraph">下图显示了三个节点的三个 GPU 利用率（ % ）。</block>
  <block id="d786146ae56597413fa5be548126cda9" category="paragraph"><block ref="d786146ae56597413fa5be548126cda9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="45c31ecb239228cac5e96860d42f9a4d" category="paragraph">下图显示了三个节点的三个 GPU 内存利用率（ % ）。</block>
  <block id="2224958fd5113068ac8a3b55a336661b" category="paragraph"><block ref="2224958fd5113068ac8a3b55a336661b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="79f05e8f99917560625d1cf3f2d4fc5d" category="inline-link">服务级别</block>
  <block id="07c1fda2408980b5d53ea06ad3cc5ed1" category="paragraph">您可以通过将现有卷移动到使用的另一个容量池来更改此卷的服务级别<block ref="bc9fbd5fd43d884f02abe6a6f9b51339" category="inline-link-rx"></block> 所需的卷。此卷的现有服务级别更改不需要迁移数据。它也不会影响对卷的访问。</block>
  <block id="5e2ff0b5dc3206032a81aa3aecb7c462" category="section-title">动态更改卷的服务级别</block>
  <block id="58e691ddc6184f73e5d6b513ca5a3c49" category="paragraph">要更改卷的服务级别，请执行以下步骤：</block>
  <block id="3f19b438418ed162387a3050b304c89b" category="list-text">在卷页面上，右键单击要更改其服务级别的卷。选择更改池。</block>
  <block id="5acf521dbc5099b2ec33a64efac89595" category="paragraph"><block ref="5acf521dbc5099b2ec33a64efac89595" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6533c4186062235d8b7f47e232e92597" category="list-text">在更改池窗口中，选择要将卷移动到的容量池。然后，单击确定。</block>
  <block id="3f0874d07ce6ae728a6dcdda7903f9cd" category="paragraph"><block ref="3f0874d07ce6ae728a6dcdda7903f9cd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cb935c59f24539e0966b7ab5c761e862" category="section-title">自动执行服务级别更改</block>
  <block id="1391028ed384c93fd59fd5a0097f9181" category="paragraph">动态服务级别更改当前仍在公有预览中，但默认情况下不会启用。要在 Azure 订阅上启用此功能，请按照文档 " 中提供的步骤进行操作<block ref="5c3671452d40598396b030d5c9c6dc27" category="inline-link-rx"></block>。 "</block>
  <block id="407443b5508c517acd825fbcddb7ab4c" category="inline-link">AZ netappfiles volume ：管理 Azure NetApp Files （ ANF ）卷资源</block>
  <block id="1d3afb31c5d2a81fca940ae760671a1c" category="list-text">您还可以对 Azure 使用以下命令： CLI 。有关更改 Azure NetApp Files 的池大小的详细信息，请访问<block ref="8b45caafcc8d758d5c37edb19f8a2761" category="inline-link-rx"></block>。</block>
  <block id="ebd5b070cb8457b94f1916baa92c3c7d" category="inline-link">更改 Azure NetApp Files 卷的池</block>
  <block id="d5460fd5fbfbf643b9a4bc1d1de279d0" category="list-text">此处显示的 `set- aznetappfilesvolumepool` cmdlet 可更改 Azure NetApp Files 卷的池。有关更改卷池大小和 Azure PowerShell 的详细信息，请访问<block ref="70c8d95cde8b63eae0d37a8b81a31482" category="inline-link-rx"></block>。</block>
  <block id="092bf78f9c97ba171b8232ddff585392" category="doc">追加信息</block>
  <block id="5d0aa08463cc39f7dc14214337937d52" category="list-text">NetApp HCI 操作理论</block>
  <block id="0fd4a543c47c8cb8d0a257536b0491c8" category="paragraph"><block ref="0fd4a543c47c8cb8d0a257536b0491c8" category="inline-link-rx"></block></block>
  <block id="f8bf3ad3550f95af891e242fcfff7b8a" category="paragraph">docs.netapp.com</block>
  <block id="c76a63ad897283241a7c20a166849bc6" category="list-text">NetApp HCI 解决方案目录文档</block>
  <block id="4c43c2661f42bcac78c204cb8a2131f6" category="inline-link"><block ref="4c43c2661f42bcac78c204cb8a2131f6" category="inline-link-rx"></block></block>
  <block id="d0040181b5717d326d3603f3e23efddd" category="paragraph"><block ref="d0040181b5717d326d3603f3e23efddd" category="inline-link-rx"></block></block>
  <block id="25e84aaf6e9470a91a17fe2a5c223942" category="list-text">HCI 资源页面</block>
  <block id="a66aa9b7d598e7491e3e6b352f6a1dd8" category="inline-link"><block ref="a66aa9b7d598e7491e3e6b352f6a1dd8" category="inline-link-rx"></block></block>
  <block id="790c7f9d7329e5a59904635005b38347" category="paragraph"><block ref="790c7f9d7329e5a59904635005b38347" category="inline-link-rx"></block></block>
  <block id="38852aa443ea245ae2c3c9f2d87c8744" category="inline-link"><block ref="38852aa443ea245ae2c3c9f2d87c8744" category="inline-link-rx"></block></block>
  <block id="9860542f9b08c724309d765bf2cf5660" category="paragraph"><block ref="9860542f9b08c724309d765bf2cf5660" category="inline-link-rx"></block></block>
  <block id="b8fda4ecbc2576b0482d1aa6ea092aa8" category="inline-link"><block ref="b8fda4ecbc2576b0482d1aa6ea092aa8" category="inline-link-rx"></block></block>
  <block id="88b5294bc0799ee1a4abce881e5f1a39" category="paragraph"><block ref="88b5294bc0799ee1a4abce881e5f1a39" category="inline-link-rx"></block></block>
  <block id="d1949872a474d66f787b7785606be969" category="paragraph"><block ref="d1949872a474d66f787b7785606be969" category="inline-link-rx"></block></block>
  <block id="87785ec5d2558614c0a647efe09ca64f" category="inline-link"><block ref="87785ec5d2558614c0a647efe09ca64f" category="inline-link-rx"></block></block>
  <block id="99470c7c54184b33dd38da31b112d7a2" category="paragraph"><block ref="99470c7c54184b33dd38da31b112d7a2" category="inline-link-rx"></block></block>
  <block id="7661400c51b9fc184bdec46eb5577ff9" category="doc">从 GitHub 获取代码</block>
  <block id="1a3652d661d6b73b6aa57aff1fa5e4d4" category="paragraph">既然 NetApp Cloud Volume 或 NetApp Trident 卷可供 Iguazio 集群和开发人员环境使用，您就可以开始查看该应用程序了。</block>
  <block id="ae53ae826cc9a587fbaee0e834dd75ca" category="paragraph">用户拥有自己的工作空间（目录）。在每个笔记本电脑上，用户目录的路径为 ` /User` 。Iguazio 平台负责管理目录。如果按照上述说明进行操作，则可以在 ` /NetApp` 目录中找到 NetApp Cloud 卷。</block>
  <block id="754e85a9ea7f4fbb718080a73790abdb" category="paragraph">使用 Jupyter 终端从 GitHub 获取代码。</block>
  <block id="1d706cc291efb1d79274befd6f9dd64c" category="paragraph"><block ref="1d706cc291efb1d79274befd6f9dd64c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="12d0e4b8ba8db4e6a7aa1dda942a1ed4" category="paragraph">在 Jupyter 终端提示符处，克隆项目。</block>
  <block id="d4095d9e0ab52b6d683ace00b5cbea55" category="paragraph">现在，您应在 Jupyter 工作空间的文件树中看到 `NetOps" - "NetApp` " 文件夹。</block>
  <block id="f8161ff446bbd6f76b0d99d6f34a1d7f" category="inline-link-macro">下一步：配置工作环境</block>
  <block id="48dd929a2f5f248856ce2768950aff4e" category="paragraph"><block ref="48dd929a2f5f248856ce2768950aff4e" category="inline-link-macro-rx"></block></block>
  <block id="2e52c56d063752bbfeda9c8f9d2fee41" category="summary">此页面介绍了在 Kubernetes 集群中安装和配置 NetApp Trident 时必须完成的任务。</block>
  <block id="7c4090c7fa7a91e8c7fed182401dbf6b" category="doc">NetApp Trident 部署和配置</block>
  <block id="e539ec743b02403b5ba74b884d117a5a" category="paragraph">本节介绍在 Kubernetes 集群中安装和配置 NetApp Trident 时必须完成的任务。</block>
  <block id="d6c3cdbd20fe8752d1f443bdb84038e3" category="list-text">您已有一个有效的 Kubernetes 集群，并且正在运行 Trident 支持的 Kubernetes 版本。有关支持的版本列表，请参见<block ref="e6b3671f5db59046617458d31ef4f50b" category="inline-link-rx"></block>。</block>
  <block id="14ede02439184c7c75e53410ffa40370" category="list-text">您已有一个可正常工作的 NetApp 存储设备，软件定义的实例或云存储服务， Trident 支持此服务。</block>
  <block id="984b69562391cb8032fd50ded03a29a6" category="paragraph">要在 Kubernetes 集群中安装和配置 NetApp Trident ，请从部署跳转主机执行以下任务：</block>
  <block id="07d8795f785e6495307106596d07402e" category="list-text">使用以下方法之一部署 Trident ：</block>
  <block id="040d3466a6f1c45ca2e523c9354dfdc7" category="inline-link">Trident 部署说明</block>
  <block id="bb6989644edf59b8c5e0de0c25b6f8b6" category="list-text">如果您使用 NVIDIA DeepOps 部署 Kubernetes 集群，则也可以使用 NVIDIA DeepOps 在 Kubernetes 集群中部署 Trident 。要使用 DeepOps 部署 Trident ，请按照<block ref="77e542aaaac8c5d2482c94ca2d79c997" category="inline-link-rx"></block> 在 NVIDIA DeepOps GitHub 站点上。</block>
  <block id="014e85e7f3bbdad1ad6f193e82d21755" category="inline-link">部署说明</block>
  <block id="b6463ef77c88b4c74dd6c4b1479d1bae" category="list-text">如果您未使用 NVIDIA DeepOps 部署 Kubernetes 集群，或者您只是希望手动部署 Trident ，则可以按照部署 Trident<block ref="73e6be38c8ff1e0c58865c34876a2e98" category="inline-link-rx"></block> 在 Trident 文档中。请务必至少创建一个 Trident 后端和一个 Kubernetes StorageClass 。有关后端和 StorageClasses 的详细信息，请参见<block ref="e6b3671f5db59046617458d31ef4f50b" category="inline-link-rx"></block>。</block>
  <block id="7cfdcb466d040b6c8f9c85e9981b9652" category="inline-link-macro">适用于 ONTAP AI 部署的 Kubernetes Storageclasses 示例</block>
  <block id="180b707bbdd9c2fc8001a966c6c7d029" category="admonition">如果要在 ONTAP AI POD 上部署 NetApp AI 控制平台解决方案，请参见 <block ref="5ce2b96729b1637e197bdd36eb4db4ee" category="inline-link-macro-rx"></block> 有关您可能希望创建和的不同 Trident 后端的一些示例，请参见 <block ref="d495c2f5a68f6923824470c0096419c8" category="inline-link-macro-rx"></block> 有关可能要创建的不同 Kubernetes StorageClasses 的一些示例，请参见。</block>
  <block id="7939cabf4707d25b4d69e5973b083fd1" category="inline-link-macro">接下来： ONTAP AI 部署的 Trident 后端示例</block>
  <block id="aa36a03510d1480c0db7e6824569b7b3" category="paragraph"><block ref="aa36a03510d1480c0db7e6824569b7b3" category="inline-link-macro-rx"></block></block>
  <block id="fe8fc7ed6b0b67e37e1a6484466e9c74" category="paragraph">本节介绍使用 NetApp HCI 部署 AI 推理平台所需的步骤。以下列表提供了设置中涉及的高级任务：</block>
  <block id="8bfafa363cff6efe35cd7c37f7fd130d" category="inline-link-macro">配置网络交换机</block>
  <block id="42bd58c974a3fc09ae2cc916c482a7e7" category="list-text"><block ref="42bd58c974a3fc09ae2cc916c482a7e7" category="inline-link-macro-rx"></block></block>
  <block id="52590ee35291ee9ad581e8b7d6cc385f" category="inline-link-macro">使用 NDE 在 NetApp HCI 上部署 VMware 虚拟基础架构</block>
  <block id="f210475d606104d2d8d007434b3726e0" category="list-text"><block ref="f210475d606104d2d8d007434b3726e0" category="inline-link-macro-rx"></block></block>
  <block id="90f6db543d3bc4ee7b932daa5a4f1907" category="inline-link-macro">将 H615c 计算节点配置为用作 K8 辅助节点</block>
  <block id="c202f2dc37d7e3aebab1c4c9399eb801" category="list-text"><block ref="c202f2dc37d7e3aebab1c4c9399eb801" category="inline-link-macro-rx"></block></block>
  <block id="1fff493bdb7512495b90a6e54e934987" category="inline-link-macro">设置部署跳转 VM 和 K8 主 VM</block>
  <block id="2d5a0a9b82f02e04a08adb0ff2e673b2" category="list-text"><block ref="2d5a0a9b82f02e04a08adb0ff2e673b2" category="inline-link-macro-rx"></block></block>
  <block id="351bf4d213c8fffed76e7fab8249e4f8" category="inline-link-macro">使用 NVIDIA DeepOps 部署 Kubernetes 集群</block>
  <block id="48abb7cbaecbd8d7baa621c5d2f03b64" category="list-text"><block ref="48abb7cbaecbd8d7baa621c5d2f03b64" category="inline-link-macro-rx"></block></block>
  <block id="77d8798f6575f1eb9026a30844809d3c" category="inline-link-macro">在虚拟基础架构中部署 ONTAP Select</block>
  <block id="7fc5b298e5e1bd479c45ef65f170025d" category="list-text"><block ref="7fc5b298e5e1bd479c45ef65f170025d" category="inline-link-macro-rx"></block></block>
  <block id="6b9c492658c0ad55eb887ed1ad51c825" category="inline-link-macro">部署 NetApp Trident</block>
  <block id="1b93c2263298765faeae991817a49e0a" category="list-text"><block ref="1b93c2263298765faeae991817a49e0a" category="inline-link-macro-rx"></block></block>
  <block id="cdd2cf05258d64baa98b70f86e82c160" category="inline-link-macro">部署 NVIDIA Triton 推理服务器</block>
  <block id="802078590455074c6e6a5f519f7a9277" category="list-text"><block ref="802078590455074c6e6a5f519f7a9277" category="inline-link-macro-rx"></block></block>
  <block id="fade40458b4da38679a1a8520a3e33da" category="inline-link-macro">为 Triton 推理服务器部署客户端</block>
  <block id="cf6e5acef9f43ce3562bad72421accb3" category="list-text"><block ref="cf6e5acef9f43ce3562bad72421accb3" category="inline-link-macro-rx"></block></block>
  <block id="3adf31bd24ed89a5b60c98cc2e0f4cde" category="inline-link-macro">从 Triton 推理服务器收集推理指标</block>
  <block id="e8fdfa6b63645c569e5dd9260b5a8af5" category="list-text"><block ref="e8fdfa6b63645c569e5dd9260b5a8af5" category="inline-link-macro-rx"></block></block>
  <block id="13e8f52d7e19f83d3e64003c58ea220b" category="doc">使用 NDE 在 NetApp HCI 上部署 VMware 虚拟基础架构（自动化部署）</block>
  <block id="2635318d9bf1ea76c73bfab7f3eeafb7" category="section-title">NDE 部署前提条件</block>
  <block id="f6ec2c1aa5118cb19e89af5a10ecb65c" category="inline-link">NetApp HCI 前提条件检查清单</block>
  <block id="2187fc20798cda55150d8c067fac10be" category="paragraph">请参见<block ref="c760383d1767df51ab118e6ffc289894" category="inline-link-rx"></block> 在开始部署之前查看 NetApp HCI 的要求和建议。</block>
  <block id="cd02d0868a7414dd1e76924b30b82b52" category="list-text">网络和交换机要求和配置</block>
  <block id="1d8b6c167080876dff9ad2e74e70fecf" category="list-text">准备所需的 VLAN ID</block>
  <block id="17cec09f14c225b5f27dc73542e9077a" category="list-text">交换机配置</block>
  <block id="4d40082ed807aa2fb7e1d2f03921e4d4" category="list-text">NetApp HCI 和 VMware 的 IP 地址要求</block>
  <block id="2e8e4792043f43cb4b34a84b8dcd909b" category="list-text">DNS 和保留时间要求</block>
  <block id="829710d6ec2a8e59e7a69fb3537ec494" category="list-text">最后准备工作</block>
  <block id="fb720b4ad7c03710e0e5771c9fb58b44" category="section-title">NDE 执行</block>
  <block id="cf50c81e30d1d64fcb4992a9792abedb" category="paragraph">在执行 NDE 之前，您必须完成所有组件的机架和堆栈，网络交换机的配置以及所有前提条件的验证。如果您计划允许 NDE 自动配置所有地址，则可以通过连接到单个存储节点的管理地址来执行 NDE 。</block>
  <block id="130c61c344b6fbf262b6f63818eab7e4" category="paragraph">NDE 执行以下任务以使 HCI 系统联机：</block>
  <block id="d89f68a2ec388fe5d72fb6fe024a0176" category="list-text">至少在两个存储节点上安装存储节点（ NetApp Element 软件）。</block>
  <block id="f6f86c1086573c7daeb1f48535041576" category="list-text">至少在两个计算节点上安装 VMware 虚拟机管理程序。</block>
  <block id="0718265bec3e2ee6fc9d5e0773b5ff60" category="list-text">安装 VMware vCenter 以管理整个 NetApp HCI 堆栈。</block>
  <block id="e09575b9713329ebe2480dbf404b2b1b" category="list-text">安装和配置 NetApp 存储管理节点（ mNode ）和 NetApp 监控代理。</block>
  <block id="dddc28f734d0bcb367638f51ef8b4dfa" category="admonition">此验证使用 NDE 自动配置所有地址。您也可以在环境中设置 DHCP ，或者为每个存储节点和计算节点手动分配 IP 地址。本指南不会介绍这些步骤。</block>
  <block id="dd9cd526f5753b79bda6de19f1a66fe9" category="paragraph">如前所述，此验证对计算节点使用双缆线配置。</block>
  <block id="32691d86c49e682187776e0262b732d7" category="paragraph">本文档不介绍 NDE 的详细步骤。</block>
  <block id="968a3687be335c74374e73712c63e2e4" category="inline-link">部署指南</block>
  <block id="8b6e1a3a9d21ff63520793416432cd56" category="paragraph">有关完成基础 NetApp HCI 平台部署的分步指导，请参见<block ref="7742239770a3accee30f01673a1a43a5" category="inline-link-rx"></block>。</block>
  <block id="61ef02ded53524d506cd714c5821cd86" category="list-text">完成 NDE 后，登录到 vCenter 并创建一个分布式端口组 `NetApp HCI VDS 01-NFS_Network` ，以供 ONTAP Select 和应用程序使用。</block>
  <block id="9fb27fdce8d8c70b2c7b741958c8ac6e" category="inline-link-macro">下一步：配置 NetApp H615c （手动部署）</block>
  <block id="6623698128b1c14d8639f2404306f783" category="paragraph"><block ref="6623698128b1c14d8639f2404306f783" category="inline-link-macro-rx"></block></block>
  <block id="bd9091c7320e4b1069eed28f04839354" category="paragraph">在构建自己的 AI/ML 管道时，配置架构中组件的集成，管理，安全性和可访问性是一项极具挑战性的任务。让开发人员访问和控制其环境也带来了另一组挑战。</block>
  <block id="820423ca1ad0e872ef04cbb366b6e3de" category="paragraph">NetApp 与 Iguazio 的结合将这些技术作为托管服务整合在一起，加快了技术采用速度，并缩短了新 AI/ML 应用程序的上市时间。</block>
  <block id="b0a9c7dc36cb18f93679b833533b9936" category="paragraph"><block ref="b0a9c7dc36cb18f93679b833533b9936" category="inline-link-macro-rx"></block></block>
  <block id="6ffbf1c7e5984e1ccd7aa2ce768befb5" category="doc">配置 NetApp H615c （手动部署）</block>
  <block id="8ebafd40e8d33cc01be348bb02d61e1a" category="paragraph">在此解决方案中， NetApp H615c 计算节点配置为 Kubernetes 工作节点。推理工作负载托管在这些节点上。</block>
  <block id="f4755e51fb678051a595ad2847739942" category="paragraph">部署计算节点涉及以下任务：</block>
  <block id="a8c40d4ddd629f807cd3d3462060d4b1" category="list-text">安装 Ubuntu 18.04.4 LTS 。</block>
  <block id="60c2d3fd62a6c6407b303707c066451c" category="list-text">为数据和管理访问配置网络。</block>
  <block id="b52b260d02d39dbcb2fb8f5b37a41e63" category="list-text">准备用于 Kubernetes 部署的 Ubuntu 实例。</block>
  <block id="650edf91524a56b2b61d5339617f3de1" category="paragraph">要在 H615c 计算节点上安装操作系统，需要执行以下高级步骤：</block>
  <block id="37b78399d82335c619b0898c6907d660" category="inline-link">Ubuntu 版本</block>
  <block id="268104dcfde9c373f3b82ea23a7e11a7" category="list-text">从下载 Ubuntu 18.04.4 LTS<block ref="8047c88cc965ce289b84e9476db38dfd" category="inline-link-rx"></block>。</block>
  <block id="d9149b459a5b102318aea50ad8db09dc" category="list-text">使用浏览器连接到 H615c 节点的 IPMI 并启动远程控制。</block>
  <block id="812f672263f3a06cdc0c96068ede052b" category="list-text">使用虚拟介质向导映射 Ubuntu ISO 并开始安装。</block>
  <block id="05675405a6c45f7e29f6a12d71585c69" category="list-text">出现提示时，从两个物理接口中选择一个作为 `主网络接口` 。</block>
  <block id="bf76c8afe98c2828bfcedc2af976ec6e" category="paragraph">DHCP 源中的 IP 在可用时分配，您也可以稍后切换到手动 IP 配置。安装操作系统后，网络配置将修改为基于绑定的设置。</block>
  <block id="43f819014dd75db1dc4fd99f46dacdec" category="list-text">请提供一个主机名，后跟一个域名。</block>
  <block id="93d4447643b9229f5d7e6e755d5c9ba1" category="list-text">创建用户并提供密码。</block>
  <block id="f47aa9cd358934f7115a7a550c972cfd" category="list-text">根据您的要求对磁盘进行分区。</block>
  <block id="d81bcc53f5b27dd5acbb02f5ec7f7cc3" category="list-text">在 Software Selection 下，选择 `OpenSSH server` 并单击 Continue 。</block>
  <block id="d512ecec76aa43a3417c7b9f7ac216b3" category="list-text">重新启动节点。</block>
  <block id="100de709e50e7f8b5fdebcf927985039" category="section-title">为数据和管理访问配置网络</block>
  <block id="3fb35679b8232f4668352e97ae0556c2" category="paragraph">Kubernetes 工作节点的两个物理网络接口设置为用于管理和应用程序的绑定和 VLAN 接口，并在此接口上创建 NFS 数据流量。</block>
  <block id="fca5d67c48c3c731e6b0f33a8669d935" category="admonition">推理应用程序和关联容器使用应用程序网络进行连接。</block>
  <block id="1320cc1b360021056d5f813bfba57db7" category="list-text">以具有 root 权限的用户身份连接到 Ubuntu 实例的控制台，然后启动终端会话。</block>
  <block id="79fe1715746a49c0cc358266a8c7f92b" category="list-text">导航到 ` /etc/netplan` 并打开 `01-netcfg.yaml` 文件。</block>
  <block id="d182ed066c2804bd997322a65b968957" category="list-text">根据环境中管理，应用程序和 NFS 流量的网络详细信息更新网络计划文件。</block>
  <block id="4c6982b3c4513a315c99921325ea52fe" category="paragraph">此解决方案中使用了以下网络计划文件模板：</block>
  <block id="a33a58254163ef59fd090efbad79e313" category="list-text">确认路由策略的优先级低于主表和默认表的优先级。</block>
  <block id="474893024de2de53759d7c2bf1a67135" category="list-text">确保没有错误。</block>
  <block id="72032d7272970b4ccc235a4ebeea1b60" category="list-text">如果 Network Manager 正在运行，请停止并禁用它。</block>
  <block id="a2d94c79572c9ff891acc30740902f54" category="list-text">在 DNS 中为服务器添加主机记录。</block>
  <block id="a626dbe1fe567278bad58a45c678f677" category="list-text">打开一个 VI 编辑器以 ` /etc/iproute2/RT_Tables` 并添加这两个条目。</block>
  <block id="dd7e6418fc7ffb131366144b2245e0f7" category="list-text">将表编号与您在网络计划中使用的内容进行匹配。</block>
  <block id="74127838c81dafe517ab6e73d0aab836" category="list-text">打开一个 VI 编辑器并设置 ` /etc/sysctl.conf` ，然后设置以下参数的值。</block>
  <block id="b7fc8363ecb9ea67f7d443f55f7de566" category="list-text">重新启动系统</block>
  <block id="c325c37f92c6fc545d0c9340beaca1c9" category="list-text">对另一个 Ubuntu 实例重复步骤 1 到 13 。</block>
  <block id="cdaa1616a6f07584272e08ec44703a5f" category="inline-link-macro">下一步：设置部署跳转和 Kubernetes 主节点 VM （手动部署）</block>
  <block id="5b37e03a787f4ce598976226f4581e5a" category="paragraph"><block ref="5b37e03a787f4ce598976226f4581e5a" category="inline-link-macro-rx"></block></block>
  <block id="2fb227f90ebf269423fe0cf1a15b8111" category="doc">定义永久性卷声明</block>
  <block id="8f5da11015f2baf835f0e8b421c1cfe9" category="list-text">将以下 YAML 保存到文件中，以创建类型为 Basic 的 PVC 。</block>
  <block id="04c58cdb1d0c073dd558caf87f2b8ed1" category="list-text">将 YAML 文件应用于您的 Iguazio Kubernetes 集群。</block>
  <block id="f685fdfcc5aedb3ccc237a4020b69cd8" category="section-title">将 NetApp 卷附加到 Jupyter 笔记本电脑</block>
  <block id="dc4b8e255a77b2c73f89b702dbb7acc5" category="inline-link">Iguazio 应用程序服务和工具概述</block>
  <block id="11eb1e24a14c1d15ee5e287b4338b764" category="paragraph">Iguazio 提供多种托管服务，为数据科学家提供完整的端到端堆栈，用于开发和部署 AI/ML 应用程序。有关这些组件的详细信息，请参见<block ref="2cf4dcc22fda31f66959754df93d6196" category="inline-link-rx"></block>。</block>
  <block id="3591be3d07a4f8a37d218b9e92bea432" category="paragraph">其中一项托管服务是 Jupyter Notebook 。每个开发人员都可以使用开发所需的资源自行部署一个笔记本容器。要授予他们对 NetApp Cloud Volume 的访问权限，您可以将卷分配给容器，并在下图中显示了永久性卷声明的正在运行的用户和环境变量设置。</block>
  <block id="e0d870d503aeb797f7626b14c9acb4ae" category="paragraph">对于内部配置，您可以参见<block ref="7ccf7acaa308282d5274101157fd43e5" category="inline-link-rx"></block> 在 Trident 设置中启用 NetApp ONTAP 数据管理功能，例如为数据或模型创建 Snapshot 副本以进行版本控制。在 Trident 后端配置文件中添加以下行，以使 Snapshot 目录可见：</block>
  <block id="12ce9751e0e6d2a7d593d46e19211984" category="inline-link">Trident 命令</block>
  <block id="71f8fa2d01d0c5a2d9af72f90f65e379" category="paragraph">您必须以 JSON 格式创建 Trident 后端配置文件，然后运行以下命令<block ref="1dce3ee9e9ff2b59caf27104be259d37" category="inline-link-rx"></block> 要参考此指南：</block>
  <block id="2842c07cfacaf614e63dc1f2afef93b2" category="paragraph"><block ref="2842c07cfacaf614e63dc1f2afef93b2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d47cd04a0ddb5c3e6a2d9b9bc5c6a120" category="inline-link-macro">下一步：部署应用程序</block>
  <block id="fafac2eb9a7c4fcf46778865a22a00d2" category="paragraph"><block ref="fafac2eb9a7c4fcf46778865a22a00d2" category="inline-link-macro-rx"></block></block>
  <block id="34d54070f7d06f04159ffbc3d9a3e082" category="doc">配置工作环境</block>
  <block id="8302b607de31151e5500de556070d9b9" category="paragraph">将 `Notebook` `set_env-example.ipynb` 复制为 `set_env.ipynb` 。打开并编辑 `set_env.ipynb` 。此笔记本电脑可为凭据，文件位置和执行驱动程序设置变量。</block>
  <block id="3dc3cffc26096b89061a452cc7d16b6a" category="paragraph">如果按照上述说明进行操作，则只需执行以下步骤即可：</block>
  <block id="26448fec50e405fb230427686eeb11f4" category="list-text">从 Iguazio 服务信息板获取此值： `docker_regRegistry`</block>
  <block id="837784ac15c5cac463a4d016bac63db1" category="paragraph">示例： `docker-registry.default-tenant.app.clusterq.iguaziodev.com:80`</block>
  <block id="04dca9f72f7dfc6f87034c574f821a12" category="list-text">将 `admin` 更改为您的 Iguazio 用户名：</block>
  <block id="b2dea33f1195135f6905b7dd0ee58713" category="paragraph">`IGZ_container_path = "/" 用户 /admin"`</block>
  <block id="0ddaf8f981ee966dc3533de490c7ee4e" category="paragraph">下面是 ONTAP 系统连接详细信息。包括安装 Trident 时生成的卷名称。以下设置适用于内部 ONTAP 集群：</block>
  <block id="dada97be0cb81e6518d92aa7112fa356" category="paragraph">以下设置适用于 Cloud Volumes ONTAP ：</block>
  <block id="586d20125924bc57624aaacc07973d5a" category="section-title">创建基本 Docker 映像</block>
  <block id="0ab24923db4855b821917446711104c9" category="paragraph">构建 ML 管道所需的一切都包含在 Iguazio 平台中。开发人员可以定义运行管道和从 Jupyter Notebook 执行映像创建所需的 Docker 映像的规格。打开笔记本 `creation- images.ipynb` 并运行所有单元格。</block>
  <block id="3dc4e8abb0e99c6cf29451a16a891524" category="paragraph">此笔记本可创建两个我们在管道中使用的映像。</block>
  <block id="5446cc82e4c165e2700af830f8428d63" category="list-text">`igiio/NetApp.` 用于处理 ML 任务。</block>
  <block id="61145f9d17e187b69bc41525b10aafe6" category="paragraph"><block ref="61145f9d17e187b69bc41525b10aafe6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="62e9956426227f62abc9692954a5ad39" category="list-text">`NetApp/ 渠道` 。包含用于处理 NetApp Snapshot 副本的实用程序。</block>
  <block id="4050f795a12d7f83a545999c8a0d1905" category="paragraph"><block ref="4050f795a12d7f83a545999c8a0d1905" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6677daf583d4c0cf5860927a024f278d" category="section-title">查看各个 Jupyter 笔记本电脑</block>
  <block id="6414e1c23e017075a375d3a531eab90c" category="paragraph">下表列出了我们用于构建此任务的库和框架。所有这些组件均已与 Iguazio 基于角色的访问和安全控制完全集成。</block>
  <block id="da292beca00e0b352eade7a070855fd3" category="cell">库 / 框架</block>
  <block id="124d604ba0d3fd8e3d31c821b2a332f5" category="cell">MLRun</block>
  <block id="1c1491d01d96c08951ae2ac55fadf443" category="cell">由 Iguazio 管理的，用于组装，执行和监控 ML/AI 管道。</block>
  <block id="a2580bd6e044f86f4e39be2f59ee91da" category="cell">Nutriio</block>
  <block id="2d753cbb7762fe25d15a2cda2ff84790" category="cell">与 Iguazio 集成的无服务器功能框架。也可作为由 Iguazio 管理的开源项目提供。</block>
  <block id="0bbee378f2697a1d0c184e76d2b206c6" category="cell">基于 Kubernetes 的框架，用于部署管道。这也是一个开源项目， Iguazio 为此做出了贡献。它与 Iguazio 集成，可提高安全性，并与基础架构的其余部分集成。</block>
  <block id="849efb47ec760eb7c3c6b5848e740c3b" category="cell">Docker 注册表作为服务在 Iguazio 平台中运行。您也可以更改此设置以连接到注册表。</block>
  <block id="a38f73277b7341a709cf0cb57ebc4434" category="cell">NetApp Cloud Volumes</block>
  <block id="7279bb663993b77e219b4ca813326d77" category="cell">通过在 AWS 上运行的 Cloud Volumes ，我们可以访问大量数据，并可以创建 Snapshot 副本来版本用于培训的数据集。</block>
  <block id="9953e13b783f3ad45d99187c955cb9f9" category="cell">Trident 是一个由 NetApp 管理的开源项目。它有助于与 Kubernetes 中的存储和计算资源集成。</block>
  <block id="5fa4506d691373039fd2834939e582b3" category="paragraph">我们使用多台笔记本电脑来构建 ML 管道。在将每台笔记本电脑整合到管道中之前，可以对其进行单独测试。我们将按照此演示应用程序的部署流程分别介绍每台笔记本电脑。</block>
  <block id="06a86c2506db8ef5fdac675c1352e3cf" category="paragraph">理想的结果是，通过管道根据数据的 Snapshot 副本训练模型，并部署模型进行推理。下图显示了已完成的 MLRun 管道的结构图。</block>
  <block id="1d79eb753e06f2122a118408a14d6c51" category="paragraph"><block ref="1d79eb753e06f2122a118408a14d6c51" category="inline-image-macro-rx" type="image"></block></block>
  <block id="51b666fe429f998144ea4f2ce818cd60" category="section-title">部署数据生成功能</block>
  <block id="034015442bf8bf34c0e7e8149d35dae6" category="paragraph">本节介绍如何使用 Nutrio 无服务器功能生成网络设备数据。此用例是从部署了管道并使用 Iguazio 服务监控和预测网络设备故障的 Iguazio 客户端改编而来的。</block>
  <block id="2d024dd4dc0601ff2e4d0b81fcaec60a" category="inline-link">Nutrio 网站</block>
  <block id="59009d367371847f2042c59338282f4b" category="paragraph">我们模拟了来自网络设备的数据。执行 Jupyter 笔记本 `data-generator.ipynb` 可创建一个每 10 分钟运行一次的无服务器功能，并使用新数据生成一个 Parquet 文件。要部署此功能，请运行此笔记本中的所有单元。请参见<block ref="a9d48e85369982160b96d90770d878d1" category="inline-link-rx"></block> 查看此笔记本中任何不熟悉的组件。</block>
  <block id="fa0c06ebcd647f13ce81472307615ee3" category="paragraph">生成函数时，将忽略包含以下注释的单元格。假设笔记本电脑中的每个单元都属于该功能的一部分。导入 Nuclio 模块以启用 ` %nuclio 幻影` 。</block>
  <block id="c2b253a6bc491b37027772dba5f0b4e7" category="paragraph">在函数规范中，我们定义了函数的执行环境，触发方式以及使用的资源。</block>
  <block id="95b0eb5f892f7b0bcb3ec7dbb9058c02" category="paragraph">初始化 `init_context` 函数时， Noclio 框架会调用该函数。</block>
  <block id="1aab9637db54631d95ec5901bfda0947" category="paragraph">在函数初始化时，将调用不在函数中的任何代码。调用该命令时，系统将执行处理程序功能。您可以更改处理程序的名称并在函数规范中指定它。</block>
  <block id="94be7a657ecb54ef7337030d9dd78b70" category="paragraph">您可以在部署之前从笔记本电脑测试此功能。</block>
  <block id="01237c05459839293bfcd5a3beb1364f" category="paragraph">该功能可以从笔记本电脑部署，也可以从 CI/CD 管道部署（修改此代码）。</block>
  <block id="c697561ec27606d29683f7fc5fb3846d" category="section-title">渠道笔记本电脑</block>
  <block id="83041c5547fb0ad965936febfc41508d" category="paragraph">这些笔记本电脑不能单独执行此设置。这只是对每台笔记本电脑的回顾。我们在管道中调用了这些命令。要分别执行这些操作，请查看 MLRun 文档，将其作为 Kubernetes 作业执行。</block>
  <block id="c16b208e4ffb938f4008373dea5fb4ec" category="section-title">Snap_CV.ipynb</block>
  <block id="eeb06194a969eee5616e56b449a99306" category="paragraph">此笔记本电脑在管道开始时处理 Cloud Volume Snapshot 副本。它会将卷的名称传递到管道环境。此笔记本会调用 shell 脚本来处理 Snapshot 副本。在管道中运行时，执行上下文包含可帮助查找执行所需的所有文件的变量。编写此代码时，开发人员不必担心执行此代码的容器中的文件位置。如后面所述，此应用程序会随其所有依赖项一起部署，而是通过管道参数的定义来提供执行上下文。</block>
  <block id="dc82b570ec10aa261c20bf4828af24c1" category="paragraph">创建的 Snapshot 副本位置将放置在 MLRun 上下文中，供管道中的步骤使用。</block>
  <block id="7f609b3599e86a8f1b83bde97709ba37" category="paragraph">接下来的三台笔记本电脑将并行运行。</block>
  <block id="d1839287f93e09936af234173d03d6b7" category="section-title">data-prep.ipynb</block>
  <block id="dbe6ca7c47e3dc8cbd3a4956e684b761" category="paragraph">必须将原始指标转换为功能，才能进行模型培训。此笔记本电脑可从 Snapshot 目录读取原始指标，并将模型培训的功能写入 NetApp 卷。</block>
  <block id="dab65fbdf0ed5ce626558d99e83c618f" category="paragraph">在管道环境中运行时，输入 `DATA_DIR` 包含 Snapshot 副本位置。</block>
  <block id="4636df8c7ba383c5f135c7ae8f2ef772" category="section-title">描述 .ipynb</block>
  <block id="43099d46867c7c0cc922fdd3e026d029" category="paragraph">为了直观显示传入指标，我们部署了一个管道步骤，该步骤可提供通过 Kubeflow 和 MLRun UI 提供的图解和图形。每个执行都有自己版本的此可视化工具。</block>
  <block id="7fd47125b80c0e6241052a47dcb41b98" category="section-title">deploy-feature-feature.ipynb</block>
  <block id="684eb641c7a322c328f8ea91cd482b0d" category="paragraph">我们会持续监控指标以查找异常。此笔记本电脑可创建一个无服务器功能，用于生成对传入指标运行预测所需的功能。此笔记本电脑将调用函数的创建。功能代码位于笔记本电脑 `data-prep.ipynb` 中。请注意，我们使用同一笔记本电脑作为管道中的一个步骤。</block>
  <block id="1c475141d16ada0e53ddb14047963024" category="section-title">训练 .ipynb</block>
  <block id="43b6984a9b2a7863061833c96be2b851" category="paragraph">创建功能后，我们将触发模型培训。此步骤的输出为要用于推理的模型。我们还会收集统计信息，以跟踪每个执行情况（实验）。</block>
  <block id="a6858cae929a8eed6e9c9d6cfa9befac" category="paragraph">例如，以下命令会将准确性得分输入到该实验的上下文中。此值在 Kubeflow 和 MLRun 中可见。</block>
  <block id="9d1126b5d7690c0eb46dd7713822680e" category="section-title">deploy-inftion-Function.ipynb</block>
  <block id="827ebf8bb3ee1798b5394ecd2a8bb3ae" category="paragraph">管道中的最后一步是将模型部署为无服务器功能，以实现持续推理。此笔记本电脑将调用在 `nuclio-inference - Function .ipynb` 中定义的无服务器功能的创建过程。</block>
  <block id="4d2c908b5247626d682903dc9527bd05" category="section-title">审核和构建管道</block>
  <block id="6c8673acfb6249793bed69954ca16a9b" category="paragraph">通过将所有笔记本电脑整合到一个管道中，可以持续运行实验，根据新指标重新评估模型的准确性。首先，打开 `pipeline.ipynb` 笔记本电脑。我们将详细介绍 NetApp 和 Iguazio 如何简化此 ML 管道的部署。</block>
  <block id="50d4decae4f0f08e83a1bd8342bd6ef1" category="paragraph">我们使用 MLRun 为管道的每个步骤提供上下文并处理资源分配。MLRun API 服务在 Iguazio 平台中运行，是与 Kubernetes 资源交互的点。每个开发人员都不能直接请求资源； API 负责处理这些请求并启用访问控制。</block>
  <block id="c7c5ccf69a87e301b134dcfdf46ab307" category="paragraph">此管道可以与 NetApp Cloud Volumes 和内部卷配合使用。我们构建此演示的目的是使用 Cloud Volumes ，但您可以在代码中看到在内部运行的选项。</block>
  <block id="ce16d064e13fffda0ff2a07c50276f33" category="paragraph">将 Jupyter 笔记本电脑转变为 Kubeflow 步骤所需的第一个操作是将代码转换为函数。功能具有运行该笔记本电脑所需的所有规格。向下滚动笔记本电脑时，您可以看到我们为管道中的每个步骤定义了一个函数。</block>
  <block id="8bbbd384e919f705f071525a96cdfaec" category="cell">属于笔记本电脑</block>
  <block id="5d75cd50687084d681964f5c6ee8a73a" category="cell">&lt;code_to_Function&gt; （ MLRun 模块的一部分）</block>
  <block id="eef456f018469b2d403742d05e33a5dd" category="cell">函数名称： project name 。用于组织所有项目项目项目。此信息会显示在 MLRun UI 中。好的。在这种情况下，是 Kubernetes 作业。这可以是 dask ， MPI ， spark8s 等。有关详细信息，请参见 MLRun 文档。文件笔记本的名称。此位置也可以是 Git （ HTTP ）中的一个位置。</block>
  <block id="d0161cbbc56081c803c919679b76b846" category="cell">我们在此步骤中使用的 Docker 映像的名称。我们先前使用 create-image.ipynb 笔记本创建了此版本。</block>
  <block id="28bb8862d962b462f621d9098de311cd" category="cell">volume_mounts 和 volumes</block>
  <block id="a6841da965bfb59838d367b9fdc30a8c" category="cell">有关在运行时挂载 NetApp Cloud Volume 的详细信息。</block>
  <block id="5d9261bc63dfeef8d26c807e36a9daa4" category="paragraph">我们还定义了步骤的参数。</block>
  <block id="fcd242cd0d87d4de3be34f843180bdb0" category="paragraph">在为所有步骤定义了函数之后，您可以构建管道。我们使用 `kfp` 模块来定义此定义。使用 MLRun 与自行构建之间的区别在于编码的简化和缩短。</block>
  <block id="f02b57d2fbd61d7629e76438ba68f7a1" category="paragraph">我们定义的函数将使用 MLRun 的 `as_step` 函数转换为步骤组件。</block>
  <block id="8859e75c5bfd3a8ea5a783296d71b795" category="section-title">Snapshot 步骤定义</block>
  <block id="dabb827ac33da3a8d8a2384874221aab" category="paragraph">启动 Snapshot 功能，输出并将 v3io 作为源进行挂载：</block>
  <block id="3225a10b07f1580f10dee4abc3779e6c" category="cell">Parameters</block>
  <block id="422ac26927e8ad3d6b30617226e26c2a" category="cell">newtask</block>
  <block id="b954691c9a06ef7281bf4c836e7684f1" category="cell">newtask 是函数 run 的定义。</block>
  <block id="7871261404e7a8d93339696184b243b9" category="cell">（ MLRun 模块）</block>
  <block id="4522319a8fbbe0a85c82e604047dfe6c" category="cell">处理程序。要调用的 Python 函数的名称。我们在笔记本中使用了名称处理程序，但这不是必需的。参数。我们传递给执行的参数。在代码中，我们使用 context.get_param （‘parameter ｝ ）来获取值。</block>
  <block id="6cebb60f71d9de65143ade7a8388e27a" category="cell">as_step</block>
  <block id="070faabab806ce863279f5bd38452cc4" category="cell">NameKubeflow 管道步骤的名称。输出。这些值是步骤在完成时添加到词典中的值。查看 snap_CV.ipynb 笔记本电脑。mount_v3io （）。此操作将为执行管道的用户配置挂载 /User 的步骤。</block>
  <block id="a8aff967e1649a1c82ea607c881e8091" category="cell">输入</block>
  <block id="6f1ba99c8ee685047e0fa3c32349a01f" category="cell">您可以将上一步的输出传递到步骤。在这种情况下， snap.outputs"snapVolumeDetails" 是我们在快照步骤中创建的 Snapshot 副本的名称。</block>
  <block id="a399d9e54dd5dc35c6b455d995702175" category="cell">输出路径</block>
  <block id="026446ea82508e4c9f41609b3484b4cb" category="cell">一个位置，用于放置使用 MLRun 模块 log_tools. 生成的项目。</block>
  <block id="2fe8889e7fb9545ea383ff3c0451cabf" category="paragraph">您可以从上至下运行 `pipvip.ipynb` 。然后，您可以转到 Iguazio 信息板中的管道选项卡来监控进度，如 Iguazio 信息板管道选项卡中所示。</block>
  <block id="74dec5a93e3c1ccb06f26ebc6f9401fb" category="paragraph"><block ref="74dec5a93e3c1ccb06f26ebc6f9401fb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f47db69a9e60b47a1c8f7800753f6b57" category="paragraph">由于我们在每次运行中都记录了训练步骤的准确性，因此我们在每个实验中都有一个准确性记录，如训练准确性记录所示。</block>
  <block id="5bb7a1a5b810ce843cd4d41a7137ce26" category="paragraph"><block ref="5bb7a1a5b810ce843cd4d41a7137ce26" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a9ebd260b4ed60a239b8228fe68b2dbc" category="paragraph">如果选择 Snapshot 步骤，则可以看到用于运行此实验的 Snapshot 副本的名称。</block>
  <block id="1d231b2e1da6122607105ce52f87a763" category="paragraph"><block ref="1d231b2e1da6122607105ce52f87a763" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9fc578a2d3b019d646da18c9172282dc" category="paragraph">所述步骤具有可视化项目，可用于浏览我们使用的指标。您可以展开以查看完整图，如下图所示。</block>
  <block id="ffb599ed438d33d337e7cca9a1fbaf07" category="paragraph"><block ref="ffb599ed438d33d337e7cca9a1fbaf07" category="inline-image-macro-rx" type="image"></block></block>
  <block id="89238f00748675db057567546f67c2c5" category="paragraph">此外， MLRun API 数据库还会跟踪按项目组织的每个运行的输入，输出和项目。下图显示了每个运行的输入，输出和项目示例。</block>
  <block id="a8baa83f88edfb0fceafeda75819cb5f" category="paragraph"><block ref="a8baa83f88edfb0fceafeda75819cb5f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3c6050fe85d7b5528bc8356c88eab725" category="paragraph">对于每个作业，我们会存储更多详细信息。</block>
  <block id="8683624a37c6626765321b5cc2f60954" category="paragraph"><block ref="8683624a37c6626765321b5cc2f60954" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9f02f72c9470e67a8b3c5f9054b0a32c" category="inline-link">MLRun GitHub 站点</block>
  <block id="01661b1e0825da7434573266df1672e0" category="paragraph">有关 MLRun 的信息比本文档中介绍的信息更多。可以将 AL 项目（包括步骤和功能的定义）保存到 API 数据库中，并进行版本控制，也可以单独调用或作为完整项目调用。此外，还可以保存项目并将其推送到 Git 以供日后使用。我们建议您在中了解更多信息<block ref="92ae596fd8e402850e22f59a73ed3a44" category="inline-link-rx"></block>。</block>
  <block id="43486dfb907f148e40f3719f314caeb4" category="inline-link-macro">接下来：部署 Grafana 信息板</block>
  <block id="0670d6ac4e77f5862afcc2fde43bcc72" category="paragraph"><block ref="0670d6ac4e77f5862afcc2fde43bcc72" category="inline-link-macro-rx"></block></block>
  <block id="2ccc60eef19cf4d63b4ea83fa868e875" category="doc">从 Triton 推理服务器收集推理指标</block>
  <block id="54dff7891da77e9401cf2002c10b051e" category="paragraph">Triton 推理服务器可提供 Prometheus 指标，用于指示 GPU 和请求统计信息。</block>
  <block id="5a24a6321a32ccdea42d3a3d037eaf15" category="paragraph">默认情况下，这些指标可从获取 <block ref="534a7b41124e007e49601b938e324f04" category="inline-link-rx"></block>。</block>
  <block id="d5e26555f045325600a059a3a9046f07" category="paragraph">Triton 推理服务器 IP 是先前记录的负载平衡器 IP 。</block>
  <block id="647cbc03d01d31d50bf3fd0ccb7fb1dc" category="paragraph">这些指标只能通过访问端点来使用，不会推送到或发布到任何远程服务器。</block>
  <block id="22d2d27f49628b4988c2b09ac245ce8e" category="paragraph"><block ref="22d2d27f49628b4988c2b09ac245ce8e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d6e6259d4837abf3d34c1c5886c271d5" category="paragraph"><block ref="d6e6259d4837abf3d34c1c5886c271d5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d417083fccca1fd701741463f49498d2" category="paragraph"><block ref="d417083fccca1fd701741463f49498d2" category="inline-link-macro-rx"></block></block>
  <block id="10dedd24e41d2fa9b5a5e681dd5b4882" category="summary">此页面提供了了解 NetApp 如何推进 AI 项目的背景信息，包括有关容器， Kubernetes ， NetApp Trident 等的信息。</block>
  <block id="0b7e964d1176d21b9ba3eceec8ed95ac" category="doc">概念和组件</block>
  <block id="5cd2adc9e2a5254e4c1da803519f298b" category="section-title">人工智能</block>
  <block id="c2fabc0982aa161064ff2b73f50800d5" category="paragraph">AI 是一门计算机科学学科，其中计算机经过训练，可以模拟人类思维的认知功能。AI 开发人员培训计算机，以便以类似于甚至优于人类的方式学习和解决问题。深度学习和机器学习是 AI 的子领域。企业越来越多地采用 AI ， ML 和 DL 来满足其关键业务需求。以下是一些示例：</block>
  <block id="b3e764d3292b880c63140b20b9a90e6c" category="list-text">分析大量数据以挖掘以前未知的业务洞察力</block>
  <block id="30512c04b26c269ec31ecd09f1f3a208" category="list-text">使用自然语言处理直接与客户互动</block>
  <block id="4ee20869dbb821d3744d87176797401f" category="list-text">自动化执行各种业务流程和功能</block>
  <block id="5919922c658bd2a4f33f0cf546be3ea9" category="paragraph">现代 AI 训练和推理工作负载需要大规模并行计算功能。因此， GPU 越来越多地用于执行 AI 操作，因为 GPU 的并行处理功能远远优于通用 CPU 。</block>
  <block id="5382aaf8b3d2fdeb6717f9805b0dd511" category="section-title">容器</block>
  <block id="2154bae452b2343b649ee4b088b399f6" category="paragraph">容器是在共享主机操作系统内核上运行的隔离用户空间实例。容器的采用率正在快速增长。容器可提供许多与虚拟机（ VM ）相同的应用程序沙盒优势。但是，由于虚拟机所依赖的虚拟机管理程序和子操作系统层已被消除，因此容器的重量要轻得多。下图展示了虚拟机与容器的可视化情况。</block>
  <block id="91945d3c9ebb2261142b9c7fc516b559" category="inline-link">Docker 网站</block>
  <block id="da28cd415837c7f3d1d6221ff490b84b" category="paragraph">此外，还可以通过容器直接将应用程序依赖关系，运行时间等内容高效地打包到应用程序中。最常用的容器打包格式是 Docker 容器。已采用 Docker 容器格式进行容器化的应用程序可以在可以运行 Docker 容器的任何计算机上执行。即使计算机上不存在应用程序的依赖关系，也是如此，因为所有依赖关系都打包在容器中。有关详细信息，请访问<block ref="f3aa778c455b7c9002cc51cdc41e7924" category="inline-link-rx"></block>。</block>
  <block id="9c3d617029ed075512781527983e01e4" category="paragraph"><block ref="9c3d617029ed075512781527983e01e4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1304134d4f70b5d09af5fb5a8bda1de8" category="inline-link">Kubernetes 网站</block>
  <block id="7a1446916a360f9c8ae3b94a97ad8c86" category="paragraph">Kubernetes 是一款开源分布式容器编排平台，最初由 Google 设计，现在由 Cloud 原生计算基金会（ CNCF ）维护。Kubernetes 可以为容器化应用程序实现部署，管理和扩展功能的自动化。近年来， Kubernetes 已成为主导容器业务流程平台。虽然支持其他容器打包格式和运行时间，但 Kubernetes 最常用作 Docker 容器的业务流程系统。有关详细信息，请访问<block ref="b99a36b6d7a8af9ad1172136115f0275" category="inline-link-rx"></block>。</block>
  <block id="6ea70a0ecace7daa9dfbbc8ff3282de1" category="inline-link">Trident 网站</block>
  <block id="f9b736ec48694a34e744a1a0309602bd" category="paragraph">Trident 是一款由 NetApp 开发和维护的开源存储编排程序，可大大简化 Kubernetes 工作负载的永久性存储的创建，管理和使用。Trident 本身是 Kubernetes 本机应用程序，直接在 Kubernetes 集群中运行。借助 Trident ， Kubernetes 用户（开发人员，数据科学家， Kubernetes 管理员等）可以采用他们已熟悉的标准 Kubernetes 格式创建，管理永久性存储卷并与其交互。同时，他们还可以利用 NetApp 的高级数据管理功能以及由 NetApp 技术提供支持的数据网络结构。Trident 可将持久存储的复杂性抽象化，并使其易于使用。有关详细信息，请访问<block ref="ad5406ed69f3fe0de810f757310402c9" category="inline-link-rx"></block>。</block>
  <block id="47bbe104ad41e6af2ee0dba5dc76d74d" category="inline-link">DeepOps 网站</block>
  <block id="b1c5aef0d1e7ec0339ca5caa48c1b3e3" category="paragraph">DeepOps 是 NVIDIA 的一个开源项目，通过使用 Ansible ，可以根据最佳实践自动部署 GPU 服务器集群。DeepOps 采用模块化设计，可用于执行各种部署任务。在本文档及其所述的验证练习中， DeepOps 用于部署一个由 GPU 服务器辅助节点组成的 Kubernetes 集群。有关详细信息，请访问<block ref="640792bfd91bad987ba8fd5d776a2824" category="inline-link-rx"></block>。</block>
  <block id="173c35c4ef789d6956a0cd6fbd9a0cfc" category="inline-link">Kubeflow 网站</block>
  <block id="ea77b50ef31a778a66411b993d6cb7d1" category="paragraph">Kubeflow 是一款适用于 Kubernetes 的开源 AI 和 ML 工具包，最初由 Google 开发。通过 Kubeflow 项目，可以在 Kubernetes 上轻松，便携且可扩展地部署 AI 和 ML 工作流。Kubeflow 将 Kubernetes 的错综复杂之处抽象出来，让数据科学家能够专注于他们最了解的―数据科学。有关可视化效果，请参见下图。随着企业 IT 部门越来越多地在 Kubernetes 上实现标准化， Kubeflow 的吸引力也越来越大。有关详细信息，请访问<block ref="bbfd4ba68f44e2ff98f04ea32205485d" category="inline-link-rx"></block>。</block>
  <block id="a2b0a43dcae6386929654b652393e691" category="paragraph"><block ref="a2b0a43dcae6386929654b652393e691" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e569c07c88fe6f8af1f63410c200abd1" category="section-title">KubeFlow 管道</block>
  <block id="384873a621d99250018cd7ce1768f8af" category="paragraph">Kubeflow 管道是 Kubeflow 的一个关键组件。Kubeflow 管道是一个平台和标准，用于定义和部署可移植且可扩展的 AI 和 ML 工作流。有关详细信息，请参见<block ref="6de5a235a0c43df48d05588e1b69b959" category="inline-link-rx"></block>。</block>
  <block id="a0b0430a41f582a12dac8f4d63ab450d" category="inline-link">Jupyter 网站</block>
  <block id="3cecf3b7bbdb1a67a537c65bfd6fd529" category="paragraph">Jupyter 笔记本电脑服务器是一款开源 Web 应用程序，数据科学家可以利用它创建类似于维基的文档，这些文档称为 Jupyter 笔记本电脑，其中包含实时代码以及描述性测试。Jupyter 笔记本电脑在 AI 和 ML 社区中广泛使用，可用于记录，存储和共享 AI 和 ML 项目。Kubeflow 可简化 Kubernetes 上 Jupyter 笔记本电脑服务器的配置和部署。有关 Jupyter 笔记本电脑的详细信息，请访问<block ref="412a2c3f2a7af96a2a4f6a512ee2088e" category="inline-link-rx"></block>。有关 Kubeflow 环境中 Jupyter 笔记本电脑的详细信息，请参见<block ref="c5d2218884acd101e6deb4d8c7d39370" category="inline-link-rx"></block>。</block>
  <block id="385904ba8ac27bcacafadf2113386df4" category="section-title">Apache 气流</block>
  <block id="c01fb6f699235f8c5d36bdda9e155c77" category="paragraph">Apache Airflow 是一个开源工作流管理平台，支持对复杂的企业工作流进行编程创作，计划和监控。它通常用于自动执行 ETL 和数据管道工作流，但不限于这些类型的工作流。气流项目由 Airbnb 发起，但此后在业内备受欢迎，现在由 Apache 软件基金会赞助。气流采用 Python 编写，气流工作流通过 Python 脚本创建，气流是按照 " 配置即代码 " 原则设计的。 现在，许多企业级气流用户都在 Kubernetes 上运行 Airflow 。</block>
  <block id="8fb4a72500791f0bea82c5c9b4c33772" category="section-title">定向循环图（ DAG ）</block>
  <block id="afd712bbacf94fbaf2852bd23c6b1a84" category="paragraph">在气流模式下，工作流称为定向环比图（ DAG ）。DAG 由按顺序，并行或两者的组合执行的任务组成，具体取决于 DAG 定义。气流计划程序会根据 DAG 定义中指定的任务级别依赖关系对一组工作负载执行各个任务。DAG 是通过 Python 脚本定义和创建的。</block>
  <block id="a5119a6bd0f4d733e0f1f4c10f9d063b" category="section-title">NetApp ONTAP 9.</block>
  <block id="0b83cba78e13ee67f3ada794b1e8edb8" category="paragraph">NetApp ONTAP 9 是 NetApp 推出的最新一代存储管理软件，可帮助像您这样的企业打造现代化的基础架构并过渡到云就绪数据中心。借助行业领先的数据管理功能，无论数据位于何处， ONTAP 都可以通过一组工具来管理和保护数据。您还可以将数据自由移动到任何需要的位置：边缘，核心或云。ONTAP 9 包含许多功能，可简化数据管理，加快和保护关键数据，并在混合云架构中打造适应未来需求的基础架构。</block>
  <block id="849f9e6e3176f7bb2abaf1dfdda6f4de" category="section-title">简化数据管理</block>
  <block id="5d0a72b50313f5f3615263a7d19ee676" category="paragraph">数据管理对于企业 IT 运营至关重要，这样您就可以为应用程序和数据集使用适当的资源。ONTAP 包括以下功能，可简化运营并降低总运营成本：</block>
  <block id="30490e1b1bd18c329c3b28df91914ffe" category="list-text">* 实时数据缩减和扩展的重复数据删除。 * 数据缩减可减少存储块中浪费的空间，重复数据删除可显著提高有效容量。</block>
  <block id="c5b25bb449b07e8b863f41dbe3b90a2a" category="list-text">* 最低，最高和自适应服务质量（ QoS ）。 * 细粒度 QoS 控制有助于在高度共享的环境中保持关键应用程序的性能水平。</block>
  <block id="d9a5709ce7afa0856dd86539f75c8087" category="list-text">* ONTAP FabricPool 。 * 此功能可将冷数据自动分层到公有和私有云存储选项，包括 Amazon Web Services （ AWS ）， Azure 和 NetApp StorageGRID 基于对象的存储。</block>
  <block id="ddb2f8d78c57d5743fdee9e17ae053c9" category="section-title">加速和保护数据</block>
  <block id="4994fe58be1734616de0863809040200" category="paragraph">ONTAP 可提供卓越的性能和数据保护，并通过以下功能扩展这些功能：</block>
  <block id="b109ecc7b4570bf3dbb9f8d082595075" category="list-text">* 高性能和低延迟。 * ONTAP 以尽可能低的延迟提供最高的吞吐量。</block>
  <block id="9e184f7b8847a390232c0163d45ab461" category="list-text">* NetApp ONTAP FlexGroup 技术 * 。 FlexGroup 卷是一种高性能数据容器，可线性扩展到高达 20 PB 和 4000 亿个文件，从而提供一个可简化数据管理的命名空间。</block>
  <block id="ef9770ee572f97c59254dc0d022afda8" category="list-text">* 数据保护。 * ONTAP 提供内置数据保护功能，并在所有平台之间进行通用管理。</block>
  <block id="493a7caad772a79b06f5d4a7dd98afcd" category="list-text">* NetApp 卷加密。 * ONTAP 提供原生卷级加密，并支持板载和外部密钥管理。</block>
  <block id="0950833529b7822458a242631cce3b3b" category="section-title">Future-Proof 基础架构</block>
  <block id="ba5b61620e18b71a8644dbc382c0c4f1" category="paragraph">ONTAP 9 可帮助您满足不断变化的苛刻业务需求：</block>
  <block id="d9d73747d25ab5e9c5de8f1f61c9ec7c" category="list-text">* 无缝扩展和无中断运行。 * ONTAP 支持向现有控制器和横向扩展集群无中断添加容量。您可以升级到 NVMe 和 32 Gb FC 等最新技术，而无需进行昂贵的数据迁移或中断。</block>
  <block id="512a65c054e8b5d06216e0eae55abedb" category="list-text">* 云连接。 * ONTAP 是云连接最广泛的存储管理软件之一，可在所有公有云中选择软件定义的存储（ ONTAP Select ）和云原生实例（ NetApp Cloud Volumes Service ）。</block>
  <block id="5ca60f373401802dfa44501cfa4f5cc7" category="list-text">* 与新兴应用程序集成。 * 通过使用支持现有企业级应用程序的相同基础架构， ONTAP 可为 OpenStack ， Hadoop 和 MongoDB 等下一代平台和应用程序提供企业级数据服务。</block>
  <block id="49a023178611b07475bac0823fc2dd53" category="section-title">NetApp Snapshot 副本</block>
  <block id="42884680ea9780d61f4cce71fdc606b1" category="paragraph">NetApp Snapshot 副本是卷的只读时间点映像。该映像占用的存储空间极少，并且性能开销极低，因为它仅记录自创建上次 Snapshot 副本以来创建的文件所做的更改，如下图所示。</block>
  <block id="13455e6dd452fcc850acd6696e670600" category="paragraph">Snapshot 副本的效率归功于核心 ONTAP 存储虚拟化技术—任意位置写入文件布局（ Write Anywhere File Layout ， WAFL ）。与数据库一样， WAFL 使用元数据指向磁盘上的实际数据块。但是，与数据库不同， WAFL 不会覆盖现有块。它会将更新后的数据写入新块并更改元数据。这是因为 ONTAP 在创建 Snapshot 副本时引用元数据，而不是复制数据块，因此 Snapshot 副本的效率非常高。这样做可以避免其他系统在查找要复制的块时花费寻道时间，并避免创建副本本身的成本。</block>
  <block id="921d0d1d37872e6233bf4da3688b03ef" category="paragraph">您可以使用 Snapshot 副本恢复单个文件或 LUN ，或者还原卷的整个内容。ONTAP 会将 Snapshot 副本中的指针信息与磁盘上的数据进行比较，以重建缺少或损坏的对象，而不会造成停机或高昂的性能成本。</block>
  <block id="9787a3a5983c64cfaf3029a721aab4f0" category="paragraph"><block ref="9787a3a5983c64cfaf3029a721aab4f0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="76a33b697177fedefd70387e86214ebd" category="section-title">NetApp FlexClone 技术</block>
  <block id="78e8cd917c99154d22a94ba80186ac33" category="paragraph">NetApp FlexClone 技术会引用 Snapshot 元数据来创建卷的可写时间点副本。副本与其父级共享数据块，在将更改写入副本之前，除了元数据所需的存储外，不会占用任何其他存储，如下图所示。传统副本可能需要几分钟甚至几小时才能创建，而 FlexClone 软件可以让您几乎即时复制最大的数据集。因此，如果您需要相同数据集的多个副本（例如，开发工作空间）或数据集的临时副本（针对生产数据集测试应用程序），则这种情况是理想之选。</block>
  <block id="423c2edb645c178257ba9d79bd9ac684" category="paragraph"><block ref="423c2edb645c178257ba9d79bd9ac684" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f67824f4f94415299484432a092f76b1" category="section-title">NetApp SnapMirror 数据复制技术</block>
  <block id="553416a55e03cc49df61e631d17b8011" category="paragraph">NetApp SnapMirror 软件是一款经济高效且易于使用的统一复制解决方案，可跨数据网络结构实现。它可以通过 LAN 或 WAN 高速复制数据。它可以为各种类型的应用程序提供高数据可用性和快速数据复制，包括虚拟和传统环境中的业务关键型应用程序。在将数据复制到一个或多个 NetApp 存储系统并持续更新二级数据时，您的数据将保持最新，并可随时使用。不需要外部复制服务器。有关利用 SnapMirror 技术的架构示例，请参见下图。</block>
  <block id="5a12ba5d186c9ffcce65438f531e7c47" category="paragraph">SnapMirror 软件通过仅通过网络发送更改的块来利用 NetApp ONTAP 的存储效率。SnapMirror 软件还可使用内置网络压缩来加快数据传输速度，并将网络带宽利用率降低多达 70% 。借助 SnapMirror 技术，您可以利用一个精简复制数据流创建一个存储库，同时维护活动镜像和先前的时间点副本，从而将网络流量减少多达 50% 。</block>
  <block id="423eee692f81241addaf586841d0c66a" category="paragraph"><block ref="423eee692f81241addaf586841d0c66a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dc188738e6cc2e9f8314e1b95f18ebfd" category="section-title">NetApp Cloud Sync</block>
  <block id="2e386ef1ace3f8ea71edbaa6f9cbbd00" category="paragraph">Cloud Sync 是一项 NetApp 服务，用于快速安全地同步数据。无论您需要在内部 NFS 还是 SMB 文件共享， NetApp StorageGRID ， NetApp ONTAP S3 ， NetApp Cloud Volumes Service ， Azure NetApp Files ， AWS S3 ， AWS EFS ， Azure Blob ， Google 云存储或 IBM 云对象存储， Cloud Sync 可将文件快速安全地移动到您需要的位置。</block>
  <block id="c1bea6c8c836c6911127e6fe3fde762a" category="paragraph">数据传输完成后，即可在源和目标上完全使用。Cloud Sync 可以在触发更新时按需同步数据，也可以根据预定义的计划持续同步数据。无论如何， Cloud Sync 只会移动增量，因此将数据复制所花费的时间和金钱降至最低。</block>
  <block id="18c24ab391d7e12f4abcfea370fb4e81" category="paragraph">Cloud Sync 是一款软件即服务（ SaaS ）工具，设置和使用极其简单。由 Cloud Sync 触发的数据传输由数据代理执行。Cloud Sync 数据代理可以部署在 AWS ， Azure ， Google 云平台或内部环境中。</block>
  <block id="6efa8f47d1a76af77ce311b436e4dca9" category="section-title">NetApp XCP</block>
  <block id="0e4fcaf78d0d4feda27a31ecb6944b58" category="paragraph">NetApp XCP 是一款基于客户端的软件，可用于任意到 NetApp 以及 NetApp 到 NetApp 的数据迁移和文件系统洞察。XCP 旨在通过利用所有可用系统资源来处理大容量数据集和高性能迁移来实现扩展和最大性能。XCP 可通过生成报告的选项帮助您全面了解文件系统。</block>
  <block id="9a3914e340e4b09762f8231f9fd0ddaa" category="paragraph">NetApp XCP 可通过一个软件包提供，该软件包支持 NFS 和 SMB 协议。XCP 包括一个适用于 NFS 数据集的 Linux 二进制文件和一个适用于 SMB 数据集的 Windows 可执行文件。</block>
  <block id="adc911d4d2f4e0008e765523cff39824" category="paragraph">NetApp XCP 文件分析是一款基于主机的软件，可检测文件共享，对文件系统运行扫描并提供用于文件分析的信息板。XCP 文件分析与 NetApp 和非 NetApp 系统兼容，并可在 Linux 或 Windows 主机上运行，以便为 NFS 和 SMB 导出的文件系统提供分析。</block>
  <block id="957e30f73566564bd8a99a6fac13e015" category="section-title">NetApp ONTAP FlexGroup 卷</block>
  <block id="22bd32dacc144ffc2601e6685260b4c3" category="paragraph">培训数据集可以是一组可能包含数十亿个文件的集合。文件可以包括文本，音频，视频以及其他形式的非结构化数据，这些数据必须进行存储和处理才能并行读取。存储系统必须存储大量小文件，并且必须并行读取这些文件，以便执行顺序和随机 I/O</block>
  <block id="6d7d8c1311f5ac7d2ed289e012822f78" category="paragraph">FlexGroup 卷是一个包含多个成分卷的命名空间，如下图所示。从存储管理员的角度来看， FlexGroup 卷是一个受管卷，其作用类似于 NetApp FlexVol 卷。FlexGroup 卷中的文件将分配给各个成员卷，并且不会在卷或节点之间进行条带化。它们支持以下功能：</block>
  <block id="28f25e3d6de5d5fe801c8d194234f0a5" category="list-text">FlexGroup 卷可为高元数据工作负载提供多 PB 的容量和可预测的低延迟。</block>
  <block id="82b42713e1be50bb140b7e85eecdd91f" category="list-text">它们在同一命名空间中最多支持 4000 亿个文件。</block>
  <block id="50af21bd57d5360eb9ffc8dbc4b9a5bd" category="list-text">它们支持在 CPU ，节点，聚合和成分卷之间的 NAS 工作负载中执行并行操作 FlexVol 。</block>
  <block id="07e40bce6e02494c0af7b6a5f2aeaad8" category="paragraph"><block ref="07e40bce6e02494c0af7b6a5f2aeaad8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ce20aca88305ff40770d6840d1d29c51" category="paragraph"><block ref="ce20aca88305ff40770d6840d1d29c51" category="inline-link-macro-rx"></block></block>
  <block id="28b9eb1a9ba550cf23239eb33610203e" category="doc">软件和硬件要求</block>
  <block id="dce011ea921230b4e3061bb70569c598" category="section-title">网络配置：</block>
  <block id="5c56d5a342310a4d1ead67adc85adcab" category="paragraph">以下是在云中设置的网络配置要求：</block>
  <block id="df97d4ea35e2febbb06b9bd1ba29b50e" category="list-text">Iguazio 集群和 NetApp Cloud Volumes 必须位于同一个虚拟私有云中。</block>
  <block id="a8f3c1a7fc956bcddef483bc8797e742" category="list-text">云管理器必须有权访问 Iguazio 应用程序节点上的端口 6443 。</block>
  <block id="0d1562d43d3c0d4c52eef4a841896eba" category="list-text">我们在本技术报告中使用了 Amazon Web Services 。但是，用户可以选择在任何云提供商中部署解决方案。为了便于在采用 NVIDIA DGX-1 的 ONTAP AI 中进行内部测试，我们使用了 Iguazio 托管的 DNS 服务。</block>
  <block id="820de5e74a90f4dbc17e37b78258c35b" category="paragraph">客户端必须能够访问动态创建的 DNS 域。如果需要，客户可以使用自己的 DNS 。</block>
  <block id="43ad77bf4f253415b4e90ea4aa41a2d7" category="paragraph">您可以在自己的集群中安装 Iguazio 内部部署。我们已使用 NVIDIA DGX-1 系统验证了 NetApp ONTAP AI 中的解决方案。下表列出了用于测试此解决方案的硬件。</block>
  <block id="7b6f2acc1b4489fd971965be635ea987" category="cell">NetApp AFF A800 系统</block>
  <block id="55552614d2dd18f2d6c40759f2de9e22" category="cell">1 个高可用性（ HA ）对，包括 2 个控制器和 48 个 NVMe SSD （ 3.8 TB 或更高）</block>
  <block id="413400218c4c262991ad8483b3be0a04" category="cell">Cisco Nexus 3232C 网络交换机</block>
  <block id="72f23e74ab545a9064f74aca4d904bf4" category="paragraph">下表列出了内部测试所需的软件组件：</block>
  <block id="751601035b4077a9c6f7280ab1d3369c" category="cell">4.4 — Ubuntu 18.04 LTS</block>
  <block id="bb3121464976ef0c6b6b2b81fc75f3c5" category="cell">19.03.5</block>
  <block id="2a820a07d05055e147221622557f34b9" category="cell">容器版本</block>
  <block id="6f3d0f773f6be20d70e6bbbafca93de9" category="cell">20.01-tF1-py2.</block>
  <block id="46b6cc5d90605df4689002387db99128" category="cell">机器学习框架</block>
  <block id="f060e908e90b13cff9447e18fbb6bb20" category="cell">TensorFlow 1.15.0</block>
  <block id="4ec1f03a0b910370451392d8af8cd05a" category="cell">Iguazio</block>
  <block id="80b1aaf85493db4117fca57135bec077" category="cell">版本 2.8+</block>
  <block id="20de768bd6142b858c4e99c64e19f37b" category="cell">ESX 服务器</block>
  <block id="f884cc5c56f9c9a8d4d61568ff64db9c" category="cell">6.5</block>
  <block id="95b4a53c1023a65c982b077b13be4b96" category="paragraph">此解决方案已通过 Iguazio 2.5 版和适用于 AWS 的 NetApp Cloud Volumes ONTAP 的全面测试。Iguazio 集群和 NetApp 软件均在 AWS 上运行。</block>
  <block id="efbef76fea5d52b17e66f66b7fbdb1be" category="cell">版本或类型</block>
  <block id="1f2c90c0f9931b94eab6d9d2d3a640c9" category="cell">应用程序节点</block>
  <block id="8f33b30dd333b320c87f038f61e17523" category="cell">m5.4xlarge</block>
  <block id="b8f3b98512c841c7f30ce704570ac0b6" category="cell">数据节点</block>
  <block id="ea93f0324aaeaa177497ea41b52cb9ff" category="cell">I3.4 x 大型</block>
  <block id="870032d2d605939c0c8a813ac8534e80" category="inline-link-macro">下一步：网络设备故障预测用例摘要</block>
  <block id="6b90a2e4861b0a6faf4f640ece131282" category="paragraph"><block ref="6b90a2e4861b0a6faf4f640ece131282" category="inline-link-macro-rx"></block></block>
  <block id="232abf87aa3028a990e94f6bb51fe8bd" category="summary">要在 Kubernetes 集群中执行单节点 AI 和 ML 作业，请从部署跳转主机执行此页面上的任务。</block>
  <block id="46300fa439cc237919f854816fc89fc2" category="doc">执行单节点 AI 工作负载</block>
  <block id="ebbcd572ece7625ba24f2c3ecda6d5b5" category="paragraph">要在 Kubernetes 集群中执行单节点 AI 和 ML 作业，请从部署跳转主机执行以下任务。借助 Trident ，您可以快速轻松地使可能包含数 PB 数据的数据卷可供 Kubernetes 工作负载访问。要使此类数据卷可从 Kubernetes Pod 中访问，只需在 Pod 定义中指定 PVC 即可。此步骤是 Kubernetes 本机操作；不需要 NetApp 专业知识。</block>
  <block id="e3305581bc1f67d1989e08e42a43c113" category="admonition">本节假定您已将尝试在 Kubernetes 集群中执行的特定 AI 和 ML 工作负载容器化（采用 Docker 容器格式）。</block>
  <block id="6bdbab1141be3c52dec1f29c4c5fdf52" category="inline-link">ImageNet 网站</block>
  <block id="08eb6cc7203ec1b36805e4767d450467" category="list-text">以下示例命令显示了如何为使用 ImageNet 数据集的 TensorFlow 基准工作负载创建 Kubernetes 作业。有关 ImageNet 数据集的详细信息，请参见<block ref="19a9693db577a40175aef26761f77fe7" category="inline-link-rx"></block>。</block>
  <block id="56920225f5c2d474925baad76ae3e7ce" category="paragraph">此示例作业请求八个 GPU ，因此可以在具有八个或更多 GPU 的单个 GPU 工作节点上运行。此示例作业可以在集群中提交，其中包含八个或更多 GPU 的工作节点不存在或当前占用另一个工作负载。如果是，则此作业将保持待定状态，直到此类辅助节点变为可用为止。</block>
  <block id="dd36f0d653a70e6e6c7e838454ee7e20" category="paragraph">此外，为了最大程度地提高存储带宽，包含所需训练数据的卷会在该作业创建的 POD 中挂载两次。此外，还会在 Pod 中挂载另一个卷。第二个卷将用于存储结果和指标。这些卷在作业定义中使用 PVC 的名称进行引用。有关 Kubernetes 作业的详细信息，请参见<block ref="0ceaf9ba0112a862c5fa5f8d38bee04b" category="inline-link-rx"></block>。</block>
  <block id="225e66547943a27f429558dce4e639e2" category="paragraph">在本示例作业创建的 Pod 中， `edium` 值为 `Memory` 的` emtyDir `m卷将挂载到 ` /dev/shm` 。Docker 容器运行时自动创建的 ` /dev/shm` 虚拟卷的默认大小有时可能不足以满足 TensorFlow 的需求。按以下示例所示挂载 `emptyDir` 卷可提供足够大的 ` /dev/shm` 虚拟卷。有关 `emptyDir` 卷的详细信息，请参见<block ref="ad2ab91baa5517930a567ac7588e61fd" category="inline-link-rx"></block>。</block>
  <block id="ac5f33311bbfb696a5966510fc4a38b8" category="paragraph">在此示例作业定义中指定的单个容器将获得 `securityContext &gt; privileged` 值 `true` 。此值表示容器在主机上具有有效的 root 访问权限。在这种情况下使用此标注是因为要执行的特定工作负载需要 root 访问权限。具体而言，工作负载执行的清除缓存操作需要 root 访问权限。是否需要此 `特权： true` 标注取决于您要执行的特定工作负载的要求。</block>
  <block id="8db728b0062c29a77e48bcd3be77be7f" category="list-text">确认您在步骤 1 中创建的作业正在正确运行。以下示例命令确认已按照作业定义中的指定为此作业创建了一个 POD ，并且此 POD 当前正在其中一个 GPU 工作节点上运行。</block>
  <block id="7b2880ed5066d8fda6f6d5a4ec8f39ac" category="list-text">确认您在步骤 1 中创建的作业已成功完成。以下示例命令确认作业已成功完成。</block>
  <block id="bead823acab8a06d478eb02c7ff84d35" category="list-text">* 可选： * 清理作业项目。以下示例命令显示了在步骤 1 中创建的作业对象的删除情况。</block>
  <block id="cb215cf0e9fb88bd1fc97b4ba53fd36f" category="paragraph">删除作业对象时， Kubernetes 会自动删除任何关联的 Pod 。</block>
  <block id="c9c8f04783cdc1989a221d985dac851c" category="inline-link-macro">下一步：执行同步分布式 AI 工作负载</block>
  <block id="cce4ed20d317c89cd5f7ae30dd75f1ea" category="paragraph"><block ref="cce4ed20d317c89cd5f7ae30dd75f1ea" category="inline-link-macro-rx"></block></block>
  <block id="65f63f96295566cd4278775eef1b4c8c" category="doc">为要求较低的工作负载或交互式工作负载分配的 GPU 百分比</block>
  <block id="1b3d285072ee60a98cde2f66b6e47fde" category="paragraph">当研究人员和开发人员在开发，超参数调整或调试阶段使用其模型时，此类工作负载通常所需的计算资源更少。因此，配置百分比 GPU 和内存的效率更高，以便可以将同一 GPU 同时分配给其他工作负载。Run ： AI 的业务流程解决方案为 Kubernetes 上的容器化工作负载提供了一个百分比 GPU 共享系统。该系统支持运行 CUDA 程序的工作负载，尤其适用于推理和模型构建等轻型 AI 任务。部分 GPU 系统可以透明地为数据科学和 AI 工程团队提供在一个 GPU 上同时运行多个工作负载的能力。这样，企业就可以在同一硬件上运行更多的工作负载，例如计算机视觉，语音识别和自然语言处理，从而降低成本。</block>
  <block id="5db1fcd5bb529fa2475aaf893414d2e4" category="paragraph">Run ： AI 的百分比 GPU 系统可利用自身的内存和计算空间有效地创建虚拟化逻辑 GPU ，容器可以使用和访问这些 GPU ，就像它们是独立的处理器一样。这样，多个工作负载便可在同一 GPU 上的容器中并排运行，而不会相互干扰。解决方案是透明，简单且可移植的，不需要对容器本身进行更改。</block>
  <block id="71cdf780e37cc9571b5fcd0bf89958b1" category="paragraph">一个典型的使用情形可能会看到在同一个 GPU 上运行两到八个作业，这意味着您可以使用同一个硬件执行八倍的工作。</block>
  <block id="0a1f69603a47f75f701f92ad7d94e3c5" category="paragraph">对于下图中的作业 `frac05` 属于项目 `team-d` ，我们可以看到分配的 GPU 数量为 0.5 。这一点可通过 `nvidia-smi` 命令进一步验证，该命令显示容器可用的 GPU 内存为 16 ， 255 MB ： DGX-1 节点中每个 V100 GPU 32 GB 的一半。</block>
  <block id="e6d9743072cdc6867ea2980c7db7e7fd" category="paragraph"><block ref="e6d9743072cdc6867ea2980c7db7e7fd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9afb11deef37d75cf56adc6e1a2f4020" category="inline-link-macro">接下来：通过过度配额 GPU 分配实现高集群利用率</block>
  <block id="15968f671ef08561726e3064358c707b" category="paragraph"><block ref="15968f671ef08561726e3064358c707b" category="inline-link-macro-rx"></block></block>
  <block id="ff9caff469d56a572a569942ca24c8b4" category="list-text">NVIDIA DGX 系统</block>
  <block id="b69073c22b4269568fd577ea090ce638" category="list-text">NVIDIA DGX-1 系统<block ref="45a310b0e4b087b75cb073303044f6f9" category="inline-link-rx"></block></block>
  <block id="fe287c518b9b1345defadacdc6a9ecbf" category="list-text">NVIDIA V100 Tensor 核心 GPU<block ref="fad8218d69ce01748faed5492aa5d3ef" category="inline-link-rx"></block></block>
  <block id="d6a8716635a5681cde357a465953bc72" category="list-text">NVIDIA NGC<block ref="5c75bfead88762783d54deaaa3d62735" category="inline-link-rx"></block></block>
  <block id="11bdb18e1c5e7d1e4362c9d2f6956fc8" category="list-text">运行： AI 容器编排解决方案</block>
  <block id="5afc85c81e76f427a293dd861e0109a3" category="list-text">Run ： AI 产品简介<block ref="64b899832bfcad18bb426fb355a0d03b" category="inline-link-rx"></block></block>
  <block id="9acfbb098f0d9b45b5897b44ae347ee9" category="list-text">运行： AI 安装文档<block ref="cb05a776556ca5a25aec417185ef6863" category="inline-link-rx"></block>
<block ref="b2e8533fae57aa9047d7731db51b6dfe" category="inline-link-rx"></block></block>
  <block id="b0d8a6d0eebdc42ac243c16f9137118d" category="list-text">在 Run ： AI 命令行界面中提交作业<block ref="97ec6c214f99d7e6a39194a167aeecc8" category="inline-link-rx"></block>
<block ref="d75350381b5fda5cc9c9a1ce34c24299" category="inline-link-rx"></block></block>
  <block id="9bd35f4f3f6faa9e9330c54fd2086967" category="list-text">在 Run ： AI 命令行界面中分配 GPU 分数<block ref="e343516de5fb56c6a0d652bcdfceaab7" category="inline-link-rx"></block></block>
  <block id="ddb27cb97146c8f5964eaf368feb4ce0" category="list-text">技术报告<block ref="3ce56c027572d1908d65b63056be024f" category="inline-link-rx"></block></block>
  <block id="2273cd603e277bb35f96881a557b0608" category="list-text">简短演示<block ref="61e3673018126d9a106032d9ff691322" category="inline-link-rx"></block></block>
  <block id="45f26b752dfae88ec8c7def446162521" category="list-text">GitHub 存储库<block ref="f9a4909739179bedfa8ba1d225598979" category="inline-link-rx"></block></block>
  <block id="c36e36ff8b7edf8dd17781148ed57337" category="list-text">NetApp AFF A 系列产品规格<block ref="9a84c14d2692222552174943486e7136" category="inline-link-rx"></block></block>
  <block id="ffc4c8e8bc10afc438d9c590f44e3b51" category="list-text">适用于全闪存 FAS 的 NetApp 闪存优势<block ref="9dcd8a7bfc88cf6bbca4b422861950bf" category="inline-link-rx"></block></block>
  <block id="7843ce52c43038d88c2f54d85f3f764d" category="list-text">ONTAP 9 信息库<block ref="974aeb47ab8fd0a635d02d8ac80b9eb1" category="inline-link-rx"></block></block>
  <block id="5f1b8a708e16776ca4372c71dc377653" category="list-text">NetApp ONTAP FlexGroup Volumes 技术报告<block ref="1ab29fc7fde3319a82a477ec308cf820" category="inline-link-rx"></block></block>
  <block id="062d7e5979c653f33e03cb0aaeaec6e9" category="list-text">采用 DGX-1 的 ONTAP AI 和 Cisco 网络设计指南<block ref="b141781260425e95eee945147e2f0d99" category="inline-link-rx"></block></block>
  <block id="59086e50189644b7c19947dfa68f8395" category="list-text">《采用 DGX-1 的 ONTAP AI 和 Cisco 网络部署指南》<block ref="921f17c41dea89b0a711f380e9864e09" category="inline-link-rx"></block></block>
  <block id="062afad089226e62b53e77ba2af24574" category="list-text">采用 DGX-1 和 Mellanox 网络设计指南的 ONTAP AI<block ref="f2345b2674d3976c091d4af042c36a8f" category="inline-link-rx"></block></block>
  <block id="e6b737f0513721f0a8024f538058333e" category="list-text">采用 DGX-2 的 ONTAP AI 设计指南<block ref="b38db7c217c396412f601b87dfc58a8c" category="inline-link-rx"></block></block>
  <block id="1f9a7430deed674d394796eaea14138f" category="paragraph">本技术报告为拥有小型到大型数据科学 / 工程团队的客户提供了一些准则，可通过使用运行： AI 命令行界面和 NetApp ONTAP AI 上的系统信息板来优化 Kubernetes 集群和 GPU 的使用。此外，它还包括运行： AI 平台安装信息，测试场景以及适用于经验证的测试用例的详细命令。Run ： AI Orchestration 解决方案与 NetApp AI 控制平面相结合，可通过优化资源利用率提高开发人员的工作效率，从而加快创新速度。</block>
  <block id="892726726d592ee18c9ee8ad25a088ae" category="inline-link-macro">下一步：内容提要</block>
  <block id="e6c479abab08e982bd2f0efd6e3e405a" category="paragraph"><block ref="e6c479abab08e982bd2f0efd6e3e405a" category="inline-link-macro-rx"></block></block>
  <block id="c2ae2e58baf01933984b63bbfd58c6c2" category="summary">本节介绍在 Kubernetes 集群中部署气流时必须完成的任务。</block>
  <block id="7d2a9e50f39ee00c2b180900e7bacc92" category="doc">Apache Airflow 部署</block>
  <block id="f23c532f744716d23270b963c3eca570" category="paragraph">NetApp 建议在 Kubernetes 顶部运行 Apache Airflow 。本节介绍在 Kubernetes 集群中部署气流时必须完成的任务。</block>
  <block id="1874d60ac69d2a867825b1b7ab0f9297" category="admonition">可以在 Kubernetes 以外的平台上部署 Airflow 。在 Kubernetes 以外的平台上部署气流不在此解决方案的范围内。</block>
  <block id="c7a7dda60a4edd19d3b5bad13d43d605" category="list-text">您已有一个工作正常的 Kubernetes 集群。</block>
  <block id="e59b39fd5c122dde3747561247eb2888" category="list-text">您已按照《 NetApp Trident 部署和配置》一节中所述在 Kubernetes 集群中安装和配置 NetApp Trident 。</block>
  <block id="ead9806c164633fcb334dc844a3d588f" category="section-title">安装 Helm</block>
  <block id="f9093f3279eca680041e957a2a0505dd" category="paragraph">Airflow 可使用 Kubernetes 常用的软件包管理器 Helm 进行部署。在部署气流之前，必须在部署跳转主机上安装 Helm 。要在部署跳转主机上安装 Helm ，请按照<block ref="cf3f65305f288242c9d49061d26ec8ec" category="inline-link-rx"></block> 在官方 Helm 文档中。</block>
  <block id="678c0949a1824bf54eba73ab0a2609d8" category="paragraph">在部署 Airflow 之前，您必须在 Kubernetes 集群中指定一个默认 StorageClass 。气流部署过程会尝试使用默认 StorageClass 配置新的永久性卷。如果未将任何 StorageClass 指定为默认 StorageClass ，则部署将失败。要在集群中指定默认 StorageClass ，请按照一节中所述的说明进行操作 <block ref="b868c02e3d390c0001190527c8f4ba0b" category="inline-link-macro-rx"></block>。如果已在集群中指定默认 StorageClass ，则可以跳过此步骤。</block>
  <block id="c7feb8d7350bb5372c4dd0dfc1383865" category="section-title">使用 Helm 部署气流</block>
  <block id="a781e1f3dbd7b5f15c3257febe820528" category="paragraph">要使用 Helm 在 Kubernetes 集群中部署气流，请从部署跳转主机执行以下任务：</block>
  <block id="fe1b26293aba127732d69bdc90866794" category="list-text">按照说明使用 Helm 部署气流<block ref="e4140084ec840191180d755827375d89" category="inline-link-rx"></block> 用于 Artifact Hub 上的官方气流图表。下面的示例命令显示了如何使用 Helm 部署气流。根据您的环境和所需配置，根据需要修改，添加和 / 或删除 `custom- values.yaml` 文件中的值。</block>
  <block id="fa7edbfc4d9facbb8db918116ff0ae46" category="list-text">确认所有气流 Pod 均已启动且正在运行。所有 POD 可能需要几分钟的时间才能启动。</block>
  <block id="9bb040ffef8c89d0861be81732ca17de" category="list-text">按照步骤 1 中使用 Helm 部署 Airflow 时控制台上印有的说明获取 Airflow Web 服务 URL 。</block>
  <block id="0db6a8f601b49c6c3780b668eac398a8" category="list-text">确认您可以访问 Airflow Web 服务。</block>
  <block id="6a8e19652a540e359304ba812d39ea8e" category="paragraph"><block ref="6a8e19652a540e359304ba812d39ea8e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2daf503a1aafa2def86650bd501a947c" category="inline-link-macro">接下来： Apache 气流工作流示例</block>
  <block id="02c2198e64fb4832a5641ee17b312259" category="paragraph"><block ref="02c2198e64fb4832a5641ee17b312259" category="inline-link-macro-rx"></block></block>
  <block id="1e48409a293254dced52407be3dbb722" category="doc">使用 Jarvis ， Cloud Sync 和 Nemo 构建虚拟助手</block>
  <block id="68dc442228015e015ca6272edb5994e4" category="inline-link-macro">接下来：使用 Jarvis ， Cloud Sync 和 Nemo 概述构建虚拟助手</block>
  <block id="f308b9afc8e29196ebb4fe535e29fc51" category="paragraph"><block ref="f308b9afc8e29196ebb4fe535e29fc51" category="inline-link-macro-rx"></block></block>
  <block id="3ad0505876550699ce505845f96683a7" category="doc">使用 NetApp Cloud Sync 归档对话历史记录</block>
  <block id="a7e4c14a726c28e6cb4b935701ac2899" category="paragraph">通过每天将对话历史记录转储到 CSV 文件中一次，我们可以利用 Cloud Sync 将日志文件下载到本地存储中。下图显示了在内部和公有云中部署 JarVis ，同时使用 Cloud Sync 发送 Nemo 培训对话历史记录的架构。有关 Nemo 培训的详细信息，请参见一节 <block ref="14a0a4dd1a1c18cba42b2036fe4dfc33" category="inline-link-macro-rx"></block>。</block>
  <block id="e60c4461b2b4dcf3aa8535e3aab780b3" category="paragraph"><block ref="e60c4461b2b4dcf3aa8535e3aab780b3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="00717575e300ae9f18fa0a24d97bcca5" category="inline-link-macro">接下来：使用 Nemo 培训扩展意向模型</block>
  <block id="7ee8a10f8da0d566f0c5cccb9528b186" category="paragraph"><block ref="7ee8a10f8da0d566f0c5cccb9528b186" category="inline-link-macro-rx"></block></block>
  <block id="c4e7b8572218b2c9421122c7ab76be25" category="paragraph">NetApp 和 cnvrg.io 合作为客户提供了一个完整的数据管理解决方案，用于 ML 和 DL 软件开发。ONTAP AI 可为任何规模的运营提供高性能计算和存储，而 cnvrg.io 软件可简化数据科学工作流并提高资源利用率。</block>
  <block id="8537de5688b6b855ec8b5465eca4e8f6" category="list-text">NVIDIA DGX Station ， V100 GPU ， GPU Cloud</block>
  <block id="e4c64a7040f5ee4721b3880f35ae02c8" category="inline-link"><block ref="e4c64a7040f5ee4721b3880f35ae02c8" category="inline-link-rx"></block></block>
  <block id="432a0462f3a215c89d6067d01ac9fee8" category="list-text">NVIDIA DGX Station<block ref="00e84bc2760804fd15a292583676639b" category="inline-link-rx"></block></block>
  <block id="a8135dcfdfd9c1074b55895b8d51f9be" category="list-text">NVIDIA V100 Tensor 核心 GPU<block ref="a724832176ce84a9d4be5c34e44891d3" category="inline-link-rx"></block></block>
  <block id="f3e44b157fa7ead37042e8a6f3b14071" category="list-text">NVIDIA NGC<block ref="839d9b8469a8d9554891a7515a2b9be7" category="inline-link-rx"></block></block>
  <block id="944c1fe2317541350506cecb6131b857" category="inline-link"><block ref="944c1fe2317541350506cecb6131b857" category="inline-link-rx"></block></block>
  <block id="d3ceb6166da1ada512f22bc7832ec047" category="list-text">NVIDIA JarVis<block ref="34ae4389dc7afcada801d63c08e322b9" category="inline-link-rx"></block></block>
  <block id="21ce987b6ba4d344f1427dc72d497669" category="inline-link"><block ref="21ce987b6ba4d344f1427dc72d497669" category="inline-link-rx"></block></block>
  <block id="7bf7a8db8c3809766aa2579c2eadf37d" category="list-text">NVIDIA JarVis Early Access<block ref="2daee9604c6a07f74e6776847d2ee61e" category="inline-link-rx"></block></block>
  <block id="e58709fef6e6eb28a11c06d27c5d6aa7" category="inline-link"><block ref="e58709fef6e6eb28a11c06d27c5d6aa7" category="inline-link-rx"></block></block>
  <block id="852c7bf0a8f3b30a5a001dbf642dbebe" category="list-text">NVIDIA Nemo<block ref="fa9e246f0ef36a285adacc70507ae974" category="inline-link-rx"></block></block>
  <block id="299a4717590cda2cfe1db321802b4995" category="inline-link"><block ref="299a4717590cda2cfe1db321802b4995" category="inline-link-rx"></block></block>
  <block id="dfc2ce4fd02d20052bebaa2e6b8cd029" category="list-text">开发人员指南<block ref="9940ba67713949ce4f2fc05d3a37bd8c" category="inline-link-rx"></block></block>
  <block id="5467c9d1c07a7d1786936650b3c2d52a" category="list-text">NetApp AFF A 系列产品规格<block ref="0d9d8991a05834f0e52a99b37ce360b8" category="inline-link-rx"></block></block>
  <block id="6bb399f406fc5ac4150ad21c6aa05ab2" category="list-text">适用于全闪存 FAS 的 NetApp 闪存优势<block ref="72cf25e9f1e13167cd0dde6f285552ea" category="inline-link-rx"></block></block>
  <block id="9415aef2732728cc097fbbc9ab96b2fe" category="list-text">ONTAP 9 信息库<block ref="8ac8a4cdf844ed67e9ec6ddc4b3e95ad" category="inline-link-rx"></block></block>
  <block id="d106dc348953acc0500f03a25379282e" category="list-text">NetApp ONTAP FlexGroup Volumes 技术报告<block ref="7a26d62dac2be507dcc3e5b9da0ed765" category="inline-link-rx"></block></block>
  <block id="05dbc5885d3bec70d2317a4b51526d96" category="list-text">采用 DGX-1 的 ONTAP AI 和 Cisco 网络设计指南<block ref="9fbee18519e76388280bc1f8e3fd6c7e" category="inline-link-rx"></block></block>
  <block id="af5797305db370f4f59d77bf7c73160b" category="list-text">《采用 DGX-1 的 ONTAP AI 和 Cisco 网络部署指南》<block ref="aef3d0752148699921f8a251537d5ff3" category="inline-link-rx"></block></block>
  <block id="f2345b2674d3976c091d4af042c36a8f" category="inline-link"><block ref="f2345b2674d3976c091d4af042c36a8f" category="inline-link-rx"></block></block>
  <block id="f63c45f352478237d0d0fe7c5a26d6bf" category="list-text">采用 DGX-1 和 Mellanox 网络设计指南的 ONTAP AI<block ref="459df3a4bfb1f89f6920196001257745" category="inline-link-rx"></block></block>
  <block id="b38db7c217c396412f601b87dfc58a8c" category="inline-link"><block ref="b38db7c217c396412f601b87dfc58a8c" category="inline-link-rx"></block></block>
  <block id="da8009e462fd2ec5eeb41b4cf3721f7a" category="list-text">采用 DGX-2 的 ONTAP AI 设计指南<block ref="86d70269673ee41c37a2673f7d3655ce" category="inline-link-rx"></block></block>
  <block id="ca6d5ad374e3cf268dec341c0c398442" category="summary">在此架构中，重点关注 AI 或机器学习（ ML ）分布式车道检测训练流程中计算最密集的部分。</block>
  <block id="8cb13336dc020a2fb7bca9d4e940cc64" category="paragraph">在此架构中，重点关注 AI 或机器学习（ ML ）分布式车道检测训练流程中计算最密集的部分。车道检测是自动驾驶中最重要的任务之一，它有助于通过对车道标记进行定位来引导车辆。车道标记等静态组件可引导车辆以交互方式安全地在高速公路上驾驶。</block>
  <block id="0721542454dcaa77c97cd9c545d9063f" category="paragraph">基于卷积神经网络（ CNN ）的方法将场景理解和分段提升到了一个新的水平。虽然对于结构较长的对象以及可能被堵塞的区域（例如，极柱，车道上的阴影等）来说，这种方法并不能很好地发挥作用。空间对流神经网络（ SCNN ）将 CNN 概括为丰富的空间级别。它可以在同一层的神经元之间传播信息，从而最适合结构化对象，例如通道，极或带有 occlusi 的叉车。这种兼容性是因为空间信息可以得到增强，并且可以保持平稳性和连续性。</block>
  <block id="df38a65c87631c9530cc3a6832ea7a7d" category="paragraph">需要在系统中注入数千个场景图像，以便模型能够学习和区分数据集中的各个组件。这些图像包括天气，日间或夜间，多层公路以及其他交通状况。</block>
  <block id="f7759f002b4a60b5c837abb7f8936037" category="paragraph">对于培训，需要高质量和高数量的数据。单个 GPU 或多个 GPU 可能需要数天到数周才能完成培训。数据分布式培训可通过使用多个和多节点 GPU 来加快此过程。Horovod 就是这样一个框架，它可以提供分布式培训，但在 GPU 集群之间读取数据可能会成为一种障碍。Azure NetApp Files 提供超快，高吞吐量和持续低延迟，可提供横向扩展 / 纵向扩展功能，从而充分利用 GPU 的计算容量。我们的实验证实，集群中的所有 GPU 平均使用 96% 以上的 GPU 来使用 SCNN 进行通道检测训练。</block>
  <block id="bf8dd94f74c5878ba969abeeef0286d1" category="section-title">目标受众</block>
  <block id="0ca450eccdc7141b5e85e9e691a7f16b" category="paragraph">数据科学在 IT 和业务领域整合了多个学科，因此我们的目标受众中包含多个角色：</block>
  <block id="8acb1f50d0ada4e1149c01a5aa15b9ce" category="list-text">数据科学家需要灵活地使用自己选择的工具和库。</block>
  <block id="d0ba3808090644db73caeb23fcc2b17c" category="list-text">数据工程师需要了解数据的流动方式及其所在位置。</block>
  <block id="22a8c99419dee54a28ed1e2355a6706b" category="list-text">自主驾驶用例专家。</block>
  <block id="18f66c4bad233033dabddf6ff1289eeb" category="list-text">云管理员和架构师设置和管理云（ Azure ）资源。</block>
  <block id="4c9b6067f04f945e9247ecd00c22e328" category="list-text">开发运营工程师需要使用工具将新的 AI/ML 应用程序集成到持续集成和持续部署（ CI/CD ）管道中。</block>
  <block id="53720cf6403ac6b8a2402cce66c79d4f" category="list-text">业务用户希望能够访问 AI/ML 应用程序。</block>
  <block id="68dcdc6243e54c14b4c41c129d574c43" category="paragraph">在本文档中，我们将介绍 Azure NetApp Files ， Run ： AI 和 Microsoft Azure 如何帮助这些角色为业务带来价值。</block>
  <block id="8f4c7939e8a42e023939df947aba54f6" category="section-title">解决方案技术</block>
  <block id="8017303b9b2c96742151083f089fc51f" category="paragraph">本节介绍了在 Azure 云中全面运行的大规模分布式训练解决方案的通道检测用例的技术要求。下图概述了解决方案架构。</block>
  <block id="f17291da16ed3dd7b705548f16706120" category="paragraph">此解决方案中使用的元素包括：</block>
  <block id="f28c5620810ae2a6961a1811277a7ff8" category="list-text">Azure Kubernetes Service （ AKS ）</block>
  <block id="03023f4a63d3d8f8ff86ff8246f75b9a" category="list-text">采用 NVIDIA GPU 的 Azure 计算 SKU</block>
  <block id="ae5ba69294a1b9feb03e6dd75395092c" category="list-text">运行： AI</block>
  <block id="951370659c41a55ac9f80ff19c2f4b26" category="paragraph">中列出了指向此处提及的所有要素的链接 <block ref="c8b73068ae16e202922904f7ed452f8e" category="inline-link-macro-rx"></block> 部分。</block>
  <block id="00d9279819736707d2b224ec427a8aae" category="paragraph"><block ref="00d9279819736707d2b224ec427a8aae" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e6a2faff353ad4e74bf3ee92e5d8b9c6" category="section-title">云资源和服务要求</block>
  <block id="5b691a1a00c6c03be70e559f55ae4fef" category="paragraph">下表列出了实施解决方案所需的硬件组件。在任何解决方案实施中使用的云组件可能会因客户要求而异。</block>
  <block id="c8e2277ecfb1427838c488c217f99466" category="cell">云</block>
  <block id="5f3bc5eb45e6b472bf3345d1036945e9" category="cell">AK</block>
  <block id="55b8660903ebaaed924e945432fe269e" category="cell">至少三个系统节点和三个 GPU 工作节点</block>
  <block id="3580a6b3e7ba0d55af17daee07244cbd" category="cell">虚拟机（ VM ） SKU 系统节点</block>
  <block id="8f75b0af54b5e672a660f4f1f1557f18" category="cell">三个 Standard_DS2_v2</block>
  <block id="a6066b29e1c4603af2c5c46cf549f764" category="cell">VM SKU GPU 工作节点</block>
  <block id="6aa4bab72f83c0b68587ee208f2c9ab0" category="cell">三个 Standard_NC6s_v3</block>
  <block id="3468e131592d70a22139936f3fb21403" category="cell">4 TB 标准层</block>
  <block id="cb251883efe045266871b7dd15229644" category="cell">版本或其他信息</block>
  <block id="bb451ae1fa5a629a0307949d38a60e2d" category="cell">AK — Kubernetes 版本</block>
  <block id="f2d1dd8f39098da402272f7606fd2638" category="cell">1.18.14</block>
  <block id="13c5eaa211a3778d391d5c8f65b80234" category="cell">运行： AI 命令行界面</block>
  <block id="89633b9d6f401377b6ece0682b92530a" category="cell">v2.2.25</block>
  <block id="4b138e2d1492b1e550d42348c65cbf82" category="cell">运行： AI Orchestration Kubernetes Operator 版本</block>
  <block id="6db851ff24c4b893a85242e63bbea119" category="cell">1.0.109</block>
  <block id="f5f1c35a78d5584cdb787d4e3b6b10b6" category="cell">Horovod</block>
  <block id="4a7724061c17f8cf5be61a8adf4c170f" category="cell">0.21.2.</block>
  <block id="44adee2c140fc723412bae93732e5993" category="cell">20.01.1</block>
  <block id="1a7fa7cc4c79d5163f691ff60e6fc34d" category="doc">运行： AI 信息板和视图</block>
  <block id="3473dab452c5446b1a01a923e9879461" category="paragraph">在 Kubernetes 集群上安装 Run ： AI 并正确配置容器后，您将看到以下信息板和视图<block ref="2af90fde6f4d8ae5947b005d1208e742" category="inline-link-rx"></block> 在浏览器中，如下图所示。</block>
  <block id="f977554b7762214959db36c20484c697" category="paragraph"><block ref="f977554b7762214959db36c20484c697" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8dfd99441ce89d4be896e4fc9757f7d2" category="paragraph">集群中共有 16 个 GPU ，由两个 DGX-1 节点提供。您可以查看节点数，可用 GPU 总数，分配给工作负载的已分配 GPU ，正在运行的作业总数，待定作业以及闲置已分配 GPU 。右侧的条形图显示每个项目的 GPU ，其中总结了不同团队如何使用集群资源。中间是当前正在运行的作业列表，其中包含作业详细信息，包括作业名称，项目，用户，作业类型， 每个作业正在运行的节点，为此作业分配的 GPU 数量，作业的当前运行时间，作业进度百分比以及该作业的 GPU 利用率。请注意，集群利用率不足（ GPU 利用率为 23% ），因为一个团队只提交了三个正在运行的作业（`team-A` ）。</block>
  <block id="67545e2efac33412706ff883eff2e1c4" category="paragraph">在下一节中，我们将介绍如何在 " 项目 " 选项卡中创建多个团队，并为每个团队分配 GPU ，以便在每个集群有大量用户时最大限度地提高集群利用率并管理资源。这些测试场景模拟了在训练，推理和交互式工作负载之间共享内存和 GPU 资源的企业环境。</block>
  <block id="73eea118e4762640a7f60136f3e5c1a0" category="inline-link-macro">接下来：为数据科学团队创建项目并分配 GPU</block>
  <block id="7c2c470385b4f61a9e9b5b0881d2f061" category="paragraph"><block ref="7c2c470385b4f61a9e9b5b0881d2f061" category="inline-link-macro-rx"></block></block>
  <block id="efbb4ade01a09771413f4c09880e800a" category="paragraph">在本节中，我们将扩展多个团队提交工作负载并超过其配额的情形。通过这种方式，我们将展示 Run ： AI 的公平性算法如何根据预设配额比率分配集群资源。</block>
  <block id="3bd5af2e3a75651c4b9c45d26400fbaa" category="paragraph">此测试场景的目标：</block>
  <block id="cc9e23eb4fe1626d97a5dfeab7cf0d25" category="list-text">显示多个团队请求超过其配额的 GPU 时的排队机制。</block>
  <block id="050060785f2852b203c9e82254f2946a" category="list-text">显示系统如何根据配额之间的比率在超过配额的多个组之间分配公平的集群份额，以便具有较大配额的组获得较大的备用容量份额。</block>
  <block id="9e06f625a31670e60f0a8a09917c3ba0" category="paragraph">结束时 <block ref="26be59a535445b1fffeef12f5e70f3e6" category="inline-link-macro-rx"></block>，有两个工作负载排队：一个用于 `team-b` ，一个用于 `team-c` 。在本节中，我们将对其他工作负载进行排队。</block>
  <block id="286cda6cf9e9438a2cff2827773cfe7a" category="inline-link-macro">第 4.10 节的测试详细信息</block>
  <block id="0e7a9992269080ceaf2b90c188cbb861" category="paragraph">有关提交作业，使用的容器映像以及执行的命令序列等详细信息，请参见 <block ref="37da92aa18d307c3afbe514e0c6c1f90" category="inline-link-macro-rx"></block>。</block>
  <block id="b1df8ade330dd8e3c0962d87a58c1ba9" category="paragraph">根据部分提交所有作业时 <block ref="37da92aa18d307c3afbe514e0c6c1f90" category="inline-link-macro-rx"></block>系统信息板显示 `team-A` ， `team-b` 和 `team-c` 所有 GPU 都超过其预设配额。与预设的软配额（ 4 个）相比， `team-A` 占用的 GPU 更多，而 `team-b` 和 `team-c` 每个占用的 GPU 都比其软配额（ 2 个）多两个。分配的过度配额 GPU 的比率等于其预设配额的比率。这是因为系统使用预设配额作为优先级的参考，并在多个团队请求更多 GPU ，超过其配额时相应地进行配置。当企业数据科学团队积极参与 AI 模型的开发和生产时，这种自动负载平衡可以实现公平和优先级划分。</block>
  <block id="6effcb49094093af4699b050b9994a58" category="paragraph"><block ref="6effcb49094093af4699b050b9994a58" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b3be1869ca88e0b5881bc6d1da583426" category="list-text">系统开始将其他团队的工作负载取消队列。</block>
  <block id="d2325970b5cec6b47eb2c10267e3a599" category="list-text">除队顺序根据公平算法来确定，这样 `team-b` 和 `team-c` 会获得相同数量的超配额 GPU （因为它们具有类似的配额）， 而 `team-A` 获得的 GPU 数量是原来的两倍，因为他们的配额是 `team-b` 和 `team-c` 的两倍。</block>
  <block id="e2cc28c61aaa6ca7e38bd7ed9de398f1" category="list-text">所有分配都将自动完成。</block>
  <block id="c21d5f3e7c1336258c406bddcde6e0f8" category="paragraph">因此，系统应在以下状态下保持稳定：</block>
  <block id="8f2185cd998019e76038f11669cfbfb0" category="cell">已分配 GPU</block>
  <block id="3b55c08436be9e1008bb19488c139c88" category="cell">8/4.</block>
  <block id="f532ced5959572a93091758c821d7ff1" category="cell">超过配额的四个 GPU 。空队列。</block>
  <block id="b0713292a73176f9754bd528cecde2d1" category="cell">超过配额的两个 GPU 。一个工作负载已排队。</block>
  <block id="1f0189591d8d7dc1d3db367398fb49c5" category="cell">0/8</block>
  <block id="7c0de9de98eb6577a96694238e533915" category="cell">根本不使用 GPU ，没有已排队的工作负载。</block>
  <block id="948c32bf5f56f7dd6f3b2baab5f6d89d" category="paragraph">下图显示了各个部分的 Run ： AI Analytics 信息板中每个项目在一段时间内的 GPU 分配情况 <block ref="fdc629b29ea94e672f68b28bf3b661b4" category="inline-link-macro-rx"></block>， <block ref="26be59a535445b1fffeef12f5e70f3e6" category="inline-link-macro-rx"></block>，和 <block ref="2783e1454358e180d4e2876ef9492c64" category="inline-link-macro-rx"></block>。图中的每一行表示在任何时间为给定数据科学团队配置的 GPU 数量。我们可以看到，系统会根据提交的工作负载动态分配 GPU 。这样，当集群中存在可用 GPU 时，团队可以超过配额，然后根据公平原则抢占作业，最后达到所有四个团队的稳定状态。</block>
  <block id="d7fc0f82166b3a8fb5cbc55d2fb5efb0" category="paragraph"><block ref="d7fc0f82166b3a8fb5cbc55d2fb5efb0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e94097f9836d70dc64016728992696a0" category="inline-link-macro">下一步：将数据保存到 Trident 配置的 PersistentVolume</block>
  <block id="14718f3c808034f0e3239dbaf832a478" category="paragraph"><block ref="14718f3c808034f0e3239dbaf832a478" category="inline-link-macro-rx"></block></block>
  <block id="3c97b4929008c9f4091a8070f570ccd4" category="paragraph">我们使用行业标准基准工具 TensorFlow 基准测试对该系统的运行和性能进行了验证。ImageNet 数据集用于训练 RESNET-50 ，它是一种著名的用于图像分类的 Convolutional Neural Network （ CNN ） DL 模型。RESNET-50 可提供准确的训练结果，并缩短处理时间，从而使我们能够对存储产生足够的需求。</block>
  <block id="123704fec3ddad892d7c2ae5c4de301b" category="paragraph"><block ref="123704fec3ddad892d7c2ae5c4de301b" category="inline-link-macro-rx"></block></block>
  <block id="56dfbb2acffcc994819cbad5ec450617" category="paragraph">本节介绍与 ML 工作流中的数据缓存相关的概念和组件。</block>
  <block id="091fa9121c047db1dd48c3e2ab5f3c91" category="section-title">机器学习</block>
  <block id="d3f18dede1775f82df24232095090253" category="paragraph">对于全球许多企业和组织来说， ML 正迅速变得至关重要。因此， IT 和 DevOps 团队现在面临着标准化 ML 工作负载以及配置云，内部和混合计算资源的挑战，这些资源支持 ML 作业和管道所需的动态密集型工作流。</block>
  <block id="f71dfff263d05c18171dcf4b8c538ebf" category="section-title">基于容器的机器学习和 Kubernetes</block>
  <block id="002f314c3c41ffb741f8c91d2274af9a" category="paragraph">容器是在共享主机操作系统内核上运行的隔离用户空间实例。容器的采用率正在快速增长。容器可提供许多与虚拟机（ VM ）相同的应用程序沙盒优势。但是，由于虚拟机所依赖的虚拟机管理程序和子操作系统层已被消除，因此容器的重量要轻得多。</block>
  <block id="ce8bb3a31abf8bfcdcdacb34d96b010a" category="paragraph">此外，还可以通过容器直接将应用程序依赖关系，运行时间等内容高效地打包到应用程序中。最常用的容器打包格式是 Docker 容器。已采用 Docker 容器格式进行容器化的应用程序可以在可以运行 Docker 容器的任何计算机上执行。即使计算机上不存在应用程序的依赖关系，也是如此，因为所有依赖关系都打包在容器中。有关详细信息，请访问<block ref="5b5112034c22f544bc19c7a568afbfcb" category="inline-link-rx"></block>。</block>
  <block id="cfbe31a3e8ac3348240670510232ed8f" category="paragraph">Kubernetes 是一款广受欢迎的容器编排程序，可帮助数据科学家启动基于容器的灵活作业和管道。它还支持基础架构团队在一个受管云原生环境中管理和监控 ML 工作负载。有关详细信息，请访问<block ref="45556eaecf73275e38fa694031a104a3" category="inline-link-rx"></block>。</block>
  <block id="371ac536e4099ad82f6080b713ce9647" category="paragraph">cnvrg.io 是一款 AI 操作系统，可将企业管理，扩展和加速 AI 和数据科学开发的方式从研究转变为生产。代码优先平台由数据科学家为数据科学家构建，可灵活地在内部或云中运行。借助模型管理， MLOps 和持续的 ML 解决方案， cnvrg.io 为数据科学团队带来了一流的技术，因此他们可以减少在开发运营上花费的时间，专注于真正的魔力—算法。自使用 cnvrg.io 以来，各个行业的团队已获得更多生产模式，从而增加了业务价值。</block>
  <block id="ffb1d184fa3790eda48f1fc2d9c2f821" category="section-title">cnvrg.io 元数据计划程序</block>
  <block id="55fdc117823776b1ebb2170b4adfadf6" category="paragraph">cnvrg 。IO 具有一个独特的架构，允许 IT 和工程师将不同的计算资源连接到同一控制平面，并使 cnvrg-io 管理所有资源中的 ML 作业。这意味着它可以连接多个内部 Kubernetes 集群， VM 服务器和云帐户，并在所有资源上运行 ML 工作负载，如下图所示。</block>
  <block id="3c7fcf7e73eda18d7277b14914857f38" category="paragraph"><block ref="3c7fcf7e73eda18d7277b14914857f38" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cfff0196a077e92a8fe9326f97cb7fc5" category="section-title">cnvrg.io 数据缓存</block>
  <block id="ad693e5ee82f0e0486a136821d0a0779" category="paragraph">借助 cnvrg.io ，数据科学家可以利用其数据缓存技术定义热数据集和冷数据集版本。默认情况下，数据集存储在集中式对象存储数据库中。然后，数据科学家可以在选定计算资源上缓存特定数据版本，以节省下载时间，从而提高 ML 开发和工作效率。已缓存且在几天内未使用的数据集将自动从选定 NFS 中清除。只需单击一下鼠标即可执行缓存和清除操作；无需进行编码， IT 或 DevOps 工作。</block>
  <block id="42cf1b27f88752e1e98918981aa76e41" category="section-title">cnvrg.io 流和 ML 管道</block>
  <block id="1bc2ab6c98ec5b23a8a384861da1c6ca" category="paragraph">cnvrg.io 流是一种用于构建生产 ML 管道的工具。流中的每个组件都是一个脚本 / 代码，在选定计算上运行，并具有一个基本 Docker 映像。这种设计使数据科学家和工程师能够构建一个可同时在内部和云中运行的管道。cnvrg.io 可确保数据，参数和项目在不同组件之间移动。此外，还会对每个流进行监控和跟踪，以实现 100% 可重现的数据科学。</block>
  <block id="87cd11047488d3aa87eb2829eeb02305" category="section-title">cnvrg.io 核心</block>
  <block id="526c8ebff3057ce85f47160f32e15556" category="paragraph">cnvrg.io 核心是数据科学社区的一个免费平台，可帮助数据科学家更加专注于数据科学，而不是专注于开发运营。核心灵活的基础架构使数据科学家能够控制使用任何语言， AI 框架或计算环境，无论是内部环境还是云环境，以便他们能够做到最擅长的事情，构建算法。在任何 Kubernetes 集群上，只需一个命令即可轻松安装 cnvrg-io 核心。</block>
  <block id="f92894a2a2633c488de71d74ace474d7" category="paragraph">ONTAP AI 是一款适用于 ML 和深度学习（ DL ）工作负载的数据中心参考架构，它使用 NetApp AFF 存储系统和采用 Tesla V100 GPU 的 NVIDIA DGX 系统。ONTAP AI 基于基于 100 Gb 以太网的行业标准 NFS 文件协议，可为客户提供高性能 ML/DL 基础架构，该基础架构使用标准数据中心技术来降低实施和管理开销。通过使用标准化网络和协议， ONTAP AI 可以集成到混合云环境中，同时保持操作的一致性和精简性。作为一款经过预先验证的基础架构解决方案， ONTAP AI 可减少部署时间和风险，并显著降低管理开销，从而使客户能够更快地实现价值。</block>
  <block id="c2148c4c14a795b271b67f662900da4e" category="paragraph">Trident 是一款由 NetApp 开发和维护的开源存储编排程序，可大大简化 Kubernetes 工作负载的永久性存储的创建，管理和使用。Trident 本身是 Kubernetes 的本机应用程序，它直接在 Kubernetes 集群中运行。借助 Trident ， Kubernetes 用户（开发人员，数据科学家， Kubernetes 管理员等）可以采用他们已熟悉的标准 Kubernetes 格式创建，管理永久性存储卷并与其交互。同时，他们还可以利用 NetApp 的高级数据管理功能以及由 NetApp 技术提供支持的数据网络结构。Trident 可将持久存储的复杂性抽象化，并使其易于使用。有关详细信息，请访问<block ref="c98bfcab9052a99136f8752a5ac8ed0b" category="inline-link-rx"></block>。</block>
  <block id="55cf1a0f0fce69fd543500e5761dd26d" category="section-title">NetApp StorageGRID</block>
  <block id="ecfefbd82f34239e668be7aac3762226" category="paragraph">NetApp StorageGRID 是一款软件定义的对象存储平台，旨在通过提供简单的类似于云的存储来满足这些需求，用户可以使用 S3 协议访问这些存储。StorageGRID 是一种横向扩展系统，旨在支持互联网连接站点之间的多个节点，而不管距离如何。借助 StorageGRID 的智能策略引擎，用户可以选择跨站点的纠删编码对象，以便在远程站点之间实现地理故障恢复能力或对象复制，从而最大程度地减少 WAN 访问延迟。StorageGRID 在此解决方案中提供了一个出色的私有云主对象存储数据湖。</block>
  <block id="0f0b99ea2f70cd363c2c6a279f74e760" category="section-title">NetApp Cloud Volumes ONTAP</block>
  <block id="c060a6548f860aa739b76c0178ac7c5c" category="paragraph">NetApp Cloud Volumes ONTAP 数据管理软件可以灵活地为用户数据提供控制，保护和效率，同时还可以灵活地使用 AWS ， Google 云平台和 Microsoft Azure 等公有云提供商。Cloud Volumes ONTAP 是一款基于 NetApp ONTAP 存储软件构建的云原生数据管理软件，可为用户提供出色的通用存储平台来满足其云数据需求。在云端和内部部署中使用相同的存储软件，可以为用户提供 Data Fabric 的价值，而无需培训 IT 员工掌握全新的数据管理方法。</block>
  <block id="e16f1943a363dfa46a958bd450c2ecf8" category="paragraph">对于对混合云部署模式感兴趣的客户， Cloud Volumes ONTAP 可以在大多数公有云中提供相同的功能和同类领先的性能，以便在任何环境中提供一致，无缝的用户体验。</block>
  <block id="82ac5cdab15b3954389238dddbc12168" category="paragraph"><block ref="82ac5cdab15b3954389238dddbc12168" category="inline-link-macro-rx"></block></block>
  <block id="7acb83577df5643d1d6cd254e173b3d6" category="paragraph">此解决方案采用 NetApp HCI 系统设计，其中包含以下组件：</block>
  <block id="cd4038e118ff67ba5ca981d04bf4d26e" category="list-text">两个采用 NVIDIA T4 GPU 的 H615c 计算节点</block>
  <block id="179fae948c2e76c2fb4db909e32143e3" category="list-text">两个 H410c 计算节点</block>
  <block id="f308d8738debaa4c6ef310c92077dadb" category="list-text">两个 H410s 存储节点</block>
  <block id="8b9c3d7c233ef44634178d1258c99947" category="list-text">两个 Mellanox SN2010 10GbE/25GbE 交换机</block>
  <block id="bac01a65b652a4bc6266800eb20ce42b" category="paragraph">下图说明了 NetApp HCI AI 推理解决方案的解决方案架构。</block>
  <block id="7f7e6eb971b6cf998c9cf2770d4ac675" category="paragraph"><block ref="7f7e6eb971b6cf998c9cf2770d4ac675" category="inline-image-macro-rx" type="image"></block></block>
  <block id="102a06c492648dcf99d175225a30e1ab" category="paragraph">下图显示了此解决方案的虚拟和物理元素。</block>
  <block id="bc443c22e42a0f312b3c4fd0cdf07335" category="paragraph"><block ref="bc443c22e42a0f312b3c4fd0cdf07335" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1237b4b0e246e1981dbbb94c4ca2dbe6" category="paragraph">VMware 基础架构用于托管此推理解决方案所需的管理服务。这些服务无需部署在专用基础架构上；它们可以与任何现有工作负载共存。NetApp 部署引擎（ NDE ）使用 H410c 和 H410s 节点部署 VMware 基础架构。</block>
  <block id="ac5dfe68b4122c30250c98436a2561a8" category="paragraph">NDE 完成配置后，以下组件将部署为虚拟基础架构中的 VM ：</block>
  <block id="7b705ce85881c7055f77f7792492d9fd" category="list-text">* 部署跳转 VM.* 用于自动部署 NVIDIA DeepOps 。请参见 <block ref="a422d5bd699380c13a8ba943117fa4c8" category="inline-link-macro-rx"></block> 和存储管理。</block>
  <block id="f8115742651083cd784ae997dd8aaba8" category="list-text">* ONTAP Select 。 * 部署了 ONTAP Select 实例，以便为 Kubernetes 上运行的 AI 工作负载提供 NFS 文件服务和永久性存储。</block>
  <block id="d6d52bdd3e520520d0df24734ef454e4" category="list-text">* Kubernetes Masters 。 * 在部署期间，安装了三个 VM 并为其配置了受支持的 Linux 版本，并将其配置为 Kubernetes 主节点。设置管理服务后，使用受支持的 Linux 版本安装两个采用 NVIDIA T4 GPU 的 H615c 计算节点。这两个节点充当 Kubernetes 工作节点，并为推理平台提供基础架构。</block>
  <block id="d993b502abe38cef7c7256291e3ffa8e" category="paragraph">下表列出了实施解决方案所需的硬件组件。在任何特定解决方案实施中使用的硬件组件可能会因客户要求而异。</block>
  <block id="359b71e88f40029251366609358a302f" category="cell">层</block>
  <block id="a902e586417987e16e674a7f455cb736" category="cell">产品系列</block>
  <block id="d8926da09b0f3081dfd437d0a38726d0" category="cell">H615c</block>
  <block id="1aa3137f777d9007a262d9f052cda08f" category="cell">每个节点 3 个 NVIDIA Tesla T4 GPU</block>
  <block id="86ce4732a14cad8a997ad0f7f2dbc729" category="cell">H410c</block>
  <block id="e3de1e1230be7e505b63186630e4359d" category="cell">用于管理基础架构的计算节点</block>
  <block id="8d14b345881d7839a6e02ac6c24cc5fb" category="cell">H410s</block>
  <block id="584287d69b81ce2af75f6269b71b3321" category="cell">适用于操作系统和工作负载的存储</block>
  <block id="28d5ceb8cef5a0c3de2f7890b6816553" category="cell">10G/25G 交换机</block>
  <block id="24840e5cf86992c0a55d8fab2f1db08c" category="paragraph">下表列出了实施解决方案所需的软件组件。在任何特定解决方案实施中使用的软件组件可能会因客户要求而异。</block>
  <block id="ca76f78e731d8ab94af9e8a2cf93bbf7" category="cell">12.0.0.333</block>
  <block id="1f2dd0fa73775a152e8dd0485b2025c1" category="cell">20.07</block>
  <block id="806146d2ac9594dce05e360135218b07" category="cell">NetApp HCI 引擎</block>
  <block id="1739919a91787d6563c481fb34a9228e" category="cell">NDE</block>
  <block id="fb46e3c3c6cdb6496ab1731bb63dfe96" category="cell">VMware vSphere ESXi 6.7U1</block>
  <block id="b59d366489a2ba5397ca9b7b2bc5e7e9" category="cell">虚拟机管理程序管理系统</block>
  <block id="093c9cfcc3285be60692ad9c548bc7a7" category="cell">VMware vCenter Server 6.7U1</block>
  <block id="3e55cbcc3a339299b99440c80e2c1a26" category="cell">推理平台</block>
  <block id="638806c1f96330b82064b1dcf77a3dbe" category="cell">20.08</block>
  <block id="a7145d355d740865df1d9db5e3d5ba30" category="cell">1.1.7</block>
  <block id="d51d5ee15f404c2f4f7863bebcde1fac" category="cell">Ansible</block>
  <block id="70ec67364c1d9839debbfdba8957acb0" category="cell">2.9.5</block>
  <block id="d65c067bd0591c02c6cfa9c35f69893e" category="cell">1.17.9</block>
  <block id="c7f962fcce2b1e2e121ca3abed561ebd" category="cell">Docker CE 18.09.7</block>
  <block id="4fb3d1a2c0d9a4559a4dc7d327a14381" category="cell">CUDA 版本</block>
  <block id="a9d9d1b0257dda96d595bd00149cccdb" category="cell">10.2</block>
  <block id="b0ad03c64e23a3e58629ac949400204b" category="cell">GPU 设备插件</block>
  <block id="9095b9766535080cf78ede69f79c1fa9" category="cell">0.6.0</block>
  <block id="1f4e00506ff9fb5fe179f2ba1c60ff61" category="cell">3.1.2</block>
  <block id="a4c34b275662f08fd32d1024a18785c7" category="cell">NVIDIA Tesla 驱动程序</block>
  <block id="854dc5a0d36bfe994efb6c37c62951ca" category="cell">440.64.00</block>
  <block id="4f47ed320d0b9edab1ea2e65993f304b" category="cell">2.1.0 — NGC 容器 v20.07</block>
  <block id="749ea6eaf7477ef7096cb52e355a7c2f" category="cell">K8 主 VM</block>
  <block id="edc9f0a5a5d57797bf68e37364743831" category="cell">Linux</block>
  <block id="4cfbd4da4feafe88d2d1f658ddfaadb3" category="cell">此解决方案内核版本 4.15 中使用了 NetApp IMT ， NVIDIA DeepOps 和 GPUOperator Ubuntu 18.04.4 LTS 中所有受支持的分发版本</block>
  <block id="01f7560e54513ef56acb982fce38e915" category="cell">主机操作系统 / K8 工作节点</block>
  <block id="d6cb89c8d1e15ea8517018bb308e6bee" category="paragraph"><block ref="d6cb89c8d1e15ea8517018bb308e6bee" category="inline-link-macro-rx"></block></block>
  <block id="4c2db3e48f4f33a355c8e493453b53c2" category="inline-link-macro">接下来：软件要求</block>
  <block id="54870296c311c566be3a76b4a4df8e8c" category="paragraph"><block ref="43a6574de87222e6a8a22c8138fc4c45" category="inline-link-macro-rx"></block>。</block>
  <block id="48fe531f68f98f9f6afcf79da6d3b1b3" category="doc">TR-4834 ：《 NetApp 和 Iguazio for MLRun 管道》</block>
  <block id="a0e5bba9c75f65c1d58c6a238316bd2b" category="paragraph">Rick Huang ， David Arnette ， NetApp Marcelo LitovskY ， Iguazio</block>
  <block id="dd9508a891c15cc4bb34f03dc870ab6c" category="paragraph">本文档介绍了使用 NetApp ONTAP AI ， NetApp AI 控制平台， NetApp Cloud Volumes 软件和 Iguazio 数据科学平台的 MLRun 管道的详细信息。我们使用的是 Nercio 无服务器功能， Kubernetes 永久性卷， NetApp Cloud Volumes ， NetApp Snapshot 副本， Grafana 信息板， 以及 Iguazio 平台上的其他服务，用于构建端到端数据管道，以模拟网络故障检测。我们集成了 Iguazio 和 NetApp 技术，可在内部和云端实现快速的模型部署，数据复制和生产监控功能。</block>
  <block id="d431a0ad3e0e99cf99c08fda529884bd" category="paragraph">数据科学家的工作重点应放在机器学习（ ML ）和人工智能（ AI ）模型的培训和调整上。但是，根据 Google 的研究，数据科学家花费了 ~80% 的时间来研究如何使其模型能够与企业应用程序结合使用并大规模运行，如以下描述 AI/ML 工作流中模型开发的图像所示。</block>
  <block id="f08b641e59dba6d999dc1bc2085bcd2c" category="paragraph"><block ref="f08b641e59dba6d999dc1bc2085bcd2c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1eec0363d19df86d30ecefc2e44170fa" category="paragraph">要管理端到端 AI/ML 项目，需要更广泛地了解企业组件。虽然 DevOps 已接管这些类型的组件的定义，集成和部署，但机器学习操作的目标是类似的流程，其中包括 AI/ML 项目。要了解端到端 AI/ML 管道在企业中涉及的内容，请参见以下所需组件列表：</block>
  <block id="ea2ef9b0d095bf991f4973633b485340" category="list-text">数据库</block>
  <block id="3b18b13f059019d19211f8a9f36f7e4e" category="list-text">文件系统</block>
  <block id="d6c823008f20bbfce5f39b30ec9fa918" category="list-text">持续集成和持续部署（ CI/CD ）管道</block>
  <block id="52681719ec1296447ae0e357c4781415" category="list-text">开发集成开发环境（ IDE ）</block>
  <block id="2fae32629d4ef4fc6341f1751b405e45" category="list-text">安全性</block>
  <block id="bd0992d43bb2d0ca676184502e14754e" category="list-text">数据访问策略</block>
  <block id="a9353b1bd1eeedb788a74090b5f8d0bc" category="list-text">数据科学工具集和库</block>
  <block id="2f0ff7df4fd6fa99bbf249af2ea4c3a5" category="paragraph">在本白皮书中，我们展示了 NetApp 与 Iguazio 之间的合作关系如何显著简化端到端 AI/ML 管道的开发。这种简化可以加快所有 AI/ML 应用程序的上市速度。</block>
  <block id="253411380ba9cde08bcfafbd516ad585" category="paragraph">数据科学领域涉及信息技术和业务领域的多个学科。</block>
  <block id="cddde51824956f407b4c02c1e4bc8004" category="list-text">数据科学家需要灵活地使用自己选择的工具和库。</block>
  <block id="310a768ecb4689bcaf80072231d73e83" category="list-text">数据工程师需要了解数据的流动方式及其所在位置。</block>
  <block id="c12281f5ea7b17e370414efbf3f26c30" category="list-text">DevOps 工程师需要使用工具将新的 AI/ML 应用程序集成到其 CI/CD 管道中。</block>
  <block id="f1a4e0eca545ebe9e3c32f1fde407410" category="list-text">业务用户希望能够访问 AI/ML 应用程序。我们介绍了 NetApp 和 Iguazio 如何帮助这些角色为我们的平台带来业务价值。</block>
  <block id="00cc9e5c959e62a9132baca479060db3" category="paragraph">此解决方案遵循 AI/ML 应用程序的生命周期。我们从数据科学家的工作开始，定义准备数据以及训练和部署模型所需的不同步骤。接下来，我们将完成创建完整管道所需的工作，该管道能够跟踪项目，试验执行并部署到 Kubeflow 。为了完成整个周期，我们将管道与 NetApp Cloud Volumes 集成，以启用数据版本控制，如下图所示。</block>
  <block id="ddd4a11ec23c52d3f0831809bc4d7c8f" category="paragraph"><block ref="ddd4a11ec23c52d3f0831809bc4d7c8f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c7c8cd7998e5c4a67923acf8580d94e2" category="inline-link-macro">接下来：技术概述</block>
  <block id="b9023dede6231d8f57593d31db930bf6" category="paragraph"><block ref="b9023dede6231d8f57593d31db930bf6" category="inline-link-macro-rx"></block></block>
  <block id="0de039e647bc53dcce6e7bceb8605cbf" category="paragraph">各行各业各种规模的企业和组织都在转向人工智能（ AI ），机器学习（ ML ）和深度学习（ DL ），以解决实际问题，提供创新产品和服务，并在竞争日益激烈的市场中占据优势。随着企业越来越多地使用 AI ， ML 和 DL ，他们面临着许多挑战，包括工作负载可扩展性和数据可用性。可以通过使用 NetApp AI 控制平台解决方案来应对这些挑战。</block>
  <block id="cae02473f4798da0fdd40f4f598b1d96" category="paragraph">通过此解决方案，您可以快速克隆数据命名空间。此外，您还可以定义和实施 AI ， ML 和 DL 培训工作流，这些工作流可近乎即时地创建数据和模型基线，以实现可追溯性和版本控制。使用此解决方案，您可以跟踪每个模型训练返回到模型经过训练和 / 或验证的确切数据集。最后，借助此解决方案，您可以快速配置 Jupyter 笔记本电脑工作空间，以访问海量数据集。</block>
  <block id="696dba9a093d4ac7b67234745dd57835" category="paragraph">由于此解决方案面向数据科学家和数据工程师，因此只需极少的 NetApp 或 NetApp ONTAP 专业知识即可。借助此解决方案，可以使用简单熟悉的工具和界面来执行数据管理功能。此外，此解决方案还利用完全开源和免费的组件。因此，如果您的环境中已有 NetApp 存储，则可以立即实施此解决方案。如果您要测试此解决方案的驱动器，但尚未安装 NetApp 存储，请访问<block ref="d72e38e0d1c5ca8869f2dd987734920b" category="inline-link-rx"></block>，您可以随时使用基于云的 NetApp 存储解决方案启动和运行。</block>
  <block id="3a607d0e3fa64fd7558e11352f751dd0" category="summary">NetApp AI 控制平面解决方案不依赖于此特定硬件。</block>
  <block id="976cf3edd8adeff2e75cd7a9dd0dae21" category="paragraph">NetApp AI 控制平面解决方案不依赖于此特定硬件。解决方案与 Trident 支持的任何 NetApp 物理存储设备，软件定义的实例或云服务兼容。例如， NetApp AFF 存储系统， Azure NetApp Files ， NetApp Cloud Volumes Service ， NetApp ONTAP Select 软件定义的存储实例或 NetApp Cloud Volumes ONTAP 实例。此外，只要 Kubernetes 和 NetApp Trident 支持所使用的 Kubernetes 版本，即可在任何 Kubernetes 集群上实施解决方案。有关 Kubeflow 支持的 Kubernetes 版本列表，请参见<block ref="01b2e82a7080cdbeb934280240df876e" category="inline-link-rx"></block>。有关 Trident 支持的 Kubernetes 版本列表，请参见<block ref="e6b3671f5db59046617458d31ef4f50b" category="inline-link-rx"></block>。有关用于验证解决方案的环境的详细信息，请参见下表。</block>
  <block id="2e4fd4a404800f52299c132a3403dc72" category="cell">基础架构组件</block>
  <block id="64d354dc5879cf570ce7b4ef676e75bd" category="cell">操作系统</block>
  <block id="4152ac69f367cb5f64dfbc247dd41db0" category="cell">部署跳转主机</block>
  <block id="583a65df9db4119165f5ea0abaa50281" category="cell">虚拟机</block>
  <block id="204dd0a482d284a7fb87c908f713f9bd" category="cell">Ubuntu 20.04.2 LTS</block>
  <block id="f341fd2fe180518e152be2d6fb4ec20b" category="cell">Kubernetes 主节点</block>
  <block id="a89c263b82f7c7f61c9b6c93080f8425" category="cell">Kubernetes 工作节点</block>
  <block id="76a7e6383604f84ace970ce86ba76a9f" category="cell">Kubernetes GPU 工作节点</block>
  <block id="f89b34b046a8d6e3137c95861fa3cf8a" category="cell">NVIDIA DGX-1 （裸机）</block>
  <block id="eba551f3f972830c55b1c9bef15b5f26" category="cell">NVIDIA DGX OS 4.0.5 （基于 Ubuntu 18.04.2 LTS ）</block>
  <block id="0911ffdbb76c891f964e39a07eb6b697" category="cell">1 个 HA 对</block>
  <block id="1672d070f346948fb25e819b40bb3ade" category="cell">NetApp AFF A220</block>
  <block id="d1d73cf191d1afbd40e85644467cae8b" category="cell">NetApp ONTAP 9.7 P6</block>
  <block id="68782f72ebeb2cac06f03226a6e941bb" category="cell">软件组件</block>
  <block id="47354877541923135499c38a6606138a" category="cell">2.0.1</block>
  <block id="9ba69bd971d430b368ce3f0286c8e77c" category="cell">Apache 气流 Helm 图表</block>
  <block id="ecfa741d55b7b1a85bd61a2307877c8c" category="cell">8.0.8</block>
  <block id="fd99a7ef225418315b041ad631a5674c" category="cell">19.03.12</block>
  <block id="56765472680401499c79732468ba4340" category="cell">1.2</block>
  <block id="48d02190984e4f8526f99f9cd9550e08" category="cell">1.18.9</block>
  <block id="d58d49f83f534f5d71b20750bb7927c7" category="cell">21.01.2</block>
  <block id="7a04e1f765218bcbfc633ef331b312b8" category="inline-link-macro">61898cdfda</block>
  <block id="7855beff2fafbce2cf0df4d67f8dfed7" category="cell">提交时主分支的 Trident 部署功能 <block ref="686ead03155c78694e1a59db0970fc1a" category="inline-link-macro-rx"></block>；从 21.03 版开始提供所有其他功能</block>
  <block id="db5eb84117d06047c97c9a0191b5fffe" category="section-title">支持</block>
  <block id="b2e75bbfb9933bc21b7f875e8676641d" category="inline-link-macro">请联系 NetApp</block>
  <block id="a1773dfa99aa26853e90886d55e0d05a" category="paragraph">NetApp 不为 Apache Airflow ， Docker ， Kubeflow ， Kubernetes 或 NVIDIA DeepOps 提供企业级支持。如果您对具有与 NetApp AI 控制平台解决方案类似的功能的完全受支持的解决方案感兴趣， <block ref="103a4ac9affe57bb7edb7796bfdeb684" category="inline-link-macro-rx"></block> 关于 NetApp 与合作伙伴共同提供的完全受支持的 AI/ML 解决方案。</block>
  <block id="c464f63585f8bf41613d2899c5525d8c" category="paragraph"><block ref="af63ed3a121e4b4ab27c25af2e06ac1c" category="inline-link-macro-rx"></block>。</block>
  <block id="3cfbc3bac23f6bb9e7ebdc6deefeaf1d" category="paragraph">由 NetApp 和 NVIDIA 开发并验证的 NetApp ONTAP AI 架构由 NVIDIA DGX 系统和 NetApp 云连接存储系统提供支持。此参考架构为 IT 组织提供了以下优势：</block>
  <block id="410a2fbd85ad3d74051034eac2b94889" category="list-text">为各种性能和成本点提供了一系列存储选项</block>
  <block id="6fa0f6cc1d5d12069641e73217a17be2" category="paragraph">NetApp ONTAP AI 将 DGX 系统和 NetApp AFF A800 存储系统与一流的网络紧密集成在一起。NetApp ONTAP AI 和 DGX 系统消除了设计复杂性和猜测性工作，从而简化了 AI 部署。客户可以从小规模入手，无中断地扩展系统，同时智能地管理从边缘到核心再到云再到云的数据。</block>
  <block id="bdc094a519f73076386a8bf2948832a6" category="paragraph">NetApp AI 控制平台是一个全堆栈 AI ， ML 和深度学习（ DL ）数据和实验管理解决方案，适用于数据科学家和数据工程师。随着企业越来越多地使用 AI ，他们面临着许多挑战，包括工作负载可扩展性和数据可用性。NetApp AI 控制平台可通过多种功能来应对这些挑战，例如像 Git repo一样 快速克隆数据命名空间，以及定义和实施 AI 培训工作流，这些工作流可以近乎即时地创建数据和模型基线，以实现可追溯性和版本控制。借助 NetApp AI 控制平台，您可以在站点和区域之间无缝复制数据，并快速配置 Jupyter 笔记本工作空间，以便访问海量数据集。</block>
  <block id="22101b8498dea1c2e2e35bd4868847a4" category="paragraph">运行： AI 为 AI 基础架构构建了全球首款业务流程和虚拟化平台。通过将工作负载从底层硬件中抽象出来， Run ： AI 可创建一个可动态配置的 GPU 资源共享池，从而高效地编排 AI 工作负载并优化 GPU 的使用。数据科学家可以无缝地使用大量 GPU 功能来改进和加快研究速度，同时 IT 团队可以对资源配置，队列和利用率保持集中的跨站点控制和实时可见性。Run ： AI 平台基于 Kubernetes 构建，可与现有 IT 和数据科学工作流轻松集成。</block>
  <block id="ae00256db8d45ecdaf9c364a96821417" category="paragraph">Run ： AI 平台具有以下优势：</block>
  <block id="d472807c15e94ef6053e95521ff7e838" category="list-text">* 加快创新速度。 * 通过将 Run ： AI 资源池，队列和优先级划分机制与 NetApp 存储系统结合使用，研究人员可以从基础架构管理的麻烦中消除，并可以专注于数据科学。运行： AI 和 NetApp 客户可以根据需要运行任意数量的工作负载，而不会出现计算或数据管道瓶颈，从而提高工作效率。</block>
  <block id="2707d068deb9b46967615c70c806e0d8" category="list-text">* 提高团队工作效率。 * 运行： AI 公平算法可确保所有用户和团队都能获得公平的资源份额。可以预设优先级项目的策略，该平台支持将资源从一个用户或团队动态分配给另一个用户或团队，从而帮助用户及时访问所需的 GPU 资源。</block>
  <block id="faa5854c7e84507b88cba1c0ec1a9aaf" category="list-text">* 提高了 GPU 利用率。 * 运行： AI 计划程序使用户能够轻松地使用百分比 GPU ，整数 GPU 和多个 GPU 节点在 Kubernetes 上进行分布式培训。这样， AI 工作负载就可以根据您的需求运行，而不是根据容量运行。数据科学团队可以在同一基础架构上运行更多 AI 实验。</block>
  <block id="d9533ea5c6cb975dff314dace88f2aa4" category="paragraph"><block ref="d9533ea5c6cb975dff314dace88f2aa4" category="inline-link-macro-rx"></block></block>
  <block id="ea9d63f3855d6d15175eea339af3c6cc" category="doc">NVA-1144 ：采用 H615c 和 NVIDIA T4 在边缘数据中心进行 NetApp HCI AI 推理</block>
  <block id="52b2b8291bb4e7cbc0ca009cade0cb7d" category="paragraph">NetApp 公司 Arvind Ramakrishnan</block>
  <block id="c00e5d4d2ebbd0408166deaccd1c96a5" category="paragraph">本文档介绍如何设计 NetApp HCI 来在边缘数据中心位置托管人工智能（ AI ）推理工作负载。此设计基于采用 NVIDIA T4 GPU 的 NetApp HCI 计算节点， NVIDIA Triton 推理服务器以及使用 NVIDIA DeepOps 构建的 Kubernetes 基础架构。此外，该设计还会在核心数据中心与边缘数据中心之间建立数据管道，并说明如何实施才能完成数据生命周期路径。</block>
  <block id="cb70a7ee42c8779fafb17a8cb26c43a5" category="paragraph">人工智能和机器学习（ ML ）推动的现代应用程序已经突破了互联网的限制。最终用户和设备需要随时随地访问应用程序，数据和服务，而延迟极短。为了满足这些需求，数据中心正在向用户更接近，以提高性能，减少前后数据传输，并提供经济高效的方式来满足用户需求。</block>
  <block id="27e9b395ed17c81938a5a74773177211" category="paragraph">在 AI 环境下，核心数据中心是一个提供机器学习和分析等集中式服务的平台，而边缘数据中心则是实时生产数据需要推理的地方。这些边缘数据中心通常连接到核心数据中心。它们可提供最终用户服务，并为需要额外处理且时间过于敏感而无法传输回中央核心的物联网设备生成的数据提供暂存层。本文档介绍了使用 NetApp HCI 作为基础平台的 AI 推理参考架构。</block>
  <block id="9abac747d764180a5fe55920e00e887d" category="section-title">客户价值</block>
  <block id="4b037f3d2443fa18a60cc6c7b62aad92" category="paragraph">NetApp HCI 在超融合市场中为这种推理解决方案提供了差异化优势，包括以下优势：</block>
  <block id="ffbda9cc0de97387bf81df0d38f2b1c9" category="list-text">通过一个分解式架构，可以独立扩展计算和存储，并降低独立 NetApp HCI 存储节点上的虚拟化许可成本和性能税。</block>
  <block id="d0082bf69a89ad2c08c0272091b2ef78" category="list-text">NetApp Element 存储可为每个存储卷提供服务质量（ QoS ），从而为 NetApp HCI 上的工作负载提供有保障的存储性能。因此，相邻工作负载不会对推理性能产生负面影响。</block>
  <block id="ec84597aff6c8d5d8ddd5a4d76fb869b" category="list-text">借助 NetApp 提供支持的 Data Fabric ，可以将数据从核心复制到边缘再复制到云数据中心，从而使数据更接近应用程序所需的位置。</block>
  <block id="61a41ec8700e85ce851001a6c2643e72" category="list-text">借助由 NetApp 和 NetApp FlexCache 软件提供支持的 Data Fabric ，可以从 NetApp HCI 访问经过 NetApp ONTAP AI 培训的 AI 深度学习模型，而无需导出该模型。</block>
  <block id="789354e32159c9ef4ee9251379fbfa9c" category="list-text">NetApp HCI 可以将推理服务器托管在同一基础架构上，并与多个工作负载（虚拟机（ VM ）或基于容器）同时托管，而不会降低性能。</block>
  <block id="093b56fc0d34799dd27e295e9d9ffe08" category="list-text">NetApp HCI 已通过 NVIDIA GPU 云（ NGC ）认证，可用于 NVIDIA AI 容器化应用程序。</block>
  <block id="faa3a2e54eae906e440856241313ec1d" category="list-text">NGC 就绪表示此堆栈已通过 NVIDIA 验证，专为 AI 构建，可通过 NGC 支持服务获得企业支持。</block>
  <block id="e1a62f71ded2998e5d176d9fa5a226c1" category="list-text">凭借丰富的 AI 产品组合， NetApp 可以支持从边缘到核心再到云的各种 AI 使用情形，包括用于训练和推理的 ONTAP AI ，用于云中训练的 Cloud Volumes Service 和 Azure NetApp Files 以及使用 NetApp HCI 在边缘进行推理的过程。</block>
  <block id="dcb006fb1375d7817024ac2b8e8401fa" category="paragraph"><block ref="dcb006fb1375d7817024ac2b8e8401fa" category="inline-link-macro-rx"></block></block>
  <block id="45ce76bfe721ca13d37ca15fdbebd391" category="paragraph">作者衷心感谢我们尊敬的 NVIDIA 同事：达维德 · 奥诺弗罗， Alex Qi ， Sicong Ji ， Marty Jain 和 Robert Sohigian 为本白皮书所做的贡献。作者还想感谢 NetApp 团队的主要成员所做的贡献： Santosh Rao ， David Arnette ， Michael Oglesby ， Brent Davis ， Andy Sayare ， Erik Minder 和 Mike McNamara 。</block>
  <block id="81fbc4247f2c3a990b090cef6b9ebe03" category="paragraph">我们衷心感谢所有这些人士，他们提供了洞察力和专业知识，为本白皮书的编写提供了极大的帮助。</block>
  <block id="bc2f62a5c14dc9d16f38cc32c304164c" category="paragraph"><block ref="bc2f62a5c14dc9d16f38cc32c304164c" category="inline-link-macro-rx"></block></block>
  <block id="25edd21a28cb2fca00ab6f30e47c6d79" category="paragraph">要运行示例推理请求，请完成以下步骤：</block>
  <block id="cb11a85322b32a7615367d2523718b49" category="list-text">获取客户端容器 /Pod 的 Shell 。</block>
  <block id="b489ec265fd981ff7aa78a7721bd3101" category="list-text">运行示例推理请求。</block>
  <block id="15c5e1ffe753f0365f39e7b508ce5ae0" category="paragraph"><block ref="15c5e1ffe753f0365f39e7b508ce5ae0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b5bf2ae3a2d0d1dd1e0740744c9ebb1b" category="paragraph">此推理请求调用用于图像识别的 `resnet50_netdef` 模型。其他客户端也可以通过类似的方法并调用相应的模型来同时发送推理请求。</block>
  <block id="a301641e2c9595a0c9c39ee7986f7ca8" category="paragraph"><block ref="a301641e2c9595a0c9c39ee7986f7ca8" category="inline-link-macro-rx"></block></block>
  <block id="d62059ced4af784c148eb705bde14160" category="doc">使用 NVIDIA DeepOps 自动化部署部署 Kubernetes 集群</block>
  <block id="80ef6629e7071063d17044895c5c63d0" category="paragraph">要使用 NVIDIA DeepOps 部署和配置 Kubernetes 集群，请完成以下步骤：</block>
  <block id="1537eccae2860823317e97b9c25cd611" category="list-text">确保所有 Kubernetes 主节点和工作节点上存在相同的用户帐户。</block>
  <block id="2db909d497e638563e61b6913b7d05f6" category="list-text">克隆 DeepOps 存储库。</block>
  <block id="b34ff6f6756a55d46c517908c32adaab" category="list-text">查看最新版本标记。</block>
  <block id="fd8fbcc2b9cc36c7047804fa1d69970a" category="paragraph">如果跳过此步骤，则会使用最新的开发代码，而不是正式版本。</block>
  <block id="7e515fdac7ae617e914503ead5c72006" category="list-text">通过安装必要的前提条件来准备部署跳转。</block>
  <block id="f09d9191865e30effa2663268600b43b" category="list-text">通过打开 VI 编辑器 `deepops/config/inventory` 来创建和编辑 Ansible 清单。</block>
  <block id="5909d5a738a51c21898318954b166c18" category="list-text">在 "All" 下列出所有主节点和辅助节点。</block>
  <block id="0fde978c1fd8d6e00465d3bedebbeb64" category="list-text">列出 [Kube-master] 下的所有主节点</block>
  <block id="8aede88577073724505a7d10a8ec7182" category="list-text">列出 [etcd] 下的所有主节点</block>
  <block id="3655ea38e6be3c534d32528396e616d0" category="list-text">列出 [Kube-node] 下的所有工作节点</block>
  <block id="9fb6389bbb4d6e5c980d03b4cff32e29" category="paragraph"><block ref="9fb6389bbb4d6e5c980d03b4cff32e29" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0837b4b468fbc914431c834da9cad0d9" category="list-text">通过打开 VI 编辑器 `deepops/config/group_vars/K8s-cluster.yml` 来启用 GPUOperator 。</block>
  <block id="1f8cb55dafcfb5b4eb12b468d0314790" category="paragraph"><block ref="1f8cb55dafcfb5b4eb12b468d0314790" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9f2aa70c862fcedbac5b90e39f307d7a" category="list-text">将 `deepops_gp_operator_enabled` 的值设置为 true 。</block>
  <block id="a0f1a122d6404fd9bf44ff3babad4d33" category="list-text">验证权限和网络配置。</block>
  <block id="c9c4993671a30793fe0053f112ac8c8a" category="list-text">如果通过 SSH 连接到远程主机需要密码，请使用 -k</block>
  <block id="5d6467fe2e2e7c41e7e55136543c0b38" category="list-text">如果远程主机上的 sudo 需要密码，请使用 -k</block>
  <block id="2c8d09b8b2480250cd3aa37c82ef84f8" category="list-text">如果上一步顺利完成，请继续设置 Kubernetes 。</block>
  <block id="cfe549aaa0d57bb95b638044c8f352dd" category="list-text">要验证 Kubernetes 节点和 Pod 的状态，请运行以下命令：</block>
  <block id="222f28788aa8aa5829cb140fefd6532f" category="paragraph"><block ref="222f28788aa8aa5829cb140fefd6532f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fa1d5507bcedb00dfb0d893e135fbf60" category="paragraph">运行所有 Pod 可能需要几分钟时间。</block>
  <block id="adb6c6fcd39c921a51138bb9020e2d14" category="paragraph"><block ref="adb6c6fcd39c921a51138bb9020e2d14" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9cb2f27fb1153d060d000619549820bb" category="list-text">验证 Kubernetes 设置是否可以访问和使用 GPU 。</block>
  <block id="640f504be7ec6fbc2c4fef7bac4fc63f" category="paragraph">预期示例输出：</block>
  <block id="9672f6beaeeefece7eea5923ac072403" category="list-text">在部署跳转中安装 Helm 。</block>
  <block id="dff4e70d1c50c12f93b7810a1fa8ae2b" category="list-text">删除主节点上的相关项。</block>
  <block id="da9bfeab1d8a228d3c4664c54821d4c5" category="paragraph">要运行负载平衡器 Pod ，需要执行此步骤。</block>
  <block id="10fa92ee05060171007ae95fb1e7eb28" category="list-text">部署负载平衡器。</block>
  <block id="48a879d7c0dfe5f05a524b035b288d3a" category="list-text">编辑 `config/hel/metalb.yml` 文件，并在 `Application Network` 中提供一系列 IP 地址，以用作负载平衡器。</block>
  <block id="b412017e022dd8b205cb6d05a181682a" category="list-text">运行脚本以部署负载平衡器。</block>
  <block id="431087d8c775702112de511769dd59ff" category="list-text">部署入口控制器。</block>
  <block id="8fe753e136a3a88c2a729f2e1c9a3e78" category="inline-link-macro">下一步：在 VMware 虚拟基础架构中部署和配置 ONTAP Select （自动化部署）</block>
  <block id="288424ae18d1f21f58c20b3988e262f7" category="paragraph"><block ref="288424ae18d1f21f58c20b3988e262f7" category="inline-link-macro-rx"></block></block>
  <block id="21f937997adb0cac073e2458491f2c2f" category="list-text">按照上的说明下载 NVIDIA DeepOps<block ref="a94c3c17b923443c927cfa8fe7a2482a" category="inline-link-rx"></block> 在 NVIDIA DeepOps GitHub 站点上。</block>
  <block id="76ada3ea43b0e44772967793fe69b1bd" category="inline-link">《 Kubernetes 部署指南》</block>
  <block id="03628142cdc704dd6ffe5d7d13573999" category="list-text">按照上的说明在集群中部署 Kubernetes<block ref="cdf0a6d71dcbe898357c0e37010d30de" category="inline-link-rx"></block> 在 NVIDIA DeepOps GitHub 站点上。</block>
  <block id="2dfe8bb84d94f23030d91e315d7899bc" category="admonition">要使 DeepOps Kubernetes 部署正常工作，所有 Kubernetes 主节点和工作节点上必须存在相同的用户。</block>
  <block id="c6fff1434177c1b95244b5300314f730" category="paragraph">如果部署失败，请在 `deepops/config/group_vars/K8s-cluster.yml` 中将 `kubectl_localhost` 的值更改为 false ，然后重复步骤 2 。`Copy kubectl binary to Ansible host` 任务仅在 `kubectl_localhost` 值为 true 时执行，它依赖于 Fetch Ansible 模块，该模块存在已知的内存使用问题。这些内存使用问题有时可能会使任务发生原因失败。如果任务因内存问题描述而失败，则部署操作的其余部分将无法成功完成。</block>
  <block id="24e1fa4c913dcdc975e022f921d4d603" category="paragraph">如果在将 `kubectl_localhost` 的值更改为 `false` 后部署成功完成，则必须手动将 `kubectl 二进制文件` 从 Kubernetes 主节点复制到部署跳转主机。您可以通过直接在特定主节点上运行 `which kubectl` 命令来查找 `kubectl 二进制文件` 在该节点上的位置。</block>
  <block id="a185054da23018c3578742c41141312b" category="inline-link-macro">接下来： Cnvrg.io 部署</block>
  <block id="c18b567a6a5397941715c30a00a97395" category="paragraph"><block ref="c18b567a6a5397941715c30a00a97395" category="inline-link-macro-rx"></block></block>
  <block id="d7cd7846436814deb26b0df06d7a4b2a" category="summary">要在 Kubernetes 集群中执行同步多节点 AI 和 ML 作业，请在部署跳转主机上执行此页面上列出的任务。通过此过程，您可以利用存储在 NetApp 卷上的数据，并使用单个工作节点所能提供的 GPU 。</block>
  <block id="8725f0c1877790fea82aedbc23e26e70" category="doc">执行同步分布式 AI 工作负载</block>
  <block id="deb7f52575de614a91ae7472b76138ec" category="paragraph">要在 Kubernetes 集群中执行同步多节点 AI 和 ML 作业，请在部署跳转主机上执行以下任务。通过此过程，您可以利用存储在 NetApp 卷上的数据，并使用单个工作节点所能提供的 GPU 。有关同步分布式 AI 作业的描述，请参见下图。</block>
  <block id="c073d47c72ebccdc821d9e6419b3008c" category="admonition">与异步分布式作业相比，同步分布式作业有助于提高性能和训练准确性。本文档不会讨论同步作业与异步作业的利弊。</block>
  <block id="262523fcbe6eb0ec96ea58299e58f65c" category="paragraph"><block ref="262523fcbe6eb0ec96ea58299e58f65c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3a9af10e4883efa64de927027b5b0ffa" category="list-text">以下示例命令显示了创建一名员工参与同步分布式执行本节中示例中在单个节点上执行的同一 TensorFlow 基准测试作业的过程 <block ref="b66468ea886b06cfd7c572c68cd74c28" category="inline-link-macro-rx"></block>。在此特定示例中，仅部署一个员工，因为此作业会在两个员工节点上执行。</block>
  <block id="e3a5f2bdfc8576b6847bcbf0d53889d4" category="paragraph">此示例员工部署请求八个 GPU ，因此可以在一个 GPU 工作节点上运行，该节点具有八个或更多 GPU 。如果您的 GPU 工作节点具有八个以上的 GPU ，则为了最大限度地提高性能，您可能需要增加此数量，使其等于您的工作节点所具有的 GPU 数量。有关 Kubernetes 部署的详细信息，请参见<block ref="29c4feb256f061356947baec0e1bfcb2" category="inline-link-rx"></block>。</block>
  <block id="bfe89db11adc9a38165e670f3062d398" category="paragraph">在此示例中创建了 Kubernetes 部署，因为此特定容器化员工永远不会自行完成。因此，使用 Kubernetes 作业构造来部署它毫无意义。如果员工的设计或编写是为了自己完成，则可以使用此作业构建来部署员工。</block>
  <block id="05bdf5435b916b7b205f448788324f2b" category="paragraph">在此示例部署规范中指定的 Pod 的值为 `hostNetwork` 值 `true` 。此值表示 Pod 使用主机工作节点的网络堆栈，而不是 Kubernetes 通常为每个 Pod 创建的虚拟网络堆栈。在这种情况下使用此标注是因为特定工作负载依靠 Open MPI ， NCCL 和 Horovod 以同步分布式方式执行工作负载。因此，它需要访问主机网络堆栈。有关 Open MPI ， NCCL 和 Horovod 的讨论不在本文档的讨论范围之内。是否需要此 `hostNetwork ： true` 标注取决于要执行的特定工作负载的要求。有关 `hostNetwork` 字段的详细信息，请参见<block ref="f46b1bf9e67570ceac06230c1e502909" category="inline-link-rx"></block>。</block>
  <block id="b3f8c0432fa807543e6e24f429362a32" category="list-text">确认您在第 1 步中创建的员工部署已成功启动。以下示例命令确认已为部署创建了一个辅助 POD ，如部署定义所示，并且此 POD 当前正在其中一个 GPU 辅助节点上运行。</block>
  <block id="3ba975f6a7389af18602f0e938bcc37b" category="list-text">为启动，参与并跟踪同步多节点作业执行的主节点创建 Kubernetes 作业。以下示例命令创建一个主节点，用于启动，参与和跟踪在一节中的示例中对单个节点执行的相同 TensorFlow 基准测试作业的同步分布式执行 <block ref="b66468ea886b06cfd7c572c68cd74c28" category="inline-link-macro-rx"></block>。</block>
  <block id="4161928cbea20386310894ea85fd3711" category="paragraph">此示例主作业请求八个 GPU ，因此可以在具有八个或更多 GPU 的单个 GPU 工作节点上运行。如果您的 GPU 工作节点具有八个以上的 GPU ，则为了最大限度地提高性能，您可能需要增加此数量，使其等于您的工作节点所具有的 GPU 数量。</block>
  <block id="3e04ef9469e6953d66ae9c7536ed9b26" category="paragraph">在本示例作业定义中指定的主 Pod 的值为 `hostNetwork` 值为 `true` ，就像在步骤 1 中为工作 Pod 提供了 `hostNetwork` 值 `true` 一样。有关为何需要此值的详细信息，请参见第 1 步。</block>
  <block id="8600ba20f40fb5668a1b2c02f92e220d" category="list-text">确认您在步骤 3 中创建的主作业正在正确运行。以下示例命令确认已为作业创建了一个主 Pod ，如作业定义所示，并且此 Pod 当前正在其中一个 GPU 工作节点上运行。您还应看到，您最初在步骤 1 中看到的辅助 POD 仍在运行，并且主节点和辅助节点正在不同的节点上运行。</block>
  <block id="0f27ae3c630b411ce8f8dc123361f1b1" category="list-text">确认您在步骤 3 中创建的主作业已成功完成。以下示例命令确认作业已成功完成。</block>
  <block id="6fe5035373f479ed2a1c1d457e64ae9d" category="list-text">如果您不再需要此员工部署，请将其删除。以下示例命令显示了删除在步骤 1 中创建的工作部署对象的过程。</block>
  <block id="e3861d1527373e7d8eeea1704f818a15" category="paragraph">删除 worker 部署对象时， Kubernetes 会自动删除任何关联的 worker Pod 。</block>
  <block id="7e4d2c0ae78fc38eeb38ffe12f736290" category="list-text">* 可选： * 清理主作业项目。以下示例命令显示了删除在步骤 3 中创建的主作业对象的过程。</block>
  <block id="d844794bfc5a0949dc2c38fecacf9ff1" category="paragraph">删除主作业对象时， Kubernetes 会自动删除任何关联的主 Pod 。</block>
  <block id="82e90082d1c60b585def885df39b0fd5" category="inline-link-macro">接下来：性能测试</block>
  <block id="9bc9bea020337118e15b67f9ddc7d979" category="paragraph"><block ref="9bc9bea020337118e15b67f9ddc7d979" category="inline-link-macro-rx"></block></block>
  <block id="e7482c983ef4cf289302f2b5b4f2bbe0" category="doc">部署 NetApp Trident （自动化部署）</block>
  <block id="eed0078bfcea8a866b10194d43663b48" category="paragraph">NetApp Trident 可使用 NVIDIA DeepOps 附带的 Ansible 攻略手册进行部署。按照以下步骤设置 NetApp Trident ：</block>
  <block id="2c6928ae1ddc97e563baaea504ee58ea" category="list-text">从 Deployment Jump VM 中，导航到 DeepOps 目录，然后打开一个 VI 编辑器，转到 `config/group_vars/netapp-trident 。 yml` 。DeepOps 中的文件列出了两个后端和两个存储类。在此解决方案中，仅使用一个后端和存储类。</block>
  <block id="e6e54b200570f2c8219a7b95e8fdb241" category="paragraph">使用以下模板更新文件及其参数（以黄色突出显示）以匹配您的环境。</block>
  <block id="eb6342fa396fabb213f4f9877b18457a" category="list-text">使用 Ansible 攻略手册设置 NetApp Trident 。</block>
  <block id="c323afd0405a0acdd33e726a59a05174" category="list-text">验证 Trident 是否正在运行。</block>
  <block id="4b11df0b348fa64479e9506149c0eb3b" category="paragraph">预期输出如下：</block>
  <block id="8f6e0ceede059f5d032fa39ea5b167c5" category="inline-link-macro">下一步：部署 NVIDIA Triton 推理服务器（自动化部署）</block>
  <block id="c337a9093a0754be09e7b9aba43d9b1b" category="paragraph"><block ref="c337a9093a0754be09e7b9aba43d9b1b" category="inline-link-macro-rx"></block></block>
  <block id="46b8f9361fae73f13467cd1aaff186ba" category="summary">记录 NetApp 解决方案资料的最新变更</block>
  <block id="679ce0aa9d3d54bfddd37e1b78b802de" category="doc">NetApp 解决方案变更日志</block>
  <block id="aceacf14369d872e8cb00f62613f52c6" category="paragraph">NetApp 解决方案资料的最新变更。首先列出最新的更改。</block>
  <block id="5edbe8c55546db896b55871b44a39263" category="cell">* 日期 *</block>
  <block id="12cd1425f32ad289dba28e35ae9096fb" category="cell">* 解决方案区域 *</block>
  <block id="b96941ac46daa357b1782f017746a57b" category="cell">* 变更问题描述 *</block>
  <block id="fab25e19f7e186358ed7f1268e7af3b4" category="cell">2021 年 6 月 14 日</block>
  <block id="a71f76c3256e4c206a4841d8eb0fed35" category="cell">SQL 服务器</block>
  <block id="96da300b5faf4ae3a5ca09afabba4273" category="cell">添加了解决方案：基于 Azure NetApp Files 的 Microsoft SQL Server</block>
  <block id="67c877d4abd9acdbb0fa62c3720b6d60" category="cell">2021年6月11日</block>
  <block id="383856fa8b27f03dd20164e4855fb140" category="cell">添加了一个新的视频演示：工作负载迁移—采用 NetApp 的 Red Hat OpenShift</block>
  <block id="c5d2015481e39976c67e40778a449a2d" category="cell">2021年6月9日</block>
  <block id="c4aad26d0bd9fb92610a1b5b3390bd46" category="cell">在采用 NetApp 的 Red Hat OpenShift 上的 NVA-1160 —适用于 Kubernetes 的高级集群管理中添加了一个新的用例</block>
  <block id="83d39ff0c36403ca3e183af9ca091a71" category="cell">2021 年 6 月 16 日</block>
  <block id="0ab2d358307f127335690c1400e10cd3" category="cell">添加了一个新的视频演示：安装 OpenShift 虚拟化—采用 NetApp 的 Red Hat OpenShift</block>
  <block id="9619e222910c757db3da7b8f7dd7e5f5" category="cell">添加了一个新的视频演示：使用 OpenShift 虚拟化部署虚拟机—使用 NetApp 部署 Red Hat OpenShift</block>
  <block id="53977250e4a69cab3688fcbede8fb73a" category="cell">2021 年 5 月 28 日</block>
  <block id="9c23aa040a3dc51dbbf59463247f4fec" category="cell">为 NVA-1160 — NetApp ONTAP 的 OpenShift 虚拟化添加了一个新的用例</block>
  <block id="c02e5ac689072495b8af780302105253" category="cell">2021 年 5 月 27 日</block>
  <block id="ed4a99e1251e3aeb9f17f78382321cd2" category="cell">在 NVA-1160 —使用 NetApp ONTAP 在 OpenShift 上添加了一个新的使用情形</block>
  <block id="3202abe9084b2d9ec5b0b162721978e7" category="cell">2021 年 5 月 26 日</block>
  <block id="d58aa75910c54a80c6ba4de7e7f6949f" category="cell">添加了 NVA-1160 —采用 NetApp 的 Red Hat OpenShift</block>
  <block id="a0be3ecb819e8e7215f946964346f547" category="cell">2021 年 5 月 25 日</block>
  <block id="325e8385a69311bcbfc497af4e309a8f" category="cell">容器博客</block>
  <block id="95a74db23b085df59ef6412199e9e791" category="cell">添加了博客：在 Red Hat OpenShift 上安装 NetApp Trident —如何解决 Docker ‘的 " 所有请求 " 问题描述！</block>
  <block id="2dec0489948dbe7f63f68743a085e98c" category="cell">2021 年 5 月 19 日</block>
  <block id="fcf140abed196b8eba71c45f21312bce" category="cell">NetApp 解决方案</block>
  <block id="8e9e0c0cad8efa2334e2deee5809172d" category="cell">添加了指向 FlexPod 解决方案门户的链接</block>
  <block id="06cd721900817fa7df6885b7d60c19f7" category="cell">AI 控制平台</block>
  <block id="6aa3b05d39a5886cdb925c5c4c6ff34c" category="cell">已将解决方案从 PDF 转换为 HTML</block>
  <block id="8ff5be8d16e86e5284f8ba8a3428459a" category="cell">2021 年 5 月 17 日</block>
  <block id="a88789a4f83f213b256b57eb0884fd1d" category="cell">已将解决方案反馈磁贴添加到主页</block>
  <block id="027fb9451c491d9dcfb7db05f552788d" category="cell">2021年5月11日</block>
  <block id="c30dd1a85cf86d95b11c1a08f70130ce" category="cell">Oracle 数据库</block>
  <block id="3e62d5f1a7f1b6907ad1ecaf11282dac" category="cell">增加了在 NFS 上自动部署 Oracle 19c for ONTAP 的功能</block>
  <block id="d2422eca0ff6f19afb6e1206b15fbe01" category="cell">2021 年 10 月 5 日</block>
  <block id="2e130352b486464834bcc7dda1ff2603" category="cell">VMware 虚拟化</block>
  <block id="7b4c3c6fec238401cd002e2fd8c66664" category="cell">视频：如何在 NetApp 和 VMware Tanzu Basic 中使用 VVOL ，第 3 部分</block>
  <block id="29e9b684dbbdf5cc1828da82a146781d" category="cell">2021 年 6 月 5 日</block>
  <block id="4549cdf15178a5f0535be7f0f86cdb4d" category="cell">企业数据库</block>
  <block id="508db167da7d74fc86c3f8024ce04558" category="cell">添加了指向 FlexPod 数据中心上使用 Cisco UCS 和基于 FC 的 NetApp AFF A800 的 Oracle 19c RAC 数据库的链接</block>
  <block id="85fbf94a3ecf9a3af4a93f80a3681fe1" category="cell">2021 年 5 月 5 日</block>
  <block id="608f33919f16e9a23bd532ad6bcf480a" category="cell">添加了 FlexPod Oracle NVA （ 1155 ）和自动化视频</block>
  <block id="4dc6e14d2ad9dafd2cd72f8c77d22bea" category="cell">2021 年 3 月 5 日</block>
  <block id="3d21a9c32818fc58b044121ce91e053c" category="cell">桌面虚拟化</block>
  <block id="4174d4c17e4b11e07d8dd581e16ba56c" category="cell">添加了指向 FlexPod 桌面虚拟化解决方案的链接</block>
  <block id="b3cae16f1f895f4f9ceae98617a3bf0d" category="cell">2021年4月30日</block>
  <block id="2764512d2fc00264d149a6142151aa1a" category="cell">视频：如何在 NetApp 和 VMware Tanzu Basic 中使用 VVOL ，第 2 部分</block>
  <block id="4996fa0acf5cc54e889a50e9bdd2e56b" category="cell">2021 年 4 月 26 日</block>
  <block id="8bfd3188e5f2aae041254e27c3e0ac0e" category="cell">混合云博客</block>
  <block id="9c5316849ca2429400f8979f0ee0d963" category="cell">新增博客：《将 VMware Tanzu 与 ONTAP 结合使用，加快 Kubernetes 之旅》</block>
  <block id="911da11d01e00e9aa94c5b03b2e6e2cc" category="cell">2021 年 6 月 4 日</block>
  <block id="06cfdb63e0660d09f203a21e28520a1e" category="cell">添加了 " 关于此存储库 "</block>
  <block id="32edd80de3642c58e1a05df5f3e458e1" category="cell">2021 年 3 月 31 日</block>
  <block id="405de593e83a9eea3dcfd40302741b7e" category="cell">AI 用例</block>
  <block id="5b874b532beef16bc508b4d0f8a280da" category="cell">添加了 TR-4886 ：《前沿人工智能推理：采用联想 ThinkSystem 解决方案设计的 NetApp ONTAP 》</block>
  <block id="d61c9a3748e1dd56535fbdaaa3e39eab" category="cell">2021 年 3 月 29 日</block>
  <block id="b0ac6120dada9135114784db22a59940" category="cell">现代数据分析</block>
  <block id="bb4dda4fa291954ccde8b20b40e6389c" category="cell">添加了 NVA-1157 ： NetApp Storage 解决方案中的 Apache Spark 工作负载</block>
  <block id="8f10e64b04f6cc56cf66fd4f4eb0f4d9" category="cell">2021 年 3 月 23 日</block>
  <block id="7998f8ad3cabe02af607385cae780ce1" category="cell">视频：如何在 NetApp 和 VMware Tanzu Basic 中使用 VVOL ，第 1 部分</block>
  <block id="f86fe8ec70f2003923e4000589747208" category="cell">2021年3月9日</block>
  <block id="3fa92efeb96023806151a4eb857c2bb7" category="cell">AI ，数据库，数据保护</block>
  <block id="eea51e9c0dffabdea48ada8f53bbf0f5" category="cell">添加了 E 系列内容；按类别分类的 AI 内容</block>
  <block id="0b218fa381bfd1c86fff15d165ab23a0" category="cell">2021 年 4 月 3 日</block>
  <block id="408649df4ac74ae19e47eef7d060c5cb" category="cell">解决方案自动化</block>
  <block id="932af944058a758da919ca59d1af640b" category="cell">新内容： NetApp 解决方案自动化入门</block>
  <block id="4be9c930c1a8a198115d499cb3223d9e" category="cell">2021 年 2 月 18 日</block>
  <block id="3349cc3d75af8ef4a163efac6e3c680c" category="cell">添加了适用于 ONTAP TR 的 VMware vSphere</block>
  <block id="aa1c3ec5e6dcfb94555ff987f061f1a0" category="cell">2021 年 2 月 16 日</block>
  <block id="9eb2bfb131b1d3c94b4afd5ea190d451" category="cell">AI Edge 推理</block>
  <block id="6fa6e1fd6dfd93ac5065dc28dcc37e69" category="cell">添加了自动化部署步骤</block>
  <block id="8138d0c3e613508050b6fec12c4322c7" category="cell">2021 年 3 月 2 日</block>
  <block id="942bfa6916de9a753f42c134f125f8cb" category="cell">SAP ， SAP HANA</block>
  <block id="91171755730ad15e6d79b5cb6682a8f1" category="cell">为所有 SAP 和 SAP HANA 内容添加了登录页面</block>
  <block id="e5099bd65458f8a8556c830ac4759296" category="cell">2021年2月1日</block>
  <block id="b3dee916148adff1bef5f62e0ea82a81" category="cell">采用 NetApp VDS 的 VDI</block>
  <block id="3729b052715416ab20519249095ae374" category="cell">已为 GPU 节点添加内容</block>
  <block id="c487c48f1528e49e3cb129fdbdd79990" category="cell">2021年1月6日</block>
  <block id="5fe4d42c9bd0c51fb694ec1555f26e39" category="cell">NetApp AI</block>
  <block id="868f7f9e78f90bcf0597030ffefd449b" category="cell">全新解决方案：采用 NVIDIA DGX A100 系统和 Mellanox 系列以太网交换机的 NetApp ONTAP AI （设计和部署）</block>
  <block id="ee50d7aeefdacda2902e5a41d41798e1" category="cell">2021年1月5日</block>
  <block id="98078c607aa44b3c188cb084137531ec" category="cell">采用 Cisco ACI 的 NetApp HCI</block>
  <block id="b8cd24d9bdc2f3ac8d86c987618a8c48" category="cell">更新：概述适用于 VMware 的 NDE Easy Scale 操作步骤部署</block>
  <block id="0663765430d1ca93138f13429aef7c37" category="cell">2020年12月22日</block>
  <block id="a4aae8f8849c453c6c67080c5d013301" category="cell">NetApp 解决方案存储库的初始版本</block>
  <block id="cb1501db8fac0fe0b1cc3b53200f0ab9" category="summary">业务应用程序和企业数据库解决方案资料的最新补充内容</block>
  <block id="74f0f9a40da4d7423bb50570c4d050bf" category="doc">业务应用程序和企业数据库解决方案的新增功能</block>
  <block id="9de8e04d062d5eb8e2ff199783964174" category="paragraph">概述最新的业务应用程序和企业数据库解决方案和解决方案宣传材料。</block>
  <block id="2dc95f2080ad2dba9a9207db808106e5" category="cell">* Oracle 数据库 *</block>
  <block id="14c4dbb7c61081eee1c499c4cf138c96" category="inline-link-macro">FlexPod 数据中心上的 Oracle 19c RAC 数据库，采用 Cisco UCS 和基于 FC 的 NetApp AFF A800</block>
  <block id="d34170bf5ff04b4c514180b56a13c23e" category="cell"><block ref="d34170bf5ff04b4c514180b56a13c23e" category="inline-link-macro-rx"></block></block>
  <block id="e9dcec3e531a3cec5ee733f23baab91d" category="inline-link-macro">在 NFS 上自动部署适用于 ONTAP 的 Oracle 19c</block>
  <block id="e10944318a093524b44d6671144720e9" category="cell"><block ref="e10944318a093524b44d6671144720e9" category="inline-link-macro-rx"></block></block>
  <block id="71e4dd221a9f0c3610e81f8ebab870ea" category="cell">* SAP HANA *</block>
  <block id="c55aef4f96cafe48d6e5cf37af33721b" category="inline-link-macro">采用 SnapCenter 的 SAP HANA B&amp;M 和 R</block>
  <block id="bfb3689ba8280e81607e2cc630474f7b" category="cell"><block ref="34ad6bc30349591d481de2c660380153" category="inline-link-macro-rx"></block></block>
  <block id="ffbfe314fcb0f0531b18b666e3f70bcc" category="inline-link-macro">基于 FC SAN 的 SAP HANA</block>
  <block id="cef42e3e830a5b99fbd149ad0dfcab4c" category="cell"><block ref="cef42e3e830a5b99fbd149ad0dfcab4c" category="inline-link-macro-rx"></block></block>
  <block id="03bd539868199e3d2eb12809418e0815" category="cell">* Microsoft SQL Server*</block>
  <block id="760b7d532df381143dc946fd59bf0b62" category="inline-link-macro">Azure NetApp Files 上的 SQL Server</block>
  <block id="80f2de379b3df3a4911848e3c41a803d" category="cell"><block ref="80f2de379b3df3a4911848e3c41a803d" category="inline-link-macro-rx"></block></block>
  <block id="9b849a5e6a46a992279087781315f191" category="inline-link-macro">Microsoft SQL Server 上的 SAP 应用程序</block>
  <block id="5acb2edcc53a9f2b0ad9d5953a88a270" category="cell"><block ref="5acb2edcc53a9f2b0ad9d5953a88a270" category="inline-link-macro-rx"></block></block>
  <block id="77c484629c9e9b5aed6fa32ebb0e7229" category="inline-link-macro">基于 SolidFire ESDS 的 SQL Server ，用于虚拟化基础架构</block>
  <block id="240930e7b086c623c1760f7b6059e78c" category="cell"><block ref="240930e7b086c623c1760f7b6059e78c" category="inline-link-macro-rx"></block></block>
  <block id="91be6e42fe122f20831dcd474322dc82" category="inline-link-macro">SQL Server —使用 NetApp HCI 确保数据库性能</block>
  <block id="28fbedcd1ec8fbbb429a4f7ac188d9f9" category="cell"><block ref="28fbedcd1ec8fbbb429a4f7ac188d9f9" category="inline-link-macro-rx"></block></block>
  <block id="d4c96dcd516adf0c5bde093b0b7b7255" category="summary">此页面介绍了在 NetApp ONTAP 存储上部署 Oracle19c 的自动化方法。</block>
  <block id="cb59b87e00d11222bfd9159d0d23836f" category="doc">入门</block>
  <block id="def8ebf26c2dec5f6af5a00893fae037" category="paragraph">此解决方案可以在 AWX/Tower 环境中运行，也可以通过命令行界面在 Ansible 控制主机上运行。</block>
  <block id="008ba800d97cb969def651e93f0d93fb" category="section-title">AWX/ 塔式</block>
  <block id="a481f1841043d60245f18522a86731b1" category="paragraph">对于 AWX/Tower 环境，系统将引导您创建 ONTAP 集群管理和 Oracle 服务器（ IP 和主机名）清单，创建凭据，配置从 NetApp Automation Github 提取 Ansible 代码的项目以及启动自动化的作业模板。</block>
  <block id="5055de7b9d28f88e537f99f34959c80c" category="list-text">填写特定于您的环境的变量，然后将其复制并粘贴到作业模板中的额外 VAR 字段中。</block>
  <block id="d116f375db402ba471f519c0a4df15dc" category="list-text">将额外的变量添加到作业模板后，您可以启动自动化。</block>
  <block id="8ca0a52cf9938328875e0a8803ae71dd" category="list-text">通过为 ontap_config ， linux_config 和 oracle_config 指定标记，作业模板将分三个阶段运行。</block>
  <block id="da3d0d670ace8a327170aa25ee29f272" category="section-title">通过 Ansible 控制主机执行 CLI</block>
  <block id="6a5f01bc22c397ee84e04e48c178e980" category="inline-link-macro">单击此处查看 RHEL 7/8 或 CentOS 7/8</block>
  <block id="7946c3996884ee105962c5334bfd9fef" category="inline-link-macro">此处适用于 Ubuntu 或 Debian</block>
  <block id="f5344fe4d88d29ee79ba6110f60cfa9b" category="list-text">配置 Linux 主机，以便用作 Ansible 控制主机<block ref="8688caf90b0dc445f61be35cbf93ed1a" category="inline-link-macro-rx"></block>或<block ref="2b00e81c1e240a58c4df0e850699511b" category="inline-link-macro-rx"></block></block>
  <block id="28e934ddab7714830f8afe8d3b641dc9" category="list-text">配置 Ansible 控制主机后，您可以克隆 Ansible Automation 存储库。</block>
  <block id="f667be8dac02593d217a02ac5bfb18de" category="list-text">使用 ONTAP 集群管理的 IP 和 / 或主机名以及 Oracle 服务器的管理 IP 编辑 hosts 文件。</block>
  <block id="95bd15e6b4a109de659c54c331c06284" category="list-text">填写特定于您的环境的变量，然后将其复制并粘贴到 `vars.yml` 文件中。</block>
  <block id="ca548be3e5f238d32286d43dc4c89f7b" category="list-text">每个 Oracle 主机都有一个可变文件，该文件由其主机名标识，其中包含主机专用变量。</block>
  <block id="87192ebbcab92216d25fd694a282971d" category="list-text">完成所有可变文件后，您可以通过为 `ontap_config` ， `linux_config` 和 `oracle_config` 指定标记来分三个阶段运行此攻略手册。</block>
  <block id="5a2ebfb8baa378cfcfcba58bbb1380c2" category="section-title">要求</block>
  <block id="0ba29c6a1afacf586b03a26162c72274" category="cell">environment</block>
  <block id="9d5cfca4ad04b54536e5ad15210f7dc2" category="cell">* 可逆环境 *</block>
  <block id="eebc1357e7d1e88ed4e4908d5ae86c0b" category="cell">AWX/Tower 或 Linux 主机作为 Ansible 控制主机</block>
  <block id="3f0733e14ebf265f0abf4b32371043ac" category="cell">Ansible v.10 及更高版本</block>
  <block id="3c91a74236fab100f024452f6df13b5e" category="cell">Python 3.</block>
  <block id="215b38d177939de20bbb7b7913ce32c1" category="cell">Python 库— netapp-lib — xmltodict — jMespath</block>
  <block id="d911b17f4f4cdcca62a04ad77aa9403d" category="cell">* ONTAP *</block>
  <block id="0a928fe81d89083ed303ea3d9f1af8c9" category="cell">ONTAP 版本 9.3 - 9.7</block>
  <block id="10aadda84b1b1da26c3757dfdb59379d" category="cell">两个数据聚合</block>
  <block id="9f998f9668ffe69c62d78760d1c531f0" category="cell">已创建 NFS VLAN 和 ifgrp</block>
  <block id="ba5f343281b90f0408008806c66bce86" category="cell">* Oracle 服务器 *</block>
  <block id="6f1de5f0d7966ebf5f8d255fe28ebffe" category="cell">RHEL 7/8</block>
  <block id="aa596da3b79631d86c0d35e1c4b03aac" category="cell">Oracle Linux 7/8</block>
  <block id="814e8f57514db6134b6ffcd7a4ce20a6" category="cell">NFS ，公有和可选管理的网络接口</block>
  <block id="515f291f3ecc550c5d13cf31fadba91d" category="cell">Oracle 服务器上的 Oracle 安装文件</block>
  <block id="ae9205dab0c26cca7762be5149a93923" category="section-title">自动化详细信息</block>
  <block id="ba0676e7ae183e2c0bbd54261818154f" category="paragraph">此自动化部署采用一本 Ansible 攻略手册设计，该攻略手册包含三个不同的角色。这些角色适用于 ONTAP ， Linux 和 Oracle 配置。下表介绍了正在自动执行的任务。</block>
  <block id="9bb642814808cd0cab510ddfb9e5969c" category="cell">* ontap_config*</block>
  <block id="c0563eda0fb9d63778efe04a13a5d744" category="cell">预检查 ONTAP 环境</block>
  <block id="79b814c8267c6b7822e78ab4624db8e0" category="cell">为 Oracle 创建基于 NFS 的 SVM</block>
  <block id="0c981d6164da0d8e69cdb199966316b0" category="cell">创建导出策略</block>
  <block id="99179ac01bbb0236fc540871377c55c4" category="cell">为 Oracle 创建卷</block>
  <block id="db738705829d97db1e287ad8ea9e5400" category="cell">创建 NFS LIF</block>
  <block id="089c4c184b079d771501d8ceb0f3bb05" category="cell">* Linux 配置 *</block>
  <block id="3ea572544d30a39d236496578f980d13" category="cell">创建挂载点并挂载 NFS 卷</block>
  <block id="db6c0f994cc39fbf66d58eea6c627e6a" category="cell">验证 NFS 挂载</block>
  <block id="6a882e7966e7869ab1d2112a0b1c0074" category="cell">特定于操作系统的配置</block>
  <block id="6e6d41d1398fafd8809de20e831c9ce3" category="cell">创建 Oracle 目录</block>
  <block id="6f965a5d44e1653dac9825f465f71c84" category="cell">配置页面</block>
  <block id="be577868fe0712b7bbb6d5cb5eae613c" category="cell">禁用 SELinux 和防火墙守护进程</block>
  <block id="bb6f16330211bf24baa83db38b11e4a9" category="cell">启用并启动 chronyd 服务</block>
  <block id="e9e5cefa281d2c696aac82ef9c756f51" category="cell">增加文件描述符硬限制</block>
  <block id="a4acc779f882208c081f943aedfeab5c" category="cell">创建 pam 会话文件</block>
  <block id="d03021f9e02b9fa9ebac591ad4bfea08" category="cell">* ORACLE_CONFIG *</block>
  <block id="5e706781d4bf141c80e249a244179235" category="cell">Oracle 软件安装</block>
  <block id="1a98fce6d77de1126bf3cb8247747621" category="cell">创建 Oracle 侦听器</block>
  <block id="841df7bfbef212936073c6d261d4dba9" category="cell">创建 Oracle 数据库</block>
  <block id="845a6e024025bb13aafdc167511e5e7d" category="cell">Oracle 环境配置</block>
  <block id="666113957f940ba4319b4f0d9c3e86c0" category="cell">保存 PDB 状态</block>
  <block id="264bca6ddd5a16346460d9c21e8f926d" category="cell">启用实例归档模式</block>
  <block id="620ca5ae835411d2031ca0fdbbbe61a1" category="cell">启用 DNFS 客户端</block>
  <block id="4d7e6c9b84f6f86cf4817262ad424eeb" category="cell">在操作系统重新启动之间启用数据库自动启动和关闭</block>
  <block id="bf60025632dd0c4a2cf35e8b33e80619" category="section-title">默认参数</block>
  <block id="ebda2606845855cc07ce0ce15ecf8a00" category="paragraph">为了简化自动化，我们已使用默认值预设了许多必需的 Oracle 部署参数。通常，无需更改大多数部署的默认参数。更高级的用户可以谨慎地更改默认参数。默认参数位于每个角色文件夹的默认目录下。</block>
  <block id="452eff11ca6d680a279a3e81b8dc8974" category="section-title">部署说明</block>
  <block id="1cf7ad9cd74067dd3f4aee3c1690ea32" category="paragraph">开始之前，请下载以下 Oracle 安装和修补程序文件，并将其放置在 ` /tmp/archive` 目录中，以便每个要部署的数据库服务器上的所有用户都能进行读取，写入和执行访问。自动化任务会在该特定目录中查找命名的安装文件，以便进行 Oracle 安装和配置。</block>
  <block id="19adadc497199e16f07f9744d43b2899" category="paragraph">您应按照 Github 存储库中的说明读取许可证信息。访问，下载，安装或使用此存储库中的内容即表示您同意所规定的许可证条款 <block ref="07d15b3b85718d883b437fb3739e59a7" category="inline-link-macro-rx"></block>。</block>
  <block id="87d624bc8a7f555a711e7214ee002eec" category="paragraph">请注意，在生成和 / 或共享任何派生作品时，此存储库中的内容存在一定的限制。请务必阅读的条款 <block ref="49480c711afcff6aca610d8294731030" category="inline-link-macro-rx"></block> 在使用内容之前。如果您不同意所有条款，请勿访问，下载或使用此存储库中的内容。</block>
  <block id="5abe869dd828ac1e4527f07db79841a8" category="inline-link-macro">此处可查看 AWX/ 塔式部署的详细步骤</block>
  <block id="c3bcf861ccc9247a7c0a9b4749747e4e" category="inline-link-macro">此处用于命令行界面部署</block>
  <block id="f867ea86471dd6849f2c840cf13d1536" category="paragraph">准备就绪后，单击 <block ref="0ecf76284fbf596cdd030af085c16a3b" category="inline-link-macro-rx"></block> 或 <block ref="42cd9508ebf775e8df0efba80be76af7" category="inline-link-macro-rx"></block>。</block>
  <block id="9b64a6dfae1f3fa326b750c2790c79fe" category="summary">本节介绍如何在使用 Azure NetApp Files SMB 卷的 AOAG 配置中实时部署 SQL 数据库资产。</block>
  <block id="5ca1071c67ab704b04ed27747f213551" category="doc">实时，高级别的参考设计</block>
  <block id="bb0357d1c0b3b8ebd31a43c9b30f3745" category="list-text">节点数： 4</block>
  <block id="7f4f30d96e1d0a820a6962ad6ac994ee" category="list-text">数据库数量： 21</block>
  <block id="f28735e3e5e57049aa575b3f0ec83c61" category="list-text">可用性组数： 4</block>
  <block id="96fb94ba9fad0b4452c212b21df61eab" category="list-text">备份保留： 7 天</block>
  <block id="a8d1485807d36562316fb8b2254bca57" category="list-text">备份归档： 365 天</block>
  <block id="4afa49afd4ebc3638f3e000d65825370" category="admonition">在具有 Azure NetApp Files 共享的 Azure 虚拟机上使用 SQL Server 部署 FCI 可提供一个具有单个数据副本的经济高效模式。如果文件路径与二级副本不同，则此解决方案可以防止出现添加文件操作问题。</block>
  <block id="ab030ea777250278c4f110a497eeef88" category="paragraph"><block ref="ab030ea777250278c4f110a497eeef88" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4822d9597460a9166778308da312709c" category="paragraph">下图显示了 AOAG 中分布在各个节点上的数据库。</block>
  <block id="af316199cc8e77dcbb6fb560cbc4c44c" category="paragraph"><block ref="af316199cc8e77dcbb6fb560cbc4c44c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d22a890163762fcf7a4cb7605c29b7e6" category="section-title">数据布局</block>
  <block id="35c33dd0c5565dbdba04dc2b313d7a2e" category="paragraph">用户数据库文件（ .mdf ）和用户数据库事务日志文件（ .ldf ）以及 tempdb 存储在同一个卷上。服务级别为 " 超 " 。</block>
  <block id="9b7d6479a15395afefc6d7f9e38a4f17" category="paragraph">此配置由四个节点和四个 AGS 组成。所有 21 个数据库（动态 AX ， SharePoint ， RDS 连接代理和索引服务的一部分）都存储在 Azure NetApp Files 卷上。数据库在 AOAG 节点之间进行平衡，以便有效地使用节点上的资源。WSFC 中添加了四个 D32 v3 实例，该实例参与了 AOAG 配置。这四个节点在 Azure 虚拟网络中进行配置，不会从内部迁移。</block>
  <block id="fcbd19b726fdd6160dfe2ab43f285a55" category="paragraph">* 注： *</block>
  <block id="09a10f0ab048cde1d7b704392ba05d9a" category="list-text">如果日志需要更高的性能和吞吐量，具体取决于应用程序的性质以及执行的查询，则可以将数据库文件置于高级服务级别，并将日志存储在超服务级别。</block>
  <block id="51368a236b969e288242f0b0b615cf74" category="list-text">如果 tempdb 文件已放置在 Azure NetApp Files 上，则 Azure NetApp Files 卷应与用户数据库文件分隔开。下面是在 AOAG 中分发数据库文件的示例。</block>
  <block id="2e66f3d288799e6f4235b883bb2f693c" category="list-text">为了保留基于 Snapshot 副本的数据保护的优势， NetApp 建议不要将数据和日志数据组合到同一个卷中。</block>
  <block id="1452bcdb4aeb229a2c2e503f9bbba753" category="list-text">如果二级数据库的文件路径与相应主数据库的路径不同，则对主副本执行的添加文件操作可能会在二级数据库上失败。如果主节点和二级节点上的共享路径不同（由于计算机帐户不同），则可能会发生这种情况。此故障可能会暂停二级数据库的发生原因。如果无法预测增长或性能模式，并且计划稍后添加文件，则使用 Azure NetApp Files 的 SQL Server 故障转移集群是可接受的解决方案。对于大多数部署， Azure NetApp Files 均可满足性能要求。</block>
  <block id="19f59b74448f6a27519db281a44e4b12" category="section-title">migration</block>
  <block id="cd6b4503e07d15cebc0842bb8da7b765" category="paragraph">可以通过多种方法将内部 SQL Server 用户数据库迁移到 Azure 虚拟机中的 SQL Server 。迁移可以联机或脱机。选择的选项取决于组织内定义的 SQL Server 版本，业务要求和 SLA 。为了最大限度地减少数据库迁移过程中的停机时间， NetApp 建议使用 AlwaysOn 选项或事务复制选项。如果无法使用这些方法，您可以手动迁移数据库。</block>
  <block id="2d4221f1ee93c102ca047daac1fba4a7" category="paragraph">在计算机之间移动数据库时，最简单且经过最彻底测试的方法是备份和还原。通常，您可以先从数据库备份开始，然后再将数据库备份副本复制到 Azure 中。然后，您可以还原数据库。为了获得最佳数据传输性能，请使用压缩的备份文件将数据库文件迁移到 Azure 虚拟机。本文档中引用的高级设计采用 Azure 文件同步 Azure 文件存储的备份方法，然后还原到 Azure NetApp Files 。</block>
  <block id="623f8382f97ee8df2d7af54439833812" category="admonition">Azure Migrate 可用于发现，评估和迁移 SQL Server 工作负载。</block>
  <block id="fbc25f1c70f1a9c133715cac6d66b21b" category="paragraph">要执行迁移，请完成以下高级步骤：</block>
  <block id="d807caa187d2fea33bab50ed1e1c79bb" category="list-text">根据您的要求设置连接。</block>
  <block id="59f59f1aebe4fc18ab054480b3a1098a" category="list-text">将完整数据库备份到内部文件共享位置。</block>
  <block id="4891d727582d5df766ee6737fe7fb761" category="list-text">使用 Azure 文件同步将备份文件复制到 Azure 文件共享。</block>
  <block id="135899cc34886eb6ce9baf7211d4adb5" category="list-text">使用所需版本的 SQL Server 配置 VM 。</block>
  <block id="fbef0b11b7ee9e0d709d3d1c6efbd4d4" category="list-text">在命令提示符处使用 `copy` 命令将备份文件复制到虚拟机。</block>
  <block id="b9786aca69df61c5165147929b4ced89" category="list-text">将完整数据库还原到 Azure 虚拟机上的 SQL Server 。</block>
  <block id="e937691d64dcb1188cbbcbcd83d87d2f" category="admonition">要还原 21 个数据库，大约需要 9 小时。此方法是针对此情形的。但是，可以根据您的情况和要求使用下面列出的其他迁移技术。</block>
  <block id="2b9d85faa379ef985ae3851810db1403" category="paragraph">用于将数据从内部 SQL Server 移动到 Azure NetApp Files 的其他迁移选项包括：</block>
  <block id="90248308f9c24bd3bf817ee129838603" category="list-text">断开数据和日志文件，将其复制到 Azure Blob 存储，然后将其附加到 Azure 虚拟机中的 SQL Server ，并使用从 URL 挂载的 ANF 文件共享。</block>
  <block id="82ce70205698ed956d1fce48af1360c0" category="inline-link">添加 Azure 副本向导</block>
  <block id="e5e07f1ff84f0082089e4fec71ed43a4" category="list-text">如果您使用的是内部部署的始终可用性组，请使用<block ref="aea558e3371e9956f5e03828309464a0" category="inline-link-rx"></block> 在 Azure 中创建副本，然后执行故障转移。</block>
  <block id="eedc53c13a9992999dba36bda1b62255" category="inline-link">事务复制</block>
  <block id="47a43d904457c52da2918f290a0ae5cb" category="list-text">使用 SQL Server<block ref="21bf5f41b40b598aae9dd55aa9dcb960" category="inline-link-rx"></block> 要将 Azure SQL Server 实例配置为订阅者，请禁用复制并将用户指向 Azure 数据库实例。</block>
  <block id="bf4614882fd1000329cfcb76f98f6c17" category="list-text">使用 Windows 导入 / 导出服务运送硬盘。</block>
  <block id="be062cdcabbb3055334e8f19b4bdf378" category="section-title">备份和恢复</block>
  <block id="b855582b6472c4fbe2a5f606191e66d6" category="paragraph">备份和恢复是任何 SQL Server 部署的一个重要方面。必须具有适当的安全网，以便与 AOAG 等高可用性解决方案结合使用，从各种数据故障和丢失情形中快速恢复。可以使用 SQL Server 数据库静默工具， Azure 备份（流式）或任何第三方备份工具（例如 Commvault ）对数据库执行应用程序一致的备份，</block>
  <block id="3896e1102f68b0bc974f324bb134f6e6" category="inline-link">SCSQLAPI 工具</block>
  <block id="e372173044ccba12657b2e3dbff1879b" category="paragraph">借助 Azure NetApp Files Snapshot 技术，您可以轻松创建用户数据库的时间点（ PIT ）副本，而不会影响性能或网络利用率。通过此技术，您还可以使用还原卷功能将 Snapshot 副本还原到新卷，或者将受影响的卷快速还原到创建 Snapshot 副本时的状态。与 Azure 备份提供的流式备份不同， Azure NetApp Files 快照过程非常快速高效，可以进行多个每日备份。如果在给定日期内可以创建多个 Snapshot 副本，则 RPO 和 RTO 时间可以显著缩短。要添加应用程序一致性，以便在创建 Snapshot 副本之前数据完好无损并正确地转储到磁盘，请使用 SQL Server 数据库暂停工具 <block ref="b800e9e09a17fc5b41967404ec8e47ac" category="inline-link-rx"></block>；访问此链接需要 NetApp SSO 登录凭据）。此工具可从 PowerShell 中执行，此工具会暂停 SQL Server 数据库，进而生成应用程序一致的存储 Snapshot 副本进行备份。</block>
  <block id="04666a337d02195d17089298f5773f4c" category="paragraph">* 注： *</block>
  <block id="a4d5ac6087b7ce119cfe6b7ad4d77ee5" category="list-text">SCSQLAPI 工具仅支持 2016 和 2017 版本的 SQL Server 。</block>
  <block id="fdcb10d4c2db07cf930247a4f9898ec5" category="list-text">SCSQLAPI 工具一次只能使用一个数据库。</block>
  <block id="2f65ae42dc3aa8b735406a2d56ceb6fb" category="list-text">通过将文件放置在单独的 Azure NetApp Files 卷上，将其与每个数据库隔离。</block>
  <block id="879351e17b2cd6d740ac0974e9ff8a5a" category="inline-link">Azure 备份</block>
  <block id="794b24c8957eec03a1402459d32f6810" category="paragraph">由于 SCSQL API 的巨大限制，<block ref="10a72c6743c3c6714e03b5537ec15603" category="inline-link-rx"></block> 用于数据保护，以满足 SLA 要求。它可以为 Azure 虚拟机和 Azure NetApp Files 中运行的 SQL Server 提供基于流的备份。Azure Backup 支持 15 分钟的 RPO ，并可频繁进行日志备份和长达一秒的 PIT 恢复。</block>
  <block id="423e555c5ec3885f2bb5d9d2d6627f63" category="section-title">监控</block>
  <block id="fe58430a0bb00057a08eed382c5d82b2" category="paragraph">Azure NetApp Files 与 Azure 监控器集成，可提供时间序列数据，并提供有关已分配存储，实际存储使用情况，卷 IOPS ，吞吐量，磁盘读取字节 / 秒的指标。 磁盘写入字节 / 秒，磁盘读取 / 秒和磁盘写入 / 秒以及相关延迟。此数据可用于确定警报瓶颈，并执行运行状况检查，以验证 SQL Server 部署是否在最佳配置下运行。</block>
  <block id="48419e90c914ae5fa935283404de8a2a" category="paragraph">在此 HLD中 ， ScienceLogic 用于通过使用适当的服务主体公开指标来监控 Azure NetApp Files 。下图显示了 Azure NetApp Files Metric 选项的示例。</block>
  <block id="2bede5da6907dcdcebc6a8f407f07467" category="paragraph"><block ref="2bede5da6907dcdcebc6a8f407f07467" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6fe292df6373534e554d5a7938bc3c3b" category="section-title">使用厚克隆的 DevTest</block>
  <block id="652f67778e6d02c7b5bfe46a3e579f7f" category="paragraph">借助 Azure NetApp Files ，您可以创建即时数据库副本，以测试应用程序开发周期内应使用当前数据库结构和内容实施的功能，并在填充数据仓库时使用数据提取和操作工具。 或者甚至恢复错误删除或更改的数据。此过程不涉及从 Azure Blob 容器复制数据，因此效率非常高。还原卷后，可以将其用于读 / 写操作，从而显著缩短验证时间和上市时间。为了确保应用程序一致性，需要将此功能与 SCSQLAPI 结合使用。这种方法提供了另一种持续成本优化技术，同时 Azure NetApp Files 还利用了 " 还原到新卷 " 选项。</block>
  <block id="e4665dd99280634e4b44ff82666fbb9f" category="list-text">使用还原新卷选项从 Snapshot 副本创建的卷会占用容量池中的容量。</block>
  <block id="0031911d8ba66a79d06b9819afd4f082" category="list-text">您可以使用 REST 或 Azure 命令行界面删除克隆的卷，以避免额外成本（如果必须增加容量池）。</block>
  <block id="cb4d46fdcb0881652013c495d90ae732" category="section-title">混合存储选项</block>
  <block id="e6a1767911a937e11cc1750fcc4256c3" category="paragraph">虽然 NetApp 建议对 SQL Server 可用性组中的所有节点使用相同的存储，但在某些情况下，可以使用多个存储选项。在 Azure NetApp Files 中， AOAG 中的一个节点与 Azure NetApp Files SMB 文件共享连接，而第二个节点与 Azure 高级磁盘连接时，可能会出现这种情况。在这些情况下，请确保 Azure NetApp Files SMB 共享包含用户数据库的主副本，并且高级磁盘用作二级副本。</block>
  <block id="009d3d51226fdccd09052934b65100db" category="list-text">在这种部署中，为了避免任何故障转移问题，请确保在 SMB 卷上启用持续可用性。如果没有持续可用的属性，则在存储层进行任何后台维护时，数据库可能会失败。</block>
  <block id="918e9d895272e6a326c6585e05ae4c08" category="list-text">将数据库的主副本保留在 Azure NetApp Files SMB 文件共享上。</block>
  <block id="1a5c3601eda1cd38072323e418968743" category="section-title">业务连续性</block>
  <block id="064ea84d2e6072b28bfd7a8b36aed3db" category="paragraph">在任何部署中，灾难恢复通常都是事后考虑的。但是，必须在初始设计和部署阶段解决灾难恢复问题，以避免对您的业务造成任何影响。借助 Azure NetApp Files ，可以使用跨区域复制（ CRR ）功能将块级别的卷数据复制到配对区域，以处理任何意外的区域中断。启用了 CRR 的目标卷可用于读取操作，因此它是灾难恢复模拟的理想候选卷。此外，可以为 CRR 目标分配最低的服务级别（例如标准），以降低总 TCO 。发生故障转移时，复制可能会中断，从而使相应的卷具有读 / 写能力。此外，还可以使用动态服务级别功能更改卷的服务级别，从而显著降低灾难恢复成本。这是 Azure NetApp Files 在 Azure 中进行块复制的另一项独特功能。</block>
  <block id="86258094262f66b30d10068d1d9c29d4" category="section-title">长期 Snapshot 副本归档</block>
  <block id="65bd92a3b5fcfea7efeb973a0a2483d8" category="inline-link">AzCopy</block>
  <block id="e6bf440e9e7e787ce92e6f8661daf9e9" category="paragraph">许多组织都必须长期保留数据库文件中的快照数据，这是强制性合规性要求。虽然此 HLD" 不会使用此过程，但可以使用简单的批处理脚本轻松完成此过程<block ref="f326c7b047cd071718d141dba06c550f" category="inline-link-rx"></block> 将 Snapshot 目录复制到 Azure Blob 容器。可以使用已计划的任务根据特定计划触发批处理脚本。此过程非常简单，包括以下步骤：</block>
  <block id="dfdc6514d824f948d82ee2ac6515603f" category="list-text">下载 AzCopy V10 可执行文件。没有要安装的内容，因为它是一个 `exe` 文件。</block>
  <block id="5434519f37049a19d388fb3edabd08f7" category="list-text">在容器级别使用具有适当权限的 SAS 令牌来授权 AzCopy 。</block>
  <block id="73facdc1e77927e1c0d4c2f66c6fedf9" category="list-text">授权 AzCopy 后，数据传输开始。</block>
  <block id="a2c31034ac77c6ad0ce6dae2a7882d73" category="list-text">在批处理文件中，请确保转义 SAS 令牌中显示的 % 字符。为此，可以在 SAS 令牌字符串中的现有 % 字符旁边添加一个额外的 % 字符。</block>
  <block id="0eed577952fd376af1fa48aa241e3df7" category="inline-link">需要安全传输</block>
  <block id="b2f731ca364e7df30cd69650bdc19d46" category="list-text">。<block ref="7e9be5c7f255e20f7f3a81046108dcad" category="inline-link-rx"></block> 存储帐户的设置可确定与存储帐户的连接是否使用传输层安全（ Transport Layer Security ， TLS ）进行保护。默认情况下，此设置处于启用状态。以下批处理脚本示例以递归方式将数据从 Snapshot 副本目录复制到指定的 Blob 容器：</block>
  <block id="f2c225fb316953652d9040f71e76717c" category="paragraph">在 PowerShell 中执行以下示例 cmd ：</block>
  <block id="e7cc24e4ddff469c6304653aea869597" category="list-text">Azure NetApp Files 不久将提供类似的长期保留备份功能。</block>
  <block id="03930ecbc2c505278298d571631e23bb" category="list-text">在任何需要将数据复制到任何区域的 Blob 容器的情况下，均可使用此批处理脚本。</block>
  <block id="a39ae09f8be4327fc176cfeb76a0e366" category="section-title">成本优化</block>
  <block id="07ecdeff0f5a70968e882eb4ace6f576" category="paragraph">随着对数据库完全透明的卷重新调整和动态服务级别更改， Azure NetApp Files 可以在 Azure 中实现持续成本优化。此 HLDC 广泛使用此功能，以避免过度配置额外存储来处理工作负载高峰。</block>
  <block id="bf511e8b678dd2ecee162930e6c8c9e6" category="paragraph">通过结合 Azure 警报日志创建 Azure 功能，可以轻松调整卷大小。</block>
  <block id="13d13fda6fbfbd83ab30f9a5bee17b08" category="section-title">在 NFS 上自动部署适用于 ONTAP 的 Oracle19c</block>
  <block id="9ce6d30135c2644ff34390c65af4061b" category="paragraph">企业正在对其环境进行自动化，以提高效率，加快部署速度并减少手动操作。Ansible 等配置管理工具正在用于简化企业数据库操作。在此解决方案中，我们将演示如何使用 Ansible 通过 NetApp ONTAP 自动配置和配置 Oracle 19c 。通过使存储管理员，系统管理员和 DBA 能够一致快速地部署新存储，配置数据库服务器并安装 Oracle 19c 软件，您可以获得以下优势：</block>
  <block id="5291cb8e681983247b899ce2364188f2" category="list-text">消除设计复杂性和人为错误，并实施可重复的一致部署和最佳实践</block>
  <block id="a90516bf4597e04e1a97bd9cb37087d8" category="list-text">缩短配置存储，配置数据库主机和安装 Oracle 的时间</block>
  <block id="a54e59b6b063d8a2bf18acffab877d09" category="list-text">提高数据库管理员，系统和存储管理员的工作效率</block>
  <block id="d18d76441366273feb36bde890ad5e1c" category="list-text">轻松扩展存储和数据库</block>
  <block id="7d85c5a5f016aefeda6b89687f1307bb" category="paragraph">NetApp 为客户提供经过验证的 Ansible 模块和角色，以加快 Oracle 数据库环境的部署，配置和生命周期管理。此解决方案提供了相关说明和 Ansible 攻略手册代码，可帮助您：</block>
  <block id="547b893b7cd300d6a8335f5b179ad12e" category="list-text">为 Oracle 数据库创建和配置 ONTAP NFS 存储</block>
  <block id="36bb01ec9f02292fb44b9f10f57ceae7" category="list-text">在 RedHat Enterprise Linux 7/8 或 Oracle Linux 7/8 上安装 Oracle 19c</block>
  <block id="548bf87c41c9d3bb76981decbd599c90" category="list-text">在 ONTAP NFS 存储上配置 Oracle 19c</block>
  <block id="950496934d91d07bb089d6ed0999b5a9" category="paragraph">有关更多详细信息或要开始，请参见下面的概述视频。</block>
  <block id="b923f56ad2a53fa1a3ca1160e48f141e" category="section-title">AWX/ 塔式部署</block>
  <block id="ab81e47672e89830ec16c581f44cb23c" category="list-text">第 1 部分：入门，要求，自动化详细信息和初始 AWX/ 塔式配置</block>
  <block id="cf7bbd18f18fdc73ee49ffea888126c7" category="list-text">第 2 部分：变量和运行攻略手册</block>
  <block id="f5e227cfa54c5693c512c6adf41a3772" category="section-title">CLI 部署</block>
  <block id="0b8a09b5974336d1f5e510d18205c03c" category="list-text">第 1 部分：入门，要求，自动化详细信息和可变控制主机设置</block>
  <block id="93cba07454f06a4a960172bbd6e2a435" category="cell">是的。</block>
  <block id="bafd7322c6e97d25b6299b5d6fe8920b" category="cell">否</block>
  <block id="0dd197c8abd1f3c3607887dbc615148f" category="doc">验证 Oracle 安装</block>
  <block id="f673434da0f39c1b4366cbc45f67da8a" category="admonition">如果安装按预期完成且 Oracle 数据库已启动，则此列表将列出 Oracle 进程</block>
  <block id="91bcd024d07cb33293902b287b0cc68c" category="paragraph">[Oracle@localhost ~ ]$ sqlplus / 作为 sysdba</block>
  <block id="b95bce10ef504692a6d971d3a30ac8c4" category="paragraph">SQL* Plus ：版本 19.0.0.0.0 —在 5 月 6 日星期四 12 ： 52 ： 51 2021 年版本 19.8.0.0.0 上生产</block>
  <block id="a2494ba30f29d91ff6876152fc693ab3" category="paragraph">版权所有（ c ） 1982-2019 ， Oracle 。保留所有权利。</block>
  <block id="ce8b3f5af3f95d98bbbf478e4c37024f" category="paragraph">已连接到： Oracle Database 19c Enterprise Edition 版本 19.0.0.0.0 - 生产版本 19.8.0.0.0</block>
  <block id="28a359e505158300600d776ae9347cac" category="paragraph">SQL/</block>
  <block id="63102463594ac5bd274343651065779d" category="paragraph">sql &gt; 从 v$database 中选择名称 log_mode ；名称 log_mode --- ------- CDB2 归档日志</block>
  <block id="7d8bf5a6b847068ff3c0eb0ca0892acf" category="paragraph">sql &gt; 显示 PDF</block>
  <block id="33c7676f0bdcf42bed62c146feaf485c" category="paragraph">sql &gt; col svrname form A30 sql &gt; col dirname form A30 sql &gt; 从 v$dnfs_servers 中选择 svrname ， dirname ， nfsversion ；</block>
  <block id="d6bee2dc52f5708cd8af49c1c263c714" category="paragraph">SVRname 名称 NFSVERSION ----------- ----------------- --------- 172.21.126.200 /rhelora03_u02 NFSv3.0 172.21.126.200 /rhelora03_u03 NFSv3.0 172.21.126.200 /rhelora03_u01 NFSv3.0</block>
  <block id="ea12870da72347cdd45bc11ae4d603dc" category="paragraph">[Oracle@localhost ~ ]$ sqlplus 系统@ //localhost ： 1523/ cdb2_pdb1.cie.netapp.com</block>
  <block id="aff680efe40afd832819af131e324051" category="paragraph">SQL* Plus ：版本 19.0.0.0.0 — 5 月 6 日星期四 13 ： 19 ： 57 2021 年版本 19.8.0.0.0</block>
  <block id="6c3d252188792733323cf879b5d196cf" category="paragraph">输入密码：上次成功登录时间： Wed ， 2021 年 5 月 5 日 17 ： 11 ： 11 -04 ： 00</block>
  <block id="531fea2bb939d7c35cad66fde1640511" category="paragraph">sql &gt; show user user is "system" sql &gt; show con_name con_name CDB2_PDB1</block>
  <block id="52320018ddc230fda7bdeccfda8b9f0a" category="section-title">如何获取帮助？</block>
  <block id="1b6a5f8b328d3175066895d7ff5ea576" category="inline-link-macro">NetApp 解决方案自动化社区支持 Slack 通道</block>
  <block id="12f178498803c606c23e7166dcefb0cb" category="paragraph">如果您需要有关该工具包的帮助，请加入 <block ref="f1bb21e2ce6888d898ae31a2098245a1" category="inline-link-macro-rx"></block> 并寻找解决方案自动化渠道来发布您的问题或询问。</block>
  <block id="75b7d47e2aa19968e092ab7ddb108a3f" category="summary">无论您是针对采用延伸型数据库的全云云还是混合云， Azure NetApp Files 都可以提供出色的选项来部署和管理数据库工作负载，同时通过将数据需求无缝迁移到应用程序层来降低 TCO 。</block>
  <block id="d8d2e6021f496c4e4a31a3d5d51c0a97" category="paragraph">本文档介绍了有关使用 Azure NetApp Files 规划，设计，优化和扩展 Microsoft SQL Server 部署的建议，这些建议可能因实施方式而异。正确的解决方案取决于实施的技术细节以及推动项目的业务需求。</block>
  <block id="56925354251a536c23de1174d3001595" category="section-title">要点总结</block>
  <block id="033e6e43f2148e187e072dc7e6585802" category="paragraph">本文档的要点包括：</block>
  <block id="b2b363e230905b04f6e9c7263aa93f42" category="list-text">现在，您可以使用 Azure NetApp Files 托管 SQL Server 集群的数据库和文件共享见证。</block>
  <block id="4d6ec76303888bc681d543d1f4593c55" category="list-text">您可以缩短应用程序响应时间并提供 99.9999% 的可用性，以便在需要时随时随地访问 SQL Server 数据。</block>
  <block id="408e4b7fbec4ba85e097b9393d2b27a7" category="list-text">您可以简化 SQL Server 部署和持续管理（例如 RAID 条带化）的整体复杂性，并即时调整大小。</block>
  <block id="41642b38214243168d907d92759dde36" category="list-text">您可以借助智能操作功能在几分钟内部署 SQL Server 数据库，并加快开发周期。</block>
  <block id="61a32d891a5f7bca599a014bc56eec61" category="list-text">如果 Azure Cloud 是目标，则 Azure NetApp Files 是最适合优化部署的存储解决方案。</block>
  <block id="d0db3f5a4a306cff20be4187b3ef3445" category="doc">VAR</block>
  <block id="fd18465573ec21a6218982055981f6b1" category="section-title">存储效率</block>
  <block id="6e8775bd755a8835ce86806d669677ea" category="section-title">存储配置</block>
  <block id="c20ad4d76fe97759aa27a0c99bff6710" category="cell">12</block>
  <block id="5b12ee0369243579651edca43ff65c85" category="cell">NFSv3</block>
  <block id="de841868c2911da76b8ae2da9fa3166d" category="cell">NFSv4.1</block>
  <block id="4db58285a0e634acd6843c40f7a6f4e0" category="paragraph">要了解有关本文档中所述信息的更多信息，请访问以下网站链接：</block>
  <block id="d53a72004974ee8431ee292856c0bba3" category="list-text">使用 Azure NetApp Files 的解决方案架构</block>
  <block id="653ba0610595f0695c3ceb2c59afed59" category="inline-link"><block ref="653ba0610595f0695c3ceb2c59afed59" category="inline-link-rx"></block></block>
  <block id="d5ec9321fb49816034de6b296ef6baa2" category="paragraph"><block ref="d5ec9321fb49816034de6b296ef6baa2" category="inline-link-rx"></block></block>
  <block id="ba110408cece764b57b56f1129b3ba2e" category="list-text">使用 Azure NetApp Files for SQL Server 部署的优势</block>
  <block id="62b5dbc436fc2540c46476bd8e484c11" category="inline-link"><block ref="62b5dbc436fc2540c46476bd8e484c11" category="inline-link-rx"></block></block>
  <block id="44594562b4f528fe8d864bd3f48ddff6" category="paragraph"><block ref="44594562b4f528fe8d864bd3f48ddff6" category="inline-link-rx"></block></block>
  <block id="7aa91f5f0414f1488ce2f5324e63d12e" category="list-text">《使用 Azure NetApp Files 的 Azure 上的 SQL Server 部署指南》</block>
  <block id="9021ea474df74856b145a78c58c35e05" category="inline-link"><block ref="9021ea474df74856b145a78c58c35e05" category="inline-link-rx"></block></block>
  <block id="52a5313d9aca117b5d167e6be79c5bc7" category="paragraph"><block ref="52a5313d9aca117b5d167e6be79c5bc7" category="inline-link-rx"></block></block>
  <block id="49217b0d4a68c88899c93d24203a34b4" category="list-text">借助 Azure NetApp Files 实现容错，高可用性和故障恢复能力</block>
  <block id="9e5e063336d276080a054861016aadd8" category="inline-link"><block ref="9e5e063336d276080a054861016aadd8" category="inline-link-rx"></block></block>
  <block id="7ff89d0ad939652d37cbab9b6f420f65" category="paragraph"><block ref="7ff89d0ad939652d37cbab9b6f420f65" category="inline-link-rx"></block></block>
  <block id="05807e454c19f244770adae059b3c330" category="section-title">高可用性</block>
  <block id="6551468cb4811e7add616eea103efea9" category="doc">分步部署操作步骤</block>
  <block id="0e6b1c16527d2792d391c578bbf12efe" category="section-title">CLI 部署 Oracle 19c 数据库</block>
  <block id="57daddd847cdbab22b7363630de48a2f" category="inline-link-macro">入门和要求部分</block>
  <block id="82ba94e85d91493ea6c88423c0b34605" category="paragraph">本节介绍使用 CLI 准备和部署 Oracle19c 数据库所需的步骤。确保您已查看 <block ref="598ea103507880273a5a1840cac102d8" category="inline-link-macro-rx"></block> 并相应地准备好您的环境。</block>
  <block id="0f2d7675188dbfc7b9df587588bff71b" category="section-title">下载 Oracle19c repo</block>
  <block id="4e2b619426350db7e7d5b09c96b8010b" category="section-title">编辑 hosts 文件</block>
  <block id="b183e47af1fa85c93e4a4368205c3249" category="paragraph">在部署之前完成以下操作：</block>
  <block id="c4ab1530ffd8a3306d47c804ca88240c" category="list-text">编辑 hosts 文件 na_oracle19c_deploy 目录。</block>
  <block id="bc1dd0e50a3c20e78cc2d680eaf32378" category="list-text">在 ONTAP 下，将 IP 地址更改为集群管理 IP 。</block>
  <block id="6475f51ce7ff0a21a5635ea50b1f1a86" category="list-text">在 Oracle 组下，添加 Oracle 主机名称。主机名必须通过 DNS 或 hosts 文件解析为其 IP 地址，或者必须在主机中指定。</block>
  <block id="5c3f5e9dc815ca28c7cf1ff64cdc61a2" category="list-text">完成这些步骤后，请保存所做的任何更改。</block>
  <block id="b27994a7bba852ac9a8f1a262413e68b" category="paragraph">以下示例说明了一个主机文件：</block>
  <block id="1caa2eee0ed6a6c5c6edcbc0320e8671" category="paragraph">此示例将执行该攻略手册，并在两个 Oracle DB 服务器上同时部署 Oracle 19c 。您也可以仅使用一个数据库服务器进行测试。在这种情况下，您只需要配置一个主机变量文件。</block>
  <block id="d11927d6f93a4edaa78dc52c6e34fd5f" category="admonition">无论您部署多少 Oracle 主机和数据库，本攻略手册的执行方式都是相同的。</block>
  <block id="030c98564d5fbd7c8672a76e2a593b21" category="section-title">编辑 host_vars 下的 host_name.yml 文件</block>
  <block id="86c40bb4891f3e6b34a2eece7bb19532" category="paragraph">每个 Oracle 主机都有其主机变量文件，该文件由包含主机专用变量的主机名标识。您可以为主机指定任何名称。从 Host VARS Config 部分编辑并复制 `host_vars` ，然后将其粘贴到所需的 `host_name.yml` 文件中。</block>
  <block id="93be2ec6954884b83ac9df8117967949" category="admonition">必须根据您的环境更改蓝色项。</block>
  <block id="5bbe8264b4d6c6787657c66d4017c183" category="section-title">主机 VARS 配置</block>
  <block id="44505c1007599884b05c0148599ad1b0" category="section-title">编辑 vars.yml 文件</block>
  <block id="41cdd95196e2753968e0d69375c41825" category="paragraph">`vars.yml` 文件整合了所有环境特定的变量（ ONTAP ， Linux 或 Oracle ），用于 Oracle 部署。</block>
  <block id="271f9ccf9c8189bb1888d25c7f0e025b" category="list-text">编辑并复制 VARS 部分中的变量，然后将这些变量粘贴到 `vars.yml` 文件中。</block>
  <block id="78d77851709e21512097cee585c59d0c" category="section-title">运行攻略手册</block>
  <block id="8f42d9f703ada5b4f1374ca96a4f1cec" category="paragraph">完成所需的环境前提条件并将变量复制到 `vars.yml` 和 `yor_host.yml` 中后，您便可部署攻略手册了。</block>
  <block id="6226590ec5d4a109e4b93317425994c1" category="admonition">必须根据您的环境更改 &lt; 用户名 &gt; 。</block>
  <block id="24b2767982b51deb19947fb3e94279c6" category="section-title">在同一 Oracle 主机上部署其他数据库</block>
  <block id="5cc75d1029461de7ddcd02bbc784af26" category="paragraph">此攻略手册的 Oracle 部分会每次在 Oracle 服务器上创建一个 Oracle 容器数据库。要在同一服务器上创建其他容器数据库，请完成以下步骤：</block>
  <block id="b4a35a2d5c3a4f3efb7c77f6bcd2a905" category="list-text">修改 host_vars 变量。</block>
  <block id="5641cb71d4e10abef15918c2dd828917" category="list-text">返回到步骤 3 - 编辑 `host_vars` 下的 `host_name.yml` 文件。</block>
  <block id="ffcc6e6df9c3839334c063a9223c65b3" category="list-text">将 Oracle SID 更改为其他命名字符串。</block>
  <block id="a936a5fabc881eb3591658385409dfb8" category="list-text">将侦听器端口更改为其他编号。</block>
  <block id="24f0029973c35b16fc49847b27215915" category="list-text">如果已安装 EM Express ，请将 EM Express 端口更改为其他编号。</block>
  <block id="365c64de6adc281d7f484029d1356855" category="list-text">将修订后的主机变量复制并粘贴到 `host_vars` 下的 Oracle 主机变量文件中。</block>
  <block id="b64219fd8290ac8a154f733df0825dbb" category="list-text">使用 `ORACLE_CONFIG` 标记执行攻略手册，如中所示 <block ref="1c892654e23ff69bf71caefc702aa8b4" category="inline-xref-macro-rx"></block>。</block>
  <block id="c150393fd3b1bd9d801cbd062234f73d" category="section-title">AWX/Tower 部署 Oracle 19c 数据库</block>
  <block id="32003b051ef9368756d1e9cd79796719" category="section-title">1. 为您的环境创建清单，组，主机和凭据</block>
  <block id="2c8b94d570dd5a63a27d112e32a1c799" category="paragraph">本节介绍如何在 AWX/Ansible 塔中设置清单，组，主机和访问凭据，以便为使用 NetApp 自动化解决方案的环境做好准备。</block>
  <block id="134d501fee5367069f0746f15302ce1f" category="list-text">配置清单。</block>
  <block id="af2c7dd4ecef5e42e9bc8f88213d51d9" category="list-text">导航到资源→清单→添加，然后单击添加清单。</block>
  <block id="56fc26ef1c8ae54dced3529eec65fa26" category="list-text">提供名称和组织详细信息，然后单击保存。</block>
  <block id="fe0981da08a8d2f4fed2006bafd9fb30" category="list-text">在清单页面上，单击已创建的清单。</block>
  <block id="3fa16e80574aff03c27de1253474a20f" category="list-text">如果存在任何清单变量，请将其粘贴到变量字段中。</block>
  <block id="65d119ae335d9e7c9c798b3e6db1b2d0" category="list-text">导航到组子菜单，然后单击添加。</block>
  <block id="396641e01a7451ca821b5d7d1377b0c7" category="list-text">提供 ONTAP 的组名称，粘贴组变量（如果有），然后单击保存。</block>
  <block id="a4f13b6e4100f2d5db093eb54a3ffe0c" category="list-text">对 Oracle 的另一个组重复此过程。</block>
  <block id="6f29f21d5f3e40494291fb357b9f4f73" category="list-text">选择已创建的 ONTAP 组，转到主机子菜单，然后单击添加新主机。</block>
  <block id="8d92ffd9d0d2b033d05731ec4af50af8" category="list-text">提供 ONTAP 集群管理 IP 的 IP 地址，粘贴主机变量（如果有），然后单击保存。</block>
  <block id="f1254ecbe57ff98d850d541b8a1ab988" category="list-text">必须对 Oracle 组和 Oracle 主机管理 IP/ 主机名重复此过程。</block>
  <block id="f11c5853bdca384314b28c9c59f2d6d0" category="list-text">创建凭据类型。对于涉及 ONTAP 的解决方案，您必须配置凭据类型以匹配用户名和密码条目。</block>
  <block id="c87e3da0a9f8d5eeacea4eac9bef80ea" category="list-text">导航到管理→凭据类型，然后单击添加。</block>
  <block id="e6bf632438290fdf98265b2b18943118" category="list-text">提供名称和问题描述。</block>
  <block id="5f5a0974b600f86bd4e77595282fcf70" category="list-text">将以下内容粘贴到输入配置中：</block>
  <block id="1616edbabbc3bbfd22afe144d1929386" category="list-text">将以下内容粘贴到注射器配置中：</block>
  <block id="c4053f20c3fe50fe899484a64367439e" category="list-text">配置凭据。</block>
  <block id="41dcc8a8aaaa79a511ba0ab4e6bde225" category="list-text">导航到资源→凭据，然后单击添加。</block>
  <block id="cc865c923bcb1c61acf9985311675b93" category="list-text">输入 ONTAP 的名称和组织详细信息。</block>
  <block id="ea314f484653e7f9f25144ea61d34888" category="list-text">选择为 ONTAP 创建的自定义凭据类型。</block>
  <block id="179cae6336461d9f165e8fa87146362a" category="list-text">在 Type Details 下，输入用户名，密码和 vsadmin_password 。</block>
  <block id="659fb4c811f1a73cf40492056e6d3c3f" category="list-text">单击 Back to Credential ，然后单击 Add 。</block>
  <block id="3b9c90c4bf202563a3cdeda5ec78fac2" category="list-text">输入 Oracle 的名称和组织详细信息。</block>
  <block id="9ef3fcc446a5f500717f9b5e9291bce4" category="list-text">选择计算机凭据类型。</block>
  <block id="9fadc5c4eed350a8a1423628227dad59" category="list-text">在 Type Details 下，输入 Oracle 主机的 Username 和 Password 。</block>
  <block id="b4ca3125325138b1dbfc309e6bd67b80" category="list-text">选择正确的权限升级方法，然后输入用户名和密码。</block>
  <block id="51b04d83367483575e89740841d94262" category="section-title">2. 创建项目</block>
  <block id="e56fa1e2655db1bc7664a00295bd62a2" category="list-text">转至 "Resources" → "projects" ，然后单击 "Add" 。</block>
  <block id="9c78f8d8687776e79018ded982e14c25" category="list-text">输入名称和组织详细信息。</block>
  <block id="4096a1870a258e9d46585f08d4906f21" category="list-text">在源控制凭据类型字段中选择 Git 。</block>
  <block id="784148c4a03cf22250dddc5756684e39" category="list-text">输入 ... <block ref="4509731a8f0f86cf7d8a010739dfd7c5" category="inline-link-rx"></block> 作为源控制 URL 。</block>
  <block id="7557bd62e953fb4d48f07977151ea94f" category="list-text">单击保存。</block>
  <block id="99bc2ea435ea8ae0ed38ef3051a4350a" category="list-text">当源代码发生更改时，项目可能偶尔需要同步。</block>
  <block id="14e017f358e18dd612a468713206093f" category="section-title">3. 配置 Oracle host_vars</block>
  <block id="05557c38b20e42173356b53f42c92152" category="paragraph">本节中定义的变量将应用于每个 Oracle 服务器和数据库。</block>
  <block id="ac886b852fd1b481e9c7e68c217b5e21" category="list-text">以以下嵌入式 Oracle hosts 变量或 host_vars 形式输入环境特定的参数。</block>
  <block id="e1847b1a99378b07a0df71cf2baac5da" category="list-text">填写蓝色字段中的所有变量。</block>
  <block id="741c92ab2429ff59927918c7a07ad9a5" category="list-text">完成变量输入后，单击表单上的复制按钮以复制要传输到 AWX 或塔式的所有变量。</block>
  <block id="1e1ea51549ac2a644a3e965113c1d370" category="list-text">导航回 AWX 或塔式，然后转到资源→主机，选择并打开 Oracle 服务器配置页面。</block>
  <block id="0d630b14098a793ac4586173286d0805" category="list-text">在详细信息选项卡下，单击编辑并将从步骤 1 复制的变量粘贴到 YAML 选项卡下的变量字段。</block>
  <block id="c6dca9e669d097298fc6059b27f96e09" category="list-text">对系统中的任何其他 Oracle 服务器重复此过程。</block>
  <block id="7890327bd98d1ec932e453254511754d" category="section-title">4. 配置全局变量</block>
  <block id="e5cac740ce6bd43e6ff83881e150d0f3" category="paragraph">本节中定义的变量适用于所有 Oracle 主机，数据库和 ONTAP 集群。</block>
  <block id="87b55102ec2889891b0258253b739244" category="list-text">在以下嵌入式全局变量或变量表单中输入环境特定的参数。</block>
  <block id="7d2a3c2ad9ee2eeb7547d205d30b9335" category="list-text">在蓝色字段中填写所有变量。</block>
  <block id="099f04b51539ed973890f1d1af2d5063" category="list-text">完成变量输入后，单击表单上的复制按钮，将要传输到 AWX 或塔式的所有变量复制到以下作业模板中。</block>
  <block id="c807b1735c1915c52547b9f7e917b55d" category="section-title">5. 配置并启动作业模板。</block>
  <block id="b1171f0b44b8d9b11ac555972ebc8c3b" category="list-text">创建作业模板。</block>
  <block id="0fd181172a82ebe5219e9a30e5d97c0d" category="list-text">导航到资源→模板→添加，然后单击添加作业模板。</block>
  <block id="c7fa74fb4cbaab9d336a8e55bf164684" category="list-text">输入名称和问题描述</block>
  <block id="3dcca032e3328f54206079a87830aa27" category="list-text">选择作业类型；运行将根据攻略手册配置系统，而检查将在不实际配置系统的情况下执行攻略手册的试运行。</block>
  <block id="daefcb84cec2b58089094a64cefb845f" category="list-text">为攻略手册选择相应的清单，项目，攻略手册和凭据。</block>
  <block id="b01c6189ccdc531874f3442803680525" category="list-text">选择 all_playbook.yml 作为要执行的默认攻略手册。</block>
  <block id="ce150ce9cfe145db199958e7cd2ecce0" category="list-text">将从步骤 4 复制的全局变量粘贴到 YAML 选项卡下的模板变量字段中。</block>
  <block id="e8f0426d97d09775fb78bdeb793b0b3e" category="list-text">选中作业标记字段中的启动时提示框。</block>
  <block id="31e2568c13fbdaaad088eb3b665dea9d" category="list-text">启动作业模板。</block>
  <block id="3624b34cb634949984bcb28c79fd327f" category="list-text">导航到资源→模板。</block>
  <block id="56ae7378358ba2b1c55c47283f544991" category="list-text">单击所需模板，然后单击启动。</block>
  <block id="ad7ad1bbc416fda1f9518ff4004d891c" category="list-text">在启动作业标记时系统提示时，键入 requirements_config 。您可能需要单击 requirements_config 下方的 Create Job Tag 行以输入作业标记。</block>
  <block id="b9ef793a3db3f07ed7dc808f4709c6ca" category="admonition">requirements_config 可确保您有正确的库来运行其他角色。</block>
  <block id="6ac039e55dcf8a249f5122b1fdbbf60e" category="list-text">单击下一步，然后单击启动以启动作业。</block>
  <block id="06f392c8dfb4783859e67f16fed69bc7" category="list-text">单击查看→作业以监控作业输出和进度。</block>
  <block id="7f6a02c24592bd309f31b5a72a0f8d6d" category="list-text">在启动作业标记时，系统提示您键入 ontap_config 。您可能需要单击 ontap_config 下方的 Create "Job Tag （创建作业标记） " 行以输入作业标记。</block>
  <block id="18c003af9ed29d295877baabf7b42ce1" category="list-text">单击查看→作业以监控作业输出和进度</block>
  <block id="c0029d5cdcaae1ceef3bed244b3ab3c6" category="list-text">完成 ontap_config 角色后，对 linux_config 再次运行此过程。</block>
  <block id="fc71758268fe1c3aba4b75df3ee0560f" category="list-text">选择所需模板，然后单击启动。</block>
  <block id="bbe073bafc2875db8b48e59284636931" category="list-text">在 Linux_config 中启动作业标记类型时，系统提示您选择 Linux_config 下方的创建 " 作业标记 " 行以输入作业标记。</block>
  <block id="bc43b7acafead2cdee67de733ae10b13" category="list-text">选择 View → Jobs 以监控作业输出和进度。</block>
  <block id="e73718535637e07111f6a4925685c0bd" category="list-text">完成 Linux_config 角色后，对 ORACLE_CONFIG 再次运行此过程。</block>
  <block id="574f8726a5cc088da32ab84269c8e0f8" category="list-text">转至资源→模板。</block>
  <block id="252b85bc679cb8ecdccbcd127c65b795" category="list-text">在启动作业标记时，系统提示您键入 ORACLE_CONFIG 。您可能需要选择 ORACLE_CONFIG 下方的 "Create Job Tag （创建作业标记） " 行以输入作业标记。</block>
  <block id="6757805f64ddba2566927ece0d9f30e1" category="section-title">6. 在同一 Oracle 主机上部署其他数据库</block>
  <block id="4edc1d4492ab93edbbb0a67c0c265b84" category="paragraph">此攻略手册的 Oracle 部分会每次在 Oracle 服务器上创建一个 Oracle 容器数据库。要在同一服务器上创建其他容器数据库，请完成以下步骤。</block>
  <block id="a12a0fa7fe728658376da87df04fa7c2" category="list-text">修改 host_vars 变量。</block>
  <block id="ba52bf2d165115d60675d61a4b84b0c6" category="list-text">返回到步骤 2 —配置 Oracle host_vars 。</block>
  <block id="d9fa63a6f267402d4cf6068165e04a38" category="list-text">如果要安装 EM Express ，请将 EM Express 端口更改为其他编号。</block>
  <block id="23f5c9b4f57b3075f9890f1bc1896ebe" category="list-text">将修订后的主机变量复制并粘贴到主机配置详细信息选项卡中的 Oracle 主机变量字段中。</block>
  <block id="4d4426a703dd8227727fef5758b680d8" category="list-text">启动仅包含 ORACLE_CONFIG 标记的部署作业模板。</block>
  <block id="0b79795d3efc95b9976c7c5b933afce2" category="section-title">简介</block>
  <block id="a2810b66f557bf43f1c602ecfe7f52b1" category="summary">本文档介绍如何利用 Azure 虚拟机在 Azure NetApp Files 上实时部署 SQL Server 始终可用性组（ AOAG ）。</block>
  <block id="0ecccb1d48727b6da357728efe7b6375" category="doc">TR-4897 ： Azure NetApp Files 上的 SQL Server — Real Deployment 视图</block>
  <block id="4eae423bbc6520b4a8fa4d0d4de28b8a" category="paragraph">NetApp 公司 Niyaz Mohamed</block>
  <block id="8ae2b9aab28b6c00df7581f99f9211ef" category="paragraph">IT 组织面临着不断变化的问题。据 Gartner 报告，到 2022 年，所有数据库中有近 75% 的数据库将需要基于云的存储。作为领先的关系数据库管理系统（ Relational Database Management System ， RDBMS ）， Microsoft SQL Server 是 Windows 平台设计的应用程序和组织的首选，这些应用程序和组织依靠 SQL Server 来实现从企业资源规划（ Enterprise Resource Planning ， ERP ）到分析再到内容管理的所有功能。SQL Server 帮助企业彻底改变了管理海量数据集的方式，并为其应用程序提供支持，以满足架构和查询性能需求。</block>
  <block id="eae371fd2d593d80849fab02c4e8b90b" category="paragraph">大多数 IT 组织都采用云优先的方法。处于转型阶段的客户会评估其当前的 IT 环境，然后根据评估和发现练习将其数据库工作负载迁移到云。促使客户迁移到云的一些因素包括弹性 / 突发，数据中心退出，数据中心整合，寿命终结情形，合并， 采集等。迁移的原因可能因组织及其各自的业务优先级而异。迁移到云时，要充分发挥 SQL Server 数据库云部署的潜能，选择合适的云存储非常重要。</block>
  <block id="f9468c81b3d59ac0030570c4f58e95f1" category="section-title">用例</block>
  <block id="cf8b0bda1e058c1f8383f434c4da9b71" category="paragraph">将 SQL Server 资产迁移到 Azure ，并将 SQL Server 与 Azure Data Factory ， Azure IoT Hub 和 Azure Machine Learning 等 Azure 的大量平台即服务（ Platform-as-a-Service ， PaaS ）功能相集成，为支持数字化转型创造了巨大的业务价值。与依赖资本支出模式或传统私有云模式相比，采用云还可以使相应的业务部门专注于工作效率并更快地交付新功能和增强功能（ DevTest 用例）。本文档介绍如何利用 Azure 虚拟机在 Azure NetApp Files 上实时部署 SQL Server 始终可用性组（ AOAG ）。</block>
  <block id="239a02aaaf9289a3093f682835f65f88" category="paragraph">Azure NetApp Files 提供具有持续可用文件共享的企业级存储。SMB 文件共享上的 SQL Server 生产数据库需要持续可用的共享，以确保节点始终能够访问数据库存储，包括在控制器升级或故障等中断情形下。持续可用的文件共享不再需要在存储节点之间复制数据。Azure NetApp Files 使用 SMB 3.0 横向扩展，持久句柄和透明故障转移来支持在发生计划内和计划外停机事件（包括许多管理任务）时执行无中断操作（ NDO ）。</block>
  <block id="f47a858d79de9725a0d6881541748e9b" category="paragraph">在规划云迁移时，您应始终评估最佳使用方法。应用程序迁移最常见且最简单的方法是重新托管（也称为提升和移动）。本文档中提供的示例方案使用重新托管方法。使用采用 Azure NetApp Files 的 Azure 虚拟机上的 SQL Server ，您可以在云中使用完整版本的 SQL Server ，而无需管理内部硬件。SQL Server 虚拟机（ VM ）还可以在按需购买的情况下简化许可成本，并为开发，测试和资产更新情形提供弹性和突发功能。</block>
  <block id="64899c745691f41e5b1dc01d3a4487d2" category="summary">本节介绍在云中使用 Azure NetApp Files 和 SQL Server 时应考虑的不同问题。</block>
  <block id="bb4695a70b92668f0a7927d04580db60" category="doc">需要考虑的因素</block>
  <block id="4dd91c7652639dacea041fe6033e2627" category="section-title">虚拟机性能</block>
  <block id="e6ac657ee6eac68b739c5cc437863922" category="inline-link">内存优化</block>
  <block id="68e5d4a238cdfe033afa141123484499" category="paragraph">选择合适的 VM 大小对于公有云中关系数据库的最佳性能非常重要。Microsoft 建议您继续使用适用于内部服务器环境中 SQL Server 的相同数据库性能调整选项。使用 ...<block ref="187f54af8632f4f6696d6052e8b74aec" category="inline-link-rx"></block> VM 大小可实现 SQL Server 工作负载的最佳性能。收集现有部署的性能数据，以确定 RAM 和 CPU 利用率，同时选择合适的实例。大多数部署可选择 D ， E 或 M 系列。</block>
  <block id="8b2db846b8ed65b2919d93a68b819a43" category="list-text">要获得最佳的 SQL Server 工作负载性能，请使用内存优化的 VM 大小。</block>
  <block id="32a3b4d7b7e6cf1ecde48636119e0288" category="list-text">NetApp 和 Microsoft 建议您先确定存储性能要求，然后再选择具有适当内存到 VCORE 比率的实例类型。这还有助于选择具有适当网络带宽的较低实例类型，以克服 VM 的存储吞吐量限制。</block>
  <block id="0abdff1d9e33eca61c14ccafe8012cd5" category="section-title">VM 冗余</block>
  <block id="9fecd525b2d9ad39ac38bbfc4d05ee17" category="inline-link">可用性集</block>
  <block id="26075dbb6cfad683e0d9bd0d29c570b8" category="inline-link">可用性区域</block>
  <block id="e936e004eab3eccfc1e7f46a3187dfd1" category="paragraph">要提高冗余和高可用性， SQL Server VM 应处于同一状态<block ref="47fe032b9b8e985355e53596ae7973ec" category="inline-link-rx"></block> 或其他<block ref="ef39442dc7c0eb954c4472567a9ca1e3" category="inline-link-rx"></block>。创建 Azure VM 时，您必须在配置可用性集与可用性区域之间进行选择； Azure VM 不能同时参与这两者。</block>
  <block id="94eeeae1e60f97a446e8c4f69d6d6f43" category="paragraph">为了实现高可用性，最好配置 SQL Server AOAG 或始终在故障转移集群实例（ FCI ）上。对于 AOAG ，这涉及到一个虚拟网络中 Azure 虚拟机上的多个 SQL Server 实例。如果数据库级别需要高可用性，请考虑配置 SQL Server 可用性组。</block>
  <block id="fa32aac4116ce1980c311f004157a133" category="paragraph">Microsoft SQL Server 可以使用 SMB 文件共享作为存储选项进行部署。从 SQL Server 2012 开始，系统数据库（主数据库，型号数据库， msdb 或 tempdb ）， 用户数据库可以作为存储选项与服务器消息块（ Server Message Block ， SMB ）文件服务器一起安装。此适用场景既适用于 SQL Server 独立服务器，也适用于 SQL Server FCI 。</block>
  <block id="250548ef00796e6a203215b1d550bb0d" category="admonition">SQL Server 数据库的文件共享存储应支持持续可用的属性。这样可以无中断地访问文件共享数据。</block>
  <block id="45a6af9c92529e3da9ccdbeae9d692ac" category="paragraph">Azure NetApp Files 可提供高性能文件存储来满足任何苛刻的工作负载要求，与块存储解决方案相比，它可以降低 SQL Server 的 TCO 。对于块存储， VM 会对磁盘操作的 I/O 和带宽施加限制；仅对 Azure NetApp Files 应用网络带宽限制即可。换言之，不会对 Azure NetApp Files 应用 VM 级别的 I/O 限制。如果没有这些 I/O 限制，在连接到 Azure NetApp Files 的较小 VM 上运行的 SQL Server 以及在较大 VM 上运行的 SQL Server 就可以正常运行。Azure NetApp Files 可降低计算和软件许可成本，从而降低 SQL Server 部署成本。有关使用 Azure NetApp Files for SQL Server 部署的详细成本分析和性能优势，请参见<block ref="458fda910151e8d66385b2aabb6cd60e" category="inline-link-rx"></block>。</block>
  <block id="9d2b7eb8bc76e60b0d9cd237d67a34fb" category="paragraph">使用 Azure NetApp Files for SQL Server 的优势包括：</block>
  <block id="8ee22743237d82e9adc18a596977a138" category="list-text">使用 Azure NetApp Files 可以使用较小的实例，从而降低计算成本。</block>
  <block id="3de639403ea86ae87a5883d359deb4ab" category="list-text">Azure NetApp Files 还可以降低软件许可成本，从而降低总体 TCO 。</block>
  <block id="46790c8fe72176f6262b4b5531482ee5" category="list-text">卷重新调整和动态服务级别功能可针对稳定状态的工作负载进行规模估算并避免过度配置，从而优化成本。</block>
  <block id="860d93b2ef30525111fa6440bf4d5bd7" category="list-text">要提高冗余和高可用性， SQL Server VM 应处于同一状态<block ref="47fe032b9b8e985355e53596ae7973ec" category="inline-link-rx"></block> 或不同的<block ref="ef39442dc7c0eb954c4472567a9ca1e3" category="inline-link-rx"></block>。如果需要用户定义的数据文件，请考虑文件路径要求；在这种情况下，请选择 SQL FCI over SQL AOAG 。</block>
  <block id="c6fbfcd868e29e37e88eaeff82a7f430" category="inline-link">\\ANFSMB-b4ca.anf.test\SQLDB 和 \\ANFSMB-b4ca.anf.test\SQLDB\</block>
  <block id="e2bed4e218692d056237b3ae3d24293c" category="list-text">支持以下 UNC 路径：<block ref="cb8cdd6ee3ebeed12086142f1a66cc3e" category="inline-link-rx"></block>。</block>
  <block id="0b4d3828f5dae91cd27e48bffa786d91" category="list-text">不支持环回 UNC 路径。</block>
  <block id="db3d2f4f54b992af225801eb51ea7387" category="list-text">要进行规模估算，请使用内部环境中的历史数据。对于 OLTP 工作负载，使用平均和高峰时间的工作负载以及磁盘读取 / 秒和磁盘写入 / 秒性能计数器将目标 IOPS 与性能要求进行匹配。对于数据仓库和报告工作负载，请使用工作负载在平均和峰值时间以及磁盘读取字节 / 秒和磁盘写入字节 / 秒匹配目标吞吐量平均值可与卷重新调整功能结合使用。</block>
  <block id="da3259c6aa3dafdc8ca15c687022a5cd" category="section-title">创建持续可用的共享</block>
  <block id="f7ee3eee4fa679986e37911272d13a29" category="inline-link">创建持续可用的共享</block>
  <block id="de7d92d6f4ac1f140ac05886ec017f09" category="paragraph">使用 Azure 门户或 Azure 命令行界面创建持续可用的共享。在门户中，选择启用持续可用性属性选项。对于 Azure 命令行界面，使用 `az netappfiles volume create 并将 smb-continuoused-avl` 选项设置为 ` $True` 来将共享指定为持续可用的共享。要了解有关创建启用了持续可用性的新卷的详细信息，请参见<block ref="86e4b436e8054cc83fccec640f98e218" category="inline-link-rx"></block>。</block>
  <block id="9a3932b7bdfdbb892087fd595ec7acb9" category="list-text">为 SMB 卷启用持续可用性，如下图所示。</block>
  <block id="c012fe8c05a3d9875a4f87cee09d1ca9" category="list-text">如果使用的是非管理员域帐户，请确保已为该帐户分配所需的安全权限。</block>
  <block id="762783478495f0889d01a59db256f92c" category="list-text">在共享级别设置适当的权限，并设置适当的文件级别权限。</block>
  <block id="bfb74db6a55528f52e8ecb83a507a043" category="inline-link">将现有 SMB 卷转换为使用持续可用性</block>
  <block id="3cad4a4fcd378074292bfc2ff45fd4ca" category="list-text">无法在现有 SMB 卷上启用持续可用属性。要将现有卷转换为使用持续可用的共享，请使用 NetApp Snapshot 技术。有关详细信息，请参见<block ref="25dc0603f84029cfd15a97a37903a54c" category="inline-link-rx"></block>。</block>
  <block id="015dd90c833178044ff327aee63f72ec" category="paragraph"><block ref="015dd90c833178044ff327aee63f72ec" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9446a98ad14416153cc4d45ab8b531bf" category="section-title">性能</block>
  <block id="ee38206503545cf54ad072dee7f8ab1a" category="paragraph">Azure NetApp Files 支持三种服务级别：标准（每 TB 16 MBps ），高级（每 TB 64 MBps ）和超级（每 TB 128 MBps ）。配置适当的卷大小对于优化数据库工作负载性能非常重要。使用 Azure NetApp Files 时，卷性能和吞吐量限制取决于以下因素的组合：</block>
  <block id="b87f5218989e854f2889f939a4e2ec06" category="list-text">卷所属容量池的服务级别</block>
  <block id="9320cce40e9ab4d677bfcc78eddc64d5" category="list-text">分配给卷的配额</block>
  <block id="2d98af90367bed299b95066a85be0a17" category="list-text">容量池的服务质量（ QoS ）类型（自动或手动）</block>
  <block id="a6f08c2897faaf4d449d71d87f473ff1" category="inline-link">Azure NetApp Files 的服务级别</block>
  <block id="ac56170d8576092b90989d467f2d383e" category="paragraph">有关详细信息，请参见<block ref="1e8ed0f384e427209ce2e9dfbaed249d" category="inline-link-rx"></block>。</block>
  <block id="79bcc7c0be7625b4b6b95ac8189ec45e" category="paragraph"><block ref="79bcc7c0be7625b4b6b95ac8189ec45e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1eb24bd760e508043a3cfdfe91ba9489" category="section-title">性能验证</block>
  <block id="af3948d0fe6860f3a865cd04abebc009" category="inline-link">SQL Server 存储基准测试（ Storage Benchmark ， SB ）工具</block>
  <block id="01384acc34d886b9383610a7494ca75a" category="paragraph">与任何部署一样，测试虚拟机和存储也至关重要。对于存储验证，可使用 HammerDB ， Apploader ，等工具<block ref="df8d6ca8d2831e94c0812b2b971f8958" category="inline-link-rx"></block>或任何具有适当读 / 写混合的自定义脚本或 FIO 。但请注意，大多数 SQL Server 工作负载，甚至繁忙的 OLTP 工作负载，读取率接近 80% – 90% ，写入率接近 10% – 20% 。</block>
  <block id="10fde396dd4a669ec17689dd7cf8b599" category="paragraph">为了展示性能，我们对使用高级服务级别的卷执行了快速测试。在此测试中，卷大小从 100 GB 实时增加到 2 TB ，而不会中断应用程序访问和零数据迁移。</block>
  <block id="6fab14b7b6a90422e865a3b09497edaa" category="paragraph"><block ref="6fab14b7b6a90422e865a3b09497edaa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="eedfe317eed7692e9d95ba36177a80e9" category="paragraph">下面是使用 HammerDB 对本白皮书所述的部署执行实时性能测试的另一个示例。在此测试中，我们使用了一个小型实例，其中包含八个 vCPU ，一个 500 GB 高级 SSD 和一个 500 GB SMB Azure NetApp Files 卷。HammerDB 配置了 80 个仓库和 8 个用户。</block>
  <block id="c365893719ad3de45f14fa9c19408eca" category="paragraph">下图显示，使用大小相当的卷（ 500 GB ）时， Azure NetApp Files 能够以 4 倍的延迟提供每分钟事务数的 2.6 倍。</block>
  <block id="d50d666921da97fdc14e35f752474e41" category="paragraph">另一项测试是，将大小调整为使用 32 个 vCPU 和 16 TB Azure NetApp Files 卷的较大实例。每分钟事务数显著增加，延迟始终保持在 1 毫秒。在此测试中， HammerDB 配置了 80 个仓库和 64 个用户。</block>
  <block id="3b38e0407e747349840c72259c5da930" category="paragraph"><block ref="3b38e0407e747349840c72259c5da930" category="inline-image-macro-rx" type="image"></block></block>
  <block id="892725223bbd64ebec595545eeaf8c28" category="paragraph">通过 Azure NetApp Files ，可以无中断，透明地调整卷大小，并且可以在不发生停机且不影响应用程序的情况下更改服务级别。这是一项独特的功能，可实现动态成本管理，避免使用峰值指标执行数据库规模估算。而是可以使用稳定状态的工作负载，从而避免前期成本。通过卷重新调整和动态服务级别更改，您可以几乎瞬时按需调整 Azure NetApp Files 卷的带宽和服务级别，而无需暂停 I/O ，同时保留数据访问。</block>
  <block id="44aaafbc17f2a4fcbd6d52e1c8ee0cae" category="paragraph">可以使用 LogicApp 或功能等 Azure PaaS 产品根据特定的 webhook 或警报规则触发器轻松调整卷大小，以满足工作负载需求，同时动态处理成本。</block>
  <block id="d613d5e1ef7a7f52eed191ef1066a08a" category="paragraph">例如，假设数据库需要 250 MBps 才能实现稳定状态操作；但是，它也需要 400 MBps 的峰值吞吐量。在这种情况下，应使用高级服务级别内的 4 TB 卷执行部署，以满足稳定状态的性能要求。要处理高峰工作负载，请在该特定时间段内使用 Azure 功能将卷大小增加到 7 TB ，然后减小卷大小以使部署经济高效。此配置可避免过度配置存储。</block>
  <block id="373f503ebd19225995680383c6e2d54a" category="summary">讨论业务应用程序和企业数据库解决方案功能的系列博客</block>
  <block id="e4f724bc105592da045b6dd008770bbf" category="doc">业务应用程序和企业数据库博客</block>
  <block id="034233dab82dddd28f950b8d4198499e" category="paragraph">重点介绍业务应用程序和企业数据库解决方案特定功能的博客概述。</block>
  <block id="8e90e89b52f60feebe2c0df72ca0f424" category="section-title">业务应用程序博客</block>
  <block id="9149421bcec7ca7e29560cd7fc83c4d0" category="section-title">企业数据库博客</block>
  <block id="506b02d257f89febd090ded6564e8c4f" category="summary">NetApp 解决方案中自动化功能的最新新增功能</block>
  <block id="1c2c68dc77a1fbb891d0819f68a3c0dd" category="doc">解决方案自动化中的新增功能</block>
  <block id="a90193527119bcbd79a1084d94ec3914" category="paragraph">概述 NetApp 解决方案的最新自动化功能。</block>
  <block id="153fbde949ec10e69bae256a4114f480" category="cell">* 开始使用解决方案自动化 *</block>
  <block id="3d45b043c5518eca1e47fb4ba8a813da" category="inline-link-macro">为 RHEL/CentOS 上的 CLI 部署设置 Ansible 控制节点</block>
  <block id="0d4c9e63678641d4ae0e23bd36684722" category="cell"><block ref="0d4c9e63678641d4ae0e23bd36684722" category="inline-link-macro-rx"></block></block>
  <block id="2afb5cc3404c6c8162722fd41895c2de" category="inline-link-macro">为 Ubuntu / Debian 上的 CLI 部署设置 Ansible 控制节点</block>
  <block id="0f752948a660f9bbb5956c86d669a395" category="cell"><block ref="0f752948a660f9bbb5956c86d669a395" category="inline-link-macro-rx"></block></block>
  <block id="6b8c64be0bad88fb867c6576ac777b25" category="inline-link-macro">为塔式 /AWX 部署设置 Ansible 塔式或 AWX</block>
  <block id="b8c65aa5893cb554f17ec9c5b653c9bc" category="cell"><block ref="b8c65aa5893cb554f17ec9c5b653c9bc" category="inline-link-macro-rx"></block></block>
  <block id="e7760fa86ac312b359215e15113fde9b" category="cell">* 在混合云中自动化 Oracle 数据库基础架构 *</block>
  <block id="61133eed21544af8c4988e345e562ce0" category="summary">讨论数据保护和安全解决方案功能的一系列视频和演示</block>
  <block id="80a9ba2a1f85a5cf26d01122fd696973" category="doc">数据保护和安全视频和演示</block>
  <block id="ea233cf80b43de3a730e01b8e376a9bd" category="paragraph">视频和演示概述，重点介绍数据保护和安全解决方案的具体功能。</block>
  <block id="b9332d9812fee56d4f22fd8f245323a9" category="section-title">演示 / 视频</block>
  <block id="b278438874f41a76068d02368e65aa3e" category="doc">关于此存储库</block>
  <block id="404af48e0cb5f84306fbd93fac2ff8be" category="paragraph">NetApp 解决方案存储库简介—从何处查找特定解决方案以及如何使用此存储库。</block>
  <block id="45ac6b09a3b8f5ea07ca656ca8dea987" category="section-title">存储库导航</block>
  <block id="c28e40ef527e43509a0fcd3b114ff824" category="paragraph">存储库的导航由主边栏管理，主边栏显示在页面左侧。解决方案分为更高级别的技术领域，这些技术领域被定义为 NetApp 解决方案的 " 技术塔 " 。</block>
  <block id="e9982e506e30915713c7485a2e77633b" category="section-title">Technology Towers 概述</block>
  <block id="d67372be0bd12a2ddbcf795ccfacc7de" category="cell">* 第节 *</block>
  <block id="f14c276c07197ebef1394a5a219087a1" category="cell">* 问题描述 *</block>
  <block id="7324b08f5dfbdb08191404d3fdacfcbd" category="cell">一组基于 AI 的解决方案。解决方案可细分为以下类别之一： [Navy]#AI Converged infrastructures # [navy]# 数据管道，数据湖和管理 # [navy]# 用例 #</block>
  <block id="f5f0336c80fe8cdd5a51752c1ce61ac3" category="cell">数据分析解决方案集合（例如 Splunk SmartStore ， Apache Spark 等）</block>
  <block id="f27edcc7a209983dc37cbcdb0df49ce7" category="cell">虚拟桌面</block>
  <block id="b3f656e5589b8507fed35a5cde55c7ce" category="cell">一组最终用户计算解决方案。解决方案可细分为以下类别之一： [Navy]#Virtual Desktop Service （ VDS ） # [Navy]#VMware Horizon # [Navy]#Citrix Virtual Apps and Desktops# [Navy]# Virtual Desktop Applications#</block>
  <block id="f4d9ebd0d9f8b0ed1329093e48c11221" category="cell">基于容器的解决方案集合。解决方案可细分为以下类别之一： [Navy]#Red Hat OpenShift# [Navy]#Google Anthos#</block>
  <block id="861a3cbb41e90c0f7d83b50b7522b0bd" category="cell">业务应用程序</block>
  <block id="c343bf84179077b4550742e0222d3349" category="cell">业务应用程序解决方案集合。解决方案可细分为以下类别之一： [Navy]#SAP#</block>
  <block id="8a0b9e6043677d9587a3e02ced9a6dfd" category="cell">数据库解决方案集合。解决方案可细分为以下类别之一： [Navy]#SAP HANA # [Navy]#Oracle# [Navy]#Microsoft SQL Server#</block>
  <block id="0c4d76d4ecbc8a7673a87d5db1a4be02" category="cell">数据保护和安全</block>
  <block id="2d1967e7713e138fd3ae023289777aa9" category="cell">数据保护和安全解决方案的集合。</block>
  <block id="b7a24266075c9746022177eea6c08b63" category="cell">一组基于基础架构的解决方案。</block>
  <block id="d83d094e8e3ce7450bf099061814d148" category="cell">使用 Red Hat Ansible 开始使用解决方案自动化概述。</block>
  <block id="9d412763b2de5dee4ed0f42d2103add3" category="section-title">PDF 生成</block>
  <block id="1800b180be967f95744f7364685fb31c" category="paragraph">通过使用位于页面左侧主边栏上方的 PDF 部分，可以为解决方案的任何解决方案或部分生成 PDF 。生成 PDF 功能会遵循指定部分的树结构，并从导航边栏的该部分生成 PDF ，其中包含所有 HTML 文件。</block>
  <block id="a2d39240fef90d6c07aab9af2812eb37" category="paragraph">* 注： * PDF 生成不会包括引用此存储库中未包含的文件（例如 PDF 内容链接）的文档。PDF 生成仅包含呈现为 HTML 的内容。</block>
  <block id="5056e38cf19c0867f1e7d704536e90e9" category="paragraph">展开 PDF 部分时，可能会显示以下选项：</block>
  <block id="a7d6475ec8993b7224d6facc8cb0ead6" category="cell">站点</block>
  <block id="a76ccb675a248dafee3369dac8c7a73c" category="cell">生成整个 NetApp 解决方案站点的 PDF 。生成的 PDF 将在一个 PDF 文件中包含所有解决方案内容。</block>
  <block id="855c3eca6c7aaef477b4f03e4699944d" category="cell">部分</block>
  <block id="ea89392074bfe589772079fc76366988" category="cell">显示已使用导航菜单展开的部分的列表。要为整个解决方案生成 PDF ，请选择代表特定解决方案顶级的部分。</block>
  <block id="42e9d51e56141020837a7c7e4668e09c" category="cell">此页面</block>
  <block id="769e587b4afcb6a5fe52c83eabca49be" category="cell">为当前显示的网页生成 PDF 。它将 * 仅 * 生成当前可见的页面。</block>
  <block id="6174d88cc7c0409df3e035a5c9d089cb" category="section-title">更改日志</block>
  <block id="a0067ab2420cbaebc335efc5c2433c45" category="inline-link-macro">更改日志</block>
  <block id="1144ef243d0744e29b8bb83edad3cd0d" category="paragraph">存储库的所有主要更改（新解决方案，主要更新，新视频 / 演示等）都会在中进行跟踪 <block ref="95485865b5d32e0932da8207f23060b5" category="inline-link-macro-rx"></block>。</block>
  <block id="bea4c2c8eb82d05891ddd71584881b56" category="section-title">反馈</block>
  <block id="fb6b632cdd61e02434568081cbbf0fae" category="paragraph">请使用 <block ref="a5f81f398e43efd62a061a201309bfa7" category="inline-link-macro-rx"></block> 请求对内容进行更改或提供有关内容的反馈。请尽可能具体地确保您的反馈得到适当处理。</block>
  <block id="ec9f29e2bd26bf4a641b2964f3e3cf52" category="summary">讨论 NetApp 解决方案中自动化功能的系列博客</block>
  <block id="6d64ee49cfa68e79b6fc189f1f83eef9" category="doc">解决方案自动化博客</block>
  <block id="6380d01fb740985eb6892589e7579224" category="paragraph">重点介绍 NetApp 解决方案中特定自动化功能的博客概述。</block>
  <block id="8893b40d0413bdee0d28539b7201b89c" category="summary">讨论 AI 和现代数据分析解决方案功能的一系列视频和演示</block>
  <block id="d14e8dc770c2ede214d6db5eeb5d5167" category="doc">人工智能和现代数据分析视频和演示</block>
  <block id="4696a661acac2c10910848bfebf30d2d" category="paragraph">视频和演示概述，重点介绍 AI 和现代数据分析解决方案的特定功能。</block>
  <block id="bd86b07883a3c2983a874d3a11359cde" category="section-title">YouTube 上的演示 / 视频</block>
  <block id="145706f4acca44c289ff5ca8cc5b2b86" category="inline-link-macro">NetApp AI 解决方案</block>
  <block id="f4016f882c8544b575d00a8cb6a17809" category="list-text"><block ref="f4016f882c8544b575d00a8cb6a17809" category="inline-link-macro-rx"></block></block>
  <block id="895a85fc0a1a565ac547acc1bc9740f3" category="inline-link-macro">MLOps</block>
  <block id="7cd0e3a75573824e7933841074476cbe" category="list-text"><block ref="7cd0e3a75573824e7933841074476cbe" category="inline-link-macro-rx"></block></block>
  <block id="c8d20ce0b6bb23d912f3368f706d5794" category="summary">NetApp 解决方案是一套战略和技术功能，旨在强调 NetApp 产品和服务组合，以满足客户最关键的业务需求。</block>
  <block id="c6aaad7e04b9605d83a2a2aa661fc1b4" category="summary">借助 NetApp VDS ，管理员可以将任务委派给其他人。他们可以连接到已部署的服务器以进行故障排除，查看日志和运行审核报告。在帮助客户时，帮助台或 3 级技术人员可以根据需要对用户会话进行影子管理，查看进程列表并终止进程。</block>
  <block id="3a1e041969ddc2d8e0e399260d9159a7" category="doc">使用 Login VSI 进行单服务器负载测试</block>
  <block id="12d80b6f529069c8b2bc8d45947a0379" category="paragraph">NetApp 虚拟桌面服务使用 Microsoft 远程桌面协议来访问虚拟桌面会话和应用程序，而 Login VSI 工具可确定可在特定服务器型号上托管的最大用户数。Login VSI 可按特定时间间隔模拟用户登录，并执行用户操作，例如打开文档，阅读和撰写邮件，使用 Excel 和 PowerPoint ，打印文档，压缩文件以及随机中断。然后，它会测量响应时间。如果服务器利用率较低，则用户响应时间较短；如果添加了更多用户会话，则用户响应时间会增加。Login VSI 会根据初始用户登录会话确定基线，当用户响应超过基线 2 秒时，它会报告最大用户会话。</block>
  <block id="4be1d7a9b1a8d85ed7d1cf5c72b23928" category="paragraph">NetApp 虚拟桌面服务利用 Microsoft 远程桌面协议访问虚拟桌面会话和应用程序。为了确定可在特定服务器型号上托管的最大用户数，我们使用了 Login VSI 工具。Login VSI 可按特定时间间隔模拟用户登录，并执行用户操作，例如打开文档，阅读和撰写邮件，使用 Excel 和 PowerPoint ，打印文档，压缩文件，随机中断等。它还可测量响应时间。如果服务器利用率较低，则用户响应时间较短；如果添加了更多用户会话，则用户响应时间会增加。Login VSI 会根据初始用户登录会话确定基线，当用户响应超过基线 2 秒时，它会报告最大用户会话数。</block>
  <block id="481e9968651d6bd0d36d67a776a0f32a" category="paragraph">下表包含用于此验证的硬件。</block>
  <block id="e93f994f01c537c4e2f7d8528c3eb5e9" category="cell">计数</block>
  <block id="8417ade953d75aa6fa3c64813e005e17" category="cell">NetApp HCI H610C</block>
  <block id="ec1d568aa57f1e1231acef5759640fc6" category="cell">一个集群中有三个用于启动程序， AD ， DHCP 等。一台服务器用于负载测试。</block>
  <block id="5b68b81817d64cfa84c65e2e185efe97" category="cell">NetApp HCI H615C</block>
  <block id="c36af9ab64be0b8bd4d5097f58b8a5ba" category="cell">2 个 24C Intel Xeon Gold 6282 @2.1 GHz 。1.5 TB RAM 。</block>
  <block id="825c03a9f78635bec804883dde1bd6bf" category="paragraph">下表包含用于此验证的软件。</block>
  <block id="f5bf48aa40cad7891eb709fcf1fde128" category="cell">产品</block>
  <block id="f80ee94fe4a9c10f8d85e442e7521687" category="cell">NetApp VDS 5.4</block>
  <block id="bb15f84d3b96a9b33719b8a71bc62207" category="cell">VM 模板 Windows 2019 1809</block>
  <block id="f6a3c0d463e2ae697b02a9893e2062a3" category="cell">适用于 RDSH 的服务器操作系统</block>
  <block id="5a264c4e5b7b75d4ead67bf3ff7988bc" category="cell">登录 VSI</block>
  <block id="5227da0541209a94c7dc0a07cf3e0740" category="cell">4.1.32.1</block>
  <block id="123995603a5e237810bf85a8e3c73f2e" category="cell">VMware vSphere 6.7 Update 3</block>
  <block id="2752fcc90cb7cc7439b827d762e89166" category="cell">VMware vCenter 6.7 Update 3f</block>
  <block id="436bc441be68b676a199df5c1ea02263" category="cell">VMware 管理工具</block>
  <block id="9ad541af6dac1be0c6655522128a386c" category="paragraph">Login VSI 测试结果如下：</block>
  <block id="17126aef3e415713552604218f448967" category="cell">VM 配置</block>
  <block id="084abcce930cefa047af15fc0836639a" category="cell">Login VSI 基线</block>
  <block id="8bb9799dff9f679e2305879f7dc1a9f0" category="cell">Login VSI 最大值</block>
  <block id="e49775052ecbe49b489c84d0b09e916e" category="cell">H610C</block>
  <block id="a9cc7da7b66d8162a44a176bb1109440" category="cell">8 个 vCPU ， 48 GB RAM ， 75 GB 磁盘， 8 Q vGPU 配置文件</block>
  <block id="28267ab848bcf807b2ed53c3a8f8fc8a" category="cell">799</block>
  <block id="8f85517967795eeef66c225f7883bdcb" category="cell">178.</block>
  <block id="bd40934d28717a37aa4087f1622d8f0b" category="cell">H615C</block>
  <block id="4052d2c7017812dc33333a4dc7e83dc9" category="cell">12 个 vCPU ， 128 GB RAM ， 75 GB 磁盘</block>
  <block id="eefc9e10ebdc4a2333b42b2dbb8f27b6" category="cell">763</block>
  <block id="7a614fd06c325499f1680b9896beedeb" category="cell">272</block>
  <block id="71c62dd6d64bb960471819c829a777fd" category="paragraph">考虑到子 NUMA 边界和超线程，选择用于 VM 测试和配置的八个 VM 取决于主机上可用的核心。</block>
  <block id="0f57e9c52f3aa2d44da0de48ac87443a" category="paragraph">我们在 H610C 上使用了 10 个启动器 VM ，这些 VM 使用 RDP 协议连接到用户会话。下图显示了 Login VSI 连接信息。</block>
  <block id="ad1351ac01d5fe0ac5546c8a2fd2d170" category="paragraph"><block ref="ad1351ac01d5fe0ac5546c8a2fd2d170" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1dba4e8b5ffc06c0ccce673fd6f48159" category="paragraph">下图显示了 H610C 的 Login VSI 响应时间与活动会话的对比情况。</block>
  <block id="8d58d21e6be9e4be37d3c42935a380b5" category="paragraph"><block ref="8d58d21e6be9e4be37d3c42935a380b5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="65f671ed80b2c6f0cc371ab295230a3a" category="paragraph">下图显示了 H615C 的登录 VSI 响应时间与活动会话的对比情况。</block>
  <block id="72cce33d21386089f9a521f893c14d41" category="paragraph"><block ref="72cce33d21386089f9a521f893c14d41" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5c29ae1e9123280c1975dbc407f3eca3" category="paragraph">下图显示了在对 vSphere 主机和 VM 执行 H615C 登录 VSI 测试期间 Cloud Insights 的性能指标。</block>
  <block id="d64755ae2a4094876fbaf88a161ddec2" category="paragraph"><block ref="d64755ae2a4094876fbaf88a161ddec2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1ab628831ed501803e9da2a64f12dd6e" category="inline-link-macro">下一步：管理门户</block>
  <block id="20fcc4e371ed448b0d5ffee3f4aecb43" category="paragraph"><block ref="20fcc4e371ed448b0d5ffee3f4aecb43" category="inline-link-macro-rx"></block></block>
  <block id="0ccea8702c360d2d159b0e8477fe81d6" category="summary">使用 H610C 或 H615C 时， GPU 的许可证必须从有权转售许可证的 NVIDIA 合作伙伴处购买。</block>
  <block id="1f26c520bd4eba393348dedea38da7b7" category="doc">NVIDIA 许可</block>
  <block id="b548ee560d6fa4ee980d777df0300d09" category="inline-link">配对节点定位器</block>
  <block id="72d760f4e8266e660fa7126e42f63bbe" category="paragraph">使用 H610C 或 H615C 时， GPU 的许可证必须从有权转售许可证的 NVIDIA 合作伙伴处购买。您可以找到 NVIDIA 与的合作伙伴<block ref="32da44153625c96a28e5bf10161bbc42" category="inline-link-rx"></block>。搜索虚拟 GPU （ vGPU ）或 Tesla 等能力。</block>
  <block id="7709fb92e99b3458d440c5212792a0de" category="paragraph">NVIDIA vGPU 软件有四个版本：</block>
  <block id="31473f257c4cfabfcba0c506fefcf4ca" category="list-text">NVIDIA GRID 虚拟 PC （ GRID vPC ）</block>
  <block id="75cc5be2167cc23ca9d32aa78a164907" category="list-text">NVIDIA GRID 虚拟应用程序（ GRID vApp ）</block>
  <block id="53b933a69a5adecaa6c8c8817d2d87a5" category="list-text">NVIDIA Quadro 虚拟数据中心工作站（ Quadro vDWS ）</block>
  <block id="2d655109b3aad5a539482617b4aa3b6b" category="list-text">NVIDIA Virtual ComputeServer （ vComputeServer ）</block>
  <block id="38f26d9fb2d58dd577140e84010a059d" category="section-title">网格虚拟 PC</block>
  <block id="e43876de331b666ca7fd1c7bbb8a844d" category="paragraph">此产品非常适合希望使用虚拟桌面为 Microsoft Windows 应用程序，浏览器，高清视频和多显示器支持提供卓越用户体验的用户。NVIDIA GRID 虚拟 PC 可在虚拟环境中提供原生体验，让您可以以全性能运行所有 PC 应用程序。</block>
  <block id="06a4851adc711a27ef53d0577d69e210" category="section-title">网格虚拟应用程序</block>
  <block id="2c20bf668630521a8f76995b0c04c398" category="paragraph">网格 vApp 适用于部署远程桌面会话主机（ RDSH ）或其他应用程序流式或基于会话的解决方案的组织。网格 vApp 还支持 Windows Server 托管的 RDSH 桌面，旨在以全性能交付 Microsoft Windows 应用程序。</block>
  <block id="5de115addc6579e1d30075a2a92c9ae7" category="section-title">Quadro 虚拟数据中心工作站</block>
  <block id="74fec534073fb87750193748093ada5a" category="paragraph">本版本非常适合使用功能强大的 3D 内容创建应用程序的主流和高端设计人员，例如，达索 CATIA ， SOLIDWORKS ， 3dexcite ， Siemens NX ， PTC 克里奥， Schlumberg器 Petrel 或 Autodesk Maya 。通过 NVIDIA Quadro vDWS ，用户可以在任何设备上访问具有全部功能和性能的专业图形应用程序。</block>
  <block id="fb5cc5533386fd1b00e6b986dec8cba1" category="section-title">NVIDIA Virtual ComputeServer</block>
  <block id="087877c8284ea313c79d65cb22d48329" category="paragraph">许多组织都运行计算密集型服务器工作负载，例如人工智能（ AI ），深度学习（ DL ）和数据科学。对于这些使用情形， NVIDIA vComputeServer 软件可虚拟化 NVIDIA GPU ，从而通过错误更正代码，页面停用，通过 NVLink 对等和多 vGPU 等功能加快计算密集型服务器工作负载的速度。</block>
  <block id="e1f54ed77362f191ac08c4db8d9c44cd" category="admonition">使用 Quadro vDWS 许可证，您可以使用网格 vPC 和 NVIDIA vComputeServer 。</block>
  <block id="d685cba160011e42327272678904bcbc" category="inline-link-macro">下一步：部署</block>
  <block id="fed95bc65003dcb3d5ee273e3926bb25" category="paragraph"><block ref="fed95bc65003dcb3d5ee273e3926bb25" category="inline-link-macro-rx"></block></block>
  <block id="56b4cb3c337694fdafc2164dddad87fa" category="summary">GPU 通常用于通过执行重复性计算实现图形可视化（渲染）。这种重复计算功能通常用于人工智能和深度学习用例。</block>
  <block id="ca32c5a534baaf5f6dc3e6e6fed62450" category="doc">GPU 注意事项</block>
  <block id="ceeb28ce3b9ce753f02856fffb7ba66c" category="paragraph">对于图形密集型应用程序， Microsoft Azure 提供基于 NVIDIA Tesla M60 卡的 NV 系列，每个 VM 具有一到四个 GPU 。每个 NVIDIA Tesla M60 卡都包含两个基于 Maxwell 的 GPU ，每个 GPU 具有 8 GB 的 GDDR5 内存，总共 16 GB 。</block>
  <block id="cb433c3099845f0ac8f3ba53d162db7b" category="admonition">NV 系列附带 NVIDIA 许可证。</block>
  <block id="0f0c98cc175dc7cda319a35afcd199e5" category="paragraph"><block ref="0f0c98cc175dc7cda319a35afcd199e5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ead26a90008a32871b53cb37bbe8431a" category="paragraph">使用 NetApp HCI 时， H615C GPU 包含三个 NVIDIA Tesla T4 卡。每个 NVIDIA Tesla T4 卡都具有一个基于旅行的 GPU ，其中包含 16 GB 的 GDDR6 内存。在 VMware vSphere 环境中使用时，虚拟机可以共享 GPU ，每个 VM 都具有专用的帧缓冲区内存。NetApp HCI H615C 上的 GPU 提供了光线跟踪功能，可以生成逼真的图像，包括光照。请注意，您需要具有一个 NVIDIA 许可证服务器，并获得 GPU 功能的许可证。</block>
  <block id="148811d448421f6a42c549400b7201c0" category="paragraph"><block ref="148811d448421f6a42c549400b7201c0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fc6992cca0b3d14a85c456d0890f3e37" category="paragraph">要使用 GPU ，您必须安装相应的驱动程序，此驱动程序可从 NVIDIA 许可证门户下载。在 Azure 环境中， NVIDIA 驱动程序可作为 GPU 驱动程序扩展使用。接下来，必须更新以下屏幕截图中的组策略，以便将 GPU 硬件用于远程桌面服务会话。您应确定 H.264 图形模式的优先级并启用编码器功能。</block>
  <block id="5b0ff68b017720dd46aa6d1923fdfa95" category="paragraph"><block ref="5b0ff68b017720dd46aa6d1923fdfa95" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d7d3d3d6dd94c69620cd3edfb005691c" category="paragraph">使用任务管理器或在运行 WebGL 示例时使用 nvidia-smi 命令行界面验证 GPU 性能监控。确保 GPU ，内存和编码器资源已被占用。</block>
  <block id="d13ca37d387c1bb473c0343278d0477d" category="paragraph"><block ref="d13ca37d387c1bb473c0343278d0477d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9f2b53ac98ef55a900849ead654ca636" category="paragraph">为了确保虚拟机部署到采用虚拟桌面服务的 NetApp HCI H615C 中，请使用包含 H615C 主机的 vCenter 集群资源定义一个站点。VM 模板必须附加所需的 vGPU 配置文件。</block>
  <block id="818fad61fba48977b2293819f37e950a" category="paragraph">对于共享多会话环境，请考虑分配多个同构 vGPU 配置文件。但是，对于高端专业图形应用程序，最好将每个 VM 专用于一个用户，以使 VM 保持隔离。</block>
  <block id="a2db30df8af33b0e661aaed00ce2c1d3" category="paragraph">GPU 处理器可以通过 QoS 策略进行控制，每个 vGPU 配置文件都可以具有专用的帧缓冲区。但是，每个卡都共享编码器和解码器。vGPU 配置文件在 GPU 卡上的放置由 vSphere 主机 GPU 分配策略控制，该策略可以强调性能（分布式 VM ）或整合（组 VM ）。</block>
  <block id="9411dea29d318927759a55cff454b3dd" category="inline-link-macro">接下来：面向行业的解决方案。</block>
  <block id="ee3f381f10f3f075a22913a348a89edf" category="paragraph"><block ref="ee3f381f10f3f075a22913a348a89edf" category="inline-link-macro-rx"></block></block>
  <block id="53cf9d36e61cc97b118ae4cc9589bac3" category="summary">通过 NetApp VDS Cloud Workspace Management Suite 门户，可以集中管理各种 VDS 部署，包括为内部部署，管理用户，应用程序目录和脚本化事件定义了站点的 VDS 部署。管理用户还可以使用此门户根据需要手动配置应用程序，并连接到任何计算机进行故障排除。</block>
  <block id="e68a6dedaba6faaba6e7afd9197edc4f" category="doc">管理门户</block>
  <block id="76368893e7696218fc60d77f96235f35" category="paragraph">NetApp VDS Cloud Workspace Management Suite 门户现已推出<block ref="1640f4040bca8395064a2ee51cb5f0ae" category="inline-link-rx"></block> 即将推出的版本<block ref="b6375c31f2253ef964d998b5762ba440" category="inline-link-rx"></block>。</block>
  <block id="02655da204b103696191f5d52c33427f" category="paragraph">通过该门户，可以集中管理各种 VDS 部署，包括为内部部署，管理用户，应用程序目录和脚本化事件定义了站点的 VDS 部署。管理用户还可以使用此门户根据需要手动配置应用程序，并连接到任何计算机进行故障排除。</block>
  <block id="0499b0532cd51452b57a028f3973d9fa" category="paragraph">服务提供商可以使用此门户添加自己的渠道合作伙伴，并允许他们管理自己的客户端。</block>
  <block id="8af19d014b76fa90ffc0c0477bd47be5" category="inline-link-macro">下一步：用户管理</block>
  <block id="631d677d75a0b47f9fe24a201cc8cb85" category="paragraph"><block ref="631d677d75a0b47f9fe24a201cc8cb85" category="inline-link-macro-rx"></block></block>
  <block id="aaca2e6fe88c6861582a8d1a20acfd4f" category="summary">适用于虚拟桌面服务的 ONTAP 功能。</block>
  <block id="bc9c47c8423d4537fdbf118b09a80084" category="doc">适用于虚拟桌面服务的 ONTAP 功能</block>
  <block id="472986236003195075a1428fe6103f4c" category="paragraph">以下 ONTAP 功能使其成为与虚拟桌面服务结合使用的极具吸引力的选择。</block>
  <block id="6128a47ce6baa55dbad9293234f2f65c" category="list-text">* 横向扩展文件系统。 * ONTAP FlexGroup 卷的大小可以增长到 20 PB 以上，并且可以在一个命名空间中包含 4000 亿个以上的文件。此集群最多可包含 24 个存储节点，每个节点都具有一个灵活的网络接口卡数量，具体取决于使用的型号。</block>
  <block id="960f11687b64143d44db7f4ffcb33ef2" category="paragraph">用户的虚拟桌面，主文件夹，用户配置文件容器，共享数据等可以按需增长，而无需考虑文件系统限制。</block>
  <block id="ab7ad572d2251b9b27fa0213fde8531f" category="list-text">* 文件系统分析。 * 您可以使用 XCP 工具深入了解共享数据。借助 ONTAP 9.8+ 和 ActiveIQ Unified Manager ，您可以轻松查询和检索文件元数据信息并识别冷数据。</block>
  <block id="885f3e34ca03dc8ff35c0bac51b384f7" category="list-text">* 云分层。 * 您可以将冷数据迁移到云中的对象存储或数据中心中任何与 S3 兼容的存储。</block>
  <block id="fb38ee94b865e67571a08316a3baac38" category="list-text">* 文件版本。 * 用户可以恢复受 NetApp ONTAP Snapshot 副本保护的文件。ONTAP Snapshot 副本非常节省空间，因为它们仅记录更改的块。</block>
  <block id="9b7db1dd6f422e5f07ded1d3b7b04d90" category="list-text">* 全局命名空间。 * ONTAP FlexCache 技术支持文件存储远程缓存，便于在包含 ONTAP 存储系统的各个位置之间管理共享数据。</block>
  <block id="827aa7cb1ad6ddbf99e040efe34725a8" category="list-text">* 安全多租户支持。 * 一个物理存储集群可以呈现为多个虚拟存储阵列，每个阵列都有自己的卷，存储协议，逻辑网络接口，身份和身份验证域，管理用户等。因此，您可以在多个业务单位或环境之间共享存储阵列，例如测试，开发和生产。</block>
  <block id="6c36afe01468d888b334a4432dcac4b2" category="paragraph">为了保证性能，您可以使用自适应 QoS 根据已用空间或已分配空间设置性能级别，并且可以使用配额控制存储容量。</block>
  <block id="b1a678f5f86de8ff8a5b9b1c4b3772b8" category="list-text">* VMware 集成。 * 适用于 VMware vSphere 的 ONTAP 工具提供了一个 vCenter 插件，用于配置数据存储库，实施 vSphere 主机最佳实践以及监控 ONTAP 资源。</block>
  <block id="9b12997ae1d332c9003c444a6ff8918a" category="paragraph">ONTAP 支持 vStorage APIs for Array Integration （ VAAI ）将 SCSI/ 文件操作卸载到存储阵列。ONTAP 还支持用于存储感知的 vStorage API （ VASA ），并支持对块和文件协议使用虚拟卷。</block>
  <block id="025e05e390f2d7ef7708bb42d81e1eeb" category="paragraph">适用于 VMware vSphere 的 SnapCenter 插件可通过存储阵列上的 Snapshot 功能轻松备份和还原虚拟机。</block>
  <block id="3452f822915108b5d640f3288959e7fd" category="paragraph">ActiveIQ Unified Manager 可在 vSphere 环境中提供端到端存储网络可见性。管理员可以轻松识别 ONTAP 上托管的虚拟桌面环境中可能发生的任何延迟问题。</block>
  <block id="c9559fb9abb51cf76cc973d06c7e730c" category="list-text">* 安全合规性。 * 借助 ActiveIQ Unified Manager ，您可以通过警报监控多个 ONTAP 系统，以发现任何策略违规。</block>
  <block id="875c0a88cb08e888c642bbcc19cb33a2" category="list-text">* 多协议支持。 * ONTAP 支持块（ iSCSI ， FC ， FCoE 和 NVMe/FC ），文件（ NFSv3 ， NFSv4.1 ， SMB2.x 和 SMB3.x ）以及对象（ S3 ）存储协议。</block>
  <block id="4ac79aa8e1431a96a08ba58c1e17a104" category="list-text">* 自动化支持。 * ONTAP 提供 REST API ， Ansible 和 PowerShell 模块，可通过 VDS 管理门户自动执行任务。</block>
  <block id="ba5e495048f0fa35302184aa505386a9" category="inline-link-macro">下一步：数据管理</block>
  <block id="51688bc4609022e20e8c1cb051fb4489" category="paragraph"><block ref="51688bc4609022e20e8c1cb051fb4489" category="inline-link-macro-rx"></block></block>
  <block id="b5ed404fa434aeee227f550cddf89892" category="inline-link">NetApp 云</block>
  <block id="d823edbaf98641c5959f3a596de3df66" category="list-text"><block ref="d823edbaf98641c5959f3a596de3df66" category="inline-link-rx"></block></block>
  <block id="b1eb0510d1bc6ffab71faa53637ecde2" category="inline-link">NetApp VDS 产品文档</block>
  <block id="c5b41ed257411dffc1cc80a4c00cf17c" category="list-text"><block ref="c5b41ed257411dffc1cc80a4c00cf17c" category="inline-link-rx"></block></block>
  <block id="272427e7f4e6650df3749f83086acde6" category="inline-link">使用 VPN 网关将内部网络连接到 Azure</block>
  <block id="c460b4e40e6d4709ed15a2e8dba39833" category="list-text"><block ref="c460b4e40e6d4709ed15a2e8dba39833" category="inline-link-rx"></block></block>
  <block id="440e11297e8634c052b1bfd29a90309c" category="inline-link">Azure 门户</block>
  <block id="8284aff5fcde6ba43a0ca21712739cae" category="list-text"><block ref="8284aff5fcde6ba43a0ca21712739cae" category="inline-link-rx"></block></block>
  <block id="8867b143d669949d3948e3816324ec75" category="inline-link">Microsoft Windows 虚拟桌面</block>
  <block id="0db816b3393ed224b26131285b4e3dff" category="list-text"><block ref="0db816b3393ed224b26131285b4e3dff" category="inline-link-rx"></block></block>
  <block id="7c033f9cfba6e06ff2ee6cb852ce10f4" category="inline-link">Azure NetApp Files 注册</block>
  <block id="aff481c4855a001492901fbefcab7d17" category="list-text"><block ref="aff481c4855a001492901fbefcab7d17" category="inline-link-rx"></block></block>
  <block id="7af7e76313bd052a513526be4bb8c564" category="summary">此解决方案的物理基础架构由 NetApp HCI 存储节点和计算节点，混合云控制， NetApp AFF 和 Mellanox 交换机组成。</block>
  <block id="fdf3a2ad30b4cbada3935221a923e73a" category="doc">物理基础架构</block>
  <block id="716d33d1c54609a786d94fd4fa7efde5" category="paragraph">NetApp HCI 可用作计算节点或存储节点。根据存储节点型号，至少需要两到四个节点才能构成集群。对于计算节点，要提供高可用性，至少需要两个节点。根据需要，可以一次添加一个节点以增加计算或存储容量。</block>
  <block id="170fdd11441a8580f1d7f0e9a0174251" category="paragraph">在计算节点上部署的管理节点（ mNode ）在受支持的虚拟机管理程序上作为虚拟机运行。mNode 用于将数据发送到 ActiveIQ （一个基于 SaaS 的管理门户），托管混合云控制门户，并用作 NetApp HCI 远程支持的反向代理等。</block>
  <block id="3ea4e1897db47b1d4ce5d698c6201ee7" category="paragraph">通过 NetApp HCI ，您可以进行非分配滚动升级。即使一个节点关闭，也会从其他节点提供数据服务。下图展示了 NetApp HCI 存储多租户功能。</block>
  <block id="64ef8548b1d455d6a26320e362c839b9" category="paragraph"><block ref="64ef8548b1d455d6a26320e362c839b9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c1e545723edb853fb4d363f6d1117d67" category="paragraph">NetApp HCI 存储通过与计算节点的 iSCSI 连接提供闪存存储。可以使用 CHAP 凭据或卷访问组保护 iSCSI 连接。卷访问组仅允许授权启动程序访问卷。帐户包含一组卷， CHAP 凭据和卷访问组。要在租户之间提供网络级隔离，可以使用不同的 VLAN ，卷访问组还支持虚拟路由和转发（ VRF ），以确保租户可以具有相同或重叠的 IP 子网。</block>
  <block id="3508f55f8d12eff734d2b55e6c13a128" category="inline-link">netapp.io</block>
  <block id="a49b3abc0d926efe398b668fccc92a6a" category="paragraph">RESTful Web 界面可用于执行自定义自动化任务。NetApp HCI 具有可用于自动化任务的 PowerShell 和 Ansible 模块。有关详细信息，请参见<block ref="55be4a04a370408a319b1f27b54e9293" category="inline-link-rx"></block>。</block>
  <block id="4725a4744390b735ea1bb4e3fc99b686" category="section-title">存储节点</block>
  <block id="c223e09da2dcc952490f6d8a6184e0dd" category="paragraph">NetApp HCI 支持两种存储节点型号： H410S 和 H610S 。H410 系列采用 2U 机箱，其中包含四个半宽节点。每个节点都有六个大小为 480 GB ， 960 GB 或 1.92 TB 的 SSD ，并可选择驱动器加密。H410S 至少可以从两个节点开始。每个节点可提供 50 ， 000 到 100 ， 000 次 IOPS ，块大小为 4 k 。下图显示了 H410S 存储节点的正面和背面视图。</block>
  <block id="71739d1288aed4b1a47a7ad45eead04a" category="paragraph"><block ref="71739d1288aed4b1a47a7ad45eead04a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="739ba8c1ff98d7e29e25b206fa9c26cb" category="paragraph"><block ref="739ba8c1ff98d7e29e25b206fa9c26cb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c9448420b75b2e29b3887b09f504d9e9" category="paragraph">H610S 是一个 1U 存储节点，具有 12 个大小为 960 GB ， 1.92 TB 或 3.84 TB 的 NVMe 驱动器，并可选择驱动器加密。要构成集群，至少需要四个 H610S 节点。它可以为每个节点提供大约 100 ， 000 次 IOPS ，块大小为 4 k 。下图显示了 H610S 存储节点的正面视图和背面视图。</block>
  <block id="4333baf18e36bd569aa6f3918d74dd63" category="paragraph"><block ref="4333baf18e36bd569aa6f3918d74dd63" category="inline-image-macro-rx" type="image"></block></block>
  <block id="742fe6f71eea5fc643fd5764c15763e1" category="paragraph"><block ref="742fe6f71eea5fc643fd5764c15763e1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="501d42a2b817012b23568867f02cafb7" category="paragraph">在单个集群中，可以混合使用多种存储节点型号。单个节点的容量不能超过集群总大小的 1/3 。存储节点附带两个用于 iSCSI 的网络端口（ 10/25GbE – SFP28 ）和两个用于管理的端口（ 1/10GbE – RJ45 ）。此外，还提供一个带外 1GbE RJ45 管理端口。</block>
  <block id="0f66538edca95cf4d42667cfa5d6a362" category="section-title">计算节点</block>
  <block id="0f361c5dc2aea083e95a98e3348d80d8" category="paragraph">NetApp HCI 计算节点有三种型号： H410C ， H610C 和 H615C 。计算节点均与 Redfish API 兼容，并提供了一个 BIOS 选项来启用可信平台模块（ TPM ）和 Intel 可信执行技术（ TXT ）。</block>
  <block id="2a765389bea8a58c6f0b976689ea5d63" category="paragraph">H410C 是一个半宽节点，可以放置在 2U 机箱中。机箱可以混合使用计算节点和存储节点。H410C 随附第一代 Intel Xeon 银牌 / 金牌可扩展处理器，在双插槽配置中具有 4 到 20 个核心。内存大小介于 384 GB 到 1 TB 之间。有四个 10/25GbE （ SFP28 ）端口和两个 1GbE RJ45 端口，其中一个 1GbE RJ45 端口可用于带外管理。下图显示了 H410C 计算节点的正面视图和背面视图。</block>
  <block id="a6699ef6746f9b71d6e9853ff3a067ff" category="paragraph"><block ref="a6699ef6746f9b71d6e9853ff3a067ff" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8770c77a988c13d208d73498243530f3" category="paragraph"><block ref="8770c77a988c13d208d73498243530f3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9660436f0ba8a7475aa77a0687b4e9ba" category="paragraph">H610C 为 2RU ，具有一个双插槽第一代 Intel Xeon Gold 6130 可扩展处理器，具有 16 个 2.1 GHz 核心， 512 GB RAM 和两个 NVIDIA Tesla M10 GPU 卡。此服务器附带两个 10/25GbE SFP28 端口和两个 1GbE RJ45 端口，其中一个 1GbE RJ45 端口可用于带外管理。下图显示了 H610C 计算节点的正面视图和背面视图。</block>
  <block id="6d8fe48d15476ed9bcba07996d0432d6" category="paragraph"><block ref="6d8fe48d15476ed9bcba07996d0432d6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8c8087b4701723b556045b132e16971f" category="paragraph"><block ref="8c8087b4701723b556045b132e16971f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="336f32cd2241494758289204ff03206f" category="paragraph">H610C 具有两个 Tesla M10 卡，可提供总共 64 GB 的帧缓冲区内存和总共 8 个 GPU 。它最多可支持 64 个启用了 GPU 的个人虚拟桌面。要为每台服务器托管更多会话，可以使用共享桌面交付模式。</block>
  <block id="7e6b8697409eeef93e5aa9d66cccef3f" category="paragraph">H615C 是一款具有双插槽的 1RU 服务器，适用于第二代 Intel Xeon 银牌 / 金牌可扩展处理器，每个插槽具有 4 到 24 个核心。RAM 范围为 384 GB 到 1.5 TB 。一个型号包含三个 NVIDIA Tesla T4 卡。该服务器包括两个 10/25GbE （ SFP28 ）和一个 1GbE （ RJ45 ），用于带外管理。下图显示了 H615C 计算节点的正面和背面视图。</block>
  <block id="fd8211fef57333e8f287659ad310a599" category="paragraph"><block ref="fd8211fef57333e8f287659ad310a599" category="inline-image-macro-rx" type="image"></block></block>
  <block id="32fb97d1123cc0da61cff6b01f4a2d6a" category="paragraph"><block ref="32fb97d1123cc0da61cff6b01f4a2d6a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d88c8fcd19cf6a3ad0ae7557460b71f3" category="paragraph">H615C 包括三个 Tesla T4 卡，可提供总共 48 GB 的帧缓冲区和三个 GPU 。T4 卡是一种通用 GPU 卡，可用于 AI 推理工作负载以及专业图形。它包括可帮助模拟光回映的光线跟踪核心。</block>
  <block id="e22b40aed3ee4d25a875384af345a4b4" category="section-title">混合云控制</block>
  <block id="e61610282756eedd23b1948585ddb728" category="paragraph">混合云控制门户通常用于通过添加存储或 / 和计算节点横向扩展 NetApp HCI 。此门户提供 NetApp HCI 计算和存储节点清单以及指向 ActiveIQ 管理门户的链接。请参见以下 Hybrid Cloud Control 屏幕截图。</block>
  <block id="4ef5621a0a8376e98c843128d8239a7a" category="paragraph"><block ref="4ef5621a0a8376e98c843128d8239a7a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fcb4e493e93ab61c0ad8d4a5d2c20759" category="paragraph">NetApp AFF 提供了一个全闪存横向扩展文件存储系统，作为此解决方案的一部分使用。ONTAP 是在 NetApp AFF 上运行的存储软件。将 ONTAP 用于 SMB 文件存储的一些主要优势如下：</block>
  <block id="f9284b120f9b10768e6e8d6ca950f32b" category="list-text">Storage Virtual Machine （ SVM ）以实现安全多租户</block>
  <block id="c506b3a188fef47e6a7b10fdc924d1f8" category="list-text">NetApp FlexGroup 技术，用于可扩展的高性能文件系统</block>
  <block id="72777a0a66bb2c9717a6865b87da4d5e" category="list-text">用于容量分层的 NetApp FabricPool 技术。借助 FabricPool ，您可以将热数据保留在本地，并将冷数据传输到云存储。</block>
  <block id="a14187982892dddde552d5bbed0a3a8b" category="list-text">通过自适应 QoS 提供有保障的 SLA 。您可以根据已分配或已用空间调整 QoS 设置。</block>
  <block id="40494fc81e22cf04307a05504dd160ee" category="list-text">自动化功能（ RESTful API ， PowerShell 和 Ansible 模块）</block>
  <block id="2b9b6a0bfa45dde7f0e42eee7c296515" category="list-text">数据保护和业务连续性功能，包括 NetApp Snapshot ， NetApp SnapMirror 和 NetApp MetroCluster 技术</block>
  <block id="3875125e3eca16dedfcd455eac5d4eca" category="section-title">Mellanox 交换机</block>
  <block id="7401312cea1f99cf7d124949bccf992c" category="paragraph">此解决方案中使用了 Mellanox SN2010 交换机。但是，您也可以使用其他兼容交换机。NetApp HCI 经常使用以下 Mellanox 交换机。</block>
  <block id="1a06d660917ccdb279268ab53c0c9d77" category="cell">机架单元</block>
  <block id="e308b78e4d1e03b551d06c75e4ec2309" category="cell">SFP28 （ 10/25GbE ）端口</block>
  <block id="7f5ecf1cad2ca99f0bfd0e6140faf2e7" category="cell">QSFP （ 40/100GbE ）端口</block>
  <block id="7bd939f48f8d930239aa1b9a9dedd3d0" category="cell">聚合吞吐量（ Tbps ）</block>
  <block id="6820019dc48f032f71a0f3c7e73dcd25" category="cell">SN2010</block>
  <block id="b7d3c5f0c066e87f2affe852ba2477d4" category="cell">半宽</block>
  <block id="6f4922f45568161a8cdf4ad2299f6d23" category="cell">18</block>
  <block id="7fd3cdaaba74a0b0ef3d707a8545df7c" category="cell">1.7</block>
  <block id="155bba03249764c61fd72335fd0c56c8" category="cell">SN2100</block>
  <block id="acff46b161a3b7d6ed01ba79a032acc9" category="cell">3.2</block>
  <block id="97d52d0612127d7acb3f8c7be40b3dab" category="cell">SN2700</block>
  <block id="aed9056e36148d533f98078d4a1f6e7d" category="cell">全宽</block>
  <block id="6364d3f0f495b6ab9dcf8d3b5c6e0b01" category="cell">32</block>
  <block id="ded681fc154529ebbc7562fb0c73ba47" category="cell">6.4</block>
  <block id="0133f27416e1fe871d2cbc8075017539" category="admonition">QSFP 端口支持 4 根 25GbE 分支缆线。</block>
  <block id="f9644f693d775c7ab6b076517ac3e823" category="paragraph">Mellanox 交换机是开放式以太网交换机，可用于选择网络操作系统。选项包括 Mellanox Onyx 操作系统或各种 Linux 操作系统，例如 Cumulus-Linux ， Linux 交换机等。Mellanox 交换机还支持交换机软件开发套件，交换机抽象接口（ Sai ；开放式计算项目的一部分）和云中开放式网络软件（ Software for Open Networking in the Cloud ，声波）。</block>
  <block id="cbb4496379858ad3d0c7de349b2d2395" category="paragraph">Mellanox 交换机提供低延迟，并支持传统数据中心协议和 VXLAN 等通道协议。VXLAN 硬件 VTEP 可用作 L2 网关。这些交换机支持各种认证的安全标准，例如 UC API ， FIPS 140-2 （系统安全模式）， NIST 800-181A （ SSH 服务器严格模式）和 CoPP （ IP 筛选器）。</block>
  <block id="4822d73efc192dd2d4eb627ccc3c1066" category="paragraph">Mellanox 交换机支持 Ansible ，盐堆栈， Puppet 等自动化工具。Web 管理界面提供了执行多行命令行界面命令的选项。</block>
  <block id="60ece3fee8421729100872ec44f1cda9" category="summary">在部署过程中，您可以选择文件服务方法来托管用户配置文件，共享数据和主驱动器文件夹。可用选项包括文件服务器， Azure 文件或 Azure NetApp Files 。但是，在部署后，您可以使用命令中心工具修改此选项，使其指向任何 SMB 共享。使用 NetApp ONTAP 托管具有多种优势。</block>
  <block id="568483e9bd85504f3c9dcef24ecd3235" category="doc">数据管理</block>
  <block id="1b8c33cc721641b8b0555f2d7b5c2773" category="inline-link-macro">使用 NetApp ONTAP 托管具有多种优势</block>
  <block id="ef9fd867f3eaed93e0806bd027825218" category="inline-link">更改数据层</block>
  <block id="698e77d7e678617a2ae27ca2525bfbf7" category="paragraph">在部署过程中，您可以选择文件服务方法来托管用户配置文件，共享数据和主驱动器文件夹。可用选项包括文件服务器， Azure 文件或 Azure NetApp Files 。但是，在部署后，您可以使用命令中心工具修改此选项，使其指向任何 SMB 共享。 <block ref="50056d02f0a90e2e837160c093f1b22b" category="inline-link-macro-rx"></block>。要了解如何更改 SMB 共享，请参见<block ref="336429df384a16f14c12cbc8dba62525" category="inline-link-rx"></block>。</block>
  <block id="24e6e2f6171b43a847fe194a9a9b5cd0" category="section-title">全局文件缓存</block>
  <block id="ce29b83c61cdf6a56b49dbde9a4d57e0" category="paragraph">如果用户分布在全局命名空间的多个站点上，则全局文件缓存有助于减少频繁访问的数据的延迟。可以使用配置收集和脚本化事件自动部署全局文件缓存。全局文件缓存可在本地处理读写缓存，并在不同位置保持文件锁定。全局文件缓存可用于任何 SMB 文件服务器，包括 Azure NetApp Files 。</block>
  <block id="87db7a122a37ab4a28f2223fa123a5be" category="paragraph"><block ref="87db7a122a37ab4a28f2223fa123a5be" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d726de6a27bb533c6c8c44ea508dffa8" category="paragraph">全局文件缓存需要满足以下要求：</block>
  <block id="2f28046ff208122796d51bafd8d4bc9c" category="list-text">管理服务器（许可证管理服务器）</block>
  <block id="83168e6cb289d732cc78427b51f93153" category="list-text">核心</block>
  <block id="e7704357fe6a312ecafae725be93b8c2" category="list-text">具有足够磁盘容量以缓存数据的边缘</block>
  <block id="d70c88e6a13ca1af40b966d8d7d831c4" category="inline-link">GFC 文档</block>
  <block id="154c48fd725e7207d36baa74bba5fd7a" category="paragraph">要下载软件并计算 Edge 的磁盘缓存容量，请参见<block ref="83d5530c5afeb5a227ac8c2985566e4d" category="inline-link-rx"></block>。</block>
  <block id="1afc494dd7d35016d9524e06b68dbf2a" category="paragraph">为了进行验证，我们在 Azure 的同一个虚拟机上部署了核心资源和管理资源，并在 NetApp HCI 上部署了边缘资源。请注意，核心是需要进行大量数据访问的位置，边缘是核心的一部分。安装软件后，您必须激活已激活的许可证，然后才能使用。为此，请完成以下步骤：</block>
  <block id="70366038f1d44fef6c71f615b677b9cf" category="list-text">在 License Configuration 部分下，使用链接 Click here 完成许可证激活。然后注册核心。</block>
  <block id="a51a182b58a11b12770fbd2bd9643852" category="paragraph"><block ref="a51a182b58a11b12770fbd2bd9643852" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d666527802938c89b9f895300aea220b" category="list-text">提供用于全局文件缓存的服务帐户。有关此帐户所需的权限，请参见<block ref="83d5530c5afeb5a227ac8c2985566e4d" category="inline-link-rx"></block>。</block>
  <block id="ab698dd081619e8f6dc264df6c99b73e" category="paragraph"><block ref="ab698dd081619e8f6dc264df6c99b73e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="12b1486d5cfb9e0c5394a50e2515b53c" category="list-text">添加新的后端文件服务器并提供文件服务器名称或 IP 。</block>
  <block id="ffeac1f6b14ca75f608539cb6c673f37" category="paragraph"><block ref="ffeac1f6b14ca75f608539cb6c673f37" category="inline-image-macro-rx" type="image"></block></block>
  <block id="643c94b6eb5664ed3cca98d31d7dbd39" category="list-text">在边缘上，缓存驱动器必须具有驱动器盘符 D如果不是，请使用 diskpart.exe 选择卷并更改驱动器号。以边缘身份向许可证服务器注册。</block>
  <block id="e9b41aa1ac49113064748a9c6e0f48a9" category="paragraph"><block ref="e9b41aa1ac49113064748a9c6e0f48a9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="156666d997fd17a94bed67fe95334273" category="paragraph">如果启用了核心自动配置，则会自动从许可证管理服务器检索核心信息。</block>
  <block id="891d862f33aaeafcd8ecc43e102febd3" category="paragraph"><block ref="891d862f33aaeafcd8ecc43e102febd3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a2184b1f206fd35eeb448e9937bdabe7" category="paragraph">在任何客户端计算机上，用于访问文件服务器上共享的管理员都可以使用 UNC 路径 ` \\&lt; 边缘服务器名称 &gt;\FASTDATA\&lt; 核心服务器名称 &gt;\&lt; 后端文件服务器名称 &gt;\&lt; 共享名称 &gt;` 使用 GFC 边缘访问该共享。管理员可以将此路径包含在用户登录脚本或 GPO 中，以便在边缘位置映射用户驱动器。</block>
  <block id="a08e5ca253097ac5ad7741e20d9dd090" category="paragraph">为了为全球用户提供透明的访问权限，管理员可以设置 Microsoft 分布式文件系统（ DFS ），使其链接指向文件服务器共享和边缘位置。</block>
  <block id="0c9f570b7b5b34f0fbdab873e122d432" category="paragraph"><block ref="0c9f570b7b5b34f0fbdab873e122d432" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b9e8ad2bf50c8da3a637a8858d3a1391" category="paragraph">当用户根据与站点关联的子网使用 Active Directory 凭据登录时， DFS 客户端将使用相应的链接来访问数据。</block>
  <block id="6a6b2107f2b5daadfd13df04f769a587" category="paragraph"><block ref="6a6b2107f2b5daadfd13df04f769a587" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8aabec6a7d3f54b83478824808357c91" category="paragraph">文件图标会根据文件是否已缓存而变化；未缓存的文件在图标的左下角显示灰色 X 。边缘位置的用户访问某个文件后，该文件将被缓存，并且图标将发生变化。</block>
  <block id="1014b6d5d432758e9041c845e4da7830" category="paragraph"><block ref="1014b6d5d432758e9041c845e4da7830" category="inline-image-macro-rx" type="image"></block></block>
  <block id="610eee89db61eda57b4b6da39d799845" category="paragraph">如果某个文件已打开，而另一个用户正在尝试从边缘位置打开同一文件，则系统会提示用户选择以下内容：</block>
  <block id="5a31b6c180e91d3c3d3c1053bbab642c" category="paragraph"><block ref="5a31b6c180e91d3c3d3c1053bbab642c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1c6f3b21447f91b42ceee404afc53720" category="paragraph">如果用户选择在原始副本可用时接收通知的选项，则系统会按如下所示通知用户：</block>
  <block id="922c6f30fa0f74f32df2fac11a3bf378" category="paragraph"><block ref="922c6f30fa0f74f32df2fac11a3bf378" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4b9bc3a03a8ae9cef2c5a66238e5ab25" category="inline-link">有关 Talon 和 Azure NetApp Files 部署的视频</block>
  <block id="e725329a19c23f541a0bdbead9c9b1e7" category="paragraph">有关详细信息，请参见此<block ref="92818ea025c5b78ace999366164c2c46" category="inline-link-rx"></block>。</block>
  <block id="fc95bd8bc19564339fe05c7bad1b7662" category="section-title">SaaS 备份</block>
  <block id="482cadbeebfa6f9c4f062c1f2724d546" category="paragraph">NetApp VDS 可为 Salesforce 和 Microsoft Office 365 （包括 Exchange ， SharePoint 和 Microsoft OneDrive ）提供数据保护。下图显示了 NetApp VDS 如何为这些数据服务提供 SaaS Backup 。</block>
  <block id="0e3aff181138166393e5e5e698c994d2" category="paragraph"><block ref="0e3aff181138166393e5e5e698c994d2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="201e09e85ad81db8a19ef9f20c05d1a5" category="inline-link">此视频</block>
  <block id="4cde65566156674196c087d89ded5c3b" category="paragraph">有关 Microsoft Office 365 数据保护的演示，请参见<block ref="158107d7e819a2ef8c2e8f24519fc9a9" category="inline-link-rx"></block>。</block>
  <block id="a067b7082c28e7dbf856ab55b29d1acb" category="paragraph">有关 Salesforce 数据保护的演示，请参见<block ref="dd6e5767407887626a36af7b68defda9" category="inline-link-rx"></block>。</block>
  <block id="2cb2b89213bccd89f81cfbb17b2e070b" category="inline-link-macro">下一步：操作管理</block>
  <block id="1f3d3eae36241941c6f7a1eaf3615eac" category="paragraph"><block ref="1f3d3eae36241941c6f7a1eaf3615eac" category="inline-link-macro-rx"></block></block>
  <block id="1d0a3bc5138799a21269d2e718800d6f" category="summary">TR-4852 摘要</block>
  <block id="153e1e0ea197d62b488392445f0214f2" category="paragraph">本文档介绍了采用 Citrix 虚拟机管理程序的 Citrix 虚拟应用程序和桌面的解决方案架构。它为在 NetApp HCI 上实施 Citrix 提供了最佳实践和设计准则。同时，还重点介绍了多租户功能，用户配置文件和映像管理。</block>
  <block id="7b0f97bc4856c6b0645650d13b53acb5" category="summary">如果内部资源与云资源之间存在连接，则可以将 NetApp 虚拟桌面服务扩展到内部环境。企业可以使用 Express Route 或站点间 IPsec VPN 连接建立与 Microsoft Azure 的链接。您也可以使用专用链路或使用 IPsec VPN 通道以类似方式创建指向其他云的链接。</block>
  <block id="995d0ae58fc48c0007c3a45046221736" category="doc">混合云环境</block>
  <block id="610e3513c7222cae8d2a7c450741211a" category="paragraph">在解决方案验证中，我们使用了下图所示的环境。</block>
  <block id="0d9e9a129d4eb3389af12248eb017ef1" category="paragraph"><block ref="0d9e9a129d4eb3389af12248eb017ef1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="60ca94382604fd3deb8a198feed31f1b" category="paragraph">在内部环境中，我们有多个 VLAN 用于管理，远程桌面会话主机等。它们位于 172.21.146-150.0/24 子网中，并使用 Microsoft 远程路由访问服务路由到公司网络。我们还执行了以下任务：</block>
  <block id="b613a58cb27d96b09550b74a616e43d8" category="list-text">我们注意到了 Microsoft 路由和远程访问服务器（ RRAS ；标识为 IPchicken.com ）的公有 IP 。</block>
  <block id="b0aa9d967a62cfeb9427c31c3968fb31" category="list-text">我们在 Azure 订阅上创建了虚拟网络网关资源（基于路由的 VPN ）。</block>
  <block id="2db3e884a3b1d82162c06df081b8e8f0" category="list-text">我们创建了一个连接，用于为 Microsoft RRAS 服务器的公有 IP 提供本地网络网关地址。</block>
  <block id="ac7b5e31749488bdca809cc69e83bcec" category="list-text">我们在 RRAS 上完成了 VPN 配置，以便使用创建 VPN 网关时提供的预共享身份验证创建虚拟接口。如果配置正确，则 VPN 应处于已连接状态。您还可以使用 pfsense 或其他相关工具创建站点到站点的 IPsec VPN 通道，而不是 Microsoft RRAS 。由于此通道基于路由，因此会根据配置的特定子网重定向流量。</block>
  <block id="064b2713bd54ad7c04715d629ea8d77e" category="paragraph">Microsoft Azure Active Directory 基于 OAuth 提供身份身份验证。企业客户端身份验证通常需要 NTLM 或基于 Kerberos 的身份验证。Microsoft Azure Active Directory 域服务使用 ADConnect 在 Azure Active Directory 和内部域控制器之间执行密码哈希同步。</block>
  <block id="c9ced395d02e614104c13dc687b8d960" category="paragraph">对于此混合 VDS 解决方案验证，我们最初会部署到 Microsoft Azure ，并使用 vSphere 添加了一个额外的站点。此方法的优势在于，平台服务已部署到 Microsoft Azure ，然后可以使用该门户随时进行备份。这样，即使站点 - 站点 VPN 链路已关闭，也可以从任意位置轻松访问服务。</block>
  <block id="759e5787427ba679d146727a04400c46" category="paragraph">要添加其他站点，我们使用了一个名为 DCConfig 的工具。该应用程序的快捷方式可在 Cloud Workspace Manager （ CWMgr ） VM 的桌面上找到。启动此应用程序后，导航到 "DataCenter 站点 " 选项卡，添加新的数据中心站点并填写所需信息，如下所示。此 URL 指向 vCenter IP 。在添加配置之前，请确保 CWMgr 虚拟机可以与 vCenter 进行通信。</block>
  <block id="ae5bd963078c278284e2aabaefb99232" category="admonition">确保在 CloudWorkspace Manager 上安装 vSphere PowerCLI 5.1 ，以便能够与 VMware vSphere 环境进行通信。</block>
  <block id="e0072a2f037098ba3ee9ec9e1113f1ee" category="paragraph">下图显示了内部数据中心站点配置。</block>
  <block id="30efb5f8dd999c0f737bf30327346d6f" category="paragraph"><block ref="30efb5f8dd999c0f737bf30327346d6f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f823fddfaa31c0b2b910c651849fe1e0" category="paragraph">请注意，可以根据特定集群，主机名或可用 RAM 空间为计算资源提供筛选选项。存储资源的筛选选项包括数据存储库上的最小可用空间或每个数据存储库的最大 VM 数。可以使用正则表达式排除数据存储库。单击保存按钮以保存配置。</block>
  <block id="40cf95c01dfbdb8adc110507697330bf" category="paragraph">要验证配置，请单击测试按钮或单击加载虚拟机管理程序，然后选中 vSphere 部分下的任何下拉列表。应使用适当的值填充它。对于默认配置站点，最好将主虚拟机管理程序设置为 yes 。</block>
  <block id="b081b97ab471a870119bb85e196c0d63" category="paragraph">在 VMware vSphere 上创建的 VM 模板将用作 VDS 上的配置集合。配置集合有两种形式：共享和 VDI 。共享配置收集类型用于远程桌面服务，对于这些服务，所有服务器都应用一个资源策略。VDI 类型用于单独分配资源策略的 WVD 实例。可以为配置集合中的服务器分配以下三个角色之一：</block>
  <block id="9a0b479d2d7eaed435c14e20818841d9" category="list-text">终端服务和数据服务器角色的 * TSDATA.* 组合。</block>
  <block id="286b69ba39f77189135fbf4c39786e12" category="list-text">* 终端服务 * （会话主机）。</block>
  <block id="0b39ab3df8d28606b4bb8f5891022692" category="list-text">* 数据。 * 文件服务器或数据库服务器。定义服务器角色时，必须选择 VM 模板和存储（数据存储库）。选择的数据存储库可以限制为特定的数据存储库，也可以使用 " 使用最少 " 选项，在该选项中，系统会根据数据使用情况选择数据存储库。</block>
  <block id="fb89cc64fafb0e1626269bc00c07ae73" category="paragraph">每个部署都根据 Active Users ， Fixed ， Server Load 或 User Count 为云资源分配设置了 VM 资源默认值。</block>
  <block id="d00f03f39f8119980cb5240353d345b1" category="inline-link-macro">接下来：使用 Login VSI 进行单服务器负载测试</block>
  <block id="af5c949297d5415f4710bd1af3f1e7a7" category="paragraph"><block ref="af5c949297d5415f4710bd1af3f1e7a7" category="inline-link-macro-rx"></block></block>
  <block id="eff15e9bfb7d9e715639a9d221a97be9" category="summary">StoreFront 整合了从多个交付控制器发布的资源，并为用户提供了独特的项目。用户连接到 StoreFront 并在后端隐藏基础架构更改。</block>
  <block id="c2e91cf071ae4bf7d68721a5241a3848" category="doc">访问层</block>
  <block id="52bbad71a92829d7846aa00411633c21" category="section-title">店面</block>
  <block id="9a8b148c7193a72c3604e221348b2deb" category="paragraph"><block ref="9a8b148c7193a72c3604e221348b2deb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="66f9efa04482bc557de8da10969102c7" category="paragraph">用户可以使用 Citrix Workspace 应用程序或 Web 浏览器连接到 StoreFront 。用户体验保持不变。管理员可以使用 Microsoft 管理控制台管理 StoreFront 。可以自定义 StoreFront 门户以满足客户品牌需求。可以将应用程序分为多个类别来提升新应用程序。桌面和应用程序可以标记为收藏夹，以便于访问。管理员还可以使用标记来简化故障排除，并跟踪多租户环境中的资源。以下屏幕截图显示了特色应用程序组。</block>
  <block id="f0ca49e0593e4030612b127127ab96d3" category="paragraph"><block ref="f0ca49e0593e4030612b127127ab96d3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4464ce3f906e3139f1acbbf2a71f7a2d" category="section-title">统一网关</block>
  <block id="d64ce9b981639378d09fe7dce593836a" category="paragraph">为了能够从公有 Internet 安全地访问 Citrix 虚拟应用程序和桌面以及在企业防火墙后托管的资源，统一网关部署在 DMZ 网络中。通过统一网关，可以使用一个 IP 地址或 URL 访问 SSL VPN 等多种服务，并使用反向代理访问内部网资源，负载平衡器等。</block>
  <block id="1d0b129d3ad37b4e778a6aca7b94e29c" category="paragraph">无论用户是从内部还是从外部访问组织资源，用户都有相同的体验。应用程序交付控制器（ Application Delivery Controller ， ADC ）为虚拟应用程序和桌面提供了增强的网络连接功能， HDX Network Insights 通过 Citrix Director 增强了 HDX 监控信息。</block>
  <block id="18dbdef148da0fb68861cf1b6aeeeb40" category="summary">通过采用 NetApp VDS 的混合 VDI ，服务提供商和企业虚拟桌面管理员可以轻松地将资源扩展到其他云环境，而不会影响其用户。在 NetApp HCI 上部署内部资源可以更好地控制 GPU 资源，并允许您根据需要扩展计算或存储节点。</block>
  <block id="0fe8a299bf61a0d1bbca5d975dc94fcc" category="paragraph">通过采用 NetApp VDS 的混合 VDI ，服务提供商和企业虚拟桌面管理员可以轻松地将资源扩展到其他云环境，而不会影响其用户。拥有内部资源可以更好地控制资源，并提供多种选择（计算， GPU ，存储和网络）来满足需求。</block>
  <block id="976894dcc596e37094668684315ccac4" category="paragraph">此解决方案适用场景的使用情形如下：</block>
  <block id="f9bfa55b1c8ab8884a1452fa3c9cb975" category="list-text">突发到云中，以应对对远程桌面和应用程序的需求激增</block>
  <block id="6b53dc409ecc50a533e93345ddf1f2ee" category="list-text">通过在内部使用闪存存储和 GPU 资源托管远程桌面和应用程序，降低长期运行的 TCO</block>
  <block id="f1de7e15d0b0c3caaafa1a47204338c7" category="list-text">跨云环境轻松管理远程桌面和应用程序</block>
  <block id="f9ce5b54f5428c82364a39f17156cc4f" category="list-text">使用软件即服务模式和内部资源体验远程桌面和应用程序</block>
  <block id="675ee473db5bbe3911c19a4e43f8ec3f" category="list-text">希望了解混合 VDS 要求的 EUC /VDI 架构师</block>
  <block id="a7f381741a2ff77b61bc4b7bc2e3d04f" category="list-text">希望帮助客户满足远程桌面和应用程序需求的 NetApp 合作伙伴</block>
  <block id="efa648658230830c2b9ac1a0647002d7" category="list-text">希望满足远程桌面和应用程序需求的现有 NetApp HCI 客户</block>
  <block id="2fa4089eb34d18d2b64eaab8eed9692d" category="inline-link-macro">接下来： NetApp 虚拟桌面服务概述</block>
  <block id="bf817f81e35d1d9f2620def86f22dcc3" category="paragraph"><block ref="bf817f81e35d1d9f2620def86f22dcc3" category="inline-link-macro-rx"></block></block>
  <block id="1cf91ddff92564d8f7f62e4cf010158b" category="doc">附录 iSCSI 设备配置</block>
  <block id="32d538900999329c745cd4c86c9ac125" category="paragraph">按如下所示编辑 ` /etc/multipath.conf` 处的多路径配置文件：</block>
  <block id="19a4d9db29eb061e04b4b7d509a3c500" category="summary">利用 NetApp 提供支持的 Data Fabric 构建的基础架构，您可以将数据迁移或执行从一个站点到另一个站点（包括云）的灾难恢复。通过 Cloud Insights ，您可以监控，优化公有云以及私有数据中心中部署的资源并对其进行故障排除。</block>
  <block id="2bbcddeeac4b47da5bb3280345202a19" category="doc">NetApp 价值</block>
  <block id="de1f9e03b077abb727e26b9ffb9d2ae2" category="section-title">Data Fabric</block>
  <block id="3a509496a4d387459de6bca941389d61" category="paragraph">利用 NetApp 提供支持的 Data Fabric 构建的基础架构，您可以将数据迁移或执行从一个站点到另一个站点（包括云）的灾难恢复。Citrix 虚拟应用程序和桌面中的数据可分为以下几类：</block>
  <block id="5c578a7cd5fdea7f09cabf897bbb389d" category="list-text">基础架构组件</block>
  <block id="59d6338e389f9622b3432a7df39e68c8" category="list-text">计算机映像</block>
  <block id="52475ede28343065721cb123eb55f44c" category="list-text">用户配置文件</block>
  <block id="39fc05c8a94897615c8524f5efc48361" category="list-text">用户数据</block>
  <block id="771ed02067a49bedc628c2f3cb253486" category="paragraph">根据您的需求，可以将站点配置为主动 / 主动或主动 / 被动。基础架构组件可以在内部或云中使用，并可作为服务进行访问。要配置桌面和应用程序池，必须将 VM 模板分发到每个站点。应用程序层，用户配置文件和数据存储在 SMB 文件共享中，这些文件共享必须在每个站点上可用。</block>
  <block id="a233a806e94b299af12ebaeaec4a4d02" category="paragraph">您可以在大多数用户所在位置使用 Azure NetApp Files ， NetApp Cloud Volumes ONTAP 和 FlexGroup 卷创建全局命名空间。其他位置可以使用全局文件缓存在文件服务器上本地缓存内容。如果首选 Citrix ShareFile ，则 NetApp StorageGRID 可提供与 S3 兼容的高性能存储，以便通过 NAS 网关访问在内部托管数据。</block>
  <block id="b4f83b03956523a39e8bbbd0895f0f29" category="section-title">Cloud Insights</block>
  <block id="a2ba7860c664411a802f86bfc2f6b2cb" category="paragraph">通过 Cloud Insights ，您可以监控，优化公有云以及私有数据中心中部署的资源并对其进行故障排除。</block>
  <block id="c243863354ce1e4b6433d1d0cb0c2dbf" category="paragraph">Cloud Insights 可通过以下方式为您提供帮助：</block>
  <block id="9460617f66526f5893e7e8703ddcfd7f" category="list-text">* 将平均解决时间缩短多达 90% 。 * 停止长时间的日志查找并无法手动关联基础架构；使用我们的动态拓扑和关联分析立即确定问题区域。</block>
  <block id="66954794a478e285a985b28c66f6aa6e" category="list-text">* 将云基础架构成本平均降低 33% 。 * 通过确定已废弃和未使用的资源以及适当规模的工作负载以优化性能和成本层，消除低效问题。</block>
  <block id="53442112e672e636be2dce448528eb69" category="list-text">* 防止多达 80% 的云问题影响最终用户。 * 通过使用高级分析和机器学习功能在问题发生严重中断之前识别问题，停止搜索大量数据以查找相关项目。</block>
  <block id="57dcd4c5cc10d352584ff0b1e8855382" category="summary">此解决方案的资源层包含计算资源，存储资源， FSLogix ，网络和 GPU 资源。</block>
  <block id="07217946c0ec1ec491b3df0182f62e0d" category="doc">资源层</block>
  <block id="4fdcef8f1370c1bf350675fb1389940d" category="paragraph">要托管虚拟应用程序和桌面资源，应在 Citrix Studio 或 PowerShell 中配置与虚拟机管理程序和资源详细信息的连接。对于 Citrix 虚拟机管理程序，需要提供资源池主节点 DNS 或 IP 地址。要实现安全连接，请使用 HTTPS 并在服务器上安装 SSL 证书。通过选择存储资源和网络来定义资源。</block>
  <block id="0c6eb3af7cb52f0de05e62250cfa1741" category="paragraph"><block ref="0c6eb3af7cb52f0de05e62250cfa1741" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3049ecf57c5a5fa2b5e960ce76001ffb" category="paragraph">如果需要额外的计算容量，可以将虚拟机管理程序服务器添加到现有资源池中。每当添加新资源池时，如果需要使其可用于托管虚拟应用程序和桌面，则必须定义新连接。</block>
  <block id="3d18313f8b73478b41486b61ebff70a3" category="paragraph">站点是 SQL 数据库所在的站点，称为主区域。此外，还添加了其他分区来满足不同地理位置的用户的需求，以便通过托管本地资源来缩短响应时间。卫星区域是一个远程区域，它只包含用于托管虚拟应用程序或具有可选交付控制器的桌面的虚拟机管理程序组件。</block>
  <block id="5311a47dc5b23f67b77f8ef78d9313ca" category="paragraph">使用 Citrix 虚拟桌面设置向导时， Citrix 配置还会使用连接和资源信息。</block>
  <block id="0b6cefc2d5301744e7aa13563a6dd953" category="paragraph"><block ref="0b6cefc2d5301744e7aa13563a6dd953" category="inline-image-macro-rx" type="image"></block></block>
  <block id="75a20ed41d9e9c88a63d8e684c74f9c3" category="paragraph">虚拟应用程序和桌面的存储库可使用一节中所述的连接和资源进行控制 <block ref="a0f1d4436505fda1e5e3be3d7d2ee19d" category="inline-link-macro-rx"></block>。定义资源时，您可以选择共享存储并为 Citrix 虚拟机管理程序启用 Intellicache 。</block>
  <block id="3927f619a90309bc9e64fcbb9886f9a3" category="paragraph"><block ref="3927f619a90309bc9e64fcbb9886f9a3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="87ae5ede536f70cc1bc0840667d5fcb2" category="paragraph">此外，还可以选择操作系统，个人 vDisk 和临时数据的资源。选择多个资源后， Citrix 虚拟应用程序和桌面会自动分摊负载。在多租户环境中，可以为每个租户资源选择专用资源。</block>
  <block id="c2200fa495be9a60db49369716a5ba0b" category="paragraph"><block ref="c2200fa495be9a60db49369716a5ba0b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="428d6264ce557677e66a52018caa0ab3" category="paragraph">Citrix 配置需要 SMB 文件共享来托管设备的 vDisk 。我们建议将此 SMB 共享托管在 FlexGroup 卷上，以提高可用性，性能和容量扩展。</block>
  <block id="5854f61f2ee06ca17b6c4e887b8a59c6" category="paragraph"><block ref="5854f61f2ee06ca17b6c4e887b8a59c6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ec15102c3a51002a1025de78e09ef186" category="section-title">FSLogix</block>
  <block id="8323ae25fc701995bb96a615f453b5e6" category="paragraph">FSLogix 允许用户即使在池化桌面部署方案等非持久性环境中也能获得持久体验。它可以优化虚拟桌面和 SMB 文件存储之间的文件 I/O ，并缩短登录时间。原生（本地）配置文件体验可最大限度地减少主映像设置用户配置文件所需的任务。</block>
  <block id="86ca188ff86999780e466fe662009c61" category="paragraph"><block ref="86ca188ff86999780e466fe662009c61" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ce23701366c920bcdb9bb5ef1c6e12aa" category="paragraph">FSLogix 会将用户设置和个人数据保存在其自己的容器（ VHD 文件）中。用于存储 FSLogix 用户配置文件容器的 SMB 文件共享在由组策略对象控制的注册表上进行配置。Citrix User Profile Management 可与 FSLogix 结合使用，以支持在虚拟应用程序上同时与虚拟桌面进行并发会话。</block>
  <block id="10624e1866e930540cc49b3e2882f5f2" category="paragraph"><block ref="10624e1866e930540cc49b3e2882f5f2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7d2dd0860c97909a973d6b525f163d0c" category="paragraph">此图显示了 FSLogix SMB 位置的内容。请注意，我们切换了目录名称，以便在安全标识符（ SID ）之前显示用户名。</block>
  <block id="eeedb2941f2734afc18a0f5c75d5f85a" category="paragraph">虚拟应用程序和桌面需要连接和资源才能托管，如一节所述 <block ref="a0f1d4436505fda1e5e3be3d7d2ee19d" category="inline-link-macro-rx"></block>。定义资源时，请选择必须与该资源关联的 VLAN 。在计算机目录部署期间，系统会提示您将 VM NIC 与相应的网络相关联。</block>
  <block id="86bdc4c575077d4eb6398d6755dc9832" category="paragraph"><block ref="86bdc4c575077d4eb6398d6755dc9832" category="inline-image-macro-rx" type="image"></block></block>
  <block id="52f9ec21735243ad9917cda3ca077d32" category="section-title">GPU</block>
  <block id="2b5f93f4afd9cc3873926aff7c1a5aaa" category="paragraph">如上一节所述，在确定虚拟机管理程序服务器是否具有 GPU 资源时，系统会提示您启用图形虚拟化并选择 vGPU 配置文件。</block>
  <block id="1649eacbffe0395a9287f87a886f4305" category="summary">本解决方案介绍了 NetApp HCI 基础架构， Citrix 虚拟应用程序和桌面以及 Citrix 虚拟机管理程序的集成。</block>
  <block id="bd9c632b9b704bbcab33b19a68928006" category="doc">TR-4854 ：适用于采用 Citrix 虚拟机管理程序的 Citrix 虚拟应用程序和桌面的 NetApp HCI</block>
  <block id="3d564c1c20cf4265a5094ead9dc937f6" category="paragraph">NetApp 公司 Suresh ThopPay</block>
  <block id="1b287bdad2a63459687e22dbdb7b16ab" category="paragraph">NetApp HCI 基础架构允许您从小规模入手，然后以小规模为增量进行构建，以满足虚拟桌面用户的需求。可以添加或删除计算或存储节点，以满足不断变化的业务需求。</block>
  <block id="c7a35262f3ee162bbbf1dd42fc972d2c" category="paragraph">Citrix 虚拟应用程序和桌面为最终用户计算提供了一个功能丰富的平台，可满足各种部署需求，包括支持多个虚拟机管理程序。此软件的高级版包含用于管理映像和用户策略的工具。</block>
  <block id="da7ea5bf40dad9d5f6ddece9bb411f60" category="paragraph">与在其他虚拟机管理程序平台上运行相比， Citrix 虚拟机管理程序（以前称为 Citrix Xen 虚拟机管理程序）为 Citrix 虚拟应用程序和桌面提供了更多功能。以下是在 Citrix 虚拟机管理程序上运行的主要优势：</block>
  <block id="ec927c8bb2df36ff1adba4f41d5732e6" category="list-text">所有版本的 Citrix 虚拟应用程序和桌面均附带 Citrix 虚拟机管理程序许可证。此许可有助于降低运行 Citrix 虚拟应用程序和桌面平台的成本。</block>
  <block id="33d2446a910f5bb65cbbefde59383bc8" category="list-text">只有 Citrix 虚拟机管理程序才提供 PVS 加速器和存储加速器等功能。</block>
  <block id="057281cf1076e6c6ff68651f40193ffc" category="list-text">对于 Citrix 解决方案， Citrix 虚拟机管理程序是首选工作负载选项。</block>
  <block id="e61d8b5927d872418b37092707817d77" category="list-text">提供长期服务版本（ LTRR ；与 Citrix 虚拟应用程序和桌面一致）和当前版本（ CR ）选项。</block>
  <block id="64241e0b33fb869cb12ff8e1ec74f806" category="summary">NetApp VDS 使用 Azure Active Directory 进行身份验证，使用 Azure Active Directory 域服务进行 NTLM/Kerberos 身份验证。ADConnect 工具可用于将内部 Active Directory 域与 Azure Active Directory 同步。</block>
  <block id="92726ab5faeb2cb9208eaac9af0346bd" category="doc">用户管理</block>
  <block id="c758de7e1477d6707c6709441d41a5e9" category="paragraph">可以从门户添加新用户，也可以为现有用户启用云工作空间。工作空间和应用程序服务的权限可以由单个用户或组控制。从管理门户中，可以定义管理用户来控制门户，工作空间等的权限。</block>
  <block id="b1bb3db86aec5efef6f7cc0d0d7c6331" category="paragraph">下图显示了 NetApp VDS 中的用户管理。</block>
  <block id="ed5018356119de97fa1ab09c0eeab65a" category="paragraph"><block ref="ed5018356119de97fa1ab09c0eeab65a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1350c851c78a6cdb31c6fe46ddb499c2" category="paragraph">每个工作空间都位于云工作空间 OU 下自己的 Active Directory 组织单位（ OU ）中，如下图所示。</block>
  <block id="a5484d6de39aa020af1aa382d6d52c5e" category="paragraph"><block ref="a5484d6de39aa020af1aa382d6d52c5e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3fad2f68853fae9ef870ed5535896790" category="paragraph">有关详细信息，请参见<block ref="b5d59c719b42a4e7d2b711482aa2f54d" category="inline-link-rx"></block> 有关 NetApp VDS 中的用户权限和用户管理的信息。</block>
  <block id="48a8649f1ce9d97848d70480ce7fea9c" category="paragraph">如果使用数据中心的 API 调用将 Active Directory 组定义为 CRAUserGroup ，则该组中的所有用户都将导入到 CloudWorkspace 中，以便使用 UI 进行管理。为用户启用云工作空间后， VDS 将创建用户主文件夹，设置权限，用户属性更新等。</block>
  <block id="9e30d1bf5e5278a123ad0ddab43066b7" category="paragraph">如果选中 VDI User Enabled ，则 VDS 将创建一个专用于该用户的单会话 RDS 计算机。它会提示您配置模板和数据存储库。</block>
  <block id="093d2ddf98cacaf853b6f986ca9bd647" category="paragraph"><block ref="093d2ddf98cacaf853b6f986ca9bd647" category="inline-image-macro-rx" type="image"></block></block>
  <block id="46bccf4889fab263d6edc63e631883a7" category="inline-link-macro">下一步：工作空间管理</block>
  <block id="e98fdb0b8697a2cf005527be51872d0d" category="paragraph"><block ref="e98fdb0b8697a2cf005527be51872d0d" category="inline-link-macro-rx"></block></block>
  <block id="57eae0e26c1c0bbaec9110d010f68f7a" category="summary">NetApp HCI 是一种混合云基础架构，由多个存储节点和计算节点组成。根据型号的不同，它可以是双机架单元或单机架单元。部署 VM 所需的安装和配置通过 NetApp 部署引擎（ NDE ）自动完成。计算集群通过 VMware vCenter 进行管理，存储集群通过使用 NDE 部署的 vCenter 插件进行管理。</block>
  <block id="855faa205a8f23993f1a0fe1ac2cde2f" category="doc">NetApp HCI 概述</block>
  <block id="95404d16cb98456e438a61d79a0a31d9" category="paragraph">NetApp HCI 是一种混合云基础架构，由多个存储节点和计算节点组成。根据型号的不同，它可以是双机架单元或单机架单元。部署 VM 所需的安装和配置通过 NetApp 部署引擎（ NDE ）自动完成。计算集群通过 VMware vCenter 进行管理，存储集群通过使用 NDE 部署的 vCenter 插件进行管理。名为 mNode 的管理 VM 会作为 NDE 的一部分进行部署。</block>
  <block id="b6ab683d50d83f639ae697569117a54b" category="paragraph">NetApp HCI 可处理以下功能：</block>
  <block id="d15278d453245d004f8fd55cff421171" category="list-text">版本升级</block>
  <block id="b783caf332f2c3190dcb6ced64290f5a" category="list-text">将事件推送到 vCenter</block>
  <block id="79adeb760f6909dd746e1e7adae6cd58" category="list-text">vCenter 插件管理</block>
  <block id="a45e04274259a13dff2a10641a0fd97f" category="list-text">用于支持的 VPN 通道</block>
  <block id="227590ca6f7ff3f3cc72e49cf277625f" category="list-text">NetApp Active IQ 收集器</block>
  <block id="b0088ee645cccd0951013eb53d0b3816" category="list-text">将 NetApp 云服务扩展到内部环境，实现混合云基础架构。下图显示了 HCI 组件。</block>
  <block id="1a811712e3bea62b6f5bd1851b149fc3" category="paragraph"><block ref="1a811712e3bea62b6f5bd1851b149fc3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="65f0d96af236e344bd739fd20df1fa5d" category="paragraph">存储节点可用作半宽或全宽机架单元。首先至少需要四个存储节点，一个集群最多可扩展到 40 个节点。一个存储集群可以在多个计算集群之间共享。所有存储节点都包含一个缓存控制器，用于提高写入性能。单个节点可提供 50 ， 000 或 100 ， 000 IOPS ，块大小为 4 k 。</block>
  <block id="d31f04e865057f7055f2d8287b92ba2d" category="paragraph">NetApp HCI 存储节点运行 NetApp Element 软件，该软件可提供最小，最大和突发 QoS 限制。存储集群支持混合使用多个存储节点，但一个存储节点不能超过总容量的三分之一。</block>
  <block id="449aaf51a6dfa9c0e17423ae5938d674" category="inline-link">《 VMware 兼容性指南》</block>
  <block id="1046a3e2377d26c40f75eb2cd2f268da" category="admonition">NetApp 支持将其存储连接到中列出的任何计算服务器<block ref="72cc7e3e2b2d7f777e05aa309ef5f733" category="inline-link-rx"></block>。</block>
  <block id="bc1a52314ab38efacf0a83e9df0b01cc" category="paragraph">计算节点提供半宽，全宽和两种机架单元大小。NetApp HCI H410C 和 H610C 基于可扩展的 Intel Skylake 处理器。H615C 基于第二代可扩展 Intel 级联湖处理器。有两种计算型号包含 GPU ： H610C 包含两个 NVIDIA M10 卡， H615C 包含三个 NVIDIA T4 卡。</block>
  <block id="683876986e8fe1045fa768b4a8675ea9" category="paragraph"><block ref="683876986e8fe1045fa768b4a8675ea9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9667ae1b4be7e4c088e175844fd675e6" category="paragraph">NVIDIA T4 具有 40 个 RT 核心，可提供实时光线跟踪所需的计算能力。现在，设计师和工程师使用的相同服务器模式也可供艺术家用来创建照片级的图像，使表面的光像实际生活中的光弹出一样。这种支持 RTX 的 GPU 可实现高达每秒 5 GB 的实时光线跟踪性能。NVIDIA T4 与 Quadro 虚拟数据中心工作站（ Quadro vDWS ）软件相结合，可帮助艺术家从任何位置在任何设备上创建具有准确阴影，镜像和折光效果的照片级设计。</block>
  <block id="bee5034948808ff859affdc8ba03b52c" category="paragraph">利用 Tensor 核心，您可以运行深度学习推理工作负载。在运行这些工作负载时，采用 Quadro vDWS 的 NVIDIA T4 的性能比纯 CPU 服务器驱动的虚拟机快多达 25 倍。NetApp H615C 在一个机架单元中具有三个 NVIDIA T4 卡，是图形和计算密集型工作负载的理想解决方案。</block>
  <block id="1f99f286804bf2f5a91a1cdd1733decf" category="paragraph">下图列出了 NVIDIA GPU 卡并对其功能进行了比较。</block>
  <block id="67c0c3f98979352a9ed10f0de3d551f3" category="paragraph"><block ref="67c0c3f98979352a9ed10f0de3d551f3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b3b4fc2931642829391b479ea5fb1e9d" category="paragraph">对于知识型员工使用情形， M10 GPU 仍然是最佳的 TCO 解决方案。但是，如果要在 GPU 上进行标准化，而 GPU 可用于多种使用情形，例如虚拟工作站，图形性能，实时交互式渲染和推理，则 T4 是一个很好的替代方案。借助 T4 ， IT 可以利用相同的 GPU 资源来运行混合工作负载―例如，在白天运行 VDI ，并将资源重新用于在夜间运行计算工作负载。</block>
  <block id="bdced20c33601e0149aecb44114cfdc5" category="paragraph">H610C 计算节点的大小为两个机架单元； H615C 的大小为一个机架单元，耗电较少。H615C 支持 H.264 和 H.265 （高效视频编码（ High Efficiency Video Coding ， HEVC ） 4 ： 4 ： 4 编码和解码。此外，它还支持越来越主流的 VP9 解码器；即使 YouTube 提供的 Web 容器软件包也会使用 VP9 编解码器来处理视频。</block>
  <block id="fe046fc197d12a64da1ea78423a2a809" category="paragraph">计算集群中的节点数由 VMware 决定；目前，使用 VMware vSphere 7.0 Update 1 时为 96 个。启用增强型 vMotion 兼容性（ EVC ）后，支持在集群中混用不同型号的计算节点。</block>
  <block id="f0bee2b90db3a99440b1a724c49ce1a2" category="inline-link-macro">下一步： NVIDIA 许可</block>
  <block id="e0bca2831f4cccfcaebc75e9555a1719" category="paragraph"><block ref="e0bca2831f4cccfcaebc75e9555a1719" category="inline-link-macro-rx"></block></block>
  <block id="cdc3fdae8a036cb4338484b6233a975b" category="summary">提供虚拟应用程序和桌面服务的服务提供商更愿意将其托管在 Citrix 虚拟机管理程序上，以降低成本并实现更好的集成。在 NetApp HCI 上自动安装 VMware vSphere 的 NetApp 部署引擎（ NDE ）目前不支持部署 Citrix 虚拟机管理程序。可以使用 PXE 启动或安装介质或 Citrix 支持的其他部署方法将 Citrix 虚拟机管理程序安装在 NetApp HCI 上。</block>
  <block id="50cdffd522032c5266bd0c722da92893" category="paragraph">Citrix 虚拟应用程序和桌面可以使用 Citrix 配置（基于网络）或 Machine Creation Services （基于虚拟机管理程序存储）自动配置桌面和会话主机。支持基于 Microsoft Windows 的操作系统和常见的 Linux 模式。如果其他虚拟机管理程序上的现有物理工作站，桌面 PC 和 VM 未启用自动配置，则也可以通过安装代理来进行远程访问。</block>
  <block id="973c6fcc84e51afe5696edf61403882a" category="paragraph">Citrix Workspace 应用程序是一款用于访问虚拟应用程序和桌面的客户端软件，在平板电脑和手机等各种设备上均受支持。可以使用部署位置内部或外部基于浏览器的 HTML5 界面访问虚拟应用程序和桌面。</block>
  <block id="ec325c4249eb59dc6b256784e38f6a41" category="paragraph">根据您的业务需求，解决方案可以扩展到多个站点。但是，请记住， NetApp HCI 存储效率是按集群运行的。</block>
  <block id="e24913e3d038271a82c2cabce0a9d813" category="paragraph">下图显示了解决方案的高级架构。访问，控制和资源层作为虚拟机部署在 Citrix 虚拟机管理程序之上。Citrix 虚拟机管理程序在 NetApp HCI 计算节点上运行。虚拟磁盘映像存储在 NetApp HCI 存储节点上的 iSCSI 存储库中。</block>
  <block id="ef271f6e6ad38010005db1d7deeb6046" category="paragraph">此解决方案中用于 SMB 文件共享的 NetApp AFF A300 用于存储使用 FSLogix 容器， Citrix 配置文件管理（用于多会话回写支持），弹性应用程序分层映像等的用户配置文件。我们还使用 SMB 文件共享在 Citrix 虚拟机管理程序上挂载 ISO 映像。</block>
  <block id="4749bdede5686f84cb9dbddf5efe512a" category="paragraph"><block ref="4749bdede5686f84cb9dbddf5efe512a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6090cfc9182125118ed6cefbd0ff6933" category="paragraph">Mellanox SN2010 交换机用于 10/25/100GB 以太网连接。存储节点使用 SFP28 收发器进行 25 Gb 连接，计算节点使用 SFP/SFP+ 收发器进行 10 Gb 连接，交换机间链路是使用 QSFP28 收发器进行 100 Gb 连接。</block>
  <block id="d08a42bce4c4b016bbae849d54aa8254" category="paragraph">存储端口配置有多机箱链路聚合（ MLAG ），可提供 50 GB 的总吞吐量，并配置为中继端口。计算节点端口配置为混合端口，用于为 iSCSI ， XenMotion 和工作负载 VLAN 创建 VLAN 。</block>
  <block id="868ab86f19065016e9a2f077c5ec1ede" category="summary">任务工作人员可以从可供其使用的应用程序列表中快速启动应用程序。应用程序服务从远程桌面服务会话主机发布应用程序。借助 WVD ，应用程序组可从多会话 Windows 10 主机池提供类似的功能。</block>
  <block id="aa08bd8b0522ea3a5e9ace598db7162c" category="doc">应用程序管理</block>
  <block id="f83a66a518ff3f3f44725a09d9666710" category="paragraph">对于为用户提供支持的办公室员工，可以使用服务板手动配置所需的应用程序，也可以使用 NetApp VDS 中的脚本化事件功能自动配置这些应用程序。</block>
  <block id="546d3f7d3bb8a664a6ba4a3fb2f68c30" category="inline-link">NetApp 应用程序授权页面</block>
  <block id="175ba74f5b7d0ecd3f531c5fce21a240" category="paragraph">有关详细信息，请参见<block ref="03e02ecfc967e94041a86f599e14ac44" category="inline-link-rx"></block>。</block>
  <block id="fd324b11a163d2dae6bf3f9654381d16" category="inline-link-macro">接下来：适用于虚拟桌面服务的 ONTAP 功能</block>
  <block id="25838148a81bcaa2b7e931ef8cd65a13" category="paragraph"><block ref="25838148a81bcaa2b7e931ef8cd65a13" category="inline-link-macro-rx"></block></block>
  <block id="91af64270656f51ceebeabc4b79ecb07" category="summary">NetApp VDS 可以使用根据所需代码库提供的设置应用程序部署到 Microsoft Azure 。</block>
  <block id="29707848401dd26f02baed07b9a416c1" category="paragraph">NetApp VDS 可以使用根据所需代码库提供的设置应用程序部署到 Microsoft Azure 。当前版本可用<block ref="deb5bc0c1293f06a53a77d04b921abbd" category="inline-link-rx"></block> 即将推出的产品的预览版现已发布<block ref="b5073644bfe6db36c388c6bdbca64b49" category="inline-link-rx"></block>。</block>
  <block id="c4e1987e3c1416cefd772fd61f28dfb4" category="paragraph">请参见<block ref="f8270911b627accef36841f0608bc58d" category="inline-link-rx"></block> 有关部署说明，请参见。</block>
  <block id="4c9affd9b517fc81a601ea0861dc5399" category="inline-link-macro">接下来：混合云环境</block>
  <block id="2045518eb8a77a5284f073d0387f9a58" category="paragraph"><block ref="2045518eb8a77a5284f073d0387f9a58" category="inline-link-macro-rx"></block></block>
  <block id="bf6d8e47240024519d1dbb6f5582ce66" category="summary">图形工作站通常用于制造业，医疗保健，能源，媒体和娱乐，教育， 架构等。对于图形密集型应用程序，移动性往往受到限制。</block>
  <block id="942cd85feff07ce32d619d2f724254a8" category="doc">行业解决方案</block>
  <block id="fb987436787e4263bfee440b93703026" category="paragraph">为了解决移动性问题描述问题，虚拟桌面服务可以使用云中的硬件资源或 NetApp HCI 为从任务员工到专家用户的所有类型的员工提供桌面环境，包括灵活的 GPU 配置选项。VDS 支持用户使用笔记本电脑，平板电脑和其他移动设备从任意位置访问工作环境。</block>
  <block id="68ae3286d2356ff8dd51c2a397ca20eb" category="paragraph">要使用 ANSYS Fluent ， ANSYS MechanIC ， AutoDESCad ， AutoDESCIGAN ， AutoDESCUTE VENIGAN ， AutoDESCKS Max 等软件运行制造工作负载， ｛ \f4 ｝ ｛ \f4 ｝ ｛ \f4 ｝ ｛ \f4 ｝ ｛ Systèmes \f4 ｝ ｛ \f4 ｝ ｛ \f4 ｝ ｛ \f4 ｝ ｛ \f4 ｝ ｛ \f4 ｝ ｛ Systèmes 下表列出了各种云（截至 2021 年 1 月）上可用的 GPU 。</block>
  <block id="f5168df5bb95078acdfb440f5975a601" category="cell">GPU 型号</block>
  <block id="1668ca1bd914c1d847f23b491319ac91" category="cell">Microsoft Azure</block>
  <block id="b314ebdba178173db01ffda8d3a5af67" category="cell">Google 计算（ GCP ）</block>
  <block id="943ca3782b28d89aff2f86a50b332b3c" category="cell">Amazon Web Services （ AWS ）</block>
  <block id="8df8a98ff17d4d77329f5da80da051e8" category="cell">内部部署（ NetApp HCI ）</block>
  <block id="aaba9e920b39aa997c69800a9e589cd4" category="cell">NVIDIA M60</block>
  <block id="e095ad80d900786110d53ecd5cbd3e3e" category="cell">NVIDIA T4</block>
  <block id="c909ed1507c6d5537f0cc0966e83d3f1" category="cell">NVIDIA P100</block>
  <block id="c015c1cc95335d3b867c145c056df10b" category="cell">NVIDIA P4</block>
  <block id="e8130bb14c9382769c22861fb54683b3" category="paragraph">此外，还提供与其他用户的共享桌面会话以及专用个人桌面。虚拟桌面可以具有一到四个 GPU ，也可以在 NetApp HCI 中使用部分 GPU 。NVIDIA T4 是一款多功能 GPU 卡，可满足各种用户工作负载的需求。NetApp HCI H615C 上的每个 GPU 卡都有 16 GB 的帧缓冲区内存，每个服务器有三个卡。可以托管在一个 H615C 服务器上的用户数量取决于用户工作负载。</block>
  <block id="4d8b78a5288c49df59136421211718c9" category="cell">用户 / 服务器</block>
  <block id="704316eb872cbca84a8b30d74c2708a4" category="cell">轻型（ 4 GB ）</block>
  <block id="6f3a945a32dd8eba9f2fae42715f7246" category="cell">中型（ 8 GB ）</block>
  <block id="adb5e5b63d256f3854fc7276b3e8d14a" category="cell">重磅（ 16 GB ）</block>
  <block id="8938ba807f25f2cd88559b9f84bbc3de" category="paragraph">要确定用户类型，请在用户使用执行典型任务的应用程序时运行 GPU 配置程序工具。GPU 配置程序可捕获内存需求，显示数量以及用户所需的分辨率。然后，您可以选择满足您要求的 vGPU 配置文件。</block>
  <block id="1b014a2b6e4c329b9696aae7afac88db" category="paragraph">使用 GPU 的虚拟桌面可支持高达 8K 的显示分辨率，而实用程序 nView 可将一个监控器拆分为多个区域，以便使用不同的数据集。</block>
  <block id="30f1a84c728d67b9606115a1531aa9c3" category="paragraph">借助 ONTAP 文件存储，您可以实现以下优势：</block>
  <block id="826f3d14d0c34cd0f8ced37e07a1537d" category="list-text">一个命名空间，可通过 4000 亿个文件增长到 20 PB 的存储空间，而无需大量管理输入</block>
  <block id="1d7ab3c9a162bc81b216bdc0948094f2" category="list-text">一种可通过全局文件缓存跨越全球的命名空间</block>
  <block id="2d4169e0cb52db60fd11576990b38a54" category="list-text">利用受管 NetApp 存储实现安全多租户</block>
  <block id="a44c13ec320997e84b87b0fef150c39f" category="list-text">使用 NetApp FabricPool 将冷数据迁移到对象存储</block>
  <block id="3749fba0ca78e5e5c70f899da89be2c3" category="list-text">通过文件系统分析快速提供文件统计信息</block>
  <block id="63d0ec819ea12b4e83e0ef4a1cd2bb1c" category="list-text">将存储集群扩展到多达 24 个节点，以提高容量和性能</block>
  <block id="818a13118ddb0908ba00c1b7ca18dc2c" category="list-text">能够使用配额控制存储空间，并具有 QoS 限制的性能保障</block>
  <block id="ef94cd0a62341c72316393b1044582f8" category="list-text">通过加密保护数据安全</block>
  <block id="c1e36bb7dca3b0da98164eb5956e3f0f" category="list-text">满足广泛的数据保护和合规性要求</block>
  <block id="6a632279908ad5d56ab46a826de6c9f2" category="list-text">提供灵活的业务连续性选项</block>
  <block id="3c2622109ae4dc55b73e9bb6516e5616" category="paragraph"><block ref="3c2622109ae4dc55b73e9bb6516e5616" category="inline-link-macro-rx"></block></block>
  <block id="29e1d6119f6351bd9956bf387ae7ca88" category="summary">借助 Citrix 虚拟应用程序和桌面，用户可以从任何位置通过 Internet 访问其工作空间环境，也可以从任何具有支持 HTML5 的 Web 浏览器或 Citrix Workspace 应用程序的设备访问其工作空间环境。</block>
  <block id="bdd35db6efe3330abe60452e23951624" category="doc">用户层</block>
  <block id="241b56b7a6bc1e22810cfcb30324baab" category="paragraph">用户可以分为任务员工，办公室员工，知识型员工和高级用户。任务工作人员主要在工作中全天使用预定义的应用程序。托管的 Windows 应用程序可以满足他们的需求。办公人员需要使用桌面界面来运行办公应用程序， Web 浏览器等。通常，不允许他们在工作空间中安装应用程序。它们最好由服务器操作系统上具有多会话的共享桌面或池化桌面来提供。</block>
  <block id="0689dc58169e7f0ba60f8ed6ca5acb6f" category="paragraph">知识型员工通常需要具备同时使用多个应用程序的桌面体验，并且必须能够保留他们在工作空间中安装的应用程序。静态桌面（也称为个人桌面）支持此功能。高级用户通常使用图形密集型应用程序或其他需要更多硬件资源的应用程序。使用适当的主映像创建的静态桌面可满足高级用户的需求。</block>
  <block id="0581202e42d61d6dfe4875c70d00cdac" category="summary">NetApp 虚拟桌面服务可提供一个易于使用的虚拟桌面和应用程序环境，并重点关注业务挑战。通过使用 NetApp HCI 扩展 VDS ，您可以在 VDS 环境中使用强大的 NetApp 功能，包括实时重复数据删除，数据缩减，精简配置和数据压缩。</block>
  <block id="33491606222aecbfbdfa3fc8f13ffded" category="paragraph">NetApp 虚拟桌面服务可提供一个易于使用的虚拟桌面和应用程序环境，并重点关注业务挑战。通过在内部 ONTAP 环境中扩展 VDS ，您可以在 VDS 环境中使用强大的 NetApp 功能，包括快速克隆，实时重复数据删除，数据缩减，精简配置， 和数据压缩。这些功能可以节省存储成本并提高全闪存存储的性能。借助 VMware vSphere 虚拟机管理程序，可通过使用虚拟卷和 vSphere API 实现阵列集成，最大限度地缩短服务器配置时间。利用混合云，客户可以选择适合其苛刻工作负载的环境，并节省资金。内部运行的桌面会话可以根据策略访问云资源。</block>
  <block id="df6f0981c6f92ef3adb9059f5b387e4a" category="paragraph"><block ref="df6f0981c6f92ef3adb9059f5b387e4a" category="inline-link-macro-rx"></block></block>
  <block id="a3af49b9146a6a36e8bea4c525797782" category="summary">此页面将讨论 DCConfig 工具， TestV 直流工具和日志文件。</block>
  <block id="d56ee3058d1c4ab634cd3e1e606f2064" category="doc">工具和日志</block>
  <block id="626b1761e15913fc6f955e1d76a0ac10" category="section-title">DCConfig 工具</block>
  <block id="65bbb1c25836b86f699bd2141a545958" category="paragraph">DCCconfig 工具支持以下虚拟机管理程序选项来添加站点：</block>
  <block id="2c76e52255da65e5fcf88143f91aa431" category="paragraph"><block ref="2c76e52255da65e5fcf88143f91aa431" category="inline-image-macro-rx" type="image"></block></block>
  <block id="da2595b668536baaea606e674ade5181" category="paragraph"><block ref="da2595b668536baaea606e674ade5181" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2eb34c5311117b56d2c8eb33494052a3" category="paragraph">可以使用 GPO 处理共享数据的特定工作空间驱动器号映射。专业服务或支持团队可以使用高级选项卡自定义 Active Directory OU 名称，启用或禁用 FSLogix 部署的选项，各种超时值等设置。</block>
  <block id="8688a5dde644921ea673f5bc2dde55c3" category="paragraph"><block ref="8688a5dde644921ea673f5bc2dde55c3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f6c93f3609bb3be799ed32b6a601d5fc" category="section-title">命令中心（以前称为 TestV 直流工具）</block>
  <block id="46433f623976c5af8ebdc7ab92816a48" category="inline-link-macro">命令中心概述</block>
  <block id="bf69b43c185864d35a461d8f1c3ea56e" category="paragraph">要启动 Command Center 和所需角色，请参见 <block ref="d7ce3bd63a8a34b9b1630abb82acb951" category="inline-link-macro-rx"></block>。</block>
  <block id="b425cca2998cc4a7041a0baf7681e912" category="paragraph">您可以执行以下操作：</block>
  <block id="b462233b13790bce7e4c6449d02cf930" category="list-text">更改工作空间的 SMB 路径。</block>
  <block id="ee347a7998de9774369e6853f1ed7bcc" category="paragraph"><block ref="ee347a7998de9774369e6853f1ed7bcc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c524c01ee30f2f1597bb3e90c721dd8c" category="list-text">更改用于配置收集的站点。</block>
  <block id="ccb9931a262a0b169576103526fa2ab2" category="paragraph"><block ref="ccb9931a262a0b169576103526fa2ab2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="af6ba12de0b8c93d5f768c83143c7d99" category="section-title">日志文件</block>
  <block id="017b9aa293da801da252c728736f02db" category="inline-link-macro">自动化日志</block>
  <block id="580acc766c3f0e464b462d271028dc32" category="paragraph"><block ref="5f6615a18cd0f2f0bcfb7578db5d1c9e" category="inline-image-macro-rx" type="image"></block>检查 <block ref="11597d7347faee3da56e0e01d5ba1de2" category="inline-link-macro-rx"></block> 了解更多信息。</block>
  <block id="881784d32d0ec795e6fd477e7c0fe8f7" category="paragraph"><block ref="881784d32d0ec795e6fd477e7c0fe8f7" category="inline-link-macro-rx"></block></block>
  <block id="e94ab56b32737c81695f017945a054b3" category="summary">Citrix 虚拟机管理程序（以前称为 XenServer ）是适用于桌面虚拟化基础架构的行业领先且经济高效的开源平台。XenCenter 是适用于 Citrix 虚拟机管理程序服务器的轻型图形管理界面。</block>
  <block id="4f816a671e4a36b2d1af857a7ec2f10e" category="doc">Citrix 虚拟机管理程序</block>
  <block id="2f119d33dee3d1e6abfbfd9e650c5a34" category="paragraph">Citrix 虚拟机管理程序（以前称为 XenServer ）是适用于桌面虚拟化基础架构的行业领先且经济高效的开源平台。XenCenter 是适用于 Citrix 虚拟机管理程序服务器的轻型图形管理界面。下图概述了 Citrix 虚拟机管理程序架构。</block>
  <block id="8afc1a2872abd5bcb4d591c1f60d8bc4" category="paragraph"><block ref="8afc1a2872abd5bcb4d591c1f60d8bc4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5c71de03c15d6d532196afd1f4e7fbfc" category="paragraph">Citrix 虚拟机管理程序是一种 1 类虚拟机管理程序。控制域（也称为域 0 或域 0 ）是一个安全的有权限 Linux VM ，它运行称为 XAPI 的 Citrix 虚拟机管理程序管理工具堆栈。此 Linux VM 基于 CentOS 7.5 版本。除了提供 Citrix 虚拟机管理程序管理功能之外， DOMA0 还会运行网络连接，存储等的物理设备驱动程序。控制域可以与虚拟机管理程序进行通信，指示其启动或停止子虚拟机。</block>
  <block id="4f077202986b8b8d9a31d22738f130e2" category="paragraph">虚拟桌面在子域（有时称为用户域或域 U ）中运行，并从控制域请求资源。硬件辅助虚拟化使用 Intel VT 等 CPU 虚拟化扩展。操作系统内核无需注意它正在虚拟机上运行。快速模拟器（ QEMU ）用于虚拟化 BIOS ， IDE ，图形适配器， USB ，网络适配器， 等等。借助半虚拟化（ PV ），操作系统内核和设备驱动程序经过优化，可提高虚拟机的性能。下图显示了 Citrix 虚拟机管理程序的多租户功能。</block>
  <block id="a4b0f283e12f9c44b80c657e584a30c3" category="paragraph"><block ref="a4b0f283e12f9c44b80c657e584a30c3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8380b3b296c1064f70f7ce20ed073c04" category="paragraph">NetApp HCI 的资源构成了硬件层，其中包括计算，存储，网络， GPU ， 等等。</block>
  <block id="f35f0f27f3ce0fa1efb3bc5ea262ff61" category="paragraph">上一节介绍了 NetApp HCI 的 CPU 和内存详细信息。但是，本节重点介绍如何在 Citrix 虚拟机管理程序环境中利用计算节点。</block>
  <block id="bb0729265d424d1e9a79d86a8164576e" category="paragraph">安装了 Citrix 虚拟机管理程序的每个 NetApp HCI 计算节点均称为服务器。服务器池作为资源池（ Resource Pool ， RP ）进行管理。创建的资源池具有类似型号的计算节点，以便在工作负载从一个节点移动到另一个节点时提供类似的性能。资源池始终包含一个指定为主节点，此节点会公开管理接口（对于 XenCenter 和 CLI ），并可根据需要路由到其他成员服务器。启用高可用性后，如果主节点发生故障，则会重新选择主节点。</block>
  <block id="bf74e5cf4eb1519bf389ccbc96344a69" category="paragraph">一个资源池最多可以包含 64 个服务器（软限制）。但是，如果使用 GFS2 共享存储资源启用了集群，则服务器数量将限制为 16 。</block>
  <block id="9613c8a81b9a3adf87357665edd66407" category="paragraph">资源池会选取一个服务器来托管工作负载，并可使用实时迁移功能迁移到其他服务器。要在资源池中实现负载平衡，必须在 Citrix 虚拟机管理程序上安装可选的 WLB 管理包。</block>
  <block id="c6520b1feaecda31ab56c972794f8bc4" category="paragraph"><block ref="c6520b1feaecda31ab56c972794f8bc4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e475c36184ac935711d83b414651b89a" category="paragraph">每个租户资源都可以托管在专用资源池上，也可以通过同一资源池上的标记进行区分。可以定义自定义值以用于操作和报告目的。</block>
  <block id="2401c24d8512aac29f9cc40499a047f9" category="paragraph">NetApp HCI 计算节点具有本地存储，不建议将其用于存储任何永久性数据。此类数据应存储在使用 NetApp HCI 存储创建的 iSCSI 卷上，也可以存储在 NetApp AFF 上的 NFS 数据存储库上。</block>
  <block id="a204e64823a9445f3c597a02f31881a9" category="paragraph">要使用 NetApp HCI 存储，必须在 Citrix 虚拟机管理程序服务器上启用 iSCSI 。使用 IQN ，注册启动程序并在 Element 管理门户上创建访问组。创建卷（请记住为基于 iSCSI SR 的 LVM 启用 512e 块大小支持）并分配帐户 ID 和访问组。</block>
  <block id="792cd1db165932ecdfe23fd52a105c9c" category="admonition">可以在命令行界面上使用以下命令自定义 iSCSI 启动程序：</block>
  <block id="500bc4fbe876de5784bb2d37dde6726f" category="inline-link">CTX138429</block>
  <block id="c4eeeac9d95e76114c265a6bbd03ff19" category="paragraph">如果配置了多个 iSCSI NIC ，则支持 iSCSI 的多路径功能。iSCSI 配置可使用 XenCenter 或 iscsiadm 和 multipath 等命令行界面命令来执行。也可以使用各种 Citrix 虚拟机管理程序 CLI 工具来执行此配置。有关单目标存储阵列的 iSCSI 多路径，请参见 <block ref="06cb46f2d01854261946a9246508b305" category="inline-link-rx"></block>。</block>
  <block id="8c9823e0ccf3ad538111d00e9465ff85" category="paragraph">存储库（ Storage Repository ， SR ）是存储虚拟机（ VM ）虚拟磁盘映像（ Virtual Disk Image ， VDI ）的存储目标。VDI 是一种存储抽象，表示虚拟硬盘驱动器（ HDD ）。下图显示了各种 Citrix 虚拟机管理程序存储对象。</block>
  <block id="0a60b8389727fb1245f19526436211c8" category="paragraph"><block ref="0a60b8389727fb1245f19526436211c8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="eb31233233338a6d4f7d7809e97f8be7" category="paragraph">SR 与主机之间的关系由物理块设备（ PBD ）处理，该设备存储与给定存储目标进行连接和交互所需的配置信息。同样，虚拟块设备（ Virtual Block Device ， VBD ）也会维护 VDI 与 VM 之间的映射。除此之外，还可以使用 VBD 来微调给定 VDI 的服务质量（ QoS ）和统计信息。以下屏幕截图显示了 Citrix 虚拟机管理程序存储库类型。</block>
  <block id="4570ce065c677a3091646f4b85c6f388" category="paragraph"><block ref="4570ce065c677a3091646f4b85c6f388" category="inline-image-macro-rx" type="image"></block></block>
  <block id="07bf634307258b9c761526142f36b37d" category="paragraph">使用 NetApp HCI ，可以创建以下 SR 类型。下表对功能进行了比较。</block>
  <block id="21021ea0e52be8e9c599f4dff41e5be0" category="cell">功能</block>
  <block id="4643a3ec9ded8075aed453f6aef2ddf9" category="cell">基于 iSCSI 的 LVM</block>
  <block id="79181974e7687117f61a4c09464f3ef2" category="cell">gfs2.</block>
  <block id="e290b18c33c3b04bbacb0f28d70c4dc4" category="cell">最大虚拟磁盘映像大小</block>
  <block id="69f53017d7fcd22c16c654c107c078c5" category="cell">2 TiB</block>
  <block id="d54709907386131ba964655bbc9648fb" category="cell">16 TiB</block>
  <block id="63557f8807ebb7a8d58ec636aa5ee09d" category="cell">磁盘配置方法</block>
  <block id="fe4e39d6f5505dc948a062da20457878" category="cell">厚配置</block>
  <block id="31722a69be06f07fc75bdff8b5958447" category="cell">精简配置</block>
  <block id="9f239f3174aa2591a1dc18e1efe49373" category="cell">读缓存支持</block>
  <block id="8dd5a59ce9b0bd0a6caf88b50e78f9d5" category="cell">集群模式池支持</block>
  <block id="65dc7f6eec588d08056ce83c52da1119" category="cell">已知限制</block>
  <block id="842ed596f6f76e1e39ad4f79a91b0121" category="list-text">不支持读取缓存</block>
  <block id="3ee49222f7c8b22c0c62383f2d4a5648" category="list-text">如果 VM 的 VDI 位于 GFS2 SR 上，则不支持使用存储实时迁移进行 VM 迁移。您也不能将 VDI 从其他类型的 SR 迁移到 GFS2 SR 。</block>
  <block id="2c7ad872285a8551db24ec10990a3c80" category="list-text">GFS2 SR 不支持调整 / 取消映射。</block>
  <block id="e988f7429c4eace8b226f9fb21923f16" category="list-text">对于这些 SR 上的 GFS2 SR 和磁盘，性能指标不可用。</block>
  <block id="5c479a87aaed1f8f14604fb7a2893240" category="list-text">GFS2 SR 上存储的 VDI 不支持更改块跟踪。</block>
  <block id="f048d0e4852ccc54a9caef0c11540f3b" category="list-text">不能将大于 2 TiB 的 VDI 导出为 VHD 或 OVA/OVF 。但是，您可以导出 VDI 大于 2 TiB 的 VM ，其格式为 XVA 。</block>
  <block id="6a474a701a95dc1e9dffee6a7ac3aad4" category="list-text">集群模式池仅支持每个池最多 16 个主机。</block>
  <block id="72ee1c181cbda00f41f71a2212ae5528" category="paragraph">由于 NetApp HCI 提供了当前的功能，因此 Citrix 虚拟机管理程序的 Intellicache 功能对 NetApp HCI 客户没有价值。Intellicache 可通过缓存本地存储库中的数据来提高基于文件的存储系统的性能。</block>
  <block id="5bc869dcfbfe137a23911d5647bf6901" category="paragraph">通过读取缓存，您可以通过缓存服务器内存中的数据来提高某些存储库的性能。gfs2 是第一个支持读取缓存的 iSCSI 卷。</block>
  <block id="5fb85c9afc2daa5ba713e8461b7b826c" category="paragraph">Citrix 虚拟机管理程序网络基于支持 OpenFlow 的 Open vSwitch 。它支持精细安全策略，以控制从 VM 发送和接收的流量。此外，还可以详细了解虚拟网络环境中发送的所有流量的行为和性能。下图概述了 Citrix 虚拟机管理程序网络连接。</block>
  <block id="57939c49ba7e16c149bdfa54106e914b" category="paragraph"><block ref="57939c49ba7e16c149bdfa54106e914b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f1b9c06145060d21b9758fbebba301d2" category="paragraph">物理接口（ PIF ）与服务器上的 NIC 相关联。对于 Network HCI ，最多可使用六个 NIC 。对于只有两个 NIC 的型号，可以使用 SR-IOV 添加更多的 PIF 。PIF 充当虚拟交换机网络的上行链路端口。虚拟接口（ VIF ）连接到虚拟机上的 NIC 。</block>
  <block id="25295446da21fda225a6585020bfc00c" category="paragraph">提供了多种网络选项：</block>
  <block id="d67c37242c4a0c71a9a96e963cfea619" category="list-text">一种使用 VLAN 的外部网络</block>
  <block id="6b5f31a49ee2cf34109ca78a4007c457" category="list-text">没有外部连接的单个服务器专用网络</block>
  <block id="10f167a8ee8bc60e60a33f20577ff09c" category="list-text">绑定网络（主动 / 主动 - 聚合吞吐量）</block>
  <block id="d37862ce8735b8907f404e37a3653018" category="list-text">绑定网络（主动 / 被动 - 容错）</block>
  <block id="d5a6b6a2003754ac6ce2da4686093748" category="list-text">绑定网络（ LACP —基于源和目标 IP 及端口的负载平衡）</block>
  <block id="f0b700f34fb2d43c7e2cc07244bae492" category="list-text">绑定网络（ LACP —基于源和目标 MAC 地址的负载平衡）</block>
  <block id="bec2e277300354f6b90072b9d4453ba1" category="list-text">网络不离开资源池的跨服务器专用网络</block>
  <block id="28c63eff6060c3bd3a9a8c6a06b471cf" category="list-text">SR-IOV</block>
  <block id="078d52c984b29f7b104eccee62ce9d92" category="paragraph">在主服务器上创建的网络配置将复制到其他成员服务器。因此，在将新服务器添加到资源池中时，其网络配置将从主服务器复制。</block>
  <block id="90b8a95462beccc94f29fdc32410856f" category="admonition">每个 NIC 只能为每个 VLAN 分配一个 IP 地址。对于 iSCSI 多路径，要在同一子网上分配 IP ，您必须具有多个 PIF 。对于 H615C ，您可以考虑对 iSCSI 使用 SR-IOV 。</block>
  <block id="a3e6340a628aecec9a6480241b4e01b5" category="paragraph"><block ref="a3e6340a628aecec9a6480241b4e01b5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a07fe5fbaf388adccd0e129df871c919" category="paragraph">由于 Citrix 虚拟机管理程序上的网络基于 Open vSwitch ，因此您可以使用 OVS-vsctl 和 OVS-appctl 命令对其进行管理。它还支持将 NVGE/VXLAN 作为大型横向扩展环境的叠加解决方案。</block>
  <block id="e615b31fa98942e37b335ae467397564" category="paragraph">与 Citrix 配置（ PVS ）结合使用时， PVS 加速器可通过缓存域 0 内存或将内存与本地存储库结合使用来提高性能。</block>
  <block id="af203982869d4041f3ce07f1003baadd" category="paragraph"><block ref="af203982869d4041f3ce07f1003baadd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cc998d916c638b60b84df71d63c599c3" category="paragraph">Citrix 虚拟机管理程序率先部署了 NVIDIA vGPU ，这是一个适用于 GPU 的虚拟化平台，支持在多个虚拟机之间共享 GPU 。NetApp HCI H610C （使用 NVIDIA Tesla M10 卡）和 H615C （使用 NVIDIA Tesla T4 卡）可以为虚拟桌面提供 GPU 资源，从而提供硬件加速以增强用户体验。</block>
  <block id="2608e51ad3559441038dc9361a5ec8cc" category="paragraph">NetApp HCI GPU 可以在 Citrix 虚拟机管理程序环境中使用直通模式，即整个 GPU 提供给单个虚拟机，也可以使用 NVIDIA vGPU 。不支持使用 GPU 直通实时迁移虚拟机，因此 NVIDIA vGPU 是首选。</block>
  <block id="d530a6782df4261a791c9e0dce089310" category="paragraph">适用于 Citrix 虚拟机管理程序的 NVIDIA Virtual GPU Manager 可以使用 XenCenter 与其他管理包一起部署，也可以通过与服务器的 SSH 会话进行安装。虚拟 GPU 会获得自己的专用帧缓冲区，同时共享流式处理器，编码器，解码器等。也可以使用计划程序对其进行控制。</block>
  <block id="8daa4d732531515bbd4084c90d9f6157" category="paragraph">H610C 具有两个 Tesla M10 图形卡，每个卡具有 4 个 GPU 。每个 GPU 都有 8 GB 帧缓冲区内存，每个服务器总共有 8 个 GPU 和 64 GB 内存。H615C 具有三个 Tesla T4 卡，每个卡都有自己的 GPU 和 16 GB 帧缓冲区内存，每个服务器总共有 3 个 GPU 和 48 GB 图形内存。下图概述了 NVIDIA vGPU 架构。</block>
  <block id="f606f05cad54b06015db75b4cb35c6bd" category="paragraph"><block ref="f606f05cad54b06015db75b4cb35c6bd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b9e8337508389f16a5835ac79a02edd9" category="paragraph">NVIDIA vGPU 支持每个 GPU 的同构配置文件。虚拟机在 GPU 上的放置由一个策略控制，该策略可根据需求设置最大密度或最高性能。</block>
  <block id="08f60cc148e2c0f6924de85cee5b4d0d" category="paragraph"><block ref="08f60cc148e2c0f6924de85cee5b4d0d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="64bcb21d6eda71a46141b9f928f5d1cb" category="paragraph">创建 VM 时，您可以设置虚拟 GPU 配置文件。您选择的 vGPU 配置文件取决于所需的帧缓冲区内存级别，显示数量和解决要求。您还可以设置虚拟机的用途，无论是虚拟应用程序（ A ），虚拟桌面（ B ），专业的 Quadro 虚拟工作站（ Q ），还是人工智能推理应用程序的计算工作负载 ++ （ C ） ++ 。</block>
  <block id="83f4def0f286ba9def8b4473421ac135" category="paragraph"><block ref="83f4def0f286ba9def8b4473421ac135" category="inline-image-macro-rx" type="image"></block></block>
  <block id="32477be6ac939b0479e64370d4095343" category="paragraph">独立于 XenCenter ， Citrix 虚拟机管理程序 NVIDIA-SMI 上的 CLI 实用程序可用于故障排除和监控性能。</block>
  <block id="61083c7eacdd6cac80b95b8da4b03812" category="paragraph">要访问虚拟 GPU ，需要虚拟机上的 NVIDIA 驱动程序。通常，虚拟机管理程序驱动程序版本和 VM 子驱动程序应具有相同的 vGPU 版本。但是，从 vGPU 版本 10 开始，虚拟机管理程序可以是最新版本，而虚拟机驱动程序可以是 n-1 版本。</block>
  <block id="26cc64bdcee520ffbb88646aae0c8232" category="paragraph">Citrix 虚拟机管理程序支持身份验证，授权和审核控制。身份验证由本地帐户和 Active Directory 控制。可以将用户和组分配给控制资源权限的角色。事件和日志记录除了可以远程存储在本地服务器上之外，还可以远程存储。</block>
  <block id="9b00b712af66e367cd62db50cd054d51" category="paragraph">Citrix 虚拟机管理程序支持使用 SSL 证书对流量进行加密。</block>
  <block id="2e1ac9e2c42076ddcd32d27b6cf3e5a4" category="paragraph">由于大多数配置都存储在本地 XML 数据库中，因此某些内容（例如 SMB 密码）以明文形式显示，因此您必须保护对虚拟机管理程序的访问。</block>
  <block id="21a1e68164f738b8be1dae11d5a694b3" category="section-title">数据保护</block>
  <block id="8421556e81d7372986f70933d3223e4d" category="paragraph">虚拟机可以导出为 OVA 文件，并可用于将其导入到其他虚拟机管理程序中。虚拟机也可以以原生 XVA 格式导出，并导入到任何其他 Citrix 虚拟机管理程序。对于灾难恢复，还可以使用第二个选项以及 SnapMirror 或原生 Element OS 同步或异步复制所处理的基于存储的复制。借助 NetApp ， HCI 存储还可以与 ONTAP 存储配对以进行复制。</block>
  <block id="1e4bc3ae82fe9c45fd8f836abd89ec17" category="paragraph">可通过基于存储的快照和克隆功能提供崩溃状态一致的映像备份。基于虚拟机管理程序的快照可用于提供时间点快照，也可用作配置新虚拟机的模板。</block>
  <block id="d1c59e5cbf684efb4f69f300e72a4ac9" category="doc">操作管理</block>
  <block id="787e198d8fa4e242ef62df0a63fc0f5d" category="inline-link">对 VDA 操作失败页面进行故障排除</block>
  <block id="8086a7a818fcf045c7b05845b97629ed" category="paragraph">有关 VDS 日志文件的信息，请参见<block ref="0ecc734e7dc5f9a5685babbaab9faaa5" category="inline-link-rx"></block>。</block>
  <block id="88a80237ffcd0c20f5f4d4e7f9eda875" category="inline-link">VDA 组件和权限页面</block>
  <block id="000ea3efdd5a83f774a0c189fa2dcdc3" category="paragraph">有关所需最低权限的详细信息，请参见<block ref="573c5bde2dc73c6cb4f63bbc5571c0e2" category="inline-link-rx"></block>。</block>
  <block id="81bb80b99b1ba5d80f9ba049cbd0c42f" category="inline-link">克隆虚拟机页面</block>
  <block id="91aa73f3df8edb27ce6b20c984ff5d3e" category="paragraph">如果要手动克隆服务器，请参见<block ref="837d5521d53fff809b7ef3ad6b17ecfa" category="inline-link-rx"></block>。</block>
  <block id="7d71ba8ea6767ea10d7cd61cbd787f89" category="inline-link">自动增加磁盘空间功能页面</block>
  <block id="abf872062b9eb23bdf6d671c27508d96" category="paragraph">要自动增加 VM 磁盘大小，请参见<block ref="627eb07506141f4255cfbedd7fe89646" category="inline-link-rx"></block>。</block>
  <block id="cc6d8546c611bac5ab11fa1a5948ac1d" category="inline-link">最终用户要求页面</block>
  <block id="e148ddcb2ae92c77834ae7f48df04786" category="paragraph">要确定用于手动配置客户端的网关地址，请参见<block ref="3a5e891ac91af8fef1ca1458249fe76e" category="inline-link-rx"></block>。</block>
  <block id="efb9afc2e01262d41bf1fa60ddc36414" category="paragraph">NetApp Cloud Insights 是一款基于 Web 的监控工具，可让您全面了解在 NetApp 和其他第三方基础架构组件上运行的基础架构和应用程序。Cloud Insights 支持私有云和公有云来监控，故障排除和优化资源。</block>
  <block id="4894eb73d4d2ad7eaebb0968e871cb70" category="paragraph">只有采集单元 VM （可以是 Windows 或 Linux ）必须安装在私有云上，才能从数据收集器收集指标，而无需代理。通过基于代理的数据收集器，您可以从 Windows 性能监控器或 Telegraf 支持的任何输入代理中提取自定义指标。</block>
  <block id="32e49e2645f559763ede8e346bbcb816" category="paragraph">下图显示了 Cloud Insights VDS 信息板。</block>
  <block id="cb9ecf4f0010c9ec12b73a00e06a9237" category="paragraph"><block ref="cb9ecf4f0010c9ec12b73a00e06a9237" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3bd1406c323c740b5b2f2a7615ad62ca" category="paragraph">有关 NetApp Cloud Insights 的详细信息，请参见<block ref="5fdb6e8524eb99916602753c65f2f24e" category="inline-link-rx"></block>。</block>
  <block id="8a883bd6e43add9d94d923704bc177a7" category="inline-link-macro">接下来：工具和日志</block>
  <block id="28f1e69837c0c21f4dcb8260d6ab5e97" category="paragraph"><block ref="28f1e69837c0c21f4dcb8260d6ab5e97" category="inline-link-macro-rx"></block></block>
  <block id="b1ddba924db1a2d8e49d71fd109e98f8" category="summary">Citrix 控制层由应用程序分层，交付控制器，数据库，控制器，许可， 配置服务， Studio 和 Workspace Environment Management 。</block>
  <block id="edc82f98ad780e546b97d593d1442890" category="doc">控制层</block>
  <block id="370087408c6dd0077f640ef4289b7daf" category="section-title">应用程序分层</block>
  <block id="dfccfb12ddb667d49ba5acb41cb3fb2f" category="paragraph">分层是一种用于分隔操作系统，应用程序以及用户设置和数据的技术，每个设置和数据都托管在各自的虚拟磁盘或一组虚拟磁盘上。然后，这些组件将与操作系统合并，就好像它们都位于同一个计算机映像上一样。用户无需任何额外培训即可继续工作。通过各个层，可以轻松分配，修补和更新。一个层只是该层所特有的文件系统和注册表条目的容器。</block>
  <block id="9368df30080b689a8a35ac1d897392ce" category="paragraph">您可以通过 Citrix 应用程序分层管理 Citrix 虚拟应用程序和桌面以及 VMware Horizon 环境的主映像。应用程序分层还允许您按需为用户配置应用程序；这些应用程序会在登录时附加。用户个性化层允许用户安装自定义应用程序并将数据存储在其专用层上。因此，即使使用共享桌面型号，您也可以获得个人桌面体验。</block>
  <block id="ae875b6baf65cd4a23d7936e39dbe95e" category="paragraph">Citrix 应用程序分层可创建合并的层来创建主映像，不会对性能造成任何额外影响。使用弹性层时，用户登录时间会增加。</block>
  <block id="978f9715748ff5a7db81dce39711022b" category="paragraph"><block ref="978f9715748ff5a7db81dce39711022b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c57c251c3ce299474d8e47c0850855b8" category="paragraph">Citrix 应用程序分层功能使用一个虚拟设备来管理各个层，并通过将映像和应用程序交付到另一个平台来实现。必须从支持 Microsoft Silverlight4.0 的 Web 浏览器访问 Citrix Enterprise Layer Manager （ ELM ）门户。如果无法满足本地管理接口要求，还可以使用基于云的管理门户。</block>
  <block id="290771b7be2bd749436cfd7c813974cf" category="paragraph">初始配置包括创建两种类型的平台连接器；第一种是用于创建层的平台连接器，另一种是用于映像发布的平台连接器。</block>
  <block id="29264d6ba71480b13f860556bd919ec8" category="paragraph"><block ref="29264d6ba71480b13f860556bd919ec8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0075b214bf9dc9094ad88478b2e06697" category="paragraph">层存储库是使用存储弹性层的 ELM 配置的 SMB 文件共享。层工作磁盘是存储由 ELM 创建的所有层的位置。该磁盘将连接到设备，并用作块设备，在该设备上使用本地 Linux 文件系统。层工作磁盘用作将层映像放在一起的暂存区。创建主映像后，该映像将推送到配置平台。</block>
  <block id="61e522abadd2abf551f7d51f259d8d3d" category="paragraph"><block ref="61e522abadd2abf551f7d51f259d8d3d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ea398557f7440b14c1c9aa6c087b2ef3" category="inline-link">Citrix 层优先级实用程序页面</block>
  <block id="e5f4ca002967fe69eae85d68a98c69c7" category="paragraph">如果多个层上存在通用文件或共享文件，则默认情况下优先级较高的层 ID 优先。每当创建新层时，层 ID 都会递增。如果要控制层优先级，请使用上的支持实用程序 <block ref="bcd2ad6b254e270bf5b04108b798ed07" category="inline-link-rx"></block>。</block>
  <block id="c972e40974026926d2f137afa975686d" category="paragraph">此外， Elm 还支持身份验证和基于角色的访问控制，并与 Active Directory 和 LDAP 集成。</block>
  <block id="6a8d37f46d4d7654dd2fedcfe7838726" category="section-title">交付控制器</block>
  <block id="5218d545a83eb2581401cdd9b32cb889" category="paragraph">交付控制器负责用户访问，代理和优化连接。此外，它还提供了计算机创建服务（ MCS ），用于有效地配置虚拟机。每个站点至少需要一个交付控制器，通常会添加更多控制器以实现冗余和可扩展性。</block>
  <block id="54d47e6fafce9a2d474c4805246ddda9" category="paragraph">虚拟桌面代理（ Virtual Desktop Agent ， VDA ）必须向交付控制器注册，才能供用户使用。在 VDA 部署期间，可以根据 Active Directory OU 通过 GPO 手动提供初始注册选项。也可以使用 MCS 来处理此过程。</block>
  <block id="8eadb920df3b213807465885f6729d73" category="paragraph">如果控制器与数据库服务器的连接断开，则传输控制器会保留本地主机缓存。</block>
  <block id="e307db07b3975fef922a80d07455ee5e" category="section-title">数据库</block>
  <block id="cd41e0057e9cfb694314c9e9f3603cbe" category="paragraph">SQL Server 数据库用于站点配置数据，日志记录和监控。每个站点应至少有一个数据库。要提供高可用性，请使用 AlwaysOn 可用性组，数据库镜像或 SQL 集群等 Microsoft SQL Server 功能。至少应考虑对 SQL VM 使用虚拟机管理程序高可用性功能。</block>
  <block id="c9ea7f275678ba9f1e88dd76fc72e4b7" category="paragraph">即使控制器具有本地主机缓存，它也不会影响任何现有连接。但是，对于新连接， NetApp 建议使用数据库连接。</block>
  <block id="7c5ba892645af8d7dba520e3978c726f" category="section-title">总监</block>
  <block id="7d13df50b2ca2c137925a9d1f57c06c7" category="paragraph">Citrix Director 可为 Citrix 虚拟应用程序和桌面提供监控解决方案。帮助台用户可以搜索特定的用户会话，并获取完整的故障排除信息。在 Citrix 虚拟机管理程序上托管 Citrix 虚拟应用程序和桌面资源时，帮助台用户可以选择从 Director 门户启动控制台会话。</block>
  <block id="5d0b7ceb6aa59e1c220e79114fbad70c" category="paragraph"><block ref="5d0b7ceb6aa59e1c220e79114fbad70c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9eb86e7da7590313e94734d7e353df3e" category="paragraph">Citrix 许可证服务器负责管理所有 Citrix 许可证的存储库，以便应用程序可以轻松地使用许可证。许可证服务器提供了一个用于高级故障排除的管理门户。对于常规操作，也可以使用 Citrix Studio 。</block>
  <block id="2273bdea6e1e28f91cf111f30c198db8" category="section-title">配置服务</block>
  <block id="aa2cebd0146b82c9104af442e7a86ff5" category="paragraph">通过配置服务，即使是裸机工作站，也可以使用 PXE 启动来配置桌面映像。此外，还可以使用基于 ISO 或 CD-ROM 的启动选项来支持 PXE 启动不允许更改网络的环境。下图提供了我们在实验室中使用的 DHCP 服务器选项。cp.HCIEUC.Demo 和 PVS.HCIEUC.Demo 是指向两个配置服务器的负载平衡器虚拟 IP 。如果选项 011 和 017 可用，则会忽略选项 066 和 067 。</block>
  <block id="1eadcf93d8ae4ba16b36363b30926f38" category="paragraph"><block ref="1eadcf93d8ae4ba16b36363b30926f38" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4af914e61a8c910ac0139fbb62246b65" category="paragraph">根据 Citrix 配置创建计算机目录的高级操作如下：</block>
  <block id="939809f1fe2fdefb2354dac356b8321b" category="list-text">在模板 VM 上，安装目标代理，然后再安装 VDA 。</block>
  <block id="12676ab3c6472b78f1b7fe443a8a46ca" category="list-text">分配一个额外的磁盘以进行缓存，并使用 MBR 对其进行格式化。此步骤为可选步骤。至少验证 PVS 存储是否具有写入缓存路径。</block>
  <block id="9c2d21169ba76183ba2429fdb9e35cac" category="list-text">启动目标映像向导并回答其问题。出现提示时，请务必提供一个 Citrix 配置服务器。</block>
  <block id="03a3a0b4261aad99517d55a11d2edabd" category="list-text">此设备将使用 PXE 或 ISO 启动。" 映像 " 向导将继续捕获映像。</block>
  <block id="05f41f4b61d8573eed0cc91254e05524" category="list-text">选择已创建的 vDisk ，然后右键单击以选择负载平衡并启用它。</block>
  <block id="e50cda013f1885b98d87075965795298" category="list-text">对于 vDisk Properties ，将访问模式更改为 Standard ，并将 Cache Type 更改为 Cache in Device RAM with Overflow on Hard Disk 。</block>
  <block id="6cb4ddb2b964bdb88eef20afc130ff1e" category="list-text">右键单击站点以选择 "Create Virtual Desktops Setup Wizard" 并回答问题。</block>
  <block id="8bc227feedf418b389cbfd7906db2123" category="section-title">工作室</block>
  <block id="506aedee2aeeec619497ca00df7298ba" category="paragraph">Citrix Studio 是 Citrix 虚拟应用程序和桌面使用的中央管理控制台。计算机目录，交付组，应用程序，策略以及资源托管，许可证，区域，角色和范围的配置由 Citrix Studio 进行管理。Citrix Studio 还提供了 PowerShell 管理单元来管理 Citrix 虚拟应用程序和桌面。</block>
  <block id="06a45722fbab217a24c218c4955f8be7" category="section-title">工作空间环境管理</block>
  <block id="84b4b1eb24cf81f030f939f640699b34" category="paragraph">工作空间环境管理（ WEM ）提供智能资源管理和配置文件管理技术，可在纯软件的无驱动程序解决方案中为 Citrix 虚拟应用程序和桌面提供最佳性能，桌面登录和应用程序响应时间。</block>
  <block id="1c0dd256a5d14abcb6fbed2989d14795" category="paragraph">WEM 需要使用 SQL 数据库来存储配置信息。为了为基础架构服务提供高可用性，负载平衡器虚拟服务器连接会使用多个实例。下图显示了 WEM 架构。</block>
  <block id="64126bc16c1ec3bef449e37664fb4210" category="paragraph"><block ref="64126bc16c1ec3bef449e37664fb4210" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f47583fdeebea812c4396cb5f5943689" category="paragraph">下图显示了 WEM 控制台。</block>
  <block id="1855ba9647e354672a8a215be8f7c4d9" category="paragraph"><block ref="1855ba9647e354672a8a215be8f7c4d9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="631dde484886ee34c51aa61854486b5c" category="paragraph">WEM 的主要功能如下：</block>
  <block id="e53773f25c85a34a5c78162460adb958" category="list-text">能够控制某些任务或应用程序的资源</block>
  <block id="d58eba54289b835f1750c692a5a2fc57" category="list-text">一个用于管理 Windows 图标，网络驱动器，开始菜单项等的简单界面</block>
  <block id="9e9d0d30822d104401aed5e4d9205484" category="list-text">能够重复使用旧计算机并将其作为瘦客户端进行管理</block>
  <block id="01ab8fe0565c01eb93456b579d969d66" category="list-text">基于角色的访问控制</block>
  <block id="6344a4c74735c010473a7461c6392e01" category="list-text">基于各种筛选器的控制策略</block>
  <block id="48a2bc9c10adbea95074594015793272" category="summary">工作空间由一个桌面环境组成，该环境可以是在内部或任何支持云环境上托管的共享远程桌面会话。借助 Microsoft Azure ，桌面环境可以在 Windows Virtual Desktop 中持久存在。每个工作空间都与特定组织或客户端相关联。</block>
  <block id="1da2374b50f497e208c8dab11e6b2c98" category="doc">工作空间管理</block>
  <block id="fb67e63246489555a7e8929a138ced4c" category="paragraph">工作空间由桌面环境组成；可以是在内部或任何受支持的云环境上托管的共享远程桌面会话。借助 Microsoft Azure ，桌面环境可以在 Windows Virtual Desktop 中持久存在。每个工作空间都与特定组织或客户端相关联。下图显示了创建新工作空间时可用的选项。</block>
  <block id="42a6c6312ce8b92836d9e74d89998e89" category="paragraph"><block ref="42a6c6312ce8b92836d9e74d89998e89" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2d49083c2604eac2881e01b4acea428e" category="admonition">每个工作空间都与特定部署相关联。</block>
  <block id="2a1fdca12b05c0f5292a8670b24cb478" category="paragraph">工作空间包含关联的应用程序和应用程序服务，共享数据文件夹，服务器和 WVD 实例。每个工作空间都可以控制各种安全选项，例如强制实施密码复杂性，多因素身份验证，文件审核等。</block>
  <block id="f29490b04a344e19674ee8d1db337d14" category="paragraph">工作空间可以控制工作负载计划以启动额外的服务器，限制每个服务器的用户数或为给定时间段内可用的资源设置计划（始终打开 / 关闭）。还可以配置资源以按需启动。</block>
  <block id="421b47ffd946ca083b65cd668c6b17e6" category="inline-link">视频</block>
  <block id="5a70681d968007936b9d092ba1a93313" category="paragraph">如果需要，此工作空间可以覆盖部署 VM 资源的默认值。对于 WVD ，也可以从云工作空间管理套件门户管理 WVD 主机池（其中包含会话主机和应用程序组）和 WVD 工作空间。有关 WVD 主机池的详细信息，请参见此部分<block ref="283c24f69dac0d05b60b041138870b19" category="inline-link-rx"></block>。</block>
  <block id="ff13351bb4dc0c877064ec1672d6723f" category="inline-link-macro">下一步：应用程序管理</block>
  <block id="bb974af58c318849f0fce8f7c3ecdf37" category="paragraph"><block ref="bb974af58c318849f0fce8f7c3ecdf37" category="inline-link-macro-rx"></block></block>
  <block id="7d37fde7375502ef1013412159477502" category="summary">NetApp 提供许多云服务，包括使用 WVD 或远程应用程序快速配置虚拟桌面，包括与 Azure NetApp Files 快速集成。</block>
  <block id="28850fd0c108cc5f990fc4b4b52ab60d" category="doc">NetApp 虚拟桌面服务概述</block>
  <block id="c70675dc3857ae45ab2475f60c0f1f85" category="paragraph">NetApp 提供许多云服务，包括使用 WVD 或远程应用程序快速配置虚拟桌面以及与 Azure NetApp Files 快速集成。</block>
  <block id="8b32dee3fc7d9223248420cb828c5527" category="paragraph">传统上，为客户配置和交付远程桌面服务需要数周时间。除了配置之外，管理应用程序，用户配置文件，共享数据和组策略对象以强制实施策略可能会很困难。防火墙规则可能会增加复杂性，并需要单独的技能和工具。</block>
  <block id="0276a1f5f692f2e9635f3733b371cf70" category="paragraph">借助 Microsoft Azure Windows 虚拟桌面服务， Microsoft 负责维护远程桌面服务组件，使客户能够专注于在云中配置工作空间。客户必须配置和管理整个堆栈，这需要具备管理 VDI 环境的特殊技能。</block>
  <block id="51db16f7b26a08952beb43836ad3f31d" category="paragraph">借助 NetApp VDS ，客户可以快速部署虚拟桌面，而无需担心在何处安装架构组件，例如代理，网关，代理等。需要完全控制其环境的客户可以与专业服务团队合作来实现其目标。客户使用 VDS 即服务，因此可以专注于关键业务挑战。</block>
  <block id="139562ef7df2deed82d586ebe297a082" category="paragraph">NetApp VDS 是一款软件即服务产品，用于集中管理 AWS ， Azure ， GCP 或私有云环境中的多个部署。Microsoft Windows 虚拟桌面仅在 Microsoft Azure 上可用。NetApp VDS 可在其他环境中编排 Microsoft 远程桌面服务。</block>
  <block id="fd9a0083b0a0e084ce6fb8d2ca64272f" category="paragraph">Microsoft 在 Windows 10 上提供多会话功能，专用于 Azure 上的 Windows 虚拟桌面环境。身份验证和身份由虚拟桌面技术处理； WVD 要求将 Azure Active Directory （使用 AD Connect ）同步到 Active Directory ，并将会话 VM 加入 Active Directory 。RDS 需要使用 Active Directory 进行用户身份和身份验证以及 VM 域加入和管理。</block>
  <block id="416feb9f77def2ffedaab40a538d47e5" category="paragraph">下图显示了一个部署拓扑示例。</block>
  <block id="e377917f3505cdb9fc72b74164df5928" category="paragraph"><block ref="e377917f3505cdb9fc72b74164df5928" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d271ca257d56879fcc9ed95d82aabaa7" category="paragraph">每个部署都与一个 Active Directory 域关联，并为客户端提供一个访问工作空间和应用程序的入口点。具有多个 Active Directory 域的服务提供商或企业通常部署更多。一个跨多个区域的 Active Directory 域通常具有一个包含多个站点的部署。</block>
  <block id="9ea3c4f34057d91531ae286e3efe62c3" category="paragraph">对于 Azure 中的 WVD ， Microsoft 提供了一种由 NetApp VDS 使用的平台即服务。对于其他环境， NetApp VDS 会协调 Microsoft 远程桌面服务的部署和配置。NetApp VDS 既支持 WVD Classic ，也支持 WVD arm ，并且还可用于升级现有版本。</block>
  <block id="3e8cd47ad0ab71d0b3891f85212ccdbc" category="paragraph">每个部署都有自己的平台服务，其中包括 Cloud Workspace Manager （ REST API 端点）， HTML 5 网关（从 VDS 管理门户连接到 VM ）， RDS 网关（客户端访问点）和域控制器。下图展示了用于 RDS 实施的 VDS 控制平台架构。</block>
  <block id="38606818aeffd06d174e51013afc23a1" category="paragraph"><block ref="38606818aeffd06d174e51013afc23a1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e58cad6a2c8c8ff1a585bf8d6ca94560" category="paragraph">对于 RDS 实施，可以使用客户端软件从 Windows 和浏览器轻松访问 NetApp VDS ，该软件可以进行自定义以包含客户标识和映像。根据用户凭据，用户可以访问已批准的工作空间和应用程序。无需配置网关详细信息。</block>
  <block id="c2dcf4d443be38a737d1e580fb4b86ec" category="paragraph">下图显示了 NetApp VDS 客户端。</block>
  <block id="8e7d56f1d99fdc8080a747bf8b1eda75" category="paragraph"><block ref="8e7d56f1d99fdc8080a747bf8b1eda75" category="inline-image-macro-rx" type="image"></block></block>
  <block id="71110c8ffc8b198bc951f6e587fbcddf" category="paragraph">在 Azure WVD 实施中， Microsoft 负责处理客户端的访问入口点，并可供各种操作系统本机使用的 Microsoft WVD 客户端使用。也可以从基于 Web 的门户访问它。客户端软件的配置必须由组策略对象（ GPO ）或客户首选的其他方式处理。</block>
  <block id="9e4318c1c6ae62544ba67e7c0fe55649" category="paragraph">下图展示了适用于 Azure WVD 实施的 VDS 控制平面架构。</block>
  <block id="ba9e4c82a95db68279bffa8ca8a8803f" category="paragraph"><block ref="ba9e4c82a95db68279bffa8ca8a8803f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1d648a5d4acf66674fb86cc7be05bd5e" category="paragraph">除了部署和配置所需组件之外， NetApp VDS 还负责处理用户管理，应用程序管理，资源扩展和优化。</block>
  <block id="3ea30729e0e7f0d666400ccc1a6f7bc3" category="paragraph">NetApp VDS 可以创建用户或授予现有用户帐户对云工作空间或应用程序服务的访问权限。该门户还可用于重置密码和委派管理部分组件。帮助台管理员或 3 级技术人员可以对用户会话进行影子管理，以便进行故障排除或从门户中连接到服务器。</block>
  <block id="061d5215d4dd8b8e2b7d9f2498a4a8c3" category="paragraph">NetApp VDS 可以使用您创建的映像模板，也可以使用市场上现有的映像模板进行基于云的配置。要减少要管理的映像数量，您可以使用基础映像，并且可以使用提供的框架配置所需的任何其他应用程序，以包括任何命令行工具，例如 chocolatey ， MSIX 应用程序连接， PowerShell 等。即使自定义脚本也可以用作计算机生命周期事件的一部分。</block>
  <block id="91d75bd7e517ef4b563021e6d23d8cb9" category="inline-link-macro">接下来： NetApp HCI 概述</block>
  <block id="3806ab54895f78b6c34b626314f84e6e" category="paragraph"><block ref="3806ab54895f78b6c34b626314f84e6e" category="inline-link-macro-rx"></block></block>
  <block id="2cdacde3c74a59c779ff64324954b86f" category="summary">NetApp 虚拟桌面服务（ Virtual Desktop Service ， VDS ）可在主要公有云以及私有云中编排远程桌面服务（ Remote Desktop Services ， RDS ）。VDS 在 Microsoft Azure 上支持 Windows 虚拟桌面（ WVD ）。VDS 可自动执行许多在部署 WVD 或 RDS 后必须执行的任务，包括设置 SMB 文件共享（用于用户配置文件，共享数据和用户主驱动器），启用 Windows 功能，安装应用程序和代理，防火墙和策略等。</block>
  <block id="acb7add6e3cf0ca01c52e60466c321ca" category="doc">TR-4861 ：《采用虚拟桌面服务的混合云 VDI 》</block>
  <block id="bb6a5b934db24610665e58e743983ae4" category="paragraph">对于专用桌面，共享桌面和远程应用程序，用户会使用 VDS 。VDS 提供了脚本化事件，用于自动管理桌面的应用程序，并减少了要管理的映像数量。</block>
  <block id="38e3c8e108e8e361d0712cdfe23e0b38" category="paragraph">VDS 提供了一个管理门户，用于在公有和私有云环境中处理部署。</block>
  <block id="07d07e20c1ad9bd1a3e99e2303879ff9" category="paragraph">2020 年远程员工人数激增，改变了对业务连续性的要求。IT 部门在快速配置虚拟桌面方面面临着新的挑战，因此需要配置灵活性，远程管理以及混合云的 TCO 优势，以便于轻松配置内部和云资源。他们需要混合云解决方案：</block>
  <block id="44ff202cbab5f506b48c6021b19c4b1c" category="list-text">解决了 COVID 后的工作空间现实，支持具有全局动态的灵活工作模式</block>
  <block id="53f994926861d0a62f2893b66d8b2025" category="list-text">通过简化和加快从任务员工到高级用户的所有员工的工作环境部署，实现工作转型</block>
  <block id="831955bd9eabf6724f4e4b01acbb833c" category="list-text">通过提供丰富，安全的 VDI 资源来调动您的员工，而无论其位于何处</block>
  <block id="ab02aa4712e65c237e92874eeef51ecd" category="list-text">简化混合云部署</block>
  <block id="074890ea8810b95d9b381027ff9baef2" category="list-text">自动化并简化风险降低管理</block>
  <block id="60e1de201d0c183e889577e990975f1a" category="paragraph"><block ref="60e1de201d0c183e889577e990975f1a" category="inline-link-macro-rx"></block></block>
  <block id="49fc376ed35249f3841846ede4dab884" category="inline-link">NetApp Cloud Central</block>
  <block id="6f3114f4f09ada82130e4e7e0439aa7f" category="list-text"><block ref="6f3114f4f09ada82130e4e7e0439aa7f" category="inline-link-rx"></block></block>
  <block id="0d7fb659d21bcc03f83752c0a662b7f9" category="inline-link">适用于 Linux 的 NetApp Element 软件配置</block>
  <block id="99657147b611d06cb48aab52c083ab5f" category="list-text"><block ref="99657147b611d06cb48aab52c083ab5f" category="inline-link-rx"></block></block>
  <block id="dd2329175fd7ed3d5b35acd3a5990007" category="list-text"><block ref="dd2329175fd7ed3d5b35acd3a5990007" category="inline-link-rx"></block></block>
  <block id="861eb192d0304b675b6f26d2006a54bf" category="inline-link">Citrix 安全建议</block>
  <block id="461fa37811c65f3baee03e22ba4d1451" category="list-text"><block ref="461fa37811c65f3baee03e22ba4d1451" category="inline-link-rx"></block></block>
  <block id="8dc475da10f0311d3a77de4f6cca4ce4" category="inline-link">Citrix Monitoring in Healthcare Environment with Goldiath</block>
  <block id="0df710069f62750073ef06994059ae41" category="list-text"><block ref="0df710069f62750073ef06994059ae41" category="inline-link-rx"></block></block>
  <block id="dd3e8311b1788590de8e2bf42fa298f7" category="inline-link">Citrix 用户配置文件和 FSLogix 集成</block>
  <block id="726fd29c9e7af54043ecc3475fc165b3" category="list-text"><block ref="726fd29c9e7af54043ecc3475fc165b3" category="inline-link-rx"></block></block>
  <block id="38020a025717548e2da5db4169a7c981" category="inline-link">Citrix 应用程序分层登录 VSI 测试结果</block>
  <block id="4b5eb2e2613e869e8210157b69134e63" category="list-text"><block ref="4b5eb2e2613e869e8210157b69134e63" category="inline-link-rx"></block></block>
  <block id="f45062b794fedf0d3bd07b9f71d8500f" category="inline-link">Citrix 应用程序分层常见问题解答</block>
  <block id="ce94f53739cdcf1c847318644844ffd0" category="list-text"><block ref="ce94f53739cdcf1c847318644844ffd0" category="inline-link-rx"></block></block>
  <block id="450ce422534551236138bc585672dc06" category="inline-link">Citrix 应用程序分层参考架构</block>
  <block id="a9cc7d875edaf6771b8bc5b1d48265da" category="list-text"><block ref="a9cc7d875edaf6771b8bc5b1d48265da" category="inline-link-rx"></block></block>
  <block id="e6dd4bdb840db7a16008411d6e559077" category="inline-link">Citrix 应用程序分层</block>
  <block id="1a3f6182c3433b8d9a1c8af0796cc789" category="list-text"><block ref="1a3f6182c3433b8d9a1c8af0796cc789" category="inline-link-rx"></block></block>
  <block id="188132a8343dbad861b6b51873be0dc5" category="inline-link">多会话回写到 FSLogix 配置文件容器</block>
  <block id="f06b6bede1bfa21f507fed2a2805c45c" category="list-text"><block ref="f06b6bede1bfa21f507fed2a2805c45c" category="inline-link-rx"></block></block>
  <block id="e84b20dbed596b269d57fef55a5341d0" category="inline-link">Citrix XAPI 备份</block>
  <block id="2ecf02216e3f5f6ee6e83322bda75cf6" category="list-text"><block ref="2ecf02216e3f5f6ee6e83322bda75cf6" category="inline-link-rx"></block></block>
  <block id="b1c770f25b823d4453567c0ff9d7cf67" category="summary">此页面提供了在 VMware vSphere 环境中部署 NetApp ONTAP NFS 版本 3 数据存储库的步骤。</block>
  <block id="168dbfe414d4d4089585360152953a57" category="doc">vSphere NFS 数据存储库—使用 ONTAP 的版本 3</block>
  <block id="bbe48fb854ea022537208eeeff822f91" category="section-title">关于此任务</block>
  <block id="2be27a78c84ba5629cd9f2c22983240a" category="paragraph">使用 ONTAP NAS 存储创建 NFS 版本 3 数据存储库。</block>
  <block id="1563a554e82b055714efd37bc6d1fdd6" category="paragraph">对于自动配置，请使用以下脚本之一： <block ref="a45ba722ee80832fb205d0588df91e01" category="inline-xref-macro-rx"></block>， <block ref="d9559d06f0afa5b213d78afb48b783e7" category="inline-xref-macro-rx"></block>或 <block ref="e5e7d2f44064f3bfeddfdbea251f7835" category="inline-xref-macro-rx"></block>。</block>
  <block id="6ac65708de8f04eeb173ca99f3eb19fa" category="section-title">您需要的内容</block>
  <block id="106a118b8a267220cb2c40a4bb68b684" category="list-text">管理 vSphere 环境和 ONTAP 所需的基本技能。</block>
  <block id="00c46d0ea9cdf9a5a37b8af04896741f" category="list-text">运行 ONTAP 9.8 或更高版本的 ONTAP 存储系统（ FAS/AFF/CVO/ONTAP Select/Cloud Volume Service/Azure NetApp Files ）</block>
  <block id="d5ba6255ccf331629f7b1b4598223d33" category="list-text">ONTAP 凭据（ SVM 名称，用户 ID ，密码）</block>
  <block id="190ba592a6988abfd7566be9b5c8217a" category="list-text">NFS 的 ONTAP 网络端口， SVM 和 LUN 信息</block>
  <block id="d5cb637f6500cfa77d4190ebdfd8cce0" category="inline-link-macro">完整的 NFS 配置工作表</block>
  <block id="915142cb27ebec8265b54739a95840b5" category="list-text"><block ref="915142cb27ebec8265b54739a95840b5" category="inline-link-macro-rx"></block></block>
  <block id="24c066a87410cc7b08ad4b5ca45565d7" category="list-text">vCenter Server 凭据</block>
  <block id="a9ab6317871b5547fc7bf0dd22151f00" category="list-text">vSphere 7.0 或更高版本的 vSphere 主机信息</block>
  <block id="d7850596008b347e3797ad7dcb7252e5" category="list-text">NFS VMKernel 适配器 IP 信息</block>
  <block id="9068992a529de63b07b7c2250be12f87" category="list-text">网络交换机</block>
  <block id="0675fa9a38b420775f29ec7a62d9a8a0" category="list-text">使用 ONTAP 系统网络数据端口并连接 vSphere 主机</block>
  <block id="a7fb6a7233e9c40554334921be362af1" category="list-text">为 NFS 配置的 VLAN</block>
  <block id="44786c36009327ad04469602f3f96832" category="list-text">（可选）为 ONTAP 网络数据端口配置的链路聚合</block>
  <block id="503023bddb3bd1c7803b35b4ace6aa7a" category="list-text">适用于 VMware vSphere 的 ONTAP 工具已部署，配置并可随时使用</block>
  <block id="f3a29486bed19a90f2da6d007818b427" category="section-title">步骤</block>
  <block id="c9dd6bad4c7d561872f2e2d498a990bf" category="inline-link">互操作性表工具（ IMT ）</block>
  <block id="4b18348d39655902cd0e183596a82856" category="list-text">检查与的兼容性<block ref="3028580b30f2b1d483aad9f9a7a65c7a" category="inline-link-rx"></block></block>
  <block id="bc295a5edde99316e021476fd74118c6" category="inline-link-macro">验证是否支持 NFS 配置。</block>
  <block id="564210524eadeca61542a5680bf0afca" category="list-text"><block ref="564210524eadeca61542a5680bf0afca" category="inline-link-macro-rx"></block></block>
  <block id="e103d9cdc55ef0be25a4fd8054bc28bc" category="list-text">完成以下 ONTAP 和 vSphere 任务。</block>
  <block id="cfa5eceb5ac37d5ebd3af6f265d9ce4c" category="section-title">ONTAP 任务</block>
  <block id="c54d1c547e26987b98af73634278c77a" category="inline-link-macro">验证 NFS 的 ONTAP 许可证。</block>
  <block id="8174503ab9e5dc2fe2f74068f651770d" category="list-text"><block ref="8174503ab9e5dc2fe2f74068f651770d" category="inline-link-macro-rx"></block></block>
  <block id="5d3f3e14f3096740cb085fa81836d595" category="list-text">使用 `ssystem license show` 命令检查是否已列出 NFS 。</block>
  <block id="8b3434ec0db76b4d537ae9c645aa913c" category="list-text">使用 `license add -license-code &lt; 许可证代码 &gt;` 添加许可证。</block>
  <block id="135850bb72d05ca77b8b8f846429fe71" category="inline-link-macro">按照 NFS 配置工作流进行操作。</block>
  <block id="01a85c06aae02abe9083e7e02d90661f" category="list-text"><block ref="01a85c06aae02abe9083e7e02d90661f" category="inline-link-macro-rx"></block></block>
  <block id="722a3f8fc9c281f41b6ca7a69ca15ec0" category="section-title">VMware vSphere 任务</block>
  <block id="2281b9d958567868b171298a8df5cdee" category="inline-link-macro">按照适用于 vSphere 的 NFS 客户端配置工作流进行操作。</block>
  <block id="c80c5160cfe2127b3ab167103b20488c" category="paragraph"><block ref="c80c5160cfe2127b3ab167103b20488c" category="inline-link-macro-rx"></block></block>
  <block id="63d5049791d9d79d86e9a108b0a999ca" category="section-title">参考</block>
  <block id="f2a693e1f056b96566c4551fcab418f2" category="paragraph">通过 vSphere ，客户可以使用企业级 NFS 阵列为 ESXi 集群中的所有节点提供对数据存储库的并发访问。如数据存储库一节所述，在将 NFS 与 vSphere 结合使用时，可以获得一些易用性和存储效率可见性优势。</block>
  <block id="743fa5a7bc7d4ba215b096e34779d298" category="paragraph">将 ONTAP NFS 与 vSphere 结合使用时，建议采用以下最佳实践：</block>
  <block id="265e673c00294cf97a90c3b0d4fcb076" category="list-text">为 ONTAP 集群中每个节点上的每个 SVM 使用一个逻辑接口（ LIF ）。不再需要以往为每个数据存储库建议的 LIF 。虽然直接访问（ LIF 和同一节点上的数据存储库）是最佳选择，但不要担心间接访问，因为通常对性能的影响极小（微秒）。</block>
  <block id="83deede0d0158f0f2469080b6208e88a" category="list-text">自 VMware Infrastructure 3 以来， VMware 一直支持 NFSv3 。vSphere 6.0 增加了对 NFSv4.1 的支持，该支持可实现 Kerberos 安全性等一些高级功能。如果 NFSv3 使用客户端锁定，则 NFSv4.1 使用服务器端锁定。虽然 ONTAP 卷可以通过这两种协议导出，但 ESXi 只能通过一种协议挂载。此单协议挂载并不会阻止其他 ESXi 主机通过不同版本挂载同一数据存储库。请务必指定挂载时要使用的协议版本，以便所有主机都使用相同的版本，从而使用相同的锁定模式。请勿在主机之间混用 NFS 版本。如果可能，请使用主机配置文件检查合规性。</block>
  <block id="ae4c5baa79e370d8f601cc7082f8123e" category="list-text">由于 NFSv3 和 NFSv4.1 之间不会自动转换数据存储库，因此请创建一个新的 NFSv4.1 数据存储库，并使用 Storage vMotion 将 VM 迁移到新数据存储库。</block>
  <block id="a9577e779ab70bdd45392b1e0125cc77" category="list-text">在编写本报告时， NetApp 将继续与 VMware 合作，以解决 NFSv4.1 数据存储库和存储故障转移的问题。我们预计很快会解决这些问题。</block>
  <block id="04826f858f8ad9c66b9d805ca9ff88a3" category="list-text">NFS 导出策略用于控制 vSphere 主机的访问。您可以对多个卷（数据存储库）使用一个策略。对于 NFSv3 ， ESXi 使用 sys （ UNIX ）安全模式，并需要根挂载选项来执行 VM 。在 ONTAP 中，此选项称为超级用户，使用超级用户选项时，无需指定匿名用户 ID 。请注意，对于 ` -anon` 和 ` -allow-suid` ，具有不同值的导出策略规则可能会导致 ONTAP SVM 在使用发生原因工具时出现问题。下面是一个策略示例：</block>
  <block id="822366735aef72f1a9429ac86dda7338" category="list-text">访问协议： nfs3.</block>
  <block id="69abbd5c7cd9c1b3828b9aa5a894ff47" category="list-text">客户端匹配规范： 192.168.42.21</block>
  <block id="bd6cc42f9cd65cca72cbd56d2f4bf43d" category="list-text">RO 访问规则： sys</block>
  <block id="581c470a5099548fc9865a4bab8761f8" category="list-text">RW 访问规则： sys</block>
  <block id="0fd74b9f6a61e12b4a204b3489bd05a9" category="list-text">匿名 UID ：</block>
  <block id="59d5d8c898df18115bd4ced36c6bc0de" category="list-text">超级用户： sys</block>
  <block id="c184ce6b86d2e6fbf8681d61637c101b" category="list-text">如果使用适用于 VMware VAAI 的 NetApp NFS 插件，则在创建或修改导出策略规则时，应将协议设置为 `NFS` 。要使 VAAI 副本卸载正常工作，需要使用 NFSv4 协议，将此协议指定为 `NFS` 会自动包括 NFSv3 和 NFSv4 版本。</block>
  <block id="44e8816851b6d24723bf0e06c3b8b40d" category="list-text">NFS 数据存储库卷是从 SVM 的根卷接合的；因此， ESXi 也必须有权访问根卷，才能导航和挂载数据存储库卷。根卷以及嵌套了数据存储库卷接合的任何其他卷的导出策略都必须包含一个或多个规则，这些规则适用于为其授予只读访问权限的 ESXi 服务器。下面是根卷的示例策略，也是使用 VAAI 插件的：</block>
  <block id="88b77eec23ea926d7dac5b6ec36713d2" category="list-text">访问协议。NFS （包括 nfs3 和 nfs4 ）</block>
  <block id="2e5d116b123742b0c1f9b9266e3d45e4" category="list-text">客户端匹配规范192.168.42.21</block>
  <block id="e79bd23a286e2e109f901ac7b9fc1052" category="list-text">RO 访问规则。系统</block>
  <block id="6854a3cd4d70ef13145d55305c745f1c" category="list-text">RW 访问规则。从不（根卷的最佳安全性）</block>
  <block id="629cac79e5ae376b5235b5cb87c8c03d" category="list-text">匿名 UID 。</block>
  <block id="e76eb6f8b3ceafc6b70386efb46a8295" category="list-text">超级用户。sys （对于 VAAI 的根卷也是必需的）</block>
  <block id="4c571520a8128d1692fc709ffbfb2b1e" category="list-text">使用适用于 VMware vSphere 的 ONTAP 工具（最重要的最佳实践）：</block>
  <block id="b8d278c6184cb65727ca5ae729db92d7" category="list-text">使用适用于 VMware vSphere 的 ONTAP 工具配置数据存储库，因为它可以自动简化导出策略的管理。</block>
  <block id="55cf2206291fced620eed577cb8c8a42" category="list-text">使用此插件为 VMware 集群创建数据存储库时，请选择集群，而不是单个 ESX 服务器。选择此选项会将数据存储库自动挂载到集群中的所有主机。</block>
  <block id="e4e62770daaf9887c7868fbc8e248a4b" category="list-text">使用插件挂载功能将现有数据存储库应用于新服务器。</block>
  <block id="928562eb576ed6ae31cb1a149d3e751a" category="list-text">如果不对 VMware vSphere 使用 ONTAP 工具，请对所有服务器或需要额外访问控制的每个服务器集群使用一个导出策略。</block>
  <block id="7bccab0fa4c0864835c645c9fde7ebf6" category="list-text">虽然 ONTAP 提供了一个灵活的卷命名空间结构，可以使用接合在树中排列卷，但这种方法对于 vSphere 来说毫无价值。无论存储的命名空间层次结构如何，它都会在数据存储库的根目录下为每个 VM 创建一个目录。因此，最佳实践是，只需将 vSphere 卷的接合路径挂载到 SVM 的根卷，即适用于 VMware vSphere 的 ONTAP 工具如何配置数据存储库。如果没有嵌套的接合路径，也意味着任何卷都不依赖于根卷以外的任何卷，即使有意使某个卷脱机或销毁该卷，也不会影响指向其他卷的路径。</block>
  <block id="ea6fc1288f1d3b21238d29ff28cb867a" category="list-text">对于 NFS 数据存储库上的 NTFS 分区，块大小为 4k 是可以的。下图显示了从 vSphere 主机到 ONTAP NFS 数据存储库的连接。</block>
  <block id="16c864cb4f3b00c59e1124932e49f342" category="paragraph"><block ref="16c864cb4f3b00c59e1124932e49f342" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e54433644e830ed1503561b778e9ded4" category="paragraph">下表列出了 NFS 版本和支持的功能。</block>
  <block id="9fb9dac7513c7ef8452aade8a52ad40d" category="cell">vSphere 功能</block>
  <block id="64e3cc476958b05086721cd6070004cf" category="cell">VMotion 和 Storage vMotion</block>
  <block id="45a75e44a713fdf94dbf1dbaa0749188" category="cell">容错</block>
  <block id="f1e3446c69e4d87279ff7863482f9dcb" category="cell">DRS</block>
  <block id="6ca09f98e8925b2cb78bbf24eccc0186" category="cell">主机配置文件</block>
  <block id="ec8420797e3b089812499cce4047ded8" category="cell">存储 DRS</block>
  <block id="7c19bf1cbe62a87a42857ef0b4fe22ae" category="cell">存储 I/O 控制</block>
  <block id="56d43ad1a280ada5e16fd2960ae44b32" category="cell">SRM</block>
  <block id="d595c8f30866b71ea121ced5cde66b1d" category="cell">虚拟卷</block>
  <block id="6ad5114acf73f68a85c72f11646920cb" category="cell">硬件加速（ VAAI ）</block>
  <block id="aa32fdb70496d9a7395ef0d3ccb1c986" category="cell">是（ vSphere 6.5 及更高版本， NetApp VAAI 插件 1.1.2 ）</block>
  <block id="ad37ded9046268d8e5ea7cb253bb5dda" category="cell">Kerberos 身份验证</block>
  <block id="45701e6ef9bc09dca07f8f4abe661dc6" category="cell">是（在 vSphere 6.5 及更高版本中进行了增强，可支持 AES ， krb5i ）</block>
  <block id="76969a36155d2f41fc6cc3bd3faff244" category="cell">多路径支持</block>
  <block id="4cdf980fd6cee432c76402bb142269e9" category="cell">否（ ESXi 6.5 及更高版本支持通过会话中继； ONTAP 支持通过 pNFS ）</block>
  <block id="3f297ef15cde0668e93b35f2752fd4fd" category="section-title">下一步是什么？</block>
  <block id="883a5adf98ba177c28c5bc7d95e28763" category="paragraph">完成这些任务后， NFS 数据存储库便可用于配置虚拟机。</block>
  <block id="9bf6b8df29f265cdaf3246f6645ca922" category="inline-link"><block ref="9bf6b8df29f265cdaf3246f6645ca922" category="inline-link-rx"></block></block>
  <block id="bc0f3321a29c580fa0e3cca0c00ee7cd" category="list-text">VMware 产品文档<block ref="3bdcd80def6a1e2849d8b38049a04af9" category="inline-link-rx"></block></block>
  <block id="fa4af55c3fdbce23e96d2cf73261fa5b" category="inline-link"><block ref="fa4af55c3fdbce23e96d2cf73261fa5b" category="inline-link-rx"></block></block>
  <block id="0f185ccd88416daec4eee0a846d110b8" category="list-text">NetApp 产品文档<block ref="2e85fc867cab94d246e0bf6043b361cd" category="inline-link-rx"></block></block>
  <block id="334af7a3f788d83aa889d1ca7bd769f5" category="summary">此页面介绍 ONTAP 存储效率。</block>
  <block id="c13f924c3ceac59a16a8a1ea96d43c91" category="doc">ONTAP 存储效率</block>
  <block id="241a4f0482dfad2f5fc79419b18356c0" category="section-title">关于存储效率</block>
  <block id="185081022bfbcfda8db4798eb4eed8c0" category="paragraph">虽然 NetApp 率先为生产工作负载提供重复数据删除，但这一创新并不是这方面的第一项或最后一项创新。它从 ONTAP Snapshot 副本开始，该副本是一种节省空间的数据保护机制，不会影响性能，同时还采用了 FlexClone 技术，可即时为 VM 创建读 / 写副本，以供生产和备份使用。NetApp 继续提供包括重复数据删除，数据压缩和零块重复数据删除在内的实时功能，以从昂贵的 SSD 中挤出最大的存储空间。最近， ONTAP 增加了数据缩减功能来提高存储效率。</block>
  <block id="d019495551b4899a9019567122f1e076" category="list-text">* 实时零块重复数据删除。 * 消除了全零块浪费的空间。</block>
  <block id="7634d08ecc5702f74271a3313502ec02" category="list-text">* 实时压缩。 * 压缩数据块以减少所需的物理存储量。</block>
  <block id="8b7bb53489bfc2a6808c1d76314fa0d4" category="list-text">* 实时重复数据删除。 * 消除磁盘上现有块的传入块。</block>
  <block id="b762ae2f528b0eca55e7be3f599e909d" category="list-text">* 实时数据缩减。 * 将较小的 I/O 操作和文件打包到每个物理块中。</block>
  <block id="fba6442665875d123719f22baafc619d" category="inline-image-macro">存储效率</block>
  <block id="f468c00b41afc3485647008dcf80cba1" category="paragraph"><block ref="f468c00b41afc3485647008dcf80cba1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8405ea940cfeab85adddf9d3ed915a97" category="paragraph">您可以同时或单独运行重复数据删除，数据压缩和数据缩减，以在 FlexVol 卷上实现最佳空间节省。这些功能相结合，客户发现 VSI 可节省高达 5 ： 1 的空间， VDI 可节省高达 30 ： 1 的空间。</block>
  <block id="b8c11cd315128247329c3d878c2143fe" category="inline-link">使用重复数据删除，数据压缩和数据缩减提高存储效率</block>
  <block id="65bbb718266195d68e8d1accfc443e28" category="admonition">有关 ONTAP 存储效率的详细信息，请参见<block ref="f358a7faf94e9f579d11f8fc4efdbdec" category="inline-link-rx"></block> 在 ONTAP 9 文档中心。</block>
  <block id="6104c8ef7be4222a76596ab6a22bb422" category="doc">建议的 ESXi 主机和其他 ONTAP 设置</block>
  <block id="0416d04b345b434b120840c30ddaf0a1" category="paragraph">NetApp 已根据 NetApp 测试开发出一组 ESXi 主机多路径和 HBA 超时设置，用于正确处理 ONTAP 。可以使用适用于 VMware vSphere 的 ONTAP 工具轻松设置这些设置。在摘要信息板中，单击主机系统 portlet 中的编辑设置，或者右键单击 vCenter 中的主机，然后导航到 ONTAP tools &gt; Set recommended values 。下面是当前在 9.8 版中建议的主机设置。</block>
  <block id="dec4361376291bf7e7976c204f3a6cc8" category="cell">主机设置</block>
  <block id="024c7088f8cb994f40e5d60b87c10cbb" category="cell">NetApp 建议的价值</block>
  <block id="cc2060f93ac4b290d547f621584371d4" category="cell">ESXi 高级配置</block>
  <block id="73663d0d00956f0632e4ae75d811d53f" category="cell">VMFS3.HardwareAcceleratedLocking</block>
  <block id="2eabcf9ece81cd6f8095d869d0ecfdb5" category="cell">保留不变（ VMware 默认值为 1 ）。</block>
  <block id="1b50110aedae4d8d2043a4eb9beb20af" category="cell">VMFS3.EnableBlockDelete</block>
  <block id="0ad18436fcb2157ada78660d215e7796" category="cell">保留为设置值（ VMware 默认值为 0 ，但 VMFS6 不需要此设置）。有关详细信息，请参见 VMware 知识库文章。</block>
  <block id="7925a52b4ff8642c857aab6023d76d90" category="cell">NFS 设置</block>
  <block id="c3b49a515dd0046685e06092642aa139" category="cell">Net.TcpipHeapSize</block>
  <block id="abcf68baf479cae32e490eb770477d84" category="cell">vSphere 6.0 或更高版本，设置为 32 。所有其他 NFS 配置，设置为 30 。</block>
  <block id="504e96cc79e7efe30a8271cea152d9d1" category="cell">Net.TcpipHeapMax</block>
  <block id="5f039752b957a359dac1c1e45051a844" category="cell">对于 vSphere 6.0 及更高版本，设置为 1536 。</block>
  <block id="5f1e7b6431061565550e292d05c73588" category="cell">NFS.MaxVolumes</block>
  <block id="d75533d93e425c0e677c7115b33e8152" category="cell">vSphere 6.0 或更高版本，设置为 256 。所有其他 NFS 配置，设置为 64 。</block>
  <block id="3058676a1cf088aa4a73312ac36f2a58" category="cell">NFS41.MaxVolumes</block>
  <block id="62c07f94c64184ee5d530e4c0917093f" category="cell">vSphere 6.0 或更高版本，设置为 256 。</block>
  <block id="6f4edfb9f3990d73482442c70e5fc2a0" category="cell">NFS.MaxQueueDepth</block>
  <block id="0e61218c55cae3476207bca2c2f35ca7" category="cell">vSphere 6.0 或更高版本，设置为 128 。</block>
  <block id="18e1fb6924459470760771b20ab0c379" category="cell">nfs.HeartbeatMaxFailures</block>
  <block id="8a14ec18b6563675357f1050563de774" category="cell">对于所有 NFS 配置，均设置为 10 。</block>
  <block id="1aa26eb281359ba3b9a9a4b83a09ed46" category="cell">nfs.Heartbeat频率</block>
  <block id="072f9680861841ae9a13008a99667a75" category="cell">对于所有 NFS 配置，均设置为 12 。</block>
  <block id="eb4182715f8cde98563dc59ea36461d3" category="cell">nfs.HeartbeatTimeout</block>
  <block id="45aa5481fa55802a29a96aefd2f5dab1" category="cell">对于所有 NFS 配置，均设置为 5 。</block>
  <block id="54a08b15243d9078d3b5a47f8242da6f" category="cell">SUNRPC.MaxConnPerIP</block>
  <block id="9a9ccbecb3f315797ff8e709d85a0e18" category="cell">vSphere 7.0 或更高版本，设置为 128 。</block>
  <block id="e19159e292541f9e19415475bfdf8f38" category="cell">FC/FCoE 设置</block>
  <block id="2e556ad678160413b32dcca55c7d1f5f" category="cell">路径选择策略</block>
  <block id="1e304108bae216d7b24d43f9bc868298" category="cell">如果使用采用 ALUA 的 FC 路径，则设置为 RR （轮循）。对于所有其他配置，设置为 FIXED 。将此值设置为 RR 有助于在所有主动 / 优化路径之间实现负载平衡。固定值适用于较旧的非 ALUA 配置，有助于防止代理 I/O换言之，它有助于防止 I/O 流向在 7- 模式下运行 Data ONTAP 的环境中高可用性（ HA ）对的另一节点。</block>
  <block id="117704664d6cada78ac3107380f63d23" category="cell">disk.qFullSampSize</block>
  <block id="acaf935911b20ef844daea256f8181b1" category="cell">对于所有配置，均设置为 32 。设置此值有助于防止出现 I/O 错误。</block>
  <block id="f66a3c183f0e736240b77f8b755c880e" category="cell">disk.qFullThreshold</block>
  <block id="ab1224ed1cd7c63073af652a3bd92a35" category="cell">对于所有配置，均设置为 8 。设置此值有助于防止出现 I/O 错误。</block>
  <block id="19c08de7404551288e1274186e039ef4" category="cell">Emulex FC HBA 超时</block>
  <block id="b4dbfc2d52627e923cbb563a31ff756d" category="cell">使用默认值。</block>
  <block id="d46cddda4da7ec11f17472d11df95b68" category="cell">QLogic FC HBA 超时</block>
  <block id="7ecffb067b82aefb73bed04aea9fa562" category="cell">iSCSI 设置</block>
  <block id="d7e64409eb99602fc3b57a9f0b9287d6" category="cell">对于所有 iSCSI 路径，设置为 RR （轮循）。将此值设置为 RR 有助于在所有主动 / 优化路径之间实现负载平衡。</block>
  <block id="fb55ee99c04280ac638757869929785d" category="paragraph">在创建 ONTAP FlexVol 卷和 LUN 时， ONTAP 工具还会指定某些默认设置：</block>
  <block id="b97847dc22c9e1f02417ab38785b34e6" category="cell">ONTAP 工具</block>
  <block id="c003231c67265f34100a284092c0cf1f" category="cell">默认设置</block>
  <block id="5938fe448c8661febcef3f4e779e3adb" category="cell">Snapshot 预留（ -percent-snapshot-space ）</block>
  <block id="cfcd208495d565ef66e7dff9f98764da" category="cell">0</block>
  <block id="7218aec62575561a6de1cae8d5658390" category="cell">预留百分比（ -fractional-reserve ）</block>
  <block id="3a7e09ff0fa38663ffe6d91324ea75d9" category="cell">访问时间更新（ -atime-update ）</block>
  <block id="f8320b26d30ab433c5a54546d21f414c" category="cell">false</block>
  <block id="e93200d5b0d16915bf04236790544b2f" category="cell">最小预读（ -min-readahead ）</block>
  <block id="eee57b9c7d333899f3df6ffd10ec50df" category="cell">计划的 Snapshot 副本</block>
  <block id="00d23a76e43b46dae9ec7aa9dcbebb32" category="cell">enabled</block>
  <block id="f65fd63b63c9e9f25bf6bc141e83de34" category="cell">卷保证</block>
  <block id="c2410aebdf425dabcc65e546e506b03e" category="cell">无（精简配置）</block>
  <block id="f97c03bf3e9580446d70d479f5aad1e0" category="cell">卷自动调整大小</block>
  <block id="d89f4f8b1d7c18847b88b46142f61535" category="cell">grow_shrink</block>
  <block id="ace72ec54e17777d27eb8bdb9d57e782" category="cell">LUN 空间预留</block>
  <block id="b9f5c797ebbf55adccdd8539a65a0241" category="cell">已禁用</block>
  <block id="514aa7792a71ab4ab677eb2385131aae" category="cell">LUN 空间分配</block>
  <block id="0464f851d84d05f0a9db9051354e5581" category="section-title">其他主机多路径配置注意事项</block>
  <block id="5fcb3de72ca1920517439049153d961d" category="paragraph">虽然目前未使用可用的 ONTAP 工具进行配置，但 NetApp 建议考虑以下配置选项：</block>
  <block id="840731ae1cb9e4b23e19f645ab018b6f" category="inline-link">2069356</block>
  <block id="5073fc9da327263a7db04fd449991e6a" category="list-text">在高性能环境中或使用单个 LUN 数据存储库测试性能时，请考虑将轮循（ VMW_PSP_RR ）路径选择策略（ PSP ）的负载平衡设置从默认 IOPS 设置 1000 更改为 1 。请参见 VMware 知识库<block ref="f3f4762788a6845119bdb5b9c9179bda" category="inline-link-rx"></block> 了解更多信息。</block>
  <block id="1ea3eb55b985cf75e100607ee8bd935d" category="inline-link">路径选择插件和策略</block>
  <block id="249afbf456bd04d574e8d362d5bf133c" category="list-text">在 vSphere 6.7 Update 1 中， VMware 为轮循 PSP 引入了一种新的延迟负载平衡机制。新选项会在选择最佳 I/O 路径时考虑 I/O 带宽和路径延迟如果在具有非等效路径连接的环境中使用该工具，则可能会受益，例如，一条路径上的网络跃点多于另一条路径，或者使用 NetApp 全 SAN 阵列系统时。请参见<block ref="f5ecc69f2970e2e9c8638ad278ec38f7" category="inline-link-rx"></block> 有关详细信息 ...</block>
  <block id="7be2e69e5d19c282db8d81c60a51c862" category="summary">本页介绍在 VMware vSphere 环境中实施 NetApp ONTAP Storage 解决方案的最佳实践。</block>
  <block id="d3ba101543fc97ba1dd9272c87bf65da" category="doc">虚拟卷（ VVOL ）和基于存储策略的管理（ SPBM ）</block>
  <block id="25e09c324ad3c89ee3aa01454fce14cd" category="section-title">关于 VVOL 和 SPBM</block>
  <block id="ab3304a5226d57b9bcaf0c7b3f819735" category="paragraph">NetApp 是 VMware 在开发 vSphere 虚拟卷（ VVOL ）方面的早期设计合作伙伴，为 VVOL 和 VMware vSphere 存储感知 API （ VASA ）提供架构输入和早期支持。此方法不仅可以为 VMFS 提供虚拟机粒度存储管理，还支持通过基于存储策略的管理（ Storage Policy-Based Management ， SPBM ）实现存储配置自动化。</block>
  <block id="ce09fc365ce48a9d89c0fdb5222c3909" category="paragraph">SPBM 提供了一个框架，可用作虚拟化环境可用存储服务与通过策略配置的存储元素之间的抽象层。通过这种方法，存储架构师可以设计具有不同功能的存储池， VM 管理员可以轻松地使用这些功能。然后，管理员可以将虚拟机工作负载要求与配置的存储池进行匹配，从而可以在每个 VM 或虚拟磁盘级别精细控制各种设置。</block>
  <block id="2902acda09b9786460c2dd928a2d8f1a" category="paragraph">ONTAP 在 VVOL 规模方面处于存储行业的领先地位，在一个集群中支持数十万个 VVOL ，而企业级阵列和小型闪存阵列供应商支持的每个阵列仅支持数千个 VVOL 。NetApp 还在推动 VM 粒度管理的发展，即将推出支持 VVOL 3.0 的功能。</block>
  <block id="fda9c21a4aefd4a1f42ad0b195e6ef0a" category="inline-link">TR-4400 ：采用 ONTAP 的 VMware vSphere 虚拟卷</block>
  <block id="69173613658292fc2adeb513b12f29ca" category="admonition">有关 VMware vSphere 虚拟卷， SPBM 和 ONTAP 的详细信息，请参见<block ref="354226c2546b1aed39f1c0c484e6a98a" category="inline-link-rx"></block>。</block>
  <block id="01a7d7174ccc6593753679eefec17d49" category="summary">本页介绍在 VMware vSphere 环境中自动执行基本 ONTAP 功能的优势。</block>
  <block id="1406aa071af210d31c6a2951fe66ddcc" category="doc">ONTAP 和 vSphere 自动化简介</block>
  <block id="8e2b0503a0ad76f57c96738d7f0a3b0d" category="section-title">VMware 自动化</block>
  <block id="b5845209cb81dad561de4abe6e4481c4" category="paragraph">自 VMware ESX 推出以来，自动化已成为管理 VMware 环境不可或缺的一部分。能够将基础架构作为代码进行部署，并将实践扩展到私有云操作，有助于缓解对规模，灵活性，自行配置和效率的顾虑。</block>
  <block id="f7c9a2e2ec395a7e4b605bb3df40abf8" category="paragraph">自动化可以分为以下几类：</block>
  <block id="cba6f5a209d4f2ac1839f1c1e0a10051" category="list-text">* 虚拟基础架构部署 *</block>
  <block id="f41d0733c4edc0bf273a3d0587efb21e" category="list-text">* 来宾计算机操作 *</block>
  <block id="7f2a4b0fa787b1f058accb56cc377af8" category="list-text">* 云操作 *</block>
  <block id="290a03d97ea4e48144d20f313e0a0826" category="paragraph">管理员可以选择多种方法来实现基础架构自动化。无论是通过将虚拟机的主机配置文件或自定义规范等原生 vSphere 功能用于 VMware 软件组件，操作系统和 NetApp 存储系统上的可用 API ，均可获得大量文档和指导。</block>
  <block id="217dd73ccc3bd89b5d4e35d0bf50ea6c" category="paragraph">如果 ESX 主机运行的是 ESX 4.1 或更高版本，则 Data ONTAP 8.0.1 及更高版本支持某些 VMware vSphere API for Array Integration （ VAAI ）功能。VAAI 是一组 API ，用于在 VMware vSphere ESXi 主机和存储设备之间进行通信。这些功能有助于将操作从 ESX 主机卸载到存储系统，并提高网络吞吐量。ESX 主机会在正确的环境中自动启用这些功能。您可以通过检查 VAAI 计数器中的统计信息来确定系统使用 VAAI 功能的程度。</block>
  <block id="16123583d64fd438c5d7f5b61a1c1d2f" category="paragraph">自动部署 VMware 环境的最常见起点是配置基于块或文件的数据存储库。在开发相应的自动化之前，必须确定实际任务的要求。</block>
  <block id="a78bd4dd1db96affe0c2889376cccf53" category="paragraph">有关 VMware 环境自动化的详细信息，请参见以下资源：</block>
  <block id="ebd98e15bf07fe37dfdc879f9d0d1f48" category="inline-link">NetApp Pub</block>
  <block id="6123648b7dec055b609781b4d47c1b26" category="list-text"><block ref="6c65ff4f1dfb7aa26df896b1c9c849eb" category="inline-link-rx"></block>。NetApp 配置管理和自动化。</block>
  <block id="7c4272bef0cc405b65fc74e3791664bc" category="inline-link">适用于 VMware 的 Ansible GALAXY 社区</block>
  <block id="59fb42204e71850f7fd7024e5e6a1058" category="list-text"><block ref="c471bcaf7efa6fb129f37edaa7c41a56" category="inline-link-rx"></block>。一组适用于 VMware 的 Ansible 资源。</block>
  <block id="1ec695bd70399ce37180f1d84a33d151" category="inline-link">VMware ｛ code ｝ 资源</block>
  <block id="489c5322cef99651507b070e2240b6a8" category="list-text"><block ref="77e0562f07512a7a248241b7170b6944" category="inline-link-rx"></block>。为软件定义的数据中心设计解决方案所需的资源，包括论坛，设计标准，示例代码和开发人员工具。</block>
  <block id="5a44477fe5ac4beac2dc6574097cf079" category="summary">此页面提供了在 VMware vSphere 环境中部署 NetApp ONTAP 存储 iSCSI VMFS 数据存储库的步骤。</block>
  <block id="6d5f52fb3cf097647a57da8b55e5b08f" category="doc">使用 ONTAP 配置 vSphere 传统块存储</block>
  <block id="7c2d57185437da757ecede58f5a842d4" category="paragraph">VMware vSphere 支持以下 VMFS 数据存储库选项，并指定了 ONTAP SAN 协议支持。</block>
  <block id="c90881491d716de5c0ed7f9f4b09a3ad" category="cell">VMFS 数据存储库选项</block>
  <block id="a9181ef164a32ec0949c2cf63315ca31" category="cell">ONTAP SAN 协议支持</block>
  <block id="5903a917b575023b60264c602c220771" category="inline-link-macro">光纤通道（ FC ）</block>
  <block id="a4bce6d7794ee38a14e6a6d3785039f9" category="cell"><block ref="a4bce6d7794ee38a14e6a6d3785039f9" category="inline-link-macro-rx"></block></block>
  <block id="a6105c0a611b41b08f1209506350279e" category="cell">是的。</block>
  <block id="8da5577a58a95e2ebe9c6dd4f19f6c11" category="inline-link-macro">以太网光纤通道（ FCoE ）</block>
  <block id="40b814244a055d57c1af5fd02e4a8747" category="cell"><block ref="40b814244a055d57c1af5fd02e4a8747" category="inline-link-macro-rx"></block></block>
  <block id="e4e1c13bb0b14f6cb7608cbecea948ef" category="inline-link-macro">iSCSI</block>
  <block id="b26caac6068e09e5f849cfcb3e8c0c90" category="cell"><block ref="b26caac6068e09e5f849cfcb3e8c0c90" category="inline-link-macro-rx"></block></block>
  <block id="c38e870d503879d110dbddd5bf388ab2" category="cell">适用于 RDMA 的 iSCSI 扩展（ iSER ）</block>
  <block id="7fa3b767c460b54a2be4d49030b349c7" category="cell">否</block>
  <block id="de5a656362f0d785d2cc7d3097a507ef" category="inline-link-macro">采用 FC 的基于网络结构的 NVMe （ NVMe/FC ）</block>
  <block id="71a94ffc9bd97f314990ee2cd7a87154" category="cell"><block ref="71a94ffc9bd97f314990ee2cd7a87154" category="inline-link-macro-rx"></block></block>
  <block id="16d2954ba1640e32b21c312695337233" category="cell">采用基于融合以太网的 RDMA 的基于网络结构的 NVMe （ NVMe/RoCE ）</block>
  <block id="344567ba51767dd5805c908c602fb10e" category="admonition">如果需要 iSER 或 NVMe/RoCE VMFS ，请检查基于 SANtricity 的存储系统。</block>
  <block id="1e6584aafa5ae98aebb88d3ddecdaae5" category="doc">适用于 vSphere 管理员的 ONTAP 简介</block>
  <block id="74587fa4ad90f8713c0446529a3670e0" category="section-title">为什么选择适用于 vSphere 的 ONTAP ？</block>
  <block id="135b7f440129fbbacbc948adfb10ccec" category="paragraph">NetApp ONTAP 简化了存储和数据管理操作，并对 VMware 环境进行了显著的补充，无论是在内部部署还是在云端部署。在基于 SAN 和基于 NAS 的 VMware 架构中， NetApp 同类最佳的数据保护，存储效率创新以及卓越的性能都是成千上万客户选择 ONTAP 作为其适用于 vSphere 的存储解决方案部署的原因。</block>
  <block id="f93e431aaf745d4b5e4ecbd6c005b564" category="paragraph">NetApp 为各种 VMware 产品提供了大量 VMware 插件，验证和资格认定，以支持面临管理虚拟化环境的独特挑战的客户。NetApp 在存储和数据管理方面的作用与 VMware 在虚拟化方面的作用一样，使客户能够专注于其核心能力，而不是管理物理存储。VMware 和 NetApp 之间近 20 年的合作关系不断发展，随着 VMware Cloud Foundation 和 Tanzu 等新技术的出现，客户价值不断增加，同时也在继续为 vSphere 的基础提供支持。</block>
  <block id="b4e56252f38c98dde71bd489a93805fc" category="paragraph">客户价值的关键因素包括：</block>
  <block id="d6f750861d7ae27706ca32ed1f4c1ac8" category="list-text">* 统一存储 *</block>
  <block id="04d737333774adefb9817d0115bab79b" category="list-text">* 存储效率 * 。</block>
  <block id="c44a0be5f0db0511994f2f8e76afeb25" category="list-text">* 虚拟卷和基于存储策略的管理 *</block>
  <block id="d78a5fe569360bb327d51dd5060d723c" category="list-text">* 混合云 *</block>
  <block id="45649dc755190fc40be0b7e38ec84851" category="paragraph">有关受支持的 NetApp 和 VMware 解决方案的详细信息，请参见以下资源：</block>
  <block id="ec1bd76731eb238fa601fb03391f78d4" category="inline-link">NetApp 互操作性表工具</block>
  <block id="d46e58d91be6ffba761ab9bd05a46fc5" category="list-text"><block ref="b47ad5992ee82e05d51ff22d87ae20c3" category="inline-link-rx"></block> IMTIMT 定义了可用于构建 FC/FCoE ， iSCSI ， NFS 和 CIFS 配置的合格组件和版本。</block>
  <block id="8034c6a17370dafb5b3f6f5add755c62" category="inline-link">VMware 兼容性指南</block>
  <block id="f0c67c4d38f07e6eb4bead0202260ddb" category="list-text"><block ref="a9846c61dcf62d503a7738adf47f11be" category="inline-link-rx"></block>。VMware 兼容性指南列出了系统， I/O ，存储 /SAN 和备份与 VMware 基础架构和软件产品的兼容性</block>
  <block id="0f0b69f9725d17d0a8d3ceebcf33f72f" category="inline-link">适用于 VMware 的 NetApp ONTAP 工具</block>
  <block id="2be6bbf4ea543b07ab3b9a218eb509cc" category="list-text"><block ref="d1284fbca35bc1b47ead37f18b1c3ba2" category="inline-link-rx"></block>。适用于 VMware vSphere 的 ONTAP 工具是一个 vCenter Server 插件，其中包括 VSC ， VASA Provider 和 Storage Replication Adapter （ SRA ）扩展。</block>
  <block id="8ce83a5c4c3183c4e25f0d8d7b657ffc" category="summary">此页面可在 VMware vSphere 环境中提供 NFS 数据存储库支持。</block>
  <block id="3769193a46f06731838a6d904cf1da37" category="doc">使用 ONTAP 配置 vSphere 传统文件存储</block>
  <block id="8d3005420a2cb4cc915402d9c5604538" category="paragraph">VMware vSphere 支持以下 NFS 协议，这两种协议均支持 ONTAP 。</block>
  <block id="78aa97ac78d1291969b5893edcfe448a" category="inline-link-macro">NFS 版本 3</block>
  <block id="fb110cc4ad992a0846c0eaea7fbf2d94" category="list-text"><block ref="fb110cc4ad992a0846c0eaea7fbf2d94" category="inline-link-macro-rx"></block></block>
  <block id="2d6affbd5ec6eb1f6009383ca5ba9b2b" category="inline-link-macro">NFS 版本 4.1</block>
  <block id="3f65d9416139ab7c1ff75966bccf6f7d" category="list-text"><block ref="3f65d9416139ab7c1ff75966bccf6f7d" category="inline-link-macro-rx"></block></block>
  <block id="fc5929c224818a87a89047d2813dd2c5" category="inline-link-macro">此 NFS 客户端版本比较</block>
  <block id="ce51dd3c15b8a6638d0c212b990ae643" category="paragraph">如果在为 vSphere 选择正确的 NFS 版本时需要帮助，请检查 <block ref="8055fbd4933fc4c8b583fa212ff14ff2" category="inline-link-macro-rx"></block>。</block>
  <block id="3e4627f6667f830baceaaf35890b575a" category="summary">要了解有关本文档中所述信息的更多信息，请查看以下文档和 / 或网站：</block>
  <block id="3f3400e66c93fa2bb6193f2d71db7d65" category="inline-link"><block ref="3f3400e66c93fa2bb6193f2d71db7d65" category="inline-link-rx"></block></block>
  <block id="7d9ee37e3155d571b441d63bcbc54709" category="inline-link"><block ref="7d9ee37e3155d571b441d63bcbc54709" category="inline-link-rx"></block></block>
  <block id="52c629361849219069b336f56f1556d0" category="list-text">TR-4400 ：采用 ONTAP 的 VMware vSphere 虚拟卷<block ref="b7bf139d6051615d8c8e01b6b63dacc3" category="inline-link-rx"></block></block>
  <block id="18df8e05a5400abd9d0980b1c5bc9ef3" category="list-text">TR-4015 《适用于 ONTAP 9 的 SnapMirror 配置最佳实践指南》<block ref="e361bd9d6f7b20da762bc23fcb3d09c2" category="inline-link-rx"></block></block>
  <block id="cbe2f6eb2a73f4a2c871a06264f10dc7" category="inline-link"><block ref="cbe2f6eb2a73f4a2c871a06264f10dc7" category="inline-link-rx"></block></block>
  <block id="249b98331fa56dc46bf6ba51dc6c39d5" category="list-text">适用于 ONTAP 的 RBAC User Creator<block ref="6b15b91279acfce2bbee060bdb17db43" category="inline-link-rx"></block></block>
  <block id="c88037eb28ae3cceb0e32c2cd3c322d7" category="inline-link"><block ref="c88037eb28ae3cceb0e32c2cd3c322d7" category="inline-link-rx"></block></block>
  <block id="1a57e0f74e725c1a5e2d53b4d4b4460d" category="list-text">适用于 VMware vSphere 的 ONTAP 工具资源<block ref="80c496cd9ab75e5683007d8f66ca6fbf" category="inline-link-rx"></block></block>
  <block id="9aa6e8f8fac5c131e5924ee033660d29" category="inline-link"><block ref="9aa6e8f8fac5c131e5924ee033660d29" category="inline-link-rx"></block></block>
  <block id="91a48e1708df22b7464bced79c745ad2" category="list-text">VMware Site Recovery Manager 文档<block ref="92ad802ced4838839b492be6d0bf427d" category="inline-link-rx"></block></block>
  <block id="014a2413d22e5ac39371ac1333e38898" category="paragraph">请参见<block ref="99cfde592e1d7fa7832b186d73ee4002" category="inline-link-rx"></block> 在 NetApp 支持站点上，验证您的特定环境是否支持本文档中所述的确切产品和功能版本。NetApp IMT 定义了可用于构建 NetApp 支持的配置的产品组件和版本。具体结果取决于每个客户是否按照已发布的规格进行安装。</block>
  <block id="e69b470437a857bf2d9517ce4ef8d2c1" category="summary">此页面提供了在 VMware vSphere 环境中部署 NetApp ONTAP 存储 FC VMFS 数据存储库的步骤。</block>
  <block id="91d9498cf61618ef81368a106318efd2" category="doc">vSphere VMFS 数据存储库—采用 ONTAP 的光纤通道存储后端</block>
  <block id="b6e52e53cc59b8620dcdc05f2b812be4" category="paragraph">本节介绍如何使用 ONTAP 光纤通道（ FC ）存储创建 VMFS 数据存储库。</block>
  <block id="6b70d8f91894fa50b3c04af804f090b6" category="list-text">管理 vSphere 环境和 ONTAP 所需的基本技能</block>
  <block id="0335588c7903659bdeaa310c8f7bcdf4" category="list-text">运行 ｛ ontap_version ｝ 的 ONTAP 存储系统（ FAS/AFF/CVO/ONTAP Select/ASA ）</block>
  <block id="fdb8f60c37b623874df816146436f56b" category="list-text">ONTAP 凭据（ SVM 名称，用户 ID 和密码）</block>
  <block id="f2a03b032017931383878c3ef48cdb0a" category="list-text">主机，目标以及 SVM 和 LUN 信息的 ONTAP WWPN</block>
  <block id="d0a36a0dcdef62d026caa08afbaa4a42" category="inline-link-macro">已完成的 FC 配置工作表</block>
  <block id="5c42144bb611ba366591a823d4c2955e" category="list-text"><block ref="5c42144bb611ba366591a823d4c2955e" category="inline-link-macro-rx"></block></block>
  <block id="c7f58b1f94665d7ebf6f107970d1b91b" category="list-text">vSphere 主机信息</block>
  <block id="cdce6351191da46d795898e4570b8da2" category="list-text">｛ vsphere_version ｝</block>
  <block id="63fc76a195a29345d466bc86f293ca14" category="list-text">光纤交换机</block>
  <block id="6c2e28f86b2049d110f0e73e9bb78709" category="list-text">连接了 ONTAP FC 数据端口和 vSphere 主机</block>
  <block id="52dd4b667b031cd80a33b9d176e43827" category="list-text">启用 N_port ID 虚拟化（ NPIV ）功能</block>
  <block id="46fdd1539543376bfbbf2cc6da976539" category="list-text">创建单个启动程序单个目标分区。</block>
  <block id="df7f994fb0c494b66708667a64b2c406" category="list-text">为每个启动程序创建一个分区（单个启动程序分区）。</block>
  <block id="5a1cb943a687396a356750829002d982" category="list-text">对于每个分区，包括一个目标，该目标是 SVM 的 ONTAP FC 逻辑接口（ WWPN ）。每个 SVM 的每个节点至少应有两个逻辑接口。请勿使用物理端口的 WWPN 。</block>
  <block id="acd7065eaa19f6ad949216b6dcca52b6" category="list-text">适用于 VMware vSphere 的 ONTAP 工具已部署，配置并可随时使用。</block>
  <block id="d13dd15101d292f5b2c56e5be828fec8" category="section-title">配置 VMFS 数据存储库</block>
  <block id="95877ca095b0f0a0a981f8a12d234ad5" category="paragraph">要配置 VMFS 数据存储库，请完成以下步骤：</block>
  <block id="94dafc85e46c3bc0d374c052b1075890" category="list-text">使用检查兼容性<block ref="3028580b30f2b1d483aad9f9a7a65c7a" category="inline-link-rx"></block></block>
  <block id="195e1a47999aff0fbaa4eb8d97be6c40" category="inline-link-macro">支持 FCP 配置</block>
  <block id="e1b87801d0d31fd947fb52aa411c2815" category="list-text">验证是否已 <block ref="a0240d867f430aa7cc80ec129fc2bdb1" category="inline-link-macro-rx"></block>。</block>
  <block id="0b3f75b021ef6bdc0a532e2d9b2a9d74" category="inline-link-macro">验证您是否具有 FCP 的 ONTAP 许可证。</block>
  <block id="3c56f50608e95955ed2e1a3fb8b1dad1" category="list-text"><block ref="3c56f50608e95955ed2e1a3fb8b1dad1" category="inline-link-macro-rx"></block></block>
  <block id="e7dc6b39e7e5bd6df8fa93e90a426161" category="list-text">使用 `ssystem license show` 命令检查是否列出了 FCP 。</block>
  <block id="f8aa00b1a94d3290ba6ac653b792dd8a" category="list-text">使用 `liconen se add -license-code &lt; 许可证代码 &gt;` 添加许可证。</block>
  <block id="86a53381cefd41dcca81850274f0203a" category="list-text">确保已在 SVM 上启用 FCP 协议。</block>
  <block id="169e237a691059b9ac1933f0e7be8f56" category="inline-link-macro">验证现有 SVM 上的 FCP 。</block>
  <block id="5bb60b756067a0334c310be1e2260c3b" category="list-text"><block ref="5bb60b756067a0334c310be1e2260c3b" category="inline-link-macro-rx"></block></block>
  <block id="fab6621b43b19a018afc1860a5b85c21" category="inline-link-macro">在现有 SVM 上配置 FCP 。</block>
  <block id="7d4ca3fa89beb77990d305e17ed9ba64" category="list-text"><block ref="7d4ca3fa89beb77990d305e17ed9ba64" category="inline-link-macro-rx"></block></block>
  <block id="0d195904efc6cfb176bbc04e93c2947d" category="inline-link-macro">使用 FCP 创建新的 SVM 。</block>
  <block id="df062a6cafa16aee5f7ea64ea6991776" category="list-text"><block ref="df062a6cafa16aee5f7ea64ea6991776" category="inline-link-macro-rx"></block></block>
  <block id="5aab5d056538757626dd0562a563471a" category="list-text">确保 FCP 逻辑接口在 SVM 上可用。</block>
  <block id="aa01379022dd5b86e18f436c76f651f5" category="list-text">使用 `Network Interface show` 验证 FCP 适配器。</block>
  <block id="f89eac3d097d3dae5c0159f0da84b1c7" category="list-text">使用 GUI 创建 SVM 时，逻辑接口是该过程的一部分。</block>
  <block id="946b60eb8bd4945ad82b28fd9ccd3c63" category="list-text">要重命名网络接口，请使用 `Network Interface modify` 。</block>
  <block id="52fa81ab62bea2599ed516f01925678d" category="inline-link-macro">创建并映射 LUN 。</block>
  <block id="c8ecf540bebb63423545ecd3d02c6ca0" category="list-text"><block ref="a2b18e9ce335dd856363e6613d961c1a" category="inline-link-macro-rx"></block> 如果您使用适用于 VMware vSphere 的 ONTAP 工具，请跳过此步骤。</block>
  <block id="e4f7ebeb9544fb23a73028ab714ca87c" category="section-title">VMware vSphere 任务</block>
  <block id="7407e0a15262132133381a890e36e47a" category="inline-link-macro">存储适配器信息</block>
  <block id="25d85157bcfdbb601bbda056cd3a5bc6" category="list-text">确认已安装 HBA 驱动程序。VMware 支持的 HBA 已开箱即用部署驱动程序，应在中显示这些驱动程序 <block ref="57f7eb139c8bc258309d8e16d3df13fe" category="inline-link-macro-rx"></block>。</block>
  <block id="c57f32bc5ce6f95f5f9bec8260ecdb08" category="inline-link-macro">使用 ONTAP 工具配置 VMFS 数据存储库</block>
  <block id="b3a5f140339b1ca0940c5875b2a76d0b" category="list-text"><block ref="89ebfed741bd060c10a4a1472581f4e2" category="inline-link-macro-rx"></block>。</block>
  <block id="3b2287aeb862e195f44c02694fff89fe" category="summary">使用 SnapCenter ，您可以创建可应用于多个作业的备份策略。这些策略可以定义计划，保留，复制和其他功能。它们仍允许选择虚拟机一致的快照，从而利用虚拟机管理程序在创建 VMware 快照之前暂停 I/O 的功能。</block>
  <block id="b1c93d491ba776d955eb2e3b90908fb9" category="doc">适用于 vSphere 的其他功能</block>
  <block id="7e7397a7b79323762c61941fc0e6b5f9" category="section-title">数据保护</block>
  <block id="343775d7b18c4ca0af9b7fad57690839" category="paragraph">备份虚拟机并快速恢复虚拟机是 ONTAP for vSphere 的一项强大优势，使用适用于 VMware vSphere 的 SnapCenter 插件在 vCenter 中轻松管理此功能。使用 Snapshot 副本在不影响性能的情况下快速创建虚拟机或数据存储库的副本，然后使用 SnapMirror 将其发送到二级系统以实现长期异地数据保护。这种方法只存储更改后的信息，从而最大限度地减少存储空间和网络带宽。</block>
  <block id="0aef2da721f0ab14676f8d6ffb9e7e8c" category="inline-link">建议</block>
  <block id="8cc688149346249b3a92e59282755f3e" category="paragraph">使用 SnapCenter ，您可以创建可应用于多个作业的备份策略。这些策略可以定义计划，保留，复制和其他功能。它们仍允许选择虚拟机一致的快照，从而利用虚拟机管理程序在创建 VMware 快照之前暂停 I/O 的功能。但是，由于 VMware 快照对性能的影响，通常不建议使用这些快照，除非您需要暂停子文件系统。而是使用 ONTAP Snapshot 副本进行一般保护，并使用 SnapCenter 插件等应用程序工具来保护 SQL Server 或 Oracle 等事务数据。这些 Snapshot 副本与 VMware （一致性）快照不同，适用于长期保护。VMware 快照仅为<block ref="75f5ad475d959e2ecb55267e1a9a54f1" category="inline-link-rx"></block> 因性能和其他影响而短期使用。</block>
  <block id="26aae91a7d92b32a60b1fbc86c29ee81" category="paragraph">这些插件提供了扩展功能，可在物理和虚拟环境中保护数据库。借助 vSphere ，您可以使用它们来保护 SQL Server 或 Oracle 数据库，其中的数据存储在 RDM LUN 上，直接连接到子操作系统的 iSCSI LUN 或 VMFS 或 NFS 数据存储库上的 VMDK 文件上。通过这些插件，可以指定不同类型的数据库备份，支持联机或脱机备份，以及保护数据库文件和日志文件。除了备份和恢复之外，这些插件还支持出于开发或测试目的克隆数据库。</block>
  <block id="1556ba0bf6ea4783cda0ff40e96f0265" category="paragraph">下图显示了 SnapCenter 部署的一个示例。</block>
  <block id="54ee9d8cd5db70a761321f3e7d168445" category="paragraph"><block ref="54ee9d8cd5db70a761321f3e7d168445" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6c1bef29e8dc34a00e17b06c221d5efe" category="paragraph">要增强灾难恢复功能，请考虑将适用于 ONTAP 的 NetApp SRA 与 VMware Site Recovery Manager 结合使用。除了支持将数据存储库复制到灾难恢复站点之外，它还可以通过克隆复制的数据存储库在灾难恢复环境中进行无中断测试。通过 SRA 中内置的自动化功能，还可以轻松地从灾难中恢复并在中断解决后重新保护生产。</block>
  <block id="650062685b0df8284f1b87f62fa3f9f3" category="inline-link">TR-4128</block>
  <block id="886a3fd32ec402d87ea2b090f8f701b2" category="paragraph">最后，要获得最高级别的数据保护，请考虑使用 NetApp MetroCluster 的 VMware vSphere 城域存储集群（ VMSC ）配置。VMSC 是一款经过 VMware 认证的解决方案，它将同步复制与基于阵列的集群相结合，可提供与高可用性集群相同的优势，但分布在不同的站点上以防止站点灾难。NetApp MetroCluster 可为同步复制提供经济高效的配置，可从任何单个存储组件故障中透明恢复，并在发生站点灾难时提供单命令恢复。中详细介绍了 VMSC<block ref="737e6eedc4568d5bb72c6a6cf1fe681a" category="inline-link-rx"></block>。</block>
  <block id="752d71c042ef775879f6db705ccf6b31" category="section-title">空间回收</block>
  <block id="d490382851fbc5bd6720046bf9bc0c03" category="paragraph">从数据存储库中删除 VM 时，可以回收空间以用于其他用途。使用 NFS 数据存储库时，删除虚拟机时会立即回收空间（当然，只有在卷已进行精简配置时，即卷保证设置为 none ），此方法才有意义。但是，在 VM 子操作系统中删除文件时，不会使用 NFS 数据存储库自动回收空间。对于基于 LUN 的 VMFS 数据存储库， ESXi 以及子操作系统可以将 VAAI UNMAP 原语问题描述到存储（同样适用于使用精简配置时）以回收空间。根据版本的不同，此支持可以是手动支持，也可以是自动支持。</block>
  <block id="6a2bff0a8d10ca0fc6c782e7978f696a" category="inline-link">2057513</block>
  <block id="8927aab76c49d1deb0b407fd261d5aa6" category="inline-link">存储空间回收</block>
  <block id="0c5a70f66ff77925d7dd7192191ec8f2" category="paragraph">在 vSphere 5.5 及更高版本中， `vmkfstools – y` 命令将替换为 `esxcli storage vmfs unmap` 命令，该命令可指定可用块的数量（请参见 VMware 知识库<block ref="1d61bd4e8925f7d5aac61e083b728439" category="inline-link-rx"></block> 了解更多信息）。在 vSphere 6.5 及更高版本中，如果使用 VMFS 6 ，则应异步自动回收空间（请参见<block ref="a9ae15a1c91a14939aefb313015202e6" category="inline-link-rx"></block> 在 vSphere 文档中），但也可以根据需要手动运行。ONTAP 支持这种自动 UNMAP ，适用于 VMware vSphere 的 ONTAP 工具会将其设置为低优先级。</block>
  <block id="99a66df20e19a8e18fae37a7f714750a" category="section-title">虚拟机和数据存储库克隆</block>
  <block id="d355cf5d1a16095124a54902f7cf49db" category="paragraph">通过克隆存储对象，您可以快速创建副本以供将来使用，例如配置其他 VM ，备份 / 恢复操作等。在 vSphere 中，您可以克隆虚拟机，虚拟磁盘， VVol 或数据存储库。克隆后，通常可以通过自动化过程进一步自定义对象。vSphere 既支持完整副本克隆，也支持链接克隆，在这些克隆中，它可以独立于原始对象跟踪更改。</block>
  <block id="78f8f8d69825dfe8e6085151fa565f28" category="paragraph">链接克隆非常有助于节省空间，但它们会增加 vSphere 为虚拟机处理的 I/O 量，从而影响该虚拟机的性能，甚至整个主机的性能。这就是 NetApp 客户经常使用基于存储系统的克隆来充分利用这两种环境的原因：高效利用存储和提高性能。</block>
  <block id="17e1a153b5d05c5a642c93ba9ce3c6de" category="paragraph">下图显示了 ONTAP 克隆。</block>
  <block id="8ee3cd3dba25fb32f1bc38cb528ac998" category="paragraph"><block ref="8ee3cd3dba25fb32f1bc38cb528ac998" category="inline-image-macro-rx" type="image"></block></block>
  <block id="76ee7355875ad5e9f56186ff7da961f6" category="paragraph">可以通过多种机制将克隆卸载到运行 ONTAP 软件的系统，通常是在 VM ， VVOL 或数据存储库级别。其中包括：</block>
  <block id="3b6d066ffdecb2beb542ef68e773d4ae" category="list-text">使用 NetApp vSphere APIs for Storage Awareness （ VASA ） Provider 的 VVOL 。ONTAP 克隆用于支持由 vCenter 管理的 VVOL Snapshot 副本，这些副本节省空间，并且对创建和删除这些副本的 I/O 影响微乎其微。此外，还可以使用 vCenter 克隆 VM ，这些 VM 也会卸载到 ONTAP ，无论是在单个数据存储库 / 卷中还是在数据存储库 / 卷之间。</block>
  <block id="059e5a6b7f963e9876ba0129dc1b667d" category="list-text">使用 vSphere API —阵列集成（ VAAI ）进行 vSphere 克隆和迁移。在 SAN 和 NAS 环境中， VM 克隆操作均可卸载到 ONTAP （ NetApp 提供了一个 ESXi 插件，用于为 NFS 启用 VAAI ）。vSphere 仅会卸载 NAS 数据存储库中冷（已关闭） VM 上的操作，而热 VM （克隆和存储 vMotion ）上的操作也会卸载到 SAN 上。ONTAP 会根据源，目标和已安装的产品许可证使用最高效的方法。VMware Horizon View 也使用此功能。</block>
  <block id="a603c207c7b5801942ff108502676c12" category="list-text">SRA （与 VMware Site Recovery Manager 结合使用）。此处，克隆用于无中断测试灾难恢复副本的恢复情况。</block>
  <block id="bb300d356d258c084dbe5da2ca367e08" category="list-text">使用 SnapCenter 等 NetApp 工具进行备份和恢复。VM 克隆用于验证备份操作以及挂载 VM 备份，以便可以复制单个文件。</block>
  <block id="524b5b8bc03312baeafbea86df667c4b" category="paragraph">VMware ， NetApp 和第三方工具可以调用 ONTAP 卸载克隆。卸载到 ONTAP 的克隆具有多个优势。在大多数情况下，它们节省空间，只需要存储即可更改对象；读取和写入它们不会产生额外的性能影响，在某些情况下，通过在高速缓存中共享块来提高性能。它们还会从 ESXi 服务器卸载 CPU 周期和网络 I/O 。使用 FlexVol 卷在使用 FlexClone 的传统数据存储库中进行副本卸载速度快，效率高，但 FlexVol 卷之间的副本卸载速度可能较慢。如果您将 VM 模板维护为克隆源，请考虑将其放置在数据存储库卷中（使用文件夹或内容库对其进行组织），以实现节省空间的快速克隆。</block>
  <block id="f3968368501d882b3969da59138db6e2" category="paragraph">您也可以直接在 ONTAP 中克隆卷或 LUN 以克隆数据存储库。使用 NFS 数据存储库时， FlexClone 技术可以克隆整个卷，并且可以从 ONTAP 导出克隆并由 ESXi 作为另一个数据存储库挂载该克隆。对于 VMFS 数据存储库， ONTAP 可以克隆卷或整个卷中的 LUN ，包括其中的一个或多个 LUN 。包含 VMFS 的 LUN 必须映射到 ESXi 启动程序组（ igroup ），然后由 ESXi 重新签名，才能挂载并用作常规数据存储库。对于某些临时使用情形，可以挂载克隆的 VMFS 而无需重新签名。克隆数据存储库后，可以注册，重新配置和自定义数据存储库中的 VM ，就像它们是单独克隆的 VM 一样。</block>
  <block id="1c12a8dd266e356901d22c0b7711369d" category="paragraph">在某些情况下，可以使用其他许可功能来增强克隆功能，例如用于备份的 SnapRestore 或 FlexClone 。这些许可证通常包含在许可证包中，无需额外付费。要执行 VVOL 克隆操作以及支持 VVOL 的受管 Snapshot 副本（这些副本会从虚拟机管理程序卸载到 ONTAP ），需要 FlexClone 许可证。在数据存储库 / 卷中使用 FlexClone 许可证还可以改进某些基于 VAAI 的克隆（创建节省空间的即时副本，而不是块副本）。此外， SRA 还会使用它来测试灾难恢复副本的恢复，并使用 SnapCenter 来执行克隆操作，以及浏览备份副本以还原单个文件。</block>
  <block id="6d30b2619de7fa18e965516b291a1937" category="section-title">存储效率和精简配置</block>
  <block id="616c027f14ee5f1bbc866171c4017141" category="paragraph">NetApp 凭借存储效率创新技术引领行业发展，例如首款针对主工作负载的重复数据删除技术以及实时数据缩减技术，这些技术可增强数据压缩能力并高效存储小文件和 I/O 。ONTAP 支持实时和后台重复数据删除，以及实时和后台数据压缩。</block>
  <block id="8f105eeb6dc3fc4ce0d4758aeab4a256" category="paragraph">下图展示了 ONTAP 存储效率功能的综合影响。</block>
  <block id="4b7a9b58ab55917c054d5a636481a8b8" category="paragraph"><block ref="4b7a9b58ab55917c054d5a636481a8b8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8e89f9787f44321e33f85595321efc66" category="paragraph">以下是在 vSphere 环境中使用 ONTAP 存储效率的建议：</block>
  <block id="c2eea4e122397fa75d749bdbdcd4302d" category="list-text">重复数据删除节省的数据量取决于数据的共性。对于 ONTAP 9.1 及更早版本，重复数据删除在卷级别运行，而对于 ONTAP 9.2 及更高版本中的聚合重复数据删除，则在 AFF 系统上的聚合中的所有卷之间对数据进行重复数据删除。您无需再将类似的操作系统和类似应用程序分组到一个数据存储库中，即可最大程度地节省空间。</block>
  <block id="59eb554aa77d0e4dfdc304b3b914dd76" category="list-text">要在块环境中实现重复数据删除的优势，必须对 LUN 进行精简配置。尽管 VM 管理员仍认为 LUN 占用了已配置的容量，但重复数据删除节省的空间会返回到卷中以用于其他需求。NetApp 建议在同样经过精简配置的 FlexVol 卷中部署这些 LUN （适用于 VMware vSphere 的 ONTAP 工具会将卷大小比 LUN 大 5% 左右）。</block>
  <block id="1e84230a4e75abc233d64344b14fd511" category="list-text">此外，还建议对 NFS FlexVol 卷进行精简配置（这是默认设置）。在 NFS 环境中，使用精简配置卷的存储和 VM 管理员可以立即看到重复数据删除节省的空间。</block>
  <block id="b26ed63d0f1199652537e2c4b6752130" category="list-text">也可以对 VM 进行精简配置适用场景， NetApp 通常建议使用精简配置的 VMDK ，而不是厚 VMDK 。使用精简配置时，请确保使用适用于 VMware vSphere ， ONTAP 的 ONTAP 工具或其他可用工具监控可用空间，以避免出现空间不足问题。</block>
  <block id="041f3a2c9d939c181dbd2a95595455d0" category="list-text">请注意，在 ONTAP 系统中使用精简配置时不会影响性能；数据会写入可用空间，以便最大程度地提高写入性能和读取性能。尽管如此， Microsoft 故障转移集群或其他低延迟应用程序等某些产品可能需要有保障或固定的配置，因此最好遵循这些要求来避免出现支持问题。</block>
  <block id="473c8efc5f9b8640820a9cc1f9c84862" category="list-text">要最大程度地节省重复数据删除的空间，请考虑在基于硬盘的系统上计划后台重复数据删除，或者在 AFF 系统上计划自动后台重复数据删除。但是，计划的进程在运行时会使用系统资源，因此，理想情况下，应将其计划在活动较少的时间（例如周末）或更频繁地运行，以减少要处理的更改后的数据量。AFF 系统上的自动后台重复数据删除对前台活动的影响要小得多。后台数据压缩（对于基于硬盘的系统）也会占用资源，因此，只能考虑对性能要求有限的二级工作负载进行数据压缩。</block>
  <block id="dd76252ea7a50def2a98f218cb1505b4" category="inline-link">知识库文章</block>
  <block id="ac2fab512a521d04e53c7257ef490187" category="list-text">NetApp AFF 系统主要使用实时存储效率功能。使用 7- 模式过渡工具， SnapMirror 或卷移动等使用块复制的 NetApp 工具将数据移动到其中时，运行数据压缩和数据缩减扫描程序可以最大程度地节省效率。查看此 NetApp 支持<block ref="a24ae202a787a3e4695f02339b72bb57" category="inline-link-rx"></block> 了解更多详细信息。</block>
  <block id="af21d2d4e0d0faaa6435e780ed7fbc49" category="list-text">Snapshot 副本可能会锁定可通过数据压缩或重复数据删除来减少的块。使用计划的后台效率扫描程序或一次性扫描程序时，请确保在创建下一个 Snapshot 副本之前运行并完成这些扫描程序。检查 Snapshot 副本和保留情况，确保仅保留所需的 Snapshot 副本，尤其是在运行后台或扫描程序作业之前。</block>
  <block id="8f4468ee9f4f074a9f705cd8240de3d9" category="paragraph">下表为不同类型的 ONTAP 存储上的虚拟化工作负载提供了存储效率准则：</block>
  <block id="68eaabb91b0d1c52be44217a24f27b91" category="cell">工作负载</block>
  <block id="84f3306d313cbbe707b0df3807aa77ef" category="cell">存储效率准则</block>
  <block id="5325da9878854628027602da18e5fc14" category="cell">Flash Pool</block>
  <block id="9aa1187640093122ffdb7e1c18f8586d" category="cell">硬盘驱动器</block>
  <block id="9bbf225892f3ce69fc504d145abe3ded" category="cell">VDI 和 SVI</block>
  <block id="1be6174441cf80d01c59eb7a9c004498" category="paragraph">对于主工作负载和二级工作负载，请使用：</block>
  <block id="738b6df06bc30a1f2fa6d500095bfceb" category="list-text">自适应实时压缩</block>
  <block id="f801303ba7009e27cce2fe9a73dc5ebe" category="list-text">实时重复数据删除</block>
  <block id="f94a70bfe4407315e07db5e64706e531" category="list-text">后台重复数据删除</block>
  <block id="95f3762d2d933ff2c0f6e30ef2c767c9" category="list-text">实时数据缩减</block>
  <block id="22be9b04282591df89574efb0e9d2315" category="paragraph">对于主工作负载，请使用：</block>
  <block id="e37f23785e68eb0a9d5afd7457b0903e" category="paragraph">对于二级工作负载，请使用：</block>
  <block id="7901e1160498e7aff40dc0f858411c54" category="list-text">自适应后台数据压缩</block>
  <block id="be0ec3d9251292dd856ea0924ecc6873" category="section-title">服务质量（ QoS ）</block>
  <block id="f437881fa7e42bf0e4563bbec8176f81" category="paragraph">运行 ONTAP 软件的系统可以使用 ONTAP 存储服务质量功能来限制文件， LUN ，卷或整个 SVM 等不同存储对象的吞吐量（以 MBps 和 / 或每秒 I/O 数（ IOPS ）为单位）。</block>
  <block id="fb4aa9631cd742ae8a88f672b4464b37" category="paragraph">吞吐量限制可用于在部署前控制未知工作负载或测试工作负载，以确保它们不会影响其他工作负载。它们还可用于在确定抢占资源的工作负载后对其进行限制。此外，还支持基于 IOPS 的最低服务级别，以便为 ONTAP 9.2 中的 SAN 对象和 ONTAP 9.3 中的 NAS 对象提供稳定一致的性能。</block>
  <block id="3e4a2dc31acddb628ba286d25b1bd36e" category="paragraph">对于 NFS 数据存储库，可以将 QoS 策略应用于整个 FlexVol 卷或其中的单个 VMDK 文件。对于使用 ONTAP LUN 的 VMFS 数据存储库，可以将 QoS 策略应用于包含 LUN 或单个 LUN 的 FlexVol 卷，但不能应用于单个 VMDK 文件，因为 ONTAP 无法识别 VMFS 文件系统。使用 VVOL 时，可以使用存储功能配置文件和 VM 存储策略在各个 VM 上设置最小和 / 或最大 QoS 。</block>
  <block id="534ecd446aac2f9c809eef9064f44aab" category="paragraph">可以使用 MBps 和 / 或 IOPS 设置对象的 QoS 最大吞吐量限制。如果同时使用这两者，则 ONTAP 会强制实施达到的第一个限制。一个工作负载可以包含多个对象，一个 QoS 策略可以应用于一个或多个工作负载。将一个策略应用于多个工作负载时，这些工作负载将共享此策略的总限制。不支持嵌套对象（例如，卷中的文件不能各自具有自己的策略）。QoS 最小值只能以 IOPS 为单位进行设置。</block>
  <block id="040f184b126879657b253b6d258661d9" category="paragraph">目前，以下工具可用于管理 ONTAP QoS 策略并将其应用于对象：</block>
  <block id="de134183bea5df515a6756a539ce6f18" category="list-text">ONTAP 命令行界面</block>
  <block id="6ad5e0a20f49ad6a370454bb3afc9a9e" category="list-text">ONTAP 系统管理器</block>
  <block id="8e23e05fc0865e950d6a3581e0dd8ce9" category="list-text">OnCommand Workflow Automation</block>
  <block id="5ecb6b24c169667ff1a176768115659e" category="list-text">Active IQ Unified Manager</block>
  <block id="8cc4e713850f67a131e9dbf8b997f61e" category="list-text">适用于 ONTAP 的 NetApp PowerShell 工具包</block>
  <block id="fcdb48d0d22627e4910a8352c80bd87a" category="list-text">适用于 VMware vSphere VASA Provider 的 ONTAP 工具</block>
  <block id="e6defd03e0f49585b6d47614713e97f7" category="paragraph">要将 QoS 策略分配给 NFS 上的 VMDK ，请注意以下准则：</block>
  <block id="10509998e8d4c4d7be30fc1d0b6b2a1e" category="list-text">必须将此策略应用于包含实际虚拟磁盘映像的 `vmname- flat.vmdk` ，而不是 `vmname.vmdk` （虚拟磁盘描述符文件）或 `vmname.vmx` （ VM 描述符文件）。</block>
  <block id="2175e0e29bc4b213fa8b9c7afd591b6b" category="list-text">请勿将策略应用于其他 VM 文件，例如虚拟交换文件（`vmname.vswp` ）。</block>
  <block id="8230e9b5c1e9862fedb2c69f7cc5d3d1" category="list-text">使用 vSphere Web Client 查找文件路径（数据存储库 &gt; 文件）时，请注意，它会将 ` flat.vmdk` 和 ` 的信息结合在一起。vmdk` 和仅显示一个名为 ` 的文件。vmdk` 但 ` 的大小为 flat.vmdk` 。将 ` -flat` 添加到文件名中以获取正确的路径。</block>
  <block id="1d4614aca13104c98d5d8cc2d415b941" category="paragraph">要为 LUN （包括 VMFS 和 RDM ）分配 QoS 策略，可以从适用于 VMware vSphere 的 ONTAP 工具主页上的存储系统菜单获取 ONTAP SVM （显示为 Vserver ）， LUN 路径和序列号。选择存储系统（ SVM ），然后选择相关对象 &gt; SAN 。使用 ONTAP 工具之一指定 QoS 时，请使用此方法。</block>
  <block id="8ce0096ff26ebe0a38466de6a64f461d" category="paragraph">使用适用于 VMware vSphere 的 ONTAP 工具或 Virtual Storage Console 7.1 及更高版本，可以轻松地为基于 VVOL 的虚拟机分配最大和最小 QoS 。在为 VVol 容器创建存储功能配置文件时，请在性能功能下指定最大和 / 或最小 IOPS 值，然后将此 SCP 与虚拟机的存储策略联系起来。在创建虚拟机时使用此策略或将此策略应用于现有虚拟机。</block>
  <block id="421c9efa4ff1b039a5378be7bc1e2e49" category="paragraph">在使用适用于 VMware vSphere 9.8 及更高版本的 ONTAP 工具时， FlexGroup 数据存储库可提供增强的 QoS 功能。您可以轻松地在数据存储库中的所有 VM 或特定 VM 上设置 QoS 。有关详细信息，请参见本报告的 FlexGroup 一节。</block>
  <block id="77bb2ba950959bd3f1c55da523ace0be" category="section-title">ONTAP QoS 和 VMware SIOC</block>
  <block id="b2e21dac6070ea83831ff6521a66a447" category="paragraph">ONTAP QoS 和 VMware vSphere 存储 I/O 控制（ SIOC ）是 vSphere 和存储管理员可以结合使用的补充技术，用于管理运行 ONTAP 软件的系统上托管的 vSphere VM 的性能。每个工具都有自己的优势，如下表所示。由于 VMware vCenter 和 ONTAP 的作用域不同，因此某些对象可以由一个系统查看和管理，而不能由另一个系统查看和管理。</block>
  <block id="5ad234cb2cde4266195252a23ca7d84e" category="cell">属性</block>
  <block id="b8b8d1ba8fa345f03438a90f29af5784" category="cell">ONTAP QoS</block>
  <block id="c2a4cb962db2a4a6782b69864f0e411c" category="cell">VMware SIOC</block>
  <block id="aa628d5a66888444926b4dc042458200" category="cell">处于活动状态时</block>
  <block id="688b10fcfff927dee65634e3b3636064" category="cell">策略始终处于活动状态</block>
  <block id="a981c4aa67c29ff2d36fc614d8b28808" category="cell">存在争用时处于活动状态（数据存储库延迟超过阈值）</block>
  <block id="f46e64a82c96db56f3d6657d4fb53f00" category="cell">单位类型</block>
  <block id="878b4223bb85b95d8caf0429d9406cd5" category="cell">IOPS ， MBps</block>
  <block id="3e189a34f422a141311dad231f9ad5b5" category="cell">IOPS ，共享</block>
  <block id="7367a0ec46339213625cbc77d56a9572" category="cell">vCenter 或应用程序范围</block>
  <block id="1faff19290bb64ce8ff6bc1220496881" category="cell">多个 vCenter 环境，其他虚拟机管理程序和应用程序</block>
  <block id="1e664a3cc0ab109fcabcc81b488cebb1" category="cell">单个 vCenter 服务器</block>
  <block id="ebccc9f5c939841d86e5382988dfcc47" category="cell">是否在虚拟机上设置 QoS ？</block>
  <block id="cddd0980ce99890d2ea90288f6b03117" category="cell">仅限 NFS 上的 VMDK</block>
  <block id="928629d8a2a889f5274cad9940a06da0" category="cell">NFS 或 VMFS 上的 VMDK</block>
  <block id="305e85b992089534091855224f60cf75" category="cell">是否为 LUN 设置 QoS （ RDM ）？</block>
  <block id="e798014243cf5682e7fb3aaf4ee7cecf" category="cell">是否为 LUN （ VMFS ）设置 QoS ？</block>
  <block id="9cd021ea9d3c88de723fe9a2e50a2380" category="cell">是否为卷（ NFS 数据存储库）设置 QoS ？</block>
  <block id="c352b53c32380efcf4436926da6d0414" category="cell">是否在 SVM （租户）上设置 QoS ？</block>
  <block id="86aad9b5d177180a5b9e828a8e05e819" category="cell">基于策略的方法？</block>
  <block id="b31c76176f26196c6379a9bcce212d99" category="cell">是；可以由策略中的所有工作负载共享，也可以将其全部应用于策略中的每个工作负载。</block>
  <block id="1ff33557bad923d68973872cacf2e43a" category="cell">是，在 vSphere 6.5 及更高版本中。</block>
  <block id="d5f1465492190ee9d30a09b36f64f4b7" category="cell">需要许可证</block>
  <block id="4cec76d82991abd453484c23f7e3788a" category="cell">随 ONTAP 提供</block>
  <block id="6bb36803f4670824ff9ebdf665654829" category="cell">Enterprise Plus</block>
  <block id="400cc516a4a40acd605aef2cfd4ba4c0" category="section-title">VMware Storage Distributed Resource Scheduler</block>
  <block id="06604b0172f4ae639ffe8c44fa7c77d8" category="paragraph">VMware Storage Distributed Resource Scheduler （ SDRS ）是一项 vSphere 功能，可根据当前 I/O 延迟和空间使用情况将 VM 放置在存储上。然后，它会在数据存储库集群（也称为 Pod ）中的数据存储库之间无中断地移动虚拟机或 VMDK ，从而选择最佳数据存储库，以便将虚拟机或 VMDK 放置在数据存储库集群中。数据存储库集群是一组类似的数据存储库，从 vSphere 管理员的角度来看，这些数据存储库会聚合为一个使用单位。</block>
  <block id="5735cfd4d72f50fd28717ac30361b503" category="paragraph">在将 SDRS 与适用于 VMware vSphere 的 NetApp ONTAP 工具结合使用时，您必须先使用此插件创建数据存储库，使用 vCenter 创建数据存储库集群，然后将此数据存储库添加到其中。创建数据存储库集群后，可以直接从详细信息页面上的配置向导将其他数据存储库添加到数据存储库集群中。</block>
  <block id="b028cce2007c32457c41f20d2954c0c2" category="paragraph">有关 SDRS 的其他 ONTAP 最佳实践包括：</block>
  <block id="d11eff5be5178b7ba95b06270611ffc8" category="list-text">集群中的所有数据存储库都应使用相同类型的存储（例如 SAS ， SATA 或 SSD ），可以是所有 VMFS 或 NFS 数据存储库，并且具有相同的复制和保护设置。</block>
  <block id="76db7ce67615bbc16da685df79ed0aa9" category="list-text">请考虑在默认（手动）模式下使用 SDRS 。通过此方法，您可以查看建议并决定是否应用这些建议。请注意 VMDK 迁移的以下影响：</block>
  <block id="97f4ed95cb52bb29629002a25cb5039f" category="list-text">在数据存储库之间移动 VMDK 时，通过 ONTAP 克隆或重复数据删除节省的任何空间都将丢失。您可以重新运行重复数据删除以重新获得这些节省。</block>
  <block id="cc1aa351f771fc36d1542fa93e1fac8e" category="list-text">SDRS 移动 VMDK 后， NetApp 建议在源数据存储库中重新创建 Snapshot 副本，因为空间会被移动的虚拟机锁定。</block>
  <block id="09a99cbc4fb85d10c7af970e79032a05" category="list-text">在同一聚合上的数据存储库之间移动 VMDK 没有什么优势， SDRS 无法查看可能共享该聚合的其他工作负载。</block>
  <block id="a30850531baecbfbe4486d4be9e79e30" category="section-title">基于存储策略的管理和 VVOL</block>
  <block id="f2606439d8a3fed353e38254458c0a32" category="paragraph">通过 VMware vSphere 存储感知 API （ VASA ），存储管理员可以轻松地为数据存储库配置定义明确的功能，并允许 VM 管理员在需要时使用这些功能来配置 VM ，而无需彼此交互。值得一看的是，这种方法可以帮助您简化虚拟化存储操作并避免大量琐碎的工作。</block>
  <block id="ad0bd815b4fb6f01acc94f160af3dca7" category="paragraph">在使用 VASA 之前， VM 管理员可以定义 VM 存储策略，但他们必须与存储管理员合作，通常使用文档或命名约定来确定适当的数据存储库。借助 VASA ，存储管理员可以定义一系列存储功能，包括性能，分层，加密和复制。一个卷或一组卷的一组功能称为存储功能配置文件（ Storage Capability Profile ， SCP ）。</block>
  <block id="a3af04d147e48682c8be6bd0c1b66520" category="paragraph">SCP 支持对 VM 的数据 VVol 执行最小和 / 或最大 QoS 。只有 AFF 系统才支持最低 QoS 。适用于 VMware vSphere 的 ONTAP 工具包含一个信息板，用于显示 ONTAP 系统上 VVol 的 VM 粒度性能和逻辑容量。</block>
  <block id="4240fa68f6d9919e6d039c4038175025" category="paragraph">下图显示了适用于 VMware vSphere 9.8 VVol 的 ONTAP 工具信息板。</block>
  <block id="d3fcb217aa8b45eb8a95f8958c1f7746" category="paragraph"><block ref="d3fcb217aa8b45eb8a95f8958c1f7746" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a6257d346f635c1b16a2f39df0830a48" category="paragraph">定义存储功能配置文件后，可以使用该配置文件来使用存储策略来配置 VM ，以确定其要求。通过 VM 存储策略与数据存储库存储功能配置文件之间的映射， vCenter 可以显示一个兼容数据存储库列表以供选择。这种方法称为基于存储策略的管理。</block>
  <block id="ca100a4ba1d4641f17806479f93c8b1a" category="paragraph">VASA 提供了查询存储并将一组存储功能返回到 vCenter 的技术。VASA 供应商提供程序可在存储系统 API 和构造与 vCenter 可识别的 VMware API 之间进行转换。NetApp 的适用于 ONTAP 的 VASA Provider 是作为适用于 VMware vSphere 设备 VM 的 ONTAP 工具的一部分提供的， vCenter 插件提供了用于配置和管理 VVOL 数据存储库的界面，并能够定义存储功能配置文件（ SCP ）。</block>
  <block id="dad160104969c39365dd2cd4c98dd300" category="inline-link">TR-4400</block>
  <block id="79f0d5feb7ec25a16c407f3f585eabb2" category="paragraph">ONTAP 同时支持 VMFS 和 NFS VVol 数据存储库。将 VVOL 与 SAN 数据存储库结合使用可带来 NFS 的一些优势，例如虚拟机级别粒度。下面是一些需要考虑的最佳实践，您可以在中找到追加信息<block ref="4f23d4db151ca74200684ac8aef53fed" category="inline-link-rx"></block>：</block>
  <block id="bd490c925219bcb312338a370589bf70" category="list-text">一个 VVOL 数据存储库可以在多个集群节点上包含多个 FlexVol 卷。最简单的方法是使用一个数据存储库，即使卷具有不同的功能也是如此。SPBM 可确保为 VM 使用兼容的卷。但是，这些卷都必须属于一个 ONTAP SVM ，并使用一个协议进行访问。对于每个协议，每个节点一个 LIF 就足够了。避免在一个 VVOL 数据存储库中使用多个 ONTAP 版本，因为存储功能可能因版本而异。</block>
  <block id="0cc956d6da91fefae9dad9b2c8c9519b" category="list-text">使用适用于 VMware vSphere 的 ONTAP 工具插件创建和管理 VVOL 数据存储库。除了管理数据存储库及其配置文件之外，它还会根据需要自动创建一个协议端点来访问 VVol 。如果使用 LUN ，请注意， LUN PE 会使用 LUN ID 300 及更高版本进行映射。验证 ESXi 主机高级系统设置 `Disk.MaxLUN` 是否允许使用 300 以上的 LUN ID 编号（默认值为 1 ， 024 ）。执行此步骤的方法是，在 vCenter 中选择 ESXi 主机，然后选择配置选项卡，并在高级系统设置列表中找到 `Disk.MaxLUN` 。</block>
  <block id="fac85f355a1eb47127ef1b94e7603924" category="list-text">请勿将适用于 VMware vSphere 的 VASA Provider ， vCenter Server （设备或基于 Windows ）或 ONTAP 工具本身安装或迁移到 VVOL 数据存储库中，因为它们相互依赖，因此会限制您在发生断电或其他数据中心中断时对其进行管理的能力。</block>
  <block id="27bd00c8827fc3d77d1b5650103b676f" category="list-text">定期备份 VASA Provider 虚拟机。至少为包含 VASA Provider 的传统数据存储库创建每小时 Snapshot 副本。有关保护和恢复 VASA Provider 的详细信息，请参见此部分<block ref="9d642870dca1748c69f7aa0b6fb95a89" category="inline-link-rx"></block>。</block>
  <block id="2d2d2e356f9ab117b7d2a58d42cc5988" category="paragraph">下图显示了 VVOL 组件。</block>
  <block id="6aadcb77504dae1dbfed2e4d1c969158" category="paragraph"><block ref="6aadcb77504dae1dbfed2e4d1c969158" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0ce8b0e3e0d7dc7f39c62fb74a28b3bf" category="section-title">云迁移和备份</block>
  <block id="4fe11b4a91ff38ec9933009a15dd5b0b" category="paragraph">ONTAP 的另一个优势是广泛支持混合云，将内部私有云中的系统与公有云功能相结合。以下是可与 vSphere 结合使用的一些 NetApp 云解决方案：</block>
  <block id="67464b4510c09197c8a5e16ba6702435" category="list-text">* 云卷。 * NetApp Cloud Volumes Service for AWS 或 GCP 以及 Azure NetApp Files for ANF 可在领先的公有云环境中提供高性能，多协议托管存储服务。它们可以直接由 VMware Cloud VM 子系统使用。</block>
  <block id="0ac7b95ec26051fb8842ae35427ecc22" category="list-text">* Cloud Volumes ONTAP 。 * NetApp Cloud Volumes ONTAP 数据管理软件可在您选择的云中控制，保护，灵活性和效率您的数据。Cloud Volumes ONTAP 是基于 NetApp ONTAP 存储软件构建的云原生数据管理软件。与 Cloud Manager 结合使用，可与内部 ONTAP 系统一起部署和管理 Cloud Volumes ONTAP 实例。利用高级 NAS 和 iSCSI SAN 功能以及统一数据管理，包括 Snapshot 副本和 SnapMirror 复制。</block>
  <block id="2a11701c0c01affc0ce96eb0d0c16ed9" category="list-text">* 云服务。 * 使用 Cloud Backup Service 或 SnapMirror 云保护数据免受使用公有云存储的内部系统的影响。Cloud Sync 有助于在 NAS ，对象存储和 Cloud Volumes Service 存储之间迁移和保持数据同步。</block>
  <block id="fa9b5353337118a51ced7968bccc02a0" category="inline-link">存储 VM 的更多 Snapshot 副本</block>
  <block id="c79f1f00e1e3c8f100e8604eec888859" category="list-text">* FabricPool 。 * FabricPool 可为 ONTAP 数据快速轻松地分层。Snapshot 副本中的冷块可以迁移到公有云或私有 StorageGRID 对象存储中的对象存储，并在再次访问 ONTAP 数据时自动重新调用。或者，使用对象层作为已由 SnapVault 管理的数据的第三级保护。这种方法可以让您做到<block ref="1d0add9d2d81e2d7e790f727021e53aa" category="inline-link-rx"></block> 在主和 / 或二级 ONTAP 存储系统上。</block>
  <block id="1a7072854c9dd945a98f4314b3f77408" category="list-text">* ONTAP Select 。 * 使用 NetApp 软件定义的存储将您的私有云扩展到 Internet 上的远程设施和办公室，您可以在这些设施和办公室使用 ONTAP Select 支持块和文件服务以及您在企业数据中心拥有的相同 vSphere 数据管理功能。</block>
  <block id="79aec220098057ef8c0e46281a45d6c2" category="paragraph">在设计基于 VM 的应用程序时，请考虑未来的云移动性。例如，与其将应用程序和数据文件放在一起，不如对数据使用单独的 LUN 或 NFS 导出。这样，您就可以将虚拟机和数据单独迁移到云服务。</block>
  <block id="af63597853dc0983258c8f86a12aae0b" category="section-title">vSphere 数据加密</block>
  <block id="eb969673f581d94df982f8e2a6001f30" category="paragraph">如今，通过加密保护空闲数据的需求日益增长。虽然最初的重点是财务和医疗保健信息，但对保护所有信息的兴趣日益增加，无论这些信息存储在文件，数据库还是其他数据类型中。</block>
  <block id="77652ecf0c76f1d4194171dc720320be" category="paragraph">运行 ONTAP 软件的系统可通过空闲加密轻松保护任何数据。NetApp 存储加密（ NetApp Storage Encryption ， NSE ）使用带有 ONTAP 的自加密磁盘驱动器来保护 SAN 和 NAS 数据。NetApp 还提供 NetApp 卷加密和 NetApp 聚合加密，这是一种基于软件的简单方法，用于对任何磁盘驱动器上的卷进行加密。此软件加密不需要特殊的磁盘驱动器或外部密钥管理器， ONTAP 客户无需额外付费即可使用。您可以在不中断客户端或应用程序的情况下升级并开始使用它，并且它们已通过 FIPS 140-2 1 级标准（包括板载密钥管理器）的验证。</block>
  <block id="937a352e0f824ff55e4cd50c8e3b051e" category="paragraph">可以通过多种方法保护在 VMware vSphere 上运行的虚拟化应用程序的数据。一种方法是在子操作系统级别使用虚拟机中的软件保护数据。vSphere 6.5 等较新的虚拟机管理程序现在支持在 VM 级别进行加密，这是另一种替代方案。但是， NetApp 软件加密简单易用，并且具有以下优势：</block>
  <block id="92fbd315c4413db381567a775570b78c" category="list-text">* 对虚拟服务器 CPU 没有影响。 * 某些虚拟服务器环境需要为其应用程序提供每个可用的 CPU 周期，但测试表明，使用虚拟机管理程序级别的加密最多需要 5 倍的 CPU 资源。即使加密软件支持将 Intel 的 AES-NI 指令集用于卸载加密工作负载（就像 NetApp 软件加密一样），由于需要使用与旧版服务器不兼容的新 CPU ，此方法也可能不可行。</block>
  <block id="6abee98aea26f85e6f0fe8d4db70f998" category="list-text">* 包括板载密钥管理器。 * NetApp 软件加密包括板载密钥管理器，无需额外付费，无需购买和使用复杂的高可用性密钥管理服务器即可轻松启动。</block>
  <block id="c216121021de8554d33503ef6616b256" category="list-text">* 对存储效率没有影响。 * 重复数据删除和数据压缩等存储效率技术目前已广泛应用，是经济高效地使用闪存磁盘介质的关键。但是，加密数据通常无法进行重复数据删除或压缩。与其他方法不同， NetApp 硬件和存储加密的运行级别较低，并允许充分利用行业领先的 NetApp 存储效率功能。</block>
  <block id="5f9aa8333f218d1c21e67c8608a48672" category="list-text">* 轻松的数据存储库粒度加密。 * 借助 NetApp 卷加密，每个卷都获得自己的 AES 256 位密钥。如果需要更改，只需使用一个命令即可。如果您有多个租户或需要为不同部门或应用程序证明独立加密，则此方法非常适合。此加密在数据存储库级别进行管理，比管理单个虚拟机要简单得多。</block>
  <block id="088124cfa6d59c647e63177c5a4af318" category="paragraph">开始使用软件加密非常简单。安装许可证后，只需通过指定密码短语来配置板载密钥管理器，然后创建新卷或移动存储端卷以启用加密即可。NetApp 正在努力在其未来版本的 VMware 工具中增加对加密功能的集成支持。</block>
  <block id="c95fa5b56a01e5c1a80c540c1ab1a750" category="paragraph">通过 Active IQ Unified Manager 可以查看虚拟基础架构中的虚拟机，并监控虚拟环境中的存储和性能问题并对其进行故障排除。</block>
  <block id="be75250c2f30870dc1e359b4ade2a767" category="paragraph">ONTAP 上的典型虚拟基础架构部署包含多个组件，这些组件分布在计算层，网络层和存储层上。VM 应用程序中的任何性能滞后都可能是由于各个层的各个组件同时面临的延迟造成的。</block>
  <block id="d1734f6f2e65a1488896f74695db5254" category="paragraph">以下屏幕截图显示了 Active IQ Unified Manager 虚拟机视图。</block>
  <block id="8aa017c9f67ad32dd7301ecf52b61d72" category="paragraph"><block ref="8aa017c9f67ad32dd7301ecf52b61d72" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2118336fa447fcc0f213cb8c40c516af" category="paragraph">Unified Manager 以拓扑视图形式呈现虚拟环境的底层子系统，用于确定计算节点，网络或存储是否发生延迟问题描述。此视图还会突出显示导致执行补救步骤和解决底层问题描述时出现性能滞后的特定对象。</block>
  <block id="d8a78b994fcd4e04901203a2e7bc6414" category="paragraph">以下屏幕截图显示了 AIQUM 扩展拓扑。</block>
  <block id="e9659be2b7d3d69eccdb443ed2acec75" category="paragraph"><block ref="e9659be2b7d3d69eccdb443ed2acec75" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d336a329d910c32fb90337a372f596fc" category="summary">近 20 年来， NetApp ONTAP 软件一直是 VMware vSphere 环境中的领先存储解决方案，并不断增加创新功能来简化管理，同时降低成本。本文档介绍了适用于 vSphere 的 ONTAP 解决方案，其中包括用于简化部署，降低风险和简化管理的最新产品信息和最佳实践。</block>
  <block id="952fd691754e388c7b7ba473cf410aff" category="doc">TR-4597 ：适用于 ONTAP 的 VMware vSphere</block>
  <block id="b4191f5f6b40e39be6030dbbc9052330" category="paragraph">NetApp 公司 Karl Konnerth</block>
  <block id="bfa7e7fc7c6bf4cc4e4c5c74b09763eb" category="paragraph">最佳实践是指南和兼容性列表等其他文档的补充。它们是根据 NetApp 工程师和客户的实验室测试和丰富的现场经验开发的。它们可能并不是在每个环境中都能使用的唯一受支持的实践，但它们通常是最简单的解决方案，可满足大多数客户的需求。</block>
  <block id="737453909be77692f8cfdf08a17cee61" category="inline-link-macro">ONTAP 和 vSphere 版本专用信息</block>
  <block id="18b198d3d2381f05dd78bab3c8cec60c" category="paragraph">本文档重点介绍在 vSphere 6.0 或更高版本上运行的 ONTAP （ 9.x ）的最新版本中的功能。请参见一节 <block ref="4c9a6d8ccb9dfca3b5ae6e43e9663c99" category="inline-link-macro-rx"></block> 有关特定版本的详细信息。</block>
  <block id="4b401b0a40ae220c77961312c8238cdb" category="paragraph">成千上万的客户之所以选择 ONTAP 作为其适用于 vSphere 的存储解决方案，有许多原因，例如支持 SAN 和 NAS 协议的统一存储系统，使用节省空间的 NetApp Snapshot 副本提供强大的数据保护功能， 以及大量工具，可帮助您管理应用程序数据。使用与虚拟机管理程序不同的存储系统，您可以卸载许多功能，并最大程度地提高对 vSphere 主机系统的投资。这种方法不仅可以确保主机资源专注于应用程序工作负载，还可以避免存储操作对应用程序造成随机性能影响。</block>
  <block id="0f50acddbdbb9aa9712a471f2276e655" category="paragraph">将 ONTAP 与 vSphere 结合使用是一个很好的组合，可帮助您降低主机硬件和 VMware 软件支出。您还可以通过稳定一致的高性能以更低的成本保护数据。由于虚拟化工作负载是移动的，因此您可以使用 Storage vMotion 探索不同的方法，以便在 VMFS ， NFS 或 VVOL 数据存储库之间移动 VM ，所有这些都位于同一存储系统上。</block>
  <block id="90977175b761542615a11f2b96cc4cbd" category="paragraph">以下是客户目前重视的关键因素：</block>
  <block id="dc4489aacb3c4d74b8253c49732b73e9" category="list-text">* 统一存储。 * 运行 ONTAP 软件的系统在多个重要方面实现了统一。最初，这种方法既指 NAS 协议，也指 SAN 协议，而 ONTAP 除了在 NAS 中具有最初的优势之外，仍然是 SAN 的领先平台。在 vSphere 环境中，这种方法还可能意味着为虚拟桌面基础架构 (VDI) 和虚拟服务器基础架构（ VSI ）提供一个统一的系统。与传统企业阵列相比，运行 ONTAP 软件的系统的 VSI 成本通常更低，但具有高级存储效率功能，可以在同一系统中处理 VDI 。ONTAP 还统一了从 SSD 到 SATA 的各种存储介质，并可轻松地将其扩展到云。无需购买一个闪存阵列即可提高性能，一个 SATA 阵列可用于归档，以及单独的系统可用于云。ONTAP 将所有这些问题联系在一起。</block>
  <block id="ec8cd066c60323f007135b1f083b64de" category="list-text">* 基于虚拟卷和存储策略的管理。 * NetApp 是 VMware 在 vSphere 虚拟卷（ VVOL ）开发方面的早期设计合作伙伴，为 VVOL 和 VMware vSphere 存储感知 API （ VASA ）提供架构输入和早期支持。这种方法不仅为 VMFS 提供了粒度虚拟机存储管理，还支持通过基于存储策略的管理实现存储配置自动化。通过这种方法，存储架构师可以设计具有不同功能的存储池， VM 管理员可以轻松地使用这些功能。ONTAP 在 VVOL 规模方面处于存储行业的领先地位，在一个集群中支持数十万个 VVOL ，而企业级阵列和小型闪存阵列供应商则支持每个阵列仅支持数千个 VVOL 。此外， NetApp 还在推动细粒度虚拟机管理的发展，即将推出支持 VVOL 3.0 的功能。</block>
  <block id="fd5311fb87e61b58d3c3d278df26af4f" category="list-text">* 存储效率。 * 虽然 NetApp 率先为生产工作负载提供重复数据删除功能，但这一创新并不是这方面的第一项或最后一项创新。它从 ONTAP Snapshot 副本开始，该副本是一种节省空间的数据保护机制，不会影响性能，同时还采用了 FlexClone 技术，可即时为 VM 创建读 / 写副本，以供生产和备份使用。NetApp 继续提供包括重复数据删除，数据压缩和零块重复数据删除在内的实时功能，以从昂贵的 SSD 中挤出最大的存储空间。最近， ONTAP 增加了使用数据缩减将较小的 I/O 操作和文件打包到磁盘块中的功能。这些功能相结合，客户发现 VSI 可节省高达 5 ： 1 的空间， VDI 可节省高达 30 ： 1 的空间。</block>
  <block id="bb73602f3344c326a7b63c94db24362a" category="list-text">* 混合云。 * 无论是用于内部私有云，公有云基础架构还是结合两者优势的混合云， ONTAP 解决方案均可帮助您构建数据网络结构，以简化和优化数据管理。从高性能全闪存系统开始，然后将其与磁盘或云存储系统结合使用，以实现数据保护和云计算。您可以选择 Azure ， AWS ， IBM 或 Google 云来优化成本并避免受制于云。根据需要利用对 OpenStack 和容器技术的高级支持。NetApp 还为 ONTAP 提供基于云的备份（ SnapMirror 云， Cloud Backup Service 和 Cloud Sync ）以及存储分层和归档工具（ FabricPool ），以帮助降低运营支出并利用云的广泛覆盖范围。</block>
  <block id="0c157ce4e4fd6289dbf0b282993c2f80" category="list-text">等等。 * 利用 NetApp AFF A 系列阵列的极致性能，在管理成本的同时加快虚拟化基础架构的运行速度。使用横向扩展 ONTAP 集群享受从维护到升级到完全更换存储系统的无中断运行。利用 NetApp 加密功能保护空闲数据，无需额外付费。通过精细的服务质量功能确保性能满足业务服务级别要求。它们都属于行业领先的企业数据管理软件 ONTAP 所提供的广泛功能。</block>
  <block id="2093983846bbd6cd7e3d486531259f7d" category="summary">此页面介绍了可用于 ONTAP 和 VMware vSphere 的混合云功能。</block>
  <block id="df94231e8c7a2b7372365ba3eb8ad621" category="doc">采用 ONTAP 和 vSphere 的混合云</block>
  <block id="c689fcb3c54ae34ac006a005e03aad07" category="section-title">关于混合云</block>
  <block id="cc81a55aaf5bd2bdf603a2aea92a875a" category="paragraph">无论是用于内部私有云，公共云基础架构还是结合两者优势的混合云， ONTAP 解决方案都可以帮助您构建数据网络结构，以简化和优化数据管理。从高性能全闪存系统开始，然后将其与磁盘或云存储系统结合使用，以实现数据保护和云计算。</block>
  <block id="9afb01441ce427bb3863eaccd46b9b5d" category="paragraph">您可以选择 Azure ， AWS ， IBM 或 Google 云来优化成本并避免受制于云。根据需要利用对 OpenStack 和容器技术的高级支持。</block>
  <block id="8a61dac106bf2a7f3b869c8ff58c4ce5" category="paragraph">数据保护通常是客户开始云之旅时首先尝试的事情。保护可以像密钥数据的异步复制一样简单，也可以像整个热备份站点一样复杂。数据保护主要基于 NetApp SnapMirror 技术。</block>
  <block id="d059ff0a497ad1427248dbb8f770b1d5" category="paragraph">一些客户选择将整个工作负载迁移到云。这可能比仅仅使用云进行数据保护更加复杂，但 ONTAP 让迁移变得更加轻松，因为您不必重新编写应用程序即可使用基于云的存储。云中的 ONTAP 与内部 ONTAP 的工作原理相同。您的内部 ONTAP 系统提供了数据效率功能，可用于在较少的物理空间中存储更多数据，并将很少使用的数据分层到较低的存储成本。无论您是使用混合云配置还是将整个工作负载迁移到云， ONTAP 都可以最大限度地提高存储性能和效率。</block>
  <block id="ad622d292f56f20b32a61fe1b8bd2f56" category="paragraph">NetApp 还为 ONTAP 提供基于云的备份（ SnapMirror 云， Cloud Backup Service 和 Cloud Sync ）以及存储分层和归档工具（ FabricPool ），以帮助降低运营支出并利用云的广泛覆盖范围。</block>
  <block id="49c437176039e1c910728eac1f332689" category="paragraph">下图提供了一个混合云使用情形示例。</block>
  <block id="e61ead4102c89a9758572df81301a1d2" category="inline-image-macro">混合云</block>
  <block id="9188eeccf6b5386d9573cea87cf05102" category="paragraph"><block ref="9188eeccf6b5386d9573cea87cf05102" category="inline-image-macro-rx" type="image"></block></block>
  <block id="293f510d2162f186910d817d97121159" category="inline-link">ONTAP 和云</block>
  <block id="3963100a9d31ca50911a23ac5c87aca1" category="admonition">有关 ONTAP 和混合云的详细信息，请参见<block ref="92883b1d8840f28e1ad4810811bf56b5" category="inline-link-rx"></block> 在 ONTAP 9 文档中心。</block>
  <block id="c5cd657df037c277c37216b73efb0b08" category="summary">如果可能，请始终使用 ONTAP 工具配置数据存储库和卷。这样可以确保卷，接合路径， LUN ， igroup ，导出策略， 以及其他设置均以兼容的方式进行配置。</block>
  <block id="d3b26e9021e83573a3d2a9050400a33a" category="doc">操作最佳实践</block>
  <block id="f02207fb26160d7e47cf5ea35d07df03" category="section-title">数据存储库和协议</block>
  <block id="4d15db58f26b374b36c283df6b5a5fc1" category="paragraph">通过 SRA 使用基于阵列的复制时， SRM 支持在 ONTAP 9 中使用 iSCSI ，光纤通道和 NFS 版本 3 。对于使用传统或 VVol 数据存储库的 NFS 版本 4.1 ， SRM 不支持基于阵列的复制。</block>
  <block id="61f54ceeb0338787a2ee2d801cbc62cd" category="paragraph">要确认连接，请始终验证您是否可以从目标 ONTAP 集群在灾难恢复站点挂载和卸载新的测试数据存储库。测试要用于数据存储库连接的每个协议。最佳做法是使用 ONTAP 工具创建测试数据存储库，因为它正在按照 SRM 的指示执行所有数据存储库自动化。</block>
  <block id="0ac3e8abbf45a28af68d22b0f59a973e" category="paragraph">每个站点的 SAN 协议都应是同构的。您可以混合使用 NFS 和 SAN ，但不应在站点内混合使用 SAN 协议。例如，您可以在站点 A 中使用 FCP ，在站点 B 中使用 iSCSI站点 A 不应同时使用 FCP 和 iSCSI原因是 SRA 不会在恢复站点创建混合 igroup ，并且 SRM 不会筛选为 SRA 提供的启动程序列表。</block>
  <block id="150f8d9d5018ff00285d9aa158451d7b" category="paragraph">先前的指南建议创建 LIF 以实现数据位置化。也就是说，始终使用物理拥有卷的节点上的 LIF 挂载数据存储库。在现代版本的 ONTAP 9 中，不再需要此功能。只要可能，如果给定的是集群范围的凭据， ONTAP 工具仍会选择在数据本地的 LIF 之间进行负载平衡，但对于高可用性或高性能而言，这并不是一项要求。</block>
  <block id="ef6e8713285283721507f92e3c3ec674" category="paragraph">可以将 NetApp ONTAP 9 配置为自动删除 Snapshot 副本，以便在自动调整大小无法提供足够紧急容量时，在空间不足的情况下保持正常运行时间。此功能的默认设置不会自动删除 SnapMirror 创建的 Snapshot 副本。如果删除了 SnapMirror Snapshot 副本，则 NetApp SRA 无法反转并重新同步受影响卷的复制。要防止 ONTAP 删除 SnapMirror Snapshot 副本，请将 Snapshot 自动删除功能配置为 try 。</block>
  <block id="a4f47f677f45e1e7075186d98e4f3ec1" category="paragraph">对于包含 SAN 数据存储库的卷，卷自动大小应设置为 `grow` ；对于 NFS 数据存储库，应设置为 `grow_shrink` 。请参见<block ref="ee2474fa4563985f2f3ebe16d4e1ab3a" category="inline-link-rx"></block> 用于特定语法。</block>
  <block id="e6955db66b8dc4aee170ebdb0b560249" category="section-title">SPBM 和 VVOL</block>
  <block id="3077a08ffed60acebf18d37874130d44" category="paragraph">从 SRM 8.3 开始，支持使用 VVOL 数据存储库保护 VM 。在 ONTAP 工具设置菜单中启用 VVOL 复制后， VASA Provider 会将 SnapMirror 计划公开到 VM 存储策略中，如以下屏幕截图所示。</block>
  <block id="399c1894baf71c0529aa0fba66ea18fb" category="paragraph">以下示例显示了 VVOL 复制的启用情况。</block>
  <block id="b180e7f35111dca8acd6c56cdbcabb3e" category="paragraph"><block ref="b180e7f35111dca8acd6c56cdbcabb3e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="be41c3baf700984021c43e2e6b661b0a" category="paragraph">以下屏幕截图提供了创建 VM 存储策略向导中显示的 SnapMirror 计划示例。</block>
  <block id="43c130b36e9e2b3d61409aa974f89fc7" category="paragraph"><block ref="43c130b36e9e2b3d61409aa974f89fc7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f6292d9eb6ea467a3c3560a65b7f63b5" category="paragraph">ONTAP VASA Provider 支持故障转移到不同的存储。例如，系统可以从边缘位置的 ONTAP Select 故障转移到核心数据中心的 AFF 系统。无论存储相似性如何，您都必须始终为启用了复制的 VM 存储策略配置存储策略映射和反向映射，以确保在恢复站点提供的服务满足预期和要求。以下屏幕截图突出显示了一个示例策略映射。</block>
  <block id="783a951245ce43eb84161804072a38c6" category="paragraph"><block ref="783a951245ce43eb84161804072a38c6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1eb90dc8f7adfd00c74af3b815e2ac15" category="section-title">为 VVOL 数据存储库创建复制的卷</block>
  <block id="18231879821321e0aed7de84fe876766" category="paragraph">与以前的 VVOL 数据存储库不同，复制的 VVOL 数据存储库必须在启用复制的情况下从头开始创建，并且它们必须使用在具有 SnapMirror 关系的 ONTAP 系统上预创建的卷。这需要预先配置集群对等和 SVM 对等。这些活动应由 ONTAP 管理员执行，因为这样可以在跨多个站点管理 ONTAP 系统的人员与主要负责 vSphere 操作的人员之间严格划分职责。</block>
  <block id="0a8c8293003bf411817ef3cedf18a2a9" category="paragraph">这代表 vSphere 管理员提出了一项新要求。由于卷是在 ONTAP 工具的范围之外创建的，因此在定期计划的重新发现期间之前，它不会意识到 ONTAP 管理员所做的更改。因此，最好在创建要用于 VVol 的卷或 SnapMirror 关系时始终运行重新发现。只需右键单击主机或集群，然后选择 NetApp ONTAP tools &gt; Update Host and Storage Data ，如以下屏幕截图所示。</block>
  <block id="dd5e006520a09e3975e52f6fb8991fd2" category="paragraph"><block ref="dd5e006520a09e3975e52f6fb8991fd2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="550d51e15336d4a33bcbb0f26a6810f7" category="paragraph">对于 VVOL 和 SRM ，应注意一个事项。切勿在同一个 VVOL 数据存储库中混用受保护和未受保护的 VM 。原因是，在使用 SRM 故障转移到灾难恢复站点时，灾难恢复中只会使属于保护组的 VM 联机。因此，在重新保护（将 SnapMirror 从灾难恢复反转至生产环境）时，您可能会覆盖未进行故障转移且可能包含有价值数据的 VM 。</block>
  <block id="6d717f70d89096b731dfc63d7a1379e1" category="section-title">关于阵列对</block>
  <block id="6dd3f3008fe81f402905b00c8dca007c" category="paragraph">系统会为每个阵列对创建一个阵列管理器。使用 SRM 和 ONTAP 工具，每个阵列配对都在 SVM 的范围内完成，即使您使用的是集群凭据也是如此。这样，您可以根据租户分配给他们管理的 SVM 在租户之间划分灾难恢复工作流。您可以为给定集群创建多个阵列管理器，这些阵列管理器本身可能不对称。您可以在不同的 ONTAP 9 集群之间扇出或扇入。例如，可以将集群 1 上的 SVMA 和 SVM-B 复制到集群 2 上的 SVM-C ，集群 3 上的 SVM-D ，反之亦然。</block>
  <block id="2219228418c053eb593ce0a1f318da47" category="paragraph">在 SRM 中配置阵列对时，应始终按照将其添加到 ONTAP 工具的方式在 SRM 中添加这些阵列对，也就是说，它们必须使用相同的用户名，密码和管理 LIF 。此要求可确保 SRA 与阵列正确通信。以下屏幕截图说明了集群在 ONTAP 工具中的显示方式以及如何将其添加到阵列管理器中。</block>
  <block id="7ec48584a43ed8a9b1dda55398d97cf4" category="paragraph"><block ref="7ec48584a43ed8a9b1dda55398d97cf4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3b34135c8c4d2b14ceb7ebf595f00193" category="section-title">关于复制组</block>
  <block id="6be59afd3c8bb91501f55a7e77ebe794" category="paragraph">复制组包含同时恢复的虚拟机的逻辑集合。ONTAP 工具 VASA Provider 会自动为您创建复制组。由于 ONTAP SnapMirror 复制是在卷级别进行的，因此卷中的所有 VM 都位于同一个复制组中。</block>
  <block id="b57ec021fce4e5261ba61df6f0c013af" category="paragraph">对于复制组以及如何在 FlexVol 卷之间分布虚拟机，需要考虑几个因素。如果旧版 ONTAP 系统缺少聚合级重复数据删除功能，则在同一个卷中对类似 VM 进行分组可以提高存储效率，但分组会增加卷的大小并减少卷 I/O 并发性。在现代 ONTAP 系统中，可以通过在同一聚合中的 FlexVol 卷之间分布虚拟机来实现性能和存储效率的最佳平衡，从而利用聚合级重复数据删除并在多个卷之间实现更大的 I/O 并行化。您可以同时恢复卷中的 VM ，因为一个保护组（如下所述）可以包含多个复制组。此布局的缺点是，由于卷 SnapMirror 不考虑聚合重复数据删除，因此可能会多次通过线缆传输块。</block>
  <block id="c727c1020d3128dd7495a6e3e6f23736" category="paragraph">对于复制组，最后要考虑的一点是，每个复制组本身都是一个逻辑一致性组（不要与 SRM 一致性组相混淆）。这是因为卷中的所有 VM 都会使用同一个快照一起传输。因此，如果您的虚拟机必须彼此一致，请考虑将其存储在同一个 FlexVol 中。</block>
  <block id="9f8a350a2113ea4be6b4e5e5112514a3" category="section-title">关于保护组</block>
  <block id="df77671ab2743af7f1d1457c200eb12c" category="paragraph">保护组用于定义从受保护站点一起恢复的组中的 VM 和数据存储库。受保护站点是指在正常稳定状态操作期间，在保护组中配置的 VM 所在的站点。请务必注意，即使 SRM 可能会为一个保护组显示多个阵列管理器，一个保护组也不能跨越多个阵列管理器。因此，您不应将 VM 文件跨越不同 SVM 上的数据存储库。</block>
  <block id="b148467d645c3613c1c7a2607764c515" category="section-title">关于恢复计划</block>
  <block id="fd28cd9834ad3aa213c4fec2881064b5" category="paragraph">恢复计划定义了在同一过程中恢复的保护组。可以在同一恢复计划中配置多个保护组。此外，要为执行恢复计划提供更多选项，可以在多个恢复计划中包含一个保护组。</block>
  <block id="77aa84394124509e5e4006dcfd18789f" category="paragraph">通过恢复计划， SRM 管理员可以定义恢复工作流，方法是将 VM 分配给优先级组，优先级组从 1 （最高）到 5 （最低）不等，默认值为 3 （中等）。在优先级组中，可以为 VM 配置依赖关系。</block>
  <block id="6d72567442b1f361e3c0e89cbc7dfd6a" category="paragraph">例如，您的公司可能有一个第 1 层业务关键型应用程序，该应用程序的数据库依赖于 Microsoft SQL 服务器。因此，您决定将 VM 置于优先级组 1 中。在优先级组 1 中，您开始规划订单以启动服务。您可能希望 Microsoft Windows 域控制器在 Microsoft SQL 服务器之前启动，而该服务器需要在应用程序服务器之前联机，依此类推。您应将所有这些 VM 添加到优先级组，然后设置依赖关系，因为依赖关系仅适用于给定优先级组。</block>
  <block id="030d749269f8866de516a551b0286001" category="paragraph">NetApp 强烈建议您与应用程序团队合作，了解故障转移场景中所需的操作顺序，并相应地构建恢复计划。</block>
  <block id="cebb1167d3e78885137c837f0abf8026" category="section-title">测试故障转移</block>
  <block id="2772828493452c4a2ff21f8b2b66a1a7" category="paragraph">作为最佳实践，每当对受保护 VM 存储的配置进行更改时，始终执行测试故障转移。这样可以确保在发生灾难时，您可以相信 Site Recovery Manager 能够在预期 RTO 目标内还原服务。</block>
  <block id="6ae8acfc86f5df3426d525fb95767506" category="paragraph">NetApp 还建议偶尔确认子系统中的应用程序功能，尤其是在重新配置 VM 存储之后。</block>
  <block id="bd47371bcd8b3d08d6b4b15481b08d93" category="paragraph">执行测试恢复操作时，会在 ESXi 主机上为 VM 创建一个专用测试气泡网络。但是，此网络不会自动连接到任何物理网络适配器，因此不会在 ESXi 主机之间提供连接。为了允许在灾难恢复测试期间不同 ESXi 主机上运行的 VM 之间进行通信，在灾难恢复站点的 ESXi 主机之间创建了一个物理专用网络。要验证测试网络是否为专用网络，可以通过物理方式或使用 VLAN 或 VLAN 标记来隔离测试气泡网络。必须将此网络与生产网络隔离，因为在恢复 VM 后，不能将其放置在 IP 地址可能与实际生产系统冲突的生产网络上。在 SRM 中创建恢复计划时，可以选择创建的测试网络作为测试期间 VM 连接到的专用网络。</block>
  <block id="2be58fc410ddf2ba9c350135a617944a" category="paragraph">验证测试并使其不再需要后，请执行清理操作。运行清理会将受保护的 VM 恢复到其初始状态，并将恢复计划重置为就绪状态。</block>
  <block id="6f07b53963ee80903f0f13654de2cc3a" category="section-title">故障转移注意事项</block>
  <block id="9d33d94019b4a595a1ea232926a4da1b" category="paragraph">除了本指南中所述的操作顺序之外，在对站点进行故障转移时还需要考虑其他几个注意事项。</block>
  <block id="74abdd5cb502cd65bcf1d7ca484ab0c2" category="paragraph">您可能需要应对的一个问题描述是站点之间的网络差异。某些环境可能能够在主站点和灾难恢复站点使用相同的网络 IP 地址。此功能称为延伸型虚拟 LAN （ VLAN ）或延伸型网络设置。其他环境可能要求主站点使用与灾难恢复站点相对的不同网络 IP 地址（例如，在不同的 VLAN 中）。</block>
  <block id="1b41638d2115765dc12f82d77ce70138" category="paragraph">VMware 提供了多种方法来解决此问题。例如， VMware NSX-T Data Center 等网络虚拟化技术可从操作环境中将整个网络堆栈从第 2 层抽象为第 7 层，从而提供更便携的解决方案。您可以阅读有关使用 SRM 的 NSX-T 选项的更多信息<block ref="99d78d594865360c3d4b527bf0a2a7f6" category="inline-link-rx"></block>。</block>
  <block id="09a74136e56a63c5aba38b89802d9080" category="paragraph">通过 SRM ，您还可以在虚拟机恢复后更改其网络配置。此重新配置包括 IP 地址，网关地址和 DNS 服务器设置等设置。可以在恢复计划中 VM 的属性设置中指定恢复后应用于各个 VM 的不同网络设置。</block>
  <block id="99f0a91111e8acb2462e8df5ecf0ab8f" category="paragraph">要将 SRM 配置为对多个 VM 应用不同的网络设置，而无需编辑恢复计划中每个 VM 的属性， VMware 提供了一个名为 dr-ip-customizer 的工具。有关如何使用此实用程序的信息，请参见 VMware 的文档<block ref="b959814092e3e6cdc8d22e768887e618" category="inline-link-rx"></block>。</block>
  <block id="3c8c527afa8ce5009c8f707f7fd4fabf" category="section-title">重新保护</block>
  <block id="3b496038cb575fc404f8b0783e570f7a" category="paragraph">恢复后，恢复站点将成为新的生产站点。由于恢复操作中断了 SnapMirror 复制，因此新生产站点不会受到任何未来灾难的影响。最佳实践是，在恢复后立即将新生产站点保护到另一站点。如果原始生产站点正常运行， VMware 管理员可以使用原始生产站点作为新的恢复站点来保护新生产站点，从而有效地反转保护方向。只有在发生非灾难性故障时，才可重新保护。因此，原始 vCenter Server ， ESXi 服务器， SRM 服务器和相应的数据库最终必须可恢复。如果没有可用的保护组和新的恢复计划，则必须创建新的保护组和恢复计划。</block>
  <block id="6d80a3efb80520f47b63dc279e1bea3d" category="section-title">故障恢复</block>
  <block id="2bf236f8aceaaff2b305848df524c42e" category="paragraph">从根本上说，故障恢复操作是指方向与以前不同的故障转移。作为最佳实践，在尝试故障恢复或换句话说，故障转移到原始站点之前，您应验证原始站点是否已恢复到可接受的功能级别。如果原始站点仍然受到影响，您应延迟故障恢复，直到故障得到充分修复为止。</block>
  <block id="cb03753531bad31391d7156433b98ae6" category="paragraph">另一个故障恢复最佳实践是，始终在完成重新保护之后以及执行最终故障恢复之前执行测试故障转移。此操作将验证原始站点上的系统是否可以完成此操作。</block>
  <block id="900a3b65ea54b6dcff72ed0d6ac66fdf" category="section-title">重新保护原始站点</block>
  <block id="2a0c13d7b927063987bf931a141f2662" category="paragraph">故障恢复后，您应先向所有利益相关方确认其服务已恢复正常，然后再重新运行重新保护。</block>
  <block id="12d059a2c7519f2e3497b30a71121503" category="paragraph">在故障恢复后运行重新保护实际上会使环境恢复到最初的状态，同时重新运行从生产站点到恢复站点的 SnapMirror 复制。</block>
  <block id="c67281070c0cff762103636210474c30" category="doc">开始使用 NetApp 和 amp ； VMware</block>
  <block id="bbaff12800505b22a853e8b7f4eb6a22" category="inline-link-macro">联系方式</block>
  <block id="11eb332ab75184a78c40c9174e16f520" category="video-title">NetApp 和 VMware ：携手合作更好</block>
  <block id="d3db539e5d56da6e251021138c5fe53f" category="section-title">了解 NetApp 和 VMware 解决方案</block>
  <block id="09f93ac387258fa68c085baba3c8fc44" category="inline-link-macro">NetApp 和 amp ； VMware ：携手合作更好</block>
  <block id="fb758bbc93c23b25607ef41f302d4eef" category="list-text"><block ref="35ef54e3b8ad8ec505bab4b973f86177" category="inline-link-macro-rx"></block></block>
  <block id="b6741313b8f46ab1018ebd6a361c22a4" category="inline-link-macro">ONTAP 9.8 VMware 的最新功能概述</block>
  <block id="d393be6d50183d7362f0adb8bc92ae08" category="list-text"><block ref="d393be6d50183d7362f0adb8bc92ae08" category="inline-link-macro-rx"></block></block>
  <block id="b25a3522acbb33341ccacac99424fcce" category="inline-link-macro">利用适用于 VMware vSphere 的 SnapCenter 插件</block>
  <block id="a65898b7011ddfb663cdba62f90581c6" category="list-text"><block ref="a65898b7011ddfb663cdba62f90581c6" category="inline-link-macro-rx"></block></block>
  <block id="60b0390f50a5ad13d613d49cfe1bce0b" category="inline-link-macro">使用 NetApp 和 NVMe 重新定义 VMware 性能</block>
  <block id="f6dde7f191b6b8f8351902b139ec8672" category="list-text"><block ref="f6dde7f191b6b8f8351902b139ec8672" category="inline-link-macro-rx"></block></block>
  <block id="c576371db342dc9cb166c73b0e157fb5" category="inline-link-macro">基于 AWS 的 VMware Cloud 的低成本高性能环境</block>
  <block id="89487ceb1ada10e49befbbaed3b714ec" category="list-text"><block ref="89487ceb1ada10e49befbbaed3b714ec" category="inline-link-macro-rx"></block></block>
  <block id="92061b0dd7904e2299ac65ed9bc2d6af" category="inline-link-macro">在 NetApp 中推出 VMware Tanzu</block>
  <block id="ae7c9beb8e4adca6da75607ee83e2403" category="list-text"><block ref="ae7c9beb8e4adca6da75607ee83e2403" category="inline-link-macro-rx"></block></block>
  <block id="a88a91878fb958db59873117d16ad078" category="inline-link-macro">Virtual Desktop Infrastructure (VDI) ：按需提供员工工作站</block>
  <block id="9467ff6388811a059199513a0a484f0b" category="list-text"><block ref="9467ff6388811a059199513a0a484f0b" category="inline-link-macro-rx"></block></block>
  <block id="d5e64137a19403f8c1c89f50546b82c5" category="inline-link-macro">VMware on AWS ：架构和服务选项</block>
  <block id="6cb2c8a80e576f132097e4d28cec24cd" category="list-text"><block ref="6cb2c8a80e576f132097e4d28cec24cd" category="inline-link-macro-rx"></block></block>
  <block id="cd4efd0ada1938b240dd48aa08010f04" category="inline-link-macro">使用 NetApp Cloud Volumes Service API 进行编程以优化 AWS 体验</block>
  <block id="f61369e9428a21eb1090be340ef36f16" category="list-text"><block ref="f61369e9428a21eb1090be340ef36f16" category="inline-link-macro-rx"></block></block>
  <block id="6d14f3ca0f5be54f01fd579906dd80bb" category="inline-link-macro">Kubernetes ：在 vSphere 和 Tanzu 上运行 K8s</block>
  <block id="ef8e103737164442c629df5b5d98769d" category="list-text"><block ref="ef8e103737164442c629df5b5d98769d" category="inline-link-macro-rx"></block></block>
  <block id="7e0caac7f6d493fab662f4f4d65ae213" category="section-title">构建虚拟化 Data Fabric</block>
  <block id="f1f4041236ed90e2a5e65e9a3c858875" category="section-title">查看适用于 VMware 的最新 NetApp 解决方案</block>
  <block id="0e8dd76bc961a90df87833953de6d067" category="inline-link-macro">采用 ONTAP 的 VMware vSphere ： NetApp 解决方案</block>
  <block id="cace63c53b42adc885a9eb4be01dba4d" category="list-text"><block ref="cace63c53b42adc885a9eb4be01dba4d" category="inline-link-macro-rx"></block></block>
  <block id="b761cb4d962320708880627e8e2fe971" category="inline-link-macro">采用 ONTAP 的 VMware vSphere 虚拟卷</block>
  <block id="5b90454e2bf0f381c8f7fc928ef6fb9e" category="list-text"><block ref="5b90454e2bf0f381c8f7fc928ef6fb9e" category="inline-link-macro-rx"></block></block>
  <block id="3390e3575b3e341afa2b7172ff5b33a7" category="inline-link-macro">适用于 VMware vSphere 的 SnapCenter 插件</block>
  <block id="730c2cf92bbe409c31ef1f39cf25377a" category="list-text"><block ref="730c2cf92bbe409c31ef1f39cf25377a" category="inline-link-macro-rx"></block></block>
  <block id="c375e5bb7184da46adef700a9a36d674" category="inline-link-macro">NetApp 现代 NVMeoF VMware vSphere 工作负载设计和放大；验证</block>
  <block id="b54be27467e63a98d65e6b17a914e373" category="list-text"><block ref="902dd483e9192a0b4645b4c8be7acbff" category="inline-link-macro-rx"></block></block>
  <block id="b860a89f6215a92f2320f0afe4e0ee05" category="inline-link-macro">适用于 VMware 和和 SQL Server 的 NetApp 现代 NVmeoF 云连接 Flash 解决方案</block>
  <block id="0ebff16085636352cc1aa1e5b0003bdb" category="list-text"><block ref="ac70b8666634dd9095602966c4c61093" category="inline-link-macro-rx"></block></block>
  <block id="eccda9b55035b56259299545d5781136" category="inline-link-macro">借助 VMware Tanzu 和 amp ； ONTAP 加快 Kubernetes 之旅</block>
  <block id="bb79e474557eb86fc30118354eef0039" category="list-text"><block ref="5dd92e330c2d45255a2025ee1eedd52d" category="inline-link-macro-rx"></block></block>
  <block id="7f8cf1c43494d40e935f5e99e38ce659" category="inline-link-macro">降低在 AWS 上运行 VMware Cloud 的成本</block>
  <block id="f0d8a1b084d604c4db4319a2c5bbd522" category="list-text"><block ref="f0d8a1b084d604c4db4319a2c5bbd522" category="inline-link-macro-rx"></block></block>
  <block id="5ab6c918ee903c74a7d7c97b2432ebaf" category="section-title">观看最新 VMware 解决方案的视频演示</block>
  <block id="7128c22bfdae1fe8be75c9a9ee56eca9" category="inline-link-macro">VMware vSphere 和 NetApp ONTAP 的最佳实践</block>
  <block id="04e008204e728ef166ffc8c85db580ed" category="list-text"><block ref="04e008204e728ef166ffc8c85db580ed" category="inline-link-macro-rx"></block></block>
  <block id="d2fa143a4aaef3477f2edb0d92676341" category="inline-link-macro">您的 VMware 环境—让我们使用 ONTAP 在 NVMe-oF 上运行它</block>
  <block id="207681662de4971035cc8d5c9347c986" category="list-text"><block ref="207681662de4971035cc8d5c9347c986" category="inline-link-macro-rx"></block></block>
  <block id="e9c2b8b8a9962013c07f83742ca35f0e" category="inline-link-macro">使用 ONTAP 工具和 VMware SRM 进行 VVOL 灾难恢复</block>
  <block id="8ca7386c3cb63b01ffc6387ba41427ae" category="list-text"><block ref="8ca7386c3cb63b01ffc6387ba41427ae" category="inline-link-macro-rx"></block></block>
  <block id="f156fde75de09cf5f045522cf738b2c7" category="inline-link-macro">使用 ONTAP 工具配置和管理 FlexGroup 数据存储库</block>
  <block id="c2a201ca982ecfefdcfec43a8df28397" category="list-text"><block ref="c2a201ca982ecfefdcfec43a8df28397" category="inline-link-macro-rx"></block></block>
  <block id="977a548ba3853fdac6d708915a1b752a" category="inline-link-macro">NetApp NFS VAAI 插件更新</block>
  <block id="a8e3bfc2dc840604c0168dd5f89aacec" category="list-text"><block ref="a8e3bfc2dc840604c0168dd5f89aacec" category="inline-link-macro-rx"></block></block>
  <block id="233398cd850d9903958583fd85621f6d" category="inline-link-macro">借助 NetApp ONTAP FlexGroup 横向扩展虚拟桌面</block>
  <block id="6ef66ca131701cfdb70302d3099b7550" category="list-text"><block ref="6ef66ca131701cfdb70302d3099b7550" category="inline-link-macro-rx"></block></block>
  <block id="e308c2a1dacddb5bc6ffa093081111e4" category="inline-link-macro">适用于 Data Fabric 的 VMware 备份和恢复</block>
  <block id="9934e59457fa5f31d39a58f1d55ac5d5" category="list-text"><block ref="9934e59457fa5f31d39a58f1d55ac5d5" category="inline-link-macro-rx"></block></block>
  <block id="a81738572d94bce863615a7d94a84051" category="inline-link-macro">借助适用于 VMware vSphere 的 SnapCenter 插件简化数据保护</block>
  <block id="f09e9fdda59d2e9d9172bd89b5dc9369" category="list-text"><block ref="f09e9fdda59d2e9d9172bd89b5dc9369" category="inline-link-macro-rx"></block></block>
  <block id="c10a86f3b9530baf3bed3b02aaaf873f" category="section-title">为 VMware 部署灵活的混合云和现代化应用程序基础架构</block>
  <block id="554cfab3938e21d9270bd6b75931f96f" category="section-title">视频</block>
  <block id="f20368920280b50131814db2f83fda66" category="inline-link-macro">基于 NetApp 全闪存 FAS 构建 VMware 数据存储库</block>
  <block id="8ff6498eeabd53b4271d75f543dc3bc4" category="list-text"><block ref="8ff6498eeabd53b4271d75f543dc3bc4" category="inline-link-macro-rx"></block></block>
  <block id="841a1e2733baa662db1207d5075a798f" category="inline-link-macro">让我们来自动化—利用 ONTAP 构建您的 VMware 云</block>
  <block id="4d0f73eb280cb12c373e099d1c320690" category="list-text"><block ref="4d0f73eb280cb12c373e099d1c320690" category="inline-link-macro-rx"></block></block>
  <block id="f1c2408ffc6e67ac6b34eb8da2b3039c" category="list-text"><block ref="f1c2408ffc6e67ac6b34eb8da2b3039c" category="inline-link-macro-rx"></block></block>
  <block id="253d309203cf1f2c1bb57255bd0a5bdc" category="inline-link-macro">将 VMware VM 迁移到 Google Cloud</block>
  <block id="baa1898009cc7495f8c4e7732ce7433a" category="list-text"><block ref="baa1898009cc7495f8c4e7732ce7433a" category="inline-link-macro-rx"></block></block>
  <block id="7518aab5e189037f632ee46ea9e3cf07" category="video-title">《部署适用于 VMware Tanzu 的动态持久 NetApp 存储》，第 1 部分</block>
  <block id="f86bf601d6e42c44cf076ea1772ae13c" category="video-title">《部署适用于 VMware Tanzu 的动态持久 NetApp 存储》，第 2 部分</block>
  <block id="bf5c12d4eed319d2dc2b2b7279944f71" category="video-title">《部署适用于 VMware Tanzu 的动态持久 NetApp 存储》，第 3 部分</block>
  <block id="d6b9ea32b921a9f56de32062ba4b94f3" category="section-title">博客</block>
  <block id="a398d57165e21c951dd9c9def41598a9" category="inline-link-macro">VMware Cloud on AWS ： Fujitsu 如何使用 CVO 节省数百万美元</block>
  <block id="d750d47d5e87a6c526e7b40e12eab95b" category="list-text"><block ref="d750d47d5e87a6c526e7b40e12eab95b" category="inline-link-macro-rx"></block></block>
  <block id="3ca2b14e719d79aed66780282e879db4" category="section-title">请联系 NetApp 和 VMware 专家</block>
  <block id="20475522c77401af1c203f23942ffda5" category="inline-link-macro">加入 VMware 解决方案论坛</block>
  <block id="1dccc60a61431b3ef3f48709a0f68de7" category="list-text"><block ref="1dccc60a61431b3ef3f48709a0f68de7" category="inline-link-macro-rx"></block></block>
  <block id="a5810200dda7a3f37fc7eae5378cc8f3" category="inline-link-macro">请联系 NetApp 全球服务团队开始使用</block>
  <block id="efb954cbfdbe0c54f04c904a2719b98a" category="list-text"><block ref="efb954cbfdbe0c54f04c904a2719b98a" category="inline-link-macro-rx"></block></block>
  <block id="1f82b18dcba5f32a085bc502cdd0c6b7" category="summary">借助 ONTAP ， Storage Virtual Machine （ SVM ）的概念可在安全多租户环境中提供严格的分段。</block>
  <block id="7520e12a140ccf3de279fe2fd48889e4" category="doc">部署最佳实践</block>
  <block id="1b4574c516231b685bb37b013b789b06" category="section-title">SMT 的 SVM 布局和分段</block>
  <block id="446e04546ec0567eeeeef8e07368ab40" category="paragraph">借助 ONTAP ， Storage Virtual Machine （ SVM ）的概念可在安全多租户环境中提供严格的分段。一个 SVM 上的 SVM 用户无法从另一个 SVM 访问或管理资源。这样，您就可以利用 ONTAP 技术，为在同一集群上管理自己 SRM 工作流的不同业务单位创建单独的 SVM ，从而提高整体存储效率。</block>
  <block id="f98c1d223f34b2fdaf90eab1a3bc6a25" category="paragraph">请考虑使用 SVM 范围的帐户和 SVM 管理 LIF 管理 ONTAP ，这样不仅可以改进安全控制，还可以提高性能。使用 SVM 范围的连接时，性能本身就会更高，因为处理整个集群中的所有资源（包括物理资源）并不需要 SRA 。相反，它只需要了解抽象到特定 SVM 的逻辑资产。</block>
  <block id="849d4d5e8a5d5b2747d8375d2ec03b29" category="paragraph">仅使用 NAS 协议（无 SAN 访问）时，您甚至可以通过设置以下参数来利用新的 NAS 优化模式（请注意，此名称是如此，因为 SRA 和 VASA 在设备中使用相同的后端服务）：</block>
  <block id="05f551a655f40911851a53ba0c721997" category="list-text">登录到控制面板，网址为 ` \https://&lt;IP address&gt; ： 9083` ，然后单击基于 Web 的命令行界面。</block>
  <block id="b0cc185c73ca964d1429a601551c68f5" category="list-text">运行命令 `vp updateconfig -key=enable.qtree.discovery -value=true` 。</block>
  <block id="5f7e35f90689bef91afe9f01257c61ac" category="list-text">运行命令 `vp updateconfig -key=enable.optimed.sra-value=true` 。</block>
  <block id="ba2a1e4d95dc56709260e82cca20a789" category="list-text">运行命令 `vp reloadconfig` 。</block>
  <block id="2d14ca751c8ce5a724606e4f75f02c50" category="section-title">部署适用于 VVOL 的 ONTAP 工具和注意事项</block>
  <block id="fa3a193f1892cf0f45f4a95a35aa3c4b" category="paragraph">如果要将 SRM 与 VVol 结合使用，则必须使用集群范围的凭据和集群管理 LIF 来管理存储。这是因为 VASA Provider 必须了解底层物理架构，才能满足 VM 存储策略的策略要求。例如，如果您的策略需要全闪存存储，则 VASA Provider 必须能够查看哪些系统全闪存。</block>
  <block id="31d279d1cc3bc5a4281567ba697f678d" category="paragraph">另一个部署最佳实践是，切勿将 ONTAP 工具设备存储在其管理的 VVOL 数据存储库上。这可能导致无法启动 VASA Provider ，因为您无法为设备创建交换 VVol ，因为设备已脱机。</block>
  <block id="97399fb37deca0d463aa5c7dc8d064a6" category="section-title">管理 ONTAP 9 系统的最佳实践</block>
  <block id="b4cbecf196108ad163c73c4e4194dde2" category="paragraph">如前所述，您可以使用集群或 SVM 范围的凭据和管理 LIF 来管理 ONTAP 集群。为了获得最佳性能，您可能需要考虑在不使用 VVOL 的情况下使用 SVM 范围的凭据。但是，在执行此操作时，您应了解一些要求，并且确实会丢失某些功能。</block>
  <block id="fec05e53ca7d96aaf3e4c1a1b2502bea" category="list-text">默认 vsadmin SVM 帐户没有执行 ONTAP 工具任务所需的访问级别。因此，您需要创建新的 SVM 帐户。</block>
  <block id="8557644859e03f54860c95ffb0bcfd53" category="list-text">如果您使用的是 ONTAP 9.8 或更高版本， NetApp 建议使用 ONTAP 系统管理器的用户菜单以及 ONTAP 工具设备上提供的 JSON 文件创建一个权限最低的 RBAC 用户帐户，网址为 ` \https://&lt;IP address&gt; ： 9083/VSC/config/` 。使用您的管理员密码下载 JSON 文件。这可以用于 SVM 或集群范围的帐户。</block>
  <block id="a7a83b5e4f375c0585588b9c7ff92219" category="inline-link">NetApp 支持站点工具箱</block>
  <block id="fdfe9ba9104df6a32fff0f859291ea3c" category="paragraph">如果您使用的是 ONTAP 9.6 或更早版本，则应使用中提供的 RBAC User Creator （ RUC ）工具<block ref="bdbf96c18cf8ac76d01fba7057b81b87" category="inline-link-rx"></block>。</block>
  <block id="ea7a3d08d55dc3e8ecf89d2a5d5e302d" category="list-text">由于 vCenter UI 插件， VASA Provider 和 SRA 服务器都是完全集成的服务，因此您必须按照在 vCenter UI for ONTAP Tools 中添加存储的方式在 SRM 中向 SRA 适配器添加存储。否则， SRA 服务器可能无法识别通过 SRA 适配器从 SRM 发送的请求。</block>
  <block id="b473de4177eeaa79a66448798a446db3" category="list-text">使用 SVM 范围的凭据时，不会执行 NFS 路径检查。这是因为物理位置从 SVM 中进行了逻辑抽象。不过，这并不是一个值得关注的发生原因，因为现代 ONTAP 系统在使用间接路径时不再出现任何明显的性能下降。</block>
  <block id="6e62430b92a7c5a0b8512436b163a10d" category="list-text">可能不会报告因存储效率而节省的聚合空间。</block>
  <block id="93d86aa51e0909549d1b1210f887aef3" category="list-text">如果支持，则无法更新负载共享镜像。</block>
  <block id="647d380b52e259fe7ed2e2582bc54b27" category="list-text">可能不会在使用 SVM 范围的凭据管理的 ONTAP 系统上执行 EMS 日志记录。</block>
  <block id="6fe85aae6e8fa231a1f417edfeef3759" category="doc">vSphere VMFS 数据存储库—具有 ONTAP 的 iSCSI 存储后端</block>
  <block id="4f6f7882fc7b858bc0eb3e3a41991494" category="paragraph">本节介绍如何使用 ONTAP iSCSI 存储创建 VMFS 数据存储库。</block>
  <block id="383b1f30f341cb0eff11db96d70e9f50" category="list-text">管理 vSphere 环境和 ONTAP 所需的基本技能。</block>
  <block id="47c341511ad626bfba98caeaa0762774" category="list-text">iSCSI 的 ONTAP 网络端口， SVM 和 LUN 信息</block>
  <block id="f76f5dc5c6861d7938aa8d60b08976c8" category="inline-link-macro">一份完整的 iSCSI 配置工作表</block>
  <block id="275e54409e966e03b62ee630e4856daa" category="list-text"><block ref="275e54409e966e03b62ee630e4856daa" category="inline-link-macro-rx"></block></block>
  <block id="c7e4d06c6b5e45fbb711be2b15976173" category="list-text">iSCSI VMKernel 适配器 IP 信息</block>
  <block id="980e76f4fd03b06bfe740133284e92a9" category="list-text">使用 ONTAP 系统网络数据端口并连接 vSphere 主机</block>
  <block id="3a6f48cf422509b67592ce2a0b4dd558" category="list-text">为 iSCSI 配置的 VLAN</block>
  <block id="a9df884192a193f56d8208439b4d1fca" category="list-text">检查与的兼容性<block ref="3028580b30f2b1d483aad9f9a7a65c7a" category="inline-link-rx"></block>。</block>
  <block id="881de4e9f9e9dba55f3d9f09d3fc8eac" category="inline-link-macro">验证是否支持 iSCSI 配置。</block>
  <block id="6a2fb6d042919f5807315156f926ab10" category="list-text"><block ref="6a2fb6d042919f5807315156f926ab10" category="inline-link-macro-rx"></block></block>
  <block id="f04a1b9690234d25ff072d6719666947" category="inline-link-macro">验证 iSCSI 的 ONTAP 许可证</block>
  <block id="41bf6980693d9ba9f5e7a797fe2f4417" category="list-text"><block ref="0767ceac1f7ac130ade75fb7fae3fc53" category="inline-link-macro-rx"></block>。</block>
  <block id="3ffc628bd3f213f0998146fb5262f366" category="list-text">使用 `ssystem license show` 命令检查是否列出了 iSCSI 。</block>
  <block id="d1b0a5732b3cb229ef0f788fbb095f05" category="list-text">使用 `license add -license-code &lt; 许可证代码 &gt;` 添加许可证。</block>
  <block id="97035bc2443de65f877c3fddd838c6ae" category="inline-link-macro">验证是否已在 SVM 上启用 iSCSI 协议。</block>
  <block id="3807dbdaab3b890b6a293c99c7b46f63" category="list-text"><block ref="3807dbdaab3b890b6a293c99c7b46f63" category="inline-link-macro-rx"></block></block>
  <block id="cb66a92bc9fa6195f8b2914bcf868664" category="list-text">验证 iSCSI 网络逻辑接口在 SVM 上是否可用。</block>
  <block id="da91d0d17d1f671a0af23e7ebb96ec92" category="admonition">使用 GUI 创建 SVM 时，还会创建 iSCSI 网络接口。</block>
  <block id="da6a83da2309e8dbd81bb5b55c7c9602" category="list-text">使用 `Network interface` 命令查看或更改网络接口。</block>
  <block id="53fd22677faa2085c1fc51f1d116faff" category="admonition">建议每个节点使用两个 iSCSI 网络接口。</block>
  <block id="69fea75e454b43e67ba176dddb604159" category="inline-link-macro">创建 iSCSI 网络接口。</block>
  <block id="1bc0e04873be7c6291aef492ff2785cc" category="list-text"><block ref="d503e168b9096ac416caa1c8f13ab28a" category="inline-link-macro-rx"></block> 您可以使用 default-data-blocks 服务策略。</block>
  <block id="bd494b2c15d88a1dfa29c308b39e8f6e" category="inline-link-macro">验证 data-iscsi 服务是否包含在服务策略中。</block>
  <block id="c436a9a899f5e1cfacf8828c90931ca9" category="list-text"><block ref="24788d985e181b3194881517c2ec7650" category="inline-link-macro-rx"></block> 您可以使用 `network interface service-policy show` 进行验证。</block>
  <block id="c0e1d066d0482fc5cc1554edaa3f36b2" category="inline-link-macro">验证是否已启用巨型帧。</block>
  <block id="a355e4512cfabb746ee4c05a87a61107" category="list-text"><block ref="a355e4512cfabb746ee4c05a87a61107" category="inline-link-macro-rx"></block></block>
  <block id="5ccd820a879b8d1daef5e44125431184" category="inline-link-macro">创建并映射 LUN 。</block>
  <block id="c49b54ab60508b16176724eeb8118049" category="list-text"><block ref="3a73ce9b9237c3e09863bf7b049ce423" category="inline-link-macro-rx"></block> 如果您使用适用于 VMware vSphere 的 ONTAP 工具，请跳过此步骤。对每个 LUN 重复此步骤。</block>
  <block id="5c9b297b088335a8562568dc59549c7d" category="list-text">验证 iSCSI VLAN 是否至少有一个可用 NIC 。为了提高性能和容错能力，最好使用两个 NIC 。</block>
  <block id="fe9e58c95c20042a4032ef737d6e8400" category="inline-link-macro">确定 vSphere 主机上可用的物理 NIC 的数量。</block>
  <block id="96cf3cacac94299a7630f48f5cf5b7e3" category="list-text"><block ref="96cf3cacac94299a7630f48f5cf5b7e3" category="inline-link-macro-rx"></block></block>
  <block id="87d3329dab6e8f24601b6f45d40614ea" category="inline-link-macro">配置 iSCSI 启动程序。</block>
  <block id="536d7ac288972152b209e6f004917285" category="list-text"><block ref="95a6e2e5fae04247474cdc6a729342fc" category="inline-link-macro-rx"></block> 典型的使用情形是软件 iSCSI 启动程序。</block>
  <block id="fd823eb37045485458bb3d5d52ddc46f" category="inline-link-macro">验证 iSCSI 的 TCPIP 堆栈是否可用</block>
  <block id="875d65383afa504aad11a619d920adc7" category="list-text"><block ref="025b4ff12eca60b6c5b5be76597b5e95" category="inline-link-macro-rx"></block>。</block>
  <block id="e45f6655250b094b5a8370ff511869c3" category="inline-link-macro">验证 iSCSI 端口组是否可用</block>
  <block id="4c93429599cf15be2af5aa0f59131c17" category="list-text"><block ref="5e67546a702454fa060946b3e582d0e9" category="inline-link-macro-rx"></block>。</block>
  <block id="b7b554d373b5992838a126134a03ba0d" category="list-text">我们通常使用具有多个上行链路端口的单个虚拟交换机。</block>
  <block id="879d70f2184599f483fd94f0f274163f" category="list-text">使用 1 ： 1 适配器映射。</block>
  <block id="9f60e3586ab900b8f879404be003b539" category="list-text">验证是否已启用 iSCSI VMKernel 适配器以匹配 NIC 数量，以及是否已分配 IP 。</block>
  <block id="3e6e09b1cda3200c7407173a3473a103" category="inline-link-macro">将 iSCSI 软件适配器绑定到 iSCSI VMKernel 适配器。</block>
  <block id="70d687ef257c5d00e0d85844c0101c77" category="list-text"><block ref="70d687ef257c5d00e0d85844c0101c77" category="inline-link-macro-rx"></block></block>
  <block id="187fbd973609969af8f47e857f8579c4" category="inline-link-macro">使用 ONTAP 工具配置 VMFS 数据存储库</block>
  <block id="1e9df60603ff2a9fe2495b189aecc647" category="list-text"><block ref="efecd5d76f6fc92c9c9a8111cf809724" category="inline-link-macro-rx"></block>。对所有数据存储库重复此步骤。</block>
  <block id="5f4723c28ea2b13a27b86c1116720a8a" category="inline-link-macro">验证硬件加速支持。</block>
  <block id="aa0cfa24dd578f0629299a21b453583c" category="list-text"><block ref="aa0cfa24dd578f0629299a21b453583c" category="inline-link-macro-rx"></block></block>
  <block id="1d3fa7ee382266d716ba7a360f30f188" category="paragraph">完成这些任务后， VMFS 数据存储库便可用于配置虚拟机。</block>
  <block id="53001b412ce4896686a413a19f6dcc5f" category="listing-title">Ansible 攻略手册</block>
  <block id="963739e9818c0bf4d8959b5cdf6a7956" category="summary">使用 VVOL 复制时， SRM 中的工作流与使用 SRA 和传统数据存储库时的工作流有明显不同。</block>
  <block id="56687c1a324f03f5d1429500efea710e" category="doc">对使用 VVol 复制的 SRM 进行故障排除</block>
  <block id="14acf40cbe69d8682b4c844ac7fbf7f6" category="paragraph">使用 VVOL 复制时， SRM 中的工作流与使用 SRA 和传统数据存储库时的工作流有明显不同。例如，没有阵列管理器概念。因此，永远看不到 `discoverarrays` 和 `discoverdevices` 命令。</block>
  <block id="ef74d715544e3b067a6bec3218ac5044" category="paragraph">在进行故障排除时，了解下面列出的新工作流非常有用：</block>
  <block id="47f0942d341ee10381b2eff35089d75d" category="list-text">queryReplicationPeer ：发现两个故障域之间的复制协议。</block>
  <block id="136a299aae29998a147852cb0cba5b4a" category="list-text">queryFaultDomain ：发现故障域层次结构。</block>
  <block id="c071098c5df923c31f6245e4db2f3861" category="list-text">queryReplicationGroup ：发现源域或目标域中的复制组。</block>
  <block id="792cfe9ad3a3dc8528080a262e92989a" category="list-text">syncReplicationGroup ：同步源和目标之间的数据。</block>
  <block id="39afb1e1e3b180a6230e07bb8571667e" category="list-text">queryPointInTimeReplica ：发现目标上的时间点副本。</block>
  <block id="9fb25fe2ff084dc9ccfb99eaccba7212" category="list-text">testFailoverReplicationGroupStart ：开始测试故障转移。</block>
  <block id="bd4e1dacaca4c37a53b5286b6ae0239d" category="list-text">testFailoverReplicationGroupStop ：结束测试故障转移。</block>
  <block id="887f376a43cf9de1d6e14a8d69e588f6" category="list-text">promoteReplicationGroup ：将当前正在测试的组提升为生产组。</block>
  <block id="17ab16c5c0786ff381e6a085318bad9b" category="list-text">prepareFailoverReplicationGroup ：准备灾难恢复。</block>
  <block id="665dd64ebcc4016bda94e0e8020d8c8e" category="list-text">failoverReplicationGroup ：执行灾难恢复。</block>
  <block id="6936cf00e30b7cd4421225113a023c3e" category="list-text">reverseReplicateGroup ：启动反向复制。</block>
  <block id="61ac8950a043e6998b458d4f8171154c" category="list-text">queryMatchingContainer ：查找可能使用给定策略满足配置请求的容器（以及主机或复制组）。</block>
  <block id="05c9efdc056d2af4640bc441ab61b53a" category="list-text">queryResourceMetadata ：从 VASA 提供程序中发现所有资源的元数据，资源利用率可以作为问题解答返回给 queryMatchingContainer 函数。</block>
  <block id="01fa56986f885c588b1be8c206623de8" category="paragraph">配置 VVOL 复制时，最常见的错误是无法发现 SnapMirror 关系。之所以出现这种情况，是因为卷和 SnapMirror 关系是在 ONTAP 工具的权限范围之外创建的。因此，最佳做法是，在尝试创建复制的 VVOL 数据存储库之前，始终确保 SnapMirror 关系已完全初始化，并且您已在两个站点的 ONTAP 工具中运行重新发现。</block>
  <block id="ff53ee8001042abcefe5c912d0b5012f" category="section-title">vSphere 数据存储库和协议功能</block>
  <block id="7a787d6880ccfe1032af2f4288ce3901" category="paragraph">在运行 ONTAP 软件的系统上，使用五种协议将 VMware vSphere 连接到数据存储库：</block>
  <block id="6b8f0029ce30f9b4d5fe0def33875511" category="list-text">FC</block>
  <block id="14eae6ee278098bfad4f8a10fd6c1195" category="list-text">FCoE</block>
  <block id="26bcb9f1cb6f391f4b2c18e676bb458d" category="list-text">NVMe/FC</block>
  <block id="cbc9a42283809f1edcb32b4a495813f9" category="paragraph">FC ， FCoE ， NVMe/FC 和 iSCSI 是块协议，它们使用 vSphere 虚拟机文件系统（ VMFS ）将 VM 存储在 ONTAP LUN 或 ONTAP 卷中包含的命名空间中。请注意，从 vSphere 7.0 开始， VMware 不再支持在生产环境中使用软件 FCoE 。NFS 是一种文件协议，无需使用 VMFS 即可将虚拟机放置到数据存储库（即 ONTAP 卷）中。SMB ， iSCSI 或 NFS 也可以直接从子操作系统到 ONTAP 使用。</block>
  <block id="0f2f72ef3f176b98134caf100a06cf5f" category="inline-link">VMware 配置最大值</block>
  <block id="6a6d2374b838393f6805b58d97c2c490" category="paragraph">下表显示了 ONTAP 支持的 vSphere 传统数据存储库功能。此信息不适用于 VVOL 数据存储库，但它通常适用于使用受支持的 ONTAP 版本的适用场景 vSphere 6.x 和 7.x 版本。您也可以参考<block ref="26c5407c98ec413c85131fd8c0d178b4" category="inline-link-rx"></block> 用于确认特定限制的特定 vSphere 版本。</block>
  <block id="9da73946f1bc3be4a41898d06c9d2e8b" category="cell">功能 / 功能</block>
  <block id="c982f804d02e2d7e937f125d2cac1024" category="cell">FC/FCoE</block>
  <block id="520d0db389f362bf79ef56ca0af3dcab" category="cell">格式。</block>
  <block id="99a3142584ca8ad0a3afadeaa6f2ef69" category="cell">VMFS 或原始设备映射（ RDM ）</block>
  <block id="26aae26f61844ac20ab7b04ba6f5c515" category="cell">VMFS 或 RDM</block>
  <block id="8dc6d0c66219ddb809322c0d248e55e6" category="cell">数据存储库或 LUN 的最大数量</block>
  <block id="468abcddfc22ae5cb2288b9937b300fb" category="cell">256 个目标 /HBA</block>
  <block id="72097e262592a146da0e4e856068965b" category="cell">256 个目标</block>
  <block id="2774ddb6f193789c5d9a480b9e53a38d" category="cell">256 个挂载默认 NFS 。最大卷数为 8 。使用适用于 VMware vSphere 的 ONTAP 工具将其增加到 256 。</block>
  <block id="51c0dc217976e27de06e262947947a62" category="cell">最大数据存储库大小</block>
  <block id="856c997f909830b8249756c07dc9452b" category="cell">64 TB</block>
  <block id="8e5d3a4b085389c59a1a7af7c4067a9b" category="cell">使用 FlexGroup 卷时为 100 TB 或更高的 FlexVol 卷</block>
  <block id="a4b27c6cd629522064dc48306e2bf8bb" category="cell">最大数据存储库文件大小（对于使用 vSphere 5.5 和 VMFS 5 或更高版本的 VMDK ）</block>
  <block id="d10549beb2f7bd1e91e5ef8965edd84a" category="cell">62 TB</block>
  <block id="ddf38e51732c3f7da57dc13c31a5483b" category="cell">vSphere 支持的最大大小为 16 TB 62 TB 。</block>
  <block id="9aa56a79640231adaec83bc53e59c929" category="cell">每个 LUN 或文件系统的最佳队列深度</block>
  <block id="ea5d2f1c4608232e07d3aa3d998e5135" category="cell">64</block>
  <block id="edc5121cb9b42a76b718b8ece9d67437" category="paragraph">下表列出了支持的 VMware 存储相关功能。</block>
  <block id="130b78bfd6c9b050a912fec77e285e3f" category="cell">容量 / 功能</block>
  <block id="6c1a84b789b54fd42511ce582be94d21" category="cell">VMotion</block>
  <block id="e95b58d02782c970bb339c6cc587ff39" category="cell">存储 vMotion</block>
  <block id="0486e0e3dc3e86859f43b6d8e32b8071" category="cell">VMware HA</block>
  <block id="8be6bd7f20474cbefdd496cb9fd495ca" category="cell">存储分布式资源计划程序（ Storage Distributed Resource Scheduler ， SDRS ）</block>
  <block id="4244919a64848265426dfd82a14f8248" category="cell">支持 VMware vStorage APIs for Data Protection （ VADP ）的备份软件</block>
  <block id="28c2f8ab9cdbf296aa4261bc3c58ba0d" category="cell">虚拟机中的 Microsoft 集群服务（ MSCS ）或故障转移集群</block>
  <block id="01a9a3b8d0fcae3055dc91935e8ec6c6" category="cell">是 *</block>
  <block id="aa7f77e663b832d5b0e544c5511e680c" category="cell">不支持</block>
  <block id="aa18abedec09bd4f85e612c307e2eaa6" category="cell">容错</block>
  <block id="bfd52522de4ac6efd6f680e0e754eeb5" category="cell">Site Recovery Manager</block>
  <block id="17d495427086fa21259b9df40b27e00a" category="cell">精简配置的 VM （虚拟磁盘）</block>
  <block id="4ee7af004efef335d6a14c60ee758f5e" category="cell">是。如果不使用 VAAI ，则此设置是 NFS 上所有 VM 的默认设置。</block>
  <block id="13bc264ff420559de4156ec40980a4b9" category="cell">VMware 原生多路径</block>
  <block id="8339c514e73f5cced3b83d504d60441b" category="inline-link">Windows Server 故障转移集群设置</block>
  <block id="547211ca8a6b93fee863925a03cd341b" category="paragraph">* NetApp 建议在 VMFS 数据存储库中对 Microsoft 集群使用来宾 iSCSI ，而不是使用启用了多写入程序的 VMDK 。Microsoft 和 VMware 完全支持这种方法，并可通过 ONTAP （ SnapMirror 到内部或云中的 ONTAP 系统）提供极大的灵活性，易于配置和自动化，并可通过 SnapCenter 进行保护。vSphere 7 添加了一个新的集群模式 VMDK 选项。这与启用了多写入程序的 VMDK 不同，但需要通过 FC 协议提供数据存储库，该协议已启用集群模式 VMDK 支持。其他限制适用。请参见 VMware 的<block ref="b158594c147457b5b6417413cb30f800" category="inline-link-rx"></block> 配置准则文档。</block>
  <block id="a06819d91a165d0491c5816c54b41234" category="paragraph">下表列出了支持的 ONTAP 存储管理功能。</block>
  <block id="f8d61013f1a3bbf1342f4ced3279c7cf" category="cell">重复数据删除</block>
  <block id="72167540968147afed9deb59f0e9fe00" category="cell">阵列中的节省量</block>
  <block id="9a5473a6abaea16b736f096913a749be" category="cell">数据存储库中的节省量</block>
  <block id="6cd880eabbec3488232c6cba3fbcf998" category="cell">精简配置</block>
  <block id="5caeb11c4ed379b808d7f7cdca7cfbf0" category="cell">数据存储库或 RDM</block>
  <block id="8a5227cc82d14862956938caffc1acf2" category="cell">数据存储库</block>
  <block id="b71ba22dcd42deceac87150206f7bd12" category="cell">调整数据存储库大小</block>
  <block id="c6b792bfd7aac8067d36337e67d11545" category="cell">仅增长</block>
  <block id="29e23534878bb63341e0b689426b7fb0" category="cell">增长，自动增长和缩减</block>
  <block id="76021405cc62a4b8c542e7f65e3d24ed" category="cell">适用于 Windows 和 Linux 应用程序的 SnapCenter 插件（在子系统中）</block>
  <block id="c0b3c629432c82a9e8500242abb35eaf" category="cell">使用适用于 VMware vSphere 的 ONTAP 工具监控和主机配置</block>
  <block id="5a915a8215e9a66bcff0f034e8adff18" category="cell">使用适用于 VMware vSphere 的 ONTAP 工具进行配置</block>
  <block id="6495c7cda42bf1b80bc1c2af6166ef58" category="paragraph">下表列出了支持的备份功能。</block>
  <block id="1208a2df45bea7d2edea13f0b0cbc686" category="cell">ONTAP Snapshot 副本</block>
  <block id="bf22a1b5bc2b72a75825094826a942de" category="cell">复制的备份支持 SRM</block>
  <block id="60d3f7d9f265eb34e826da352cb545be" category="cell">卷 SnapMirror</block>
  <block id="fabf31a57c142c986c5d88cb089b3d7b" category="cell">VMDK 映像访问</block>
  <block id="40b655e79545b3922b8095be28d59428" category="cell">支持 VADP 的备份软件</block>
  <block id="8215e73d220182794dfbd75ad494c727" category="cell">启用了 VADP 的备份软件， vSphere Client 和 vSphere Web Client 数据存储库浏览器</block>
  <block id="d7605580ecad0fcb4528789d74cdcad5" category="cell">vmdk 文件级访问</block>
  <block id="906ece32da286d6c4b323bc0d6443b7c" category="cell">启用了 VADP 的备份软件，仅限 Windows</block>
  <block id="d17e2fa63a62622f88bf170612132383" category="cell">支持 VADP 的备份软件和第三方应用程序</block>
  <block id="4e3d259d82a536e12c5c9c948b62e26a" category="cell">NDMP 粒度</block>
  <block id="90d45e02e50c81603c36a4e4ad3649d9" category="cell">数据存储库或 VM</block>
  <block id="54b3e11ce37eaaa9884f4086e72dd2be" category="section-title">选择存储协议</block>
  <block id="4bbd62e7748dbf2416c644698342b5f9" category="paragraph">运行 ONTAP 软件的系统支持所有主要存储协议，因此客户可以根据现有和计划的网络基础架构以及员工技能选择最适合其环境的存储协议。NetApp 测试通常表明，以相似的线路速度运行的协议之间差别不大，因此，与原始协议性能相比，最好重点关注您的网络基础架构和员工能力。</block>
  <block id="0212b4e8bc965dcd8a7ff771dd96bf21" category="paragraph">在考虑选择协议时，以下因素可能会很有用：</block>
  <block id="c0ab9c6170165211885267a562d057a2" category="list-text">* 当前的客户环境。 * 尽管 IT 团队通常擅长管理以太网 IP 基础架构，但并非所有团队都擅长管理 FC SAN 网络结构。但是，使用非存储流量专用的通用 IP 网络可能无法正常工作。请考虑您已有的网络基础架构，任何计划内的改进，以及管理这些改进的人员的技能和可用性。</block>
  <block id="774f1348caf3e145710073eb634c4fa1" category="list-text">* 易于设置。 * 除了 FC 网络结构的初始配置（额外的交换机以及 HBA 和固件的布线，分区以及互操作性验证）之外，块协议还需要创建和映射 LUN 以及通过子操作系统进行发现和格式化。创建并导出 NFS 卷后，它们将由 ESXi 主机挂载并准备好使用。NFS 没有特殊的硬件资格认定或固件可供管理。</block>
  <block id="bf5169ce5bb544313eaf17435f756da2" category="list-text">* 易于管理。 * 使用 SAN 协议时，如果需要更多空间，则需要执行几个步骤，包括增加 LUN ，重新扫描以发现新大小，然后增加文件系统大小。虽然可以增加 LUN 的大小，但不能减小 LUN 的大小，因此恢复未使用的空间可能需要额外的工作。NFS 可以轻松地进行大小调整，存储系统可以自动调整大小。SAN 可通过子操作系统剪切 /UNMAP 命令提供空间回收，从而允许将已删除文件中的空间返回到阵列。使用 NFS 数据存储库时，这种类型的空间回收会更加困难。</block>
  <block id="530c759326761c6ac026b313985b255f" category="list-text">* 存储空间透明度。 * 在 NFS 环境中，存储利用率通常更容易查看，因为精简配置可以立即实现节省。同样，重复数据删除和克隆节省的空间可立即用于同一数据存储库中的其他虚拟机或其他存储系统卷。NFS 数据存储库中的虚拟机密度通常也会更高，这样可以减少要管理的数据存储库数量，从而节省重复数据删除的空间，并降低管理成本。</block>
  <block id="16ee928b12bc598bf52b0f312879ec95" category="section-title">数据存储库布局</block>
  <block id="066ed1c180617b2f9028c1f789078de4" category="paragraph">ONTAP 存储系统可以非常灵活地为 VM 和虚拟磁盘创建数据存储库。尽管在使用 VSC 为 vSphere 配置数据存储库时会应用许多 ONTAP 最佳实践（在一节中列出） <block ref="311a0f5ed21de3c81d57d9c08f2ace49" category="inline-link-macro-rx"></block>），下面是需要考虑的其他一些准则：</block>
  <block id="73ab3808ccb313675f9b890edf67fd09" category="list-text">使用 ONTAP NFS 数据存储库部署 vSphere 可实现高性能，易于管理的实施，从而提供基于块的存储协议无法实现的虚拟机与数据存储库比率。此架构可将数据存储库密度提高十倍，并相应地减少数据存储库数量。虽然较大的数据存储库可以提高存储效率并提供运营优势，但请考虑至少使用四个数据存储库（ FlexVol 卷）将虚拟机存储在一个 ONTAP 控制器上，以便从硬件资源中获得最大性能。通过这种方法，您还可以使用不同的恢复策略建立数据存储库。根据业务需求，某些备份或复制比其他备份或复制频率更高。FlexGroup 卷不需要多个数据存储库来提高性能，因为它可以根据设计进行扩展。</block>
  <block id="68281e9d236ee27e21f68ce5838462f1" category="list-text">NetApp 建议使用 FlexVol 卷，并且从 ONTAP 9.8 FlexGroup 卷开始，使用 NFS 数据存储库。通常不建议使用其他 ONTAP 存储容器，例如 qtree ，因为适用于 VMware vSphere 的 ONTAP 工具目前不支持这些容器。在一个卷中将数据存储库部署为多个 qtree 对于高度自动化的环境可能很有用，这些环境可以从数据存储库级别的配额或 VM 文件克隆中受益。</block>
  <block id="dc4d78be836807b32c7ef7f42028b1ef" category="list-text">对于 FlexVol 卷数据存储库，大小合适的数据存储库大约为 4 TB 到 8 TB 。这种大小可以很好地平衡性能，易管理性和数据保护。从小规模入手（例如 4 TB ），然后根据需要扩展数据存储库（最大 100 TB ）。较小的数据存储库可以更快地从备份中或发生灾难后进行恢复，并可在集群中快速移动。请考虑使用 ONTAP 自动调整大小功能在已用空间发生变化时自动增长和缩减卷。默认情况下，适用于 VMware vSphere 数据存储库配置向导的 ONTAP 工具会对新数据存储库使用自动调整大小。可以使用 System Manager 或命令行对增长和缩减阈值以及大小上限和下限进行其他自定义。</block>
  <block id="12346208f1923ebe162c32f3c4ccf23a" category="list-text">或者，也可以为 VMFS 数据存储库配置由 FC ， iSCSI 或 FCoE 访问的 LUN 。VMFS 允许集群中的每个 ESX 服务器同时访问传统 LUN 。VMFS 数据存储库的大小最多可达 64 TB ，并且最多可包含 32 个 2 TB LUN （ VMFS 3 ）或一个 64 TB LUN （ VMFS 5 ）。大多数系统上的 ONTAP 最大 LUN 大小为 16 TB ，所有 SAN 阵列系统上的最大 LUN 大小为 128 TB 。因此，可以使用四个 16 TB LUN 在大多数 ONTAP 系统上创建最大大小的 VMFS 5 数据存储库。尽管使用多个 LUN （使用高端 FAS 或 AFF 系统）的高 I/O 工作负载可获得性能优势，但创建，管理和保护数据存储库 LUN 的管理复杂性增加以及可用性风险增加，抵消了这一优势。NetApp 通常建议为每个数据存储库使用一个大型 LUN ，并且只有在特殊需要超过 16 TB 数据存储库时才会跨越。与 NFS 一样，请考虑使用多个数据存储库（卷），以便在一个 ONTAP 控制器上最大限度地提高性能。</block>
  <block id="c74cab014e402128efd8102b941c0b0c" category="list-text">较旧的子操作系统（ OS ）需要与存储系统对齐，以获得最佳性能和存储效率。但是， Microsoft 和 Linux 分销商（例如 Red Hat ）提供的现代供应商支持的操作系统不再需要进行调整，以便在虚拟环境中将文件系统分区与底层存储系统的块对齐。如果您使用的旧操作系统可能需要对齐，请使用 "VM 对齐 " 在 NetApp 支持知识库中搜索文章，或者向 NetApp 销售人员或合作伙伴联系人请求 TR-3747 的副本。</block>
  <block id="3c8b400142a84af9ebe6262bce512ccb" category="list-text">避免在子操作系统中使用碎片整理实用程序，因为这不会提高性能，并会影响存储效率和 Snapshot 副本空间使用量。此外，还应考虑在子操作系统中关闭虚拟桌面的搜索索引。</block>
  <block id="14abb814748566a24367c4459a54840b" category="list-text">ONTAP 凭借创新的存储效率功能引领行业发展，帮助您充分利用可用磁盘空间。AFF 系统通过默认实时重复数据删除和数据压缩进一步提高了这种效率。数据会在聚合中的所有卷之间进行重复数据删除，因此您无需再将相似的操作系统和类似应用程序分组到一个数据存储库中，即可最大程度地节省空间。</block>
  <block id="154cd001dd3ef8eabdf209f4faf2ddde" category="inline-link">TR-3633 ： Data ONTAP 上的 Oracle 数据库</block>
  <block id="8f2f733fd8f32e7aaa1ee62e48a55117" category="list-text">在某些情况下，您甚至可能不需要数据存储库。为了获得最佳性能和易管理性，请避免对数据库和某些应用程序等高 I/O 应用程序使用数据存储库。而是考虑由子系统拥有的文件系统，例如由子系统管理或使用 RDM 管理的 NFS 或 iSCSI 文件系统。有关具体的应用指南，请参见适用于您的应用程序的 NetApp 技术报告。例如：<block ref="8cb1dd6561aaa08584e14e742f429a3e" category="inline-link-rx"></block> 包含一个有关虚拟化的章节，其中包含有用的详细信息。</block>
  <block id="6cda576d2fd323c1a728b7ac67d6034f" category="list-text">一级磁盘（或经过改进的虚拟磁盘）支持独立于运行 vSphere 6.5 及更高版本的 VM 的 vCenter 管理磁盘。虽然它们主要由 API 管理，但对于 VVOL 很有用，尤其是在由 OpenStack 或 Kubernetes 工具管理时。ONTAP 以及适用于 VMware vSphere 的 ONTAP 工具均支持这些功能。</block>
  <block id="71318121439b39fdf872bb0bd57494f2" category="section-title">数据存储库和 VM 迁移</block>
  <block id="e8824ce2062c6d1fc536163f7b8940bd" category="paragraph">将 VM 从另一个存储系统上的现有数据存储库迁移到 ONTAP 时，请记住以下一些实践：</block>
  <block id="73b729fbc964c7d78dd90b64aaaeb785" category="list-text">使用 Storage vMotion 将虚拟机的批量移动到 ONTAP 。这种方法不仅不会对正在运行的 VM 造成中断，而且还可以通过实时重复数据删除和数据压缩等 ONTAP 存储效率功能在数据迁移时对其进行处理。请考虑使用 vCenter 功能从清单列表中选择多个 VM ，然后在适当的时间计划迁移（单击操作时使用 Ctrl 键）。</block>
  <block id="008116a0d875d0de070d1a10314abbaa" category="list-text">虽然您可以仔细规划迁移到适当的目标数据存储库，但批量迁移之后再根据需要进行组织往往会更简单。如果您有特定的数据保护需求，例如不同的 Snapshot 计划，则可能需要使用此方法来指导您迁移到不同的数据存储库。</block>
  <block id="616b2180a0659911fed5aa758dba722c" category="list-text">大多数 VM 及其存储可以在运行时进行迁移（热迁移），但从另一个存储系统迁移连接的存储（不在数据存储库中），例如 ISO ， LUN 或 NFS 卷可能需要冷迁移。</block>
  <block id="fbb88da5639930a05f510729e473a216" category="inline-link">TR-4534</block>
  <block id="282806c282d96fdf15b71278587f2bfe" category="list-text">需要更仔细迁移的虚拟机包括使用连接存储的数据库和应用程序。通常，请考虑使用应用程序的工具来管理迁移。对于 Oracle ，请考虑使用 RMAN 或 ASM 等 Oracle 工具迁移数据库文件。请参见<block ref="6b3f565e7a7ce633fa62f4114c295216" category="inline-link-rx"></block> 有关详细信息 ...同样，对于 SQL Server ，请考虑使用 SQL Server Management Studio 或 NetApp 工具，例如适用于 SQL Server 的 SnapManager 或 SnapCenter 。</block>
  <block id="ed9018b2e8611a3d2c03bb6a205b9715" category="section-title">适用于 VMware vSphere 的 ONTAP 工具</block>
  <block id="00f47a68ebd81ba943b17dbc30d78db6" category="paragraph">将 vSphere 与运行 ONTAP 软件的系统结合使用时，最重要的最佳实践是安装和使用适用于 VMware vSphere 的 ONTAP 工具插件（以前称为虚拟存储控制台）。无论使用 SAN 还是 NAS ，此 vCenter 插件均可简化存储管理，提高可用性并降低存储成本和运营开销。它使用最佳实践来配置数据存储库，并针对多路径和 HBA 超时优化 ESXi 主机设置（这些内容在附录 B 中进行了介绍）。由于它是一个 vCenter 插件，因此可供连接到 vCenter 服务器的所有 vSphere Web 客户端使用。</block>
  <block id="21eddd0bd26d119e0602b3ceb65aff45" category="paragraph">此插件还可帮助您在 vSphere 环境中使用其他 ONTAP 工具。它允许您安装适用于 VMware VAAI 的 NFS 插件，该插件支持将副本卸载到 ONTAP 以执行 VM 克隆操作，为厚虚拟磁盘文件预留空间以及执行 ONTAP Snapshot 副本卸载。</block>
  <block id="80303385ad0f7147caa1af6d2162852b" category="paragraph">该插件也是适用于 ONTAP 的 VASA Provider 的许多功能的管理界面，支持使用 VVOL 进行基于存储策略的管理。注册适用于 VMware vSphere 的 ONTAP 工具后，可使用它创建存储功能配置文件，将其映射到存储，并确保数据存储库随时间的推移符合这些配置文件。VASA Provider 还提供了一个用于创建和管理 VVol 数据存储库的界面。</block>
  <block id="9baea886f208a41896164d4ade5b3fde" category="paragraph">一般来说， NetApp 建议在 vCenter 中使用适用于 VMware vSphere 的 ONTAP 工具来配置传统数据存储库和 VVOL 数据存储库，以确保遵循最佳实践。</block>
  <block id="6161d374e9022f89382fd63b4be15aa1" category="section-title">常规网络连接</block>
  <block id="f0cd6847f2a7a0773ad0b58d0f9dc67d" category="paragraph">在将 vSphere 与运行 ONTAP 软件的系统结合使用时，配置网络设置非常简单，与其他网络配置类似。需要考虑以下几点：</block>
  <block id="9600865cce7d923667012211ddac46de" category="list-text">将存储网络流量与其他网络分开。可以通过使用专用 VLAN 或单独的存储交换机来实现单独的网络。如果存储网络共享上行链路等物理路径，您可能需要 QoS 或其他上行链路端口来确保带宽充足。不要将主机直接连接到存储；使用交换机具有冗余路径，并允许 VMware HA 在不干预的情况下运行。</block>
  <block id="7c4904daaa282388097ad83bf382e1a5" category="list-text">如果您的网络需要并支持巨型帧，则可以使用巨型帧，尤其是在使用 iSCSI 时。如果使用这些协议，请确保在存储和 ESXi 主机之间的路径中的所有网络设备， VLAN 等上对其进行相同的配置。否则，您可能会看到性能或连接问题。此外，还必须在 ESXi 虚拟交换机， VMkernel 端口以及每个 ONTAP 节点的物理端口或接口组上以相同的方式设置 MTU 。</block>
  <block id="8b6e7f43d1d697e8f99164f0aa2ab1b6" category="inline-link">TR-4182</block>
  <block id="3745abd352adaa2cdec42c798060eef6" category="list-text">NetApp 仅建议在 ONTAP 集群中的集群网络端口上禁用网络流量控制。对于用于数据流量的其余网络端口， NetApp 不提供其他最佳实践建议。您应根据需要启用或禁用。请参见<block ref="bdfb81665a0ef86d871a52c0e6ebc591" category="inline-link-rx"></block> 了解有关流量控制的更多背景信息。</block>
  <block id="730a8287f758961d602b1b050bbe2751" category="list-text">当 ESXi 和 ONTAP 存储阵列连接到以太网存储网络时， NetApp 建议将这些系统连接到的以太网端口配置为快速生成树协议（ RSTP ）边缘端口或使用 Cisco PortFast 功能。NetApp 建议在使用 Cisco PortFast 功能且为 ESXi 服务器或 ONTAP 存储阵列启用了 802.1Q VLAN 中继的环境中启用生成树 PortFast 中继功能。</block>
  <block id="ac4976538e1fc8726f77afc202561afc" category="list-text">NetApp 建议采用以下链路聚合最佳实践：</block>
  <block id="102e4f88579e89519d8c614561d5e302" category="list-text">使用支持在两个独立交换机机箱上进行端口链路聚合的交换机，采用多机箱链路聚合组方法，例如 Cisco 的虚拟端口通道（ Virtual PortChannel ， vPC ）。</block>
  <block id="f331781b955fd46506835e783c953ed4" category="list-text">对连接到 ESXi 的交换机端口禁用 LACP ，除非使用配置了 LACP 的 dvSwitches 5.1 或更高版本。</block>
  <block id="eb8cf3a79d16ed9f0e2c1de65c379bc5" category="list-text">使用 LACP 为 ONTAP 存储系统创建链路聚合，并使用具有 IP 哈希的动态多模式接口组。</block>
  <block id="8ebcba6104088fb46f64395277d21edd" category="list-text">在 ESXi 上使用 IP 哈希绑定策略。</block>
  <block id="2432030fc6183a1a6c52cf5e93f3e9ae" category="paragraph">下表汇总了网络配置项，并指出了这些设置的应用位置。</block>
  <block id="7d74f3b92b19da5e606d737d339a9679" category="cell">项目</block>
  <block id="1aa66ef3a8e34a7a538960a80d2e1e31" category="cell">ESXi</block>
  <block id="bbc155fb2b111bf61c4f5ff892915e6b" category="cell">交换机</block>
  <block id="6c3a6944a808a7c0bbb6788dbec54a9f" category="cell">Node</block>
  <block id="0b7e67b6cdcf0432b624d53588d520fb" category="cell">SVM</block>
  <block id="75ba8d70e3692ba200f0e0df37b4d2ae" category="cell">IP 地址</block>
  <block id="ee6c0f25c2881cc69947a2ef23be5b8c" category="cell">VMkernel</block>
  <block id="e11f298a5bd5344d2d975b5157c27b69" category="cell">否</block>
  <block id="d6f0876f76c273b8962b749c36153157" category="cell">链路聚合</block>
  <block id="fabd320b3b2249377e53e93099e27657" category="cell">虚拟交换机</block>
  <block id="b1b40427c8eb8d0a083ddb16e250325b" category="cell">否 *</block>
  <block id="9881f82f0dd89588831f9d1682bd5492" category="cell">VLAN</block>
  <block id="5fc0d231160fa9650ea5c877f146bbe6" category="cell">VMkernel 和 VM 端口组</block>
  <block id="39a3e05f380e583ae2887c79c7443f11" category="cell">流量控制</block>
  <block id="220071ab44b426f80ef21f1c552c363c" category="cell">NIC</block>
  <block id="6f2c08412f489e52a17a30217f50b3c1" category="cell">生成树</block>
  <block id="4b1c0df98ba3f3d1681c3c3dbdc97746" category="cell">MTU （适用于巨型帧）</block>
  <block id="7d6feaf896df4a937157d4ee5b91f4e1" category="cell">虚拟交换机和 VMkernel 端口（ 9000 ）</block>
  <block id="0110e50bd8629573701e73a4ba8b056f" category="cell">是（设置为最大值）</block>
  <block id="061ff5255adf00e4ae68469f43a7bf55" category="cell">是（ 9000 ）</block>
  <block id="bcc0e5a3e08cd34e80692195d056b06d" category="cell">故障转移组</block>
  <block id="a4d1a66a448e327c12d3e287098a31d5" category="cell">是（创建）</block>
  <block id="465d5674eb6808b997037470f4dace73" category="cell">是（选择）</block>
  <block id="93e04df6f821105fd0ab88e95eaee167" category="paragraph">* SVM LIF 连接到具有 VLAN ， MTU 和其他设置的端口，接口组或 VLAN 接口，但这些设置不在 SVM 级别进行管理。</block>
  <block id="50ecdab93bf5a2f1bfb4cd8f81b9bd3d" category="paragraph">这些设备具有自己的 IP 地址进行管理，但这些地址不会在 ESXi 存储网络环境中使用。</block>
  <block id="efd0bde36323238fec688b9cdf0c75a3" category="section-title">SAN （ FC ， FCoE ， NVMe/FC ， iSCSI ）， RDM</block>
  <block id="29cdd488736a6111699f7348320bbed7" category="paragraph">在 vSphere 中，可以通过三种方式使用块存储 LUN ：</block>
  <block id="8982d243303f9d1a8c2470b7d55278e6" category="list-text">使用 VMFS 数据存储库</block>
  <block id="9a0098c8c1be287e8d1da1aaf3bd2e59" category="list-text">使用原始设备映射（ RDM ）</block>
  <block id="93e209176746ac6f25c618631a02643b" category="list-text">作为 LUN ，由软件启动程序从 VM 子操作系统访问和控制</block>
  <block id="c25dc676ca39a05ee6067ac9a50dbce0" category="paragraph">VMFS 是一种高性能集群文件系统，可提供共享存储池中的数据存储库。可以为 VMFS 数据存储库配置 LUN ，这些 LUN 可通过 NVMe/FC 协议访问的 FC ， iSCSI ， FCoE 或 NVMe 命名空间进行访问。VMFS 允许集群中的每个 ESX 服务器同时访问传统 LUN 。ONTAP 最大 LUN 大小通常为 16 TB ；因此，使用四个 16 TB LUN （所有 SAN 阵列系统均支持最大 VMFS LUN 大小为 64 TB ）来创建最大 64 TB 的 VMFS 5 数据存储库（请参见本节中的第一个表）。由于 ONTAP LUN 架构不具有较小的单个队列深度，因此 ONTAP 中的 VMFS 数据存储库可以以相对简单的方式扩展到比传统阵列架构更大的程度。</block>
  <block id="43f67f108e50dab0978a343603cbfec9" category="paragraph">vSphere 内置了对存储设备的多条路径的支持，称为原生多路径（ NMP ）。NMP 可以检测受支持存储系统的存储类型，并自动配置 NMP 堆栈以支持正在使用的存储系统的功能。</block>
  <block id="6bf646772584de04f877d166e564b5ff" category="paragraph">NMP 和 NetApp ONTAP 均支持非对称逻辑单元访问（ Asymmetric Logical Unit Access ， ALUA ）来协商优化和非优化路径。在 ONTAP 中，经过 ALUA 优化的路径遵循直接数据路径，并使用托管所访问 LUN 的节点上的目标端口。默认情况下，在 vSphere 和 ONTAP 中均已启用 ALUA 。NMP 会将 ONTAP 集群识别为 ALUA ，并使用 ALUA 存储阵列类型插件（`VMW_SATAP_ALUA` ），然后选择轮循路径选择插件（`VMW_PSP_RR` ）。</block>
  <block id="b284ee628d89c3e804c4def2a90f0520" category="paragraph">ESXi 6 最多支持 256 个 LUN 以及 1 ， 024 个 LUN 的总路径。ESXi 无法识别超出这些限制的任何 LUN 或路径。假设 LUN 数量达到最大值，则路径限制允许每个 LUN 使用四个路径。在较大的 ONTAP 集群中，可以在达到 LUN 限制之前达到路径限制。为了解决此限制， ONTAP 在 8.3 及更高版本中支持选择性 LUN 映射（ SLM ）。</block>
  <block id="8466b1e5abb4751e931c5feb1af4e469" category="inline-link">TR-4080</block>
  <block id="a1319b3463fde689889152797a3cf966" category="paragraph">SLM 会限制向给定 LUN 公布路径的节点。NetApp 最佳实践是，每个 SVM 的每个节点至少具有一个 LIF ，并使用 SLM 限制向托管 LUN 的节点及其 HA 配对节点公布的路径。尽管存在其他路径，但默认情况下不会公布这些路径。可以使用 SLM 中的添加和删除报告节点参数修改公布的路径。请注意，在 8.3 之前的版本中创建的 LUN 会公布所有路径，需要进行修改，以便仅向托管 HA 对公布这些路径。有关 SLM 的详细信息，请查看的第 5.9 节<block ref="c6b12416d518b4689065ffe16afe88db" category="inline-link-rx"></block>。也可以使用先前的端口集方法进一步减少 LUN 的可用路径。端口集有助于减少 igroup 中启动程序可通过的可见路径数。</block>
  <block id="4157f0c23fc104508f492dc846f187f3" category="list-text">默认情况下， SLM 处于启用状态。除非使用端口集，否则不需要进行其他配置。</block>
  <block id="597f1433ad810b3b86c7ae0f8f95afa8" category="list-text">对于在 Data ONTAP 8.3 之前创建的 LUN ，请手动应用 SLM ，方法是运行 `lun mapping remove-reporting-nodes` 命令删除 LUN 报告节点并将 LUN 访问限制为 LUN 所属节点及其 HA 配对节点。</block>
  <block id="43919b4d4d6d446ed498e26bff62db84" category="paragraph">块协议（ iSCSI ， FC 和 FCoE ）使用 LUN ID 和序列号以及唯一名称来访问 LUN 。FC 和 FCoE 使用全球通用名称（ WWPN 和 WWPN ）， iSCSI 使用 iSCSI 限定名称（ IQN ）。存储中 LUN 的路径对于块协议没有意义，并且不会显示在协议的任何位置。因此，只包含 LUN 的卷根本无需在内部挂载，而包含数据存储库中使用的 LUN 的卷则不需要接合路径。ONTAP 中的 NVMe 子系统的工作原理类似。</block>
  <block id="ed0e76ed86e852bd7317a09d856ec4e8" category="paragraph">要考虑的其他最佳实践：</block>
  <block id="93586ad57931e0f16fff61cdba9d77df" category="list-text">确保为 ONTAP 集群中每个节点上的每个 SVM 创建一个逻辑接口（ LIF ），以最大程度地提高可用性和移动性。ONTAP SAN 最佳实践是，每个节点使用两个物理端口和 LIF ，每个网络结构使用一个。ALUA 用于解析路径并识别活动优化（直接）路径与活动非优化路径。ALUA 用于 FC ， FCoE 和 iSCSI 。</block>
  <block id="b3cebb7381bddbabb1e950a46d264190" category="list-text">对于 iSCSI 网络，如果存在多个虚拟交换机，请在采用 NIC 绑定的不同网络子网上使用多个 VMkernel 网络接口。您还可以使用连接到多个物理交换机的多个物理 NIC 来提供 HA 并提高吞吐量。下图提供了多路径连接的示例。在 ONTAP 中，使用连接到两个或更多交换机的两个或更多链路配置一个单模式接口组以进行故障转移，或者使用 LACP 或其他具有多模式接口组的链路聚合技术来提供 HA 和链路聚合的优势。</block>
  <block id="2968b9f3c141bf23bc73d0e6e15a174a" category="list-text">如果在 ESXi 中使用质询握手身份验证协议（ Challenge-Handshake Authentication Protocol ， CHAP ）进行目标身份验证，则还必须使用命令行界面（`vserver iscsi security create` ）或 System Manager （在 "Storage"&gt;"SVM"&gt;"SVM 设置 "&gt;" 协议 "&gt;"iSCSI" 下编辑 "Initiator Security" ）在 ONTAP 中进行配置。</block>
  <block id="d31f2e075df4ca75ca0874fa08f74b12" category="list-text">使用适用于 VMware vSphere 的 ONTAP 工具创建和管理 LUN 和 igroup 。此插件会自动确定服务器的 WWPN 并创建适当的 igroup 。它还会根据最佳实践配置 LUN 并将其映射到正确的 igroup 。</block>
  <block id="de78559e8aed2cd62fbf852f73dc58c2" category="inline-link">物理和虚拟兼容模式</block>
  <block id="905221150fdd103b5241870a0a1f2c42" category="list-text">请小心使用 RDM ，因为它们可能更难管理，并且它们也使用路径，这些路径会受到前面所述的限制。ONTAP LUN 支持这两者<block ref="27e1f8e5a88cfbb2836b083145b004c9" category="inline-link-rx"></block> RDM 。</block>
  <block id="636da39a2033c6179a718983c5ce1222" category="inline-link">《 ONTAP NVMe/FC 主机配置指南》</block>
  <block id="81ef6507a13da5635951bc5b533deb59" category="inline-link">TR-4684</block>
  <block id="15483b0826bb9a4b11d1c89af2029c5c" category="list-text">有关将 NVMe/FC 与 vSphere 7.0 结合使用的详细信息，请参见此部分<block ref="6b4ed262d14e47ef641cd57b65c32c38" category="inline-link-rx"></block> 和<block ref="7a29b2f31035a451d5b068728d2b79a7" category="inline-link-rx"></block>下图显示了从 vSphere 主机到 ONTAP LUN 的多路径连接。</block>
  <block id="f9fd9ea22ea7a2e8ec9e95254a449831" category="paragraph"><block ref="f9fd9ea22ea7a2e8ec9e95254a449831" category="inline-image-macro-rx" type="image"></block></block>
  <block id="54452390cac5f65f3bcec580ba079531" category="section-title">FlexGroup</block>
  <block id="f203949f2e35204098b66b9c1519b66e" category="paragraph">ONTAP 9.8 增加了对 vSphere 中 FlexGroup 数据存储库的支持，并增加了适用于 VMware vSphere 9.8 版本的 ONTAP 工具。FlexGroup 简化了大型数据存储库的创建，并自动创建了大量成分卷，以便从 ONTAP 系统中获得最大性能。将 FlexGroup 与 vSphere 结合使用，可用于一个具有完整 ONTAP 集群功能的可扩展 vSphere 数据存储库。</block>
  <block id="6829bc8d3038be0130fd2b409ad5e560" category="paragraph">除了对 vSphere 工作负载进行大量系统测试之外， ONTAP 9.8 还为 FlexGroup 数据存储库添加了一种新的副本卸载机制。这样可以使用经过改进的复制引擎在后台的成分卷之间复制文件，同时允许在源和目标上进行访问。如果需要，多个副本会根据规模在成分卷中使用可立即使用且节省空间的文件克隆。</block>
  <block id="760383437e8e5cbe4a2560753da783fb" category="paragraph">ONTAP 9.8 还为 FlexGroup 文件添加了基于文件的新性能指标（ IOPS ，吞吐量和延迟），这些指标可在适用于 VMware vSphere 的 ONTAP 工具信息板和 VM 报告中查看。适用于 VMware vSphere 的 ONTAP 工具插件还允许您结合使用最大和 / 或最小 IOPS 来设置服务质量（ QoS ）规则。可以在数据存储库中的所有 VM 之间设置这些值，也可以为特定 VM 单独设置这些值。</block>
  <block id="50783a97403d748762dff691da2d3723" category="paragraph">以下是 NetApp 开发的其他一些最佳实践：</block>
  <block id="d190c5fcdf8146c1dd7aad1140be4e64" category="list-text">使用 FlexGroup 配置默认值。虽然建议使用适用于 VMware vSphere 的 ONTAP 工具，因为它可以在 vSphere 中创建和挂载 FlexGroup ，但也可以使用 ONTAP System Manager 或命令行来满足特殊需求。即使如此，也可以使用默认值，例如每个节点的成分卷成员数，因为这是已通过 vSphere 测试的结果。</block>
  <block id="9f3fa65c2cc36eabd2228b984c30c5e1" category="list-text">在估算 FlexGroup 数据存储库的规模时，请记住， FlexGroup 由多个较小的 FlexVol 卷组成，这些卷会创建一个较大的命名空间。因此，请将数据存储库的大小至少设置为最大虚拟机的 8 倍。例如，如果您的环境中有一个 6 TB 的 VM ，请将 FlexGroup 数据存储库的大小调整为不小于 48 TB 。</block>
  <block id="5fbee6b763967c822bb1e4a31665b11d" category="list-text">允许 FlexGroup 管理数据存储库空间。已使用 vSphere 数据存储库测试自动调整大小和弹性调整。如果数据存储库容量接近全满，请使用适用于 VMware vSphere 的 ONTAP 工具或其他工具调整 FlexGroup 卷的大小。FlexGroup 可在成分卷之间保持容量和索引节点的平衡，并在容量允许的情况下优先将文件夹（ VM ）中的文件分配给同一成分卷。</block>
  <block id="c4528ad57baf62254d165d4e907e6f59" category="list-text">VMware 和 NetApp 目前不支持通用的多路径网络连接方法。对于 NFSv4.1 ， NetApp 支持 pNFS ，而 VMware 支持会话中继。NFSv3 不支持通过多个物理路径访问一个卷。对于采用 ONTAP 9.8 的 FlexGroup ，我们建议的最佳实践是让适用于 VMware vSphere 的 ONTAP 工具进行一次挂载，因为间接访问的影响通常很小（微秒）。可以使用轮循 DNS 在 FlexGroup 中不同节点上的 LIF 之间分布 ESXi 主机，但这需要在不使用适用于 VMware vSphere 的 ONTAP 工具的情况下创建和挂载 FlexGroup 。然后，性能管理功能将不可用。</block>
  <block id="f5f11bb6aa98d02453eca36d5d1d2e19" category="list-text">在 9.8 版中，最多已对 1500 个 VM 的 FlexGroup vSphere 数据存储库支持进行了测试。</block>
  <block id="f48591b3ae898f29a551a2995a7dcfe8" category="list-text">使用适用于 VMware VAAI 的 NFS 插件执行副本卸载。请注意，在 FlexGroup 数据存储库中增强了克隆功能，但在 FlexVol 和 / 或 FlexGroup 卷之间复制虚拟机时，与 ESXi 主机副本相比， ONTAP 不会提供显著的性能优势。</block>
  <block id="57a0d1deb8da99d321814990d26d21ed" category="list-text">使用适用于 VMware vSphere 9.8 的 ONTAP 工具使用 ONTAP 指标（信息板和 VM 报告）监控 FlexGroup VM 的性能，并管理各个 VM 上的 QoS 。目前无法通过 ONTAP 命令或 API 获得这些指标。</block>
  <block id="ad971da24ec0a38449ebf31e4e2c9332" category="list-text">此时，可以在数据存储库中的各个 VM 或所有 VM 上设置 QoS （最大 / 最小 IOPS ）。在所有 VM 上设置 QoS 将取代任何单独的每 VM 设置。将来，设置不会扩展到新的或迁移的虚拟机；可以在新虚拟机上设置 QoS ，也可以将 QoS 重新应用于数据存储库中的所有虚拟机。</block>
  <block id="3c9d41390700cbdfb2c273f00df0d6fd" category="list-text">适用于 VMware vSphere 的 SnapCenter 插件 4.4 版支持在主存储系统上的 FlexGroup 数据存储库中备份和恢复 VM 。虽然可以手动使用 SnapMirror 将 FlexGroup 复制到二级系统，但 4 号选择控制器不管理二级副本。</block>
  <block id="f5852a230bef6cf666f848c5a2137db2" category="doc">ONTAP 统一存储</block>
  <block id="0dc14c0a294efec0c8cab98ebffa39f0" category="section-title">关于统一存储</block>
  <block id="d00516b816f266ee64e7b1de5af59ff2" category="paragraph">运行 ONTAP 软件的系统在多个重要方面实现了统一。最初，这种方法是指在一个存储系统上同时支持 NAS 和 SAN 协议，而 ONTAP 仍然是 SAN 的领先平台，同时也是其在 NAS 中的原始优势。Storage Virtual Machine （ SVM ）是一种逻辑构造，允许客户端访问运行 ONTAP 软件的系统。SVM 可以通过多个数据访问协议通过逻辑接口（ Logical Interface ， LIF ）同时提供数据。SVM 可通过 CIFS 和 NFS 等 NAS 协议提供文件级数据访问，并通过 iSCSI ， FC/FCoE 和 NVMe 等 SAN 协议提供块级数据访问。SVM 可以同时单独为 SAN 和 NAS 客户端提供数据。</block>
  <block id="92515b597b8c0784d6000b89ee47c5fd" category="inline-image-macro">统一存储</block>
  <block id="d6154a0901f9ca6bb5d8fb15c113581e" category="paragraph"><block ref="d6154a0901f9ca6bb5d8fb15c113581e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c3d59082aeee25c59b01266eaef6cb14" category="paragraph">在 vSphere 环境中，这种方法还可能意味着为虚拟桌面基础架构 (VDI) 和虚拟服务器基础架构（ VSI ）提供一个统一的系统。与传统企业阵列相比，运行 ONTAP 软件的系统的 VSI 成本通常更低，但具有高级存储效率功能，可以在同一系统中处理 VDI 。ONTAP 还统一了从 SSD 到 SATA 的各种存储介质，并可轻松地将其扩展到云。无需购买一个闪存阵列即可提高性能，一个 SATA 阵列可用于归档，以及单独的系统可用于云。ONTAP 将所有这些问题联系在一起。</block>
  <block id="e9e0f5f2c513c7138ea70b4c929d6fef" category="inline-link">存储虚拟化</block>
  <block id="54c9439ad8fb4842a5a86c34d2401e36" category="admonition">有关 SVM ，统一存储和客户端访问的详细信息，请参见<block ref="2843f934dec816d79f9c394ad0533c28" category="inline-link-rx"></block> 在 ONTAP 9 文档中心。</block>
  <block id="c0ddbacfe0f703e62904558059e40001" category="summary">本节提供了有关特定版本的 ONTAP 和 vSphere 支持的功能的指导。NetApp 建议使用 NetApp 互操作性表确认版本的特定组合。</block>
  <block id="bc8be72fdc9d6054f356bb2b7f80fd12" category="inline-link">NetApp 互操作性表</block>
  <block id="2f6ae9fa35fbcb0ec3205505ee027642" category="paragraph">本节提供了有关特定版本的 ONTAP 和 vSphere 支持的功能的指导。NetApp 建议确认版本与的特定组合<block ref="50c84d2622d2bc5cc86e7d8724309075" category="inline-link-rx"></block>。</block>
  <block id="7912c2100fd9b3b96b0b03e7a068fc9a" category="section-title">ONTAP 版本</block>
  <block id="8ee2892e0fb10cc58205a3d682abdb58" category="paragraph">在本报告发布时， NetApp 为以下版本系列提供了全面支持：</block>
  <block id="0fcf2ee62acd9eae83b609a0e7ecaa72" category="list-text">ONTAP 9.5</block>
  <block id="7dd2a92fd3f41a5334edf46f95d77e71" category="list-text">ONTAP 9.6</block>
  <block id="3447b91e516e4fc6b5dba827fcb68bee" category="list-text">ONTAP 9.7</block>
  <block id="2abfff2974f589f7a217325f304e0ec5" category="list-text">ONTAP 9.8</block>
  <block id="ee4651b72d795faf25a1382eb1315a95" category="section-title">vSphere 和 ESXi 支持</block>
  <block id="c3123497dcfdcdf46908ad18a51928ca" category="paragraph">NetApp ONTAP 广泛支持 vSphere ESXi 主机。上述四个主要版本系列（ 9.5 ， 9.6 ， 9.7 和 9.8 ）完全支持用作最新 vSphere 版本的数据存储平台，包括 6.0 ， 6.5 和 7.0 （包括这些版本的更新）。NFS v3 的互操作性已得到广泛定义， NetApp 支持任何符合 NFS v3 标准的客户端，包括虚拟机管理程序。NFSv4.1 支持仅限于 vSphere 6.0 到 7.0 。</block>
  <block id="8276b4666ec9fee7d71b01f6ee2b9955" category="paragraph">对于 SAN 环境， NetApp 会对 SAN 组件进行广泛的测试。一般来说， NetApp 支持标准 x86-64 机架式服务器和 Cisco UCS 服务器以及标准以太网适配器进行 iSCSI 连接。由于需要 HBA 固件和驱动程序， FC ， FCoE 和 NVMe/FC 环境具有更明确的支持定义。</block>
  <block id="a9854fb3ed44e3b8e9236c5b70405101" category="paragraph">请始终检查<block ref="50c84d2622d2bc5cc86e7d8724309075" category="inline-link-rx"></block> 确认支持特定硬件和软件配置。</block>
  <block id="dd55e255500b9ec15305dc69dfa0e15b" category="section-title">适用于 VMware VAAI 的 NFS 插件</block>
  <block id="eb3ac5aa51c1cacfa31cee70ac6586f0" category="paragraph">此适用于 ESXi 主机的插件有助于使用 VAAI 将操作卸载到 ONTAP 。最新版本 1.1.2 支持 NFSv4.1 数据存储库，包括 Kerberos （ krb5 和 krb5i ）支持。ESXi 6.0 ， 6.5 和 7.0 以及 ONTAP 9.5- 9.8 均支持此功能。</block>
  <block id="b2dd36bd4918e00f8b2e15e6d62a4b94" category="section-title">VASA 提供程序</block>
  <block id="15c15a65e1486d45a44c6f61927ef836" category="paragraph">NetApp 的 VASA Provider 支持 VVOL 配置和管理（请参见第 3.7 节）。最新的 VASA Provider 版本支持 ESXi 6.0 ， 6.5 和 7.0 以及 ONTAP 9.5- 9.8 。</block>
  <block id="c13550c8bc0f9b77e92bd2533221de9d" category="paragraph">适用于 VMware vSphere 的 ONTAP 工具是与 vSphere 一起管理 ONTAP 存储的关键（最佳做法是使用它）。vSphere 6.5 和 7.0 以及 ONTAP 9.5- 9.8 均支持最新版本 9.8 。</block>
  <block id="fa7b524ea902bff51145e4279b653d84" category="summary">此页面提供了视频和教程的简介。</block>
  <block id="246bb366fee5c7eda4fcd280728ec465" category="doc">混合云，桌面虚拟化和容器视频和演示</block>
  <block id="d04d1afcb2d01179846658f678623306" category="paragraph">请参见以下视频和演示，其中重点介绍了混合云，桌面虚拟化和容器解决方案的特定功能。</block>
  <block id="4267881eb271396086a3cc1387da9a3a" category="section-title">NetApp 与 VMware Tanzu</block>
  <block id="2dd739333b022cfeccd93e19c8c39d83" category="paragraph">借助 VMware Tanzu ，客户可以通过 vSphere 或 VMware Cloud Foundation 部署，管理和管理 Kubernetes 环境。通过 VMware 的这一产品组合，客户可以选择最适合其需求的 VMware Tanzu 版本，从一个控制平台管理所有相关的 Kubernetes 集群。</block>
  <block id="f8d0723a562ed498a977795477b75cb0" category="inline-link">VMware Tanzu 概述</block>
  <block id="2d3e9ef8ae693e8ff80c4d6e70f0a876" category="paragraph">有关 VMware Tanzu 的详细信息，请参见<block ref="1951d4038519ab642a1c0f8898cecfe0" category="inline-link-rx"></block>。此审核涵盖使用情形，可用添加内容以及有关 VMware Tanzu 的更多信息。</block>
  <block id="f90851c66bcfaa6ba091b34fe8a7428b" category="section-title">NetApp 与 VMware Tanzu 视频系列</block>
  <block id="31c49b154032d3d6039542b651e0f3d4" category="list-text"><block ref="31c49b154032d3d6039542b651e0f3d4" category="inline-link-rx"></block></block>
  <block id="fcf1189eaf4e4e32d27ee5174d63ae3c" category="list-text"><block ref="fcf1189eaf4e4e32d27ee5174d63ae3c" category="inline-link-rx"></block></block>
  <block id="5963b1ea39cb7cc8a0a4f5ce7c5ef816" category="list-text"><block ref="5963b1ea39cb7cc8a0a4f5ce7c5ef816" category="inline-link-rx"></block></block>
  <block id="20cf4402cce1622d010e58ef54b0c753" category="section-title">采用 Red Hat OpenShift 的 NetApp</block>
  <block id="0454c59b86dfb678c92c2c7480958d1c" category="paragraph">Red Hat OpenShift 是一款企业级 Kubernetes 平台，可用于运行采用开放式混合云策略的基于容器的应用程序。Red Hat OpenShift 作为领先公有云上的云服务或自助管理软件提供，可为客户提供设计基于容器的解决方案所需的灵活性。</block>
  <block id="2426b725f5be26f50931584ae804c2eb" category="inline-link">Red Hat OpenShift 概述</block>
  <block id="ad973740d0b3378d367abba8a74a610e" category="paragraph">有关 Red Hat OpenShift 的详细信息，请参见此部分<block ref="dc6de73076240cafa99651f2d6acfef4" category="inline-link-rx"></block>。您还可以查看产品文档和部署选项，了解有关 Red Hat OpenShift 的更多信息。</block>
  <block id="282b81467c1dda139fb97c67a904cdcb" category="section-title">NetApp 与 Red Hat OpenShift 视频</block>
  <block id="ade88b04ec62ed28eb857e48bc32cef5" category="list-text"><block ref="ade88b04ec62ed28eb857e48bc32cef5" category="inline-link-rx"></block></block>
  <block id="a2f2cd3053597e34724347a57620122b" category="list-text"><block ref="a2f2cd3053597e34724347a57620122b" category="inline-link-rx"></block></block>
  <block id="ca424b2aec79a90f676772e544578e54" category="doc">《适用于 VMware 虚拟化的 ONTAP 的新增功能》</block>
  <block id="e1ad6e34a69720808e091316ea5e105f" category="inline-link-macro">行数 =21..38</block>
  <block id="24988a51cebf36bd40a4e4df7f9199a1" category="paragraph"><block ref="24988a51cebf36bd40a4e4df7f9199a1" category="inline-link-macro-rx"></block></block>
  <block id="02d4482d332e1aef3437cd61c9bcc624" category="doc">请联系我们</block>
  <block id="3dd3a0a8eebc543e239dc4af5d76b322" category="paragraph">您对本技术报告有何意见？</block>
  <block id="3c48757505a122bf371d1bf0105b6871" category="paragraph">请发送电子邮件至 doccomments@netapp.com ，并在主题行中注明 TR-4597 。</block>
  <block id="dcaf091737df278b1b4bdd2e37c10a75" category="summary">NetApp ONTAP 自 2002 年引入现代数据中心以来，一直是 VMware vSphere 环境中的领先存储解决方案，它不断增加创新功能来简化管理，同时降低成本。</block>
  <block id="1fdf67ffe178876efb8b8cacfb0f052b" category="doc">TR-4900 ：采用 NetApp ONTAP 9 的 VMware Site Recovery Manager</block>
  <block id="cc6ab3d11d2dc330a573866f7c9f67aa" category="paragraph">NetApp 的 Chance Bingen</block>
  <block id="60398bdc931fc67a9b6d781434c3a15a" category="section-title">适用于 vSphere 的 ONTAP</block>
  <block id="09d6c6a1868cc36795c7a0f8f84e50c9" category="paragraph">NetApp ONTAP 自 2002 年引入现代数据中心以来，一直是 VMware vSphere 环境中的领先存储解决方案，它不断增加创新功能来简化管理，同时降低成本。本文档介绍了 VMware 行业领先的灾难恢复（ Disaster Recovery ， DR ）软件 ONTAP 解决方案 for VMware Site Recovery Manager （ SRM ），其中包括最新的产品信息和最佳实践，可简化部署，降低风险和简化日常管理。</block>
  <block id="e3445c3aa798f5ad98665e33d34dd952" category="paragraph">最佳实践是指南和兼容性工具等其他文档的补充。它们是根据 NetApp 工程师和客户的实验室测试和丰富的现场经验开发的。在某些情况下，建议的最佳实践可能不适合您的环境；但是，它们通常是最简单的解决方案，可满足大多数客户的需求。</block>
  <block id="c3edc14dbc5862176444f521372d1744" category="paragraph">本文档重点介绍 ONTAP 9 的最新版本与适用于 VMware vSphere 的受支持 ONTAP 工具版本（包括 NetApp 存储复制适配器（ SRA ）和 VASA Provider （ VP ））以及 VMware Site Recovery Manager 8 结合使用时的功能。4.</block>
  <block id="c40f8c2af56356193284f6b46865d954" category="section-title">为什么要将 ONTAP 与 SRM 结合使用？</block>
  <block id="3c41d5be62c97a13079e9c7abf078292" category="paragraph">由 ONTAP 软件提供支持的 NetApp 数据管理平台是 SRM 采用最广泛的一些存储解决方案。原因很多：一个安全，高性能，统一协议（ NAS 和 SAN 结合使用）的数据管理平台，可提供行业定义的存储效率，多租户，服务质量控制，使用节省空间的 Snapshot 副本保护数据以及使用 SnapMirror 进行复制。利用原生混合多云集成来保护 VMware 工作负载，以及触手可及的大量自动化和流程编排工具。</block>
  <block id="0d573b6a27c08499fee406e3db49812f" category="paragraph">使用 SnapMirror 进行基于阵列的复制时，您可以利用 ONTAP 最成熟，经验证的技术之一。SnapMirror 可以让您获得安全高效的数据传输优势，只复制更改过的文件系统块，而不是复制整个 VM 或数据存储库。即使这些块也可以利用重复数据删除，数据压缩和数据缩减等空间节省。现代 ONTAP 系统现在使用与版本无关的 SnapMirror ，让您可以灵活地选择源集群和目标集群。SnapMirror 确实已成为灾难恢复可用的最强大工具之一。</block>
  <block id="36b04390d6103d8075862e4b825a485e" category="paragraph">无论您使用的是传统 NFS ， iSCSI 还是光纤通道连接的数据存储库（现在支持 VVol 数据存储库）， SRM 都可以提供强大的第一方产品，充分利用 ONTAP 的最佳功能进行灾难恢复或数据中心迁移规划和编排。</block>
  <block id="5d111e8a6885460b43ecf1f7abb6377e" category="section-title">SRM 如何利用 ONTAP 9</block>
  <block id="16d4ec242c9f020f3a1fade311c776ed" category="paragraph">SRM 可通过与适用于 VMware vSphere 的 ONTAP 工具集成来利用 ONTAP 系统的高级数据管理技术， VMware vSphere 是一种虚拟设备，其中包括三个主要组件：</block>
  <block id="d54038ba1f2a04a5b5f26c96627ae3e7" category="list-text">无论您使用的是 SAN 还是 NAS ， vCenter 插件（以前称为 Virtual Storage Console （ VSC ））均可简化存储管理和效率功能，提高可用性并降低存储成本和运营开销。它使用最佳实践配置数据存储库，并为 NFS 和块存储环境优化 ESXi 主机设置。为了获得所有这些优势， NetApp 建议在将 vSphere 与运行 ONTAP 软件的系统结合使用时使用此插件。</block>
  <block id="a106bb15d6dc2b11535ed4fefc81fbf4" category="list-text">适用于 ONTAP 的 VASA Provider 支持 VMware vStorage APIs for Storage Awareness （ VASA ）框架。VASA Provider 可将 vCenter Server 与 ONTAP 连接起来，以帮助配置和监控 VM 存储。它支持 VMware 虚拟卷（ VVOL ），并可管理存储功能配置文件（包括 VVOL 复制功能）和单个 VM VVOL 性能。此外，它还提供警报，用于监控容量以及配置文件合规性。与 SRM 结合使用时，适用于 ONTAP 的 VASA Provider 支持基于 VVOL 的虚拟机，而无需在 SRM 服务器上安装 SRA 适配器。</block>
  <block id="f2007951062862f5f0d593acbb23bcb4" category="list-text">SRA 与 SRM 结合使用，用于管理传统 VMFS 和 NFS 数据存储库的生产站点和灾难恢复站点之间的 VM 数据复制，并用于无中断测试灾难恢复副本。它有助于自动执行发现，恢复和重新保护任务。它包括适用于 Windows SRM 服务器和 SRM 设备的 SRA 服务器设备和 SRA 适配器。</block>
  <block id="8ccaa60ee78ecc93c4870b3b2ad15284" category="paragraph">在 SRM 服务器上安装并配置 SRA 适配器以保护非 VVOL 数据存储库和 / 或在 VASA Provider 设置中启用 VVOL 复制后，您可以开始配置 vSphere 环境以实现灾难恢复的任务。</block>
  <block id="0a1e25166326359cd5f50d0ab83e6a37" category="paragraph">SRA 和 VASA Provider 为 SRM 服务器提供了一个命令和控制界面，用于管理包含 VMware 虚拟机（ VM ）的 ONTAP FlexVol 以及保护它们的 SnapMirror 复制。</block>
  <block id="38db855935949f86c5db7bfe7d49873e" category="paragraph">从 SRM 8.3 开始， SRM 服务器引入了一个新的 SRM VVol Provider 控制路径，使其可以与 vCenter 服务器进行通信，并通过该服务器与 VASA Provider 进行通信，而无需 SRA 。这样， SRM 服务器就可以比以前更深入地控制 ONTAP 集群，因为 VASA 可提供一个完整的 API 来实现紧密耦合的集成。</block>
  <block id="53e971f0dfb3ef96ca359dcb648176b9" category="paragraph">SRM 可以使用 NetApp 的专有 FlexClone 技术无中断地测试灾难恢复计划，以便在灾难恢复站点上为受保护的数据存储库创建近乎即时的克隆。SRM 会创建一个沙盒来进行安全测试，以便在发生真正灾难时保护您的组织和客户，从而让您对组织在发生灾难时执行故障转移的能力充满信心。</block>
  <block id="04a8f82007ed4bec45053912a49b6f85" category="paragraph">如果发生真正的灾难甚至是计划内迁移， SRM 允许您通过最终 SnapMirror 更新（如果您选择这样做）向数据集发送任何最后一分钟的更改。然后，它会中断镜像并将数据存储库挂载到灾难恢复主机。此时，您可以根据预先规划的策略按任意顺序自动启动 VM 。</block>
  <block id="b2560426a08ae6ceb167dad2bfb5e8ae" category="section-title">采用 ONTAP 的 SRM 以及其他使用情形：混合云和迁移</block>
  <block id="ed4c730bd8636c27d3eaa876c63b3d45" category="inline-link">Equinix 中的 NetApp 私有存储</block>
  <block id="b422e05bc5c6f52208b66ff51d718b9d" category="paragraph">与本地存储选项相比，将 SRM 部署与 ONTAP 高级数据管理功能相集成，可以显著提高扩展能力和性能。除此之外，它还带来了混合云的灵活性。通过混合云，您可以使用 FabricPool 将未使用的数据块从高性能阵列分层到首选超大规模存储器，从而节省资金。 StorageGRID 可以是 NetApp 等内部 S3 存储。您还可以使用 Cloud Volumes ONTAP （ CVO ）或对基于边缘的系统使用 SnapMirror ，并使用软件定义的 ONTAP Select 或基于云的灾难恢复<block ref="37a666d3a37f1c4a8c4c8dba379664a4" category="inline-link-rx"></block> 适用于 Amazon Web Services （ AWS ）， Microsoft Azure 和 Google Cloud Platform （ GCP ），可在云中创建完全集成的存储，网络和计算服务堆栈。</block>
  <block id="10ae334f731d3c4fabafa8017f7a3ab2" category="paragraph">然后，借助 FlexClone ，您可以在存储占用空间接近零的云服务提供商数据中心内执行测试故障转移。现在，保护您的组织的成本比以往任何时候都低。</block>
  <block id="12d0cbcf61df7df30bf9b020f6fbb051" category="paragraph">SRM 还可用于执行计划内迁移，方法是利用 SnapMirror 将 VM 从一个数据中心高效地传输到另一个数据中心，甚至在同一个数据中心内高效地传输 VM ，无论您自己还是通过任意数量的 NetApp 合作伙伴服务提供商。</block>
  <block id="93ac3f76e97265952e309b2cbb980030" category="summary">此页面提供了在 VMware vSphere 环境中部署 NetApp ONTAP NFS 版本 4 数据存储库的步骤。</block>
  <block id="11bbb95c80fd3935828f1472bade3ae4" category="doc">vSphere NFS 数据存储库—使用 ONTAP 的 4.1 版</block>
  <block id="0a339846bb9d45c2252cf84f27f8390e" category="paragraph">本节介绍如何使用 ONTAP NAS 存储创建 NFS 4.1 版数据存储库。</block>
  <block id="d5ffdd3b223c5bb3d1d66e5756977564" category="list-text">管理 vSphere 环境和 ONTAP 所需的基本技能</block>
  <block id="a65c730562f6a5feffebe8a600829c71" category="list-text">运行 ｛ ontap_version ｝ 的 ONTAP 存储系统（ FAS/AFF/CVO/ONTAP Select/Cloud Volume Service/Azure NetApp Files ）</block>
  <block id="8e7f2b8f8c015d7ce248683387c1daf5" category="list-text">vSphere 主机信息 ｛ vsphere_version ｝</block>
  <block id="7d0a7cdd836d94b19d4ecbce81ba2c1e" category="list-text">连接了 ONTAP 系统网络数据端口， vSphere 主机和</block>
  <block id="d4e890b3139e840bac898dc24d2330a3" category="list-text">适用于 VMware vSphere 的 ONTAP 工具已部署，配置并可随时使用</block>
  <block id="f2f6f93a63f235f63bf8a14ad398ddd0" category="inline-link">互操作性表工具（ IMT ）</block>
  <block id="2c364f266e330209041f2cf854afab91" category="list-text">使用检查兼容性<block ref="975c7893d48b02c6727b59b0582d74bc" category="inline-link-rx"></block></block>
  <block id="863feef43abaa752e441459bd37722c3" category="list-text">完成下面提供的 ONTAP 和 vSphere 任务。</block>
  <block id="1b2d2406823c016e35ebeddf0ec29c66" category="inline-link-macro">验证 NFS 的 ONTAP 许可证</block>
  <block id="7209cd833425a764d216b4e565ac65c6" category="list-text"><block ref="7209cd833425a764d216b4e565ac65c6" category="inline-link-macro-rx"></block></block>
  <block id="55d2948d4abb6ad9ea1e2b6a5b73460b" category="list-text">使用 `ssystem license show` 命令检查是否列出了 NFS 。</block>
  <block id="0a5e80a3066e5036387d5026a58fe582" category="inline-link-macro">按照 NFS 配置工作流进行操作</block>
  <block id="4b9e38c0f910614d9be47f85cf0f07bc" category="list-text"><block ref="4b9e38c0f910614d9be47f85cf0f07bc" category="inline-link-macro-rx"></block></block>
  <block id="4344c7f5d714fb1797033b7d9cca43fd" category="inline-link-macro">按照适用于 vSphere 的 NFS 客户端配置工作流进行操作。</block>
  <block id="c9fb47d82da1089992044972b4b65103" category="paragraph"><block ref="c9fb47d82da1089992044972b4b65103" category="inline-link-macro-rx"></block></block>
  <block id="a9b73ebef33c98ef5a1044177d2b49f3" category="summary">VMware vCenter Site Recovery Manager 是一款灾难恢复产品，可为集中式恢复计划提供自动化流程编排和无中断测试，从而简化所有虚拟化应用程序的灾难恢复管理。</block>
  <block id="06f589670c0d0455912cc8bb70b78701" category="paragraph">通过在 NetApp ONTAP 系统上部署 Site Recovery Manager ，您可以显著降低灾难恢复的成本和复杂性。凭借高性能，易于管理和可扩展的存储设备以及强大的软件产品， NetApp 可提供灵活的存储和数据管理解决方案来支持 vSphere 环境。</block>
  <block id="00549aec33ddcae6a708ed7368a7bcd0" category="paragraph">本指南中提供的最佳实践和建议并非 " 一刀切 " 的解决方案。本文档包含一系列最佳实践和建议，这些最佳实践和建议提供了规划，部署和管理 SRM 灾难恢复计划的准则。在 NetApp 存储上规划和部署 VMware vCenter Site Recovery 环境时，请咨询当地的 NetApp VMware 专家。NetApp VMware 专家可以快速确定任何 vSphere 环境的需求，并相应地调整存储解决方案。</block>
  <block id="a7ba4bd9aa10b0456b8f13ef40a2d1d5" category="summary">此页面提供了在 VMware vSphere 环境中部署 NetApp ONTAP 存储 FCoE VMFS 数据存储库的步骤。</block>
  <block id="1937a4bfde18bb02682d378132d0b6a9" category="doc">vSphere VMFS 数据存储库—采用 ONTAP 的以太网光纤通道存储协议</block>
  <block id="66439ac6171413528646918952bff23e" category="paragraph">本节介绍如何使用以太网光纤通道（ FCoE ）传输协议创建与 ONTAP 存储的 VMFS 数据存储库。</block>
  <block id="b087c7e1213b84e69de1a6e5214cd942" category="list-text">运行 ｛ ontap_version ｝ 的 ONTAP 存储系统（ FAS/AFF/CVO/ONTAP Select ）</block>
  <block id="d9da372e69584852a9808bfa9fcc99a9" category="inline-link-macro">支持的 FCoE 组合</block>
  <block id="b61947ecee08267d1f6930ccbd646d52" category="list-text"><block ref="b61947ecee08267d1f6930ccbd646d52" category="inline-link-macro-rx"></block></block>
  <block id="08b42ec45ef1147093b9161cc743b0a0" category="inline-link-macro">完成的配置工作表</block>
  <block id="bcf78e9148ebbc12ed4a54d2149cc2bc" category="list-text"><block ref="bcf78e9148ebbc12ed4a54d2149cc2bc" category="inline-link-macro-rx"></block></block>
  <block id="80ba2a0b5b5ae31742a18c682e724b6e" category="list-text">连接了 ONTAP FC 数据端口或 vSphere 主机</block>
  <block id="d7b3fbe677a7bffd7e387a3578d6b481" category="inline-link-macro">已配置 FC/FCoE 分区</block>
  <block id="434da439fcd2a7729ac67cef537d6651" category="list-text"><block ref="434da439fcd2a7729ac67cef537d6651" category="inline-link-macro-rx"></block></block>
  <block id="5d914ccaef7b5404838cb47cff27fa11" category="list-text">支持 FCoE</block>
  <block id="b74438cda33fca6618da9e30ef5fee5d" category="list-text">支持 DCB</block>
  <block id="69b788fe29f78e1fb439efd1bec08ab6" category="inline-link-macro">FCoE 的巨型帧</block>
  <block id="e92f4c11834e879e94fa441894d8e9c9" category="list-text"><block ref="e92f4c11834e879e94fa441894d8e9c9" category="inline-link-macro-rx"></block></block>
  <block id="42cdbee955a0e208306a321b74a948b1" category="section-title">配置 VMFS 数据存储库</block>
  <block id="f067d14dc86c5c0ec984803b3485a7a6" category="inline-link-macro">验证是否支持 FCoE 配置</block>
  <block id="79d164739c1e0aaf7f56e13c2a4c66ac" category="list-text"><block ref="4201ef99768aac8f72883e5cb6ec656f" category="inline-link-macro-rx"></block>。</block>
  <block id="1a04100ec801e5e2d1708d89eb1159b6" category="inline-link-macro">验证 FCP 的 ONTAP 许可证。</block>
  <block id="7fcd357d480b8eaa4a38cdbbddfd6c97" category="list-text"><block ref="7fcd357d480b8eaa4a38cdbbddfd6c97" category="inline-link-macro-rx"></block></block>
  <block id="f2a0a9000f5ff3910235e570c0ac5e44" category="list-text">使用 `ssystem license show` 命令验证是否已列出 FCP 。</block>
  <block id="e5b8ca3e9ff580bcc9315fabcb34312e" category="list-text">验证是否已在 SVM 上启用 FCP 协议。</block>
  <block id="015c565181667d59b83b7761e35682d1" category="inline-link-macro">使用 FCP 创建新的 SVM 。</block>
  <block id="de4606f963140e2d2d0a3df251ffd646" category="list-text"><block ref="de4606f963140e2d2d0a3df251ffd646" category="inline-link-macro-rx"></block></block>
  <block id="2d6fd01ea0767b50e214a74ff1fcfae0" category="list-text">验证 SVM 上的 FCP 逻辑接口是否可用。</block>
  <block id="46f04290f169589dff914e050d1a987b" category="list-text">使用图形用户界面创建 SVM 时，逻辑接口就是该过程的一部分。</block>
  <block id="ee7f4720a3fc60686c4a9f7429a60cbc" category="list-text">要重命名网络接口，请使用 `Network Interface modify` 。</block>
  <block id="6e67c7d604ae439f60ceb51480fdbb1c" category="inline-link-macro">创建并映射 LUN</block>
  <block id="e4eeb9421963195597743339d2f38ff6" category="list-text"><block ref="96e32c32f267ac1d65d603f36f017a41" category="inline-link-macro-rx"></block>；如果您使用适用于 VMware vSphere 的 ONTAP 工具，请跳过此步骤。</block>
  <block id="f6c0391a150cfd40a68682285c56e835" category="inline-link-macro">存储适配器信息</block>
  <block id="60f05805eb8189d665c19856d5388e3c" category="list-text">验证是否已安装 HBA 驱动程序。VMware 支持的 HBA 已开箱即用部署驱动程序，应在中显示这些驱动程序 <block ref="c5f1cce809af8cfecf09908d33f4c097" category="inline-link-macro-rx"></block>。</block>
  <block id="ce4df831657d2621e80bbef9271c33cd" category="summary">从传统虚拟设备过渡后， ONTAP 工具可提供大量新功能，更高的限制以及新的 VVOL 支持。</block>
  <block id="45b1565c472fff4046d0f7ddbe1342f2" category="doc">SRM 和 ONTAP 工具的新增功能</block>
  <block id="116d20fc387d73c8e4a86e7998913947" category="section-title">最新版本的 vSphere 和 Site Recovery Manager</block>
  <block id="aa73b07f008975ca9fcabf87bfafb167" category="paragraph">随着 SRM 8.3 及更高版本以及 ONTAP 工具 9.7.1 及更高版本的发布，您现在可以保护在 VMware vSphere 7 上运行的 VM 。</block>
  <block id="96ca6fcc2ffdab3c06d0875be8d4fe29" category="paragraph">近二十年来， NetApp 与 VMware 建立了深厚的合作关系，并努力尽快为最新版本提供支持。请始终查看 NetApp 互操作性表工具（ IMT ）以了解最新的合格软件组合。</block>
  <block id="63fe9875fcf8108a4dca29a0795d8674" category="paragraph">可以找到 NetApp IMT<block ref="dd81e3609a71c92c2a90d9165ca7bb00" category="inline-link-rx"></block>。</block>
  <block id="23a6222620917211381cf4455d9e0a83" category="section-title">VVOL 支持（以及 SPBM 为何如此重要，即使使用 SRM 也是如此）</block>
  <block id="a36269071ceeb480e636654c4620f7fb" category="paragraph">从 8.3 版开始， SRM 现在支持利用 VVOL 和基于阵列的复制进行基于存储策略的复制管理（ SPBM ）。为此， SRM 服务器进行了更新，加入了一项新的 SRM VVol 提供程序服务，该服务可与 vCenter 服务器的 SMS 服务通信以执行与 VASA 相关的任务。</block>
  <block id="4567f5576b4577c63b126cac3f6aa5fa" category="paragraph">此架构的一个优势是不再需要 SRA ，因为所有内容都使用 VASA 进行处理。</block>
  <block id="e04031e1cecdb6732f91d44b204dbcf3" category="paragraph">SPBM 是 vSphere 工具箱中的一款功能强大的工具，可提供简化，可预测且一致的存储服务，供私有云和混合云环境中的自动化框架使用。从根本上说， SPBM 允许您定义满足不同客户群需求的服务级别。现在，您可以通过 SRM 向客户展示复制功能，以处理需要强大的行业标准灾难恢复流程编排和自动化功能的关键工作负载。</block>
  <block id="6f1ad7cac2af0e3b92a3936efc393a0e" category="paragraph"><block ref="6f1ad7cac2af0e3b92a3936efc393a0e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="48e2854d95fac45929940abc72062193" category="section-title">VVOL 架构 2.3 支持基于设备的 SRM 服务器</block>
  <block id="925c477f139cce0692e13946a7f75eac" category="paragraph">除了基于 Windows 的传统平台之外，现在还支持基于 Photon OS 的 SRM 服务器。</block>
  <block id="62c2c4203aebe081ddbc6cdd489f8ad7" category="paragraph">现在，无论首选 SRM 服务器类型如何，您都可以安装 SRA 适配器。</block>
  <block id="7cb1700928c008eb817bc79250cc9002" category="section-title">支持 IPv6</block>
  <block id="ea9aacd1495949730de8eeab11e66459" category="paragraph">现在支持 IPv6 ，但有以下限制：</block>
  <block id="d6d7f3d43de975c07655ebba1936867a" category="list-text">vCenter 6.7 或更高版本</block>
  <block id="eb26ee1a20fe3dbde98204ec8b3ab838" category="list-text">SRM 8.2 （ 8.1 ， 8.3 和 8 ）不支持。支持 4 个）</block>
  <block id="918d32b75f0ab883abba3a8dc0c3ae8d" category="inline-link">互操作性表工具</block>
  <block id="02e7e71042609d3158020ab7befe45c6" category="list-text">检查<block ref="218f4ad7153f69cdc5467065434cd2f0" category="inline-link-rx"></block> 适用于最新的合格版本。</block>
  <block id="e887aed8f9c3dbecd37e8896d96b6637" category="section-title">提高了性能</block>
  <block id="3efd4ca8de094abf49f004186cd70fff" category="paragraph">运行性能是执行 SRM 任务的关键要求。为满足现代 RTO 和 RPO 的要求，采用 ONTAP 工具的 SRA 增加了两项新改进。</block>
  <block id="bd403c539a0c414afacd7477bf3d311f" category="list-text">* 支持并发重新保护操作。 * SRA 9.1.1 首次推出此功能，通过启用此功能，您可以同时对两个或多个恢复计划运行重新保护，从而缩短故障转移或迁移后重新保护数据存储库所需的时间，并使其保持在 RTO 和 RPO 参数范围内。</block>
  <block id="f63b947f655a5aee2cf69d4f30d7f96b" category="list-text">ONTAP 工具 9.8 新增了一种仅限 NAS 的新优化模式。 * 如果使用 SVM 范围的帐户并连接到仅包含基于 NFS 的数据存储库的 ONTAP 集群，则可以在支持的环境中启用仅 NAS 优化模式以实现峰值性能。</block>
  <block id="4a4842d7448ef71eb69b013e560b18bb" category="section-title">扩展性更强</block>
  <block id="26738e8d40ae8035805f13bdbf185c30" category="paragraph">现在，在与 SRM 8.3 及更高版本结合使用时， ONTAP 工具 SRA 最多可支持 500 个保护组（ PG ）。</block>
  <block id="b56265ceb6311e42003e668438136a59" category="section-title">同步复制</block>
  <block id="96cb4d41ca97bd9d3d446984d3170a57" category="paragraph">期待已久的一项新功能是采用 ONTAP 9.5 及更高版本的 SnapMirror 同步（ SM-S ），该功能可为任务关键型应用程序提供卷粒度零 RPO 数据复制解决方案。SM-S 需要使用 ONTAP 工具 9.8 或更高版本。</block>
  <block id="b9832b10a87d0c3793ed3b413ee1d839" category="section-title">REST API 支持</block>
  <block id="0065ce57adc813187a8e9c640ba6223a" category="paragraph">现在， SRA 服务器配置可通过 REST API 进行管理。Swagger UI 可帮助您构建自动化工作流，您可以在 ONTAP 工具设备上找到，网址为 `https://&lt;appliance&gt;:8143/api/rest/swagger-ui.html#/` 。</block>
  <block id="160f88ca0bed5b24e94c809f4e22f1e7" category="summary">在 ONTAP 9 中，集群管理员可以看到集群的物理组件，但使用集群的应用程序和主机无法直接看到这些物理组件。</block>
  <block id="89fafdb11a7e8cd8abebb1d4df053dad" category="doc">复制拓扑</block>
  <block id="be01acd2f018d38f9446f06b99ee4a2a" category="paragraph">在 ONTAP 9 中，集群管理员可以看到集群的物理组件，但使用集群的应用程序和主机无法直接看到这些物理组件。物理组件提供了一个共享资源池，用于构建逻辑集群资源。应用程序和主机仅通过包含卷和 LIF 的 SVM 访问数据。</block>
  <block id="7758fc02779ee5917b0a09ee22b52221" category="paragraph">在 VMware vCenter Site Recovery Manager 中，每个 NetApp SVM 都被视为一个阵列。SRM 支持某些阵列到阵列（或 SVM 到 SVM ）复制布局。</block>
  <block id="58c0b55a67f4331cc49b073a7183e06c" category="paragraph">一个虚拟机不能在多个 SRM 阵列上拥有虚拟机磁盘（ Virtual Machine Disk ， VMDK ）或 RDM 数据，原因如下：</block>
  <block id="880aeda0b58c0b30120b6319ae5f3beb" category="list-text">SRM 只能识别 SVM ，而不能识别单个物理控制器。</block>
  <block id="6f55124e085dbeb640e4cb8ad2c97905" category="list-text">SVM 可以控制跨越集群中多个节点的 LUN 和卷。</block>
  <block id="39d9903201320a83d45d3b36d512f051" category="cell">最佳实践</block>
  <block id="d86019fe4ba86b184ac71cf24a22f0c6" category="cell">要确定可支持性，请牢记以下规则：要使用 SRM 和 NetApp SRA 保护 VM ， VM 的所有部分都必须仅位于一个 SVM 上。此规则适用于受保护站点和恢复站点。</block>
  <block id="2e4472d35f80aa8b7eca52ae3dd43dc6" category="section-title">支持的 SnapMirror 布局</block>
  <block id="d070ad9d8397892aa7f317cbb9046661" category="paragraph">下图显示了 SRM 和 SRA 支持的 SnapMirror 关系布局方案。复制卷中的每个 VM 在每个站点上仅拥有一个 SRM 阵列（ SVM ）上的数据。</block>
  <block id="39d3085abe6ccb914d8535de8a5f3e37" category="paragraph"><block ref="39d3085abe6ccb914d8535de8a5f3e37" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1ae7670cf947a397bdf6a882fbcc912a" category="paragraph"><block ref="1ae7670cf947a397bdf6a882fbcc912a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="111d3212464dba203cbd675a0338dcbc" category="paragraph"><block ref="111d3212464dba203cbd675a0338dcbc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c5dc3a606b05b41db22793ed3c1a72db" category="paragraph"><block ref="c5dc3a606b05b41db22793ed3c1a72db" category="inline-image-macro-rx" type="image"></block></block>
  <block id="86cf5bd2bdb1b1d67f8f907f41099509" category="section-title">支持的阵列管理器布局</block>
  <block id="aacc8f18d659f75715d91a983e872233" category="paragraph">在 SRM 中使用基于阵列的复制（ ABR ）时，保护组会隔离到一个阵列对中，如以下屏幕截图所示。在这种情况下，恢复站点上的 `SVM1` 和 `SVM2` 与 `SVM3` 和 `SVM4` 建立对等关系。但是，在创建保护组时，您只能选择两个阵列对中的一个。</block>
  <block id="68a1b289711a591ed50627014cd01ce9" category="paragraph"><block ref="68a1b289711a591ed50627014cd01ce9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1ceb46f3e1c6c7995de4ec5f05601227" category="section-title">不支持的布局</block>
  <block id="611b9b35ac984f20e6594baec9181dbf" category="paragraph">不受支持的配置会在单个虚拟机所拥有的多个 SVM 上包含数据（ VMDK 或 RDM ）。在下图所示的示例中，无法为 `VM1` 配置 SRM 保护，因为 `VM1` 的数据位于两个 SVM 上。</block>
  <block id="5c251a65e8394fbeaf104ba1a1cad2e1" category="paragraph"><block ref="5c251a65e8394fbeaf104ba1a1cad2e1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f5f5fe64e0e9d0ae7ce2a0777d0ccf62" category="paragraph"><block ref="f5f5fe64e0e9d0ae7ce2a0777d0ccf62" category="inline-image-macro-rx" type="image"></block></block>
  <block id="69851ac8c2fa81b32799efc8522798d5" category="paragraph">如果任何复制关系将单个 NetApp 卷从一个源 SVM 复制到同一 SVM 或不同 SVM 中的多个目标，则称为 SnapMirror 扇出。SRM 不支持扇出。在下图所示的示例中，无法在 SRM 中配置 `VM1` 以进行保护，因为它通过 SnapMirror 复制到两个不同的位置。</block>
  <block id="688890bdbdfd2d73a05a09883f3c4b40" category="paragraph"><block ref="688890bdbdfd2d73a05a09883f3c4b40" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3f88384b0d5cdcdc25895c644126c1b0" category="section-title">SnapMirror 级联</block>
  <block id="7ebde774ad43c45667d5544308a6d688" category="paragraph">SRM 不支持 SnapMirror 关系的级联，即，将源卷复制到目标卷，同时使用 SnapMirror 将目标卷复制到另一个目标卷。在下图所示的情形中，不能使用 SRM 在任何站点之间进行故障转移。</block>
  <block id="2990fc44e9ba827a397e96e1c278a02a" category="paragraph"><block ref="2990fc44e9ba827a397e96e1c278a02a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8bd15e818d377a0a5cf6ebc429555f79" category="section-title">SnapMirror 和 SnapVault</block>
  <block id="d440734d1f5d9c6e59aa97f7cbbcd525" category="paragraph">NetApp SnapVault 软件支持在 NetApp 存储系统之间对企业数据进行基于磁盘的备份。SnapVault 和 SnapMirror 可以同时位于同一环境中；但是， SRM 仅支持 SnapMirror 关系的故障转移。</block>
  <block id="7878dfbf4b6ad3bc60d095cf89d79202" category="admonition">NetApp SRA 支持 `mirror-vault` 策略类型。</block>
  <block id="883e69a285ae2d5fd23c80cd29285804" category="paragraph">SnapVault 是为 ONTAP 8.2 从头开始重建的。虽然以前的 Data ONTAP 7- 模式用户应该发现相似之处，但此版本的 SnapVault 已进行了重大改进。其中一项重大进步是，能够在 SnapVault 传输期间保持主数据的存储效率。</block>
  <block id="9bc21373e0e299579a7ac86dcd4f513d" category="paragraph">一个重要的架构变化是， ONTAP 9 中的 SnapVault 在卷级别进行复制，而不是像 7- 模式 SnapVault 那样在 qtree 级别进行复制。此设置意味着 SnapVault 关系的源必须为卷，并且该卷必须复制到 SnapVault 二级系统上其自身的卷。</block>
  <block id="f7b20cbc14027c7711d53d03a84f31af" category="paragraph">在使用 SnapVault 的环境中，将在主存储系统上创建专门命名的 Snapshot 副本。根据所实施的配置，可以通过 SnapVault 计划或 NetApp Active IQ Unified Manager 等应用程序在主系统上创建命名的 Snapshot 副本。然后，在主系统上创建的命名 Snapshot 副本会复制到 SnapMirror 目标，并从该位置存储到 SnapVault 目标。</block>
  <block id="5dd37b7cd36f7d38ba2e6a63c603be4c" category="paragraph">可以在级联配置中创建源卷，在级联配置中，卷会复制到灾难恢复站点中的 SnapMirror 目标，然后从该位置存储到 SnapVault 目标。也可以在扇出关系中创建源卷，其中一个目标是 SnapMirror 目标，另一个目标是 SnapVault 目标。但是，在发生 SRM 故障转移或复制反转时， SRA 不会自动重新配置 SnapVault 关系以使用 SnapMirror 目标卷作为存储源。</block>
  <block id="5bc66b9c84b3f7cc0b375e729376b68d" category="inline-link">TR-4015 《适用于 ONTAP 9 的 SnapMirror 配置最佳实践指南》。</block>
  <block id="0d510e96259254d285c6aaeb8458f45d" category="paragraph">有关适用于 ONTAP 9 的 SnapMirror 和 SnapVault 的最新信息，请参见<block ref="32e7c991f675bf983c547a2a174c2caf" category="inline-link-rx"></block></block>
  <block id="75f8a2d99eea9f336120aec69d8c1010" category="cell">如果在同一环境中使用 SnapVault 和 SRM ， NetApp 建议使用 SnapMirror 到 SnapVault 级联配置，其中通常会从灾难恢复站点的 SnapMirror 目标执行 SnapVault 备份。发生灾难时，此配置会使主站点无法访问。通过将 SnapVault 目标保留在恢复站点上，可以在故障转移后重新配置 SnapVault 备份，以便在恢复站点上运行时可以继续执行 SnapVault 备份。</block>
  <block id="e082a67e3ddd7f4f92096536440cbb34" category="paragraph">在 VMware 环境中，每个数据存储库都有一个通用唯一标识符（ UUID ），每个 VM 都有一个唯一的受管对象 ID （ MOID ）。在故障转移或故障恢复期间， SRM 不会维护这些 ID 。由于 SRM 在故障转移期间不会维护数据存储库 UUID 和 VM MOID ，因此，在 SRM 故障转移后，必须重新配置依赖这些 ID 的所有应用程序。例如， NetApp Active IQ Unified Manager 可将 SnapVault 复制与 vSphere 环境进行协调。</block>
  <block id="657a41cce55646ab17754ac1427970af" category="paragraph">下图显示了 SnapMirror 到 SnapVault 的级联配置。如果 SnapVault 目标位于灾难恢复站点或不受主站点中断影响的三级站点上，则可以重新配置环境，以便在故障转移后继续备份。</block>
  <block id="b56afb9a43332c671116b9fa3d597867" category="paragraph"><block ref="b56afb9a43332c671116b9fa3d597867" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e068178460f103498576eac8ddb7fb82" category="paragraph">下图显示了使用 SRM 将 SnapMirror 复制反转回主站点后的配置。此外，还对环境进行了重新配置，使 SnapVault 备份从现在的 SnapMirror 源进行。此设置为 SnapMirror SnapVault 扇出配置。</block>
  <block id="0ffa07ffd89b136d0ed8f2ac5ebcabb8" category="paragraph"><block ref="0ffa07ffd89b136d0ed8f2ac5ebcabb8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b4607a4ee7e1830ab6ba0007df206956" category="paragraph">在 SRM 执行故障恢复并再次反转 SnapMirror 关系后，生产数据将返回到主站点。现在，此数据将通过 SnapMirror 和 SnapVault 备份获得与故障转移到灾难恢复站点之前相同的保护方式。</block>
  <block id="63fd1f18d5d53fa97fd05a7fd96090b4" category="section-title">在 Site Recovery Manager 环境中使用 qtree</block>
  <block id="2d88570ceb2de0d8699a068b0140454b" category="paragraph">qtree 是一种特殊目录，可用于为 NAS 应用文件系统配额。ONTAP 9 允许创建 qtree ，而 qtree 可以存在于使用 SnapMirror 复制的卷中。但是， SnapMirror 不允许复制单个 qtree 或 qtree 级复制。所有 SnapMirror 复制仅在卷级别进行。因此， NetApp 不建议在 SRM 中使用 qtree 。</block>
  <block id="345cb3f040f9f7f3f1a4261ed260aa79" category="section-title">FC 和 iSCSI 混合环境</block>
  <block id="a60b166c2b69b4fdfbb733dc2193668a" category="paragraph">借助支持的 SAN 协议（ FC ， FCoE 和 iSCSI ）， ONTAP 9 可提供 LUN 服务，即创建 LUN 并将其映射到连接的主机。由于集群由多个控制器组成，因此，多路径 I/O 可管理多个逻辑路径，并将其连接到任何单个 LUN 。主机上使用非对称逻辑单元访问（ ALUA ），以便选择 LUN 的优化路径并使其处于活动状态以进行数据传输。如果指向任何 LUN 的优化路径发生变化（例如，由于移动了包含 LUN 的卷）， ONTAP 9 会自动识别此更改并无中断地进行调整。如果优化路径不可用， ONTAP 可以无中断地切换到任何其他可用路径。</block>
  <block id="b9921ac732e72656bc2836f83bb09522" category="paragraph">VMware SRM 和 NetApp SRA 支持在一个站点使用 FC 协议，而在另一个站点使用 iSCSI 协议。但是，不支持在同一 ESXi 主机或同一集群中的不同主机中混合使用 FC 连接的数据存储库和 iSCSI 连接的数据存储库。SRM 不支持此配置，因为在 SRM 故障转移或测试故障转移期间， SRM 会在请求中包括 ESXi 主机中的所有 FC 和 iSCSI 启动程序。</block>
  <block id="fccd44a96243e459128798803dca70aa" category="cell">SRM 和 SRA 支持在受保护站点和恢复站点之间混合使用 FC 和 iSCSI 协议。但是，每个站点只能配置一个 FC 或 iSCSI 协议，而不能在同一站点上同时配置这两个协议。如果要求在同一站点同时配置 FC 和 iSCSI 协议， NetApp 建议某些主机使用 iSCSI ，而其他主机使用 FC 。在这种情况下， NetApp 还建议设置 SRM 资源映射，以便将 VM 配置为故障转移到一组主机或另一组主机。</block>
  <block id="d4f43ea12f3f521c93fb3dd4d93c428d" category="summary">此页面介绍了在 VMware vSphere 环境中为 VMFS 数据存储库部署 NetApp ONTAP NVMe/FC 存储的步骤。</block>
  <block id="9e433440cdaf3b61716784200e8abf6d" category="doc">vSphere VMFS 数据存储库—采用 ONTAP 的 NVMe/FC</block>
  <block id="9367f3df6c8d54eba1da3cd9c5fa2776" category="paragraph">本节介绍如何使用 NVMe/FC 使用 ONTAP 存储创建 VMFS 数据存储库。</block>
  <block id="6af0e7a38739ed6e2658342101a7b51e" category="list-text">管理 vSphere 环境和 ONTAP 所需的基本技能。</block>
  <block id="7890464cdce93f078097395e27132775" category="inline-link-macro">基本了解 NVMe/FC</block>
  <block id="c6e7cd589502f52a9398e779ede56d14" category="list-text"><block ref="62a43aa3bd2eb01e27a6091d3017311c" category="inline-link-macro-rx"></block>。</block>
  <block id="5422bc00db54a341b2c538f4cea614c0" category="list-text">运行 ｛ ontap_version ｝ 的 ONTAP 存储系统（ FAS/AFF/CVO/ONTAP Select/ASA ）</block>
  <block id="2ec64af43682ffa45eeaf33a86950347" category="list-text">主机，目标和 SVM 以及 LUN 信息的 ONTAP WWPN</block>
  <block id="62eadfe081f86e1f9a72988a4feb7bfc" category="inline-link-macro">填写完整的 FC 配置工作表</block>
  <block id="f186921a73873df63dc496b515bc2099" category="list-text"><block ref="f186921a73873df63dc496b515bc2099" category="inline-link-macro-rx"></block></block>
  <block id="c4436d4a190778b7ec1e9461f6454bdd" category="list-text">vCenter Server</block>
  <block id="5fd6c6da49bc906cc217c5aff2041a52" category="list-text">vSphere 主机信息（ ｛ vsphere_version ｝ ）</block>
  <block id="60ce38e4967c52c316eff771b7a3c4ec" category="list-text">连接了 ONTAP FC 数据端口和 vSphere 主机。</block>
  <block id="32086766e64ae646fcadddc3e16b203b" category="list-text">启用 N_port ID 虚拟化（ NPIV ）功能。</block>
  <block id="b6e0bd021536c90aa87cfea18d73d453" category="list-text">创建一个启动程序目标分区。</block>
  <block id="f386e9f209710f55d41a97e9502d1c7c" category="list-text">对于每个分区，包括一个目标，该目标是 SVM 的 ONTAP FC 逻辑接口（ WWPN ）。每个 SVM 的每个节点至少应有两个逻辑接口。请勿使用物理端口的 WWPN 。</block>
  <block id="71d4977f0fd6be92644e1ff9f8096637" category="section-title">配置 VMFS 数据存储库</block>
  <block id="f42c50210dcc0a3a69c8258256e75e4b" category="inline-link-macro">验证是否支持 NVMe/FC 配置。</block>
  <block id="5312bcc81ee6d7bce6549b2089c9d1ac" category="list-text"><block ref="5312bcc81ee6d7bce6549b2089c9d1ac" category="inline-link-macro-rx"></block></block>
  <block id="9d17f91ad987b7e7cf2fa7249cd97343" category="list-text"><block ref="7fcd357d480b8eaa4a38cdbbddfd6c97" category="inline-link-macro-rx"></block>使用 `ssystem license show` 命令检查是否列出了 NVMe_oF 。使用 `license add -license-code &lt; 许可证代码 &gt;` 添加许可证。</block>
  <block id="7193bed15c5b4f7c80f1f19630b57e1e" category="list-text">验证是否已在 SVM 上启用 NVMe 协议。</block>
  <block id="5eabd2d7390fc49cb61f882324bdcac0" category="inline-link-macro">为 NVMe 配置 SVM 。</block>
  <block id="3838b8ad26ea53cc8ddea76f2a58b20a" category="list-text"><block ref="3838b8ad26ea53cc8ddea76f2a58b20a" category="inline-link-macro-rx"></block></block>
  <block id="f2fd2de931ce484e947c89ae8207346a" category="list-text">验证 NVMe/FC 逻辑接口在 SVM 上是否可用。</block>
  <block id="978583cfbb47e2700c599c43b7949a53" category="list-text">使用图形用户界面创建 SVM 时，逻辑接口将作为该过程的一部分。</block>
  <block id="3866119a70b69102c1584c0baa386190" category="list-text">要重命名网络接口，请使用命令 `Network Interface modify` 。</block>
  <block id="6ad7e9002145710745843d16314895e3" category="inline-link-macro">创建 NVMe 命名空间和子系统</block>
  <block id="06badf30aa173febc3374aceef25c5ce" category="list-text"><block ref="06badf30aa173febc3374aceef25c5ce" category="inline-link-macro-rx"></block></block>
  <block id="c6613394adcc7526a48f6e92b61ee067" category="list-text">验证是否已安装 HBA 驱动程序。VMware 支持的 HBA 已开箱即用部署驱动程序，应可从查看这些驱动程序 <block ref="57f7eb139c8bc258309d8e16d3df13fe" category="inline-link-macro-rx"></block></block>
  <block id="9761a89a99469e468e71b7a0087be29d" category="inline-link-macro">执行 vSphere 主机 NVMe 驱动程序安装和验证任务</block>
  <block id="926e4d89379d3dde2510965ca53771af" category="list-text"><block ref="926e4d89379d3dde2510965ca53771af" category="inline-link-macro-rx"></block></block>
  <block id="e229fd9b7b8948ddebf276bda8a9145e" category="inline-link-macro">创建 VMFS 数据存储库</block>
  <block id="3dbbea9263919f89335d7ba053f09a39" category="list-text"><block ref="3dbbea9263919f89335d7ba053f09a39" category="inline-link-macro-rx"></block></block>
  <block id="19610155b973358e47466063b4b079a4" category="summary">ONTAP 支持用于虚拟化的所有主要存储协议，例如 iSCSI ，光纤通道（ FC ），以太网光纤通道（ FCoE ）或适用于 SAN 环境的非易失性光纤通道快速内存（ NVMe/FC ），以及 NFS （ v3 和 v4.1 ）和 SMB 或 S3 （用于子系统连接）。客户可以自由选择最适合其环境的协议，并可以根据需要在一个系统上组合协议。</block>
  <block id="93b698fac9d8f378474fb0765494c4e6" category="doc">适用于 vSphere 的 ONTAP 功能</block>
  <block id="9985b4390c40137573e6da05caf85874" category="section-title">协议</block>
  <block id="561327c79c453379a7f11cb38aabf666" category="paragraph">ONTAP 支持用于虚拟化的所有主要存储协议，例如 iSCSI ，光纤通道（ FC ），以太网光纤通道（ FCoE ）或适用于 SAN 环境的非易失性光纤通道快速内存（ NVMe/FC ），以及 NFS （ v3 和 v4.1 ）和 SMB 或 S3 （用于子系统连接）。客户可以自由选择最适合其环境的协议，并可以根据需要在一个系统上组合使用协议（例如，使用几个 iSCSI LUN 或子系统共享来扩大 NFS 数据存储库的常规使用）。</block>
  <block id="99dd82c3472eab7ec4ea64a848fe032d" category="paragraph">许多 ONTAP 功能可用于管理虚拟化工作负载。下一节将介绍一些需要附加产品许可证的软件。之后将介绍其他打包为独立工具的工具，其中一些用于 ONTAP ，另一些用于整个 NetApp 产品组合。</block>
  <block id="671534601eb09388581f095632f815b2" category="paragraph">下面是有关基本 ONTAP 功能的更多详细信息：</block>
  <block id="ef97088865d8960cc5a3a20f3c10f469" category="list-text">* NetApp Snapshot 副本。 * 创建或使用 Snapshot 副本时， ONTAP 可为 VM 或数据存储库提供即时 Snapshot 副本，而不会影响性能。它们可用于在修补之前为 VM 创建还原点，或者用于简单的数据保护。请注意，这些快照与 VMware （一致性）快照不同。创建 ONTAP Snapshot 副本的最简单方法是使用适用于 VMware vSphere 的 SnapCenter 插件备份 VM 和数据存储库。</block>
  <block id="dbef3659822e80f91a3a561ed6d0b0cd" category="list-text">* 存储效率。 * ONTAP 支持实时和后台重复数据删除和数据压缩，零块重复数据删除和数据缩减。</block>
  <block id="287c4830bc87771bdf2b3ae9880ab67e" category="list-text">* 卷和 LUN 移动。 * 允许在 ONTAP 集群中无中断移动支持 vSphere 数据存储库和 VVol 的卷和 LUN ，以平衡性能和容量，或支持无中断维护和升级。</block>
  <block id="ba96d4d48c1ff15e2732b37e2e7a435c" category="list-text">通过 * QoS 。 * QoS ，可以管理单个 LUN ，卷或文件的性能。此功能可用于限制未知或抢占资源的 VM ，或者确保重要的 VM 获得足够的性能资源。</block>
  <block id="a946b6511f13dc2fbdaf1581d804d5b4" category="list-text">* NetApp 卷加密， NetApp 聚合加密。 * NetApp 加密选项提供基于软件的简单加密，可保护空闲数据。</block>
  <block id="28f638810590337576cbbe9979329c21" category="list-text">* FabricPool 。 * 此功能可在块级别自动将较冷的数据分层到单独的对象存储中，从而腾出昂贵的闪存存储。</block>
  <block id="ff8a0108cd7cd5019bfee6b6be672b17" category="inline-link">ONTAP REST API</block>
  <block id="9455a10ec937dafee664ae1e0e4fd98c" category="inline-link">Ansible 模块</block>
  <block id="4fe65be709b755cfdf83cf3ff5534e52" category="list-text">* REST ， Ansible 。 * 使用<block ref="71191ff17e34498b2463e6167736896a" category="inline-link-rx"></block> 自动执行存储和数据管理，以及<block ref="d4fc0de110866702e0b8608590b39b64" category="inline-link-rx"></block> 用于 ONTAP 系统的配置管理。请注意，某些 ONTAP 功能不适合 vSphere 工作负载。例如， ONTAP 9.8 之前的 FlexGroup 不支持完全克隆，也未在 vSphere 中进行测试（请参见 FlexGroup 一节，了解有关将其与 vSphere 结合使用的最新信息）。FlexCache 也不是 vSphere 的最佳选择，因为它专为大多数读取工作负载而设计。如果缓存与原始数据存储库断开连接，则写入可能会出现问题，从而导致两端出现 NFS 数据存储库错误。</block>
  <block id="85402a535d923d0511a02d404893d1ba" category="section-title">ONTAP 许可</block>
  <block id="4a9fdcb14826a67d38a7b84170c54ea9" category="paragraph">对于管理虚拟化工作负载而言，某些 ONTAP 功能非常重要，因此需要额外的许可证，无论是以免费方式提供，还是以许可证包形式提供，还是按单点提供。对于许多客户来说，最经济高效的方法是使用许可证包。以下是与 vSphere 相关的关键许可证及其使用方式：</block>
  <block id="c598be4d4f9f8c476e7f51d6ef5ff139" category="list-text">* FlexClone 。 * FlexClone 支持对 ONTAP 卷和文件进行节省空间的即时克隆。如果 VMware vSphere 存储 API —阵列集成（ VAAI ）将操作卸载到存储系统，用于备份验证和恢复（ SnapCenter 软件）以及 VVOL 克隆和 Snapshot 副本，则会使用此克隆。以下是如何使用它们：</block>
  <block id="25d6e9f6ac28ecf0d97aaf9f6609f4d4" category="list-text">ONTAP 支持使用 VAAI 卸载副本，以支持 vSphere 克隆和迁移（ Storage vMotion ）操作。FlexClone 许可证允许在 NetApp FlexVol 卷中快速克隆，但如果未获得许可，它仍允许使用较慢的块副本进行克隆。</block>
  <block id="6f9f0acae1b8d33078f1c061dcc662a3" category="list-text">VVOL 功能需要 FlexClone 许可证。它支持在单个数据存储库中或数据存储库之间克隆 VVOL ，并支持 vSphere 管理的 VVOL Snapshot 副本，这些副本会卸载到存储系统中。</block>
  <block id="4370ed35c8063100f2a5b8da39b82668" category="list-text">存储复制适配器（ SRA ）与 VMware Site Recovery Manager 结合使用，要在 NAS 和 SAN 环境中测试恢复，需要 FlexClone 许可证。在没有 FlexClone 的情况下，可以使用 SRA 执行发现，恢复和重新保护工作流。</block>
  <block id="3117cf0d132cfe6180ee3db3d5250f7f" category="list-text">* SnapRestore 。 * SnapRestore 技术支持即时恢复卷，而无需复制数据。NetApp 备份和恢复工具（例如 SnapCenter ）需要使用该工具挂载数据存储库以执行验证和还原操作。</block>
  <block id="a30ea87a20e5dd5b267ec41f29219a1d" category="list-text">* SnapMirror 。 * SnapMirror 技术支持在内部和云中的 ONTAP 系统之间轻松快速地复制数据。SnapMirror 支持逻辑复制的版本灵活性以及块复制的性能，只会将更改后的数据发送到二级系统。可以使用镜像和 / 或存储策略保护数据，从而实现灾难恢复以及长期保留数据以进行备份。SnapMirror 支持异步和同步关系， ONTAP 9.8 引入了具有 SnapMirror 业务连续性的透明应用程序故障转移功能。</block>
  <block id="23862d7fc14d71369b9feaeb8d7f98b9" category="paragraph">使用 Site Recovery Manager 进行 SRA 复制需要 SnapMirror 。此外， SnapCenter 还需要将 Snapshot 副本复制到二级存储系统。</block>
  <block id="0fdef6775eeade832499deceb497e1d8" category="list-text">* SnapCenter 。 * SnapCenter 软件可提供一个统一的可扩展平台和插件套件，用于实现应用程序一致的数据保护和克隆管理。AFF 许可证随 FAS 和 SnapCenter 系统的数据保护许可证包一起提供。如果您使用的是以下存储系统： FAS ， AFF ， Cloud Volumes ONTAP 或 ONTAP Select ，则适用于 VMware vSphere 的 SnapCenter 插件是一款免费产品。但是，需要 SnapRestore 和 FlexClone 许可证。</block>
  <block id="a20c69bb9262b2ab09ca5248996e7d63" category="list-text">* MetroCluster 。 * NetApp MetroCluster 是一种同步复制解决方案，可将园区或城域的高可用性和灾难恢复相结合，以防止发生站点灾难和硬件中断。它提供的解决方案可以从故障中透明地恢复，实现零数据丢失（ 0 RPO ）和快速恢复（几分钟内即可完成 RTO ）。它在 vSphere 环境中用作 vSphere Metro Storage Cluster 配置的一部分。</block>
  <block id="ee8cc65cae83009c275cd4748f4c58ae" category="section-title">适用于 ONTAP 的虚拟化工具</block>
  <block id="7b0abbba24b3ff594f013e524b352ef1" category="paragraph">NetApp 提供了多种独立软件工具，可与 ONTAP 和 vSphere 结合使用来管理虚拟化环境。ONTAP 许可证附带了以下工具，无需额外付费。有关这些工具在 vSphere 环境中如何协同工作的说明，请参见图 1 。</block>
  <block id="abdbcbccf079982daa8ac87124199525" category="paragraph">适用于 VMware vSphere 的 ONTAP 工具是一组用于将 ONTAP 存储与 vSphere 结合使用的工具。无论您使用的是 SAN 还是 NAS ， vCenter 插件（以前称为 Virtual Storage Console （ VSC ））均可简化存储管理和效率功能，提高可用性并降低存储成本和运营开销。它使用最佳实践配置数据存储库，并为 NFS 和块存储环境优化 ESXi 主机设置。为了获得所有这些优势， NetApp 建议在将 vSphere 与运行 ONTAP 软件的系统结合使用时，最佳做法是使用这些 ONTAP 工具。它包括 vCenter 的服务器设备和用户界面扩展。</block>
  <block id="72c2a2003ef348468d72454dc1a4e214" category="paragraph">适用于 VMware 的 NetApp NFS 插件是 ESXi 主机的一个插件，可用于在 ONTAP 上对 NFS 数据存储库使用 VAAI 功能。它支持克隆操作的副本卸载，厚虚拟磁盘文件的空间预留以及 Snapshot 副本卸载。将副本操作卸载到存储不一定会更快完成，但它确实会卸载 CPU 周期，缓冲区和队列等主机资源。您可以使用适用于 VMware vSphere 的 ONTAP 工具在 ESXi 主机上安装此插件。</block>
  <block id="e3454e6928ae7a5f9e8a89f5999b80ad" category="section-title">适用于 ONTAP 的 VASA Provider</block>
  <block id="708dacf32313dbab741753dcc3ea39fd" category="paragraph">适用于 ONTAP 的 VASA Provider 支持 VMware vStorage APIs for Storage Awareness （ VASA ）框架。它作为适用于 VMware vSphere 的 ONTAP 工具的一部分提供，作为一个虚拟设备，易于部署。VASA Provider 可将 vCenter Server 与 ONTAP 连接起来，以帮助配置和监控 VM 存储。它支持 VMware 虚拟卷（ VVOL ）支持，管理存储功能配置文件和单个 VM VVOL 性能，并提供警报以监控容量和配置文件合规性。</block>
  <block id="0d05ff779ab06152e20062d098f7eb4a" category="section-title">Storage Replication Adapter</block>
  <block id="33aa22e838a3c843929f5b6b75f6c56c" category="paragraph">SRA 与 VMware Site Recovery Manager （ SRM ）结合使用，用于管理生产站点和灾难恢复站点之间的数据复制，并无中断地测试灾难恢复副本。它有助于自动执行发现，恢复和重新保护任务。它包括适用于 Windows SRM 服务器和 SRM 设备的 SRA 服务器设备和 SRA 适配器。SRA 作为适用于 VMware vSphere 的 ONTAP 工具的一部分提供。</block>
  <block id="a1c13ec555198266776a3a7b904810dd" category="paragraph">下图显示了适用于 vSphere 的 ONTAP 工具。</block>
  <block id="f7e876d450acee7c9ed7b18438440fb2" category="paragraph"><block ref="f7e876d450acee7c9ed7b18438440fb2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d9a06854085afcd104157eb7f0b66c3a" category="summary">NetApp 解决方案自动化利用 RedHat Ansible 进行配置和管理。</block>
  <block id="a123daaac5749e4d0965aca160f0adfd" category="doc">NetApp 解决方案自动化</block>
  <block id="8c4271e6faf2cea4cfc8e5b7108d8ee9" category="section-title">操作步骤</block>
  <block id="d1029167179320d8b6d70b11c3d01bd3" category="list-text">Ansible 控制节点的要求，：</block>
  <block id="9ced761647f5d80fe615526ffff63937" category="list-text">安装了以下软件包的 Ubuntu 或 Debian 计算机：</block>
  <block id="ca60b3698dd3d27a5f91e4dc0a1a2546" category="list-text">Python3.</block>
  <block id="4ce3ea126bb844d4f8c4ce1a65cbe3ae" category="list-text">Pip3.</block>
  <block id="881cbd1ce3fdb52f73a82f8674a2a364" category="list-text">Ansible （版本高于 2.10.0 ）</block>
  <block id="0bcc70105ad279503e31fe7b3f47b665" category="list-text">Git</block>
  <block id="6e3d8a0ff7934b777031953fe936bac8" category="paragraph">如果您的新 Ubuntu 或 Debian 计算机未安装上述要求，请按照以下步骤将该计算机设置为 Ansible 控制节点：</block>
  <block id="532d3723890df934cc5c2c39477405a2" category="list-text">创建 .sh 文件</block>
  <block id="e95a2c08843a70246648b7107a26cec4" category="list-text">将以下内容粘贴到文件中</block>
  <block id="86c8310d98a974adb7ac7c4025dd8b5c" category="list-text">使文件可执行</block>
  <block id="22db3e24628482683b9bf06c38e497ee" category="list-text">以 root 用户身份运行脚本</block>
  <block id="d82dd9b3245382b365106db0568113e8" category="summary">借助 NetApp 解决方案自动化，客户可以自动部署，配置和执行许多常见的基础架构和应用程序任务。</block>
  <block id="3a4a7ee7a634fc42372d6601867f823b" category="paragraph">要通过命令行界面使用 Ansible 攻略手册配置 Mellanox 交换机，请遵循以下操作步骤：</block>
  <block id="79a78778ec74f6df31c269176e191684" category="list-text">下载 Mellanox Onyx Ansible 资料集</block>
  <block id="0683792c4baa09a201f802cc69019f56" category="list-text">下载配置 Mellanox 交换机所需的 Ansible 内容</block>
  <block id="f66ab36e28c2c6596efcfb05cd259e98" category="list-text">将目录更改为所需的解决方案</block>
  <block id="90836ed3d621851397e3c2c972da4408" category="list-text">根据提供的建议 / 建议填充以下变量。根据要求填充所有变量后，单击顶部的 " 复制 " 按钮复制内容。</block>
  <block id="2215f9dffda399b7920ce8d09198668a" category="list-text">在当前目录（与攻略手册目录相同的目录）中创建一个新的变量文件（ yml 文件），然后将复制的变量粘贴到该文件中并保存。</block>
  <block id="8157b13d4a5832aba2c45730d1b1db60" category="list-text">填写下面 Mellanox 交换机的 IP 地址 / 主机名并复制内容。打开 hosts 文件，清除现有的所有信息并将复制的内容粘贴到其中。</block>
  <block id="e245e21fae9b0617e20295e709d2eed3" category="list-text">通过传递变量文件和 Mellanox 交换机用户名来运行攻略手册。出现提示时，填写 Mellanox 交换机的密码。</block>
  <block id="5287ad47faa9ddb98ee2c477d7df683c" category="admonition">在使用上述命令运行攻略手册之前，请将 Mellanox_switch_username 替换为用于登录 Mellanox 交换机的相应用户名。</block>
  <block id="90305bb6fba97091f683e8b82f9bf805" category="summary">借助 NetApp 解决方案自动化，客户可以自动部署，配置和执行许多常见基础架构和应用程序任务。</block>
  <block id="544c3a861d86ce6658187399d91aaa44" category="paragraph">验证和构建解决方案的目标之一是使解决方案易于使用。因此，通过自动化来简化通过我们的解决方案交付的基础架构和 / 或应用程序的部署和配置至关重要。NetApp 致力于通过使用 RedHat Ansible 实现自动化来简化解决方案使用。</block>
  <block id="9043d5bb11e7b216a7308f7a9761d9fd" category="paragraph">Ansible 是一款开源自动化引擎，可帮助 IT 团队自动执行应用程序部署，云配置，配置管理和许多其他 IT 需求。Ansible 无代理，不需要自定义安全基础架构。您可以通过 SSH 远程管理控制系统中多个系统的自动化，使其成为 IT 团队的强大解决方案，帮助他们自动处理繁琐而重复的 IT 需求。</block>
  <block id="8d9887ce2700536b12e7847e2163026e" category="paragraph">如果您不熟悉 NetApp 解决方案自动化，可以使用以下各节设置 Ansible 控制器。</block>
  <block id="6061668c9cb1cddb071099d0e9da5444" category="paragraph">有关 RedHat Ansible 的详细信息，请参见相关文档<block ref="228582a93333b3e21d695cbcfe7060d2" category="inline-link-rx"></block>。</block>
  <block id="d78228187c1a83d3bb4d8e97cd657807" category="paragraph">自动化简化了 NetApp 解决方案的使用。</block>
  <block id="88b11dbb43daa1023e1e0eac175e0e04" category="section-title">设置 Ansible Control 节点</block>
  <block id="cc720ba6fbd83dd2b0c222e5b1d4419c" category="paragraph">Ansible 是一款无代理自动化工具，因此您只需要将其安装在一台计算机（ Ansible 控制节点）上。通过控制节点，您可以管理整个远程计算机车队，而无需对其进行任何额外配置。</block>
  <block id="1fd37248272971c6b09693c66e545794" category="inline-link-macro">RHEL8/CentOS8.</block>
  <block id="62cb08c48fa7398e2b2fbf365a240e90" category="inline-link-macro">RHEL7/CentOS7.</block>
  <block id="7eaf289636bc8d4f8b29b333a0f32dc2" category="inline-link-macro">Ubuntu 或 Debian</block>
  <block id="e10dea45c0463fb061f253f8deef6de6" category="paragraph">根据您要安装 Ansible 的操作系统类型，单击以下链接之一，了解设置控制节点的详细步骤：。 <block ref="7dc121073254da4302fc5dcbe0722747" category="inline-link-macro-rx"></block>。 <block ref="965292dac53abeffbcc140f60ed9445a" category="inline-link-macro-rx"></block>。 <block ref="9c83d13c300fc83e32dbf47b4d277c36" category="inline-link-macro-rx"></block></block>
  <block id="c155d814eba0c89f7e4d7dde346e7ff8" category="paragraph">要通过 AWX/Ansible 塔使用 Ansible 攻略手册配置 Mellanox 交换机，请遵循以下操作步骤：</block>
  <block id="59ea0dd3e785a6eff57ce16a49e0721b" category="list-text">按照指南配置 AWX/ 塔式参数 <block ref="6dc8a9c13444a748151c0dc2cdfaf9ed" category="inline-link-macro-rx"></block></block>
  <block id="7007f95e98fc7408e8a7209ff06ba5d7" category="list-text">登录到 AWX/Tower ，转至 "Resources" -&gt; "Templates" ，然后单击相应 Mellanox 作业模板的 "Launch" 按钮。</block>
  <block id="1855f1f392261a9199b1e7394d52641b" category="list-text">将复制的内容粘贴到系统提示的变量字段中，单击 " 下一步 " ，然后单击 " 启动 " 以运行作业模板。</block>
  <block id="5c263f30899f93ff7ccd457ad3eb956f" category="list-text">安装了以下软件包的 RHEL/CentOS 计算机：</block>
  <block id="7b643b0eef9cf1199195fa05b77fc3c8" category="paragraph">如果您的新 RHEL/CentOS 计算机未安装上述要求，请按照以下步骤将该计算机设置为 Ansible 控制节点：</block>
  <block id="d2052f202108defaf6afc7831ba59362" category="list-text">为 RHEL/8/RHEL/7 启用 Ansible 存储库</block>
  <block id="61fbc2f21db84f17551fda6893429d16" category="list-text">对于 RHEL/8 （以 root 用户身份运行以下命令）</block>
  <block id="77cd42f765e6b40764459a64a979f90c" category="list-text">对于 RHEL/7 （以 root 用户身份运行以下命令）</block>
  <block id="4d3d20acde2dac77a5502c201323aa01" category="doc">NetApp 解决方案自动化</block>
  <block id="2aa17d37bd2483f97468ab7653396786" category="paragraph">本节介绍在 AWX/Ansible 塔中配置参数所需的步骤，这些参数可为使用 NetApp 自动化解决方案的环境做好准备。</block>
  <block id="0fb1db9928d7fc107d96c13f1918b639" category="list-text">导航到资源→清单→添加，然后单击添加清单。</block>
  <block id="2623b8eb8fcaecc009c3b78cc6e7d391" category="list-text">提供名称和组织详细信息，然后单击保存。</block>
  <block id="cc243ac3e015aef331656a4bff40241c" category="list-text">在清单页面中，单击刚刚创建的清单资源。</block>
  <block id="b0ddb214e9aa4a84bc80e6af8c6b2adf" category="list-text">如果存在任何清单变量，请将其粘贴到变量字段中。</block>
  <block id="5d7863780eab69b6b968cfc9dc6e66bc" category="list-text">转到组子菜单，然后单击添加。</block>
  <block id="ec51931bb91bc912d609f2099974dfd9" category="list-text">提供组的名称，复制组变量（如果需要），然后单击保存。</block>
  <block id="8f9cbdc13fdcb31ff345f10ba333ac59" category="list-text">单击创建的组，转到主机子菜单，然后单击添加新主机。</block>
  <block id="98e7a99b463b825a87899d25486e46ea" category="list-text">提供主机的主机名和 IP 地址，粘贴到主机变量中（如有必要），然后单击保存。</block>
  <block id="3caf9a56384a30eb8dee819e3abc14d6" category="list-text">创建凭据类型。对于涉及 ONTAP ， Element ， VMware 或任何其他基于 HTTPS 的传输连接的解决方案，您必须将凭据类型配置为与用户名和密码条目匹配。</block>
  <block id="615b6214c17105ae4915a8c8a632025b" category="list-text">导航到 Administration → Credential types ，然后单击 Add 。</block>
  <block id="846bb9303e5cc4395e96eba0d4c7d50a" category="list-text">将以下内容粘贴到输入配置中：</block>
  <block id="333a40c5632e0507a83f6a191f0b69b3" category="list-text">将以下内容粘贴到注射器配置中：</block>
  <block id="e31908e83a96aee8550446309c4ef7e0" category="list-text">配置凭据。</block>
  <block id="de06c7b54d4158f81a8c4d4a02b61eb0" category="list-text">导航到资源→凭据，然后单击添加。</block>
  <block id="e5b5f57b6910910a3f9a486e88088608" category="list-text">选择正确的凭据类型；如果要使用标准 SSH 登录，请选择类型 Machine 或选择您创建的自定义凭据类型。</block>
  <block id="9256ee926473942ba849050ef0450b7f" category="list-text">输入其他相应的详细信息，然后单击保存。</block>
  <block id="29d192f714134f2e257058cfcf763722" category="list-text">配置项目。</block>
  <block id="1b892b7661c6a3ae2b57cbf4233c3af5" category="list-text">导航到资源→项目，然后单击添加。</block>
  <block id="936784ca62c93ca666e77fd10733247c" category="list-text">为源控制凭据类型选择 Git 。</block>
  <block id="9f4fd9b4a4c75c02d1b469e8dd75d9fb" category="list-text">粘贴与特定解决方案对应的源控制 URL （或 git 克隆 URL ）。</block>
  <block id="95acbbc0424478165cdbe3a62849cbc3" category="list-text">或者，如果 Git URL 受访问控制，请在源控制凭据中创建并附加相应的凭据。</block>
  <block id="a934d780fa0cb0e8495a0a1cabd0f501" category="list-text">配置作业模板。</block>
  <block id="10c610c9225adcc92ca1b284b5bbb04b" category="list-text">输入名称和问题描述。</block>
  <block id="e33edf61d02fc69c2087dcc3c42177e1" category="list-text">选择作业类型； Run 会根据攻略手册配置系统， Check 会在不实际配置系统的情况下执行攻略手册的试运行。</block>
  <block id="57cf64ce7890d12e5a41d18b83979ffd" category="list-text">为攻略手册选择相应的清单，项目和凭据。</block>
  <block id="fc6b15b1dd73bb25477aed453b9a02f2" category="list-text">选择要在作业模板中运行的攻略手册。</block>
  <block id="9a7d90740af07bcdd2c628a6f6ae966c" category="list-text">通常，变量会在运行时粘贴。因此，要在运行时提示填充变量，请确保选中与 Variable 字段对应的 Launch 上的复选框提示。</block>
  <block id="3454f07e6f81a48099e0d144ca38ec7a" category="list-text">根据需要提供任何其他详细信息，然后单击保存。</block>
  <block id="0b55c84dbc04b54418b0d507f7b8f669" category="list-text">如果在启动时出现提示，请填写任何变量，然后再次单击启动。</block>
  <block id="dca91c3343cc0ad062506cdd14eb7d41" category="summary">混合云，桌面虚拟化和容器解决方案宣传材料的最新补充内容</block>
  <block id="76fbc12c25930d37ebcccaab8f656eda" category="doc">混合云，桌面虚拟化和容器解决方案的新增功能</block>
  <block id="07e257430bade6bc5bce1c2170c6fc0d" category="paragraph">概述最新的混合云，桌面虚拟化和容器解决方案和解决方案宣传材料。</block>
  <block id="c1e392a90896851b3319d6075402fd4d" category="cell">* 混合云 / 私有云 *</block>
  <block id="8ef4e9c7260e8d314760329e07c618ae" category="cell">* 虚拟化 *</block>
  <block id="2bdc87f51d413e6d2fa23dd26238501f" category="inline-link-macro">适用于 ONTAP 的 VMware vSphere</block>
  <block id="236122c6ab4c764632437a76fa95e5c0" category="cell">* 桌面虚拟化 *</block>
  <block id="4b47c65474ab7fae9b08ddf38d598971" category="inline-link-macro">采用 NetApp 虚拟桌面服务（ Virtual Desktop Service ， VDS ）的混合云 VDI</block>
  <block id="dea91bec9e85387a496bb2c228fc7dc3" category="cell"><block ref="dea91bec9e85387a496bb2c228fc7dc3" category="inline-link-macro-rx"></block></block>
  <block id="1ebfe0d8e53e3f7f2c37e8b3835c2adf" category="cell">* 容器 *</block>
  <block id="4324a12834da8af2118021f91b35896c" category="cell"><block ref="4324a12834da8af2118021f91b35896c" category="inline-link-macro-rx"></block></block>
  <block id="119ad672b0d69ab3f968877b6ec83dd3" category="cell"><block ref="119ad672b0d69ab3f968877b6ec83dd3" category="inline-link-macro-rx"></block></block>
  <block id="ad1cf94aab71c9962e22037ed60d41e9" category="cell"><block ref="ad1cf94aab71c9962e22037ed60d41e9" category="inline-link-macro-rx"></block></block>
  <block id="e6ba927c9d14295015e39be05cf54040" category="inline-link-macro">使用 NetApp ONTAP 在 Red Hat OpenShift 上使用多租户</block>
  <block id="ab439bcac737f2565970fe2612976b75" category="cell"><block ref="ab439bcac737f2565970fe2612976b75" category="inline-link-macro-rx"></block></block>
  <block id="ad95c47343e102dc30ec33fa6f1ccc55" category="inline-link-macro">NVA-1160 —采用 NetApp 技术的 Red Hat OpenShift</block>
  <block id="1043b5153afff839b84d714aa9127913" category="cell"><block ref="1043b5153afff839b84d714aa9127913" category="inline-link-macro-rx"></block></block>
  <block id="0fd00a19fb12bb899dfe7cefbcbbcb79" category="inline-link-macro">在 Red Hat OpenShift 上安装 NetApp Trident —如何解决 Docker 的 ‘所有请求 ' 问题描述！</block>
  <block id="43e5d9153d1fc4a35be5f57189605919" category="cell"><block ref="43e5d9153d1fc4a35be5f57189605919" category="inline-link-macro-rx"></block></block>
  <block id="da38226e07ff21f147182bb08be38f6f" category="inline-link-macro">采用 NetApp 技术的裸机 Anthos</block>
  <block id="ac1da2af455fc001ba8b58af0e62d151" category="cell"><block ref="ac1da2af455fc001ba8b58af0e62d151" category="inline-link-macro-rx"></block></block>
  <block id="bfd22ae6cd60e663ed70e43729a64b1a" category="summary">讨论混合云，桌面虚拟化和容器解决方案功能的系列博客</block>
  <block id="0ffff76bcc7d5f89f6a352694b916dbd" category="doc">混合云，桌面虚拟化和容器博客</block>
  <block id="0aef0d80b80eebee0590e019fffb3715" category="paragraph">重点介绍混合云，桌面虚拟化和容器解决方案特定功能的博客概述。</block>
  <block id="ec7f98a3714557d87968dc6a898f7912" category="inline-link-macro">将 VMware Tanzu 与 ONTAP 结合使用，加快 Kubernetes 之旅</block>
  <block id="32e124b0349f41e06bf1e03f11950665" category="list-text"><block ref="32e124b0349f41e06bf1e03f11950665" category="inline-link-macro-rx"></block></block>
  <block id="b4a5303e0fac342c604f2250a077e3be" category="summary">AI 和现代数据分析解决方案资料的最新补充内容</block>
  <block id="7cc6f9b96a60dc9ecee3f8af38876ac2" category="doc">AI 和现代数据分析的新增功能</block>
  <block id="6c359c33f91503466661c814919afe18" category="paragraph">概述最新的 AI 和现代数据分析解决方案和解决方案宣传材料。</block>
  <block id="b16e2e1566ba0fc14f6e0eb77d99cf93" category="cell">* 采用 NVIDIA DGX A100 系统的 NetApp ONTAP AI *</block>
  <block id="e7f098b026755d10f2c3f16d0ff0b1db" category="inline-link-macro">设计指南</block>
  <block id="1027b152cc3e8165ce099ede9548be95" category="cell"><block ref="1027b152cc3e8165ce099ede9548be95" category="inline-link-macro-rx"></block></block>
  <block id="dfb1e9c5f4c5835e6e1a4173130a49c9" category="inline-link-macro">部署指南</block>
  <block id="983044e3ba861493c43c08b9285c3125" category="cell"><block ref="983044e3ba861493c43c08b9285c3125" category="inline-link-macro-rx"></block></block>
  <block id="70163cee23a15a309e4f1ec48b6928a8" category="cell">* 采用 NVIDIA DGX A100 系统和 Mellanox 系列以太网交换机的 NetApp ONTAP AI *</block>
  <block id="d91f70a15d40fe5795af6ded9555e095" category="cell"><block ref="d91f70a15d40fe5795af6ded9555e095" category="inline-link-macro-rx"></block></block>
  <block id="8e9465b5d4318c8ef9039dfe684619d5" category="cell"><block ref="8e9465b5d4318c8ef9039dfe684619d5" category="inline-link-macro-rx"></block></block>
  <block id="2d7bdfd6f5569b6403315db85da8b4d3" category="cell">* 采用 NetApp 的 AI Orchestration 和 Run ： AI*</block>
  <block id="a573d92b77d430af7e424879baf78e94" category="inline-link-macro">内容提要</block>
  <block id="e49c15d1800d8269c52f7d037ace494b" category="cell"><block ref="e49c15d1800d8269c52f7d037ace494b" category="inline-link-macro-rx"></block></block>
  <block id="0c70e09b2805fac4fb509aee9132fa97" category="cell">* NetApp DataOps 工具包 *</block>
  <block id="9004ee13f10e4aa331cdbb0e05878d3f" category="inline-link-macro">访问 GitHub 上的工具包</block>
  <block id="604c2d197444e12a03e7c1ba2830e768" category="cell"><block ref="604c2d197444e12a03e7c1ba2830e768" category="inline-link-macro-rx"></block></block>
  <block id="4810ca62a9687605d0a9c7471e75ec69" category="cell">* 数据分析解决方案简介 *</block>
  <block id="7cc3c71ee2fdbff1fd2efbfcded89f90" category="inline-link-macro">适用于不同分析策略的不同解决方案</block>
  <block id="478906eb475a111b93606dc484113cdc" category="cell"><block ref="478906eb475a111b93606dc484113cdc" category="inline-link-macro-rx"></block></block>
  <block id="0f984f9309c692c61a7fc7cc418f3aaf" category="summary">BData 保护和安全解决方案资料的最新补充内容</block>
  <block id="c492395cd6a4b5279c981c29057d42b9" category="doc">《数据保护和安全解决方案新增功能》</block>
  <block id="d6aa2099009bf5a43f1d5210308a91de" category="paragraph">最新数据保护和安全解决方案及解决方案宣传材料概述。</block>
  <block id="1e1fe2d30ed5bb9c5276dddb65f4ce65" category="cell">* 安全性 *</block>
  <block id="44516140f9860119a65bb3fc45b9ff39" category="inline-link-macro">经过 NetApp HCI 验证的 PCI-DSS 架构</block>
  <block id="5b03dcf0205060a9490f1d572aee619e" category="cell"><block ref="5b03dcf0205060a9490f1d572aee619e" category="inline-link-macro-rx"></block></block>
  <block id="6280dd4ea2adb1ae834642a5280c5067" category="summary">NetApp 销售和合作伙伴套件包含丰富的信息，可帮助您更有效地进行销售。详细了解可为 NetApp HCI 销售团队和合作伙伴提供帮助的信息。</block>
  <block id="608f33d993c7538e852c0bfb6158885b" category="doc">NetApp HCI 解决方案：销售和合作伙伴套件</block>
  <block id="ff9898f7e9b10c66e4b7786e24163000" category="paragraph">NetApp 销售和合作伙伴套件包含丰富的信息，可帮助您更有效地进行销售。</block>
  <block id="0a47eb4aaa9c85a4805211a20639a63a" category="paragraph">适用于最终用户计算（ EUC ）和私有云的套件展示了 NetApp HCI 解决方案如何提供差异化优势，并介绍了我们的解决方案所解决的用例。</block>
  <block id="23d0d69a9dbe56f87974c12b54ec1ce9" category="section-title">从何处查找 NetApp HCI 套件</block>
  <block id="2150f51e16f967f09f11081959ea3e1e" category="inline-link-macro">HCS 资源中心</block>
  <block id="71006bbe37b42329dc5bf1040467853c" category="list-text">中的 EUC 和私有云销售套件 <block ref="409214fd3e41da81e29eac86b5c3e463" category="inline-link-macro-rx"></block></block>
  <block id="63acc7e3c2aea9a25b57f08d1a4b436f" category="inline-link-macro">合作伙伴门户</block>
  <block id="5abe6e22d0b10626fe56e8ab716cd9d0" category="list-text">中的合作伙伴套件 <block ref="b49b630f9613a256ce1e1e2f1eb1559c" category="inline-link-macro-rx"></block> 或者使用合作伙伴套件表（如下）快速访问合作伙伴支持材料</block>
  <block id="b2318c404540cacfb65f5c95482ad7c9" category="section-title">最终用户计算合作伙伴套件</block>
  <block id="44259680bd01002134994d85d023710c" category="cell">Citrix</block>
  <block id="4725a75839c620bb95363c5f7f2ee9bc" category="cell">VMware Horizon</block>
  <block id="efd26918cd14639b10ed6965f08806f4" category="cell">* 解决方案简介 *</block>
  <block id="62e36a16818d0c3e689fdbaf65526c1d" category="inline-link-macro">VDI Citrix</block>
  <block id="29c0444c34446f4f0f83c3a1c3baa8ad" category="cell"><block ref="29c0444c34446f4f0f83c3a1c3baa8ad" category="inline-link-macro-rx"></block></block>
  <block id="f256679e0486243f396f977f62ae758a" category="inline-link-macro">VDI VMware</block>
  <block id="c6a5e9b8443e9d949b1fff3bc34640f6" category="cell"><block ref="c6a5e9b8443e9d949b1fff3bc34640f6" category="inline-link-macro-rx"></block></block>
  <block id="9c656a59e56753b8c0e71af1ae74576e" category="cell">* 客户演示文稿 *</block>
  <block id="a40b5192f5ce978070edc550eb81cf83" category="inline-link-macro">数字化工作场所转型（ VDI/EUC</block>
  <block id="fa0a91d0fd5505dff473d1d49644f1af" category="cell"><block ref="fa0a91d0fd5505dff473d1d49644f1af" category="inline-link-macro-rx"></block></block>
  <block id="f43e71ec5bb9d488d39850f61142fcd5" category="cell">* 技术演示文稿 *</block>
  <block id="6d3ed4dd2a396ebeafbb52be77d1d129" category="inline-link-macro">EUC 商机技术演示文稿</block>
  <block id="141296f6038f355c133dff590d9a620c" category="cell"><block ref="141296f6038f355c133dff590d9a620c" category="inline-link-macro-rx"></block></block>
  <block id="3b4f57ca3d91f50925db73e694c1b57b" category="cell">* 快速参考指南（ QRG ） *</block>
  <block id="ce402164df52d72b7c7542befa47676c" category="inline-link-macro">EUC 和 AMP ；采用 NetApp HCI 合作伙伴营销的 VDI 解决方案</block>
  <block id="7a74b40f16ebc541adfc03270f6de6c3" category="cell"><block ref="f353e0f9f14ff8f1a2200953ddb3bea5" category="inline-link-macro-rx"></block></block>
  <block id="c74b02669d25194d89d7b58190f76f50" category="cell">* 常见问题解答 *</block>
  <block id="abec7dabd270d1aff18211ea206ac1f6" category="inline-link-macro">EUC VDI 的 NetApp HCI 常见问题解答</block>
  <block id="36bb6dd1c1a86fd8b31fcdffc19792fd" category="cell"><block ref="36bb6dd1c1a86fd8b31fcdffc19792fd" category="inline-link-macro-rx"></block></block>
  <block id="bcbca682153046450de678f8420e1d1e" category="cell">* 竞争资源 *</block>
  <block id="e639e3a57e6aef5a5acd869fe8528646" category="inline-link-macro">竞争销售套件 EUC</block>
  <block id="7357bc6e13d2423fa9245a4bcc20bc08" category="cell"><block ref="7357bc6e13d2423fa9245a4bcc20bc08" category="inline-link-macro-rx"></block></block>
  <block id="4f31f6ac61cad74257bd0f55e379dc2d" category="section-title">私有云合作伙伴套件</block>
  <block id="1d9fc183665bd1e195391190be506894" category="cell">Red Hat</block>
  <block id="53504ce7f2e9734c443cabd3ba9591c1" category="inline-link-macro">什么是私有云</block>
  <block id="a3eaf6a352365273c58bdd1b76b68891" category="cell"><block ref="a3eaf6a352365273c58bdd1b76b68891" category="inline-link-macro-rx"></block></block>
  <block id="1228c90f8fe09eab9799c404bdccb0e3" category="inline-link-macro">BDM 客户演示文稿： VMware 私有云</block>
  <block id="bc34b9157ab51fb96e2fcbeb63438481" category="cell"><block ref="bc34b9157ab51fb96e2fcbeb63438481" category="inline-link-macro-rx"></block></block>
  <block id="b10dd462232af7339a2d99a765777ea9" category="inline-link-macro">基于 NetApp HCI 的 RedHat 私有云</block>
  <block id="287d5bb3d47b9e5046a216c7b2cf8ea4" category="cell"><block ref="287d5bb3d47b9e5046a216c7b2cf8ea4" category="inline-link-macro-rx"></block></block>
  <block id="f7d934f61a2c5fdb69305b4d410290c2" category="inline-link-macro">构建 VMware 私有云</block>
  <block id="7796d86225b3150770cd43067ade5c8b" category="cell"><block ref="7796d86225b3150770cd43067ade5c8b" category="inline-link-macro-rx"></block></block>
  <block id="2223f4a04a283d21fc99fc1e3e4cdd50" category="inline-link-macro">采用 Red Hat/KVM 的私有云</block>
  <block id="218411260aedb2c2d50b3444e48b8634" category="cell"><block ref="218411260aedb2c2d50b3444e48b8634" category="inline-link-macro-rx"></block></block>
  <block id="32b979e13f3062b3099404be2dee56a3" category="inline-link-macro">私有云解决方案</block>
  <block id="1c5259988e3c874a5d0c3b821b03adf6" category="cell"><block ref="1c5259988e3c874a5d0c3b821b03adf6" category="inline-link-macro-rx"></block></block>
  <block id="5f4e95441680afe67b3c38469798f84c" category="inline-link-macro">常见问题解答： VMware 私有云</block>
  <block id="b79d1670bb2e374a6372d11959c041e4" category="cell"><block ref="b79d1670bb2e374a6372d11959c041e4" category="inline-link-macro-rx"></block></block>
  <block id="8793472d40c00116e6c887ad3b3d7046" category="inline-link-macro">竞争销售套件 VMware 私有云</block>
  <block id="6b4d579a42139d30dd3535fd9f04b783" category="cell"><block ref="6b4d579a42139d30dd3535fd9f04b783" category="inline-link-macro-rx"></block></block>
  <block id="b014e0e20497475aa95899204f69ff5b" category="section-title">NetApp HCI TV</block>
  <block id="d1c55769c81c0951a89d427543e99d30" category="inline-image-macro">align="center" ， width="80" ， height="80"</block>
  <block id="30876ce4b2e24a6d1d156b5f045c42b1" category="cell"><block ref="30876ce4b2e24a6d1d156b5f045c42b1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dc8e010d5a6b9b55a0148d0fea5173df" category="inline-link-macro">NetApp HCI EUC 解决方案简介</block>
  <block id="f71afd32b0dd80c174f7992f4a2a9b95" category="list-text">为客户提供使用 NetApp HCI 的 EUC 和 VDI 解决方案的想法<block ref="aff5bdf475a74af647529d6a17a6a200" category="inline-link-macro-rx"></block> （ 3 ： 24 ）</block>
  <block id="32acfb8513f70fb73ddac1a85ab64aaf" category="inline-link-macro">NetApp HCI 私有云简介</block>
  <block id="c5b4f8a561f760458d907111cd3413e6" category="list-text">为您的客户演示 NetApp HCI 私有云提供的想法。<block ref="4f47ac5c2dc8be4d7fef6cd71d1b7d1e" category="inline-link-macro-rx"></block> （ 2 ： 05 ）</block>
  <block id="c81fdd29b790383177ba8500a951d732" category="inline-link-macro">采用 NetApp 分类 HCI 的解决方案的价值</block>
  <block id="f8cf2626487f897e45d0373c5517483f" category="inline-link-macro">通过消除 NetApp HCI 解决方案带来的成本投资回报（ ROI ）价值</block>
  <block id="3e5810f52212f8c8f1fe544a93f221f1" category="list-text">NetApp HCI 差异化动画简介<block ref="59257aa1fdfed07f59453990ef73b9ff" category="inline-link-macro-rx"></block> （ 2 ： 09 ）<block ref="ea60e0216419689312dd1b13012e02e0" category="inline-link-macro-rx"></block> （ 2 ： 56 ）</block>
  <block id="41c7ac17d355924d994339a33039be2a" category="section-title">追加信息（需要登录）：</block>
  <block id="8a0620197fc9535794f3838954bf5106" category="inline-link">NetApp HCI 解决方案资料集</block>
  <block id="507ab94bc4f6789b1cc92d35be77b01c" category="list-text"><block ref="507ab94bc4f6789b1cc92d35be77b01c" category="inline-link-rx"></block></block>
  <block id="bdc0cfae73f89387754396735ba682fe" category="inline-link">NetApp HCI VMware 私有云资料集</block>
  <block id="acfd64d4a2e0275dc7efca726fae6660" category="list-text"><block ref="acfd64d4a2e0275dc7efca726fae6660" category="inline-link-rx"></block></block>
  <block id="e4497cb4786ff0e8f2434ff7ccc3474d" category="inline-link">NetApp HCI Red Hat 私有云集合</block>
  <block id="6b388be60bf9925d4d50b3b17da62249" category="list-text"><block ref="6b388be60bf9925d4d50b3b17da62249" category="inline-link-rx"></block></block>
  <block id="ad5cf480be22199d1b537c7e780865e9" category="inline-link">NetApp HCI Red Hat OpenShift 容器平台集合</block>
  <block id="47a4be1490b4a74acf017eb52f3e6bdb" category="list-text"><block ref="47a4be1490b4a74acf017eb52f3e6bdb" category="inline-link-rx"></block></block>
  <block id="2301298c257e88a4431e03e63d31a9bd" category="inline-link">NetApp HCI 最终用户计算（ EUC ）资料集</block>
  <block id="be2ffa87d0d3fd2a366f1e517e8b235e" category="list-text"><block ref="be2ffa87d0d3fd2a366f1e517e8b235e" category="inline-link-rx"></block></block>
  <block id="eafa2f7adce79325a08ac270b97a2296" category="inline-link">NetApp HCI 数据库收集</block>
  <block id="aef8b0ab6c22de8c188fe15353a7ae74" category="list-text"><block ref="aef8b0ab6c22de8c188fe15353a7ae74" category="inline-link-rx"></block></block>
  <block id="144f3e28d113d930a46fcbc0dcbbb358" category="inline-link">NetApp HCI 数据保护收集</block>
  <block id="aa9e58a188ed63f3f86d80062e292028" category="list-text"><block ref="aa9e58a188ed63f3f86d80062e292028" category="inline-link-rx"></block></block>
  <block id="ba1d188aa57361cd6e5c33da05bf1f0a" category="summary">NetApp HCI 基础架构平台概述</block>
  <block id="e78ae2ab5f57e2d39ed024cdcabd6d23" category="doc">NetApp HCI 基础架构平台概述</block>
  <block id="33b6221242b2a1ca6b0558f16566754b" category="paragraph">NetApp HCI 可提供卓越的灵活性以及企业级功能。下面我们来了解一下该平台的功能和优势。</block>
  <block id="267d07b3835194f3d810c5a5dbcb51b7" category="paragraph">NetApp HCI 是一种企业级基础架构，由多个存储节点和计算节点组成。NetApp HCI 在高度灵活高效的架构上提供可预测的性能，使其易于管理。借助 NetApp Element 软件，您可以释放 Data Fabric 的强大功能，使 NetApp HCI 能够参与混合云服务。</block>
  <block id="a1cd456578f2917175f2875e24ccaa5d" category="paragraph">部署 VM 所需的安装和配置通过 NDE 自动完成。计算集群通过 VMware vCenter 进行管理，存储集群通过使用 NDE 部署的 vCenter 插件进行管理。作为 NDE 一部分部署的名为 mNode 的管理 VM 负责处理版本升级，将事件推送到 vCenter ， vCenter 插件管理，用于支持的 VPN 通道以及 NetApp Active IQ ® 收集器。此外，您还可以将 NetApp 云服务扩展到内部环境，从而实现混合云基础架构。计算和存储节点有多个选项，</block>
  <block id="ebffeb8999da59bbb722f4855b0ec8a1" category="paragraph">NetApp HCI 适用于多种工作负载，包括：</block>
  <block id="407432c641358300c37673ae96305f3a" category="list-text">开发运营</block>
  <block id="9541a9c1b7e6874253158387a37105b0" category="list-text">容器工作负载</block>
  <block id="ac354d247b7cb9de803a810e9e35ea24" category="list-text">边缘计算</block>
  <block id="38bd169945a371832b0b65c9086b1792" category="list-text">数据库工作负载</block>
  <block id="9d0996a44c6d51cf223e833dceecb286" category="list-text">人工智能</block>
  <block id="2a80513f40f0c2a9c11009fa83049bd9" category="list-text">机器学习</block>
  <block id="8ceee93129c83abea8aee33f4235e93c" category="list-text">虚拟桌面基础架构 (VDI)</block>
  <block id="98ed4d2270ddb641e203f2609a1a0d52" category="section-title">NetApp HCI 用例</block>
  <block id="e588673a5e540b0a5de8cce4031eae07" category="list-text">* 内部私有云。 * NetApp HCI 可选择从小规模入手并扩展基础架构，让您的数据中心适应未来需求，实现更高的增长和灵活性。</block>
  <block id="04046d07720158cef71b1de3828ea1c2" category="list-text">* 混合云。 * NetApp HCI 可用作混合多云或私有云部署的基础架构。</block>
  <block id="c9331a7eb9b77bd47bfd265f190337e0" category="list-text">* 最终用户计算。 * 您可以利用 NetApp HCI 和 VMware Horizon 提供最佳用户体验。</block>
  <block id="003c611ca616635d61698b10b71f00d1" category="list-text">* 工作负载整合。 * NetApp HCI QoS 设置可确保应用程序性能。</block>
  <block id="7794fc33eccb30968344c3c60a318c44" category="section-title">NetApp HCI 主要功能</block>
  <block id="3d51ed1f8e686622f73d7d3bcaa23b02" category="paragraph">NetApp HCI 可提供企业级可靠性和可用性。NetApp HCI 的一些重要功能包括：</block>
  <block id="864447abaff946515fcb3c39045c678f" category="list-text">性能保障</block>
  <block id="b5749763d73291b2a03a77f61b3a4e39" category="list-text">独立于容量分配存储性能</block>
  <block id="62034a2cb9025a3b1207eae4b3671cf2" category="list-text">在不影响其他卷的情况下实时管理性能</block>
  <block id="b7465b1f6402cf2349202ea1360b9cc2" category="list-text">使用精细的 QoS 设置保证每个卷的性能</block>
  <block id="ae324d53c85da706b36b5f5b7f95593c" category="list-text">全球效率</block>
  <block id="8a111e43e9ffdcc33ffae7503af6ddac" category="list-text">实时和后压缩</block>
  <block id="747e6dda73322ab89b301eac85c7fc61" category="list-text">通过无中断重复数据删除自动分发数据（无热点）</block>
  <block id="a8b0aed76c2899c28107db1263e62df3" category="list-text">全局精简配置</block>
  <block id="28cf0cfc99d7317a69e42b579484e138" category="list-text">数据保证</block>
  <block id="0c46b76f88ae7054f71bc2c59503d9f9" category="list-text">NetApp HCI Helix 无 RAID 数据保护</block>
  <block id="eab0a7e0d0b7c9c025e27d70b897ada0" category="list-text">实时复制（同步和异步）</block>
  <block id="ee922327e546db45632f3201c1fcd96d" category="list-text">集成备份和恢复（云）</block>
  <block id="4f69f4a25c550d1e4b9af602dffad146" category="list-text">无论系统状况或应用程序活动如何，数据和性能均可用</block>
  <block id="dc27417b4077a61d920270e1c0144a0c" category="list-text">使用 256 位加密保护数据</block>
  <block id="1f2ab887ca353ae2d1dfaf27b0d5f017" category="image-title">NetApp HCI 基础架构组件</block>
  <block id="134b86afec279d38ad364e1b10ecbc76" category="image-alt">nhci 基础架构</block>
  <block id="2b119ad19b4908bbc09fccb99b7119f5" category="section-title">NetApp HCI 设计原则：可预测性，灵活性，精简性</block>
  <block id="f736b4e66837e5af1ccb638b36758875" category="paragraph">通过 NetApp HCI ，您可以灵活，直接地控制企业级工作负载。它旨在提供可预测的性能，线性可扩展性以及简单的部署和管理体验。</block>
  <block id="76620866e163e71e8be646277e0ff344" category="list-text">利用行业领先的性能 QoS 防止资源争用并满足性能 SLA 要求。</block>
  <block id="fd54e05775799aca948a18e622cd7b8a" category="list-text">将基于存储策略的管理（ Storage Policy Based Management ， SPBM ）相结合，实现 QoS 的自动化和管理。</block>
  <block id="7782d59964d3ca7d6793a3e85ebe95f8" category="list-text">利用零共享架构自信地独立扩展计算和存储节点。</block>
  <block id="a4daa5ce84942e3f3be08588ab9fb29b" category="list-text">防止效率低下的过度配置并降低 TCO 。</block>
  <block id="76ba5a1bd12040f7acb4509e413c528c" category="list-text">混合使用小型，中型和大型计算和存储配置。</block>
  <block id="552f7300ee36789c5a03f1d90ca8f3d7" category="list-text">借助 NDE ，可消除手动部署和用户错误风险。</block>
  <block id="f3050a1d1e43fd1aae6e8bca4bda706d" category="list-text">使用适用于 vCenter 的 Element 插件管理 NetApp HCI</block>
  <block id="a8294e9e0b21ecc5431464f101b3f190" category="section-title">计算和存储节点</block>
  <block id="dc3d94349cf9af319a029282b5ca843a" category="paragraph">NetApp HCI 提供多种外形规格，可满足各种计算和存储需求。最低起始配置包括两个机箱，其中包含两个计算节点和四个存储节点。对于 GPU 驱动的工作负载，例如 VMware Horizon 或机器学习，需要更多节点。此架构还提供用于数据库工作负载的计算节点。</block>
  <block id="4216b14b77537c33bac316ef1ad0a6e6" category="paragraph">NetApp H300E ， H500E 和 H700E 节点均采用 Intel Xeon E5 v4 （ Broadwell ）处理器。NetApp HCI H410C 和 H610C 节点基于 Intel 可扩展（ Skylake ）处理器。NetApp HCI H610C 节点包含两个 NVIDIA Tesla M10 卡。每个集群最多可扩展到 64 个 NetApp HCI 计算节点。</block>
  <block id="5d77cbf246da9b98a05df497ff55a45b" category="inline-link">NetApp HCI 产品规格</block>
  <block id="5389f06f49b45471f8e3762e080675ed" category="paragraph">NetApp 强烈建议阅读<block ref="906466ebba83094c4faa4c842ec77881" category="inline-link-rx"></block> 有关 NetApp HCI 计算和存储产品的详细信息。有关 NetApp HCI 工作原理的详细信息，请参见<block ref="abfe69df78b40703cb74176e18079ea3" category="inline-link-rx"></block> 白皮书。</block>
  <block id="8a09cdf8f470e3ea1fceb751d9c6b925" category="paragraph">存储节点可在半宽或全宽机架单元上使用。半宽机架单元正在填充两个机架单元机箱，其中可以包含存储节点或计算节点。至少需要四个存储节点，最多可扩展到 40 个节点。一个存储集群可以在多个计算集群之间共享，从而为集成数据服务提供异步，同步和 Snapshot 复制方法。存储节点包含一个缓存控制器，用于提高写入性能。单个节点可在块大小为 4 k 的情况下提供 50 ， 000 或 100 ， 000 IOPS 。</block>
  <block id="da2dc779077b8782a9fe5d96babe9d83" category="paragraph">NetApp HCI 存储节点运行 Element 软件，该软件可提供支持最小，最大和突发限制的 QoS 功能。存储集群允许混合使用多个存储节点；唯一的注意事项是，一个存储节点大小不能超过总容量的 1/3 。</block>
  <block id="12b8893b065179b6b80fdc2d448862df" category="section-title">Element 软件</block>
  <block id="5a3bce505d009f4a6ef70938d41a63ac" category="paragraph">Element 软件专为需要针对不同工作负载快速进行模块化增长或缩减的数据中心而设计。Element 软件可以灵活地处理永久和瞬时工作负载，并满足各种不同的吞吐量和容量要求，因此是服务提供商的首选存储基础架构。</block>
  <block id="8b33060a5097001baf4c2f01d2d639c6" category="paragraph">Element 可为每个存储节点提供模块化的可扩展性能，从而为环境提供有保障的容量和吞吐量。添加到 NetApp HCI 环境中的每个 Element 存储节点均可提供一组 IOPS 和容量，从而实现可预测的计划内增长。</block>
  <block id="d1655937b446791f86d5eb396a5496ff" category="inline-link-macro">Element 软件产品页面</block>
  <block id="414575ddc51ac3996205431e7101e0a3" category="paragraph">由于每个节点都会为存储环境提供一组吞吐量（ IOPS ），因此可以保证每个工作负载的 QoS 。Element 可帮助您确保最低 SLA ，因为集群的总吞吐量是一个已知的可量化容量。有关详细信息，请参见 <block ref="795666f553a011c4cd7c66dd9d2e008b" category="inline-link-macro-rx"></block>。</block>
  <block id="1c44496d14fe54328ca47705806a3ca0" category="paragraph">Element 软件 100% 可编程，可提供无与伦比的灵活性和应用程序性能保障。由于可以在集群中混用节点，因此您可以构建私有云架构，以满足任何规模的业务需求。</block>
  <block id="c6f59500cff9fc154e284a0b9b18bb83" category="summary">讨论 NetApp 解决方案中的自动化功能的系列视频和演示</block>
  <block id="cff1a9d42f081481f7d374df8bcbb26b" category="doc">解决方案自动化视频和演示</block>
  <block id="4e59e2d3d9f78c4e87a82b3cbcc7e1a3" category="paragraph">视频和演示概述，重点介绍 NetApp 解决方案自动化功能的具体功能。</block>
  <block id="9efcc0ad3c93b238cc0495e3c87b715f" category="inline-link-macro">借助 Ansible 在 FlexPod 上自动部署 Oracle 19c RAC</block>
  <block id="9c4ada146a28af07eecc939b540c3541" category="list-text"><block ref="9c4ada146a28af07eecc939b540c3541" category="inline-link-macro-rx"></block></block>
  <block id="6a0ecfbed3f66ec0b5d8989880431ad7" category="summary">讨论数据保护和安全解决方案功能的系列博客</block>
  <block id="16be77be7dcecad552bca4efda1efcb1" category="doc">数据保护和安全博客</block>
  <block id="fdaef51553bfad628d1d8ee4cd314d79" category="paragraph">重点介绍数据保护和安全解决方案特定功能的博客概述。</block>
  <block id="f3c961b3fcb2ae7229add932837c205a" category="summary">讨论业务应用程序和企业数据库解决方案功能的一系列视频和演示</block>
  <block id="f7164629c6d69e9fc50c2435382e23c8" category="doc">业务应用程序和企业数据库视频和演示</block>
  <block id="9c8f0f2cea03121d5372f653983bb29b" category="paragraph">视频和演示概述，重点介绍业务应用程序和企业数据库解决方案的特定功能。</block>
  <block id="a0d2b6fe9ab0a7e386c4c21f70331226" category="section-title">案例研究</block>
  <block id="33be49f7ebc56eb7d336a201f7ac0df6" category="inline-link-macro">基于 Azure NetApp Files 的 SAP</block>
  <block id="626865aeb52c00e03e8f0df7695c5a5c" category="list-text"><block ref="626865aeb52c00e03e8f0df7695c5a5c" category="inline-link-macro-rx"></block></block>
  <block id="e131204502a58630f2f72937238604c8" category="section-title">视频 / 演示</block>
  <block id="e9194e819cadddfb8f6c5e69d11e366b" category="inline-link-macro">适用于 Oracle 数据库的 NetApp 解决方案</block>
  <block id="2c389096a43e749160e32214cb4a3b89" category="list-text"><block ref="2c389096a43e749160e32214cb4a3b89" category="inline-link-macro-rx"></block></block>
  <block id="2b1dd692c0da980c4ec2ad9fd523c47d" category="inline-link-macro">Azure NetApp Files 上的 SQL 高可用性集群</block>
  <block id="99945a626f3fb01dbeac75f40a6c2c8e" category="list-text"><block ref="99945a626f3fb01dbeac75f40a6c2c8e" category="inline-link-macro-rx"></block></block>
  <block id="cf04feec36847ba9c9671b28661cd1fc" category="sidebar">NetApp 解决方案文档</block>
  <block id="38d9ffc674675d65fbb8aabd7e47acd3" category="sidebar">FlexPod 解决方案</block>
  <block id="3523ec156cfc8217bb64d1273e5663fa" category="sidebar">关于 NetApp 解决方案</block>
  <block id="e799e148c709b216080d260919cc9b9f" category="sidebar">AI 现代数据分析</block>
  <block id="91770f038cd944a1d3b9b347edeb2b10" category="sidebar">新增功能</block>
  <block id="74bef786b12cb9d03a6c04df1f605181" category="sidebar">NetApp DataOps 工具包</block>
  <block id="17c3771ed0b6c1ae15740eff715e9922" category="sidebar">视频和演示</block>
  <block id="25a72d771c3846ba4da8732220f7a588" category="sidebar">企业应用程序数据库</block>
  <block id="0333ddced253ee1c6929eda5612dea92" category="sidebar">请求自动化</block>
  <block id="9e2c62f406d88ad1ee253efd74f593df" category="sidebar">建议新的解决方案</block>
  <block id="7fd861566be88364067d817b54a44688" category="sidebar">提供解决方案反馈</block>
  <block id="df6654a22cda1b94cf0f51d6ae94bb69" category="sidebar">适用于不同分析策略的不同解决方案解决方案简介</block>
  <block id="8e2406d586d4192dc66b85722da1c3b9" category="sidebar">采用 Splunk SmartStore 的 NetApp StorageGRID</block>
  <block id="5e3dc34b61f6a21ffd6549ee40d4631b" category="sidebar">NetApp E 系列 E5700 和 Splunk Enterprise</block>
  <block id="427d072a2c1690c6d9ece23bef05477b" category="sidebar">《使用 NetApp Storage 解决方案的 Apache Spark 工作负载》（部署指南）</block>
  <block id="fd93f907884113bdb9eec9a621c9b8f0" category="sidebar">采用 Red Hat 虚拟化的 NetApp HCI</block>
  <block id="b1fcf7691de9d60b17225ed7d159fd6a" category="sidebar">架构概述</block>
  <block id="999ce0e328df4e1c2df630df48b855ea" category="sidebar">部署过程</block>
  <block id="182b1d5a1790630ded65c50c61479580" category="sidebar">1. 配置管理交换机</block>
  <block id="79bf87de2c64701bbd9107fab77e0be1" category="sidebar">3. 在 HCI 存储节点上部署 Element 存储系统</block>
  <block id="063538f12c2237eb84cf2e0420fa8c50" category="sidebar">4. 在 HCI 计算节点上部署 RHV-H 虚拟机管理程序</block>
  <block id="b7e007be9806e6e1b38c1f7e31cdd961" category="sidebar">5. 将 RHV Manager 部署为一个自助托管引擎</block>
  <block id="8e3cc8c7345d11547dbed9cedb5d9d79" category="sidebar">6. 配置 RHV-M 基础架构</block>
  <block id="ffeeeead843dad4b1e51566e2406ca6f" category="sidebar">7. 部署 NetApp mNode</block>
  <block id="edce58be6c8f3039ee8f15ce1d654ee0" category="sidebar">生产部署的最佳实践</block>
  <block id="25097236e7c2f0ae97ca94db723e723c" category="sidebar">更新 RHV Manager 和 RHV-H 主机</block>
  <block id="e31c200081e78677e3a7406753550791" category="sidebar">为 RHV-H 主机启用隔离</block>
  <block id="21428a4a7efc6bf9948e3f5554d63f6a" category="sidebar">针对 Red Hat 虚拟化优化内存</block>
  <block id="410e1efde3bcb07edd18c38e5e443ea4" category="sidebar">从何处查找具有 RHV 的追加信息 NetApp HCI</block>
  <block id="8a593b5e69b1067ff1f3644b3623ea6a" category="sidebar">RHEL 上的 KVM</block>
  <block id="178f38ce1e25629646fe187b0b09e99b" category="sidebar">ONTAP 上的 AFF</block>
  <block id="7ec2f728f30e3ae32a0cc0a1f94ccbbf" category="sidebar">采用 VMware vSphere 的 ONTAP Select</block>
  <block id="749ce89aba569acb00aaf72f5dec91f7" category="sidebar">采用 VMware vSphere 的 StorageGRID</block>
  <block id="1c20ac21cb78acc41a945034ec358133" category="sidebar">运行 Microsoft SQL Server 和虚拟化基础架构的 ESDS NetApp SolidFire 企业 SDS</block>
  <block id="90f29ebe24ed67bc23019e06c7c9607d" category="sidebar">保证混合工作负载性能和 NetApp HCI</block>
  <block id="8b1ba296c02daf082eda6a8f8cc1c8aa" category="sidebar">使用 Red Hat Ansible 作为代码的基础架构</block>
  <block id="9023ccb2bd60a3528595e376e7f504bc" category="sidebar">数据保护和安全</block>
  <block id="fb824c58c8cf5b23c4e118e8adb800f4" category="sidebar">NetApp HCI 数据保护概述</block>
  <block id="ddf7fb92f181ec0f7200b3446fa470f9" category="sidebar">借助 Cloud Volumes ONTAP 实现多云数据保护</block>
  <block id="3345f8bcbeb55caa5917937c345b6a92" category="sidebar">使用 VMware SRM 进行灾难恢复和复制</block>
  <block id="28c55941bfe775c24c978e6aae709587" category="sidebar">使用 Arrow 设备的 Splunk Enterprise</block>
  <block id="4e676499a029037ce541c0607957ccc9" category="sidebar">Veeam Backup and Replication 9.5 v4</block>
  <block id="d8d40b547fe94cbe36b20af9095b2194" category="sidebar">使用 Commvault 实现 NetApp 横向扩展数据保护</block>
  <block id="b274e18b03d5465fec4ca85aa226422b" category="sidebar">借助 Cleondris 实现 NetApp HCI 灾难恢复</block>
  <block id="2265c8c9e199f5a52b3a78ff7825b274" category="sidebar">安装 Cleondris</block>
  <block id="93e3a5dc433762ab1a15525e57fcf494" category="sidebar">正在配置 Cleondris</block>
  <block id="ea7cc94844d70c7c25cdaddd35d748cd" category="sidebar">灾难恢复配对</block>
  <block id="b881a8f1cb0bab46e87cf18f6fa660b1" category="sidebar">恢复组织</block>
  <block id="7388404ef116c3ff812bfd290b094d9e" category="sidebar">故障转移</block>
  <block id="712d83d9ce8f26363e9bfd1cba104b88" category="sidebar">NetApp E 系列和 Commvault 数据平台 V11</block>
  <block id="aa8156dc9f7aa240e4f412f2f5fedaf5" category="sidebar">使用 Veeam Backup Replication 9.5 的 E 系列和 EF 系列参考架构和存储最佳实践</block>
  <block id="74e4bedcc2ff5b37a8770caa0ef72975" category="sidebar">使用 NetApp E 系列存储部署 Veritas NetBackup</block>
  <block id="11044934c6df97698ad1a901507e1e70" category="sidebar">经验证的 HCI 架构 PCI DSS 3.2.1</block>
  <block id="029f60716c50acd9acf9ce4a9394c91a" category="sidebar">采用适用于多租户基础架构的 HyTrust 的 FISMA 的 NIST 安全控制</block>
  <block id="b0ed101b405f642695988c7ef3313b52" category="sidebar">归档解决方案</block>
  <block id="5283f676edd0bac320f43931d87830ac" category="sidebar">Red Hat OpenShift 容器平台（设计指南）</block>
  <block id="768f5dd55e2bf674e482dfb7efbe21b4" category="sidebar">Red Hat OpenShift 容器平台（部署指南）</block>
  <block id="e110e2333a8febc7917146824eb919fd" category="sidebar">基于 Red Hat 虚拟化的适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="149ea58f349d1972ce8cd25689140c91" category="sidebar">架构概述—基于 RHV 的适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="0cce4359862de46359f672adc9382cbf" category="sidebar">设计注意事项—基于 RHV 的适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="ad2c5f3991c960e163a51a3681a1f1b0" category="sidebar">在 RHV 上部署适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="3b485cc727175aa3ea0673ee27952aee" category="sidebar">1. 创建存储网络 VLAN</block>
  <block id="d680f77327821ed81fdd48c67b757bda" category="sidebar">2. 下载 OpenShift 安装文件</block>
  <block id="d1c89de38117c9251d191fd0d1204ae1" category="sidebar">3. 从 RHV 下载 CA 证书</block>
  <block id="840ce528212f314b1290e559f3726482" category="sidebar">4. 在 DNS 中注册 API/Apps</block>
  <block id="9f0d6067a05637858698431e3cfc9daa" category="sidebar">5. 生成并添加 SSH 专用密钥</block>
  <block id="10a39b59adba74ee543d32447b1f0a13" category="sidebar">6. 安装 OpenShift 容器平台</block>
  <block id="daac6dcf0f6146c1e24677ed1ac4bdd0" category="sidebar">7. 访问控制台 /Web 控制台</block>
  <block id="f7ff40210abac33e761b262d75d69c5b" category="sidebar">8. 配置工作节点以运行存储服务</block>
  <block id="814d429b5fac17e46a41fa0e251a3fb2" category="sidebar">验证结果— RHV 上适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="9a86c46847d383f198d956869a35cd64" category="sidebar">视频和演示—基于 Red Hat 虚拟化的适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="44e75f45c665003f56ce9d24389dc4e6" category="sidebar">追加信息— NetApp HCI for Red Hat OpenShift on Red Hat 虚拟化</block>
  <block id="cdc53c90644739ab9cb455ad8b663d7b" category="sidebar">Red Hat OpenShift 概述</block>
  <block id="d48e549b4fdcc889e0243c53bbb4dda0" category="sidebar">解决方案验证和使用情形</block>
  <block id="f99e4eb05e28c150680cb72ca8410d93" category="sidebar">使用 NetApp ONTAP 在 Red Hat OpenShift 上配置多租户</block>
  <block id="51a25aff8c490f11d9be543c7af23a0d" category="sidebar">集群管理员任务</block>
  <block id="244e9cd91466ef1240c125511568880a" category="sidebar">存储管理员任务</block>
  <block id="bc967dc2d57e6eff184a821bf7577a80" category="sidebar">扩展</block>
  <block id="d6bf2b10101446c7afd28ff94926fc44" category="sidebar">通过操作员部署</block>
  <block id="e6b088db24ebe67ed0e9567d309387ec" category="sidebar">工作流</block>
  <block id="88c506562ebadd679bb16d76a4558619" category="sidebar">VM 克隆</block>
  <block id="d313887d8fa4b2493a50d1e00bad440e" category="sidebar">应用程序生命周期管理</block>
  <block id="f55899cffbf639043209795d5a1af970" category="sidebar">创建资源</block>
  <block id="1c4dff0a00340691e103ef63154df371" category="sidebar">Google Anthos</block>
  <block id="c8f24bbd6d81d4cb934d2d8aae361f80" category="sidebar">基于 VMware 的 Anthos （ HCI ）</block>
  <block id="b1a726d1bba62a708f21d344b8118d96" category="sidebar">解决方案组件</block>
  <block id="e85f1d86323eb82d2c8b69fe97c39696" category="sidebar">2. 配置数据交换机</block>
  <block id="23fc0160e6f6d3a0f8f27121ae9c6dde" category="sidebar">5. 部署和配置 F5 BIG-IP Virtual Edition 设备</block>
  <block id="2f2cd9e4a98b96b28a8b056c152c9b5d" category="sidebar">6. 完整的 Anthos 前提条件</block>
  <block id="418213a12e0be4162bc8cefb6eead5f6" category="sidebar">11. 安装和配置 NetApp Trident 存储配置程序</block>
  <block id="c268069d9291bb9cb1c32885e495a10f" category="sidebar">视频演示</block>
  <block id="9a9891facf2fa1c878c0fc18c6638005" category="sidebar">AI 融合基础架构</block>
  <block id="12797522e94d75727dd0a05a4ed9f5ff" category="sidebar">采用 NVIDIA 的 ONTAP AI</block>
  <block id="687350c847aefbf978e16be26609d101" category="sidebar">采用 NVIDIA DGX A100 的 ONTAP AI 系统设计指南</block>
  <block id="4c7a8c5b878fcdf733694f638b393b6b" category="sidebar">采用 NVIDIA DGX A100 的 ONTAP AI 系统部署指南</block>
  <block id="74c684b866e5fcffcc9c5165a491d5b2" category="sidebar">采用 NVIDIA DGX A100 系统和 Mellanox 频谱以太网交换机的 ONTAP AI 设计指南</block>
  <block id="f8363659ae3ab117a0afa4163ca69fc7" category="sidebar">《采用 NVIDIA DGX A100 系统和 Mellanox 频谱以太网交换机的 ONTAP AI 部署指南》</block>
  <block id="cc5c734c59f3ce23c9a86fd145bfb4ea" category="sidebar">采用 NVIDA 的 EF 系列 AI</block>
  <block id="0c3efd7c1aae12456ab9935ae5fd15e0" category="sidebar">采用 NVIDIA DGX A100 系统和 BeeGFS 的 EF 系列 AI</block>
  <block id="c70e778edabe427cd2db90132a56e456" category="sidebar">采用 NVIDIA DGX A100 系统和 BeeGFS 设计的 EF 系列 AI</block>
  <block id="06aa576b3e3e95c5df800228d146af65" category="sidebar">采用 NVIDIA DGX A100 系统和 BeeGFS 部署的 EF 系列 AI</block>
  <block id="2967ab4748573d0cb6f2c4084c4fd70f" category="sidebar">采用 NetApp E 系列参考架构的 BeeGFS</block>
  <block id="1db760587a86f5c1b9ab39aa8cf8cf3d" category="sidebar">使用 NetApp E 系列存储部署 IBM Spectrum Scale</block>
  <block id="08479c0355c887a02e772206b0d5d7f5" category="sidebar">适用于 AI 和 ML 模型培训工作负载的 NetApp ONTAP 和联想 ThinkSystem SR670</block>
  <block id="e648dd2d4df65a903e9c1204d81abaed" category="sidebar">适用于 AI 和 ML 模型培训工作负载的 NetApp AFF A800 和 Fujitsu 服务器 PRIMERGY GX2570 M5</block>
  <block id="6a571fb799acb43b64f874729f838e2a" category="sidebar">数据管道，数据湖和管理</block>
  <block id="c79bd5ac7ebc0eae5588b9ad529a380f" category="sidebar">适用于自主驾驶工作负载的 NetApp StorageGRID 数据湖</block>
  <block id="fad62e8b886e655813cc4ce635152f62" category="sidebar">Trident 部署</block>
  <block id="be443b15b920fdeff14efc2c6db69a7c" category="sidebar">MLRun 管道</block>
  <block id="70be05b3500f28affc2d048f81c4f7ab" category="sidebar">分布式 Azure 培训—通道检测</block>
  <block id="7767872606b9c99eb656c9568c1fdd83" category="sidebar">车道检测—使用 Run AI 进行分布式培训</block>
  <block id="ce3b746194cb1fb7d96dfe14187115e0" category="sidebar">采用数据缓存的混合云 AI 操作系统</block>
  <block id="549d044fec039c71abf82f76a0d7969c" category="sidebar">将数据从大数据环境迁移到 AI 环境</block>
  <block id="3e94378e1f4c1382f6aeb12ff84640a7" category="sidebar">采用 H615c 和 NVIDIA T4 在边缘数据中心进行人工智能推理</block>
  <block id="45c1901a4f59c45186fbf7de65f47a2d" category="sidebar">采用自动化部署的虚拟基础架构</block>
  <block id="c83a794f4f47117864882f326d7120c1" category="sidebar">设置部署跳转和 Kubernetes 主节点 VM 手动部署</block>
  <block id="d31e3dc9694c1ffb9124e4a268505b3d" category="sidebar">在 VMware 虚拟基础架构自动部署中部署和配置 ONTAP Select</block>
  <block id="356e214e50112dd7af5a0e5e2af6cc8c" category="sidebar">部署 NetApp Trident 自动化部署</block>
  <block id="b41c68814bb9724ba6c8856503a91924" category="sidebar">部署 NVIDIA Triton 推理服务器自动部署</block>
  <block id="7fca09994c8655e89977166c6bfeec8f" category="sidebar">部署客户端以进行 Triton 推理服务器自动化部署</block>
  <block id="f1e7c981dec3bcee348bda96c55363c4" category="sidebar">使用 NVIDIA 的对话 AI</block>
  <block id="d5c1931461d1e204a84a486796df2cca" category="sidebar">NetApp Orchestration 解决方案与 Run ： AI</block>
  <block id="c0a0f5bbb431dea70000d73b29e50249" category="sidebar">使用 Run AI 优化集群和 GPU 利用率</block>
  <block id="09c995632f33d1ee4a581eb951793f35" category="sidebar">运行 AI 安装</block>
  <block id="5c9e37e6d7e6f5e3a76854d8343d626b" category="sidebar">运行 AI 信息板和视图</block>
  <block id="29ebede332931243e314d8a3f333c1a7" category="sidebar">在 Run AI CLI 中提交作业</block>
  <block id="2943702718c42a5063e0c70598cebdc6" category="sidebar">适用于自主驱动工作负载的 NetApp ONTAP AI 解决方案设计</block>
  <block id="d11813566a7c636e892d384601baf2c3" category="sidebar">适用于医疗保健的 NetApp ONTAP AI 参考架构：诊断成像</block>
  <block id="ab8526a90cc9cc979ddd23c87fff57bd" category="sidebar">适用于金融服务工作负载的 NetApp ONTAP AI 参考架构</block>
  <block id="6efd886c994d37b6577e22359be2310e" category="sidebar">使用 NetApp E 系列和 BeeGFS 进行 AI 部署</block>
  <block id="3863e8a73e226ce0c0a6ad02b90ee75b" category="sidebar">《采用 NetApp E 系列系统的 Quantum StorNext 设计指南》</block>
  <block id="7891972f4586e6ee183ea541991ebe9f" category="sidebar">《采用 NetApp E 系列系统的 Quantum StorNext 部署指南》</block>
  <block id="6ff1dafebf930a9c5fef12bf43046987" category="sidebar">企业级应用程序和数据库</block>
  <block id="e340bc103d02ce2b8e016eb60705029c" category="sidebar">SAP 和 SAP HANA</block>
  <block id="89447eb7454239e11376250fa04a88f7" category="sidebar">SAP 与使用集群模式 Data ONTAP 的 Windows 上的 Microsoft SQL Server</block>
  <block id="eb1df2bd32ac3157117c264421853a5a" category="sidebar">SAP 与基于 UNIX 的 Oracle 以及 NFS 与 NetApp 集群模式 Data ONTAP </block>
  <block id="54d2cdd3035ca1cdff5803c30f2ed2e1" category="sidebar">部署 Oracle 数据库</block>
  <block id="c880b35e02dbb5854452c86028138e2a" category="sidebar">在 NetApp ONTAP 上部署 Oracle 数据库</block>
  <block id="699700175d80778f1738d906ee9540d5" category="sidebar">入门和要求</block>
  <block id="210fdbe41d80b2e8690a970de86a7ffb" category="sidebar">自动部署 Oracle 19c AWX/ 塔式服务器</block>
  <block id="13cf6478a61a7904a3062d587248fb75" category="sidebar">自动部署 Oracle 19c CLI</block>
  <block id="bc113eb23aa0579a5e1d93e97ca13635" category="sidebar">基于 NetApp EF 系列的 Oracle 数据库</block>
  <block id="78898e52fcbdc5337204a384f2456d4f" category="sidebar">Microsoft SQL Server</block>
  <block id="61def2ac347af2f10fd60cd67052a311" category="sidebar">参考设计（实时高级别设计）</block>
  <block id="7c02456b91ace7501ea6f18d1657dcf7" category="sidebar">打造现代化的 Microsoft SQL Server</block>
  <block id="f7b9f0eb92c2666eec43e715a24286a0" category="sidebar">在 NetApp HCI 上部署 MSSQL 数据库工作负载</block>
  <block id="e446357e519848ee5256ecdbb28e856f" category="sidebar">ESG 技术验证—使用 NetApp HCI 确保数据库性能和可用性</block>
  <block id="5c008a8422e884d74da1d4b50a7ada55" category="sidebar">《采用 NetApp EF 系列的 Microsoft SQL Server 最佳实践指南》</block>
  <block id="a87e5ca19422686ef96f1e6799e9111d" category="sidebar">虚拟桌面服务（ Virtual Desktop Services ， VDS ）</block>
  <block id="dede82866780d163734b443c5f4d484e" category="sidebar">采用 NetApp 虚拟桌面服务的混合云 VDI</block>
  <block id="b89c617ff394cc85df3935994baa194b" category="sidebar">使用 Login VSI 进行单服务器负载测试</block>
  <block id="6abbceca4793ffe4b329045f63b4d219" category="sidebar">操作管理</block>
  <block id="1b31ca8ddb749644af37aa10b42e6930" category="sidebar">GPU 注意事项</block>
  <block id="a1da2a2d050a6b61256020afd015a056" category="sidebar">行业解决方案</block>
  <block id="739169d2451850e6df7246db70c28cc7" category="sidebar">ESG 技术验证：借助 NetApp 虚拟桌面服务实现企业级 VDI</block>
  <block id="3acc5e85d752378c6f1b9154f379b475" category="sidebar">VMware 最终用户计算（设计指南）</block>
  <block id="87e25a8d0e462ac8d7158e587f376605" category="sidebar">采用 VMware 和 NVIDIA GPU 的最终用户计算（设计指南）</block>
  <block id="d840a196af6c9e07c3ac3b20b15fb724" category="sidebar">使用 VMware 和 NVIDIA GPU 的最终用户计算（部署指南）</block>
  <block id="f93781578174ca3309bd3ac126884af4" category="sidebar">借助 VMware 实现 3D 图形的最终用户计算</block>
  <block id="ebf53884ddd18d15090d564ab3097375" category="sidebar">Citrix 虚拟应用程序和桌面</block>
  <block id="c1bb130d09609411739543a23ed6b32d" category="sidebar">采用 VMware vSphere 的 Citrix 虚拟应用程序和桌面（设计指南）</block>
  <block id="6bb1b43f330b101d2e754e7809b234b4" category="sidebar">适用于采用 Citrix 虚拟机管理程序的 Citrix 虚拟应用程序和桌面的 NetApp HCI</block>
  <block id="3ab8a12f3e63c2e181a28237725b32e9" category="sidebar">附录— iSCSI 设备配置</block>
  <block id="e7859d97d3394c17d9e7e2116aeed494" category="sidebar">虚拟桌面应用程序</block>
  <block id="dc6df49c87ca4afd24c9ff150a3c1a59" category="sidebar">适用于 NetApp HCI Systèmes 的 CATIA</block>
  <block id="e2a1b52ebd707739003f77464bbcaa80" category="sidebar">FlexPod 桌面虚拟化解决方案</block>
  <block id="2a643eb4634917213492cef085506d45" category="sidebar">开始使用 NetApp 和 VMware</block>
  <block id="6c30682e8603121e14abe8bab7bd88f3" category="sidebar">适用于 ONTAP 的 VMware 虚拟化</block>
  <block id="9ad0e51adb2a8a0d8dca6035769d9384" category="sidebar">适用于 VMware vSphere 管理员的 NetApp ONTAP</block>
  <block id="cadc483b04d069f993431e3ac64341bf" category="sidebar">基于虚拟卷和存储策略的管理</block>
  <block id="c0bf5949fe87e1e5caf42e4746cd0080" category="sidebar">采用 ONTAP 的 VMware vSphere 最佳实践</block>
  <block id="1918f1bc0ea91d0e5d8e37878d5ab562" category="sidebar">采用 NetApp ONTAP 9 的 VMware Site Recovery Manager</block>
  <block id="c4f0254bef611d7217287539f6e00feb" category="sidebar">VMware vSphere 自动化</block>
  <block id="86fbb5b9292be9b680987addfa410586" category="sidebar">传统块存储配置</block>
  <block id="805a0828a65bce146a58e3556113b017" category="sidebar">VMFS —光纤通道</block>
  <block id="26e113624e0cc32cbe2a26e1cde1da24" category="sidebar">VMFS —以太网光纤通道</block>
  <block id="8237af9088e8905784b1cb373e3a080d" category="sidebar">VMFS — iSCSI</block>
  <block id="94cab344ef7124917167bd5415b137cf" category="sidebar">VMFS —基于网络结构的 NVMe</block>
  <block id="348ee034e8868e5211a6501c09d4b0f0" category="sidebar">传统文件存储配置</block>
  <block id="614b997c0fb5abcd68fda0ab9ca05d69" category="sidebar">NFS — v3</block>
  <block id="912655e9dd57ab01b86691021957e61e" category="sidebar">NFS — v4.1</block>
  <block id="eaf99c5ef6885367fbd51d3ed4d278a9" category="sidebar">适用于 VMware vSphere 的 ONTAP 的新增功能</block>
  <block id="4ef25ea8e15d404e1bd11c25ce255abc" category="sidebar">VMware 私有云</block>
  <block id="f5432c45af90c44d8fac5740cc421187" category="sidebar">VMware 私有云（设计指南）</block>
  <block id="92207b595fc1450b86b6827bb8725824" category="sidebar">VMware 私有云（部署指南）</block>
  <block id="7a63e687b2ae311cefdeece48d8425dc" category="sidebar">VMware 验证设计</block>
  <block id="8cf9a132db10d8c5969c72ad5681cedf" category="sidebar">Red Hat 私有云</block>
  <block id="670268fc4f5d426c3a5c9162c4fa1456" category="sidebar">采用 Red Hat 的私有云（设计指南）</block>
  <block id="2f3a432618910562d81d2b66c8a7bcf9" category="sidebar">采用 Red Hat 的私有云（部署指南）</block>
  <block id="b4b6db97bb53327d5ba0ff4275247b35" category="sidebar">工作负载性能</block>
  <block id="ce006038ddc2a04747fe5a2c9c43b8f5" category="sidebar">演示和教程</block>
  <block id="645198fb2e03205a7f761aeaff8ef26f" category="sidebar">NetApp 解决方案自动化和 Ansible 入门</block>
  <block id="8619770bb94b4ac2d3ef4a8639dac91f" category="sidebar">设置 Ansible 控制节点（适用于基于 CLI 的部署）</block>
  <block id="47ac29a4a2e3c3e4581e035d792ee4ac" category="sidebar">适用于 RHEL/ CentOS 计算机</block>
  <block id="d74c216bc36310fb7cb045522918e606" category="sidebar">适用于 Ubuntu / Debian 计算机</block>
  <block id="073616205ad0e6bcb86754e5a151281a" category="sidebar">设置 AWX/Ansible 塔（适用于基于 AWX/ 塔式部署）</block>
  <block id="22d04ecae9fae88d0b8d4548a46a545b" category="sidebar">请求自动化</block>
  <block id="bdca592f24222e5064192bb9e2f9af6e" category="sidebar">FlexPod — NetApp Cisco 解决方案</block>
  <block id="0da8a1ebf94a3a1e650dbfbd01c69dd9" category="sidebar">FlexPod 解决方案技术内容</block>
  <block id="32591d046a055939af0d128133dc8606" category="sidebar">FlexPod 销售页面</block>
  <block id="9e5a59ca9aef030e74a725dab3fb6dcf" category="paragraph">借助 Astra Trident 和 Red Hat OpenShift ，用户可以在所配置的存储类上创建永久性卷的快照。通过此功能，用户可以创建卷的时间点副本，并使用该副本创建新卷或将同一卷还原到先前的状态。这样可以启用或支持从回滚到克隆再到数据还原等各种使用情形。</block>
  <block id="05cd0cf0962d29806df78d956f772deb" category="summary">Astra Trident 是一款开源且完全受支持的存储编排程序，适用于容器和 Kubernetes 分发版，包括 Red Hat OpenShift 。</block>
  <block id="0626021388a8dcc9b1e26b1209550b8d" category="paragraph">Astra Trident 具有快速的开发周期，就像 Kubernetes 一样，每年发布四次。</block>
  <block id="4281e618126caa3d322e78eafddba1b2" category="section-title">下载 Astra Trident</block>
  <block id="f71051465199267cbb540658a51e2957" category="paragraph">完成 Astra Trident 操作员安装后，您必须为所使用的特定 NetApp 存储平台配置后端。请访问以下链接继续设置和配置 Astra Trident 。</block>
  <block id="7eba670f1ea5a6e2fba9cff6b6399064" category="summary">此页面详细介绍了 MetalLB 负载平衡器的安装和配置说明。</block>
  <block id="79a2d2fa50d2b47d02c0e9dbdfadc07f" category="doc">安装 MetalLB 负载平衡器： Red Hat OpenShift 与 NetApp</block>
  <block id="0b2da9b5fe81e13e88c9a05981a95a9e" category="paragraph">此页面列出了 MetalLB 负载平衡器的安装和配置说明。</block>
  <block id="28a4ce0a0514d0f6a6596fc7a9c5e725" category="section-title">MetalLB 配置选项</block>
  <block id="04c22d763ca95631f9c8789eb2c6e68f" category="paragraph">根据 MetalLB 如何公布分配给 OpenShift 集群以外的负载平衡器服务的 IP 地址，它可在两种模式下运行：</block>
  <block id="92f98c10e5e0c86bcae2e9cb58b700e3" category="list-text">* 第 2 层模式。 * 在此模式下， OpenShift 集群中的一个节点将接管此服务的所有权，并对该 IP 的 ARP 请求做出响应，使其可在 OpenShift 集群之外访问。由于只有节点才公布 IP ，因此存在带宽瓶颈和较慢的故障转移限制。有关详细信息，请参见文档 <block ref="4a1d14cac7ed68a2326a050e0f1fed80" category="inline-link-macro-rx"></block>。</block>
  <block id="32333b5f74abf17bffedb6e7abeb7b5f" category="section-title">安装 MetalLB 负载平衡器</block>
  <block id="70bd399edc6825961c98dc29c2a49299" category="list-text">下载 MetalLB 资源。</block>
  <block id="d95ae9e4bae10f240e5577110ccbd7e6" category="list-text">编辑文件 `metallb.yaml` 并从控制器部署和主讲人 DemonSet 中删除 `spec.template.spec.securityContext` 。</block>
  <block id="39bb715a16a6f4c1ab16bc3ad3654f0b" category="paragraph">* 要删除的行： *</block>
  <block id="803519c541b237245faa09039c50dcaa" category="list-text">创建 `metallb-system` 命名空间。</block>
  <block id="980aff973ca30f65ec180530f40def06" category="list-text">创建 MetalLB CR 。</block>
  <block id="f87be5542b64a7f94a807699fd549479" category="list-text">在配置 MetalLB 扬声器之前，请授予扬声器 DemonSet 提升权限，使其能够执行使负载平衡器正常工作所需的网络配置。</block>
  <block id="53747915d8e79873876b08edb1ce3671" category="list-text">通过在 `metallb-system` 命名空间中创建 `ConfigMap` 来配置 MetalLB 。</block>
  <block id="2b1e829362de1a86eeb131cdc4619908" category="list-text">现在，在创建负载平衡器服务时， MetalLB 会为这些服务分配一个外部 IP ，并通过响应 ARP 请求来公布 IP 地址。</block>
  <block id="234ce2b9b198f2acf2193cbd06120ff2" category="admonition">如果要在 BGP 模式下配置 MetalLB ，请跳过上述步骤 6 并按照 MetalLB 文档中的操作步骤进行操作 <block ref="fed7545a9b4a70bb7835cc8b07492cba" category="inline-link-macro-rx"></block>。</block>
  <block id="0f07e63979900ab2abf6d2d578850a47" category="inline-link-macro">接下来：解决方案验证 / 使用情形：采用 NetApp 的 Red Hat OpenShift 。</block>
  <block id="3a29a96f08f4066b544db012326464ed" category="paragraph"><block ref="3a29a96f08f4066b544db012326464ed" category="inline-link-macro-rx"></block></block>
  <block id="dc7ec0964c3d39892e26bbe1593a79e2" category="list-text">安装在 OpenShift 集群上的 Astra Trident</block>
  <block id="e909486a42368b2659780687c3b4a31b" category="list-text">一种在 OpenShift 集群上配置的存储类，其中使用 Astra Trident 作为配置程序</block>
  <block id="a5369d9ec76321542413da21642ecc74" category="inline-link-macro">接下来： NetApp 存储集成概述</block>
  <block id="1a9b0bf11ebe49684776b9ffad6b4022" category="paragraph"><block ref="1a9b0bf11ebe49684776b9ffad6b4022" category="inline-link-macro-rx"></block></block>
  <block id="7df52e0f8b2cb2af1e107fde51d06945" category="paragraph">实时迁移是指在不停机的情况下将 VM 实例从 OpenShift 集群中的一个节点迁移到另一个节点的过程。要在 OpenShift 集群中执行实时迁移， VM 必须绑定到具有共享 ReadWriteMany 访问模式的 PVC 。在启用了 NFS 协议的 NetApp ONTAP 集群上配置了 SVM 的 Astra Trident 后端支持对 PVC 的共享 ReadWriteMany 访问。因此，对于从启用了 NFS 的 SVM 中由 Trident 配置的 StorageClasses 请求具有 PVC 的 VM ，可以在不停机的情况下进行迁移。</block>
  <block id="a0c55f3c40b8bb2d3e26f8d11ca73cbc" category="summary">本参考文档对通过安装程序配置的基础架构（ IPI ）在 NetApp 验证的多种不同数据中心环境中部署的 Red Hat OpenShift 解决方案进行了部署验证。同时，还详细介绍了如何利用 Astra Trident 存储编排程序来管理永久性存储，从而与 NetApp 存储系统实现存储集成。最后，我们还探讨并记录了许多解决方案验证和实际使用情形。</block>
  <block id="a2ac5b8f3de7c17418af38c828121a15" category="list-text">与 NetApp 存储和适用于 Kubernetes 的开源存储编排程序 Astra Trident 结合使用时，重点介绍 Red Hat OpenShift 的功能的实际配置和使用情形。</block>
  <block id="d3d8eb53a347d6ffc9fb157d9ac8398b" category="paragraph">采用 NetApp 解决方案的 Red Hat OpenShift 由以下主要组件组成：</block>
  <block id="2b8932b35916e8cecb6216546111322e" category="paragraph">Red Hat OpenShift 容器平台是一个完全受支持的企业 Kubernetes 平台。Red Hat 对开源 Kubernetes 进行了多项增强，可提供一个应用程序平台，其中包含所有组件，这些组件均已完全集成，可用于构建，部署和管理容器化应用程序。</block>
  <block id="9480fd8950471a46e6b29b165ba7ae41" category="paragraph">NetApp Astra 控制中心为有状态 Kubernetes 工作负载提供了一组丰富的存储和应用程序感知型数据管理服务，这些服务部署在内部环境中，并采用 NetApp 值得信赖的数据保护技术。</block>
  <block id="12c17259bf3f3b36e970c9e3abbc6b43" category="cell">NetApp Astra 控制中心</block>
  <block id="8d96276332b02a2ef892828c1d4fbab4" category="cell">应用程序感知型数据管理</block>
  <block id="8de59ec369b10820d0dd336b9765c79b" category="cell">NetApp Astra Trident</block>
  <block id="824bd84e05db30b27e73f839dae3b8e5" category="list-text">Astra Trident 文档</block>
  <block id="fe549ebd8a3f0fea1803cbaa947ef198" category="list-text">NetApp Astra 控制中心文档</block>
  <block id="ad837604b59ea6a89754d8e75f595c7b" category="inline-link"><block ref="ad837604b59ea6a89754d8e75f595c7b" category="inline-link-rx"></block></block>
  <block id="4af69e66dd3d513168080d177919dd21" category="paragraph"><block ref="4af69e66dd3d513168080d177919dd21" category="inline-link-rx"></block></block>
  <block id="68dc46cb39cdfc93e4593bbdd5c218cf" category="paragraph">大多数情况下， IPI 安装方法是首选方法，因为它可以为开发，测试和生产环境快速部署 OCP 集群。</block>
  <block id="3dbb1adfd571e8b44af1259f287d723f" category="paragraph">NetApp 拥有多个存储平台，这些平台符合我们的 Astra Trident Storage Orchestrator 标准，可为在 Red Hat OpenShift 上部署的应用程序配置存储。</block>
  <block id="0d1d64b47559f0c28c883e7e790b8363" category="summary">本节专门介绍实际用户在将此解决方案部署到生产环境中时可能需要执行的自定义设置，例如创建专用映像注册表或部署自定义负载平衡器实例。</block>
  <block id="2642cf401e87de575eae139953f87134" category="admonition">在本节中，我们介绍了一些高级配置选项，例如，使用第三方负载平衡器或创建专用注册表来托管自定义容器映像，这两个选项都是安装 NetApp Astra 控制中心的前提条件。</block>
  <block id="02b655f637212514780af2795fd74fc4" category="paragraph">以下页面介绍了有关在 Red Hat OpenShift with NetApp 解决方案中验证的高级配置选项的追加信息：</block>
  <block id="becc5334b7f3d2f4f57fc42cd287fd54" category="inline-link-macro">了解负载平衡器选项</block>
  <block id="22651dd64b4cd4c6d2742d1f8b126ae6" category="list-text"><block ref="22651dd64b4cd4c6d2742d1f8b126ae6" category="inline-link-macro-rx"></block></block>
  <block id="261bdcc1d2c24d15c43c5947e69ea9e6" category="inline-link-macro">配置私有映像注册表</block>
  <block id="c8db11b008075455562a8b598b31753c" category="list-text"><block ref="c8db11b008075455562a8b598b31753c" category="inline-link-macro-rx"></block></block>
  <block id="c4a7756da710a87248298a14bd0c21e6" category="paragraph"><block ref="c4a7756da710a87248298a14bd0c21e6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e7a6c3c568d213db46836511343c4965" category="list-text">运行 ONTAP 9.5 或更高版本的一个或多个 NetApp ONTAP 存储系统。</block>
  <block id="c927c560df09d5ca001f99cd07b14700" category="list-text">必须在每个 OpenShift 集群上配置一个 Trident 存储后端，其中包含一个由 ONTAP 集群提供支持的 SVM 。</block>
  <block id="67a56d728807272d2a01df50c6548f4f" category="list-text">在每个 OpenShift 集群上配置的默认 StorageClass ，其中使用 Astra Trident 作为存储配置程序。</block>
  <block id="dda5c1363ac68168c83f72fc2645f51f" category="list-text">必须在每个 OpenShift 集群上安装和配置负载平衡器，以实现负载平衡并公开 OpenShift 服务。</block>
  <block id="7dbcc72cc3a693b8f89b064e38ed7a23" category="list-text">必须配置私有映像注册表以托管 NetApp Astra Control Center 映像。</block>
  <block id="537f97bbcef0e2e67d6840aa5845aa65" category="list-text">您必须对 NetApp ONTAP 集群具有管理员访问权限。</block>
  <block id="0507b40de1fbd59b7a77b9054689e92b" category="list-text">一个管理工作站，其中安装了 Docker 或 podman ， tridentctl 以及 oc 或 kubectl 工具，并将其添加到 $path 中。</block>
  <block id="8c7c70cb991e0295e289054b79308c5d" category="section-title">安装 Astra 控制中心</block>
  <block id="ccab5cf8842d06d8d4e2f7f778657c4b" category="list-text">打开 tar ball 的包装并将工作目录更改为生成的文件夹。</block>
  <block id="abe31bcfb59f2265c2fb97dde407366c" category="open-title">podman</block>
  <block id="e83d8437c3befea11906e730883605bf" category="list-text">将 ‘re名称为组织 / 命名空间 / 项目的注册表 FQDN 导出为环境变量 "gregistry" 。</block>
  <block id="9acf317cba8637e151b8daae04e3e998" category="list-text">登录到注册表。</block>
  <block id="326c4e96ff06709dede5c03038f00e78" category="list-text">使文件可执行</block>
  <block id="ed85c18933b4b240788294af279f8624" category="list-text">执行 shell 脚本。</block>
  <block id="05b6053c41a2130afd6fc3b158bda4e6" category="open-title">Docker</block>
  <block id="a27cc132b2f3001f3e9df9c40dad4bfb" category="list-text">运行以下命令创建运算符。</block>
  <block id="685fe82295261a8902e709081b6c9599" category="list-text">创建一个专用命名空间以安装所有 Astra 控制中心资源。</block>
  <block id="d689979a6af0f5660231db187d212950" category="list-text">在为其创建的命名空间中创建 Astra 控制中心 CRD 。</block>
  <block id="9904a774f242f31a5ae37c8f75bda92b" category="list-text">检查 `Acc-operator-controller-manager` 日志以确保安装已完成。</block>
  <block id="cc2ba6bb5620162b64bafdca9f089718" category="inline-image-macro">Astra 控制中心登录</block>
  <block id="9af9ac4a3dd2ab221c2c5e2bf2aaee2a" category="paragraph"><block ref="9af9ac4a3dd2ab221c2c5e2bf2aaee2a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="90fbead2d113af1a2680805778908d98" category="inline-image-macro">Astra 控制中心强制更改密码</block>
  <block id="247e9fd0170ec4d9550de59ebd54787b" category="paragraph"><block ref="247e9fd0170ec4d9550de59ebd54787b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0dd5915bd7ca0f5d34df18bf7a183d50" category="inline-image-macro">Astra 控制中心创建用户</block>
  <block id="0ea309ed2f56bdc52dd6184b9043e683" category="paragraph"><block ref="0ea309ed2f56bdc52dd6184b9043e683" category="inline-image-macro-rx" type="image"></block></block>
  <block id="54936e9fda3da1e56a25c0056f054bce" category="inline-image-macro">Astra Control Center 添加许可证</block>
  <block id="02fd0244de299d20dfbaf9113b883030" category="paragraph"><block ref="02fd0244de299d20dfbaf9113b883030" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2044ecf5033cd4a7b9530b83075af99e" category="admonition">如果您在安装或配置 NetApp Astra 控制中心时遇到问题，可以参考已知问题的知识库<block ref="d775d2705bd260971e4d33c3d1094402" category="inline-link-rx"></block>。</block>
  <block id="9204faa817ce36107d052d3cd7c886c7" category="inline-link-macro">接下来：向 NetApp 注册 Red Hat OpenShift 集群： Red Hat OpenShift 。</block>
  <block id="8d167505bef11e381036abf56e79f457" category="paragraph"><block ref="8d167505bef11e381036abf56e79f457" category="inline-link-macro-rx"></block></block>
  <block id="8b14fb34f5313442bf2fdc4d80edc389" category="summary">本节专门介绍要使用 NetApp 自定义 Red Hat OpenShift 部署的用户的负载平衡器选项。</block>
  <block id="87beaa6eff6159cd7270b2a4e71c10a4" category="doc">了解负载平衡器选项： Red Hat OpenShift 与 NetApp</block>
  <block id="0aa971b4d33bdc82c500a35166e588c8" category="paragraph">但是，在某些情况下，应用程序需要部署和配置自定义负载平衡器才能公开相应的服务。其中一个示例是 NetApp Astra 控制中心。为了满足这一需求，我们评估了许多自定义负载平衡器选项。本节将介绍其安装和配置。</block>
  <block id="6914d9014ff3e2cb99cabff26b55a0bc" category="paragraph">以下页面提供了有关负载平衡器选项的追加信息，这些选项已在 Red Hat OpenShift with NetApp 解决方案中进行验证：</block>
  <block id="2b545f7c547a71eaeda9dcb451aea0c5" category="inline-link-macro">元 LB</block>
  <block id="eaefba36e93c0d0177c3de1143bd08dd" category="list-text"><block ref="eaefba36e93c0d0177c3de1143bd08dd" category="inline-link-macro-rx"></block></block>
  <block id="16dcf1808fc3c9a6f8342f97305d2ad6" category="doc">保护您的应用程序</block>
  <block id="58c0d00b6ee4c263f1fbe431b41eebf4" category="paragraph">在由 Astra 控制中心管理应用程序工作负载之后，您可以为这些工作负载配置保护设置。</block>
  <block id="59af79c7ab060b4cca322301a4729f0c" category="section-title">创建应用程序快照</block>
  <block id="c0cf3c0162d106c6ee24b7afa9b79575" category="paragraph">应用程序的快照会创建一个 ONTAP Snapshot 副本，该副本可用于根据该 Snapshot 副本将应用程序还原或克隆到特定时间点。</block>
  <block id="9101281f33d55e682b1a47a44251fa0e" category="list-text">要为应用程序创建快照，请导航到 "Apps" &gt; "Managed " 选项卡，然后单击要为其创建 Snapshot 副本的应用程序。单击应用程序名称旁边的下拉菜单，然后单击 Snapshot 。</block>
  <block id="c01290a8a623e36f9bcae85b910a3410" category="inline-image-macro">Astra 控制中心快照按钮</block>
  <block id="22434659793c78f48c7d1c7b4737d3e6" category="paragraph"><block ref="22434659793c78f48c7d1c7b4737d3e6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c5cb0ac31cda5107720fe3d594334e47" category="list-text">输入快照详细信息，单击 Review ，然后单击 Snapshot 。创建快照大约需要一分钟，在成功创建快照后，状态将变为可用。</block>
  <block id="f40e241f10f15eb6887acbc81fec81b0" category="inline-image-macro">Astra 控制中心创建快照</block>
  <block id="9e3f10f093546e36308573917ec43329" category="paragraph"><block ref="9e3f10f093546e36308573917ec43329" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1853746a915bea325b8b576237c24427" category="section-title">创建应用程序备份</block>
  <block id="91796648d42dbd448c6cbb2044cb92ba" category="paragraph">应用程序的备份可捕获应用程序的活动状态及其资源的配置，将其覆盖到文件中，并将其存储在远程对象存储分段中。</block>
  <block id="72e328bb06195897c7a644970c61d3a2" category="paragraph">要在 Astra 控制中心备份和还原受管应用程序，必须先为支持的 ONTAP 系统配置超级用户设置。为此，请输入以下命令。</block>
  <block id="6db82a24b17137378420e9fc7961d961" category="list-text">要在 Astra 控制中心创建受管应用程序的备份，请导航到应用程序 &gt; 受管选项卡，然后单击要备份的应用程序。单击应用程序名称旁边的下拉菜单，然后单击备份。</block>
  <block id="bc230776554b8a63af328cf9f01124e1" category="inline-image-macro">Astra 控制中心备份按钮</block>
  <block id="61b27a816b60763bb526e19339074f61" category="paragraph"><block ref="61b27a816b60763bb526e19339074f61" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dfade2835046a4412806486584077a75" category="list-text">输入备份详细信息，选择用于保存备份文件的对象存储分段，单击查看，然后在查看详细信息后，单击备份。根据应用程序和数据的大小，备份可能需要几分钟的时间，备份成功完成后，备份状态将变为可用。</block>
  <block id="e10781941ccd98298d2856b437b3fb4b" category="inline-image-macro">Astra 控制中心创建备份</block>
  <block id="b79feabe45fa973dbfc3b196e9a0b7ad" category="paragraph"><block ref="b79feabe45fa973dbfc3b196e9a0b7ad" category="inline-image-macro-rx" type="image"></block></block>
  <block id="39c5ec1870f7031498c4fa4634f5ca0a" category="section-title">还原或克隆应用程序</block>
  <block id="2939764b1667f58cd22dc123966f5634" category="paragraph">只需按一个按钮，即可将应用程序还原到发起集群或将其克隆到远程集群，以用于开发 / 测试或应用程序保护和灾难恢复。</block>
  <block id="2c2697937c7f0c07693378f58d4110c3" category="list-text">要还原或克隆应用程序，请导航到应用程序 &gt; 受管选项卡，然后单击相关应用程序。单击应用程序名称旁边的下拉菜单，然后单击克隆。</block>
  <block id="92955527b375720b2a586155a776c0ac" category="inline-image-macro">Astra Control Center 克隆按钮</block>
  <block id="4d69833fef921717aba648acb1677c81" category="paragraph"><block ref="4d69833fef921717aba648acb1677c81" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3055b7009a82841904eb36fa27fb7b31" category="list-text">输入新命名空间的详细信息，选择要将其还原或克隆到的集群，然后选择是要从现有快照还是从应用程序当前状态的备份还原或克隆此命名空间。查看详细信息后，单击 Review ，然后单击 Clone 。</block>
  <block id="c4293ef1955d52694e7d2288b637df1a" category="inline-image-macro">Astra 控制中心还原</block>
  <block id="9ad1cd254dba2b1c13c810078d947a3e" category="paragraph"><block ref="9ad1cd254dba2b1c13c810078d947a3e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c501040965cb5ca97cc675347e9ebfdf" category="list-text">当 Astra 控制中心在选定集群上创建应用程序时，新应用程序将进入 " 正在发现 " 状态。在 Astra 安装并检测到应用程序的所有资源后，该应用程序将进入可用状态。</block>
  <block id="9ff3c5458e4a8facc6e7c25656a3baf7" category="inline-image-macro">发现 Astra Control Center 新应用程序</block>
  <block id="32fc08fbd285649fbc9f888756113f95" category="paragraph"><block ref="32fc08fbd285649fbc9f888756113f95" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d19de154f02438c6d6918a4e016c7c62" category="doc">选择要保护的应用程序</block>
  <block id="501195b19cb60bfec4c2e4899a2a460c" category="paragraph">注册 Red Hat OpenShift 集群后，您可以通过 Astra 控制中心发现已部署的应用程序并对其进行管理。</block>
  <block id="a022d74e2b8b62dd9f1caa37a51aa3f3" category="section-title">管理应用程序</block>
  <block id="d8c780951f3271e7d72b116e5f41d46b" category="list-text">在将 OpenShift 集群和 ONTAP 后端注册到 Astra 控制中心后，控制中心将自动开始发现所有命名空间中使用使用使用指定 ONTAP 后端配置的 storageclass 的应用程序。</block>
  <block id="3b5963749d054f288f27dfb2f20d0370" category="inline-image-macro">发现 Astra 控制中心应用程序</block>
  <block id="a78e618a70881e5c5dda311aaa61c250" category="paragraph"><block ref="a78e618a70881e5c5dda311aaa61c250" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0c46442de8c982973aeee99a9441b746" category="list-text">导航到应用程序 &gt; 已发现，然后单击要使用 Astra 管理的应用程序旁边的下拉菜单。然后单击管理。</block>
  <block id="22d84cdf10d4c1059d68b1ab7da5b375" category="inline-image-macro">Astra 控制中心管理应用程序</block>
  <block id="4afca1ab36db499d54b08ff38dff8a5c" category="paragraph"><block ref="4afca1ab36db499d54b08ff38dff8a5c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2d694cfe5907a4790ea939388a8cfd25" category="list-text">此应用程序将进入可用状态，并可在 "Apps" 部分的 "Managed " 选项卡下查看。</block>
  <block id="dc496d6799e0c6ab3bdfdbdc6a086b48" category="inline-image-macro">提供 Astra 控制中心应用程序</block>
  <block id="872adedc4ac847cec0aa8fb9299d32e5" category="paragraph"><block ref="872adedc4ac847cec0aa8fb9299d32e5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7bd1cbf9d5bf3b10ff24ebec6fb4d38c" category="list-text"><block ref="7bd1cbf9d5bf3b10ff24ebec6fb4d38c" category="inline-link-rx"></block></block>
  <block id="472d13eb415cd6107aeef3a1ae6cd705" category="summary">NetApp 提供了许多产品，可帮助客户在基于容器的环境中编排和管理持久数据，例如 Red Hat OpenShift 。</block>
  <block id="ebfc0e639726a366f8eb5ac86bb7cc43" category="paragraph"><block ref="ebfc0e639726a366f8eb5ac86bb7cc43" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cd351007d4a671a321b6881f730d0dc3" category="paragraph">以下页面介绍了有关已在 Red Hat OpenShift with NetApp 解决方案中针对应用程序和永久性存储管理进行验证的 NetApp 产品的追加信息：</block>
  <block id="77665e15c3691d78f1b4eebb6fff579a" category="list-text"><block ref="77665e15c3691d78f1b4eebb6fff579a" category="inline-link-macro-rx"></block></block>
  <block id="19ebd5ffa30d784aa0f379af66f810e9" category="list-text"><block ref="19ebd5ffa30d784aa0f379af66f810e9" category="inline-link-macro-rx"></block></block>
  <block id="afa49872fb8ae001174e4c8f2cc47208" category="inline-link-macro">接下来： NetApp Astra 控制中心概述</block>
  <block id="22fd530ae76b4bbe50669b9a4d5b72d7" category="paragraph"><block ref="22fd530ae76b4bbe50669b9a4d5b72d7" category="inline-link-macro-rx"></block></block>
  <block id="f43b03517a6961d80a7ccf64fa8dc4da" category="admonition">以下说明在 Trident 21.01 安装中进行了屏蔽，但手动部署 Trident 操作员的步骤也适用于当前 21.04 版本。</block>
  <block id="484e821be3ffc9c7209f7a2d55f80ca1" category="list-text">将安装归档下载到管理工作站并提取内容。Trident 的当前版本为 21.04 ，可以下载<block ref="c71d2968b50c4cfbb1a3b9207e6166b5" category="inline-link-rx"></block>。</block>
  <block id="f8644c8b6c2cc01b16c99747131cf17d" category="list-text">如果不存在 Trident 命名空间，请使用提供的清单在集群中创建一个。</block>
  <block id="ace016847ab0132b3549f2af92bb43d0" category="list-text">启用 Trident 与 NetApp HCI 解决方案和 Anthos 集成的下一步是创建一个后端，以便与存储系统进行通信。NetApp 已通过 Anthos-ready 合作伙伴存储验证计划针对多种不同的协议进行了验证。这样， NetApp Trident 便可通过 ONTAP 平台在 Anthos 环境中为 NFS 提供支持，并通过 NetApp HCI 中使用的 ONTAP 和 Element 存储提供 iSCSI 支持。</block>
  <block id="4d469510d5796544d36407facbbd95a7" category="list-text">下载的安装归档中的 `sample-input` 文件夹提供了示例后端文件。将 `backend-solidfire.json` 复制到您的工作目录中并对其进行编辑，以提供有关存储系统环境的详细信息。对于基于 Element 的 iSCSI 连接，复制并编辑 `backend-solidfire.json` 文件。</block>
  <block id="45ef73e3b96b2f670e88a2679996b257" category="list-text">必须对此文件进行的唯一编辑是，为新创建的后端存储驱动程序的名称定义 `backendType` 值。另请注意在后续步骤中必须引用的名称字段值。</block>
  <block id="810a039d1a8524388b75a0fe8d837afc" category="summary">要使 Astra 控制中心能够管理您的工作负载，您必须先注册 Red Hat OpenShift 集群。</block>
  <block id="3557f7a93216446476c40d54e0426c40" category="doc">将 Red Hat OpenShift 集群注册到 Astra 控制中心</block>
  <block id="349c99fe6f384da92e5b8289b828791c" category="section-title">注册 Red Hat OpenShift 集群</block>
  <block id="c179429ab818c9d0cca3d1db55f788bf" category="list-text">第一步是将 OpenShift 集群添加到 Astra 控制中心并对其进行管理。转至集群并单击添加集群，上传 OpenShift 集群的 kubeconfig 文件，然后单击选择存储。</block>
  <block id="8dfc7d6b819f8c17b51391e3b3159add" category="inline-image-macro">Astra 控制中心创建集群</block>
  <block id="7470624615914e8e3d5fdf4ea1aa31de" category="paragraph"><block ref="7470624615914e8e3d5fdf4ea1aa31de" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c7d9a690231a2d896f69e9b45c9ff4a1" category="admonition">可以生成 kubeconfig 文件，以便使用用户名和密码或令牌进行身份验证。令牌将在一段有限的时间后过期，并且可能会使注册的集群无法访问。NetApp 建议使用具有用户名和密码的 kubeconfig 文件将 OpenShift 集群注册到 Astra 控制中心。</block>
  <block id="cab7d2cb072914c0a5a89baab41d38e8" category="inline-image-macro">Astra 控制中心创建集群选择存储</block>
  <block id="68ac91074dd3b4e5514e5f56a6c9c756" category="paragraph"><block ref="68ac91074dd3b4e5514e5f56a6c9c756" category="inline-image-macro-rx" type="image"></block></block>
  <block id="420b9c40f78cc4825914319af51801b9" category="inline-image-macro">提供 Astra 控制中心集群</block>
  <block id="1b017a62213661e1ed3c5c581fcf74a2" category="paragraph"><block ref="1b017a62213661e1ed3c5c581fcf74a2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8d01de34ef9b9b934d18009a1e3273a9" category="list-text">将 ONTAP 集群作为存储资源导入，以便由 Astra 控制中心作为后端进行管理。将 OpenShift 集群添加到 Astra 并配置了 storageclass 后，它会自动发现并检查支持该 storageclass 的 ONTAP 集群，但不会将其导入到要管理的 Astra 控制中心中。</block>
  <block id="781ffd1df517a65b302412f53de974da" category="inline-image-macro">Astra 控制中心后端发现</block>
  <block id="1fcc7977dffdc8fd8fc53582c67da895" category="paragraph"><block ref="1fcc7977dffdc8fd8fc53582c67da895" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4da0c23c38cf0da34e1e6660ff74542b" category="inline-image-macro">Astra 控制中心创建后端</block>
  <block id="69dbaffc2661024ee0b5095bc3674f60" category="paragraph"><block ref="69dbaffc2661024ee0b5095bc3674f60" category="inline-image-macro-rx" type="image"></block></block>
  <block id="edb4425c04926a17b6ff9a4a2ecdc669" category="list-text">添加后端后，状态将更改为 Available 。现在，这些后端可提供有关 OpenShift 集群中的永久性卷以及 ONTAP 系统上的相应卷的信息。</block>
  <block id="92c130f9be24925c7dee36f7580ea347" category="inline-image-macro">提供 Astra 控制中心后端</block>
  <block id="e9f487b0aad6779edbf50c6092477bd5" category="paragraph"><block ref="e9f487b0aad6779edbf50c6092477bd5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f2d10d92dc9d83e3cf3514e8e883e5cb" category="list-text">要使用 Astra 控制中心在 OpenShift 集群之间进行备份和还原，您必须配置支持 S3 协议的对象存储分段。目前支持的选项包括 ONTAP S3 ， StorageGRID 和 AWS S3 。为此，我们将配置一个 AWS S3 存储分段。转到 " 分段 " ，单击 " 添加分段 " ，然后选择 " 通用 S3" 。输入有关 S3 存储分段和凭据的详细信息以访问它，单击复选框 " 将此存储分段设置为云的默认存储分段 " ，然后单击添加。</block>
  <block id="6910cb9051734be0129cb1e7dd84ce5c" category="inline-image-macro">Astra 控制中心创建存储分段</block>
  <block id="2786d0b632389f7cbd6c4e67fba0061f" category="paragraph"><block ref="2786d0b632389f7cbd6c4e67fba0061f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2ed5156911e542a4d3d64a6e160f6446" category="image-alt">Red Hat OpenShift 集群上的多租户，采用由 NetApp ONTAP 提供支持的 Astra Trident</block>
  <block id="086e6c16e3fe8e13c336612ef636aa02" category="list-text">Astra Trident</block>
  <block id="bf4e72937ad57bd2f780561c81d25d53" category="paragraph">在由 NetApp ONTAP 提供支持的 Astra Trident 的协助下， OpenShift 虚拟化还支持某些功能，例如实时 VM 迁移， VM 磁盘克隆， VM 快照等。这些工作流的示例将在本文档后面的相应章节中进行讨论。</block>
  <block id="d55adbfc40b7bcdb0606eb0bd4d88cae" category="summary">本节专门介绍如何创建和配置由 Astra Trident 提供的永久性存储提供支持的私有映像注册表。</block>
  <block id="9c864113b9e4202e111b818a53d4f506" category="inline-link">Quay.io</block>
  <block id="4b4141875f954447d204e6f73d93e2a0" category="inline-link">DockerHub</block>
  <block id="508888fd9f92f35e5edd97bd8083e289" category="paragraph">对于大多数 Red Hat OpenShift 部署，请使用等公有注册表<block ref="b9eeebbe4a68a648d570ea2173e5ef99" category="inline-link-rx"></block> 或<block ref="0252a6b70cc5017fa1445a78532155b6" category="inline-link-rx"></block> 满足大多数客户的需求。但是，有时客户可能希望托管自己的私有或自定义映像。</block>
  <block id="00a3f196d7f27a1f41f5d6a7f48759d0" category="paragraph">本操作步骤介绍了如何创建私有映像注册表，该注册表由 Astra Trident 和 NetApp ONTAP 提供的永久性卷提供支持。</block>
  <block id="d9d5e29b1b83dd9c215f5ea158ca2475" category="admonition">Astra 控制中心需要注册表来托管 Astra 容器所需的映像。以下部分介绍了在 Red Hat OpenShift 集群上设置专用注册表以及推送支持安装 Astra 控制中心所需的映像的步骤。</block>
  <block id="86e93d266c168d718105c402f43fc91e" category="list-text">然后，可以将此提取密钥修补到服务帐户或在相应的 POD 定义中引用。</block>
  <block id="18f8bf05a7a278e63d921de74d2a5966" category="list-text">将 TLS 证书添加到 Docker 客户端。</block>
  <block id="fe70522102670f75ed2fff361701d056" category="paragraph">本参考文档对通过安装程序配置的基础架构（ IPI ）在 NetApp 验证的多种不同数据中心环境中部署的 Red Hat OpenShift 解决方案进行了部署验证。同时，还详细介绍了如何利用 Astra Trident 存储编排程序管理永久性存储，以及利用 NetApp Astra 控制中心管理和保护有状态应用程序，从而实现与 NetApp 存储系统的存储集成。最后，我们还探讨并记录了许多解决方案验证和实际使用情形。</block>
  <block id="4a56de086437c8a56c22bccd4e7ed9ba" category="paragraph">通过支持 Astra Trident 的卷 CSI 克隆功能，可以在 OpenShift 中克隆现有虚拟机。通过 CSI 卷克隆，可以使用现有 PVC 作为数据源并通过复制其 PV 来创建新的 PVC 。创建新的 PVC 后，它将作为一个单独的实体运行，并且不会与源 PVC 建立任何链接或依赖关系。</block>
  <block id="9057e692817874e4c563dec1fa8c1700" category="paragraph">通过关闭虚拟机克隆现有虚拟机是一项原生 OpenShift 功能，该功能在 Astra Trident 的支持下实施。要克隆虚拟机，请完成以下步骤。</block>
  <block id="023cd4d7ed373df0d803d414e2e452bf" category="cell">2021年8月5日</block>
  <block id="afb6b7f715f1bf6492efb8f3c279ddd7" category="cell">为基于 Red Hat OpenShift 的 NetApp Astra 控制中心 NVA-1160 增加了新的技术集成</block>
  <block id="306a916d056a0d0a4b898b9dca9692ee" category="inline-link-macro">基于 Red Hat OpenShift 的 NetApp Astra 控制中心</block>
  <block id="20c49a9a4d903fa259d4f8820b3755d2" category="cell"><block ref="20c49a9a4d903fa259d4f8820b3755d2" category="inline-link-macro-rx"></block></block>
  <block id="7249cfd7bf66d557eb244611df9fad26" category="sidebar">9. 下载并安装 Astra Trident</block>
  <block id="82ebdc178ed6bd9adb7b66c2edfb70d0" category="sidebar">NetApp 存储系统概述</block>
  <block id="aef2d8db139dd41c9ae6c878ab92ae75" category="sidebar">NetApp 存储集成概述</block>
  <block id="5f6fc3deb668cb75e9e6c8932620df6a" category="sidebar">NetApp Astra 控制中心概述</block>
  <block id="846665f4ec19bffa9d9a8c3937c2f9fd" category="sidebar">注册 Red Hat OpenShift 集群</block>
  <block id="b1dbcb80c89b000949ef64c6d6d6c42b" category="sidebar">选择要保护的应用程序</block>
  <block id="2913361a2ab3fddb4242f1761d4a6e38" category="sidebar">保护您的应用程序</block>
  <block id="b066abadb76f5e6776aa1e7cfdf56b38" category="sidebar">NetApp Astra Trident 概述</block>
  <block id="938033783443233af5517c828deb6d1e" category="sidebar">OpenShift 的高级配置选项</block>
  <block id="8252479af4b1df9b77ceaf67fa8cd07d" category="sidebar">创建私有映像注册表</block>
  <block id="e9c44bbfd795a5d63d74c6a77afee70d" category="summary">法律声明提供对版权声明、商标、专利等的访问。</block>
  <block id="30d965eef5ba25c6b9998ae38270b43e" category="doc">法律声明</block>
  <block id="6016a2b341113bf496b719905398ecd2" category="section-title">版权</block>
  <block id="09e95b77ffe81fe465a83ba99efad5c8" category="paragraph"><block ref="09e95b77ffe81fe465a83ba99efad5c8" category="inline-link-rx"></block></block>
  <block id="126a02652da6de02962cf1b654fd6376" category="section-title">商标</block>
  <block id="c4ce4761e466527d26b3e3d5ed1006fd" category="paragraph">NetApp 、 NetApp 徽标和 NetApp 商标页面上列出的标记是 NetApp 、 Inc. 的商标。其他公司和产品名称可能是其各自所有者的商标。</block>
  <block id="7aa531e9acfe2b98e34d2c92fe9846ff" category="paragraph"><block ref="7aa531e9acfe2b98e34d2c92fe9846ff" category="inline-link-rx"></block></block>
  <block id="be89498d2f8a22ce47c02ba9795fe2af" category="section-title">专利</block>
  <block id="d0b19d36be2c5f16e9aef46c8a452d3d" category="paragraph">有关 NetApp 拥有的专利的最新列表，请访问：</block>
  <block id="d7f1fbcf9ce4e42f705add574d262b2c" category="paragraph"><block ref="d7f1fbcf9ce4e42f705add574d262b2c" category="inline-link-rx"></block></block>
  <block id="56c34c6410dd45c5cec44149ad0ce037" category="section-title">隐私政策</block>
  <block id="fc248f74f5e36542f7f5627b8610e9a3" category="paragraph"><block ref="fc248f74f5e36542f7f5627b8610e9a3" category="inline-link-rx"></block></block>
  <block id="c0227cef6f07a8cd2ac72f2945b031aa" category="section-title">开放源代码</block>
  <block id="9b73989307c1975dfa4d5e1581e4afe8" category="paragraph">通知文件提供有关 NetApp 软件中使用的第三方版权和许可证的信息。</block>
  <block id="d648f2a68a54fd1b3329efc3cf24d29c" category="sidebar">法律声明</block>
  <block id="5328ed3b5c6e4726166e04c16c2e5581" category="summary">本节介绍如何在熊猫中加载 Criteo Click Logs Day 15 以及如何训练一个 sc科学 学习随机林模型。在此示例中，我们使用 dask cuDF 执行了 DataFrame 加载，并在 dask cuML 中训练了一个随机林模型。</block>
  <block id="a0432b74d7d4d2ad68e93e947654c865" category="doc">在 dask 中加载第 15 天，训练一个 dask cuML 随机林模型</block>
  <block id="7c784438423fe1bee9ab4f91a8fd7559" category="inline-link-macro">Previous ： Load Criteo click Logs Day 15 in 熊猫并训练一个 sc科学 学习随机林模型。</block>
  <block id="5d5b75a952d74a7d4520c521956b9d7e" category="paragraph"><block ref="5d5b75a952d74a7d4520c521956b9d7e" category="inline-link-macro-rx"></block></block>
  <block id="78dc33cd9d496e2466a0c1e2ba09ab3f" category="inline-link-macro">" 培训时间比较。 "</block>
  <block id="4a2764258721dd882c9ec28454963797" category="paragraph">按照与上一节类似的方式，在熊猫中加载 Criteo 单击 Logs Day 15 ，然后训练一个 cscit-Learn 随机林模型。在此示例中，我们使用 dask cuDF 执行了 DataFrame 加载，并在 dask cuML 中训练了一个随机林模型。我们比较了本节中培训时间和规模的差异 <block ref="8d6c01ed5b9db5301efeb6183c858b76" category="inline-link-macro-rx"></block></block>
  <block id="356d8553da3749641cb731d318c85b0c" category="section-title">Criteo_dask_rf.ipynb</block>
  <block id="2f4f1a139be92d2b17647025ff8630ab" category="paragraph">此笔记本电脑将导入 `NumPy` ， `累积` 和必要的 `dask` 库，如以下示例所示：</block>
  <block id="7b871613dade772ae668d694698383bf" category="paragraph">启动 dask 客户端（）。</block>
  <block id="3e9277d3d0f0519292426b933e52f232" category="paragraph">如果集群配置正确，您可以查看工作节点的状态。</block>
  <block id="d6b257c355ced1525e4967c96b62b83e" category="paragraph">在我们的 AKS 集群中，将显示以下状态：</block>
  <block id="d94a77691c281e8bf418635fea6ca580" category="paragraph"><block ref="d94a77691c281e8bf418635fea6ca580" category="inline-image-macro-rx" type="image"></block></block>
  <block id="073b2194006d8da73b5f74f3d7224d76" category="paragraph">请注意， dask 采用了延迟执行模式： dask 不是即时执行处理代码，而是构建定向的环状图（ DAG ）执行。DAG 包含一组任务及其互动，每位员工都需要执行这些任务。此布局意味着，只有在用户指示 dask 以某种方式执行任务后，这些任务才会运行。使用 dask ，您有三个主要选项：</block>
  <block id="a40049c3d7270ce955d2023f8e2015dc" category="list-text">在 DataFrame 上调用 compute （）。 * 此调用将处理所有分区，然后将结果返回给计划程序，以便最终聚合和转换为 cuDF DataFrame 。除非计划程序节点内存不足，否则应谨慎使用此选项，并且仅在结果大幅减少时使用。</block>
  <block id="30e170dbe1dd223491e1a822605da52d" category="list-text">* 在 DataFrame 上调用 persiste（ ）。 * 此调用执行图形，但它不会将结果返回到计划程序节点，而是在整个集群的内存中保留这些结果，以便用户可以在管道中重复使用这些中间结果，而无需重新运行相同的处理。</block>
  <block id="ca013764f3f6faeab137d2d529dba598" category="list-text">* 在 DataFrame 上调用 head （）。 * 与 cuDF 一样，此调用会将 10 条记录返回到计划程序节点。此选项可用于快速检查 DataFrame 是否包含所需的输出格式，或者记录本身是否合理，具体取决于您的处理和计算结果。</block>
  <block id="7ac60f98a199ceae63010c7802a9aefa" category="paragraph">因此，除非用户调用其中任一操作，否则员工将处于闲置状态，等待计划程序启动处理。这种延迟执行模式在现代并行和分布式计算框架（如 Apache Spark ）中很常见。</block>
  <block id="d887d6a29f39f14cec0f83c5b02c42f8" category="paragraph">下一段使用 dask cuML 进行分布式 GPU 加速计算，以此训练随机林模型，并计算模型预测准确性。</block>
  <block id="de76ff3258bd3001f89804efae30da38" category="inline-link-macro">下一步：使用原生任务流信息板监控 dask 。</block>
  <block id="5db30f2a693de098d03dec622875beec" category="paragraph"><block ref="5db30f2a693de098d03dec622875beec" category="inline-link-macro-rx"></block></block>
  <block id="2e240897109c5037e05afe0bf035d177" category="inline-link-macro">上一篇：结论。</block>
  <block id="d3202b7eec66185e032fcad76b4c2aa3" category="paragraph"><block ref="d3202b7eec66185e032fcad76b4c2aa3" category="inline-link-macro-rx"></block></block>
  <block id="27a5a0a02525fbb66788e119b829fe28" category="list-text">Azure NetApp Files</block>
  <block id="45bd81d391ee3bd9831a237bff32b2c1" category="list-text">Azure NetApp Files 的解决方案架构页面</block>
  <block id="57b815cb2da0c842a09d5ef586792c0a" category="inline-link"><block ref="57b815cb2da0c842a09d5ef586792c0a" category="inline-link-rx"></block></block>
  <block id="02508d077a7c6fbe1035568c37610d22" category="paragraph"><block ref="02508d077a7c6fbe1035568c37610d22" category="inline-link-rx"></block></block>
  <block id="f42fced7b7a9bfef49a209632add6f80" category="list-text">适用于容器的 Trident 持久存储：</block>
  <block id="158e66cfa121c58b072656402170ca60" category="list-text">Azure NetApp Files 和 Trident</block>
  <block id="d9fe72ef646d82c8372b45ff009726a2" category="inline-link"><block ref="d9fe72ef646d82c8372b45ff009726a2" category="inline-link-rx"></block></block>
  <block id="e3c781df174a80c19c70a938b96db93a" category="paragraph"><block ref="e3c781df174a80c19c70a938b96db93a" category="inline-link-rx"></block></block>
  <block id="145f2a04d99fdbd7a450ef83e82d471b" category="list-text">dask 和 rapids ：</block>
  <block id="df5eb1591e808e358e02221e1e0111e6" category="list-text">dask</block>
  <block id="7db6639777894f081a3d7c055b97900a" category="inline-link"><block ref="7db6639777894f081a3d7c055b97900a" category="inline-link-rx"></block></block>
  <block id="4846c68fb34aec3b1b7b7de96d27e71f" category="paragraph"><block ref="4846c68fb34aec3b1b7b7de96d27e71f" category="inline-link-rx"></block></block>
  <block id="41563f9620e92fbfd1e105e32ac297e4" category="list-text">安装 dask</block>
  <block id="8659b02378fc9b47aac4428f69411abc" category="inline-link"><block ref="8659b02378fc9b47aac4428f69411abc" category="inline-link-rx"></block></block>
  <block id="972dffc891589785367dd3581a5abcef" category="paragraph"><block ref="972dffc891589785367dd3581a5abcef" category="inline-link-rx"></block></block>
  <block id="3ba7abeba4fd0f5d5ca9072155319afd" category="list-text">Dask API</block>
  <block id="f7673aa4f6b36ba9952cef7c98115776" category="inline-link"><block ref="f7673aa4f6b36ba9952cef7c98115776" category="inline-link-rx"></block></block>
  <block id="d43a23bd530cae7ba37a2e0ed6513bad" category="paragraph"><block ref="d43a23bd530cae7ba37a2e0ed6513bad" category="inline-link-rx"></block></block>
  <block id="1bfabf7fb7bf05567331dfc3d20c4921" category="list-text">DASK 机器学习</block>
  <block id="9e480c1539fe5b14bbbcefb9676dc031" category="inline-link"><block ref="9e480c1539fe5b14bbbcefb9676dc031" category="inline-link-rx"></block></block>
  <block id="d05f63d77306100c615132f350f3fafe" category="paragraph"><block ref="d05f63d77306100c615132f350f3fafe" category="inline-link-rx"></block></block>
  <block id="90223e93e145939c9954970520e1767a" category="list-text">Dask 分布式诊断</block>
  <block id="e7252fe9d67234e05be7dc251c48cf74" category="inline-link"><block ref="e7252fe9d67234e05be7dc251c48cf74" category="inline-link-rx"></block></block>
  <block id="925c8b588cf5ae5fc486494a21fba8ac" category="paragraph"><block ref="925c8b588cf5ae5fc486494a21fba8ac" category="inline-link-rx"></block></block>
  <block id="d97adf46c9b097cad5eff54e3b65a21f" category="paragraph"><block ref="d97adf46c9b097cad5eff54e3b65a21f" category="inline-link-rx"></block></block>
  <block id="528d52adf23d34a248f0b9bf684c1832" category="paragraph"><block ref="528d52adf23d34a248f0b9bf684c1832" category="inline-link-rx"></block></block>
  <block id="a43c7ca8f7e6a4a034f6a940ec7566f5" category="inline-link-macro">下一步：版本历史记录。</block>
  <block id="5f751f93279ebf35ea83b9aa80ef02df" category="paragraph"><block ref="5f751f93279ebf35ea83b9aa80ef02df" category="inline-link-macro-rx"></block></block>
  <block id="7580f940c2b73a449943bf14cfdb743e" category="summary">此页面介绍了 Azure NetApp Files 云资源的配置。</block>
  <block id="9ab9ef31301ca94d2090a6ac7e5141f0" category="doc">云资源要求</block>
  <block id="1cee510209f529b7ddd8911bbc6e3ee2" category="inline-link-macro">先前版本：软件要求。</block>
  <block id="abab2b04b3822b72d0eeb7b61dd84730" category="paragraph"><block ref="abab2b04b3822b72d0eeb7b61dd84730" category="inline-link-macro-rx"></block></block>
  <block id="00130c4c20e30be7264c0ff0d085261b" category="section-title">配置 Azure NetApp Files</block>
  <block id="d696f60435e09b1c41d1db77b458999b" category="inline-link">快速入门：设置 Azure NetApp Files 并创建 NFS 卷</block>
  <block id="b955f251da04c8c868b22cbe7663a4f5" category="paragraph">按照中所述配置 Azure NetApp Files<block ref="f8525997ced72f3cfd70e1aecf287af9" category="inline-link-rx"></block>。</block>
  <block id="4ee734214d7dd4e522f2aab3d8e3d349" category="paragraph">您可以继续阅读 " 为 Azure NetApp Files 创建 NFS 卷 " 一节，因为您要通过 Trident 创建卷。在继续之前，请完成以下步骤：</block>
  <block id="2a304a1348456ccd2234cd71a81bd338" category="inline-link">链接。</block>
  <block id="b1d13ce152415787185b9f596f9635e1" category="list-text">注册 Azure NetApp Files 和 NetApp 资源提供商（通过 Azure Shell ）（<block ref="7a85c4f09a460b2978e2b516b5474576" category="inline-link-rx"></block>）。</block>
  <block id="4c21364a09ae3c9dab758e383fcae62d" category="list-text">在 Azure NetApp Files 中创建帐户（<block ref="27e1abf4e17aeb1c0d418f5fee2f2b5f" category="inline-link-rx"></block>）。</block>
  <block id="97f203356061531d1acaf022df0d4c3c" category="list-text">设置容量池（至少 4 TB 标准版或高级版，具体取决于您的需要）（<block ref="16f1daa909eef5f1fe1f552d6b28d086" category="inline-link-rx"></block>）。下表列出了在云中设置的网络配置要求。dask 集群和 Azure NetApp Files 必须位于同一个 Azure 虚拟网络（ vNet ）或对等 vNet 中。</block>
  <block id="ddcf50c29294d4414f3f7c1bbc892cb5" category="cell">Resources</block>
  <block id="3e19b1ddc4033d0c6c439dad720f730d" category="cell">类型 / 版本</block>
  <block id="21b6b0c072968b7235d21d8ec72be5dc" category="cell">代理节点</block>
  <block id="e5262abb96ddec17ecbca3557e70ea26" category="cell">3 个 Standard_DS2_v2</block>
  <block id="c64f4eaffc33134095fd3105b3d63832" category="cell">GPU 节点</block>
  <block id="11fed615c3da90add7abe544e965fa14" category="cell">3 个 Standard_NC6s_v3</block>
  <block id="238f4027146f2469c7d1209e594471e4" category="cell">标准容量池</block>
  <block id="9163995275052e5abd777ae389b15dfd" category="cell">容量（以 TB 为单位）</block>
  <block id="a6a0cae93cb8ecdef629c6de5f05989c" category="inline-link-macro">下一步：点击速率预测用例摘要。</block>
  <block id="a5efee0d52d97830d344cded6ac0bf5c" category="paragraph"><block ref="a5efee0d52d97830d344cded6ac0bf5c" category="inline-link-macro-rx"></block></block>
  <block id="53ffd6a9e0049c8cbf7f940c2b8bc793" category="inline-link-macro">先前版本：使用 NetApp DataOps 工具包的数据集和型号版本控制。</block>
  <block id="01643859d7e5dff013d2acd6a02af35e" category="paragraph"><block ref="01643859d7e5dff013d2acd6a02af35e" category="inline-link-macro-rx"></block></block>
  <block id="eee817389517c17ec810d52f22a8222d" category="paragraph"><block ref="eee817389517c17ec810d52f22a8222d" category="inline-link-macro-rx"></block></block>
  <block id="4b022a47bb6a38cb1b05a5cbec618ccd" category="inline-link-macro">先前版本：对等 AKS vNet 和 Azure NetApp Files vNet 。</block>
  <block id="fec5fee1adce318e5e2f9ce6a66ccc02" category="paragraph"><block ref="fec5fee1adce318e5e2f9ce6a66ccc02" category="inline-link-macro-rx"></block></block>
  <block id="999aa3cd55c654beafcfa7653b65d339" category="paragraph">要使用 Helm 安装 Trident ，请完成以下步骤：</block>
  <block id="36cd38f49b9afa08222c0dc9ebfe35eb" category="inline-link">source</block>
  <block id="9c5f8711af47a869d4ef82db9e55eda5" category="list-text">安装 Helm （有关安装说明，请访问<block ref="adf15389dc6d5fe4bd9024075437080f" category="inline-link-rx"></block>）。</block>
  <block id="f7c078ec85c617d77dfa95c309e4df1b" category="list-text">下载并解压缩 Trident 20.01.1 安装程序。</block>
  <block id="5729bb69ffc852a2e2757d743b7cb833" category="list-text">将 `tridentctl` 复制到系统中的目录 ` $path` 。</block>
  <block id="d7fc4d1537e4623fdcebe9b8ba333cbb" category="list-text">使用 Helm （<block ref="cbc920955683fc4acb62f9ea7099333f" category="inline-link-rx"></block>）：</block>
  <block id="f515d7de4d597c284ba8042f699a0eab" category="list-text">将目录更改为 `helm` 目录。</block>
  <block id="6ee4094e2c3617e3e298ec79f9dc2898" category="list-text">检查 Trident Pod 的状态。</block>
  <block id="30f93734da9765d3bc7d49ca89932736" category="paragraph">如果所有 Pod 均已启动且正在运行，则会安装 Trident ，您可以继续操作。</block>
  <block id="cde865911fa15995bc83db30d852300b" category="list-text">为 AKS 设置 Azure NetApp Files 后端和存储类。</block>
  <block id="476fdb61358f28988640245a33bd9199" category="list-text">创建 Azure 服务原则。</block>
  <block id="5cdfb88cd634d9d0eb47237e3251d4bd" category="paragraph">服务主体是 Trident 如何与 Azure 通信以操作 Azure NetApp Files 资源。</block>
  <block id="253a9ccb0f0696ed79c174b388867829" category="list-text">创建 Trident 后端 json 文件，示例名称 `anf-backend.json` 。</block>
  <block id="c17b83e07524acc467ac01e42fa0ebdb" category="list-text">使用首选文本编辑器，完成 `anf-backend.json` 文件中的以下字段：</block>
  <block id="1197f8dc56b70115d87008dd2ecd3fca" category="list-text">替换以下字段：</block>
  <block id="b0b2134849d44712e969d6872e7245e5" category="list-text">`ssubscriptionID` 。您的 Azure 订阅 ID</block>
  <block id="7b42dbe86adeab0d66f36221b33bb0f4" category="list-text">`租户 ID` 。上一步中 `az ad sp` 输出中的 Azure 租户 ID 。</block>
  <block id="5a8bb8e509b4a424a1df50ef0bb41d89" category="list-text">`客户端 ID` 。上一步中 `az ad sp` 输出中的 appID 。</block>
  <block id="6334b606a5807346a083767eaab3934f" category="list-text">`clientSecret` 。上一步中 `az ad sp` 输出中的密码。</block>
  <block id="12104fe8975b3ce95324ec3cab160ffc" category="list-text">指示 Trident 在 `trident` 命名空间中使用 `anf-backend.json` 作为配置文件创建 Azure NetApp Files 后端：</block>
  <block id="d6d34c355bcd6b2efe2795a2aeedd247" category="paragraph"><block ref="d6d34c355bcd6b2efe2795a2aeedd247" category="inline-image-macro-rx" type="image"></block></block>
  <block id="004530c3d3b3f442f56243625372db1d" category="list-text">创建存储类。Kubernetes 用户使用按名称指定存储类的 PVC 配置卷。指示 K8s 创建一个` azurenetappfiles `，该存储类引用上一步创建的 Trident 后端。</block>
  <block id="e777b114d6f12bc1190a60eaf8498e37" category="list-text">为存储类和副本创建 YAML （`anf-storage-class.yaml` ）文件。</block>
  <block id="01d45e8c6af153b1a477537e02466b5c" category="list-text">验证是否已创建存储类。</block>
  <block id="445895be8456b7de5e864fc09994551a" category="paragraph"><block ref="445895be8456b7de5e864fc09994551a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2d3fec4cfe088bc80c2c2930f051b60b" category="inline-link-macro">下一步：使用 Helm 在 AKS 上设置带快速部署的 dask 。</block>
  <block id="f2d1f2f412dd744c26a147e39bfa708f" category="paragraph"><block ref="f2d1f2f412dd744c26a147e39bfa708f" category="inline-link-macro-rx"></block></block>
  <block id="4b737f96f31f513a87adcf43b83ec3a1" category="summary">此页面介绍设置 AKS 集群所需的步骤。</block>
  <block id="a81532d943508d42466c22d8d87bb4b8" category="doc">安装和设置 AKS 集群</block>
  <block id="ce3e1770b7ff86cfbc3a30a3e3ea87da" category="inline-link-macro">上一页：点击率预测用例摘要。</block>
  <block id="80bf56f9bff31f7459309b983fbf8116" category="paragraph"><block ref="80bf56f9bff31f7459309b983fbf8116" category="inline-link-macro-rx"></block></block>
  <block id="40e1cc9f8d9321cbe9c1ef090f926a2b" category="paragraph">要安装和设置 AKS 集群，请参见网页<block ref="77c1c334ebc4c997080bda32aa569d69" category="inline-link-rx"></block> 然后完成以下步骤：</block>
  <block id="ad4af0825dd4979b7f48ae5ba031b23a" category="list-text">选择节点类型（系统 CPU 或辅助 GPU 节点）时，请选择以下选项：</block>
  <block id="5a244a81080ee9fc08696fcbd45284e5" category="list-text">主系统节点应为标准 DS2v2 （`agentpool` 默认三个节点）。</block>
  <block id="f3449ebebbf547282aa0562015bd360d" category="list-text">然后，为名为 `gpupool` 的用户组（对于 GPU 节点）添加工作节点 Standard_Nc6s_v3 Pool （至少三个节点）。</block>
  <block id="d3d648c68589ef99efb6ad3ec15d1beb" category="paragraph"><block ref="d3d648c68589ef99efb6ad3ec15d1beb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d2efc2b95642d4bcc76c710a3826225c" category="list-text">部署需要 5 到 10 分钟。完成后，单击 Connect to Cluster 。</block>
  <block id="31797d7013400422e5d589ae3d91c79a" category="list-text">要连接到新创建的 AKS 集群，请从本地环境（笔记本电脑 /PC ）安装以下内容：</block>
  <block id="87e009e80a344ecb598be4c4bbe01c79" category="inline-link">针对您的特定操作系统提供的说明</block>
  <block id="13a6d4f4230d0a1569b719c15884d447" category="list-text">使用的 Kubernetes 命令行工具<block ref="ad2337a31b7d16867fc954b03de661bd" category="inline-link-rx"></block></block>
  <block id="24a109d7bba4f8808eeb0bcf64d4357b" category="inline-link">安装 Azure 命令行界面</block>
  <block id="7feed8a8a6c680e7beeca052b9fc9ed0" category="list-text">文档中所述的 Azure 命令行界面，<block ref="8e2043d81b680dba324c5a2abbee7b3f" category="inline-link-rx"></block></block>
  <block id="d33a4b8acf4001a4b35a2186fd020432" category="list-text">要从终端访问 AKS 集群，请输入 `az login` 并输入凭据。</block>
  <block id="402ff6cff3671c1f49dc4af765835c14" category="list-text">输入 `Azure CLI ： kubectl get nodes` 。</block>
  <block id="4e5d89028ffbf65df6693ef1affd6573" category="list-text">如果所有六个节点均已启动且正在运行，如以下示例所示，则 AKS 集群已准备就绪并连接到本地环境</block>
  <block id="6b935f22371497abfe5378d4446df0da" category="paragraph"><block ref="6b935f22371497abfe5378d4446df0da" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e57b7e32f49f0297d6c7524d1da1b3c0" category="inline-link-macro">接下来：为 Azure NetApp Files 创建一个委派子网。</block>
  <block id="46b5942a33ef6a130ca5fee3f6017bec" category="paragraph"><block ref="46b5942a33ef6a130ca5fee3f6017bec" category="inline-link-macro-rx"></block></block>
  <block id="e1490a61359279998443f8eab1c0483e" category="summary">本页总结了 Azure NetApp Files 在分布式或大规模培训方面的优势。</block>
  <block id="b0de8e85db65da6381bb71646929daa6" category="doc">点击率预测用例摘要</block>
  <block id="d7550d336c660c27c3f1aa9ffdbc1e08" category="inline-link-macro">先前版本：云资源要求。</block>
  <block id="6a4fb77bb2a725598588e7db128b749b" category="paragraph"><block ref="6a4fb77bb2a725598588e7db128b749b" category="inline-link-macro-rx"></block></block>
  <block id="3f504d5ee520c44b83e5875afd3f2831" category="inline-link">TB 单击 Logs</block>
  <block id="ce2803fd5e9b90b62d0792d13e715d11" category="inline-link">Criteo AI 实验室</block>
  <block id="67ccf3c7c1e67c90000dfee83bab38ec" category="list-text">Azure NetApp Files 在分布式或大规模培训方面的优势</block>
  <block id="e15bc9f9b7a013d672cb689660ab9f9f" category="list-text">支持 CUDA 的数据处理（ cuDF ， cuPy 等）和 ML 算法（ cuML ）</block>
  <block id="3876b7e4b6a608a0b9001ae2e65c91b1" category="inline-link-macro">接下来：安装和设置 AK 集群。</block>
  <block id="2f0a1a89887d5c4f057724084bfdb718" category="paragraph"><block ref="2f0a1a89887d5c4f057724084bfdb718" category="inline-link-macro-rx"></block></block>
  <block id="17a9b27c376a8a5f5e184b2ebce41164" category="summary">部署完所有内容后，对新数据运行推断。这些模型可根据浏览活动预测用户是否单击某个广告。预测结果存储在 dask cuDF 中。您可以使用 Prometheus 监控结果，并在 Grafana 信息板中直观显示结果。</block>
  <block id="af4d0cbb3c6dcf4f3a5e831b08e40ace" category="doc">使用 Prometheus 和 Grafana 监控 dask 和快速流</block>
  <block id="a5d741c60ca9280a87382bcc2667207c" category="inline-link-macro">上一步：训练时间比较。</block>
  <block id="8162cd02e2793715a1b14265f2bfb54b" category="paragraph"><block ref="8162cd02e2793715a1b14265f2bfb54b" category="inline-link-macro-rx"></block></block>
  <block id="23c1612202d19b502b3701f893fb2557" category="inline-link">RAPID AI 中型 POST</block>
  <block id="9fed5c9f0dab5b88ba96d45cf450079f" category="paragraph">有关详细信息，请参见此<block ref="47200b727ab2088d205d11a973529202" category="inline-link-rx"></block>。</block>
  <block id="a5705f3e27851573a7eafd2a00a523b5" category="inline-link-macro">接下来：使用 NetApp DataOps 工具包进行数据集和型号版本控制。</block>
  <block id="db75fb5c1fef47405a8df61e726e3c66" category="paragraph"><block ref="db75fb5c1fef47405a8df61e726e3c66" category="inline-link-macro-rx"></block></block>
  <block id="adb2100439d02c2978c4a5670cda87b8" category="summary">此页面列出了用于构建此任务的库和框架。所有这些组件均已与 Azure 基于角色的访问和安全控制完全集成。</block>
  <block id="235ff38f40d20846e27b4c64e964ce28" category="doc">用于数据处理和模型培训的库</block>
  <block id="542e61809d35e9c83a99b29c87aa40fb" category="inline-link-macro">先前版本： Azure NetApp Files 性能层。</block>
  <block id="b7fe935ab4f924b870ae1983e3f3a271" category="paragraph"><block ref="b7fe935ab4f924b870ae1983e3f3a271" category="inline-link-macro-rx"></block></block>
  <block id="c4e831049faaa8b89e89eebd0a105dab" category="paragraph">下表列出了用于构建此任务的库和框架。所有这些组件均已与 Azure 基于角色的访问和安全控制完全集成。</block>
  <block id="faeae27c134f5193efb923d2492daa47" category="cell">库 / 框架</block>
  <block id="b540cdb28de9a6c72ef1a92504e69423" category="cell">dask cuML</block>
  <block id="1fc1b4b6567949aab2cb7e6fecb1e68f" category="inline-link">cuML 库</block>
  <block id="efe85bbaa5690074ea98a2bfef62d930" category="cell">要使 ML 在 GPU 上运行，请使用<block ref="514c908f6fc3f426a00e1dabdf37831f" category="inline-link-rx"></block> 可通过 dask 访问快速通道 cML 软件包。与基于 CPU 的方法相比，强强联合可以通过基于 GPU 的高性能实施实施常见的 ML 算法，包括集群，维度缩减和回归方法，提供高达 100 倍的速度。</block>
  <block id="ede0db3d6c9043439d0762ee99543654" category="cell">dask cudf</block>
  <block id="a9c380d6e09cc11f858b53d56cf69da4" category="inline-link">dask-cudf 库</block>
  <block id="13a7d0199f9797a3533ff335da46b446" category="cell">CUDF 包括支持 GPU 加速提取，转换，加载（ ETL ）的各种其他功能，例如数据子设置，转换，单热编码等。快速发展团队会维护<block ref="836818db4e43067816d31d2b73198787" category="inline-link-rx"></block> 其中包括使用 dask 和 cuDF 的帮助程序方法。</block>
  <block id="0c9c2e873df681f1ab5b13053be78af7" category="cell">Scikit 学习</block>
  <block id="cd1235fc9b090edba051d73dbc6f66bf" category="inline-link">估算器</block>
  <block id="1977c9daa1d67de51a4651abdb160c09" category="inline-link">适合</block>
  <block id="4f54da5a2c4a796e8215f20eb95fddcc" category="cell">Scikit Learning 提供了数十种内置机器学习算法和模型，称为评估器。每个<block ref="855747fa3f470c1754852d09071dd101" category="inline-link-rx"></block> 可以使用将其安装到某些数据中<block ref="e52e604a9dbe357e0fb9bc58f4b62add" category="inline-link-rx"></block> 方法</block>
  <block id="0dd4d530afb3c99ab869350770d7bebd" category="paragraph">我们使用两台笔记本电脑构建 ML 管道进行比较；一台是传统的熊猫科学学习方法，另一台是使用快速和快速的分布式培训。每台笔记本电脑均可单独进行测试，以查看时间和规模方面的性能。我们会分别介绍每台笔记本电脑，以展示使用快速流和 dask 进行分布式培训的优势。</block>
  <block id="7dd297826f91c438fab12307224d2c40" category="inline-link-macro">接下来：在熊猫中加载 Criteo 单击 Logs Day 15 ，然后训练一个 sc科学 学习随机林模型。</block>
  <block id="ade9906123700a8bf734457510b6b3c8" category="paragraph"><block ref="ade9906123700a8bf734457510b6b3c8" category="inline-link-macro-rx"></block></block>
  <block id="f6a738f75f76f62a241636eca02cd87d" category="doc">版本历史记录</block>
  <block id="3993b517d983222c5b766976180367f0" category="inline-link-macro">上一步：从何处查找追加信息。</block>
  <block id="7d5fc90090e6ef28f1b090f458e3bb91" category="paragraph"><block ref="7d5fc90090e6ef28f1b090f458e3bb91" category="inline-link-macro-rx"></block></block>
  <block id="44749712dbec183e983dcd78a7736c41" category="cell">Date</block>
  <block id="8002bc13927c65b5f265b031079ce1d4" category="cell">文档版本历史记录</block>
  <block id="3798985ee5e15c84c4263815d5a4d0b7" category="cell">版本 1.0</block>
  <block id="248f830b158797f9c038ea35ea266b89" category="cell">2021年8月</block>
  <block id="ea9349a37bfee247df0f87cbcacca796" category="cell">初始版本。</block>
  <block id="dfcb1d1644aa3be367d0ca7761be62ad" category="summary">此页面介绍为 Azure NetApp Files 创建委派子网所需的步骤。</block>
  <block id="d991c79e9311d59d4e38f3115d9c5b24" category="inline-link-macro">先前版本：安装和设置 AKS 集群。</block>
  <block id="5dd65debe44935eb5866a15b9a62237e" category="paragraph"><block ref="5dd65debe44935eb5866a15b9a62237e" category="inline-link-macro-rx"></block></block>
  <block id="8bffe528b31ee595be868b5a4af3d25a" category="paragraph">要为 Azure NetApp Files 创建委派子网，请完成以下步骤：</block>
  <block id="1aa0034de6393efa24703b8a479a5aa6" category="list-text">导航到 Azure 门户中的虚拟网络。查找新创建的虚拟网络。它应具有 `AK -vnet` 等前缀。</block>
  <block id="f1621549bc319674bb9e859babb2a671" category="list-text">单击 vNet 的名称。</block>
  <block id="c536871a8fac3a4390226f6e485cf662" category="paragraph"><block ref="c536871a8fac3a4390226f6e485cf662" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d5025fbb3995af8640cab85f4f91126b" category="list-text">单击子网，然后单击顶部工具栏中的 +Subnet 。</block>
  <block id="22307856839205c5209cc8ce1f4ed0df" category="paragraph"><block ref="22307856839205c5209cc8ce1f4ed0df" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e45b350630c9a3b31bf0c1a1f03dffb0" category="list-text">为子网提供名称，例如 `ANF.SN` ，然后在 Subnet delegation 标题下选择 `Microsoft.Netapp/volumes` 。请勿更改任何其他内容。单击确定。</block>
  <block id="3621b1bf0075cb659f152966504dfc0d" category="paragraph"><block ref="3621b1bf0075cb659f152966504dfc0d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e8034fc216ae23edc69bb75430f3de2f" category="paragraph">Azure NetApp Files 卷将分配给应用程序集群，并在 Kubernetes 中用作永久性卷声明（ Persistent Volume Claim ， PVC ）。反过来，通过此过程，您可以灵活地将其映射到不同的服务，例如 Jupyter 笔记本电脑，无服务器功能等。</block>
  <block id="ac3654eb11c3b0cfc94c6c1abdc6767a" category="paragraph">服务用户可以通过多种方式使用平台中的存储。在本技术报告讨论 NFS 时， Azure NetApp Files 的主要优势包括：</block>
  <block id="42ba8b77b788a422a7e4ba2d8bb2d45e" category="list-text">为用户提供使用 Snapshot 副本的功能。</block>
  <block id="a51448debe1bbe5bb229b849d4057e09" category="list-text">允许用户在 Azure NetApp Files 卷上存储大量数据。</block>
  <block id="b7c10d399d058ef3538882e444459ba5" category="list-text">在大型文件集上运行 Azure NetApp Files 卷的型号时，可以利用这些卷的性能优势。</block>
  <block id="4b15c9979e20dd7eb0c0263e9d5ab1db" category="inline-link-macro">下一步：对等 AKS vnet 和 Azure NetApp Files vnet 。</block>
  <block id="a9f725be439e4752193d45f7e7f41851" category="paragraph"><block ref="a9f725be439e4752193d45f7e7f41851" category="inline-link-macro-rx"></block></block>
  <block id="74b3e84bf9817092a6f26ddf10a2f3f8" category="summary">此页面概述了此解决方案中使用的技术。</block>
  <block id="a1f13b9a0674cc0beb81e208dfb68d05" category="doc">技术概述</block>
  <block id="5231f9fa4d08024f4620b759f83d0e97" category="inline-link-macro">上一页：简介。</block>
  <block id="dd5a70c15c985f455edb59eebf8d3eaa" category="paragraph"><block ref="dd5a70c15c985f455edb59eebf8d3eaa" category="inline-link-macro-rx"></block></block>
  <block id="4b2eedb67d8fb9da01af759e6e722a13" category="section-title">Microsoft 和 NetApp</block>
  <block id="09e4ef7b38fea4a7bdf4341b588176d6" category="paragraph">自 2019 年 5 月起， Microsoft 推出了 Azure 原生，这是基于 NetApp ONTAP 技术的第一方门户服务，适用于企业级 NFS 和 SMB 文件服务。这一发展由 Microsoft 和 NetApp 之间的战略合作伙伴关系推动，进一步将世界级 ONTAP 数据服务的覆盖范围扩展到 Azure 。</block>
  <block id="851e5baafa3bd23201e65e29f2fdf06a" category="paragraph">Azure NetApp Files 服务是一种企业级高性能计量文件存储服务。Azure NetApp Files 支持任何工作负载类型，默认情况下具有高可用性。您可以选择服务和性能级别，并通过服务设置 Snapshot 副本。Azure NetApp Files 是一项 Azure 第一方服务，用于在云中迁移和运行要求最严苛的企业文件工作负载，包括数据库， SAP 和高性能计算应用程序，并且不会更改代码。</block>
  <block id="f014a6e06480ef33e3f1ab027f7065ca" category="paragraph">此参考架构为 IT 组织提供了以下优势：</block>
  <block id="5e6e9a1ee378cf26b50e61d8bd46d54d" category="list-text">为各种性能和成本点提供一系列存储层</block>
  <block id="295f4f6daaf50c87d2639d407c47f357" category="section-title">Dask 和 NVIDIA 快速流概述</block>
  <block id="a9dcf931a9aad845de3c5b908d562955" category="paragraph">Dask 是一款开源并行计算工具，可在多台计算机上扩展 Python 库，并加快处理大量数据的速度。它提供的 API 类似于单线程传统 Python 库，例如熊猫， Numpy 和 sciKit 学习。因此，原生 Python 用户不必对其现有代码进行大量更改，即可在整个集群中使用资源。</block>
  <block id="955647f3573b932f8596ba04ed80b7b6" category="paragraph">NVIDIA RAID 是一套开源库，可以完全在 GPU 上运行端到端 ML 和数据分析工作流。通过与 dask 结合使用，您可以轻松地从 GPU 工作站（纵向扩展）扩展到多节点，多 GPU 集群（横向扩展）。</block>
  <block id="7a9ece70a2d60d73203e927718fd8454" category="paragraph">要在集群上部署 dask ，您可以使用 Kubernetes 进行资源编排。您还可以根据进程要求纵向或横向扩展工作节点，进而有助于优化集群资源消耗，如下图所示。</block>
  <block id="b3951b803e4010ed575c9238d2803949" category="paragraph"><block ref="b3951b803e4010ed575c9238d2803949" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c2e194dd3ce5b4d001a02991ef567211" category="inline-link-macro">接下来：软件要求</block>
  <block id="23704e1baeed350311b18c3583ad89e9" category="paragraph"><block ref="23704e1baeed350311b18c3583ad89e9" category="inline-link-macro-rx"></block></block>
  <block id="0dff6955889d5634f0212efb574ef815" category="doc">单击查看速率预测数据处理和模型训练</block>
  <block id="19075a93ccd90f3ea7019f0572778b2a" category="summary">此页面列出了此解决方案所需的软件要求。</block>
  <block id="b0167c15bc26c48af07aea36aba706fa" category="inline-link-macro">上一页：技术概述。</block>
  <block id="440b940924209e1d417ef7c4ef9bce34" category="paragraph"><block ref="440b940924209e1d417ef7c4ef9bce34" category="inline-link-macro-rx"></block></block>
  <block id="793d18702a236e0e3b768917638f0ba2" category="paragraph">下表列出了此解决方案所需的软件要求。</block>
  <block id="8ab697a4168b5fb33603a98d6bc9a436" category="cell">流和 dask 容器映像</block>
  <block id="9ab6289633c326d69a377cbb29bd81a3" category="cell">存储库： "rapidsai/rapidsai" 标记： 0.17-cuda11.0-runtime-ubuntu18.04</block>
  <block id="6e1b77cc3b83d87aaee751e2eaed5044" category="inline-link-macro">接下来：云资源要求。</block>
  <block id="58bc7690a5a3a5a1aa5dc70739fd0b53" category="paragraph"><block ref="58bc7690a5a3a5a1aa5dc70739fd0b53" category="inline-link-macro-rx"></block></block>
  <block id="9e59f01034d2c132fac901b9c14a5d88" category="summary">适用于 Kubernetes 的 NetApp DataOps 工具包可将存储资源和 Kubernetes 工作负载抽象到数据科学工作空间级别。这些功能打包在一个简单易用的界面中，专为数据科学家和数据工程师设计。</block>
  <block id="7aee811c7e891ab94bb5be40b333faaf" category="doc">使用 NetApp DataOps 工具包对数据集和模型进行版本控制</block>
  <block id="f7136197d3b16131979b9319c4acce63" category="inline-link-macro">上一页：使用 Prometheus 和 Grafana 监控 dask 和 rapids 。</block>
  <block id="402dae1972461d7e7ba986ab6728df6c" category="paragraph"><block ref="402dae1972461d7e7ba986ab6728df6c" category="inline-link-macro-rx"></block></block>
  <block id="fd2d048a9ec0f96d89493b98f72cbe34" category="paragraph">适用于 Kubernetes 的 NetApp DataOps 工具包可将存储资源和 Kubernetes 工作负载抽象到数据科学工作空间级别。这些功能打包在一个简单易用的界面中，专为数据科学家和数据工程师设计。该工具包采用熟悉的 Python 计划形式，可帮助数据科学家和工程师在几秒钟内配置和销毁 JupyterLab 工作空间。这些工作空间可以包含数 TB 甚至数 PB 的存储容量，从而使数据科学家能够将其所有培训数据集直接存储在其项目工作空间中。单独管理工作空间和数据卷的时代已经一去不返。</block>
  <block id="4a6c7893abd7ef92fb09d3359e17324d" category="inline-link">GitHub 存储库</block>
  <block id="eb0d40310a9cc0432fac66dc97652c39" category="paragraph">有关详细信息，请访问工具包<block ref="64134ca6239d4056f34489b42f2baeed" category="inline-link-rx"></block>。</block>
  <block id="1d1983037d4fd7beac963697b84f82bd" category="paragraph"><block ref="1d1983037d4fd7beac963697b84f82bd" category="inline-link-macro-rx"></block></block>
  <block id="cff4cbb413623685c446a2632974cf62" category="summary">此页面将使用传统熊猫的模型训练时间与 dask 进行比较。对于熊猫，由于处理时间较慢，我们加载的数据较少，以避免内存溢出。因此，我们对结果进行了插值计算，以便进行合理的比较。</block>
  <block id="014020acc8f97c1da58961d44b6301eb" category="doc">培训时间比较</block>
  <block id="76c5145913d13d6c3105c4265a78047e" category="inline-link-macro">上一步：使用原生任务流信息板监控 dask 。</block>
  <block id="a871e4d194e2df9c65b061a5fc7cb154" category="paragraph"><block ref="a871e4d194e2df9c65b061a5fc7cb154" category="inline-link-macro-rx"></block></block>
  <block id="c8ed0bb49061765f5f30ba006ea7c5c0" category="paragraph">本节将使用传统熊猫的模型训练时间与 dask 进行比较。对于熊猫，由于处理时间较慢，我们加载的数据较少，以避免内存溢出。因此，我们对结果进行了插值计算，以便进行合理的比较。</block>
  <block id="5b5214524edbd74fb721da08e61c8a41" category="paragraph">下表显示了当熊猫随机林模型（数据集每天 200 亿行中的 5000 万行）所使用的数据明显减少时的原始训练时间比较。 15此示例仅使用所有可用数据的 0.25% 以下。而对于 dask-cuML ，我们在所有 200 亿行可用的行上训练了随机林模型。这两种方法的训练时间相当。</block>
  <block id="40a68b5da4b9b224764558bb02ecd028" category="cell">方法</block>
  <block id="0e90ab0d7d04d2a878961f8d40071c83" category="cell">培训时间</block>
  <block id="24cc88af022e13431f8005b38f74e0fd" category="cell">Scikit 学习：在 15 天仅使用 50 米行作为训练数据</block>
  <block id="26e394f0b8009246698f4844db682015" category="cell">47 分 21 秒</block>
  <block id="ed536b2798ed9f16a79fb8f772601548" category="cell">rapids-dask ：使用第 15 天的所有 20 B 行作为训练数据</block>
  <block id="8809f6d1a4b5cbd872b52f83e378e527" category="cell">1 小时， 12 分钟和 11 秒</block>
  <block id="57093fade268287629c2720356ecac57" category="paragraph">如果我们按线性方式插值训练时间结果，如下表所示，则使用分布式训练和 dask 具有显著优势。传统的熊猫科学学习方法需要 13 天来处理和训练 45 GB 的数据，只需一天的单击日志，而使用快速 dask 方法处理相同数量的数据则要快 262.39 倍。</block>
  <block id="36ebc33745cb5ac06238c615c8aaebdc" category="cell">Scikit 学习：使用第 15 天的所有 20 B 行作为训练数据</block>
  <block id="b2ab615236e8c7812b0ab7dff59c552f" category="cell">13 天， 3 小时， 40 分钟和 11 秒</block>
  <block id="0d7cda3e89555f27bf26cf0c0c4f4fed" category="paragraph">在上表中，您可以看到，通过使用带和 dask 的快速处理功能在多个 GPU 实例之间分布数据处理和模型训练，与使用 scide-Learn 模型训练的传统熊猫 DataFrame 处理相比，运行时间要短得多。此框架支持在云端以及多节点多 GPU 集群内部进行纵向和横向扩展。</block>
  <block id="fbd52cffa97d6ec5e0230516fc61f14c" category="inline-link-macro">接下来：使用 Prometheus 和 Grafana 监控 dask 和快速流。</block>
  <block id="78117011d88a8971f2eadbeee6ac6474" category="paragraph"><block ref="78117011d88a8971f2eadbeee6ac6474" category="inline-link-macro-rx"></block></block>
  <block id="57a499fcdd85136edfd1ee55dedd9675" category="summary">此解决方案遵循 AI/ML 应用程序的生命周期。我们从数据科学家的工作入手，确定准备数据和训练模型所需的不同步骤。通过利用 dask 上的快速访问功能，我们可以在 Azure Kubernetes Service （ AKS ）集群中执行分布式培训，与传统的 Python 科学学习方法相比，可以大幅缩短培训时间。为了完成整个周期，我们将管道与 Azure NetApp Files 集成在一起。</block>
  <block id="e6fab630e7da86a500e1e3c51fa61a00" category="paragraph">Rick Huang ， Verron Martina ， Muncher ， NetApp</block>
  <block id="4c3816ce69205bc811aa89dbe9d09a1a" category="paragraph">数据科学家的工作重点应放在机器学习（ ML ）和人工智能（ AI ）模型的培训和调整上。但是，根据 Google 的研究，数据科学家花费大约 80% 的时间来研究如何使其模型能够与企业应用程序结合使用并大规模运行。</block>
  <block id="a1451f6988178ae140f8da836d63a157" category="paragraph">要管理端到端 AI/ML 项目，需要更广泛地了解企业组件。虽然 DevOps 已接管了这些类型的组件的定义，集成和部署，但 ML 操作的目标是类似的流程，其中包括 AI/ML 项目。要了解端到端 AI/ML 管道在企业中涉及的内容，请参见以下所需组件列表：</block>
  <block id="24bea3d677b34d6aea9ff01417fd9d06" category="list-text">集成开发环境（ IDE ）</block>
  <block id="e6a53478c3fc5682c6f851672b3e7bc9" category="paragraph">数据科学领域涉及 IT 和业务领域的多个领域：</block>
  <block id="9ca78187997ba2a23a73c094256ae63f" category="list-text">云管理员和架构师需要能够设置和管理 Azure 资源。</block>
  <block id="060bc2911862b1ab8f6b4b77542434a2" category="paragraph">在本技术报告中，我们将介绍 Azure NetApp Files ，快速 AI ， dask 和 Azure 如何帮助这些角色为业务带来价值。</block>
  <block id="ed8b6e047f5d4e844fe3e870c3fda4a3" category="paragraph">Azure NetApp Files 提供各种性能层。客户可以从标准层开始，无需移动任何数据即可无中断地横向扩展和纵向扩展到高性能层。数据科学家可以利用此功能大规模训练模型，而不会出现任何性能问题，从而避免集群中出现任何数据孤岛，如下图所示。</block>
  <block id="d4dc9019b6000fd12d9dc6b091fe3e26" category="paragraph"><block ref="d4dc9019b6000fd12d9dc6b091fe3e26" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b320345f652aacf7148c76dff24e2f68" category="inline-link-macro">接下来：技术概述</block>
  <block id="a20978df09e58f39953eb81f9368c2f2" category="paragraph"><block ref="a20978df09e58f39953eb81f9368c2f2" category="inline-link-macro-rx"></block></block>
  <block id="d577549f9b3a229c338e203a433489f6" category="summary">本节介绍如何将 AKS vNet 与 Azure NetApp Files vNet 建立对等关系。</block>
  <block id="e61e6d340ad05dc2e1ad0982f6857d7d" category="doc">对等 AKS vNet 和 Azure NetApp Files vNet</block>
  <block id="1c45d541f316a23589217be5991b1545" category="inline-link-macro">先前：为 Azure NetApp Files 创建委派子网。</block>
  <block id="786730f8769009abf0bf6400157dd16b" category="paragraph"><block ref="786730f8769009abf0bf6400157dd16b" category="inline-link-macro-rx"></block></block>
  <block id="e6ef5f0946a89d073a8f360de1038061" category="paragraph">要将 AKS vNet 与 Azure NetApp Files vNet 建立对等关系，请完成以下步骤：</block>
  <block id="87c2d6c506d0bf65d2c5d773474f9c0f" category="list-text">在搜索字段中输入虚拟网络。</block>
  <block id="7680f3bc49a836c67a8b0e7d2d9ccb44" category="list-text">选择 `vnet AK -vnet-name 。` 单击它并在搜索字段中输入 "Peels" 。</block>
  <block id="fc3bb6a018a8f599cab21678959f92b0" category="list-text">单击 +Add 。</block>
  <block id="1991ef5bd8e165e42c56ccaefa2f640f" category="list-text">输入以下描述符：</block>
  <block id="51e5b9c0a583a9afbc2f998e622fd30d" category="list-text">对等链路名称是 `aps-vnet-name_to_anf` 。</block>
  <block id="14ac6521e2758ba95fe7be9ca6a82cd1" category="list-text">subscriptionID 和 Azure NetApp Files vNet 作为 vNet 对等配对节点。</block>
  <block id="70b58cb057d859d4da9f17e43ffd238c" category="list-text">保留所有非星号部分的默认值。</block>
  <block id="1bb250fbf1946dd1bd7ad228032f8803" category="list-text">单击添加。</block>
  <block id="50e3209c871e4867931ef51a9344a921" category="paragraph">有关详细信息，请参见<block ref="f81943721c88f7efe9b8252470f9ea43" category="inline-link-rx"></block>。</block>
  <block id="fd3c95528aa9718948de8d4e38b2fa2c" category="inline-link-macro">下一步：安装 Trident 。</block>
  <block id="18337fe57049583a9c04a79f64a2088f" category="paragraph"><block ref="18337fe57049583a9c04a79f64a2088f" category="inline-link-macro-rx"></block></block>
  <block id="dcfa517bb68d187d11e580baf2ecf588" category="summary">此页面介绍如何使用 Helm 在 AKS 上设置带快速部署的 dask 。</block>
  <block id="fd22fb1626b987fa7b72743fa9698ec6" category="doc">使用 Helm 在 AKS 上设置带快速部署的 dask</block>
  <block id="d74bb88aa6e4b1c540be703fda33923e" category="inline-link-macro">先前版本：安装 Trident 。</block>
  <block id="6020c64d2124fc0caa426123bfc5ba38" category="paragraph"><block ref="6020c64d2124fc0caa426123bfc5ba38" category="inline-link-macro-rx"></block></block>
  <block id="d81f517b6ad0d9702be81a8199a2246f" category="paragraph">要使用 Helm 在 AKS 上设置带快速部署的 dask ，请完成以下步骤：</block>
  <block id="549c839f491ec7099a895dd1cfea7534" category="list-text">创建一个命名空间以安装带有快速流的 dask 。</block>
  <block id="74d041e68ac2a21a636ab14ae78f279d" category="list-text">创建一个 PVC 以存储点击率数据集：</block>
  <block id="f5008aa6b27cdcaadbe27960383c8ff6" category="list-text">将以下 YAML 内容保存到文件中以创建 PVC 。</block>
  <block id="67d464c36bcc48173c964a780459dbfd" category="list-text">将 YAML 文件应用于 Kubernetes 集群。</block>
  <block id="be0ca76aafd92c18792693b8f05d01ce" category="inline-link"><block ref="be0ca76aafd92c18792693b8f05d01ce" category="inline-link-rx"></block></block>
  <block id="dc7ba914646428512334728c1f0ebd7d" category="list-text">克隆 `apidsai git` repository （<block ref="4f08c7c28c19e75f4d8607fc65d40067" category="inline-link-rx"></block>）。</block>
  <block id="50aef45ee39d958bc589f422bfb6d1bf" category="list-text">修改 `values.yaml` 并包括先前为员工和 Jupyter 工作空间创建的 PVC 。</block>
  <block id="06867e85b141bb9d17f8ed6b4b685c46" category="list-text">转至存储库的 `rapidsai` 目录。</block>
  <block id="1a985ac965074fab9cfcee28ef954755" category="list-text">更新 `values.yaml` 文件并使用 PVC 挂载卷。</block>
  <block id="52076eb1fec3929530258335052328b3" category="list-text">转到存储库的主目录，然后使用 Helm 在 AKS 上为三个辅助节点部署 dask 。</block>
  <block id="bd4e74749939dd3c9f80ff138c18af53" category="inline-link-macro">接下来： Azure NetApp Files 性能层。</block>
  <block id="52d5e0adb69809963ce4f94104a75b5e" category="paragraph"><block ref="52d5e0adb69809963ce4f94104a75b5e" category="inline-link-macro-rx"></block></block>
  <block id="1a17b23dd49d997677e18c9b9fe29935" category="summary">此页面介绍如何使用原生任务流信息板监控 dask 。</block>
  <block id="3268570ddd540695f3e92ff79d8f4684" category="doc">使用原生任务流信息板监控 dask</block>
  <block id="1e80a6d70a902d1dae25d26917a5b490" category="inline-link-macro">上一步：在 dask 中加载 Day 15 并训练 dask cuML 随机林模型。</block>
  <block id="3898f5ae37dfd830af10cdc128236b50" category="paragraph"><block ref="3898f5ae37dfd830af10cdc128236b50" category="inline-link-macro-rx"></block></block>
  <block id="9eeb55820f49a600fa229f23cfe9e5b5" category="inline-link">dask 分布式计划程序</block>
  <block id="99b248c7005783fe2682ad82217e9a24" category="paragraph">。<block ref="7df0d90bf997a373bfe85bbe10a2d2c8" category="inline-link-rx"></block> 以两种形式提供实时反馈：</block>
  <block id="d8516bf5d94a38a1fa1d7a8c3b92dee7" category="list-text">一个交互式信息板，其中包含许多图表和包含实时信息的表</block>
  <block id="d22ebe91c5dc1499387785da997fbe7d" category="list-text">一个适合在控制台或笔记本电脑中交互使用的进度条</block>
  <block id="6e35e4c1cc9332ebc8028df451bc4f06" category="paragraph">在我们的案例中，下图显示了如何监控任务进度，包括存储的字节数，详细细分流数量的任务流以及执行关联功能的任务名称的进度。在我们的案例中，由于我们有三个辅助节点，因此流有三个主要区块，而颜色代码表示每个流中的不同任务。</block>
  <block id="5743e70224503025dacaa77fae253c4f" category="paragraph"><block ref="5743e70224503025dacaa77fae253c4f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7a5c7a858f05434bf6637c3995959f49" category="paragraph">您可以选择分析单个任务并以毫秒为单位检查执行时间，或者确定任何障碍或障碍。例如，下图显示了随机林模型安装阶段的任务流。要执行的功能要多得多，包括用于 DataFrame 处理的唯一区块，用于安装随机林的 _construct_rf 等。由于 Criteo Click Logs 中一天的数据非常大（ 45 GB ），因此大部分时间都花在了 DataFrame 操作上。</block>
  <block id="816ff133aaa3d2f46ca0c7842f5fdaab" category="paragraph"><block ref="816ff133aaa3d2f46ca0c7842f5fdaab" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f5eca1492a19a4c24071ed91262666cf" category="inline-link-macro">下一步：比较训练时间。</block>
  <block id="d5d929f175d4a2062c661e45b9656f32" category="paragraph"><block ref="d5d929f175d4a2062c661e45b9656f32" category="inline-link-macro-rx"></block></block>
  <block id="d68d11ee3f69a45d681f78c744cae498" category="summary">您可以通过将现有卷移动到使用所需卷服务级别的另一个容量池来更改此卷的服务级别。借助此解决方案，客户可以从标准层中的小型数据集和少量 GPU 入手，并随着数据量和 GPU 的增加而横向扩展或纵向扩展到高级层。</block>
  <block id="2fe5665064f07acc8afc830f911c09a5" category="doc">Azure NetApp Files 性能层</block>
  <block id="d84e339c1d1265f11e2f217f8d04354a" category="inline-link-macro">上一步：使用 Helm 在 AKS 上设置带快速部署的 dask 。</block>
  <block id="1be55e0d10ba600a3d66b1f73f978b9f" category="paragraph"><block ref="1be55e0d10ba600a3d66b1f73f978b9f" category="inline-link-macro-rx"></block></block>
  <block id="de524ca3fc83ef426bc329e1a8b712ea" category="paragraph">您可以通过将现有卷移动到使用所需卷服务级别的另一个容量池来更改此卷的服务级别。借助此解决方案，客户可以从标准层中的小型数据集和少量 GPU 入手，并随着数据量和 GPU 的增加而横向扩展或纵向扩展到高级层。高级层提供的每 TB 吞吐量是标准层的四倍，并且可以执行纵向扩展，而无需移动任何数据即可更改卷的服务级别。</block>
  <block id="5f92df8a2ac38644ed8ba20e16791602" category="paragraph">要动态更改卷的服务级别，请完成以下步骤：</block>
  <block id="8c83c4957baac2f6fea18f9d77767e3a" category="paragraph"><block ref="8c83c4957baac2f6fea18f9d77767e3a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="21ec2eabbe87e02cad1b0d4279ea00a7" category="list-text">在更改池窗口中，选择要将卷移动到的容量池。</block>
  <block id="ef3a0105bad35ad4c385d92daf6496a6" category="paragraph"><block ref="ef3a0105bad35ad4c385d92daf6496a6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="18d0ad44a1e563aaf9f5871e32535a6c" category="list-text">单击确定。</block>
  <block id="32ae33eea9c6b04002778d814c344fb5" category="section-title">自动执行性能层更改</block>
  <block id="1c9506694c5a6fe83d1a0389d1d24564" category="paragraph">以下选项可用于自动执行性能层更改：</block>
  <block id="54a3bcd89041e8f96766dcb598b15511" category="list-text">动态服务级别更改目前仍在公有预览中，默认情况下不会启用。要在 Azure 订阅上启用此功能，请参见本文档了解如何操作<block ref="773d4c9e90e7325c5fcf35857900af6e" category="inline-link-rx"></block>。</block>
  <block id="0b01c5f61940e864222c5b29615a7eeb" category="inline-link">卷池更改文档</block>
  <block id="265eed4df59633a830c9da49505786fc" category="list-text">中提供了 Azure CLI 卷池更改命令<block ref="db78b725076ccf0203288c6620e52eb9" category="inline-link-rx"></block> 在以下示例中：</block>
  <block id="4455e376dc005ca0a99be0491b917ce7" category="inline-link">Set-AzNetAppFilesVolumePool cmdlet</block>
  <block id="a5bce2f378011f6036711869a5e8073b" category="list-text">PowerShell ：<block ref="45dc9ea5ce8eabd60a14674d792889e0" category="inline-link-rx"></block> 更改 Azure NetApp Files 卷的池，如以下示例所示：</block>
  <block id="b79b50d5bff47e3a668f266c7b9dbc7b" category="inline-link-macro">接下来：用于数据处理和模型培训的库。</block>
  <block id="edd770dcbb857ec8f0871955fb2f7d5d" category="paragraph"><block ref="edd770dcbb857ec8f0871955fb2f7d5d" category="inline-link-macro-rx"></block></block>
  <block id="60f89129c6220bfb3de5a84b4f6471ca" category="summary">此页面介绍了我们如何使用熊猫和 dask DataFrames 从 Criteo TB 数据集中加载 Click Logs 数据。在广告交换的数字广告中，使用情形与此相关，它可以预测是否会点击广告，或者如果交换在自动管道中使用的模型不准确，从而构建用户的个人资料。</block>
  <block id="efdbc2f24f0a87c559175250c645b26b" category="doc">在熊猫中加载 Criteo 单击 Logs Day 15 ，然后训练一个 sc科学 学习随机林模型</block>
  <block id="2979440f06f7cfcab78b9a92ca964f28" category="inline-link-macro">上一页：数据处理和模型培训库。</block>
  <block id="f2982e3861753bd206faa379a769d904" category="paragraph"><block ref="f2982e3861753bd206faa379a769d904" category="inline-link-macro-rx"></block></block>
  <block id="f82859e215621220b9aae984f796ef24" category="paragraph">本节介绍如何使用熊猫和 dask DataFrames 从 Criteo TB 数据集中加载 Click Logs 数据。在广告交换的数字广告中，使用情形与此相关，它可以预测是否会点击广告，或者如果交换在自动管道中使用的模型不准确，从而构建用户的个人资料。</block>
  <block id="f08833dbbe310e84a1ba564838776db2" category="paragraph">我们从 Click Logs 数据集加载了第 15 天的数据，总计 45 GB 。在 Jupyter 笔记本电脑中运行以下单元 `CT-PandasRF-colled.ipynb` 创建一个包含前 5 ， 000 万行的熊猫 DataFrame ，并生成一个 scide-Learn 随机林模型。</block>
  <block id="f9964b2f8f54a1422ac46bab70fd1216" category="inline-link">官方科学知识工具包学习文档</block>
  <block id="5646953e1414498e1ddf2eb3ab488e27" category="paragraph">要使用经过培训的随机林模型执行预测，请在此笔记本电脑中运行以下段落。为了避免重复，我们采用了自第 15 天起的最后 100 万行作为测试集。该单元格还会计算预测准确性，其定义为模型准确预测用户是否单击 AD 。要查看此笔记本中任何不熟悉的组件，请参见<block ref="27e4d9ca2442a6439517a3ec2c7a4e73" category="inline-link-rx"></block>。</block>
  <block id="4e5653c75e720212b79703e8083de2a8" category="inline-link-macro">接下来：在 dask 中加载第 15 天，训练一个 dask cuML 随机林模型。</block>
  <block id="8c9976282cff1b15934d937349911c30" category="paragraph"><block ref="8c9976282cff1b15934d937349911c30" category="inline-link-macro-rx"></block></block>
  <block id="7f39827ac712fa5b76b27ff0b267373c" category="sidebar">使用 NetApp DataOps 工具包进行数据集和型号版本控制</block>
  <block id="efbc668592bf2cf9e84b95ff4a9de44c" category="cell">21.08.65</block>
  <block id="6589da0279dd02b9b1d177e0ff5f457b" category="list-text">创建一个命名空间 `NetApp-Acc-operator` 以安装 Astra 控制中心操作员。</block>
  <block id="e3990b0b892faaf03261a0a1bcd00b9b" category="list-text">使用凭据创建一个密钥，以登录到 `NetApp-Acc-operator` 命名空间中的映像注册表。</block>
  <block id="8b6327b93d10679b1f412976af9d3bba" category="summary">Azure NetApp Files ，速写和 dask 可加快和简化大规模 ML 处理和培训的部署，并与 Docker 和 Kubernetes 等业务流程工具集成。通过统一端到端数据管道，此解决方案可降低许多高级计算工作负载固有的延迟和复杂性，从而有效地弥补开发和运营之间的差距。</block>
  <block id="5dc14d36063086387d2eb7cf012544aa" category="list-text">创建 VolumeSnapshotClass ，然后使用该类创建 VolumeSnapshot 。导航到 "Storage"&gt;"VolumeSnapshotClasss" ，然后单击 "Create VolumeSnapshotClass" 。</block>
  <block id="3ffbaa72c8e63f0ec3ced08d8ebf9f72" category="list-text">首先，将 Snapshot 还原到新的 PVC 中。导航到存储 &gt; 卷快照，单击要还原的快照旁边的省略号，然后单击还原为新 PVC 。</block>
  <block id="8a4d1acf8df9931b5c42b3253f943d79" category="list-text">接下来，使用此 PVC 创建一个新虚拟机。导航到工作负载 &gt; 虚拟化 &gt; 虚拟机，然后单击创建 &gt; 使用 YAML 。</block>
  <block id="91b9a57ab88a6942f692f9f393549f6e" category="list-text">在规范 &gt; 模板 &gt; 规范 &gt; 卷部分中，指定从 Snapshot 创建的新 PVC ，而不是从容器磁盘创建的新 PVC 。根据您的要求提供新虚拟机的所有其他详细信息。</block>
  <block id="78c43863df60a7808264e8659cfa6b54" category="paragraph">Astra Trident 是一款开源且完全受支持的存储编排程序，适用于容器和 Kubernetes 分发版，包括 Red Hat OpenShift 。Trident 可与包括 NetApp ONTAP 和 Element 存储系统在内的整个 NetApp 存储产品组合配合使用，并且还支持 NFS 和 iSCSI 连接。Trident 允许最终用户从其 NetApp 存储系统配置和管理存储，而无需存储管理员干预，从而加快了 DevOps 工作流的速度。</block>
  <block id="d719c733d0cd8753c048c8c3a025fd51" category="paragraph">MetalLB 是一种安装在 OpenShift 集群上的自托管网络负载平衡器，可用于在未在云提供程序上运行的集群中创建类型为负载平衡器的 OpenShift 服务。MetalLB 可协同工作以支持负载平衡器服务的两个主要功能是地址分配和外部公告。</block>
  <block id="13f78a1c753a58b3786e5664e7b01344" category="list-text">* BGP 模式。 * 在此模式下， OpenShift 集群中的所有节点都与路由器建立 BGP 对等会话，并公布路由以将流量转发到服务 IP 。前提条件是将 MetalLB 与该网络中的路由器集成在一起。由于 BGP 中采用哈希机制，因此在服务的 IP 到节点映射发生更改时，它具有一定的限制。有关详细信息，请参见文档 <block ref="fed7545a9b4a70bb7835cc8b07492cba" category="inline-link-macro-rx"></block>。</block>
  <block id="5fe238de20fea7c5ec86dde0a98c5841" category="admonition">在本文档中，我们将在第 2 层模式下配置 MetalLB 。</block>
  <block id="0ef06ef8df800cf71fb95c66e0e08f1a" category="list-text">首先导航到 " 自动化基础架构 "&gt;" 集群 " 。</block>
  <block id="e056bb6efa17796fc810edad8410280d" category="list-text">创建提供程序连接：导航到 " 提供程序连接 " 并单击 " 添加连接 " ，提供与选定提供程序类型对应的所有详细信息，然后单击 " 添加 " 。</block>
  <block id="401b252566122602a82ff66bc7ed3e6c" category="list-text">要创建新集群，请导航到集群，然后单击添加集群 &gt; 创建集群。提供集群和相应提供程序的详细信息，然后单击创建。</block>
  <block id="2da6eeb34cf16de43ab8fa2f939d81c7" category="list-text">创建集群后，该集群将显示在集群列表中，状态为 Ready 。</block>
  <block id="f52ae06380cfd00cae7839562f550e87" category="list-text">导航到集群，然后单击添加集群 &gt; 导入现有集群。</block>
  <block id="63b7276dd1b569babc28304e786e2041" category="list-text">输入集群的名称，然后单击保存导入并生成代码。此时将显示一个用于添加现有集群的命令。</block>
  <block id="be87809a27ab2944f89ccaebd89b7596" category="list-text">单击 Copy Command ，然后对要添加到集线器集群的集群运行命令。此操作将在集群上启动所需代理的安装，完成此过程后，集群将显示在集群列表中，并显示状态为 Ready 。</block>
  <block id="627fd2c5e0310dc7409ea377e5d13045" category="section-title">验证在分配的项目中创建 PVC 或 Pod 的访问权限</block>
  <block id="8c9885c86a67cc4c47a30d7e8d14badb" category="section-title">验证在其他项目中创建 PVC 或 Pod 的访问权限，或者使用专用于另一项目的资源</block>
  <block id="83aa0a39007c30e71adde6fbf8180d9f" category="section-title">验证对查看和编辑项目， ResourceQuotas 和 StorageClasses 的访问权限</block>
  <block id="53c583e55a36ad49234df678a2dbcf45" category="paragraph">NetApp Element 软件可提供模块化的可扩展性能，每个存储节点均可为环境提供有保障的容量和吞吐量。NetApp Element 系统可以在一个集群中从 4 个节点扩展到 100 个节点，并提供多种高级存储管理功能。</block>
  <block id="28bbba0205a8bfd9f8f2da8b73522dc7" category="inline-link-macro">接下来： NetApp 存储集成概述</block>
  <block id="d61c98dcb4bec6f3e1213776ebb1e6c3" category="paragraph"><block ref="d61c98dcb4bec6f3e1213776ebb1e6c3" category="inline-link-macro-rx"></block></block>
  <block id="1c01b62cc887329b006a88e9f959b5d4" category="list-text">确保已在 IdP 上为 project-3 创建用户组并与 OpenShift 集群同步。</block>
  <block id="e98511d60f9850de86f096614f447322" category="paragraph">适用于 Kubernetes 的高级集群管理提供了一种监控所有集群中的节点， Pod 以及应用程序和工作负载的方法。</block>
  <block id="36aff44ed429ca86d182dc7ee3dfdbb1" category="list-text">导航到 " 观察环境 "&gt;" 概述 " 。</block>
  <block id="c9904a9276a489fc238c999d2ddd633f" category="list-text">所有集群中的所有 Pod 和工作负载都会根据各种筛选器进行监控和排序。单击 Pod 以查看相应数据。</block>
  <block id="7cd1c61051d3647bc47d839e0efee222" category="list-text">集群中的所有节点都会根据各种数据点进行监控和分析。单击节点可更深入地了解相应的详细信息。</block>
  <block id="4e7f54a0ebc5cd69209a17181d477e4c" category="list-text">系统会根据不同的集群资源和参数监控和组织所有集群。单击集群可查看集群详细信息。</block>
  <block id="842f7d4793f116332f5b12b648dfd539" category="list-text">导航到工作负载 &gt; 虚拟化 &gt; 虚拟机，然后单击创建 &gt; 使用向导。</block>
  <block id="ae024d48dbfaaf4badad7bf9c812a98f" category="list-text">单击 rootdisk 旁边的省略号，并确保已选择使用 Trident 配置的 storageclass 。展开高级，然后为访问模式选择共享访问（ rwx ）。然后单击保存。</block>
  <block id="289f346dbeb0185de2648a24955ca887" category="list-text">导航到工作负载 &gt; 虚拟化 &gt; 虚拟机。</block>
  <block id="a542faac65568ba146d392d835d7fb33" category="list-text">* VMware vCenter Server* 。 VMware vCenter Server 可通过一个控制台统一管理所有主机和 VM ，并聚合对集群，主机和 VM 的性能监控。</block>
  <block id="413563ec6c2672beb7df15f465cb4a48" category="list-text">通过 * VMware vSphere vMotion* VMware vCenter ，您可以根据请求在集群中的节点之间热迁移虚拟机，而不会造成中断。</block>
  <block id="e6583703b8777be27f8db85d741711b4" category="list-text">* vSphere 高可用性。 * 为避免主机发生故障时发生中断， VMware vSphere 允许将主机集群化并配置为高可用性。由于主机故障而中断的 VM 不久将在集群中的其他主机上重新启动，从而还原服务。</block>
  <block id="46b35ead34118cb2c50327c71e4aa640" category="list-text">* 分布式资源计划程序（ DRS ）。 * 可以配置 VMware vSphere 集群，以便对其托管的 VM 的资源需求进行负载平衡。具有资源管理的 VM 可以热迁移到集群中的其他节点，以确保有足够的可用资源。</block>
  <block id="5c6371faa8d72dee8337811921707a4b" category="paragraph">NetApp 解决方案上的 Red Hat OpenShift 使用两个数据交换机提供 25 Gbps 的主数据连接。它还使用两个额外的管理交换机，这些交换机以 1 Gbps 的速度提供连接，用于存储节点的带内管理以及 IPMI 功能的带外管理。OCP 使用 VMware vSphere 上的 VM 逻辑网络进行集群管理。本节介绍解决方案中使用的每个虚拟网段的布局和用途，并概述了部署解决方案的前提条件。</block>
  <block id="f33bd5bca507f2b59fc0a43383ade71b" category="cell">虚拟子系统网络访问</block>
  <block id="3500f2194985ef1b586c649fbe519d8d" category="paragraph">本文档中介绍的经验证的架构介绍了适用于 HA 操作的最低硬件部署，具体方法是部署两个 ESXi 虚拟机管理程序节点，并通过启用 VMware vSphere HA 和 VMware vMotion 来确保容错配置。此配置允许部署的 VM 在两个虚拟机管理程序之间迁移，并在一个主机不可用时重新启动。</block>
  <block id="e79fa01ec6b411cfda4f8baad9f95cb0" category="paragraph">由于 Red Hat OpenShift 最初部署有三个主节点，因此在某些情况下，双节点配置中至少有两个主节点可以占用同一个节点，如果该特定节点不可用，可能会导致 OpenShift 中断。因此， Red Hat 的最佳实践是，必须至少部署三个 ESXi 虚拟机管理程序节点，以便可以均匀分布 OpenShift 主节点，从而提高容错能力。</block>
  <block id="f5428382aa8b44d7ef6ca71195afc8ca" category="paragraph">通过启用 VM 和主机关联性，可确保在多个虚拟机管理程序节点之间分布 OpenShift 主节点。</block>
  <block id="c23c2371397ad3490af42526283948a4" category="paragraph">关联性或反关联性是一种为一组 VM 和 / 或主机定义规则的方法，用于确定这些 VM 是在同一主机上运行还是在组中的主机上运行，还是在不同主机上运行。它通过创建由具有一组相同参数和条件的 VM 和 / 或主机组成的关联组来应用于 VM 。根据关联组中的 VM 是在组中的同一主机上运行，还是在不同主机上单独运行，此关联组的参数可以定义正关联性或负关联性。</block>
  <block id="5e059b05dcf86db414d6b8cdd66bcf0f" category="paragraph">IPI 可通过本文档前面讨论的交互式向导轻松部署 OpenShift 集群。但是，在集群部署过程中，您可能需要更改某些默认值。</block>
  <block id="6e7315bf45cda77f0a1477ed6f712eb6" category="paragraph">在这些情况下，您无需立即部署集群即可运行和执行向导任务，但向导会创建一个配置文件，以便稍后可以从中部署集群。如果您需要更改任何 IPI 默认值，或者要在环境中部署多个相同的集群以用于多租户等其他用途，则此功能非常有用。有关为 OpenShift 创建自定义安装配置的详细信息，请参见<block ref="fc4239653f75b84dd3ca03fe8b28dd64" category="inline-link-rx"></block>。</block>
  <block id="2a3b399798aa16ecfbc1425cc560bfad" category="section-title">用例</block>
  <block id="f08561bbd831bfa1923e6acf045ef13a" category="section-title">业务价值</block>
  <block id="81f74b2a02db97d708bd7cbf08d2463a" category="section-title">NetApp 存储系统</block>
  <block id="660d073f0987fac312dc40bd5dc868bd" category="paragraph">NetApp 拥有多个存储系统，非常适合企业数据中心和混合云部署。NetApp 产品组合包括 NetApp ONTAP ， NetApp Element 和 NetApp E 系列存储系统，所有这些系统均可为容器化应用程序提供永久性存储。</block>
  <block id="069b087e8e1e69cc928f18a85f683523" category="section-title">NetApp 存储集成</block>
  <block id="b4186621511a622be24ad982b0a8ec32" category="paragraph">NetApp Astra 控制中心为有状态 Kubernetes 工作负载提供了一组丰富的存储和应用程序感知型数据管理服务，这些服务部署在内部环境中，并采用值得信赖的 NetApp 数据保护技术。</block>
  <block id="947496ade2e4a2c8e929d9aa9f00be04" category="paragraph">有关详细信息，请访问 NetApp Astra 网站<block ref="508f471fa59796a53754f031c40091c1" category="inline-link-rx"></block>。</block>
  <block id="0bc570c518e7c4f356ebceb14fa8372f" category="section-title">高级配置选项</block>
  <block id="aa44798f04a58b33c3699abd02a59c57" category="paragraph">本节专门介绍实际用户在将此解决方案部署到生产环境中时可能需要执行的自定义设置，例如创建专用私有映像注册表或部署自定义负载平衡器实例。</block>
  <block id="382742bb5fff6a719c144a0a01cd17e3" category="section-title">已验证版本的当前支持列表</block>
  <block id="40ddf58fef213ff0d6433ef322edfe2e" category="cell">软件版本</block>
  <block id="e3024b13494086daa1b9813a799ba41a" category="cell">数据中心虚拟化</block>
  <block id="35be109b995061abd3392d1b01fd0e9a" category="summary">Red Hat OpenStack 平台为创建，部署和扩展安全可靠的私有 OpenStack 云提供了一个集成基础。</block>
  <block id="dc34aa9761794ceabad79dc29944976e" category="paragraph">OpenStack 项目是一个快速开发的社区项目，每六个月提供更新版本。最初， Red Hat OpenStack Platform 通过发布新版本以及每个上游版本并为每个第三个版本提供长期支持，跟上了此版本周期的步伐。最近，在 OSP 16.0 版（基于 OpenStack 训练）中， Red Hat 选择不跟上版本号的步伐，而是将新功能支持到子版本中。最新版本是 Red Hat OpenStack Platform 16.1 ，其中包括上游 Ussuri 和维多利亚版本的后台高级功能。</block>
  <block id="ffd7a6889e6ea6965969472250235082" category="paragraph">OpenStack 平台服务以容器的形式部署，可将服务彼此隔离，并可轻松进行升级。OpenStack 平台使用一组使用 Kolla 构建和管理的容器。可通过从 Red Hat 自定义门户中提取容器映像来部署服务。这些服务容器可使用 Podman 命令进行管理，并可使用 Red Hat OpenStack Director 进行部署，配置和维护。</block>
  <block id="7adea0d9c77aabccd8bb67ae0a832d59" category="cell">项目名称</block>
  <block id="e7a39f4cb0dd0ffaaffe8fb0319dec67" category="cell">OpenStack 网络</block>
  <block id="4f0550f066ae72bb8c24fc3f59c323bf" category="cell">块存储</block>
  <block id="670aaecb1a526fbed439dad3ec353a96" category="cell">对象存储</block>
  <block id="b81a67bf2ab52e16a62a9c71454c90ee" category="paragraph">Red Hat OpenStack Director 需要 IPMI 功能才能使用具有讽刺意味的裸机配置服务部署 Red Hat OpenStack Platform 。</block>
  <block id="567f5ee3e60ecdd5338b39cab0006510" category="cell">存储基础架构</block>
  <block id="ea414c629935302b115bf3dabf5f827c" category="cell">中子通过 VXLAN 的通道为每个租户提供自己的网络。网络流量在每个租户网络中隔离。每个租户网络都有一个关联的 IP 子网，而网络命名空间意味着多个租户网络可以使用相同的地址范围而不会导致冲突</block>
  <block id="f2feccaa3f5d086f0b16010ff463e369" category="cell">公共网络，用于托管用于图形管理的 OpenStack 信息板（ Horizon ），并允许公有 API 调用来管理 OpenStack 服务。</block>
  <block id="493fd05bc58266bcd8394072cbe81748" category="paragraph">本文档中介绍的经验证的架构通过部署三个 OSP 控制器节点和两个 OSP 计算节点提供了最适合 HA 操作的硬件部署。此架构可确保容错配置，其中两个计算节点均可启动虚拟实例，而已部署的 VM 则可在两个虚拟机管理程序之间迁移。</block>
  <block id="ebe803a768c48af52bca59e6ab7df9bf" category="paragraph">由于 Red Hat OpenShift 最初使用三个主节点进行部署，因此双节点配置可能会发生原因至少两个主节点占用同一节点，从而可能导致 OpenShift 在特定节点不可用时发生中断。因此， Red Hat 的最佳实践是至少部署三个 OSP 计算节点，以便 OpenShift 主节点可以均匀分布，并且解决方案可以获得更多的容错能力。</block>
  <block id="bbfdc160550acbcdb4791a961a165d5d" category="paragraph">通过启用虚拟机 / 主机关联性，可以在多个虚拟机管理程序节点之间分布 OpenShift 主节点。</block>
  <block id="cb346122cae28dfb1fcf0811f46296a2" category="paragraph">关联性是一种为一组 VM 和 / 或主机定义规则的方法，用于确定这些 VM 是在组中的同一主机上运行还是在不同主机上运行。它通过创建由具有一组相同参数和条件的 VM 和 / 或主机组成的关联组来应用于 VM 。根据关联组中的 VM 是在组中的同一主机上运行，还是在不同主机上单独运行，此关联组的参数可以定义正关联性或负关联性。在 Red Hat OpenStack 平台中，可以通过创建服务器组和配置筛选器来创建和实施主机关联性和反关联性规则，以便 Nova 在服务器组中部署的实例部署在不同的计算节点上。</block>
  <block id="de5bd213c3df23736df75636241f96de" category="admonition">OSP 服务器组具有特定的硬关联性 / 反关联性限制；如果没有足够的资源可在不同的节点上部署，或者没有足够的资源可用于共享节点，则 VM 将无法启动。</block>
  <block id="42bb5e38e5b1c611bdce679410b24d67" category="paragraph">在这些情况下，无需立即部署集群，即可运行并执行向导任务；而是创建一个配置文件，以便稍后可以从中部署集群。如果您需要更改任何 IPI 默认值，或者要在环境中部署多个相同的集群以用于多租户等其他用途，则此功能非常有用。有关为 OpenShift 创建自定义安装配置的详细信息，请参见<block ref="05810b34cd92ddfe8fd049160cb24f72" category="inline-link-rx"></block>。</block>
  <block id="dc5fa659e0452a77d6006f5b72f8b334" category="paragraph">要启用 Trident 与 NetApp Element 存储系统的集成，您必须创建一个后端，以便使用 iSCSI 协议与存储系统进行通信。</block>
  <block id="05ca7295321cb9b417a251e75557c6c5" category="list-text">下载的安装归档中提供了 `sample-input` folder 层次结构中的示例后端文件。对于提供 iSCSI 服务的 NetApp Element 系统，将 `backend-solidfire.json` 文件复制到您的工作目录中，然后编辑该文件。</block>
  <block id="b73d05719d0ea2964c963f6f83a34d3d" category="admonition">此文件中定义了一个名为 `FSType` 的可选字段。在 iSCSI 后端，可以将此值设置为特定的 Linux 文件系统类型（ XFS ， ext4 等），也可以将其删除以允许 OpenShift 决定要使用的文件系统。</block>
  <block id="90dc29cb8c225faef816aefeaad3027d" category="inline-link-macro">接下来：解决方案验证 / 使用情形。</block>
  <block id="99632a9c8a0d8380e77d9d11f96edfdc" category="paragraph"><block ref="99632a9c8a0d8380e77d9d11f96edfdc" category="inline-link-macro-rx"></block></block>
  <block id="920db239cf01c8ded4b7f364194ab540" category="list-text">从边栏导航到管理应用程序，然后单击创建应用程序。提供要创建的应用程序的详细信息，然后单击保存。</block>
  <block id="f4fc33973424c12639f93790b1c6f370" category="paragraph">NetApp 提供强大的全闪存（ AFF ）和横向扩展混合（ FAS ）存储平台，这些平台专为低延迟性能，集成数据保护和多协议支持量身定制。</block>
  <block id="c48db988cd283c11f89d4dd85803ec0a" category="doc">在使用 NetApp 的 Red Hat OpenShift 上配置多租户</block>
  <block id="6d72da55d82cdd434045ba5df1a959b6" category="paragraph">许多在容器上运行多个应用程序或工作负载的组织往往会为每个应用程序或工作负载部署一个 Red Hat OpenShift 集群。这样，他们就可以对应用程序或工作负载实施严格的隔离，优化性能并减少安全漏洞。但是，为每个应用程序部署一个单独的 Red Hat OpenShift 集群会产生自己的一系列问题。它增加了单独监控和管理每个集群所需的运营开销，由于为不同应用程序配置了专用资源而增加了成本，并妨碍了高效的可扩展性。</block>
  <block id="332dcd535fa9ce865f462efb80829a35" category="paragraph">要解决这些问题，可以考虑在一个 Red Hat OpenShift 集群中运行所有应用程序或工作负载。但是，在这种架构中，资源隔离和应用程序安全漏洞是主要挑战之一。一个工作负载中的任何安全漏洞都可能自然溢出到另一个工作负载，从而增加影响区域。此外，一个应用程序的任何突然不受控制的资源利用率都会影响另一个应用程序的性能，因为默认情况下没有资源分配策略。</block>
  <block id="73c1b26ace2fc5fca6e6e78c00a61837" category="paragraph">其中一个有效的解决方案是在 Red Hat OpenShift 上配置多租户。多租户是一种架构，允许多个租户在同一集群上共存，并正确隔离资源，安全性等。在这种情况下，可以将租户视为集群资源的一部分，这些资源配置为供特定用户组专用使用。在 Red Hat OpenShift 集群上配置多租户具有以下优势：</block>
  <block id="f3ff3f5b3c67fb47bb8ec0f2f688b97d" category="paragraph">对于完全实现的多租户 OpenShift 集群，必须为属于不同资源分段的集群资源配置配额和限制：计算，存储，网络连接，安全性等。虽然我们会介绍此解决方案中所有资源分段的某些方面， 我们重点介绍最佳实践，通过在由 NetApp ONTAP 提供支持的 Astra Trident 动态分配的存储资源上配置多租户，隔离并保护同一 Red Hat OpenShift 集群上多个工作负载提供或使用的数据。</block>
  <block id="1cf7b9db4d7fe091bd1bbb685e5beea8" category="paragraph">使用 Red Hat Advanced Cluster Management for Kubernetes 可以执行以下任务：</block>
  <block id="808c579683377aa7bd89b8e4d76ba220" category="list-text">跨数据中心和公有云创建，导入和管理多个集群。</block>
  <block id="7fe0555145a586e3fb769f86902ccc72" category="list-text">从一个控制台在多个集群上部署和管理应用程序或工作负载。</block>
  <block id="416434625b0f2158d99a4af37f233805" category="list-text">监控和分析不同集群资源的运行状况和状态</block>
  <block id="fed6fdd49a1e6adda0ea12a93e74ea2d" category="list-text">监控并强制实施多个集群的安全合规性。</block>
  <block id="1630dbfdd4887ce201ea82c71cde3d11" category="doc">部署适用于 Kubernetes 的高级集群管理</block>
  <block id="bc2ab7a7550cebeb52a08cf830b5ecf6" category="list-text">导航到 Operators &gt; Operators Hub ，然后搜索适用于 Kubernetes 的高级集群管理。</block>
  <block id="c4ab802b80978ba1c5de3922d546bdb7" category="list-text">选择适用于 Kubernetes 的高级集群管理，然后单击安装。</block>
  <block id="c972585d6241c4f2ed2604bcc8706358" category="list-text">在 Install Operator 屏幕上，提供必要的详细信息（ NetApp 建议保留默认参数），然后单击 Install 。</block>
  <block id="7bf3d0678c48be5730f20005e6f88aa1" category="list-text">安装操作员后，单击创建多集群中心。</block>
  <block id="95f29f27e373a9759cf065e1fde23e28" category="list-text">在 "Create MultiClusterHub " 屏幕上，在提供详细信息后单击 "Create 。此操作将启动多集群集线器的安装。</block>
  <block id="a50aa5e8249109d6f4902945e968ad7d" category="list-text">在打开集群管理命名空间中的所有 Pod 均移至运行状态且操作员移至成功状态后，将安装适用于 Kubernetes 的高级集群管理。</block>
  <block id="391dd52c88201d377f1572062e22c43e" category="list-text">完成集线器安装需要一些时间，完成后，多集群集线器将变为运行状态。</block>
  <block id="eef36825efd5d2d40e4f833635cd19da" category="list-text">它会在开放式集群管理命名空间中创建路由。连接到路由中的 URL 以访问高级集群管理控制台。</block>
  <block id="f122078c68f20c36897fec8a7c4a23e8" category="doc">OpenShift 概述</block>
  <block id="8c2b388bd42b0b6bae19890633c98a8d" category="list-text">* 安全性和容器目录。 * OpenShift 可提供多租户功能，并通过使用安全性增强型 Linux （ SELinux ）， CGroups 和安全计算模式（ seccomp ）中已建立的安全性隔离和保护容器，保护用户免受有害代码执行的影响。此外，它还通过 TLS 证书为各种子系统提供加密，并可访问经过 Red Hat 认证的容器（ access.redhat.com/containers ），这些容器经过扫描和评级，并特别强调安全性，以便为最终用户提供经过认证的，可信的安全应用程序容器。</block>
  <block id="9c2dd02f13d452b4422ac6c864933f01" category="paragraph">从 Red Hat OpenShift 4 开始， OpenShift 的部署方法包括使用用户配置基础架构（ User Provisioned Infrastructure ， UPI ）手动部署高度自定义的部署，或者使用安装程序配置的基础架构（ IPI ）完全自动化部署。</block>
  <block id="66f8ff89bd2c9146cb3273d416c60fd2" category="list-text">选择要将 Red Hat OpenShift 部署到的环境。</block>
  <block id="f5806bcee67fc8f13f0255068a186e42" category="list-text">在下一屏幕中，下载安装程序，唯一的拉取密钥以及用于管理的 CLI 工具。</block>
  <block id="d711fd24836980dd490f3c01dd3ee8de" category="paragraph">NetApp 已使用安装程序配置基础架构（ IPI ）部署方法在以下每个数据中心环境中测试和验证了 Red Hat OpenShift 在其实验室中的部署：</block>
  <block id="77caa49b32b4fc8ce3276158f57f9229" category="doc">NetApp 存储概述</block>
  <block id="50bc4bb14f0d89a22c593112574d0fb3" category="list-text">AFF 和 FAS 系统运行 NetApp ONTAP ，并为基于文件（ NFS ）和基于块（ iSCSI ）的使用情形提供存储。</block>
  <block id="bf3bfadca5040d5a50a8703c7dbb7ef1" category="list-text">Cloud Volumes ONTAP 和 ONTAP Select 在云和虚拟空间方面的优势各不相同。</block>
  <block id="cb050b8fb8c2102a0ab337119eb19f0f" category="admonition">NetApp 产品组合中的每个存储系统都可以简化内部站点和云之间的数据管理和移动，从而确保数据位于应用程序所在位置。</block>
  <block id="b432301f7ba469598e6ea2eb86e4859a" category="paragraph">通常，最易于部署的解决方案是最佳选择，但在某些情况下，需要进行高级自定义，以满足特定应用程序或要部署解决方案的环境的要求或规范。为此，采用 NetApp 解决方案的 Red Hat OpenShift 允许进行以下自定义以满足这些需求。</block>
  <block id="d31d340fd6b135cac2cfac7b04a34c10" category="list-text">在左上角，将角色从管理员更改为开发人员。单击 +Add ，然后从目录中选择。在 Filter by Keyword 栏中，搜索 Jenkins 。选择 Jenkins Service with Persistent Storage 。</block>
  <block id="fb86f2dea9912af1bb1677c9cf33e619" category="list-text">Jenkins Pod 大约需要 10 到 12 分钟才能进入就绪状态。</block>
  <block id="d59d1324dea050a2c0ffc376de411aa0" category="list-text">由于在创建 Jenkins 应用程序时使用了 OpenShift OAuth ，因此请单击使用 OpenShift 登录。</block>
  <block id="70a742210f3e3599821b3a11b682144c" category="list-text">授权 Jenkins 服务帐户访问 OpenShift 用户。</block>
  <block id="b07934b6023389a7e3e183b45e3b7448" category="list-text">此时将显示 Jenkins 欢迎页面。由于我们使用的是 Maven 内部版本，因此请先完成 Maven 安装。导航到 Manage Jenkins &gt; Global Tool Configuration ，然后在 Maven 子标题中单击 Add Maven 。输入您选择的名称，并确保已选中自动安装选项。单击保存。</block>
  <block id="8fd32305bf380bf893ef2407eae75f5d" category="list-text">现在，您可以创建一个管道来演示 CI/CD 工作流。在主页上，单击左侧菜单中的创建新作业或新建项目。</block>
  <block id="cd55d787cacfb25983e0a24b58ba6d48" category="list-text">选择管道选项卡。从试用样本管道下拉菜单中，选择 Github + Maven 。代码将自动填充。单击保存。</block>
  <block id="eaeef52618dbbd29ca52633c93abcbb4" category="list-text">选择所需的操作系统，然后单击下一步。</block>
  <block id="6befc3ce0d5cbd575434f0d5e1ec1125" category="list-text">如果选定操作系统未配置启动源，则必须对其进行配置。对于启动源，选择是要从 URL 还是从注册表导入操作系统映像，并提供相应的详细信息。展开高级并选择 Trident 支持的 StorageClass 。然后单击下一步。</block>
  <block id="3d210170d7f07fe3c907e8ac619f003a" category="doc">NetApp Astra 控制中心概述</block>
  <block id="9b0d9ae1197ded2c7d52147e5056475d" category="paragraph">NetApp Astra 控制中心为部署在内部环境中并采用 NetApp 数据保护技术的有状态 Kubernetes 工作负载提供丰富的存储和应用程序感知型数据管理服务。</block>
  <block id="f0358bd53d50b55aa0509189dd381ca9" category="paragraph">NetApp Astra 控制中心可以安装在 Red Hat OpenShift 集群上，该集群已部署 Astra Trident 存储编排程序并为其配置存储类和存储后端到 NetApp ONTAP 存储系统。</block>
  <block id="8cc4d72a7129322eb1f39ea9b9cfb2f6" category="inline-link-macro">本文档在此处提供</block>
  <block id="1c2ddd920580e1a7860afb96d7ac352e" category="paragraph">有关安装和配置 Astra Trident 以支持 Astra 控制中心的信息，请参见 <block ref="a581b27b235a239b8b186164c4dbebd1" category="inline-link-macro-rx"></block>。</block>
  <block id="876ae62d75901b9ef80277fd884aa5e9" category="paragraph">在云互联环境中， Astra 控制中心使用 Cloud Insights 提供高级监控和遥测功能。在没有 Cloud Insights 连接的情况下，可以使用有限的监控和遥测（ 7 天的指标），并通过开放式指标端点导出到 Kubernetes 原生监控工具（ Prometheus 和 Grafana ）。</block>
  <block id="54a5ba4de846d3c3ba8c0322f5139893" category="paragraph">Astra 控制中心完全集成到 NetApp AutoSupport 和 Active IQ 生态系统中，可为用户提供支持，协助进行故障排除以及显示使用情况统计信息。</block>
  <block id="34610c3089a79a0b0e58bcc24da4c16c" category="paragraph">除了已付费版本的 Astra 控制中心之外，还提供 90 天评估许可证。评估版可通过电子邮件和社区（ Slack 通道）获得支持。客户可以访问这些以及其他知识库文章以及产品支持信息板上提供的文档。</block>
  <block id="b3d5fa878980b3f5b771ced3fa94111a" category="inline-link-macro">Astra 网站</block>
  <block id="83d307afe7b187cee5d096f65402182f" category="paragraph">要开始使用 NetApp Astra 控制中心，请访问 <block ref="230f9d60eb4e7cc8be41a0e702c37eff" category="inline-link-macro-rx"></block>。</block>
  <block id="7f9648de128837be473a3b24e53ff823" category="section-title">安装 Astra 控制中心的前提条件</block>
  <block id="8ffc0d45ec909884b280603fd2556021" category="list-text">一个或多个 Red Hat OpenShift 集群。目前支持版本 4.6 EUS 和 4.7 。</block>
  <block id="526a5a0f546838d61791ded926113f71" category="list-text">必须已在每个 Red Hat OpenShift 集群上安装和配置 Astra Trident 。</block>
  <block id="7433dd0f15704f71764248a0ca105fad" category="admonition">最佳做法是，在站点上安装的每个 OpenShift 都要有一个专用的 SVM 来用于永久性存储。多站点部署需要额外的存储系统。</block>
  <block id="e32d2cb3312c2c7797ca52bd8d6ff26f" category="admonition">请参见链接 <block ref="0065297854ca0573913043e80b99a2d1" category="inline-link-macro-rx"></block> 有关已为此目的验证的负载平衡器的信息。</block>
  <block id="aa32c16385a1b749687956188e4f0d9a" category="admonition">请参见链接 <block ref="9d2000c3bba4885fe5f36ed192264583" category="inline-link-macro-rx"></block> 为此安装和配置 OpenShift 专用注册表。</block>
  <block id="8efc7e44bb98c81afc71990bff28c8ea" category="list-text">登录到 NetApp 支持站点并下载最新版本的 NetApp Astra 控制中心。为此，您需要在 NetApp 帐户中附加许可证。下载完 tarball 后，将其传输到管理工作站。</block>
  <block id="121c2592ea226f655d357a8ecd8caf2e" category="inline-link">Astra 注册站点</block>
  <block id="ba6df9237a2774d7ca28cdf134cf9314" category="admonition">要开始获取 Astra Control 的试用许可证，请访问<block ref="dd61f8f3fbfa8ca8b0a268b985d55b0e" category="inline-link-rx"></block>。</block>
  <block id="29fc4f6574f437e623e4eb9d47136931" category="list-text">开始安装之前，请将 Astra Control Center 映像推送到映像注册表。</block>
  <block id="25b4e951c048e2ae39554f36af8824b9" category="admonition">您可以选择使用 Docker 或 Podman 执行此操作，此步骤将提供这两者的说明。</block>
  <block id="a53846d7be2355a59af69a47e2cf4637" category="list-text">创建 Shell 脚本文件并将以下内容粘贴到其中。</block>
  <block id="ad3318a786149147666e961c291c6875" category="admonition">如果您的注册表使用的是不可信的证书，请编辑 shell 脚本并对` podman 推送命令 ` `podman 推送 $registry/$ （ echo $astraImage^ s/^ ……………………………………………………………………………………………………………………………………………` …</block>
  <block id="f39d61476380fc033f45c2d744596b00" category="list-text">接下来，将映像注册表 TLS 证书上传到 OpenShift 节点。为此，请使用 TLS 证书在 OpenShift-config 命名空间中创建一个配置映射，并将其修补到集群映像配置中以使此证书可信。</block>
  <block id="508ca0ca5ae419c052d9a8487bb0b2d0" category="admonition">如果您使用的是包含传入操作员的默认 TLS 证书的 OpenShift 内部注册表和路由，则仍需要按照上一步将这些证书修补到路由主机名。要从 `运算符提取证书，您可以使用命令` oc extract secret/router -ca -keys=tls.crt -n OpenShift-Inuse-operator 。</block>
  <block id="6d71c41a686bcfc0b0866044afd43f2b" category="list-text">创建用于访问该命名空间中的映像注册表的密钥。</block>
  <block id="25eb68598d15a49d385089020950412c" category="list-text">编辑 Astra 控制中心 CRD 文件 `Astra_control_center_min.yaml` 并输入 FQDN ，映像注册表详细信息，管理员电子邮件地址和其他详细信息。</block>
  <block id="42b9bde28896d6478a324770641ac301" category="admonition">先前的文件 `Astra_control_center_min.yaml` 是 Astra 控制中心 CRD 的最低版本。如果要创建具有更多控制权的 CRD ，例如定义非默认创建 PVC 的 storageclass 或为邮件通知提供 SMTP 详细信息，则可以编辑文件 `Astra_control_center.YAML` ，输入所需详细信息，然后使用它创建 CRD 。</block>
  <block id="68a6fcf9c2943281db013ef2ebb142f2" category="section-title">安装验证</block>
  <block id="e3cd33ca69b8e508c973939783f528db" category="list-text">完成安装可能需要几分钟时间。验证 `NetApp-Astra-cc` 命名空间中的所有 Pod 和服务是否均已启动且正在运行。</block>
  <block id="c27deb19babf146e6377dce25b1e70e7" category="list-text">用于登录到 Astra 控制中心的用户名是 CRD 文件中提供的管理员电子邮件地址，密码是附加到 Astra 控制中心 UUID 的字符串 `Acc-` 。运行以下命令：</block>
  <block id="57a7aa2eaf00ddaa73ef6b49299ade6e" category="admonition">在此示例中，密码为 `Acc-345c55a5-bf2e-21f0-84b8-b6f2bce5e95f` 。</block>
  <block id="19bae630567610f1955167595b8daae3" category="list-text">首次使用 CRD 中提供的管理员电子邮件地址登录到 Astra 控制中心图形用户界面时，您需要更改密码。</block>
  <block id="0c62383e1115b208212b5a634214ae37" category="list-text">如果要将用户添加到 Astra 控制中心，请导航到 Account &gt; Users ，单击 Add ，输入用户的详细信息，然后单击 Add 。</block>
  <block id="60423d24e49c8db4836be0abd09fb78d" category="doc">NetApp ONTAP iSCSI 配置</block>
  <block id="cbaa3aa588b8aa5c85dca443c15a0195" category="doc">NetApp ONTAP NFS 配置</block>
  <block id="f897eefba2c59919d6493db4825e2db2" category="admonition">最佳做法是，将自定义 backendName 值定义为 storageDriverName 和为 NFS 提供服务的 dataLIF 的组合，以便于识别。</block>
  <block id="a802e9436bb9bcbfa2b88bb549e28503" category="paragraph">在大多数情况下， Red Hat OpenShift 会通过路由向外部世界提供应用程序。通过为服务提供一个可从外部访问的主机名来公开该服务。OpenShift 路由器可以使用定义的路由及其服务标识的端点，以便为外部客户端提供此命名连接。</block>
  <block id="abd6754aa5a185ca83b3f00c5da68534" category="inline-link-macro">接下来：解决方案验证 / 使用情形。</block>
  <block id="8bfe62be82a77570753936203ee020ca" category="paragraph"><block ref="8bfe62be82a77570753936203ee020ca" category="inline-link-macro-rx"></block></block>
  <block id="445b72f2cbecd97022bb6636eda3cbc7" category="cell">为不同的应用程序或工作负载创建项目</block>
  <block id="bfc5fb8ef5464441bc8b3ca7eda2892d" category="cell">验证对已分配项目中的 PVC 或 Pod 的创建或修补访问权限</block>
  <block id="9e95c94350b2b7b51176ad958deb1388" category="cell">验证对在其他项目中创建或修补 PVC 或 Pod 的访问权限</block>
  <block id="8c0b7954d326b4bcf2f42a57ef00eead" category="cell">验证对查看或编辑项目， ResourceQuotas 和 StorageClasses 的访问权限</block>
  <block id="c2c2a82496277a88b32b0e8d27249d3d" category="inline-link-macro">下一步：保护应用程序。</block>
  <block id="d5be948b8a7fea6618eb171c64927be2" category="paragraph"><block ref="d5be948b8a7fea6618eb171c64927be2" category="inline-link-macro-rx"></block></block>
  <block id="bbb49986c10d9b599ce8b72ea09d5261" category="list-text">导航到 Operators &gt; OperatorHub 并搜索 OpenShift 虚拟化。</block>
  <block id="2515fbef39d57544723402c683215c64" category="doc">NetApp 存储集成概述</block>
  <block id="689ca76b61ed9331405d36eb5ded709d" category="paragraph">NetApp 提供了许多产品，可帮助您在基于容器的环境中编排和管理永久性数据，例如 Red Hat OpenShift 。</block>
  <block id="bc2397695676d1a63e489d4c80c8cd91" category="paragraph">通过适用于 Kubernetes 的高级集群管理功能，用户可以从控制台同时在一个或多个受管集群上创建资源。例如，如果您的 OpenShift 集群位于不同站点，并由不同的 NetApp ONTAP 集群提供支持，并且希望在两个站点上配置 PVC ，则可以单击顶部栏上的（ + ）符号。然后，选择要创建 PVC 的集群，粘贴资源 YAML ，然后单击创建。</block>
  <block id="2fb91f8695d5dc9db4bf5a7ef710ec73" category="list-text">Astra 控制中心会检测符合条件的存储类。现在，选择使用 NetApp ONTAP 上由 SVM 支持的 Trident 配置卷的 storageclass 方式，然后单击查看。在下一个窗格中，验证详细信息，然后单击 Add Cluster 。</block>
  <block id="3edb3c83eb1bede6778cc1960a651973" category="list-text">按照步骤 1 中所述注册两个 OpenShift 集群。添加后，集群将变为 " 正在发现 " 状态，而 Astra 控制中心将对其进行检查并安装必要的代理。成功注册后，集群状态将更改为 " 正在运行 " 。</block>
  <block id="ed5c1a60b8165b8bc691cbdf1b0d122c" category="admonition">在受管集群上安装的代理从该注册表中提取映像时，由 Astra 控制中心管理的所有 Red Hat OpenShift 集群都应有权访问用于安装的映像注册表。</block>
  <block id="feab1371530d1ef069d928e811bcb08b" category="list-text">要导入 ONTAP 集群，请转到后端，单击下拉列表，然后选择要管理的 ONTAP 集群旁边的管理。输入 ONTAP 集群凭据，单击查看信息，然后单击导入存储后端。</block>
  <block id="d5a9f831c51dc05a9b40eae2850329fc" category="inline-link-macro">接下来：选择要保护的应用程序。</block>
  <block id="74dd157086250792afa856d5a6c32777" category="paragraph"><block ref="74dd157086250792afa856d5a6c32777" category="inline-link-macro-rx"></block></block>
  <block id="a62e902f0d244d960eddf2f14d3afa6f" category="paragraph">基于裸机的 OpenShift 可在商用服务器上自动部署 OpenShift 容器平台。</block>
  <block id="0e05c6235b67ae8e5b743c9ca77358fa" category="paragraph">基于裸机的 OpenShift 类似于 OpenShift 的虚拟部署，它可以轻松部署，快速配置和扩展 OpenShift 集群，同时还可以为尚未准备好进行容器化的应用程序提供虚拟化工作负载支持。通过在裸机上部署，除了 OpenShift 环境之外，您无需额外的开销即可管理主机虚拟机管理程序环境。通过直接在裸机服务器上部署，您还可以减少主机和 OpenShift 环境之间共享资源的物理开销限制。</block>
  <block id="9a3c3034787ddbd4af974d73f795c75a" category="list-text">* IPI 或辅助安装程序部署。 * 借助由安装程序配置基础架构（ IPI ）在裸机服务器上部署的 OpenShift 集群，客户可以直接在商用服务器上部署高度通用且易于扩展的 OpenShift 环境，而无需管理虚拟机管理程序层。</block>
  <block id="bf995f5252e568d22b265ec62c16914c" category="list-text">* 紧凑型集群设计。 * 为了最大限度地降低硬件要求，在裸机上使用 OpenShift ，用户只需部署包含 3 个节点的集群，它还允许 OpenShift 控制面板节点充当辅助节点和主机容器。</block>
  <block id="13442dfd439ae0a377b0a2d2d9df1709" category="list-text">* OpenShift 虚拟化。 * OpenShift 可以使用 OpenShift 虚拟化在容器中运行虚拟机。此容器本机虚拟化可在容器内运行 KVM 虚拟机管理程序，并为 VM 存储附加永久性卷。</block>
  <block id="6e6a5272d3c6f8eceb96e3c19f0faaf6" category="list-text">* 由 AI/ML 优化的基础架构。 * 通过将基于 GPU 的员工节点整合到 OpenShift 环境中并利用 OpenShift 高级计划，为机器学习应用程序部署 Kubeflow 等应用程序。</block>
  <block id="6bc136fcf409560a1029f6f323619bbf" category="paragraph">NetApp 解决方案上的 Red Hat OpenShift 使用两个数据交换机提供 25 Gbps 的主数据连接。它还使用两个管理交换机，这些交换机以 1 Gbps 的速度提供连接，用于存储节点的带内管理以及 IPMI 功能的带外管理。</block>
  <block id="17fea9675576fc9c72deb9501a5fd16a" category="paragraph">对于 OpenShift 裸机 IPI 部署，您必须创建一个配置程序节点，即必须将网络接口连接到不同网络的 Red Hat Enterprise Linux 8 计算机。</block>
  <block id="2f42f99315e0171a6e5c61957ae4689c" category="list-text">* 配置网络。 * 此网络用于启动裸机节点并安装部署 OpenShift 集群所需的映像和软件包。</block>
  <block id="aba727a2dc3dd836a33a2022bb2a9c3f" category="list-text">* 裸机网络。 * 此网络用于在部署集群后进行面向公共的通信。</block>
  <block id="7633522f66aaba6bc4bb2c25d299d287" category="paragraph">在设置配置程序节点时，客户会创建网桥接口，以便在节点本身以及为部署目的配置的 Bootstrap 虚拟机上正确路由流量。部署集群后， API 和传入 VIP 地址将从启动节点迁移到新部署的集群。</block>
  <block id="963d7d04e1f1692a7fc49ae899123dbd" category="paragraph">以下图像显示了 IPI 部署期间和部署完成后的环境。</block>
  <block id="f53272342c85041784b2d5136e6eaa7d" category="cell">裸机网络</block>
  <block id="11405696f0e53417a3847f430a7b8ed0" category="cell">配置网络</block>
  <block id="eb5f501445f81cb1f7f4cf290565f9c8" category="admonition">尽管这些网络中的每个网络实际上都由 VLAN 分隔，但必须在访问模式下设置每个物理端口并分配主 VLAN ，因为在 PXE 启动序列期间无法传递 VLAN 标记。</block>
  <block id="3ab0ae61b5256f874297403903fd5afc" category="paragraph">在部署 OpenShift 容器平台之前，应具备以下基础架构：</block>
  <block id="06a9d12a76441fd395abeba7bf0d7b91" category="list-text">至少一个 DNS 服务器，该服务器可提供可从带内管理网络和 VM 网络访问的完整主机名解析。</block>
  <block id="b611590ed189a9cbc27648402168f00a" category="inline-link-macro">接下来： NetApp 存储概述。</block>
  <block id="2be0276ec05c9b03a47573ad9795095a" category="paragraph"><block ref="2be0276ec05c9b03a47573ad9795095a" category="inline-link-macro-rx"></block></block>
  <block id="932e95da8a59703292a426466e703c7a" category="paragraph">Red Hat 虚拟化（ RHV ）是一个企业级虚拟数据中心平台，运行在 Red Hat Enterprise Linux （ RHEL ）上，并使用 KVM 虚拟机管理程序。</block>
  <block id="c29d3f9be705e3dcf947c6d2464cb090" category="list-text">* 自托管引擎。 * 为最大程度地降低硬件要求， RHV 允许将 RHV Manager （ RHV-M ）部署为运行子虚拟机的主机上的 VM 。</block>
  <block id="e2545c34b3a35dbcd93423b539eae91a" category="list-text">* 高可用性。 * 为避免在主机发生故障时发生中断，可以通过 RHV 配置虚拟机以实现高可用性。高可用性 VM 可通过故障恢复策略在集群级别进行控制。</block>
  <block id="8f91b3a5c6d176cad584bb5f06c53684" category="list-text">* 高可扩展性。 * 一个 RHV 集群最多可以包含 200 个虚拟机管理程序主机，从而支持大型 VM 的需求，从而托管资源耗用的企业级工作负载。</block>
  <block id="a175fea9b8830c0cdbe1b268cb114738" category="list-text">* 增强的安全性。 * RHV 继承了 RHV 的功能，安全虚拟化（ sVirt ）和安全增强型 Linux （ SELinux ）技术被 RHV 用于提高主机和 VM 的安全性和增强性能。这些功能的主要优势是对虚拟机及其相关资源进行逻辑隔离。</block>
  <block id="cd4c83df745cf56330120fb3ac308da2" category="paragraph">NetApp 解决方案上的 Red Hat OpenShift 使用两个数据交换机提供 25 Gbps 的主数据连接。它还使用两个额外的管理交换机，这些交换机以 1 Gbps 的速度提供连接，用于存储节点的带内管理以及 IPMI 功能的带外管理。OCP 使用 RHV 上的虚拟机逻辑网络进行集群管理。本节介绍解决方案中使用的每个虚拟网段的布局和用途，并概述部署解决方案的前提条件。</block>
  <block id="c347686b0750301dfca053b321126bcc" category="cell">对 RHP-H 节点， RHP-Manager 和 ovirtmgmt 网络进行管理</block>
  <block id="4a3fe6077a529bcbe033bbb7d13027d6" category="paragraph">由于 Red Hat OpenShift 最初使用三个主节点进行部署，因此在双节点配置中，可以确保至少有两个主节点将占用同一节点，如果特定节点不可用，可能会导致 OpenShift 中断。因此， Red Hat 的最佳实践是，在解决方案中至少部署三个 RHV-H 虚拟机管理程序节点，以便 OpenShift 主节点可以均匀分布，并且解决方案可以获得更多的容错能力。</block>
  <block id="02d7502b2b132a675665088322fde9b0" category="paragraph">为参数定义的条件可以是强制实施，也可以是软强制实施。强制实施可确保关联组中的 VM 始终严格遵循正负关联性，而不考虑外部条件。软强制实施可确保在可行的情况下为关联组中的 VM 设置更高的首选项，以遵循正或负关联性。在本文档所述的两个或三个虚拟机管理程序配置中，建议使用软关联性设置。在大型集群中，硬关联可以正确分布 OpenShift 节点。</block>
  <block id="2b083bcbbb2d2208e64c13cb183af44f" category="paragraph">IPI 可通过本文档前面讨论的交互式向导轻松部署 OpenShift 集群。但是，在集群部署过程中，可能需要更改某些默认值。</block>
  <block id="a5867d73fa54e5b850ff2642c45ade52" category="paragraph">在这些情况下，您无需立即部署集群即可运行和执行向导任务。而是会创建一个配置文件，以便稍后从该文件部署集群。如果要更改任何 IPI 默认值，或者要在环境中部署多个相同的集群以用于多租户等其他用途，则此功能非常有用。有关为 OpenShift 创建自定义安装配置的详细信息，请参见<block ref="15427a9f842d7a49b872cf64115f33bc" category="inline-link-rx"></block>。</block>
  <block id="1d45b25ba986072287aaf72b6cf94130" category="paragraph">虽然默认情况下，由 NetApp ONTAP 提供支持的 Red Hat OpenShift 和 Astra Trident 不会在工作负载之间提供隔离，但它们提供了广泛的功能，可用于配置多租户。为了更好地了解如何在采用 NetApp ONTAP 支持的 Astra Trident 的 Red Hat OpenShift 集群上设计多租户解决方案，让我们考虑一个包含一系列要求的示例，并概述其配置。</block>
  <block id="385df0e95c28430fb792ec836529f371" category="paragraph">假设一个组织在一个 Red Hat OpenShift 集群上运行两个工作负载，作为两个不同团队正在处理的两个项目的一部分。这些工作负载的数据驻留在由 NetApp ONTAP NAS 后端的 Astra Trident 动态配置的 PVC 上。该组织需要为这两个工作负载设计多租户解决方案，并隔离用于这些项目的资源，以确保保持安全性和性能，主要侧重于为这些应用程序提供服务的数据。</block>
  <block id="9c965c0beb472bc9265925ebbc55507e" category="paragraph">下图展示了由 NetApp ONTAP 提供支持的带有 Astra Trident 的 Red Hat OpenShift 集群上的多租户解决方案。</block>
  <block id="72710b926f57dad99b29203c63f4e3fd" category="paragraph">从 Red Hat OpenShift 集群的角度来看，要开始使用的顶级资源是项目。OpenShift 项目可以视为将整个 OpenShift 集群划分为多个虚拟集群的集群资源。因此，项目级别的隔离为配置多租户提供了基础。</block>
  <block id="20e1834bb9396599a6dcf7d743aa1b36" category="paragraph">下一步是在集群中配置 RBAC 。最佳做法是，将处理单个项目或工作负载的所有开发人员配置到身份提供程序（ IdP ）中的单个用户组中。Red Hat OpenShift 允许 IdP 集成和用户组同步，从而允许将 IdP 中的用户和组导入到集群中。这样可以帮助集群管理员将项目专用集群资源的访问权限隔离给一个或多个处理该项目的用户组，从而限制对任何集群资源的未授权访问。要了解有关 IdP 与 Red Hat OpenShift 集成的详细信息，请参见相关文档<block ref="213cff8958909b80a9514e0c8321d8ef" category="inline-link-rx"></block>。</block>
  <block id="6d4e96186b1f4267def393ec42bf2d9e" category="paragraph">必须隔离用作 Red Hat OpenShift 集群永久性存储提供程序的共享存储，以确保在存储上为每个项目创建的卷在主机上显示为它们，就像在单独的存储上创建一样。为此，请在 NetApp ONTAP 上创建与项目或工作负载数量相同的 SVM （ Storage Virtual Machine ），并将每个 SVM 专用于一个工作负载。</block>
  <block id="14b7e6063ba0fc293205b5f063ff5951" category="paragraph">在 NetApp ONTAP 上为不同项目创建不同的 SVM 之后，必须将每个 SVM 映射到不同的 Trident 后端。Trident 上的后端配置会将永久性存储分配给 OpenShift 集群资源，并且需要将 SVM 的详细信息映射到。此驱动程序至少应为后端的协议驱动程序。或者，您也可以通过它定义如何在存储上配置卷，并设置卷大小或聚合使用量等限制。有关 NetApp ONTAP 的 Trident 后端定义的详细信息，请参见<block ref="d13b7d5e649388dcbd372dea81ac2cd7" category="inline-link-rx"></block>。</block>
  <block id="666ef279afb3e53e20493813e1d5ba72" category="paragraph">配置 Trident 后端后，下一步是配置 StorageClasses 。配置与后端相同数量的存储类，为每个存储类提供访问权限，以便仅在一个后端启动卷。在定义存储类时，我们可以使用 storagePools 参数将 StorageClass 映射到特定的 Trident 后端。可以找到用于定义存储类的详细信息<block ref="fea785e27a2821a3ea27566d55a5d6cd" category="inline-link-rx"></block>。因此，从 StorageClass 到 Trident 后端存在一对一映射，这种映射可指向一个 SVM 。这样可以确保通过分配给该项目的 StorageClass 处理的所有存储请求仅由专用于该项目的 SVM 处理。</block>
  <block id="76245f392269db8492c3610e325b1963" category="paragraph">由于存储类不是命名空间资源，我们如何确保拒绝另一命名空间或项目中的 Pod 向一个项目的存储类声明？问题解答将使用 ResourceQuotas 。ResourceQuotas 是控制每个项目资源总使用量的对象。它可以限制项目中的对象可以使用的资源数量以及总资源量。使用 ResourceQuotas 几乎可以限制项目中的所有资源，而高效地使用此功能可以帮助组织降低因过度配置或过度消耗资源而导致的成本和中断。请参见文档<block ref="9b2bb9683c8f6144876bed616f252527" category="inline-link-rx"></block> 有关详细信息 ...</block>
  <block id="5402bb91006fe391aea122e11c3607db" category="paragraph">对于这种使用情形，我们需要限制特定项目中的 Pod 从非专用于其项目的存储类中申请存储。为此，我们需要通过将 ` &lt;storage-class-name&gt;.storageclass.storage.k8s.io/persistentvolumeclaims` 设置为 0 来限制其他存储类的永久性卷请求。此外，集群管理员必须确保项目中的开发人员不应有权修改 ResourceQuotas 。</block>
  <block id="b1a934cbded2602c4186fb43d7c8a986" category="paragraph">根据具体使用情形，容器和虚拟机（ VM ）均可用作不同类型应用程序的最佳平台。因此，许多组织在容器上运行部分工作负载，而在 VM 上运行部分工作负载。通常，这会导致企业面临额外的挑战，需要管理不同的平台：虚拟机管理程序和应用程序容器编排程序。</block>
  <block id="14bd8c5f1032dd20f94d4434365c6530" category="admonition">本节中提供的角色定义只是一个示例。必须根据最终用户要求定义开发人员角色。</block>
  <block id="cf17c458ea3abaad557d7cfc69886dbe" category="list-text">在集群中的所有项目中创建一个用于管理 ResourceQuotas 的角色，以将其连接到存储管理员：</block>
  <block id="db99ab183aa8f56c951cf20e25e7465c" category="list-text">确保集群与组织的身份提供程序集成，并且用户组与集群组同步。以下示例显示身份提供程序已与集群集成并与用户组同步。</block>
  <block id="38f22acd9ae9c74099644738d613baaa" category="admonition">对于存储管理员，必须绑定两个角色： Trident 操作员和资源配额。</block>
  <block id="3434f6853d017037506e47f83a18c3eb" category="section-title">创建私有映像注册表</block>
  <block id="9b1c6f527a1a481b925397807f319e71" category="list-text">在 `sPec` 部分中输入以下存储参数，以编辑 imageeregistry 运算符。</block>
  <block id="9ef71cd5ccaeb28206cd64b1d184019c" category="list-text">在 `sPec` 部分中输入以下参数，以便使用自定义主机名创建 OpenShift 路由。保存并退出。</block>
  <block id="e0b23bc469102cf89472e5734da92a23" category="admonition">如果要为路由设置自定义主机名，则会使用上述路由配置。如果您希望 OpenShift 使用默认主机名创建路由，可以将以下参数添加到 `sPec` 部分： `defaultRoute ： true` 。</block>
  <block id="625bd6ae5e3ac822b187b90d50edb553" category="sidebar-title">自定义 TLS 证书</block>
  <block id="08e414328e39f86009287c06a5f23d23" category="paragraph">默认情况下，当您为路由使用自定义主机名时，它会使用 OpenShift 入口操作员的默认 TLS 配置。但是，您可以向路由添加自定义 TLS 配置。为此，请完成以下步骤：</block>
  <block id="60d14675c3111738a4ed19528764a7b1" category="list-text">使用路由的 TLS 证书和密钥创建密钥。</block>
  <block id="47f7f890b5c1bcb52ae163771dbf35b0" category="list-text">编辑 imageeregistry 运算符，并将以下参数添加到 `sPec` 部分。</block>
  <block id="9199ff34349c38138ad0275e447e6588" category="list-text">再次编辑 imageeregistry 运算符，并将该运算符的管理状态更改为 `Maned` state 。保存并退出。</block>
  <block id="2bc42a1a9a963d9a3ff2118466e5db07" category="list-text">如果满足所有前提条件，则会为专用映像注册表创建 PVC ， Pod 和服务。几分钟后，注册表就会启动。</block>
  <block id="1f3713e339193dd15865ca74785eaa2c" category="list-text">如果您对传入操作员 OpenShift 注册表路由使用默认 TLS 证书，则可以使用以下命令提取 TLS 证书。</block>
  <block id="295132dd97e1047a7c09e6a48054c469" category="list-text">要允许 OpenShift 节点访问并从注册表中提取映像，请将证书添加到 OpenShift 节点上的 Docker 客户端。使用 TLS 证书在 `OpenShift-config` 命名空间中创建一个配置映射，并将其修补到集群映像配置中以使此证书可信。</block>
  <block id="98f3e484001465a59149c551e8d88cf0" category="list-text">OpenShift 内部注册表由身份验证控制。所有 OpenShift 用户都可以访问 OpenShift 注册表，但登录用户可以执行的操作取决于用户权限。</block>
  <block id="561d4c8140016564eee98ecbc20f9add" category="list-text">要允许用户或用户组从注册表中提取映像，必须为用户分配注册表查看器角色。</block>
  <block id="88167e36ea0f872788407d0e01fc1382" category="list-text">要允许用户或用户组写入或推送映像，必须为用户分配注册表编辑器角色。</block>
  <block id="5ba9e8f3c64be4c82249856cac87a071" category="list-text">要使 OpenShift 节点能够访问注册表并推送或拉取映像，您需要配置拉取密钥。</block>
  <block id="fe2033a9e377624583baa802ffd9ce6d" category="list-text">要将其修补到服务帐户，请运行以下命令。</block>
  <block id="59bd1dbdd3278e23e67bcabffbc4d55a" category="list-text">要在 Pod 定义中引用 Pull secret ，请将以下参数添加到 `sPec` 部分。</block>
  <block id="c0c3b4069e9a2e249507f67a6a2a3b07" category="list-text">要从 OpenShift 节点以外的工作站推送或拉取映像，请完成以下步骤。</block>
  <block id="312eaa3acf94b813cfe857f63a602724" category="list-text">使用 oc login 命令登录到 OpenShift 。</block>
  <block id="cb4744e00672fbf6eba33b1b86d23ae0" category="list-text">使用 podman/Docker 命令使用 OpenShift 用户凭据登录到注册表。</block>
  <block id="aa20d170f1ff336ec9079cf6dd1ccee3" category="list-text">推送或拉图像。</block>
  <block id="85ca996063b5ec233e56a20ba93c5f44" category="list-text">导航到存储 &gt; Storage VM ，然后单击添加。通过提供所需的详细信息，创建两个 SVM ，一个用于 project-1 ，另一个用于 project-2 。此外，还可以创建 vsadmin 帐户来管理 SVM 及其资源。</block>
  <block id="b436e7799d01413277e05983e509574a" category="list-text">以存储管理员身份登录到 Red Hat OpenShift 集群。</block>
  <block id="f934b433773b966e5ebe0c7172decda4" category="admonition">在此示例中，我们使用的是 ontap-NAS 驱动程序。根据使用情形创建后端时，请使用相应的驱动程序。</block>
  <block id="4e92dab2ab2bbe684f09a2aca58c9e44" category="list-text">NetApp ONTAP 集群。</block>
  <block id="f675b3d5e1e137870f481a742a3ec0af" category="list-text">集群上安装的 Trident 。</block>
  <block id="1db1a9d97c708824712706fc4267ec25" category="list-text">安装了 tridentctl 和 oc 工具并将其添加到 $path 中的管理工作站。</block>
  <block id="7cf4175762acfbabf9178d34f2504b28" category="list-text">对 ONTAP 的管理员访问权限。</block>
  <block id="10a540d0ed57154e8676c5725af53935" category="list-text">对 OpenShift 集群的集群管理员访问。</block>
  <block id="6340f6ab1111f349228595ebceb8f6db" category="list-text">集群已与身份提供程序集成。</block>
  <block id="9e110c19bb79322a0b76199795550dea" category="list-text">身份提供程序经过配置，可以有效区分不同团队中的用户。</block>
  <block id="39d08ecbb9add7bd87659df206457a73" category="list-text">用于集线器集群的 Red Hat OpenShift 集群（版本 4.5 以上）</block>
  <block id="d60c66eb778a488709534045787b6a26" category="list-text">对 Red Hat OpenShift 集群的集群管理员访问</block>
  <block id="3fc5f6755312b7edeef9542bd55ef639" category="section-title">监管和风险</block>
  <block id="87f4e127e0ecf99187b35830ca7e78aa" category="list-text">从边栏导航到监管和风险。</block>
  <block id="0ecc505d3375f8bb3bd959aaaf7e710a" category="list-text">要创建合规性策略，请单击创建策略，输入策略标准的详细信息，然后选择应遵循此策略的集群。如果要自动修复此策略的违规，请选中 " 如果支持，则强制 " 复选框，然后单击 " 创建 " 。</block>
  <block id="ea1abad541ee7994705555d53c0281c3" category="list-text">导航到工作负载 &gt; 虚拟化 &gt; 虚拟机，然后单击要克隆的虚拟机旁边的省略号。</block>
  <block id="81ab8abf2317781c0eb6f4deeaeea5a5" category="list-text">导航到 "Storage"&gt;"PersistentVolumeClass" ，然后单击附加到源 VM 的 PVC 旁边的省略号。</block>
  <block id="5ba8ff3c009683ee423b0884c25360d0" category="list-text">导航到工作负载 &gt; 虚拟化 &gt; 虚拟机，然后单击创建 &gt; 使用 YAML 。</block>
  <block id="cd32f6b0aebb29494cbc9cc21a10c926" category="list-text">在规范 &gt; 模板 &gt; 规范 &gt; 卷部分中，附加克隆的 PVC ，而不是容器磁盘。根据您的要求提供新虚拟机的所有其他详细信息。</block>
  <block id="f79c612e785ac74789a25e8dda9e8731" category="doc">Astra Trident 概述</block>
  <block id="d5cbeca32d73011c04935c16b2354a8d" category="paragraph">最新版本的 Astra Trident 是 2021 年 7 月发布的 21.07 版。已测试的 Trident 版本的支持列表，可在该支持列表中找到 Kubernetes 分发版本<block ref="dce7c52b3f1670b02b7a6d06eda6f8c5" category="inline-link-rx"></block>。</block>
  <block id="66397e1304e063a18fcee18c6e14aefb" category="list-text">将安装归档下载到管理工作站并提取内容。Trident 的当前版本为 21.07 ，可以下载<block ref="76ce6083b506b9f441ed0547bf1a84fd" category="inline-link-rx"></block>。</block>
  <block id="195fb7289db872221837de2f96721e05" category="paragraph">有关详细信息，请访问 Astra Trident 网站<block ref="727f15aa2af8bdae071f864617bcc142" category="inline-link-rx"></block>。</block>
  <block id="bd4a2d19c5168aa8c2b89b4affba2402" category="cell">9.8 ， 9.9.1</block>
  <block id="c1332fafdb8a2b2f43a59cf9254b881a" category="cell">21.07.1</block>
  <block id="a38c24ba09284f027e0cf4b9de820cca" category="inline-link"><block ref="a38c24ba09284f027e0cf4b9de820cca" category="inline-link-rx"></block></block>
  <block id="744e3fb2872b46d360c61869c864b352" category="paragraph"><block ref="744e3fb2872b46d360c61869c864b352" category="inline-link-rx"></block></block>
  <block id="4af39dbe40f8a0467bbdd739a971f0ea" category="admonition">以下消息指示 Astra 控制中心已成功安装。</block>
  <block id="5946314197ad84982efa6561d9da8302" category="list-text">获取 traefik 服务负载平衡器 IP 。</block>
  <block id="298a1e8781e536e60684ab1700c60962" category="list-text">在 DNS 服务器中添加一个条目，将 Astra 控制中心 CRD 文件中提供的 FQDN 指向 traefik 服务的 `external-IP` 。</block>
  <block id="0c64767e085896708adcbcc1c32c55fe" category="inline-image-macro">为 Accc 图形用户界面添加 DNS 条目</block>
  <block id="1c278e58c0255ae1f09fc4fa520160b6" category="paragraph"><block ref="1c278e58c0255ae1f09fc4fa520160b6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a37ba7c36c036650f5e1e7ded5232245" category="list-text">要使 Astra 控制中心的所有功能正常运行，需要获得许可证。要添加许可证，请导航到 " 帐户 "&gt;" 许可证 " ，单击 " 添加许可证 " ，然后上传许可证文件。</block>
  <block id="a003986254b5a6c136733113505348da" category="doc">安装 F5 BIG-IP 负载平衡器</block>
  <block id="048600e045fd4c5afe58ec9d65aa4b19" category="paragraph">F5 BIG-IP 是一款应用程序交付控制器（ Application Delivery Controller ， AD ），可提供一系列高级生产级流量管理和安全服务，例如 L4-L7 负载平衡， SSL/TLS 卸载， DNS ，防火墙等。这些服务可显著提高应用程序的可用性，安全性和性能。</block>
  <block id="5c47e8322efb7f77c0aa515fec29477e" category="paragraph">F5 BIG-IP 可以在专用硬件上，云中或内部虚拟设备上以各种方式进行部署和使用。请参见此处的文档，了解如何根据需要部署 F5 BIG-IP 。</block>
  <block id="16a275a8b38f9c5211732c331edb7135" category="paragraph">为了将 F5 BIG-IP 服务与 Red Hat OpenShift 高效集成， F5 提供了 BIG-IP 容器传入服务（ BIG-IP Container Ingress Service ， CIS ）。CI 作为控制器 POD 进行安装，用于监控 OpenShift API 以获取某些自定义资源定义（ Custom Resource Definitions ， CRD ），并管理 F5 BIG-IP 系统配置。可以配置 F5 BIG-IP CIS ，以控制 OpenShift 中的服务类型 LoadBalbalers" 和 " 路由 " 。</block>
  <block id="e3ce824a7aff01576faaac58df9e0b18" category="paragraph">此外，要自动分配 IP 地址以服务类型负载平衡器，您可以使用 F5 IPAM 控制器。F5 IPAM 控制器作为控制器 POD 进行安装，该控制器 POD 会通过 ipamLabel 标注监视 OpenShift API 以获取负载平衡器服务，以便从预配置的池分配 IP 地址。</block>
  <block id="3b08b142099d42d5280d7b493288bf63" category="paragraph">此页面列出了 F5 BIG-IP CIS 和 IPAM 控制器的安装和配置说明。作为前提条件，您必须已部署并获得 F5 BIG-IP 系统的许可。此外，它还必须获得 SDN 服务的许可，这些服务默认包含在 BIG-IP VE 基础许可证中。</block>
  <block id="5fb7b483d0c9fa099945579d826691b8" category="admonition">F5 BIG-IP 可以在独立模式或集群模式下部署。出于此验证的目的， F5 BIG-IP 部署在独立模式下，但出于生产目的，最好使用由大型 IP 组成的集群来避免单点故障。</block>
  <block id="0d3e8be481c0c23fd0a68da9a9340ef7" category="admonition">F5 BIG-IP 系统可以部署在专用硬件上，云中或内部部署的虚拟设备中，其版本高于 12.x ，以便与 F5 CIS 集成。在本文档中，我们已将 F5 BIG-IP 系统验证为虚拟设备，例如使用 BIG-IP VE 版本。</block>
  <block id="39bc153685f2a0c6d56db4227295a3b0" category="section-title">经过验证的版本</block>
  <block id="00d0a06cc7c922b3bc62b22524723ff8" category="cell">F5 BIG-IP VE 版本</block>
  <block id="5bd03f916d1e7b0410d0d3b2d12c6366" category="cell">16.1.0</block>
  <block id="c6f7874f49f685ffdf1b5a8aad8875c4" category="cell">F5 容器传入服务</block>
  <block id="21f47a5b35d016c2f0f8f57704079407" category="cell">2.5.1</block>
  <block id="9635118f932e26e24f0ca315d3843379" category="cell">F5 IPAM 控制器</block>
  <block id="5256eb2d6e3cf80e003a290e63843800" category="cell">0.1.4</block>
  <block id="088afeececf092d5a406e0f5022a9638" category="cell">F5 AS3</block>
  <block id="425b0ca2d1d9d5c75555116fcd1614bf" category="cell">3.30.0</block>
  <block id="7cd8fb6e31cc946c078d2740c76a9899" category="section-title">安装</block>
  <block id="b9a4064fa117596b59fb18df84df74df" category="inline-link">F5 AS3 GitHub 存储库</block>
  <block id="6463cf716c052865ec9f4716ff0b5d3f" category="list-text">安装 F5 Application Services 3 扩展，以允许 BIG-IP 系统接受 JSON 中的配置，而不是强制命令。转至<block ref="0d4e47593b830323684cdec40cb60c71" category="inline-link-rx"></block>，并下载最新的 RPM 文件。</block>
  <block id="4c0802ebd79a8c6e5ea4aed829f023c9" category="list-text">登录到 F5 BIG-IP 系统，导航到 "iApps" &gt; "Package Management LX" ，然后单击 "Import" 。</block>
  <block id="3536ed517a711f49cfe64071db031cf5" category="list-text">单击选择文件并选择已下载的 AS3 RPM 文件，单击确定，然后单击上传。</block>
  <block id="2a90f793207a5a0c028d8ccc45e943fd" category="inline-image-macro">上传 iApps</block>
  <block id="7a3eaac0605c201c339e116a475c0bf6" category="paragraph"><block ref="7a3eaac0605c201c339e116a475c0bf6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="caedd771b59d267eda8f88d329e8784f" category="list-text">确认 AS3 扩展已成功安装。</block>
  <block id="c434efeb83b6dc500ea7893f1ad4236b" category="inline-image-macro">AS3 安装验证</block>
  <block id="eb52ccb2be126d28d17e4383ae6ea6cf" category="paragraph"><block ref="eb52ccb2be126d28d17e4383ae6ea6cf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="97e9e05bfde432cfa7291b1e55a52ba7" category="list-text">接下来，配置 OpenShift 和 BIG-IP 系统之间通信所需的资源。首先，通过在 OpenShift SDN 的 BIG-IP 系统上创建 VXLAN 通道接口，在 OpenShift 和 BIG-IP 服务器之间创建通道。导航到 " 网络 "&gt;" 通道 "&gt;" 配置文件 " ，单击 " 创建 " ，然后将父配置文件设置为 VXLAN ，并将 " 洪水类型 " 设置为 " 多播 " 。输入配置文件的名称，然后单击完成。</block>
  <block id="faaca798da0468a250bf3c3bffc26681" category="inline-image-macro">创建 VXLAN 配置文件</block>
  <block id="bddf6bed69a1a2234f15cefc27853c50" category="paragraph"><block ref="bddf6bed69a1a2234f15cefc27853c50" category="inline-image-macro-rx" type="image"></block></block>
  <block id="45ae0c96657fdc5a20e83839c2386c1e" category="list-text">导航到 " 网络 "&gt;" 通道 "&gt;" 通道列表 " ，单击 " 创建 " ，然后输入通道的名称和本地 IP 地址。选择在上一步中创建的通道配置文件，然后单击完成。</block>
  <block id="1497a4f92d416d6c80392ec3467ff140" category="inline-image-macro">创建 VXLAN 通道</block>
  <block id="53ce9cdf8cf7f6cb09991e817df94959" category="paragraph"><block ref="53ce9cdf8cf7f6cb09991e817df94959" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cc5e5bc480b39177b8cb8c9c3a2266ae" category="list-text">使用 cluster-admin 权限登录到 Red Hat OpenShift 集群。</block>
  <block id="986e63a308b4bebd3f531e38fa5a06c7" category="list-text">在 OpenShift 上为 F5 BIG-IP 服务器创建一个子网，从而将子网从 OpenShift 集群扩展到 F5 BIG-IP 服务器。下载主机子网 YAML 定义。</block>
  <block id="fd4475e12938f5f51ba3f312b42cdd39" category="list-text">编辑主机子网文件并为 OpenShift SDN 添加 BIG-IP VTEP （ VXLAN 通道） IP 。</block>
  <block id="2e6d8a8db3c4d4a2227ffa0571be2a86" category="admonition">根据您的环境情况更改主机提示和其他详细信息。</block>
  <block id="7f9916ee1bc520d892dfbbb1e06e2732" category="list-text">创建 HostSubnet 资源。</block>
  <block id="7a46b2d02d466dda0cc67b215cb80bff" category="list-text">获取为 F5 BIG-IP 服务器创建的主机子网的集群 IP 子网范围。</block>
  <block id="4f6c1fea3654c07f1606c0c76509d0b0" category="list-text">在 OpenShift VXLAN 上使用与 F5 BIG-IP 服务器对应的 OpenShift 主机子网范围中的 IP 创建自 IP 。登录到 F5 BIG-IP 系统，导航到 " 网络 "&gt;" 自 IP " ，然后单击 " 创建 " 。输入为 F5 BIG-IP 主机子网创建的集群 IP 子网中的 IP ，选择 VXLAN 通道，然后输入其他详细信息。然后单击完成。</block>
  <block id="5c241806c0dd5ebb7030904151cb78ef" category="inline-image-macro">为 VXLAN 创建自 IP</block>
  <block id="ffad9e123d8b7013e7d4553570644879" category="paragraph"><block ref="ffad9e123d8b7013e7d4553570644879" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4d094b7d82871afb601d2f30d416ba8d" category="list-text">在 F5 BIG-IP 系统中创建一个分区，以便在 CIS 中配置和使用。导航到系统 &gt; 用户 &gt; 分区列表，单击创建，然后输入详细信息。然后单击完成。</block>
  <block id="4d81871723233ec21ed69ab80e638779" category="inline-image-macro">创建 BIG-IP 分区</block>
  <block id="b83428617c6ed29213f89e68f142bd18" category="paragraph"><block ref="b83428617c6ed29213f89e68f142bd18" category="inline-image-macro-rx" type="image"></block></block>
  <block id="37397397fa66431e2fa681b97126c399" category="admonition">F5 建议不要对由 CIS 管理的分区进行手动配置。</block>
  <block id="81e4a49e9dbe0b55256fe5abf1b94fa4" category="list-text">使用 OperatorHub 中的运算符安装 F5 BIG-IP CIS 。使用集群管理员权限登录到 Red Hat OpenShift 集群，并使用 F5 BIG-IP 系统登录凭据创建一个密钥，这是操作员的前提条件。</block>
  <block id="5de4ac005898cabf55523098c40c549b" category="list-text">安装 F5 CIS CRD 。</block>
  <block id="0eddace1b16ed738fe1be181481c71b6" category="list-text">导航到 Operators &gt; OperatorHub ，搜索关键字 F5 ，然后单击 F5 Container In出口 服务磁贴。</block>
  <block id="07543409cb05595e273df71050b9a9c0" category="inline-image-macro">OperatorHub 中的 F5 CIS</block>
  <block id="334a7bbf4711d93b48b93c2b81d84a71" category="paragraph"><block ref="334a7bbf4711d93b48b93c2b81d84a71" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c25b2a3d320d6d02584fde4190d05d91" category="list-text">阅读操作员信息，然后单击安装。</block>
  <block id="60d3353ed1910ad5c7bd352d0c1bea85" category="inline-image-macro">OperatorHub 中的 F5 CIS Info 图块</block>
  <block id="1aa79507d413f19135716c8006afa423" category="paragraph"><block ref="1aa79507d413f19135716c8006afa423" category="inline-image-macro-rx" type="image"></block></block>
  <block id="637a1bc658defc200d903b27828aa8fb" category="list-text">在 Install Operator 屏幕上，保留所有默认参数，然后单击 Install 。</block>
  <block id="ccf254d7c8b666c9c127ec12fe14804b" category="inline-image-macro">安装 F5 CIS 运算符</block>
  <block id="56e9cc6f2f7ece6c23fa6faa7f320d5d" category="paragraph"><block ref="56e9cc6f2f7ece6c23fa6faa7f320d5d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="636d8318702bc67a1613ceadf7ce9d00" category="list-text">安装操作员需要一段时间。</block>
  <block id="dffa3077bcff43536afd75bd61b11c0c" category="inline-image-macro">F5 CIS 操作员安装进度</block>
  <block id="b1be0ed9469d2ced1f6283b49735f5c1" category="paragraph"><block ref="b1be0ed9469d2ced1f6283b49735f5c1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="197a0a4cc4a45ec9a62fe2b7335d8dfc" category="list-text">安装操作员后，将显示安装成功消息。</block>
  <block id="5bf83e99bfa132430d0b690181334933" category="list-text">导航到 Operators &gt; Installed Operators ，单击 F5 Container In出口 服务，然后单击 F5BigIpCtrl+Alt+Del 图块下的 Create Instance 。</block>
  <block id="a5f584f06c59c2cf4a4a4e8b42d495a2" category="inline-image-macro">创建 F5BigIpCtlr</block>
  <block id="a2574a02e64888de32a5a277ed05f668" category="paragraph"><block ref="a2574a02e64888de32a5a277ed05f668" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c5ce9a4ef68c16a3ab5d0dd555305872" category="list-text">单击 YAML View ，并在更新必要参数后粘贴以下内容。</block>
  <block id="2e2beb899f89156ed06287fe6f78e6cf" category="admonition">在复制内容之前，更新以下参数 `bigip_partition` ， ` OpenShift_SDN_name` ， `bigip_url` 和 `bigip_login_secret` ，以反映您的设置值。</block>
  <block id="50a17348dc3f981a95001edcc80a428f" category="list-text">粘贴此内容后，单击创建。此操作将在 Kube-system 命名空间中安装 CIS Pod 。</block>
  <block id="72003ce6faa67d172e943ddd74fab63b" category="inline-image-macro">验证 F5 CIS Pod</block>
  <block id="ef76b6b9f85ff0ec00e48f565e13eff9" category="paragraph"><block ref="ef76b6b9f85ff0ec00e48f565e13eff9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fc8632c05e82ccafb395157ccae4f5c3" category="admonition">默认情况下， Red Hat OpenShift 提供了一种通过路由公开服务以实现 L7 负载平衡的方法。内置的 OpenShift 路由器负责公布和处理这些路由的流量。但是，您也可以将 F5 CIS 配置为支持通过外部 F5 BIG-IP 系统的路由，该系统可以作为辅助路由器运行，也可以替代自托管 OpenShift 路由器运行。CIS 在 BIG-IP 系统中创建一个虚拟服务器，充当 OpenShift 路由的路由器， BIG-IP 负责处理公告和流量路由。有关启用此功能的参数的信息，请参见此处的文档。请注意，这些参数是在 APPS/v1 API 中为 OpenShift 部署资源定义的。因此，在将这些参数与 F5BigIpartl 资源 cis.f5.com/v1 API 结合使用时，请将参数名称的连字符（ - ）替换为下划线（ _ ）。</block>
  <block id="a6e55fc1fe932b26a294a0f2880478aa" category="list-text">传递给创建 CIS 资源的参数包括 `ipam ： true` 和 `custom_resource_mode ： true` 。要启用与 IPAM 控制器的 CIS 集成，需要使用这些参数。通过创建 F5 IPAM 资源验证 CIS 是否已启用 IPAM 集成。</block>
  <block id="84ac0b78989fa6595723d5541b8ec470" category="list-text">创建 F5 IPAM 控制器所需的服务帐户，角色和角色绑定。创建 YAML 文件并粘贴以下内容。</block>
  <block id="670c1074ae74616731a63f6b9462b94e" category="list-text">创建资源。</block>
  <block id="b7802bea6dc04d06b63232b6301621bb" category="list-text">创建一个 YAML 文件并粘贴下面提供的 F5 IPAM 部署定义。</block>
  <block id="6a1491ddca525bea3293eca6ea8019d0" category="admonition">更新以下 spec.template.spec.containers[0].args 中的 ip-range 参数，以反映与您的设置对应的 ipamLabel 和 IP 地址范围。</block>
  <block id="642252b62fe47e95caa77e3b06a7dbaf" category="admonition">要使 IPAM 控制器能够从定义的范围检测和分配 IP 地址，需要为类型为 loadbalancer 的服务标注 ipamLabels （`range1` 和` range2 `in below example] ）。</block>
  <block id="8f253132259909c28624117b3476a672" category="list-text">创建 F5 IPAM 控制器部署。</block>
  <block id="43946dccec13f46420eb559911e4c526" category="list-text">验证 F5 IPAM 控制器 Pod 是否正在运行。</block>
  <block id="1362b3e7985b4f24d6c2ef4438ee1f0e" category="list-text">创建 F5 IPAM 模式。</block>
  <block id="52b8ffce119fe77b28034f2fdd35eb5f" category="section-title">验证</block>
  <block id="32172ccfad6e7060b8f5e091e296f09c" category="list-text">创建类型为 loadbalancer 的服务</block>
  <block id="0847be44e618094bc81c848c7d131399" category="list-text">检查 IPAM 控制器是否为其分配了外部 IP 。</block>
  <block id="0e51a0606ba7833099aa57bd61c62ba6" category="list-text">创建部署并使用已创建的负载平衡器服务。</block>
  <block id="5f905cb56a4d1b364cab7fc57f4de4e5" category="list-text">检查 Pod 是否正在运行。</block>
  <block id="51b4d723f0434284233dab97982b185d" category="list-text">检查是否在 OpenShift 中为 loadbalancing 类型的服务在 BIG-IP 系统中创建了相应的虚拟服务器。导航到 " 本地流量 "&gt;" 虚拟服务器 "&gt;" 虚拟服务器列表 " 。</block>
  <block id="91193cea3335c4666b7dc31ca767030c" category="inline-image-macro">验证是否为相应的服务类型负载平衡器创建了 BIG-IP 虚拟服务器</block>
  <block id="879dfaa1de924ed5e9ccb98da9ac95cd" category="paragraph"><block ref="879dfaa1de924ed5e9ccb98da9ac95cd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="10a93051f49f4080568cecc5ec30cd99" category="inline-link-macro">F5 BIG-IP</block>
  <block id="886218e92c071e06819887a13189b4e6" category="list-text"><block ref="886218e92c071e06819887a13189b4e6" category="inline-link-macro-rx"></block></block>
  <block id="0c3fd18fbca2ec11aa1ef250cf79f2e5" category="paragraph">NetApp Astra Control 采用 NetApp 数据保护技术，为有状态 Kubernetes 工作负载提供丰富的存储和应用程序感知型数据管理服务。Astra 控制服务可用于在云原生 Kubernetes 部署中支持有状态工作负载。Astra 控制中心可支持内部部署中的有状态工作负载，例如 Red Hat OpenShift 。有关详细信息，请访问 NetApp Astra Control 网站<block ref="508f471fa59796a53754f031c40091c1" category="inline-link-rx"></block>。</block>
  <block id="1bd63bf18edcc59af656e76ee09dd403" category="paragraph">NetApp Astra Trident 是一款开源且完全受支持的存储编排程序，适用于容器和 Kubernetes 分发版，包括 Red Hat OpenShift 。有关详细信息，请访问 Astra Trident 网站<block ref="727f15aa2af8bdae071f864617bcc142" category="inline-link-rx"></block>。</block>
  <block id="faaef04f2f0bb7bed9504fc3d357ba59" category="cell">2021年9月9日</block>
  <block id="80245b1f322b07a9fcd385bb375d8182" category="cell">将 F5 BIG-IP 负载平衡器与 OpenShift 的集成添加到 NVA-1160 中</block>
  <block id="e379cb0b675fb26a08af2030df7cedf9" category="list-text"><block ref="e379cb0b675fb26a08af2030df7cedf9" category="inline-link-macro-rx"></block></block>
  <block id="e6d792539f0b0370e43d76a3e05a211a" category="cell">一组虚拟化核心解决方案。解决方案可细分为以下类别之一： [ 海军 ]#VMware 虚拟化 # [ 海军 ]# 演示和教程 #</block>
  <block id="6c449af11b54736a669b1fff47762dcb" category="cell">私有云</block>
  <block id="e1ac6b0c1b6b4e641063060107424e05" category="cell">私有云解决方案集合。解决方案可细分为以下类别之一： [Navy]#VMware Private Cloud# [Navy]#Red Hat Private Cloud#</block>
  <block id="1f23e5de73e650f12cbafec55d8a98cd" category="cell"><block ref="1f23e5de73e650f12cbafec55d8a98cd" category="inline-link-macro-rx"></block></block>
  <block id="71504964e61456166baf63edd1fd32a1" category="paragraph">在 &lt;stdin&gt; 中未解析的指令 - 包括： hybrid-cloud /vsphere_ontap_best ； practices.adoc[lines=315..390]</block>
  <block id="92e62bb291a9fcec263b03f84a3f0603" category="list-text">TR-4597 ：适用于 ONTAP 的 VMware vSphere<block ref="069f205d7965d7d49a2c0f85080929db" category="inline-link-rx"></block></block>
  <block id="365a5dee78462bbd828ea0022742e5c0" category="sidebar">混合云，虚拟化，桌面虚拟化容器</block>
  <block id="69f55c7d7266874ad1ed57caf459c979" category="summary">此用例基于我们所做的最大的财务客户概念验证（ CPOC ）。过去，我们使用 NetApp 原位分析模块（ NIPAM ）将分析数据迁移到 NetApp ONTAP AI 。但是，由于 NetApp XCP 的最新增强功能和性能的提高，以及 NetApp 独特的数据移动工具解决方案方法，我们使用 NetApp XCP 重新注册数据迁移。</block>
  <block id="5084e1c3bd53b6115df08f4c40aadbe6" category="doc">数据湖到 ONTAP NFS</block>
  <block id="ae8dcf06c5337995ca840fbd543188fc" category="inline-link-macro">先前：客户场景。</block>
  <block id="82f418da831bb7ca7897e30f8bc5525a" category="paragraph"><block ref="82f418da831bb7ca7897e30f8bc5525a" category="inline-link-macro-rx"></block></block>
  <block id="b1a11a01b3bdf3150e0240a1f037cdf5" category="section-title">客户面临的挑战和要求</block>
  <block id="9ed16d5ac47c336caaf9ca2b75930d78" category="paragraph">值得注意的客户挑战和要求包括：</block>
  <block id="b6976e1a47e217f1a7c746e8f57e327c" category="list-text">客户拥有不同类型的数据，包括结构化数据，非结构化数据和半结构化数据，日志， 以及数据湖中的机器到机器数据。AI 系统需要处理所有这些类型的数据，才能执行预测操作。如果数据位于数据湖本机文件系统中，则很难处理。</block>
  <block id="d85cb5080a9e99841f0ff6c36abdadad" category="list-text">客户的 AI 架构无法从 Hadoop 分布式文件系统（ Hadoop Distributed File System ， HDFS ）和 Hadoop 兼容文件系统（ Hadoop Compatible File System ， HCFS ）访问数据，因此 AI 操作无法使用这些数据。AI 要求数据采用可理解的文件系统格式，例如 NFS 。</block>
  <block id="982b6c87ace8f5b95c0523bd0557f4e2" category="list-text">由于数据量大，吞吐量大，因此需要采用一些特殊的流程从数据湖中移动数据，并且需要采用经济高效的方法将数据移动到 AI 系统。</block>
  <block id="d73e7d11401e9256a0dea0d1e174e1de" category="section-title">数据移动者解决方案</block>
  <block id="b0a9a6f2387f2a23e13931f68fc509c1" category="paragraph">在此解决方案中， MapR 文件系统（ MapR-FS ）是从 MapR 集群中的本地磁盘创建的。MapR NFS 网关在每个数据节点上使用虚拟 IP 进行配置。文件服务器服务用于存储和管理 MapR-FS 数据。NFS 网关使 Map-FS 数据可通过虚拟 IP 从 NFS 客户端访问。每个 MapR 数据节点上都运行一个 XCP 实例，用于将数据从映射 NFS 网关传输到 NetApp ONTAP NFS 。每个 XCP 实例都会将一组特定的源文件夹传输到目标位置。</block>
  <block id="01e1c2900284f91d77ea71ffd32c6d18" category="paragraph">下图显示了使用 XCP 的 MapR 集群的 NetApp 数据移动工具解决方案。</block>
  <block id="a7dcdfa2099e01480afb3c060c679f10" category="paragraph"><block ref="a7dcdfa2099e01480afb3c060c679f10" category="inline-image-macro-rx" type="image"></block></block>
  <block id="409f476aa8c516a92f8d6a42e21db5a0" category="inline-link">使用 XCP 将数据从数据湖和高性能计算迁移到 ONTAP NFS</block>
  <block id="4084b5f9c9bab8db38eb6e04a3b3a4cc" category="paragraph">有关详细的客户使用情形，录制的演示以及测试结果，请参见<block ref="c5fcc47a7dd315afaa32fcdac46ffd7d" category="inline-link-rx"></block> 博客</block>
  <block id="6cef4abedb8153458ee404a47b193489" category="inline-link">TR-4732 ：从大数据分析数据到人工智能</block>
  <block id="520ef13ea64298a652262e37756b6bd4" category="paragraph">有关使用 NetApp XCP 将 MapR-FS 数据移动到 ONTAP NFS 中的详细步骤，请参见中的附录 B<block ref="c952a09d2ff4403056a594c41db26c8d" category="inline-link-rx"></block>。</block>
  <block id="b4dd66db226c58dbbcc8455a7576d491" category="inline-link-macro">接下来：将高性能计算迁移到 ONTAP NFS 。</block>
  <block id="9ebf542ce4a3a8a997eb85e5b6e086ed" category="paragraph"><block ref="9ebf542ce4a3a8a997eb85e5b6e086ed" category="inline-link-macro-rx"></block></block>
  <block id="89185de94c95d958df7a1d1f328c5d3d" category="summary">要更好地规划和完成迁移，需要遵循不同的迁移阶段。要使用 NetApp XCP 从第三方 NAS 存储或直连 NAS 导出存储迁移数据，请遵循本节中提供的迁移准则。</block>
  <block id="ee5b035493cdde88f6472904ffe00677" category="doc">迁移工作流</block>
  <block id="33af37ca0d75bc0783cc87782a94cb6e" category="inline-link-macro">先前版本： NetApp XCP 。</block>
  <block id="c6f303d52bc03c848b2dde21f1b31f9d" category="paragraph"><block ref="c6f303d52bc03c848b2dde21f1b31f9d" category="inline-link-macro-rx"></block></block>
  <block id="5b312b66520bbb17746eeb5c9959e4ef" category="paragraph">下图显示了从任何 NAS 到 NetApp NAS 的迁移工作流。</block>
  <block id="228d4a26c37192668bb7f7bf0d81ce40" category="paragraph"><block ref="228d4a26c37192668bb7f7bf0d81ce40" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f0e69ccbb7ad96f546f7924206944bfa" category="section-title">内部部署</block>
  <block id="8df17c51ab4a9817f3fe7cea57052110" category="paragraph">从任何 NAS 到 NetApp NAS 的迁移工作流包括以下步骤：</block>
  <block id="3bd3dda9341b512ee536cc6e48d51a69" category="list-text">发现 NAS 共享和数据。</block>
  <block id="7800ed0aa4aebf1d63fd7120c2bcf538" category="list-text">扫描数据并生成报告以查找数据布局。</block>
  <block id="8e9880476ad79e202d93a0a7d0bb5f5b" category="list-text">运行 XCP Copy 命令创建基线。要加快迁移速度，请选择更多 XCP 实例并在子文件夹级别拆分工作负载，以启动并行迁移作业。</block>
  <block id="57324e972ea87c8e788d9831e510bc6d" category="list-text">对于增量更新，请使用 XCP sync ，直到转换窗口的更改率较低为止。</block>
  <block id="3812202d715addac73d7122672d3c8d0" category="list-text">运行 XCP sync 命令以完成迁移，将源标记为只读以执行最终同步。</block>
  <block id="2c1d8a91f274a7723f6ad2ffefc81b62" category="list-text">要验证数据传输是否正确，请运行 `XCP verify` 命令来比较源和目标。</block>
  <block id="12750e54260da668490732c9045967ec" category="paragraph">对于云，如果内部和云之间的连接为直接连接（ AWS ）， ExpressRoute （ Azure ）或云互连（ GCP ），则可以遵循类似的内部迁移工作流。</block>
  <block id="8f4cde54f5af74d15d142ad98344aab6" category="paragraph">下图显示了从内部迁移到云的工作流。</block>
  <block id="9d1b3862e72bece8266c1c8b1098c696" category="paragraph"><block ref="9d1b3862e72bece8266c1c8b1098c696" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6e2fef7fa18bd688132425321b9188bb" category="paragraph">如果内部与云之间没有直接互联网连接，您必须通过叉车等脱机数据传输方法将数据从内部传输到云。每个云服务提供商都有一种不同的方法，使用不同的术语将数据移动到其数据中心。</block>
  <block id="9e76bcaf48df4797c2e546f778fd72f8" category="paragraph">下图展示了在不使用 ExpressRoute 的情况下从内部部署到 Azure 的数据移动程序解决方案。</block>
  <block id="e13bab0261f71ca4765f8b68cea20a43" category="paragraph"><block ref="e13bab0261f71ca4765f8b68cea20a43" category="inline-image-macro-rx" type="image"></block></block>
  <block id="423066080659363cc444ec5dee611f48" category="paragraph">您可以对不同云服务提供商提供的相应组件使用类似的架构。</block>
  <block id="050572d01f21dded8086b49419066add" category="inline-link-macro">接下来：文件分析。</block>
  <block id="ae292ee37a105844872f831698fb440f" category="paragraph"><block ref="ae292ee37a105844872f831698fb440f" category="inline-link-macro-rx"></block></block>
  <block id="c4e9391c8d60f1f326246cd6b6705492" category="summary">NetApp 收到了查找单个卷或多个卷中重复文件的请求。NetApp 提供了以下解决方案。</block>
  <block id="2e4e5fbe1f8f460b943ac3ed031c9dcf" category="doc">重复文件</block>
  <block id="f89d6874c6cf2c5de0dae9564728c7cf" category="inline-link-macro">先前版本：使用 XCP 数据移动器迁移大型文件。</block>
  <block id="6c8f161effcb72b9425f626e8733146b" category="paragraph"><block ref="6c8f161effcb72b9425f626e8733146b" category="inline-link-macro-rx"></block></block>
  <block id="dc4b36d55f5f1f0af63ed899a010c8f1" category="paragraph">对于单个卷，运行以下命令：</block>
  <block id="2d2f31777cf3433071b9bcd33f39279a" category="paragraph">对于多个卷，请运行以下命令：</block>
  <block id="fdefb3eaaab41fef36db24700d399ef2" category="inline-link-macro">下一步：基于日期的特定数据扫描和复制。</block>
  <block id="769f411db097d478d8d10a821946e501" category="paragraph"><block ref="769f411db097d478d8d10a821946e501" category="inline-link-macro-rx"></block></block>
  <block id="b25f76deff236f93a3afa73c8a5b2a2c" category="summary">此用例基于 NetApp 旅游行业中最大的客户将数百万个小型内部文件迁移到云。</block>
  <block id="4b1739353c6d18cea69ed6a274b7135f" category="doc">使用 XCP 数据移动器将数百万个小文件迁移到灵活存储</block>
  <block id="2b2142a0bf2476846ad59f7952380ca1" category="inline-link-macro">上一篇：高性能计算到 ONTAP NFS 。</block>
  <block id="c81efa558deea51a126490ba8d09b59a" category="paragraph"><block ref="c81efa558deea51a126490ba8d09b59a" category="inline-link-macro-rx"></block></block>
  <block id="bb29cc4e9e4447f7bad1e81c1c5a9a1f" category="paragraph">此用例基于 NetApp 旅游行业中最大的内部到云数据迁移客户。由于 COVID-19 降低了旅游行业的需求，因此客户希望在其内部环境中为需求定价应用程序节省高端存储的资本支出。该客户的 SLA 非常严格，需要将数百万个小文件迁移到云。</block>
  <block id="81ec900a5387f7a686d1451adaddf399" category="paragraph">下图展示了小型文件的数据从内部迁移到 Azure NetApp Files 。</block>
  <block id="214c5e9894032cde0e65b576e32294b9" category="paragraph"><block ref="214c5e9894032cde0e65b576e32294b9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="099a60093e7de3795f557974125ce82b" category="inline-link">NetApp XCP Data Mover 解决方案：从内部部署到云</block>
  <block id="50d4edabefc40ad9614b567197696a2e" category="paragraph">有关详细信息，请参见<block ref="2c0eb3741003532ef113837d4b882a9a" category="inline-link-rx"></block> 博客</block>
  <block id="3242fe890cd89c89373a1bd576cef03a" category="inline-link-macro">接下来：使用 XCP 数据移动器迁移大型文件。</block>
  <block id="c32441c7755c153b58450a597193448b" category="paragraph"><block ref="c32441c7755c153b58450a597193448b" category="inline-link-macro-rx"></block></block>
  <block id="485f9678c52b78d051ddff564d873eb9" category="summary">本节中的命令以 CSV 格式转储数据。您可以对 " 大小 " 列求和以获取数据的总大小。</block>
  <block id="92f6d6878e37105d20e75151b95d4e6a" category="doc">从 SMB/CIFS 共享创建 CSV 文件</block>
  <block id="bab825782f37e3f0cd908b20bc8aa74c" category="inline-link-macro">Previous ：基于日期的特定数据扫描和复制。</block>
  <block id="ad80673543d1d2744f55966060c4579b" category="paragraph"><block ref="ad80673543d1d2744f55966060c4579b" category="inline-link-macro-rx"></block></block>
  <block id="d122031c67144a65ca4721f8324ae0b3" category="paragraph">以下命令将以 CSV 格式转储数据。您可以对 " 大小 " 列求和以获取数据的总大小。</block>
  <block id="1bed902c0754e4abc7598b7f1a0450e0" category="paragraph">输出应类似于以下示例：</block>
  <block id="f7c322db5a6c805aed8a38858c7ba770" category="paragraph">要扫描三个子目录的深度并按排序顺序提供结果，请运行 `XCP -du` 命令，并将每个目录级别的大小转储到三个子目录的深度。</block>
  <block id="7c12bd6fa64456eb3a61460a4bbb98e6" category="paragraph">要进行排序，请将信息转储到 CSV 文件并对信息进行排序。</block>
  <block id="f4c3dd29e6e508e2ea879ed0bccc3468" category="paragraph">这是使用 ` -fmt` 命令的自定义报告。它会扫描所有目录，并将目录的名称，路径和大小转储到 CSV 文件中。您可以从电子表格应用程序对大小列进行排序。</block>
  <block id="c2e9a8d6d376247b10a1ab4624bd2610" category="inline-link-macro">接下来：将数据从 7- 模式迁移到 ONTAP 。</block>
  <block id="7155e60f207d105fa4db5d15efdce133" category="paragraph"><block ref="7155e60f207d105fa4db5d15efdce133" category="inline-link-macro-rx"></block></block>
  <block id="2246a929033f1d77a86efa97dda42849" category="inline-link-macro">上一步：故障排除。</block>
  <block id="49c4600bab96ae4bda03f252b43985b4" category="paragraph"><block ref="49c4600bab96ae4bda03f252b43985b4" category="inline-link-macro-rx"></block></block>
  <block id="345245c83d2b2c4c2a5eb9f2887da627" category="paragraph">要了解有关本文档中所述信息的更多信息，请参见以下文档和 / 或网站：</block>
  <block id="464fbe5e9ea5b377de3943b7d1e73632" category="inline-link"><block ref="464fbe5e9ea5b377de3943b7d1e73632" category="inline-link-rx"></block></block>
  <block id="eba010943793fb5b647ad292a452b3ff" category="list-text">NetApp XCP 博客<block ref="2639c38af267ba997fc1d85740cfc9a6" category="inline-link-rx"></block></block>
  <block id="6ae1587e2fb0d146cd960f45d3f1fc13" category="inline-link"><block ref="6ae1587e2fb0d146cd960f45d3f1fc13" category="inline-link-rx"></block></block>
  <block id="fb8d9f206204f9562c2a67c6b37a7d1b" category="list-text">NetApp XCP 用户指南<block ref="05f41a166d52148335e3a0df2eafec23" category="inline-link-rx"></block></block>
  <block id="e2c2bd378a3ae3740034d637754af7e2" category="inline-link"><block ref="e2c2bd378a3ae3740034d637754af7e2" category="inline-link-rx"></block></block>
  <block id="79b44e54a5eac82beac2de86249cd862" category="list-text">将大数据分析数据转换为人工智能—适用于 AI 的数据移动工具解决方案<block ref="79ced727b5c9638c0385a25671803fba" category="inline-link-rx"></block></block>
  <block id="9ebf058ce7a44ad4517e7033db8a90a7" category="paragraph"><block ref="9ebf058ce7a44ad4517e7033db8a90a7" category="inline-link-macro-rx"></block></block>
  <block id="0706a8a70e2892183b45c55ef1394714" category="summary">本节介绍使用不同文件大小（即 100 万个 NFS 文件）执行 XCP 复制和 XCP 同步操作的大致时间。</block>
  <block id="137e4d3e0bc5586af6fc7ca9441511e1" category="doc">规模估算准则</block>
  <block id="f688414f56f567909ca9a570f161016e" category="inline-link-macro">上一步：部署步骤。</block>
  <block id="fb58e731328976afe8beac53cbe55ee7" category="paragraph"><block ref="fb58e731328976afe8beac53cbe55ee7" category="inline-link-macro-rx"></block></block>
  <block id="5224a4cb1d59edb5630ae27e640409e9" category="section-title">根据测试估计时间</block>
  <block id="2928c19c19fa25bf625368eeeeaf68ff" category="paragraph">XCP 复制和同步操作测试使用的测试平台与部署时使用的测试平台相同。我们创建了 100 万个文件，其中包括三组 8 K ， 16 K 和 1 MB 文件，并实时执行了更改。XCP 同步功能在文件级别执行从源到目标的差异增量更新。增量更新操作是以下四项操作中的一项或多项：重命名现有文件和文件夹，将数据附加到现有文件，删除文件和文件夹，以及添加其他硬链接，软链接和多链接。出于测试目的，我们重点关注重命名，附加，删除和链接操作。换言之，重命名，附加和删除等修改操作对 100 万个文件执行的更改率为 10% 到 90% 。</block>
  <block id="1112334374c9149cc8ad8e80a76f2e56" category="paragraph">下图显示了 XCP 复制操作的结果。</block>
  <block id="d6852faef2642951731c8d64e3009dbe" category="paragraph"><block ref="d6852faef2642951731c8d64e3009dbe" category="inline-image-macro-rx" type="image"></block></block>
  <block id="58fe8c2d511caf443cb23313cb89181b" category="paragraph">下图显示了 XCP 同步重命名和链接操作的结果。</block>
  <block id="319b9e8dee4108359b7ef17af2fb492d" category="paragraph"><block ref="319b9e8dee4108359b7ef17af2fb492d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2186640ac8cac7be2b0f3940d871bf04" category="paragraph">文件大小与传输重命名的源文件所需的 `XCP 同步` 完成时间不符；图形为线性图形。</block>
  <block id="de54b82b6e27abb7d6f924e14d40a351" category="paragraph">链路类型包括软链路，硬链路和多链路。软链接被视为普通文件。文件大小与完成 XCP 同步操作的时间无关。</block>
  <block id="db3eb29ec347d79a716c6235063b1955" category="paragraph">下图显示了 XCP 同步附加和删除操作的结果。</block>
  <block id="feeff6134484088b1b404089dc5f92d9" category="paragraph"><block ref="feeff6134484088b1b404089dc5f92d9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f64c7d081568c95905b16364c19e1be1" category="paragraph">对于附加和删除操作，与较小的文件大小相比，较大的文件需要更多的时间。完成此操作所需的时间与附加和删除更改的百分比呈线性增长。</block>
  <block id="ecc8d4faf16ec3b08a8badd1d71421d3" category="section-title">将 XCP 1.6.1 与 XCP 1.5 进行比较</block>
  <block id="3f05ed0767a903c6f5c60e7516560b4b" category="paragraph">与以前的版本相比， XCP 1.6.3 和 1.7 提高了性能。下一节显示了 XCP 1.6 之间的同步性能比较。3 和 1.7 ，用于 100 万个文件中的 8 K ， 16 K 和 1 MB 大小。</block>
  <block id="fb4cfee047063b087abd2b8a822b8afb" category="paragraph">下图显示了 XCP 1.6.3 与 1.7 （ 8K 大小为 100 万个文件）的 XCP 同步性能结果。</block>
  <block id="ded6c17dda87ca50a7ecde2418543075" category="paragraph"><block ref="ded6c17dda87ca50a7ecde2418543075" category="inline-image-macro-rx" type="image"></block></block>
  <block id="09a0804a78587affdd9192afd0f8c80c" category="paragraph">下图显示了 XCP 1.6.1 与 1.5 （ 16K 大小为 100 万个文件）的 XCP 同步性能结果。</block>
  <block id="b2733f54373c0149b19c3b37afbcb7da" category="paragraph"><block ref="b2733f54373c0149b19c3b37afbcb7da" category="inline-image-macro-rx" type="image"></block></block>
  <block id="aaf69e820d26a96011361b0f5b539ffe" category="paragraph">下图显示了 XCP 1.6.1 与 1.5 （ 1 MB 大小为 100 万个文件）的 XCP 同步性能结果。</block>
  <block id="e7770abf0d9a0789407ea0a0e81cc5a6" category="paragraph"><block ref="e7770abf0d9a0789407ea0a0e81cc5a6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="71c6a3c1c59fc41b371a18011d1d5c9b" category="paragraph">平均而言，对于大小为 1 MB 的文件，在执行 `XCP sync` 差异增量更新 - 重命名，附加，链接和删除操作时， XCP 1.7 的性能会在 XCP 1.6.3 上提高或类似于 XCP 1.6.3 。</block>
  <block id="0616fd1124f4a57ef9a4ef1c7a3c2b47" category="paragraph">根据此性能验证结果， NetApp 建议使用 XCP 1 。7 在内部和云端进行数据迁移。</block>
  <block id="dd6275237d7504aabd0c206384365206" category="inline-link-macro">接下来：性能调整。</block>
  <block id="cb619c90f7b537d24a1473acda746a47" category="paragraph"><block ref="cb619c90f7b537d24a1473acda746a47" category="inline-link-macro-rx"></block></block>
  <block id="a01ed8ff3f6e9e3ac0c0068a083281f2" category="summary">本节提供使用 NetApp XCP 进行数据迁移的故障排除指导。</block>
  <block id="231cf4c70d866b616c21baddaeed0696" category="doc">故障排除</block>
  <block id="ae638a1049211e9956348a48a85bd359" category="inline-link-macro">先前版本：最佳实践准则和建议。</block>
  <block id="e19cdddb31b62a88048cfee77eb96e9d" category="paragraph"><block ref="e19cdddb31b62a88048cfee77eb96e9d" category="inline-link-macro-rx"></block></block>
  <block id="95109c432d89e67182659615993ba75d" category="section-title">错误 1 ： XCP 失败， nfs3 错误 70 ： xcp.log 中的文件句柄陈旧错误</block>
  <block id="99b1b0e3547443c29793187326a64dbc" category="paragraph">* 原因和指导。 *</block>
  <block id="0774d3e8b775fcc34e680b302e85f3c1" category="paragraph">挂载源文件夹并验证此文件夹是否存在。如果该错误不存在或已删除，您将收到 `stale filehandle` 错误，在这种情况下，您可以忽略该错误。</block>
  <block id="8fefb715a66a069c9e9318a58ecfdaee" category="section-title">错误 2 ： NetApp NFS 目标卷有空间，但 XCP 失败，并显示 nfs3 错误 28 ：设备上没有剩余空间</block>
  <block id="bba52daa861e8093e201c3939f43057f" category="list-text">运行 `df` 命令检查 NFS 目标卷的空间或检查存储。</block>
  <block id="20183145becc54cc822a80107f92f13d" category="list-text">检查存储控制器中的索引节点。</block>
  <block id="fe3a96130e3ec3092026a84e4dd12e50" category="list-text">如果使用索引节点，请运行以下命令以增加索引节点数：</block>
  <block id="00f1ec7e4f2acc8a9e2c5a06b2d62607" category="paragraph"><block ref="00f1ec7e4f2acc8a9e2c5a06b2d62607" category="inline-link-macro-rx"></block></block>
  <block id="3d5c39f585b0e679dbfe0855d556f0af" category="summary">NetApp XCP 使用多线程和可自定义的功能传输数据。它专为三种主要使用情形而设计—数据移动或迁移，文件系统分析和快速目录树删除。</block>
  <block id="6416bf9c9c9445fbe2e15f69fa8371d2" category="paragraph">NetApp XCP 使用多线程和可自定义的功能传输数据。它专为三大用例而设计：数据移动或迁移，文件系统分析和快速目录树删除。</block>
  <block id="7817bd783e8db0557909483f54288eae" category="section-title">数据移动或迁移</block>
  <block id="a7786f240f16aadfd675c46be438f64e" category="paragraph">NetApp XCP 可将数据从任何 NAS 传输到 NetApp NAS 。此过程包括四个主要操作：扫描，复制，同步和验证。此外，还有一些有助于数据监控和传输的其他功能：</block>
  <block id="c95678dcbc6400fa167604a009e875a7" category="list-text">* 扫描。 * 提供 NAS 数据的高级布局。</block>
  <block id="59e4194e1b171063beeb99722a68e7af" category="list-text">* 复制。 * 执行基线数据传输。</block>
  <block id="a75ddee1308f2f19e478595122434544" category="list-text">* 同步 * 执行增量数据传输。</block>
  <block id="ae4ab572ec7de44b385c01df54f00d17" category="list-text">* 验证。 * 对目标执行全面验证。</block>
  <block id="8ddbaa98ade9dcd56d4960b7abd22525" category="list-text">* 显示（可选）。 * 发现 NAS 共享。</block>
  <block id="4f4544fb0f8ed8f32e27a8b8651a46e6" category="paragraph">下图显示了 XCP 数据迁移和复制操作。</block>
  <block id="6d97d3e510fc0fba449ece8ddd3f3d10" category="paragraph"><block ref="6d97d3e510fc0fba449ece8ddd3f3d10" category="inline-image-macro-rx" type="image"></block></block>
  <block id="657bad21acd4ceb926477ced53a4ec55" category="section-title">文件系统分析</block>
  <block id="65424b0dc0515cfa3b67e71712012db0" category="paragraph">NetApp XCP 本机支持您识别，检查和分析非结构化数据以提高洞察力，这是企业客户的一项重要要求，他们需要利用这些洞察力更好地进行规划，实施高价值数字资产，并通过报告和评估实现数据监管。</block>
  <block id="03c5a03e8b03794f5fa193e72245496c" category="paragraph">处理敏感数据的客户可以使用 NetApp XCP 问题解答解决典型的操作问题，例如：</block>
  <block id="6ad28c778baa08cff585599e160c12c8" category="list-text">我的数据在哪里？</block>
  <block id="5eccfafcfad0fb3dcd5f4f1036fed9f9" category="list-text">我们拥有多少数据和哪些类型的文件？</block>
  <block id="b1c54971a6211d7b7e3d074bff16b4c9" category="list-text">哪些数据正在使用中，有多少数据处于休眠状态？</block>
  <block id="4a00bd65ba0b2cd4f1fb126fbde7d377" category="paragraph">下图显示了 GUI 中的 NetApp XCP 文件分析通信。</block>
  <block id="81ff19b428c80049b09f8e1e6e55cfde" category="paragraph"><block ref="81ff19b428c80049b09f8e1e6e55cfde" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f2a6c498fb90ee345d997f888fce3b18" category="section-title">删除</block>
  <block id="4125c56415a1c3b98b49ee7f8c2ebfc3" category="paragraph">存储团队和电子设计自动化（ Electronic Design Automation ， EDA ）工作负载清理大型目录可能非常困难，无论是陈旧的数据还是需要清理以恢复存储空间的测试数据。XCP 提供了快速删除功能，可以删除完整的目录树。NetApp XCP 删除功能可从给定 NAS 路径中删除文件和文件夹。您可以利用匹配筛选器删除一组特定的文件和文件夹。对于大量文件和文件夹，您可以使用强制选项，该选项不需要确认即可删除。</block>
  <block id="ecfd5328aaeaeb8ab72037598049a32c" category="section-title">支持实时源迁移</block>
  <block id="35ad2e0838c5e3a6a45f5b445ba4cebf" category="paragraph">XCP 1.7 中提供的实时源迁移支持允许从正在使用的数据源（读写活动）进行迁移。XCP 会删除迁移作业期间正在使用的文件，例如正在运行复制和同步，跳过的文件信息会捕获到 XCP 日志中。</block>
  <block id="286a0f56c729672b0709605c558d0008" category="paragraph">此功能支持源上的更改，但不支持目标上的更改。在迁移期间，目标不应处于活动状态。只有 NFS 迁移才支持实时源迁移。</block>
  <block id="2c346a482fcf83bd03d1d51f65d58b8d" category="admonition">实时源迁移不需要特殊设置。</block>
  <block id="ba41152bc4991a294ab26fbe691d52e3" category="section-title">XCP 的前提条件</block>
  <block id="010e3e2a3d44100784dac368cdb601c0" category="paragraph">在部署 NetApp XCP 之前，必须满足以下前提条件：</block>
  <block id="b76760dcfae800f7180ec4e8c57a8e2f" category="list-text">运行以下命令，验证 NFS 服务器使用的 NFS 端口：</block>
  <block id="a9a9fca38da059af5a55e2fc58ef3851" category="list-text">要访问执行 XCP 操作的位置，例如内部或云实例（例如 Azure ， AWS 或 Google 虚拟机虚拟机虚拟机虚拟机虚拟机虚拟机虚拟机虚拟机虚拟机虚拟机实例），请打开 NFS 端口的防火墙端口。</block>
  <block id="b22a57ce186f512ec584f5aac1d3de34" category="list-text">使用 telnet 命令 ` &lt;on-prem nfs data LIF IP 或 NAS IP &gt; 2049` 确认 NFS 端口可从 XCP 服务器访问。默认端口为 2049. 。如果您的环境具有其他端口，请使用该 IP 。</block>
  <block id="e54a7adb3b7e28ed3d693d972fc48fd0" category="list-text">对于 NFS ，使用 `showmount -e &lt; NAS IP &gt;` 命令验证共享是否可从 XCP 服务器访问。</block>
  <block id="da7f6a983e12f3b14b965ea651990ca9" category="list-text">将目标卷上的索引节点数增加到源文件上的文件数（文件数）以上。</block>
  <block id="71858e85f290ec0f6955841bab9f3aef" category="inline-link">NetApp XCP 许可证门户</block>
  <block id="14324adbfb79ad4b6832f6a02a1275db" category="list-text">从下载 XCP 许可证<block ref="eab886d42d2df7a710066e6d9bf6f5f5" category="inline-link-rx"></block>。</block>
  <block id="7481213bd7173438d06de418474e428b" category="list-text">您必须在 mysupport.netapp.com 上拥有 NetApp 帐户，或者可以免费注册。</block>
  <block id="d25e9f08475ddf6a2701e7cfbd67ff06" category="list-text">下载许可证并准备好。</block>
  <block id="17e68cc6d5408c91b6067efb25d02149" category="list-text">为每个 Azure NetApp 卷或云中的 Cloud Volume Service （高级服务级别）为 XCP 目录创建一个内部 NFS 共享。</block>
  <block id="3d19c697861d11cce0f1d78d41cfea64" category="list-text">创建 NAS 卷并为数据目标配置共享。</block>
  <block id="4f2a304b9680876edc7cb61b5c4c7134" category="list-text">对于多个 XCP 实例，您必须有一个或多个服务器或云实例才能将数据从多个源文件夹或文件传输到目标。</block>
  <block id="adc4e34febc2f5919cfa03870630c2fc" category="list-text">maxdir size （默认值为 308MB ）用于定义单个文件夹中的最大文件数（大约 100 万个）。增加 maxdir size 值以增加文件数。增加此值会影响额外的 CPU 周期。</block>
  <block id="a1552408599f6e2171495d55ae375802" category="list-text">在云环境中， NetApp 建议您在内部环境和云环境之间设置 ExpressRoute （ Azure ）， Direct Connect （ AWS ）或 Cloud Interconnect （ GCP ）。</block>
  <block id="fb41b0ab70237465636fc4267d1c00dd" category="inline-link-macro">下一步：迁移工作流。</block>
  <block id="7ed4381f9a10813d06ebeaf5c947c2c1" category="summary">NetApp XCP 文件分析 GUI 可通过在后端使用 XCP 并可视化任何 NAS （ NFS ， SMB ）文件系统的统计信息（如图形和视图）来帮助运行文件系统扫描。</block>
  <block id="250a5d043009990eb69a399d7c630462" category="doc">文件分析</block>
  <block id="47461303c8b8cbeb3e7558e2a9a1ca70" category="inline-link-macro">上一步：迁移工作流。</block>
  <block id="685a7e894721315c196897b76f95b8ce" category="paragraph"><block ref="685a7e894721315c196897b76f95b8ce" category="inline-link-macro-rx"></block></block>
  <block id="0f2604fbc18e6e91ba050460e6557361" category="paragraph">NetApp XCP 文件分析 GUI 可通过在后端使用 XCP 并可视化任何 NAS （ NFS ， SMB ）文件系统的统计信息（如图形和视图）来帮助运行文件系统扫描。从 1.6 开始， XCP 可通过使用 Configure 和 systemctl 选项通过简单的部署步骤作为服务运行。XCP 配置选项可指导您安装和配置 Postgres 和 Web 服务器以及收集凭据。systemctl 选项将 XCP 作为服务从图形用户界面运行 REST API 通信。</block>
  <block id="914cb171c700c273306e8265b56f4973" category="paragraph">下图显示了 XCP 文件分析流。</block>
  <block id="538e51b99e800ab65e133b5d57b2dc7f" category="paragraph"><block ref="538e51b99e800ab65e133b5d57b2dc7f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9bcdbf2b32a87f7efd13f706d43954d5" category="inline-link">NetApp XCP 1.6 改进了开放式文件分析和基础架构</block>
  <block id="f85271f8d53bdbb67001f47101c7fe2f" category="admonition">有关 XCP 文件分析的高级架构，统计信息视图等基于图形用户界面的信息板视图以及文件分发视图详细信息，请参见<block ref="924a0428223d35821b584a5368c0e3e5" category="inline-link-rx"></block> 博客</block>
  <block id="2e87561e6e0a4282134ced9e8a1a2bf5" category="paragraph">在 XCP 1.6 中，用于自定义图形的图形用户界面有限。要创建所需的图形，您可以使用命令行界面，使用匹配的筛选器运行 `XCP scan` 命令。请参见以下示例。</block>
  <block id="168c81694a3b19988d829a9baeda23fd" category="list-text">使用 `XCP scan` 和 ` -match` 筛选器生成一年后修改的文件列表，其中包含占用的空间。</block>
  <block id="de615506a73ca5960be54d36ba7fcd5b" category="list-text">查找一年以上的文件所使用的空间。</block>
  <block id="d2d1f03d5f19a1229103a85cc9224a61" category="list-text">查找一年多前修改的数据的总大小和图形视图。</block>
  <block id="d706f3d28ee3e74f9a6829c882169af8" category="paragraph">以下报告是对一年多前修改过的文件的自定义扫描示例。</block>
  <block id="4d614048a495643d1c641a86e53b78d3" category="paragraph"><block ref="4d614048a495643d1c641a86e53b78d3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="54e4262e01c029cac8932a431c7e3d3f" category="paragraph"><block ref="54e4262e01c029cac8932a431c7e3d3f" category="inline-link-macro-rx"></block></block>
  <block id="035fe4f74f99e66d6525774bf40236f9" category="summary">本节介绍使用 NetApp XCP 迁移数据的最佳实践，准则和建议。</block>
  <block id="52f7ac44cac2d8d1a3f005648d7521e3" category="doc">最佳实践准则和建议</block>
  <block id="b5a13e4f32bf69c6814808ff6a11eb9b" category="inline-link-macro">先前版本：使用 ACL 将 CIFS 数据从源存储箱迁移到 ONTAP 。</block>
  <block id="a930ea4d6e07241178b9fe2f3c054fd2" category="paragraph"><block ref="a930ea4d6e07241178b9fe2f3c054fd2" category="inline-link-macro-rx"></block></block>
  <block id="1cce79308861dd86d5e56af13afefaf2" category="list-text">使用支持 IMT 的 XCP 客户端操作系统。IMT 支持的客户端已通过 NetApp 认证。</block>
  <block id="ec653488c4b3b9bb00702a4fb937f5b4" category="list-text">在 Linux 操作系统中以 root 用户身份运行 XCP 以执行迁移。您可以以 sudo 用户身份运行 XCP 命令，但 XCP 不支持此命令。</block>
  <block id="8c8f6415908fe0a235f0850d80a398a4" category="list-text">每个客户端仅运行一个 XCP 实例。从技术上讲，您可以从不同的位置在同一主机上运行多个 XCP 实例，但这不是受支持的做法。确实，运行许多实例可能会导致失败。</block>
  <block id="cac486281cae3e805e89a64673c47eb3" category="list-text">在当前 XCP 版本中，不支持实时源。如果源 NetApp 卷处于活动状态，并由应用程序和用户持续更改，则应创建源卷的快照以执行迁移。</block>
  <block id="c1f9797ffa66b762cf07348c6bc4a005" category="list-text">最佳做法是，为每个增量同步创建一个名称不同的新快照，以便在发生故障时根据快照名称轻松创建增量迁移路径。</block>
  <block id="1309895bb5c78406c77a6cc2800160eb" category="list-text">如果要执行基于快照的迁移，最佳做法是继续执行基于快照的迁移，直到转换为止。</block>
  <block id="cc9954d8dc3e80c40af9d0a7ca3de005" category="list-text">如果您的文件数超过 1000 万个，并且增量数据更改率超过 50% ，则最佳做法是使用比安装和管理指南中的最低建议更高的核心数和更多的内存。</block>
  <block id="f6cb936ed9c08627956daed52c6c3323" category="inline-link-macro">下一步：故障排除。</block>
  <block id="58c815a6f6adf3657aa40f96cb5f2d08" category="paragraph"><block ref="58c815a6f6adf3657aa40f96cb5f2d08" category="inline-link-macro-rx"></block></block>
  <block id="7776aec966d5a0c71bd4e8230f9470b8" category="summary">此用例基于电视网络客户。客户希望将 Oracle Recovery Manager （ RMAN ）备份文件迁移到云，并使用 Azure NetApp Files 和 Pacemaker 软件运行 Oracle E-Business Suite （ EBS ）应用程序。客户还希望将其数据库备份文件迁移到按需云存储，并将大型文件（每个文件的大小介于 25 GB 到 50 GB 之间）传输到 Azure 。</block>
  <block id="8108bac490ceb375198c578e8a439026" category="doc">使用 XCP Data Mover 迁移大型文件</block>
  <block id="adec666d077f4afe1b4f2b8720ed1247" category="inline-link-macro">先前版本：使用 XCP 数据移动器将数百万个小文件迁移到灵活存储。</block>
  <block id="d6be3aed77745a993a24266eaf05084d" category="paragraph"><block ref="d6be3aed77745a993a24266eaf05084d" category="inline-link-macro-rx"></block></block>
  <block id="06470d7a09a56d555bad98bdf38a6cad" category="paragraph">下图说明了将大型文件的数据从内部迁移到 Azure NetApp Files 的过程。</block>
  <block id="1b95efe3eae02043da6528de3cf9caf8" category="inline-link-macro">下一步：重复文件。</block>
  <block id="76fdb34470826293aaf52b30bf98fce0" category="paragraph"><block ref="76fdb34470826293aaf52b30bf98fce0" category="inline-link-macro-rx"></block></block>
  <block id="ddf97b6ffb913bd772848e3ebecfc8c1" category="summary">本节介绍 NetApp XCP 的数据传输部署步骤。</block>
  <block id="8388066510b59c8d3387373b6969a7af" category="doc">部署步骤</block>
  <block id="c6310b144c1666a29ec7cacf1c0dceab" category="inline-link-macro">上一篇：文件分析。</block>
  <block id="57c4917a0617c8b675e6cc1dbad5c7fe" category="paragraph"><block ref="57c4917a0617c8b675e6cc1dbad5c7fe" category="inline-link-macro-rx"></block></block>
  <block id="8449c94058b7c2e686c3e19f7e772a65" category="section-title">测试台详细信息</block>
  <block id="94cb70bde9d89f0b10ffdca34b0bec22" category="paragraph">下表提供了用于此部署和性能验证的测试台的详细信息。</block>
  <block id="57419d904381619fcf00bc94e4ce26f1" category="cell">XCP 1.7 版</block>
  <block id="0bf2dca8ce9b94406660e58b59a3dbbd" category="list-text">一台 Linux 服务器— Linux （ RHEL 7.9 或 RHEL 8 ）</block>
  <block id="d85d793ce9fe1772209fa5e17fb29449" category="list-text">一台 Windows 服务器— Windows Server 2019 标准版</block>
  <block id="91ea491db15b6d672d79b23fb98eb089" category="cell">源卷的 NetApp AFF 存储阵列 HA 对</block>
  <block id="23ec9249d03285a513eaaf182a7bcd49" category="list-text">AFF8080</block>
  <block id="a2a817ee9a8e05389f7b11bd8ce4bbdb" category="list-text">NFS 协议</block>
  <block id="80fdc6d88149270be735269f2ff65645" category="cell">用于目标卷的 NetApp AFF 存储阵列 HA 对</block>
  <block id="203165a49e3a391bdbc44e3a05d54279" category="list-text">ONTAP 9.</block>
  <block id="28712ee052ea500eba0cdbb1d847277f" category="cell">Fujitsu PRIMERGY RX2540 服务器</block>
  <block id="539c5af1c2682685cd076697aaa6c700" category="cell">每个均配备： * 48 个 CPU * Intel Xeon * 256 GB 物理内存 * 10GbE 双端口</block>
  <block id="0cc5c79089d6ca0752529568758efc4c" category="cell">10GbE</block>
  <block id="cad93f46c02bf56f0aa5192ddacb8ab7" category="section-title">部署步骤</block>
  <block id="2879e817640f94636340918850eb6903" category="inline-link">《 NetApp XCP 用户指南》</block>
  <block id="f2dd54ec57ec5464ee3aa191a48a8a43" category="paragraph">要部署 NetApp XCP 以进行数据传输，请先在目标位置安装并激活 XCP 软件。您可以在中查看详细信息<block ref="ae77d8ba86ab9e3027c314c6b4922595" category="inline-link-rx"></block>。为此，请完成以下步骤：</block>
  <block id="27109f45b9a84461a0e1e50282d2bc4f" category="list-text">满足（ xref ） " XCP 的前提条件 " 一节中详细介绍的前提条件。</block>
  <block id="c58c8903e33903d2e630277aa3a78795" category="inline-link">NetApp XCP （下载）页面</block>
  <block id="2d1acef34bb45f2c1878c6b576f3b400" category="list-text">从下载 XCP 软件<block ref="13844fc5dba1627d28169d2acfff11e2" category="inline-link-rx"></block>。</block>
  <block id="8319752fe43598ddb329e536217c1cb5" category="list-text">将下载的 XCP tar 文件复制到 XCP 服务器。</block>
  <block id="c9b8e059d1597eaead43d286e91c91e3" category="list-text">取消压缩 tarball 。</block>
  <block id="9f2a2420f596ae9cccb1b900cd8ee187" category="inline-link"><block ref="9f2a2420f596ae9cccb1b900cd8ee187" category="inline-link-rx"></block></block>
  <block id="19f1deecf23a78878eb01c772b9233e0" category="list-text">从下载许可证<block ref="4da39fde529d1b69f60873c302229eed" category="inline-link-rx"></block> 并复制到 XCP 服务器。</block>
  <block id="3df11515e644382207c1430c36ea48bb" category="list-text">激活许可证。</block>
  <block id="ad7984249c2054b4da5fd3b57b1b91ef" category="list-text">找到源 NFS 端口和目标 NFS 服务器。默认端口为 2049. 。</block>
  <block id="79fe861b8c719b1a534bdbcace1444a2" category="list-text">检查 NFS 连接。使用 telnet 访问 NFS 服务器端口，检查 NFS 服务器（源和目标）。</block>
  <block id="5e471de79dbe02105770bcf04bc501d5" category="list-text">配置目录。</block>
  <block id="67005679d502da10622f2104421e894b" category="list-text">为 XCP 目录创建 NFS 卷并导出 NFS 。您还可以利用操作系统 NFS 导出来导出 XCP 目录。</block>
  <block id="d6f2a18783592d1858e3e5bdcabd4567" category="list-text">检查 NFS 导出。</block>
  <block id="39b638480b201a7448774e8186012e4e" category="list-text">更新 `xcp.ini` 。</block>
  <block id="9d44d1309af47903754b16c403f68774" category="list-text">使用 `XCP show` 查找源 NAS 导出。查找：</block>
  <block id="fbff9a42f0ba33571594cb39da93ef4b" category="list-text">（可选）扫描源 NAS 数据。</block>
  <block id="82d1938e7390e37babdea8d6fd359156" category="paragraph">扫描源 NAS 数据有助于您了解数据布局并发现任何可能的迁移问题。XCP 扫描操作时间与文件数量和目录深度成比例。如果您熟悉 NAS 数据，可以跳过此步骤。</block>
  <block id="c6e94e11da5ba5bce0f27b8c782e4110" category="list-text">检查 `XCP scan` 创建的报告。主要搜索无法读取的文件夹和无法读取的文件。</block>
  <block id="6a6a10773cfc849f638ac0137a5f08d6" category="list-text">（可选）更改索引节点。查看索引节点数，并根据目录卷和目标卷要迁移或复制的文件数（如果需要）修改索引节点数。</block>
  <block id="342779baf0b15fdf377f142c987e896a" category="list-text">扫描目标卷。</block>
  <block id="a88831977a2b62e982b722f6fa6662b5" category="list-text">检查源卷和目标卷空间。</block>
  <block id="4b14d92fd07932987cf7416eb7f604ca" category="list-text">使用 `XCP copy` 将数据从源复制到目标并检查摘要。</block>
  <block id="506aae448569ed08125f41ed940eb00b" category="admonition">默认情况下， XCP 会创建七个并行进程来复制数据。可以对此进行调整。</block>
  <block id="5c46a2da3e6e0423829946fe877c50b8" category="admonition">NetApp 建议源卷为只读卷。源卷是实时活动文件系统。`XCP 副本` 操作可能会失败，因为 NetApp XCP 不支持由应用程序持续更改的实时源。</block>
  <block id="0f7dbc07af0b5c3ba51ff604b81ebe8a" category="paragraph">对于 Linux ， XCP 需要索引 ID ，因为 XCP Linux 会执行目录编制。</block>
  <block id="764363dd147880ab6aca242a0417562e" category="list-text">（可选）检查目标 NetApp 卷上的索引节点。</block>
  <block id="ab3ba5fb62db279b7d07bac650a6c2d2" category="list-text">使用 `XCP sync` 执行增量更新。</block>
  <block id="6cdfbe571ba2209e0a76f3bcabfee9f6" category="paragraph">在本文档中，为了模拟实时，对源数据中的 100 万个文件进行了重命名，然后使用 `XCP sync` 将更新后的文件复制到目标。对于 Windows ， XCP 既需要源路径，也需要目标路径。</block>
  <block id="13475b4ca9a916769b9d63f4fddfa18d" category="list-text">验证数据传输。您可以使用 `XCP verify` 来验证源和目标是否具有相同的数据。</block>
  <block id="1cd06f171a5a99926a67bd673014f765" category="paragraph">XCP 文档为 `scan` ， `copy` ， `sync` 和 `verify` 操作提供了多个选项（包括示例）。有关详细信息，请参见<block ref="ae77d8ba86ab9e3027c314c6b4922595" category="inline-link-rx"></block>。</block>
  <block id="efa146517859e051c07fabac4c88d3e7" category="admonition">Windows 客户应使用访问控制列表（ ACL ）复制数据。NetApp 建议使用命令 `XCP copy -acl -fallbackuser\&lt;username&gt; -fallbackgroup\&lt;username or groupname&gt; &lt;source&gt; &lt;destination&gt;` 。考虑到包含使用 ACL 的 SMB 数据的源卷以及 NFS 和 SMB 均可访问的数据，目标卷必须为 NTFS 卷，以获得最佳性能。使用 XCP （ NFS 版本）从 Linux 服务器复制数据，并使用 Windows 服务器中的 ` -acl` 和 ` -noddata` 选项执行 XCP （ SMB 版本） sync ，以便将 ACL 从源数据复制到目标 SMB 数据。</block>
  <block id="85760de676a9f74f28f26115c39c9a0b" category="inline-link">正在配置 " 管理审核和安全日志 " 策略</block>
  <block id="a0251b301ad566d86ffa3916c5510295" category="paragraph">有关详细步骤，请参见<block ref="06fdba77988da3047baf401e4fdefca5" category="inline-link-rx"></block>。</block>
  <block id="d2bac014bbd39f6954893239102c5678" category="inline-link-macro">接下来：规模估算准则。</block>
  <block id="b49cd7fb5a227da1698c527804f31bbb" category="paragraph"><block ref="b49cd7fb5a227da1698c527804f31bbb" category="inline-link-macro-rx"></block></block>
  <block id="24992328317a5b7b3c00507eb27776df" category="paragraph"><block ref="24992328317a5b7b3c00507eb27776df" category="inline-link-macro-rx"></block></block>
  <block id="d4f4c40bd169a262676284f5da7a191a" category="cell">2020年10月</block>
  <block id="945407c0c602d0c34ead1ebb5427a84b" category="summary">我们使用 NetApp XCP 将数据从 GPFS 迁移到 NFS ，以便 GPU 可以处理数据。AI 通常处理来自网络文件系统的数据。</block>
  <block id="1f797a3a419cdffd442fc4b662974908" category="doc">从高性能计算到 ONTAP NFS</block>
  <block id="95160fc4cfa09139af600f92561c7ef9" category="inline-link-macro">上一步：数据湖到 ONTAP NFS 。</block>
  <block id="9d82d327cabd66bd4cccb55cb5ed28ec" category="paragraph"><block ref="9d82d327cabd66bd4cccb55cb5ed28ec" category="inline-link-macro-rx"></block></block>
  <block id="a4a4d9553ba807d3f28f8f25ea56cfec" category="paragraph">此用例是根据现场组织的请求创建的。一些 NetApp 客户的数据位于高性能计算环境中，该环境可为培训模型提供数据分析，并使研究组织能够深入了解和了解大量数字数据。NetApp 现场工程师需要一个详细的操作步骤才能将数据从 IBM 的 GPFS 提取到 NFS 。我们使用 NetApp XCP 将数据从 GPFS 迁移到 NFS ，以便 GPU 可以处理数据。AI 通常处理来自网络文件系统的数据。</block>
  <block id="0ce008ed1a75e69e9f21d1ad29ed23dd" category="paragraph">有关高性能计算到 ONTAP NFS 使用情形，录制的演示和测试结果的详细信息，请参见<block ref="c5fcc47a7dd315afaa32fcdac46ffd7d" category="inline-link-rx"></block> 博客</block>
  <block id="fb64727a5df67d0ceff6f0a11b531ab5" category="paragraph">有关使用 NetApp XCP 将 MapR-FS 数据移动到 ONTAP NFS 中的详细步骤，请参见中的附录 A ： gpfs 到 NFS―详细步骤<block ref="e760c508aca9c545c45aba81e95e5593" category="inline-link-rx"></block>。</block>
  <block id="1b5c563b4edac6a7e8566fac62f90b34" category="inline-link-macro">接下来：使用 XCP 数据移动器将数百万个小文件迁移到灵活存储。</block>
  <block id="0461d449643091f3bbb27cfbb215c6f2" category="paragraph"><block ref="0461d449643091f3bbb27cfbb215c6f2" category="inline-link-macro-rx"></block></block>
  <block id="1357196e1dc18c4ad43fe26a6c1b30ad" category="inline-link-macro">上一步：性能调整。</block>
  <block id="33672b776ede62bd1269689ea61e45aa" category="paragraph"><block ref="33672b776ede62bd1269689ea61e45aa" category="inline-link-macro-rx"></block></block>
  <block id="1ebf7a1cb4f3826913a58c19018c694e" category="paragraph">本节介绍客户场景及其架构。</block>
  <block id="b58464d62b5399c457b8a1fcf6bbcd27" category="inline-link-macro">接下来：数据湖到 ONTAP NFS 。</block>
  <block id="a24139c6a89df9b0694c3ea695639ace" category="paragraph"><block ref="a24139c6a89df9b0694c3ea695639ace" category="inline-link-macro-rx"></block></block>
  <block id="322bc614a8031f8c334d233f8221a4ab" category="summary">本节详细介绍了将数据从 7- 模式 NetApp Data ONTAP 迁移到 ONTAP 的步骤。</block>
  <block id="30ee25b2188724428e827e97bab504fe" category="doc">将数据从 7- 模式迁移到 ONTAP</block>
  <block id="aecfc9b89f609bfde217a6cf8fc0b00a" category="inline-link-macro">先前：从 SMB/CIFS 共享创建 CSV 文件。</block>
  <block id="6da13b2cdb445320dc3e29759119f4e8" category="paragraph"><block ref="6da13b2cdb445320dc3e29759119f4e8" category="inline-link-macro-rx"></block></block>
  <block id="3ec8186e1900b95154cccf8ccea38023" category="section-title">将 7- 模式 NFSv3 存储过渡到 ONTAP 以获取 NFS 数据</block>
  <block id="e70a6b3d23d1e0da94c71a9ea26747d1" category="paragraph">本节介绍下表中的分步操作步骤，用于将源 7- 模式 NFSv3 导出过渡到 ONTAP 系统。</block>
  <block id="cad365d13740342c8f6199feb7229137" category="paragraph">NetApp 假定源 7- 模式 NFSv3 卷已导出并挂载在客户端系统上，并且 XCP 已安装在 Linux 系统上。</block>
  <block id="b40dbfa52a308abff927380b983cd868" category="list-text">验证目标 ONTAP 系统是否运行正常。</block>
  <block id="39745ae9472f91abcd9e844389157858" category="list-text">验证目标系统上是否至少存在一个非根聚合。聚合正常。</block>
  <block id="47e01226b4fdf549d938eb5c6196970d" category="paragraph">如果没有数据聚合，请使用 `storage aggr create` 命令创建一个新聚合。</block>
  <block id="5c52d0e31e44663ee633be681387faa1" category="list-text">在目标集群系统上创建 Storage Virtual Machine （ SVM ）。</block>
  <block id="426b5839edbb7a7772be396e7eaceace" category="list-text">从目标 SVM 中删除 FCP ， iSCSI ， NDMP 和 CIDS 协议。</block>
  <block id="d03930721e424cdac105ccd0172f7dbe" category="paragraph">验证此 SVM 是否支持 NFS 协议。</block>
  <block id="4d6b5eb9160c3c34e9ff5535c403cea9" category="list-text">在目标 SVM 上创建新的读写数据卷。验证安全模式，语言设置和容量要求是否与源卷匹配。</block>
  <block id="a2cebf1e91b2a266a58458873c8980fd" category="list-text">创建数据 LIF 以处理 NFS 客户端请求。</block>
  <block id="6817d90b89495074e679248b56128378" category="paragraph">验证是否已成功创建 LIF 。</block>
  <block id="3a014fae7f5d70cc01c593a8401140ee" category="list-text">如果需要，使用 SVM 创建静态路由。</block>
  <block id="84bb87c2987a4b39ea23430f38570808" category="paragraph">验证是否已成功创建路由。</block>
  <block id="54b19b8b3b6de7bce018de598a1645ea" category="list-text">在 SVM 命名空间中挂载目标 NFS 数据卷。</block>
  <block id="6365adb4324221d944bc90c4663dfe5a" category="paragraph">验证是否已成功挂载此卷。</block>
  <block id="991398c32a43bcf95d7fa14129a6fcb0" category="paragraph">您也可以使用 `volume create` 命令指定卷挂载选项（接合路径）。</block>
  <block id="6c02d24a81dd4d9b1ad7a15079b4f122" category="list-text">在目标 SVM 上启动 NFS 服务。</block>
  <block id="e210fe657c5d46e3e11ca263d1a18af7" category="paragraph">验证此服务是否已启动并正在运行。</block>
  <block id="304683b37151feda067e3acfde300057" category="list-text">验证默认 NFS 导出策略是否已应用于目标 SVM 。</block>
  <block id="353fde8a37910716dc00dec81475c0d5" category="list-text">如果需要，为目标 SVM 创建新的自定义导出策略。</block>
  <block id="174608facfdad6448222d6d46c87fba5" category="paragraph">验证是否已成功创建新的自定义导出策略。</block>
  <block id="4007cf260b496d35ba0e925f1e7a183d" category="list-text">修改导出策略规则以允许访问 NFS 客户端。</block>
  <block id="5f249df749512e129505d18fd47d7010" category="list-text">验证是否允许客户端访问卷。</block>
  <block id="94a80f56f92334f07fd30337692ca889" category="list-text">连接到 Linux NFS 服务器。为 NFS 导出的卷创建挂载点。</block>
  <block id="725ae014e8d8f66f0f2d477fa656ba32" category="list-text">在此挂载点挂载目标 NFSv3 导出的卷。</block>
  <block id="a345b19bdd483ecd745a2e643b756bc6" category="admonition">NFSv3 卷应导出，但不一定由 NFS 服务器挂载。如果可以挂载这些卷，则 XCP Linux 主机客户端会挂载这些卷。</block>
  <block id="b5b2af7fb88c03cfd258cdd77fc6fbe1" category="paragraph">验证是否已成功创建挂载点。</block>
  <block id="8d3ac4d5ea9c5d5c45d7322512d7b778" category="list-text">在 NFS 导出的挂载点上创建一个测试文件，以启用读写访问。</block>
  <block id="07e483b5917b8a9e91a22b2ebc20961a" category="admonition">读写测试完成后，从目标 NFS 挂载点删除该文件。</block>
  <block id="09280cd628b820e696b87163b3fe0fde" category="list-text">连接到安装了 XCP 的 Linux 客户端系统。浏览到 XCP 安装路径。</block>
  <block id="86de6eeea329a50737c7056637f43e49" category="list-text">在 XCP Linux 客户端主机系统上运行 `XCP show` 命令，查询源 7- 模式 NFSv3 导出。</block>
  <block id="080173849f5fec049b214897a2882295" category="list-text">扫描源 NFSv3 导出的路径并打印其文件结构的统计信息。</block>
  <block id="df86b239e412ba3ba7192b581381b444" category="paragraph">NetApp 建议在 XCP `scan` ， `copy` 和 `sync` 操作期间将源 NFSv3 导出置于只读模式。</block>
  <block id="695efe20ffcfc7c261e44cbb1b62cc78" category="list-text">将源 7- 模式 NFSv3 导出复制到目标 ONTAP 系统上的 NFSv3 导出。</block>
  <block id="50515e001679292835a498c6bd3f3c31" category="list-text">复制完成后，验证源和目标 NFSv3 导出是否具有相同的数据。运行 `XCP verify` 命令。</block>
  <block id="70d6a53ca7c3c592cb4099e2988c226c" category="paragraph">如果 `XCP verify` 发现源数据与目标数据之间存在差异，则摘要中会报告错误 `no such file or directory` 。要修复此问题描述，请运行 `XCP sync` 命令将源更改复制到目标。</block>
  <block id="505d73172f49d62bd99779ab53aa5eeb" category="list-text">在转换之前和期间，再次运行 `verify` 。如果源包含新数据或更新的数据，请执行增量更新。运行 `XCP sync` 命令。</block>
  <block id="887abb0b5917a0a6b0c47f5ef3eca1ce" category="list-text">要恢复先前中断的复制操作，请运行 `XCP resume` 命令。</block>
  <block id="f807709818ec3fbc508863a00ea17044" category="paragraph">在 `re恢复` 完成复制文件后，再次运行 `ve执行` 以使源存储和目标存储具有相同的数据。</block>
  <block id="d78900410b9203071958256c3d6a7701" category="list-text">NFSv3 客户端主机需要卸载从 7- 模式存储配置的源 NFSv3 导出，并从 ONTAP 挂载目标 NFSv3 导出。转换需要中断。</block>
  <block id="6bd42ffcfd349b793e9f6c6f00c18cd8" category="section-title">将 7- 模式卷 Snapshot 副本过渡到 ONTAP</block>
  <block id="fefac3d628a2abc2d1677e073a0688e7" category="paragraph">本节介绍用于将源 7- 模式卷 NetApp Snapshot 副本过渡到 ONTAP 的操作步骤。</block>
  <block id="721e28a3edb434ca3d7f37307126504c" category="admonition">NetApp 假定源 7- 模式卷已导出并挂载在客户端系统上，并且 XCP 已安装在 Linux 系统上。Snapshot 副本是卷的时间点映像，用于记录自上次 Snapshot 副本以来的增量更改。使用 ` -snap` 选项并将 7- 模式系统作为源。</block>
  <block id="e18566c8fe02de3e35e48df30daa5189" category="paragraph">* 警告： * 保留基本 Snapshot 副本。基线副本完成后，请勿删除基线 Snapshot 副本。要执行进一步的同步操作，需要使用基本 Snapshot 副本。</block>
  <block id="50bdf0eaa7b3716343ae0345a98e1a5f" category="list-text">在目标集群系统上创建 SVM 。</block>
  <block id="2e4b636c74015de6d92a2eb874c15a88" category="list-text">从目标 SVM 中删除 FCP ， iSCSI ， NDMP 和 CIFS 协议。</block>
  <block id="c45e0bc468a9249c2954fa84c21f833e" category="list-text">如果需要，使用 SVM 创建静态路由。</block>
  <block id="f35ea333881cef53fcd944d5a052be9d" category="paragraph">验证是否已成功挂载此卷。</block>
  <block id="71c0d546c4569fd9a5798bdbc9729ab6" category="paragraph">您也可以使用 `volume create` 命令指定卷挂载选项（接合路径）。</block>
  <block id="7ec3f8d8dd165416936305e1ca1530f0" category="list-text">验证默认 NFS 导出策略是否应用于目标 SVM 。</block>
  <block id="f69801ea46df8aed1b26399a9330f459" category="list-text">修改导出策略规则以允许访问目标系统上的 NFS 客户端。</block>
  <block id="9fee35c8bded36b1931a6addb7635a81" category="list-text">验证客户端是否有权访问目标卷。</block>
  <block id="7633c6765c7399ce0f1ecbca891fb11c" category="paragraph">NetApp 建议在 `XCP scan` ， `copy` 和 `sync` 操作期间将源 NFSv3 导出置于只读模式。在 `sync` 操作中，您必须使用相应的值传递 ` -snap` 选项。</block>
  <block id="486e9eb5a73ed3d87e070761d3ceeefe" category="list-text">将源 7- 模式 NFSv3 快照（基本）复制到目标 ONTAP 系统上的 NFSv3 导出。</block>
  <block id="160bb3a75d27ad175143123df09bce76" category="admonition">保留此基本快照以执行进一步的同步操作。</block>
  <block id="97ba1a5f7ee8f9243390e46469b6e8f3" category="list-text">复制完成后，验证源和目标 NFSv3 导出是否具有相同的数据。运行 `XCP verify` 命令。</block>
  <block id="44842ca325a3ba46b3b4703a79fab171" category="paragraph">如果 `verify` 发现源数据与目标数据之间的差异，则摘要中会报告错误 `no such file or directory `。要修复此问题描述，请运行 `XCP sync` 命令将源更改复制到目标。</block>
  <block id="030bc6fe403e876e1c932987ece73d61" category="list-text">在转换之前和期间，再次运行 `verify` 。如果源包含新数据或更新的数据，请执行增量更新。如果存在增量更改，请为这些更改创建一个新的 Snapshot 副本，并使用 ` -snap` 选项传递该快照路径以执行同步操作。</block>
  <block id="b29cfae254be5e3cfc339ed594ea9378" category="paragraph">使用 ` -snap` 选项和快照路径运行 `XCP sync` 命令。</block>
  <block id="2885d0e1370007423656773743ce189b" category="admonition">对于此操作，需要使用基本快照。</block>
  <block id="121dba07a28112a093b812991271c895" category="list-text">NFSv3 客户端主机必须卸载从 7- 模式存储配置的源 NFSv3 导出，并从 ONTAP 挂载目标 NFSv3 导出。此转换需要中断。</block>
  <block id="6db55966f4a2b44c31ed7672f14d023e" category="section-title">将 ACLv4 从 NetApp 7- 模式迁移到 NetApp 存储系统</block>
  <block id="8f81754856c547fbd3e5295b9da06cc7" category="paragraph">本节介绍将源 NFSv4 导出过渡到 ONTAP 系统的分步操作步骤。</block>
  <block id="fd58e84bd534e0ff49a00942e9ee2002" category="admonition">NetApp 假定源 NFSv4 卷已导出并挂载在客户端系统上，并且 XCP 已安装在 Linux 系统上。源系统应为支持 ACL 的 NetApp 7- 模式系统。ACL 迁移仅支持从 NetApp 迁移到 NetApp 。要复制名称中包含特殊字符的文件，请确保源和目标支持 UTF-8 编码语言。</block>
  <block id="88464fae780b488ca9d39f305a3b3777" category="section-title">将源 NFSv4 导出迁移到 ONTAP 的前提条件</block>
  <block id="078b760bc7ad8cae447a095cc53029af" category="paragraph">在将源 NFSv4 导出迁移到 ONTAP 之前，必须满足以下前提条件：</block>
  <block id="abb629da0d811e197b383d473d19f265" category="list-text">目标系统必须配置 NFSv4 。</block>
  <block id="09e4d7a665b5df121af76a08951028cf" category="list-text">NFSv4 源和目标必须挂载在 XCP 主机上。选择 NFS v4.0 以匹配源存储和目标存储，并验证源系统和目标系统上是否已启用 ACL 。</block>
  <block id="c36e1764174e8e6a7791e7afd73f3294" category="list-text">XCP 要求在 XCP 主机上挂载源 / 目标路径以进行 ACL 处理。在以下示例中， `vol1 （ 10.63.5.56 ： /vol1 ）` 已挂载在 ` /mnt/vol1` 路径上：</block>
  <block id="baa4716341f52ff4d0642ca1398e16f1" category="section-title">子目录选项</block>
  <block id="66f63b7de79aaf05b47a1b63467b2a84" category="paragraph">使用子目录的两个选项如下：</block>
  <block id="5d1498ef6a2ee01cb9031bbf8a8dadc4" category="list-text">要使 XCP 在子目录 ` （ /vol1/dir1/DIR11` ）上运行，请在 XCP 主机上挂载完整路径（`10.63.5.56 ： /vol1/dir1/DIR11` ）。</block>
  <block id="39b3225d42725e9616ca3fee7aa7cbb6" category="paragraph">如果未挂载完整路径， XCP 将报告以下错误：</block>
  <block id="84274fa575b6d9b0177512a818215d91" category="list-text">使用子目录语法（ `mount ：子目录 /qtree/.snapshot` ），如以下示例所示：</block>
  <block id="8dd9bb3f47ac0b27a42761c265b0c720" category="paragraph">要将 ACLv4 从 NetApp 7- 模式迁移到 NetApp 存储系统，请完成以下步骤。</block>
  <block id="b2f12804e995a318c2272527efb05774" category="paragraph">验证是否已成功创建 SVM 。</block>
  <block id="b887d08ec971525ffbfec7f19d01d72d" category="list-text">检查默认 NFS 导出策略是否应用于目标 SVM 。</block>
  <block id="1c94e1638450716cd57f55bafd07e60f" category="paragraph">验证是否已修改策略规则。</block>
  <block id="132fa7c123291d5007311a22ff8f5654" category="list-text">在此挂载点挂载目标 NFSv4 导出的卷。</block>
  <block id="c686c09824f51c6e681d87d1deb44c71" category="admonition">NFSv4 卷应导出，但不一定由 NFS 服务器挂载。如果可以挂载这些卷，则 XCP Linux 主机客户端会挂载这些卷。</block>
  <block id="e943b6ad310412b689f42adec28acf3a" category="paragraph">验证是否已创建文件。</block>
  <block id="35ce5d99ee6b9bb871da972e459e7259" category="list-text">在 XCP Linux 客户端主机系统上运行 `XCP show` 命令，查询源 NFSv4 导出。</block>
  <block id="97cc35dcdaf8c5c5fa0e936cd31e9907" category="list-text">扫描源 NFSv4 导出的路径并打印其文件结构的统计信息。</block>
  <block id="5073080976611febfcee79295d42232e" category="paragraph">NetApp 建议在 `XCP scan` ， `copy` 和 `sync` 操作期间将源 NFSv4 导出置于只读模式。</block>
  <block id="f120bcab91519def54b7b66ee0fbecfe" category="list-text">将源 NFSv4 导出复制到目标 ONTAP 系统上的 NFSv4 导出。</block>
  <block id="39ff9cab7c62e62bf182a632271eb700" category="list-text">完成 `copy` 后，验证源和目标 NFSv4 导出是否具有相同的数据。运行 `XCP verify` 命令。</block>
  <block id="977c8a5f0f7f70041a1c6359c72cb1cd" category="paragraph">如果 `verify` 发现源数据与目标数据之间的差异，则摘要中会报告错误 `no such file or directory` 。要修复此问题描述，请运行 `XCP sync` 命令将源更改复制到目标。</block>
  <block id="29aee025cf0bcad3c355bd0aad4516e6" category="admonition">对于此操作，需要使用先前的副本索引名称或编号。</block>
  <block id="ee0fd4f8758695ad7502bee81363478a" category="list-text">要恢复先前中断的 `copy` 操作，请运行 `XCP resume` 命令。</block>
  <block id="cdc35fb8de987dae3f48c142ffcb0686" category="section-title">将 7- 模式 SMB 存储过渡到 ONTAP 以获取 CIFS 数据</block>
  <block id="74efc43b80fa7a84f709780789176e0d" category="paragraph">本节介绍将源 7- 模式 SMB 共享过渡到 ONTAP 系统的分步操作步骤。</block>
  <block id="f6f758220d5d00061aaa03b99e14785b" category="admonition">NetApp 假定 7- 模式和 ONTAP 系统已获得 SMB 许可。此时将创建目标 SVM ，导出源和目标 SMB 共享，并安装 XCP 并获得许可。</block>
  <block id="281c766457d5499048f9440f61957421" category="list-text">扫描 SMB 共享中的文件和目录。</block>
  <block id="95c490ed8cb5d13c961fc2c50c372940" category="list-text">将文件（带或不带 ACL ）从源 SMB 共享复制到目标 SMB 共享。以下示例显示了一个具有 ACL 的副本。</block>
  <block id="dc056263ce0a29568cee559ae8ec35dc" category="admonition">如果没有数据聚合，请使用 storage `aggr create` 命令创建一个新聚合。</block>
  <block id="7c34f7c35c71ba790649c5563408e77e" category="list-text">同步源和目标上的文件。</block>
  <block id="974c1ef10ec8fef5b3ff19989555d061" category="list-text">验证是否已正确复制这些文件。</block>
  <block id="8ae319b52e88ea41e78a01efdaab2143" category="inline-link-macro">接下来：使用 ACL 将 CIFS 数据从源存储箱迁移到 ONTAP 。</block>
  <block id="b6ea874ca7f1192a99c58fa3ff1199ba" category="paragraph"><block ref="b6ea874ca7f1192a99c58fa3ff1199ba" category="inline-link-macro-rx"></block></block>
  <block id="5dc302565fd7f552e134618ee18d2be2" category="summary">此解决方案基于需要根据特定日期复制数据的客户。</block>
  <block id="07f04efd2f421076b9aa06c4fee83be5" category="doc">基于日期的特定数据扫描和复制</block>
  <block id="7af90e46070dd59c121e31e1525d4af2" category="inline-link-macro">上一步：重复文件。</block>
  <block id="7f58802ce1d6245244bb449cd961f0f3" category="paragraph"><block ref="7f58802ce1d6245244bb449cd961f0f3" category="inline-link-macro-rx"></block></block>
  <block id="e0b5216bc931e3e5fd7efb74ad10b1d3" category="paragraph">此解决方案基于需要根据特定日期复制数据的客户。验证以下详细信息：</block>
  <block id="c277b447e2e86b92f26c7dbcf8fecdf2" category="inline-link-macro">下一步：从 SMB/CIFS 共享创建 CSV 文件。</block>
  <block id="7a9653d25343b8ddab24257e57b5be7a" category="paragraph"><block ref="7a9653d25343b8ddab24257e57b5be7a" category="inline-link-macro-rx"></block></block>
  <block id="89bddd14a9f02aeace6d5ffadf25e4f3" category="summary">本文档提供了 NetApp XCP 最佳实践准则和基于测试场景的解决方案。这些最佳实践涵盖了内部以及云，文件系统分析，故障排除和 XCP 性能调整的迁移工作流。</block>
  <block id="e7b1326bcbbf0b5513213b2373b5721a" category="doc">TR-4863 ：《 NetApp XCP 最佳实践指南—数据移动，文件迁移和分析》</block>
  <block id="439be0f3df9ab229e224aa3c8dbeca77" category="paragraph">NetApp 公司 Karthikeyan Nagalingam</block>
  <block id="88d20f11fbf1788b5271fcc5d5297a41" category="paragraph">本文档提供了 NetApp XCP 最佳实践准则和基于测试场景的解决方案。这些最佳实践涵盖内部以及云，文件系统分析，故障排除和 XCP 性能调整的迁移工作流。测试场景部分介绍了客户使用情形及其要求，使用 XCP 的 NetApp 解决方案以及为客户带来的优势。</block>
  <block id="842b5068483a5cd5b058644a5d000f1c" category="inline-link-macro">下一步： NetApp XCP 。</block>
  <block id="10dbc4bbbec11552354dca73bcd59c78" category="paragraph"><block ref="10dbc4bbbec11552354dca73bcd59c78" category="inline-link-macro-rx"></block></block>
  <block id="7e0710b4cb48030b7a4c065128b88194" category="summary">本节介绍将包含安全信息的 CIFS 数据从源系统迁移到目标 ONTAP 系统的分步操作步骤。</block>
  <block id="82f0875c37eacadc40a7a7fb2a6b6313" category="doc">使用 ACL 将 CIFS 数据从源存储箱迁移到 ONTAP</block>
  <block id="0f17f55a868185c28a66d0817a780f53" category="inline-link-macro">先前版本：将数据从 7- 模式迁移到 ONTAP 。</block>
  <block id="99b2c0d3f328317650f8748e47c7bedb" category="paragraph"><block ref="99b2c0d3f328317650f8748e47c7bedb" category="inline-link-macro-rx"></block></block>
  <block id="c55bb6c3381ca2d8a4016e387cc62883" category="list-text">创建数据 LIF 以处理 SMB 客户端请求。</block>
  <block id="5368b7f480b92b4a2a9b475e6e9cf953" category="list-text">在 SVM 命名空间中挂载目标数据卷。</block>
  <block id="18f8848c17d02fd34b293885d5d3a215" category="list-text">在目标 SVM 上启动 CIFS 服务。</block>
  <block id="cf1269d629dc2110f2ae65edf8662b79" category="list-text">验证默认导出策略是否应用于目标 SVM 。</block>
  <block id="74e1ca9e0b551a7349207f3d546b9f51" category="list-text">修改导出策略规则以允许访问 CIFS 客户端。</block>
  <block id="3c19a2ac394a25f9ace05db18ad86c8b" category="paragraph">验证是否已修改策略规则。</block>
  <block id="876afc73f4771f46cfc9dba7fb687744" category="list-text">连接到安装了 XCP 的 Windows 客户端系统。浏览到 XCP 安装路径。</block>
  <block id="e73a44af938fa16a4816d3639d2f3b69" category="list-text">在 XCP Windows 客户端主机系统上运行 `XCP show` 命令，以查询源节点 SMB 导出。</block>
  <block id="7132ef955ec5e0151ccd0790da2551d7" category="list-text">运行 `help` 命令进行复制。</block>
  <block id="268b71a144890a49d97f8ca062fd48f9" category="list-text">在目标 ONTAP 系统上，获取需要作为 `backfall-user` 和 `backfall-group` 参数路径的值提供的本地用户和本地组名称列表。</block>
  <block id="ac9ad1198db0fb6f730a1f3aa97c35ab" category="list-text">要将使用 ACL 的 CIFS 数据从源迁移到目标，请使用 ` -acl` 和 ` – backft-user/group` 选项运行 `XCP copy` 命令。</block>
  <block id="a53e836d6264ad1778a4e1a7ae34f58c" category="paragraph">对于 `backfall-user/group` 选项，指定 Active Directory 中的任何用户或组，或者将本地用户 / 组分配给目标系统。</block>
  <block id="9aa080e55cad2c9968cc50de60a3f88e" category="list-text">如果 `XCP copy` 导致错误消息 `error failed to Obtain fallbackt security principal` ，请在 hosts 文件（`C ： \Windows\System32\drivers\etc\hosts` ）中添加目标框。</block>
  <block id="b7ceaa0e08e9de5bf76572a50529f752" category="paragraph">对 NetApp 存储目标框条目使用以下格式。</block>
  <block id="569ccf25ad533b79cf2f639f0326d943" category="list-text">在 hosts 文件中添加目标框条目后，如果仍收到错误消息 `error failed to get backfalling security principal` ，则表示目标系统中不存在用户 / 组。</block>
  <block id="4a909d1b3a171fdcddc8da070e839ecc" category="list-text">使用 `XCP copy` 迁移使用 ACL （包含或不包含根文件夹）的 CIFS 数据。</block>
  <block id="a4ebb620bc1fbff4f93249967cd47f4b" category="paragraph">如果没有根文件夹，请运行以下命令：</block>
  <block id="f6c1a65a9150853333bf43b4a6dc9e5b" category="paragraph">使用根文件夹运行以下命令：</block>
  <block id="154ef40d43f003733406aef6be0ada62" category="inline-link-macro">接下来：最佳实践准则和建议。</block>
  <block id="7fd167e59284838d9e36c5c99e4d2943" category="paragraph"><block ref="7fd167e59284838d9e36c5c99e4d2943" category="inline-link-macro-rx"></block></block>
  <block id="dc0b758a04bbb9e380300887d831e4e1" category="summary">本节提供了一些调整参数，这些参数有助于提高 XCP 操作的性能。</block>
  <block id="9db3ca538820d0cfb7b44ef80f16ca98" category="doc">性能调整</block>
  <block id="7931b9aae255139b42cb605b3b62a6db" category="inline-link-macro">上一页：规模估算准则。</block>
  <block id="0ff4824165c6661bc016402e35d2a9fe" category="paragraph"><block ref="0ff4824165c6661bc016402e35d2a9fe" category="inline-link-macro-rx"></block></block>
  <block id="ec6136417c258c9b7f95c39765c5ca51" category="paragraph">本节提供了一些有助于提高 XCP 操作性能的调整参数：</block>
  <block id="dd10b781bf6dd686a8631401ce0fba96" category="list-text">为了更好地扩展工作负载并将其分布在多个 XCP 实例之间，请拆分每个 XCP 实例的子文件夹以进行迁移和数据传输。</block>
  <block id="37e9b10f81fe31cb6b80609f724b34f8" category="list-text">XCP 可以使用最大的 CPU 资源— CPU 核越多，性能就越好。因此， XCP 服务器中应具有更多 CPU 。我们在实验室中测试了 128 GB RAM 和 48 个核心 CPU ，与 8 个 CPU 和 8 GB RAM 相比，性能更好。</block>
  <block id="437d7ec5d90f0fafc57a79e213e22708" category="list-text">使用 ` 并行` 选项的 XCP 副本基于 CPU 数量。默认的并行线程数（ 7 个）足以执行大多数 XCP 数据传输和迁移操作。默认情况下，对于 XCP Windows ，并行进程数等于 CPU 数。</block>
  <block id="3d01016b65c5e356c34758cb1e80518c" category="list-text">10GbE 是数据传输的良好开端。但是，我们使用 25GbE 和 100GbE 进行了测试，这两种配置可提供更好的数据传输，并建议用于大型文件大小的数据传输。</block>
  <block id="a174d00dcd4849e0653429de84c71cde" category="list-text">对于 Azure NetApp Files ，性能因服务级别而异。有关详细信息，请参见下表，其中显示了 Azure NetApp Files 服务级别和性能详细信息。</block>
  <block id="6d59be48f566a73e053e12167b279be5" category="cell">服务级别</block>
  <block id="eb6d8ae6f20283755b339c0dc273988b" category="cell">标准</block>
  <block id="8d5e7e72f12067991186cdf3cb7d5d9d" category="cell">高级版</block>
  <block id="7057376a419b3334cc7b8b7a9f064abb" category="cell">超级</block>
  <block id="0b85467ebafa7ca3c47e82dc38184484" category="cell">吞吐量</block>
  <block id="adcda45ec4de9aeb48e1893272b078d1" category="cell">16 Mbps/ TB （ TB ）</block>
  <block id="93209d2e9d1ed8d87a279cef886b5021" category="cell">64 MBps/TB</block>
  <block id="f646efbbd60d091e92b32611965c4f1c" category="cell">128 MBPS/TB</block>
  <block id="4a9cc851fc41c5762618832386fa4937" category="cell">工作负载类型</block>
  <block id="11969136028e1ffaeed70de5e59bde33" category="cell">通用文件共享，电子邮件和 Web</block>
  <block id="76ab8c335a6bb24396ea1953bac75705" category="cell">BMS ，数据库和应用程序</block>
  <block id="9dab8e594b90062c0612cbb1676234ba" category="cell">延迟敏感型应用程序</block>
  <block id="0a568304277380e4cfb0f2d2abbd99b4" category="cell">性能说明</block>
  <block id="c55268b956eecd1d58f60723a410c808" category="cell">标准性能：每 TB 1 ， 000 次 IOPS （ 16 K I/O ）和 16 Mbps/TB</block>
  <block id="536d2154a9035458ae8efd38b24f3ea7" category="cell">卓越的性能—每 TB 4 ， 000 次 IOPS （ 16 K I/O ）和 64 MBPS/TB</block>
  <block id="91ff77656b0dc231fcbe8f488a15a253" category="cell">极致性能：每 TB 8 ， 000 次 IOPS （ 16 K I/O ）和 128 MBPS/TB</block>
  <block id="121bc30e927e8a3d918fc90c0ec18fee" category="paragraph">您必须根据吞吐量和工作负载类型选择合适的服务级别。大多数客户都从高级级别开始，并根据工作负载更改服务级别。</block>
  <block id="f44706d8f59ec82b48b083fb246a4fc7" category="inline-link-macro">接下来：客户场景。</block>
  <block id="bb0eaaf9fa62e9175efd3145f00946ea" category="paragraph"><block ref="bb0eaaf9fa62e9175efd3145f00946ea" category="inline-link-macro-rx"></block></block>
  <block id="4b1c76979225b75a8e5f476356ed17e8" category="paragraph">基于 NetApp 的 VMware ：您的旅程从这里开始！</block>
  <block id="d7b056332bb039010d62c71ede534471" category="paragraph">如果您已准备好开始对 VMware 环境进行转型，请浏览最新的解决方案概述，查看我们最新的技术解决方案和产品演示。如果您已准备好下一步行动，请与 NetApp 和 VMware 专家社区接洽，帮助您规划和执行数据中心现代化，混合云或容器化应用程序计划。</block>
  <block id="be52ccc9c4dbcee449a6257062c0bcda" category="paragraph">不确定从何处开始？ <block ref="dcd7ec98fb935d9a5fd8ade723a47456" category="inline-link-macro-rx"></block> NetApp 的 VMware 专家成员。</block>
  <block id="27b7a196b8196df4eeee9d21ade20a45" category="inline-link-macro">PDF 格式</block>
  <block id="e2fd99d21fbe7a1b2ed6388c40d48b0f" category="admonition">此页面上显示的内容也可从中下载 <block ref="a182addaadbc8a97de909268c8dc9bf0" category="inline-link-macro-rx"></block>。</block>
  <block id="9d0be07780aeb437025d4b3420d12540" category="sidebar">NetApp XCP 数据迁移</block>
  <block id="68dfe5056c735db544868f482f9f1d6f" category="sidebar">NetApp XCP 最佳实践指南</block>
  <block id="acf055fa7efae33ce06471f448ae1267" category="sidebar">客户情形</block>
  <block id="c5071cdf8081474104ef1eee5ec6d784" category="sidebar">使用 ACL 将 CIFS 数据从源存储箱迁移到 ONTAP</block>
  <block id="211c181ce8e8cb0472af3095c66dc5eb" category="paragraph"><block ref="211c181ce8e8cb0472af3095c66dc5eb" category="inline-link-macro-rx"></block></block>
  <block id="7480aca6b5f94dc27cc94b015284d5e9" category="paragraph"><block ref="7480aca6b5f94dc27cc94b015284d5e9" category="inline-link-macro-rx"></block></block>
  <block id="6be5bc354916244292cf704d8a451541" category="inline-link-macro">视频：使用 Astra 控制中心迁移工作负载—采用 NetApp 的 Red Hat OpenShift</block>
  <block id="b0fd8947f538fb2988e86d35bac6d6fa" category="list-text"><block ref="b0fd8947f538fb2988e86d35bac6d6fa" category="inline-link-macro-rx"></block></block>
  <block id="c0a8420c339dd9d57d40448c30a749df" category="inline-link-macro">视频：使用 Astra Trident 和 SnapMirror 迁移工作负载—采用 NetApp 的 Red Hat OpenShift</block>
  <block id="a43d8fe0429e313d082e6919f1fd2b75" category="list-text"><block ref="a43d8fe0429e313d082e6919f1fd2b75" category="inline-link-macro-rx"></block></block>
  <block id="344aeea955e7674b99b8e8db2354133d" category="doc">使用 Astra 控制中心迁移工作负载：采用 NetApp 的 Red Hat OpenShift</block>
  <block id="7527b11aa1f9aa169a9d6103e9c4c417" category="paragraph">Azure NetApp Files ，速写和 dask 可通过与 Docker 和 Kubernetes 等业务流程工具集成来加快和简化大规模 ML 处理和培训的部署。通过统一端到端数据管道，此解决方案可降低许多高级计算工作负载固有的延迟和复杂性，从而有效地弥补开发和运营之间的差距。在培训阶段，数据科学家可以对大型数据集运行查询，并与其他用户安全地共享数据和算法模型。</block>
  <block id="a93fc9ba708498e20819f22e22ecfa5c" category="paragraph">通过在云中构建端到端分布式培训模型和数据管道，我们展示了与不利用 GPU 加速数据处理和计算框架的传统开源方法相比，工作流总完成时间有两个显著的提升。</block>
  <block id="fcceee9f9e65e4b0d089c6c433f6c191" category="paragraph">NetApp ， Microsoft ，开源业务流程框架和 NVIDIA 的结合，将最新技术作为托管服务集于一身，并具有极大的灵活性，可加快技术采用速度，加快新 AI/ML 应用程序的上市速度。这些高级服务在云原生环境中提供，可以轻松地移植到内部部署和混合部署架构中。</block>
  <block id="b622f3d3bde9c5202a2be0c23982e0b2" category="paragraph">此用例基于公开发布的<block ref="f00b4c49198828625540594bcd2c0e57" category="inline-link-rx"></block> 数据集来自<block ref="3ba217c046bd683ab55f300076736b4a" category="inline-link-rx"></block>。随着 ML 平台和应用程序的最新发展，我们现在非常关注大规模学习。点击率（ CTR ）是指每 100 次在线广告曝光的平均点击次数（以百分比表示）。它已广泛用作各种行业垂直市场和用例的关键指标，包括数字营销，零售，电子商务和服务提供商。使用 CTR 作为潜在客户流量的重要指标的示例包括：</block>
  <block id="d86cf69a8b82547a94ca3f6a307cf9a6" category="inline-link">Google 分析</block>
  <block id="fe123d76ac9bec74ba2056b6a34fbf5d" category="inline-link">AD 排名</block>
  <block id="747d705222dc64c89cfadd75a9792b30" category="list-text">* 数字营销： * 在中<block ref="6c9e2e85af2f8f35c64de5000ebda91e" category="inline-link-rx"></block>，可以使用 CTR 来衡量广告商或商家的关键字，广告和免费列表的表现。如果 CTR 较高，则表明用户发现您的广告和列表很有用且相关。CTR 还有助于实现关键字的预期 CTR ，它是的组成部分<block ref="428c3403a03510f9dc338448b285e764" category="inline-link-rx"></block>。</block>
  <block id="8a2e97f5a0cefdd4b76863bdd3773fb2" category="list-text">* 电子商务： * 除利用外<block ref="8785133d6074d4ab5f5345c36bc35a21" category="inline-link-rx"></block>，电子商务后端至少有一些访客统计信息。虽然这些统计信息乍看起来可能并不有用，但通常很容易阅读，并且可能比其他信息更准确。由此类统计信息组成的第一方数据集属于专有数据集，因此与电子商务销售商，买家和平台最相关。这些数据集可用于设置基准，并通过构建时间序列来与去年和昨天的结果进行比较，以供进一步分析。</block>
  <block id="5737cd832bf93fd33459cf0a04787441" category="list-text">* 零售： * Brick-and-mortar 零售商可以将访客数量和客户数量与 CTR 相关联。客户数量可从其销售点历史记录中查看。零售商网站或广告流量的 CTR 可能会导致上述销售。忠诚度计划是另一个用例，因为从在线广告或其他网站转出的客户可能会加入该计划以获得奖励。零售商可以通过忠诚度计划赢得客户，并记录销售历史记录中的行为，从而构建一个建议系统，该系统不仅可以预测不同类别的消费者购买行为，还可以对优惠券进行个性化设置并减少流失。</block>
  <block id="32c14bcab423a033bf540425e236d3e6" category="list-text">* 服务提供商： * 电信公司和互联网服务提供商拥有大量第一方用户遥测数据，可用于富有洞察力的 AI ， ML 和分析用例。例如，电信可以利用其移动用户每天的 Web 浏览顶级域历史日志来微调现有模型，以生成最新的受众细分，预测客户行为，并与广告商协作发布实时广告，从而获得更好的在线体验。在这种数据驱动型营销工作流中， CTR 是反映转换的一个重要指标。</block>
  <block id="78ae79f63f58a3ac75e77e3a075fd19e" category="inline-link">Trigeo Terabyte 单击 Logs</block>
  <block id="deb698cbe7918324e2e1564708266732" category="paragraph">在数字化营销背景下，<block ref="cc065865c19a3af4babfdf02c1c6b55d" category="inline-link-rx"></block> 现在是评估 ML 平台和算法可扩展性的参考数据集。通过预测点击率，广告宣传者可以选择最有可能对广告做出响应的访客，分析浏览历史记录，并根据用户兴趣显示最相关的广告。</block>
  <block id="5f326be91a09bc93ca87444e834df2a6" category="paragraph">本技术报告中提供的解决方案重点介绍了以下优势：</block>
  <block id="e150c8d445e71cda899957943e39b75f" category="list-text">分布式培训的 dask 并行计算框架</block>
  <block id="ec61531814ab09c5338813eecc764692" category="paragraph">基于快速 AI 和 Azure NetApp Files 构建的端到端工作流展示了随机林模型训练时间大幅缩短两个数量级。与传统的熊猫方法相比，每天处理实际点击日志时，这种改进非常重要，其中每天包含 45 GB 的结构化表格数据（平均）。这相当于一个包含大约 200 亿行的 DataFrame 。我们将在本技术报告中演示集群环境设置，框架和库安装，数据加载和处理，传统培训与分布式培训，可视化和监控，并比较关键的端到端运行时结果。</block>
  <block id="0359d40b3d1a900a1841f1e8bd783cd5" category="doc">TR-4904 ： Azure 中的分布式培训—点击率预测</block>
  <block id="1863627f5be51826024a24014fce26ff" category="sidebar">Azure 中的分布式培训—点击率预测</block>
  <block id="458df51beb3b33cfa61bdc8725403f5b" category="sidebar">Jupyter 笔记本电脑供参考</block>
  <block id="8d7efa937e97b1a8187ff8f122d9732a" category="sidebar">针对基于云的 VMware 部署优化存储</block>
  <block id="5a6bd3a9e0048284caf2b5f521d90959" category="list-text"><block ref="5a6bd3a9e0048284caf2b5f521d90959" category="inline-link-macro-rx"></block></block>
  <block id="2625fb6375d503af481868caf90606c9" category="summary">本节链接到与本技术报告相关的两台 Jupyter 笔记本电脑。</block>
  <block id="91409fc3ebd20becb4eb816cbcceb02e" category="doc">Jupyter 笔记本电脑作为参考</block>
  <block id="cdd5560e07964d04d88721f16446a3b6" category="paragraph">本技术报告涉及两款 Jupyter 笔记本电脑：</block>
  <block id="1490d9a5ddbc6bcbe6cedaa01eb50f99" category="inline-link-macro">* ct-andasrf-colled.ipynb.*</block>
  <block id="562c7333f0fea5590cfeb818a55e6557" category="list-text"><block ref="6f686a9606ae64621340ea0a5e72dfde" category="inline-link-macro-rx"></block> 此笔记本电脑可从 Criteo TB Click Logs 数据集加载第 15 天的数据，将数据处理并格式化到一个熊猫 DataFrame 中，训练一个 Scikit 学习随机林模型，执行预测并计算准确性。</block>
  <block id="c0cb1f1199ae4e4bdfa626e26a5a25cd" category="inline-link-macro">* Criteo_dask_rf.ipynb.*</block>
  <block id="fa93cb17bf7778768ccae778487bf90d" category="list-text"><block ref="01d86d8522c2722466fcbda71181d3ff" category="inline-link-macro-rx"></block> 此笔记本电脑可从 Criteo Terabyte Click Logs 数据集加载第 15 天数据，将数据处理并格式化为 dask cuDF ，训练 dask cuML 随机林模型，执行预测并计算准确性。这种分布式数据和模型处理和培训方法通过利用多个具有 GPU 的员工节点来实现高效率。与传统的 ML 方法相比，处理的数据越多，节省的时间就越多。您可以将此笔记本电脑部署在云，内部或混合环境中，其中 Kubernetes 集群包含不同位置的计算和存储，前提是您的网络设置可以自由移动数据和分发型号。</block>
  <block id="95e5ff389c2796a171f904ad5b9322f6" category="list-text">NetApp 和 VMware Cloud Foundation （ VCF ）</block>
  <block id="81cd1d42ffdb75544144e24cf0f8dc54" category="inline-link-macro">第 1 部分：入门</block>
  <block id="837bbffc16dc6e344470df1114a13c87" category="list-text"><block ref="837bbffc16dc6e344470df1114a13c87" category="inline-link-macro-rx"></block></block>
  <block id="0437c596200f9be8466a3200f5cf2438" category="inline-link-macro">第 2 部分： vcf 和 ONTAP 主存储</block>
  <block id="e361fc9a6477c5857207bca25b3d797f" category="list-text"><block ref="e361fc9a6477c5857207bca25b3d797f" category="inline-link-macro-rx"></block></block>
  <block id="622eda32248f1c4d1fc31dd78ec74c4a" category="cell">2021年10月14日</block>
  <block id="f6ecd264493db5fac4b21f19be4eb69d" category="cell">添加了 NetApp 与 VMware VCF 博客系列的第 1-4 部分</block>
  <block id="14c9e898417d6b3caceb9c60335c4bb3" category="inline-link-macro">第 3 部分： vcf 和 Element 主体存储</block>
  <block id="aa37de763ea804c1fb3fe637fb6ee5ef" category="list-text"><block ref="aa37de763ea804c1fb3fe637fb6ee5ef" category="inline-link-macro-rx"></block></block>
  <block id="fbbcbe8b70235742e3e6aa656c7815d9" category="inline-link-macro">第 4 部分：适用于 VMware 的 ONTAP 工具和补充存储</block>
  <block id="de8f12d6d2f85119918d1bbb774d43c8" category="list-text"><block ref="de8f12d6d2f85119918d1bbb774d43c8" category="inline-link-macro-rx"></block></block>
  <block id="00d07ce14f227693b9dabba2f52b53a5" category="inline-link-macro">使用基于 NetApp 的云产品开始使用 Azure VMware 解决方案</block>
  <block id="ac66988ead29ba5f4ed32ec3894527e7" category="list-text"><block ref="ac66988ead29ba5f4ed32ec3894527e7" category="inline-link-macro-rx"></block></block>
  <block id="3123a26626e19f387157faf3a8e35e86" category="list-text">您必须对 Red Hat OpenShift 集群具有集群管理员访问权限。</block>
  <block id="abfe00e88b26a267771078e0295b1573" category="admonition">Docker 安装的 Docker 版本必须大于 20.10 ，而 Podman 安装的 Podman 版本必须大于 3.0 。</block>
  <block id="e2f745ac603721ed9903b0acea00d059" category="admonition">如果使用 `kubeadmin` user 登录到专用注册表，请使用 token 代替 password - `podman login -u Ocp-user -p token -tls-verify=false astra-registry.apps.ocp-vmw.cie.netapp.com` 。</block>
  <block id="e4b91f5b748fa6ef8813d2871257b134" category="admonition">或者，您也可以创建服务帐户，分配注册表编辑器和 / 或注册表查看器角色（取决于您是否需要推 / 拉访问），并使用服务帐户的令牌登录到注册表。</block>
  <block id="ad533c54cadd80fbf8f60e58b7d3abd6" category="admonition">如果使用 `kubeadmin` user 登录到专用注册表，请使用 token 代替 password - `docker login -u Ocp-user -p token astra-registry.apps.ocp-vmw.cie.netapp.com` 。</block>
  <block id="4324c8f0a70a221bdde33868774e5a76" category="list-text">编辑 Astra 控制中心操作员 CR `Astra_control_center_operator_deploy.YAML` 这是 Astra 控制中心部署的一组所有资源。在操作员 CR 中，找到 `Acc-operator-controller-manager` 的部署定义，并输入注册表的 FQDN 以及将映像推送到注册表时提供的组织名称（在此示例中为 `astra-registry.apps.ocp-vmw.cie.netapp.com/netapp-astra` ） 替换文本 `ASTRA_image_regRegistry` 并提供我们刚刚在 `imagePullSecret` 部分中创建的密钥名称。验证操作员的其他详细信息，保存并关闭。</block>
  <block id="0f436b7e192eae471d7abf1265bb4c02" category="list-text">通过浏览 Astra 控制中心的 FQDN 登录到该 GUI 。</block>
  <block id="8b2aacc194c3dc4c36ce93a57e31685c" category="list-text">从当前默认存储类中删除默认标注，并将支持 Trident 的存储类标注为 OpenShift 集群的默认值。</block>
  <block id="53557215e4d209eda16495dbe5f7c505" category="paragraph">+ 注意：如果您使用 `kubeadmin` user 登录到专用注册表，请使用 token 代替密码。</block>
  <block id="6c2749dd86f49cdb85fde6976a317e4b" category="summary">本节介绍此 AI 解决方案的技术基础。</block>
  <block id="42b507999e258502c07acce91c03de9f" category="paragraph"><block ref="42b507999e258502c07acce91c03de9f" category="inline-link-macro-rx"></block></block>
  <block id="b7bec75e06d57a8576b1ec632131ea53" category="paragraph">一流的 NetApp AFF 存储系统支持在边缘进行 AI 推理部署，通过行业领先的性能，卓越的灵活性，云集成和一流的数据管理满足企业级存储需求。NetApp AFF 系统专为闪存设计，可帮助加速，管理和保护业务关键型数据。</block>
  <block id="45f242ad7738d4805c03311378260bbf" category="list-text">入门级 NetApp AFF 存储系统基于 FAS2750 硬件和 SSD 闪存介质</block>
  <block id="d308392edcd4d2f839897b51e24cf6f6" category="list-text">HA 配置中的两个控制器</block>
  <block id="7df12cd193e8452ed6fc45ca8bcd3771" category="paragraph"><block ref="7df12cd193e8452ed6fc45ca8bcd3771" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a6b0a1e5585dc8095dd546c5930f1a6c" category="paragraph">NetApp 入门级 AFF C190 存储系统支持以下功能：</block>
  <block id="42087aa1683ece2ea30ab7fa45862cd6" category="list-text">最大驱动器数为 24 个 960 GB SSD</block>
  <block id="d7123d8583ed65e3090da25ea5aee965" category="list-text">两种可能的配置：</block>
  <block id="35b9fc01c3820062d5969f142bdc5ce5" category="list-text">以太网（ 10GbE ）： 4 个 10GBASE-T （ RJ-45 ）端口</block>
  <block id="f5e2ae88aead451be011eb9f8abfdd6e" category="list-text">统一（ 16 Gb FC 或 10GbE ）： 4 个统一目标适配器 2 （ UTA2 ）端口</block>
  <block id="1e927fd215e516034d85785b393b0efb" category="list-text">最大有效容量为 50.5 TB</block>
  <block id="aa9cba7f7b6d2ff8fb2251620a584dcd" category="admonition">对于 NAS 工作负载，一个入门级 AFF C190 系统支持连续读取吞吐量为 4.4 GBps ，延迟为 1 毫秒或更短的小型随机读取吞吐量为 230 K IOPS 。</block>
  <block id="ac7bdd389786fda32ee572c48eef4838" category="paragraph">NetApp 还提供了其他入门级存储系统，可为大规模部署提供更高的性能和可扩展性。对于 NAS 工作负载，一个入门级 AFF A220 系统支持：</block>
  <block id="732568c5581337c7341011c38721e2db" category="list-text">顺序读取的吞吐量为 6.2 GBps</block>
  <block id="4900f6d90a4169888690f2c04f3c6603" category="list-text">在延迟不超过 1 毫秒的情况下进行小型随机读取时，可实现 375000 IOPS</block>
  <block id="fbcd9d84b2d7be8631cbf7226884f17a" category="list-text">最大驱动器数为 144 个 960 GB ， 3.8 TB 或 7.6 TB SSD</block>
  <block id="db527e605a2eacc627448a70b8a745db" category="list-text">AFF A220 可扩展到 1 PB 以上的有效容量</block>
  <block id="25297dbc8df2aecff2fa2e9e47638d35" category="section-title">NetApp AFF A250</block>
  <block id="cac36335022421f12e1c8e999ffeb1af" category="list-text">最大有效容量为 35 PB ，最大横向扩展为 2-24 个节点（ 12 个 HA 对）</block>
  <block id="62a23a7791227c5f5e3d068e70759128" category="list-text">与 AFF A220 相比，性能提高≥ 45%</block>
  <block id="dc7ac33362f108fc7f4b7d8eb0e2cf4e" category="list-text">440 ， 000 次 IOPS 随机读取 @1 毫秒</block>
  <block id="0f4615fb8d6105bcb2cbce504f8f091c" category="list-text">基于最新的 NetApp ONTAP 版本 ONTAP 9.8 构建</block>
  <block id="440a976974d702d027543e058c1fffc0" category="list-text">利用两个 25 Gb 以太网实现 HA 和集群互连</block>
  <block id="4dc1c0d5a0f0257d8d9e183bc226ab45" category="section-title">NetApp E 系列 EF 系统</block>
  <block id="f5e23a285b378cde99c2d7fb43586c1b" category="paragraph">EF 系列是一组入门级和中端全闪存 SAN 存储阵列，可通过 NetApp SANtricity 软件加快数据访问速度，并帮助您更快地从中获得价值。这些系统提供 SAS 和 NVMe 闪存存储，并为您提供经济实惠的至极高 IOPS ， 100 微秒以下的响应时间以及高达 44 GBps 的带宽，使其成为混合工作负载以及 AI 推理和高性能计算（ HPC ）等要求苛刻的应用程序的理想之选。</block>
  <block id="51ffc2dfd09bb521be00106f197d1009" category="paragraph"><block ref="51ffc2dfd09bb521be00106f197d1009" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e6f17b7c2ad64f8977585fc43d702abf" category="section-title">NetApp EF280</block>
  <block id="2d6477e98cb834485323c97da975c640" category="list-text">支持 32 Gb/16 Gb FC ， 25 Gb/10 Gb iSCSI 和 12 Gb SAS</block>
  <block id="d637a0904677ae775d98b9ce0beda3d6" category="list-text">最大有效容量为 96 个驱动器，总容量为 1.5 PB</block>
  <block id="6f409cb54d8cb27deac8a918fe03f3cc" category="list-text">10 Gbps 吞吐量（顺序读取）</block>
  <block id="7c61b8793dbe5a66cbf144bdabcf76cd" category="list-text">30 万次 IOPS （随机读取）</block>
  <block id="4c5a963973ae3026e92baab2ef522c6c" category="list-text">NetApp EF280 是 NetApp 产品组合中成本最低的全闪存阵列（ AFA ）</block>
  <block id="44114b1635cead15f56735bad0467251" category="section-title">NetApp EF300</block>
  <block id="f1330bea5ad6aa446aa17d0a324bb579" category="list-text">24 个 NVMe SSD 驱动器，总容量为 367 TB</block>
  <block id="6768e0b9e957297070e3822e98a4b8f9" category="list-text">扩展选项，总容量为 240 个 NL-SAS HDD ， 96 个 SAS SSD 或两者的组合</block>
  <block id="0fa40de31cbd933cc9a954d82204feb9" category="list-text">100 GB NVMe/IB ， NVMe/RoCE ， iSE/IB 和 SRP/IB</block>
  <block id="aee7a4e3788dbbff7166952ed0e2d2c9" category="list-text">32 GB NVMe/FC ， FCP</block>
  <block id="c4b9deb88d9cf1b1a2160cb28a2c41ca" category="list-text">25 GB iSCSI</block>
  <block id="03597240f9b0b4a23f3ffdf6e159d6ca" category="list-text">20 Gbps （顺序读取）</block>
  <block id="ffe3b3adfe232ee25f1914e7e7d266c4" category="list-text">670K IOPS （随机读取）</block>
  <block id="7105ea3513c2bdae1a0d63a9f0703579" category="inline-link">NetApp EF 系列 NetApp EF 系列全闪存阵列 EF600 ， F300 ， EF570 和 EF280 产品规格</block>
  <block id="6e69804b180359b12a32a56c17c0641e" category="admonition">有关详细信息，请参见<block ref="5f5484869dc0c271e2b062d172d38bee" category="inline-link-rx"></block>。</block>
  <block id="f1586460cef11d0abaaf5270f37f18d7" category="section-title">简化数据管理</block>
  <block id="2e2b24551fd50942c6da57d4f8efdfae" category="paragraph">数据管理对于企业 IT 运营至关重要，以便将适当的资源用于应用程序和数据集。ONTAP 具有以下功能，可简化操作并降低总运营成本：</block>
  <block id="4934cd09a8e487be128d2b6321ee3279" category="list-text">* 实时数据缩减和扩展的重复数据删除。 * 数据缩减可减少存储块中浪费的空间，重复数据删除可显著提高有效容量。此适用场景数据存储在本地，并分层到云。</block>
  <block id="0ddc097c124782f16e8a0a1b014fc2bb" category="list-text">* 最低，最高和自适应服务质量（ AQoS ）。 * 细粒度服务质量（ QoS ）控制有助于在高度共享的环境中保持关键应用程序的性能水平。</block>
  <block id="0c720f269a89477f24f77f6f027719cc" category="inline-link-macro">TR-4598</block>
  <block id="7920a2957aeb5c70e8ee2fa43c94e741" category="list-text">* NetApp FabricPool 。 * 此功能可将冷数据自动分层到公有和私有云存储选项，包括 Amazon Web Services （ AWS ）， Azure 和 NetApp StorageGRID Storage 解决方案。有关 FabricPool 的详细信息，请参见 <block ref="38e4393e170a142db2e52760317ecb7f" category="inline-link-macro-rx"></block>。</block>
  <block id="28e23b5888c04e1859e75c594c6cec26" category="section-title">加速和保护数据</block>
  <block id="85e643b872d0d98ec2251220de803a1f" category="paragraph">ONTAP 9 可提供卓越的性能和数据保护，并通过以下方式扩展这些功能：</block>
  <block id="bfb9fa643243eb975ccd9d158cf97800" category="list-text">* 性能和低延迟。 * ONTAP 可提供尽可能高的吞吐量，并尽可能降低延迟。</block>
  <block id="86a12b3dbbf039b371f714a515919535" category="list-text">* NetApp 卷加密（ NVE ）。 * ONTAP 提供原生卷级加密，并支持板载和外部密钥管理。</block>
  <block id="b3023c0a4db125fc22f0d6056c6e379d" category="list-text">* 多租户和多因素身份验证。 * ONTAP 支持以最高的安全性级别共享基础架构资源。</block>
  <block id="685f280ead44650493627d9ac47818e1" category="section-title">Future-Proof 基础架构</block>
  <block id="f9eaef0b2cf89b234c431c18aec36bf3" category="paragraph">ONTAP 9 具有以下功能，可满足不断变化的苛刻业务需求：</block>
  <block id="9e98379ad83b5c60933a3437c7fb61c7" category="list-text">* 无缝扩展和无中断运行。 * ONTAP 支持向现有控制器和横向扩展集群无中断添加容量。客户可以升级到 NVMe 和 32 Gb FC 等最新技术，而无需进行成本高昂的数据迁移或中断。</block>
  <block id="0cee26e8172666a9085f957269fc4b64" category="list-text">* 云连接。 * ONTAP 是云连接最广泛的存储管理软件，可在所有公有云中选择软件定义的存储（ ONTAP Select ）和云原生实例（ NetApp Cloud Volumes Service ）。</block>
  <block id="b5dc6026803056308b6bf7007af32a2b" category="list-text">* 与新兴应用程序集成。 * ONTAP 使用支持现有企业级应用程序的相同基础架构，为下一代平台和应用程序（例如自动驾驶汽车，智能城市和行业 4.0 ）提供企业级数据服务。</block>
  <block id="e4872d9c30e978d9408425f0e08882c5" category="section-title">NetApp SANtricity</block>
  <block id="965539211ad2d7bc981e7e954db08850" category="inline-link">NetApp E 系列 SANtricity 软件产品规格</block>
  <block id="568549d316f6f749a07012e522e0bca3" category="paragraph">NetApp SANtricity 旨在为 E 系列混合闪存和 EF 系列全闪存阵列提供行业领先的性能，可靠性和精简性。为繁重工作负载应用程序（包括数据分析，视频监控以及备份和恢复）实现 E 系列混合闪存和 EF 系列全闪存阵列的最高性能和利用率。借助 SANtricity ，可以在存储保持联机状态的同时完成配置调整，维护，容量扩展和其他任务。SANtricity 还提供卓越的数据保护，主动监控和认证安全性—所有这些功能均可通过易于使用的机载 System Manager 界面进行访问。要了解更多信息，请参见<block ref="64769f0652e98a060ba5d2cd17320298" category="inline-link-rx"></block>。</block>
  <block id="c4cf91172f1e96366d0dfa38c1167df9" category="section-title">性能优化</block>
  <block id="3d615c3559b8d33749ea23cf3a34b759" category="paragraph">经过性能优化的 SANtricity 软件可为您的所有数据分析，视频监控和备份应用程序提供具有高 IOPS ，高吞吐量和低延迟的数据。提高高 IOPS ，低延迟应用程序和高带宽，高吞吐量应用程序的性能。</block>
  <block id="8238dd9365065265be82d79d4dd38a98" category="section-title">最大限度地延长正常运行时间</block>
  <block id="28ed557ae8b4ff60f83da71465cbcb9b" category="paragraph">在存储保持联机的情况下完成所有管理任务。在不中断 I/O 的情况下调整配置，执行维护或扩展容量借助自动化功能，联机配置，最先进的动态磁盘池（ Dynamic Disk Pool ， DPP ）技术等实现同类最佳的可靠性。</block>
  <block id="2b34e4806834294a7dd611ad1d7d0308" category="section-title">请轻松休息</block>
  <block id="7847b3892c0f355acdb3fe824654e209" category="paragraph">SANtricity 软件可通过易于使用的机载 System Manager 界面提供卓越的数据保护，主动监控和认证安全性。简化存储管理任务。获得对所有 E 系列存储系统进行高级调整所需的灵活性。随时随地管理您的 NetApp E 系列系统。我们基于 Web 的盒装界面简化了您的管理工作流。</block>
  <block id="2758085534b10a85f702f6a61737eefb" category="paragraph"><block ref="d14308042ff124582c531f74c03d90f3" category="inline-link-rx"></block> NetApp 是适用于 Docker 和 Kubernetes 的开源动态存储编排程序，可简化永久性存储的创建，管理和使用。Trident 是 Kubernetes 原生应用程序，直接在 Kubernetes 集群中运行。借助 Trident ，客户可以将 DL 容器映像无缝部署到 NetApp 存储上，并为 AI 容器部署提供企业级体验。Kubernetes 用户（例如 ML 开发人员和数据科学家）可以创建，管理和自动化流程编排和克隆，从而充分利用 NetApp 技术提供的 NetApp 高级数据管理功能。</block>
  <block id="e367efbc26bd12c0d6ae37dd6a55ef9b" category="inline-link">Cloud Sync</block>
  <block id="2d76806bea2175a1c575d37015a3621b" category="paragraph"><block ref="f0ec1a9d50acb3759e364a1cdfa9961d" category="inline-link-rx"></block> 是一项 NetApp 服务，用于快速安全地同步数据。无论您是需要在内部 NFS 还是 SMB 文件共享， NetApp StorageGRID ， NetApp ONTAP S3 ， NetApp Cloud Volumes Service ， Azure NetApp Files ， Amazon Simple Storage Service （ Amazon S3 ）， Amazon Elastic File System （ Amazon EFS ）， Azure Blob ， Google Cloud Storage 之间传输文件， 或者 IBM 云对象存储， Cloud Sync 可以将文件快速安全地移动到您需要的位置。数据传输完成后，即可在源和目标上完全使用。Cloud Sync 会根据您预定义的计划持续同步数据，并仅移动增量，从而最大限度地减少在数据复制上花费的时间和金钱。Cloud Sync 是一款软件即服务（ SaaS ）工具，设置和使用极其简单。由 Cloud Sync 触发的数据传输由数据代理执行。您可以在 AWS ， Azure ， Google 云平台或内部部署 Cloud Sync 数据代理。</block>
  <block id="d552f08a6baeb9bee58f2ca6ff5090d2" category="section-title">联想 ThinkSystem 服务器</block>
  <block id="e76fa728781968dd4a707e2d3b1d8108" category="paragraph">联想 ThinkSystem 服务器采用创新的硬件，软件和服务，可解决客户当前面临的挑战，并提供一种循序渐进的模块化设计方法来应对未来的挑战。这些服务器利用同类最佳的行业标准技术以及联想的差异化创新技术，为 x86 服务器提供最大的灵活性。</block>
  <block id="493e1540ce727fb5f465fff015aa4733" category="paragraph">部署联想 ThinkSystem 服务器的主要优势包括：</block>
  <block id="b7c6c5eb82b90f69eddd06060626e5e3" category="list-text">高度可扩展的模块化设计，可随业务发展而扩展</block>
  <block id="c2599c559a0be54b242b8aa3c67325c8" category="list-text">行业领先的弹性，可节省数小时的成本高昂的计划外停机时间</block>
  <block id="c57cb88fcbeb47afa8496b8fc32cbf03" category="list-text">快速闪存技术可实现更低的延迟，更快的响应速度以及更智能的实时数据管理</block>
  <block id="6d72d9a0181555ca86c9562861e47058" category="paragraph">在 AI 领域，联想正在采取切实可行的方法帮助企业了解 ML 和 AI 的优势并将其用于工作负载。联想客户可以在联想 AI 创新中心探索和评估联想 AI 产品，以充分了解其特定用例的价值。为了缩短实现价值的时间，这种以客户为中心的方法可以为客户提供解决方案开发平台的概念验证，这些平台已准备就绪，可供 AI 使用并进行优化。</block>
  <block id="13f9a963bd60406520ccdc128d44b54a" category="section-title">联想 ThinkSystem SE350 边缘服务器</block>
  <block id="6bf0f92a7340921305982a91f7277085" category="paragraph">通过边缘计算，可以在将 IoT 设备中的数据发送到数据中心或云之前在网络边缘对其进行分析。如下图所示，联想 ThinkSystem SE350 专为满足边缘部署的独特要求而设计，采用紧凑的加固型环境加固外形，重点关注灵活性，连接性，安全性和远程易管理性。</block>
  <block id="72dd0df190a1bdc8d3043fafdba7122b" category="paragraph">SE350 采用 Intel Xeon D 处理器，可以灵活地支持边缘 AI 工作负载的加速，专为应对数据中心以外各种环境中服务器部署的挑战而构建。</block>
  <block id="b739a166d96ffd72ac4d456012bfbe21" category="paragraph"><block ref="b739a166d96ffd72ac4d456012bfbe21" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1e8dc5b3fbe4fe568bf4cc78b4a053fd" category="paragraph"><block ref="1e8dc5b3fbe4fe568bf4cc78b4a053fd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6bd5e585bc974f029ff9c7cc8a2b68dd" category="section-title">MLPerf</block>
  <block id="45c08b3aee1d5fb5dc3447ec1271a853" category="inline-link">MLPerf 推理 v0.7</block>
  <block id="f6922096e43c9e99d2be9d521357ff1c" category="paragraph">MLPerf 是用于评估 AI 性能的行业领先基准套件。它涵盖应用 AI 的许多方面，包括图像分类，对象检测，医学影像和自然语言处理（ NLP ）。在此验证中，我们使用了推理 v0.7 工作负载，这是此验证完成时 MLPerf 推理的最新迭代。。<block ref="1303efdddf9d8dbc0de31c402aa4ef22" category="inline-link-rx"></block> 套件包括四个适用于数据中心和边缘系统的新基准：</block>
  <block id="c781a146774780843a929b97004ba720" category="list-text">Transformers （ Bert ）提供的 * 双向编码器表示法经过微调，可使用 squad 数据集回答问题。</block>
  <block id="cb93b50c2b2216543a9eee4d9a38b38c" category="list-text">* 深度学习建议模式（ DLRM ）是一种个性化和建议模式，经过培训可优化点击率（ CTR ）。</block>
  <block id="16139bb6e8da8fe8f8aaf1e5fb8bde0d" category="list-text">* 3D U-Net.* 3D U-Net 架构接受过有关脑肿瘤分段（ Bras ）数据集的培训。</block>
  <block id="5691eec0e5e0ea401478ea67b8168d64" category="list-text">* RNN-T.* 经常性神经网络传感器（ RNNP-T ）是一种自动语音识别（ Automatic Speech Recognition ， ASR ）模型，该模型经过部分 LibriSpeech 的训练。MLPerf 推理结果和代码已公开发布，并已获得 Apache 许可证。MLPerf 推理具有一个 Edge 分支，可支持以下情形：</block>
  <block id="e772865569495cb43ba25be1d6eed756" category="list-text">* 单一流。 * 此场景模拟响应能力是关键因素的系统，例如在智能手机上执行脱机 AI 查询。各个查询将发送到系统并记录响应时间。结果将报告所有响应的 90 百分位延迟。</block>
  <block id="f9cf7025c2d80af397a9b960974631e2" category="list-text">* 多流。 * 此基准测试适用于处理来自多个传感器的输入的系统。在测试期间，系统会按固定的时间间隔发送查询。会施加 QoS 限制（允许的最大延迟）。此测试将报告系统在满足 QoS 限制的情况下可以处理的流数量。</block>
  <block id="78a9abbe3c771a5882830fc8e2a73a8f" category="list-text">* 脱机。 * 这是涉及批处理应用程序的最简单情形，指标是每秒样本吞吐量。系统可以使用所有数据，基准测试可测量处理所有样本所需的时间。</block>
  <block id="cc8cc2653d3a795d17b5d90b14d00e19" category="inline-link"><block ref="cc8cc2653d3a795d17b5d90b14d00e19" category="inline-link-rx"></block></block>
  <block id="c953c121914b99f83398f20ab2160ed1" category="paragraph">联想已发布了本文档中使用的服务器 SE350 与 T4 的 MLPerf 推理得分。有关结果，请参见<block ref="8efc95b379113ebfb6f66010213223ce" category="inline-link-rx"></block> 在条目 #0.7-145 的 " 边缘，封闭分区 " 一节中。</block>
  <block id="26cb2cd90a9e0e03f63323eab13f117d" category="inline-link-macro">下一步：测试计划。</block>
  <block id="91666b8460dc62d134fe80c31f05d28b" category="paragraph"><block ref="91666b8460dc62d134fe80c31f05d28b" category="inline-link-macro-rx"></block></block>
  <block id="58415f353579ec62f4e5d8047761a3cc" category="summary">AI 驱动的自动化和边缘计算是帮助业务组织实现数字化转型并最大限度地提高运营效率和安全性的领先方法。借助边缘计算，数据处理速度更快，因为它不必往返于数据中心。因此，将数据来回发送到数据中心或云的相关成本会降低。</block>
  <block id="1490b4526090ba1052ae7d989d2f44df" category="inline-link-macro">上一页：架构规模估算选项。</block>
  <block id="9d58af74dd11a7bf0a907e66af94ae03" category="paragraph"><block ref="9d58af74dd11a7bf0a907e66af94ae03" category="inline-link-macro-rx"></block></block>
  <block id="7d7c5045abef00692470c8d5ed1aeebd" category="paragraph">AI 驱动的自动化和边缘计算是帮助业务组织实现数字化转型并最大限度地提高运营效率和安全性的领先方法。借助边缘计算，数据处理速度更快，因为它不必往返于数据中心。因此，将数据来回发送到数据中心或云的相关成本会降低。如果企业必须使用部署在边缘的人工智能推理模型近乎实时地做出决策，则降低延迟和提高速度将非常有用。</block>
  <block id="691e8c5d8b13259848ef2e5515d14ca9" category="paragraph">NetApp 存储系统可提供与本地 SSD 存储相同或更好的性能，并为数据科学家，数据工程师， AI/ML 开发人员以及业务或 IT 决策者带来以下优势：</block>
  <block id="59ceee4c2b9743d6e9aae43f1e9ee547" category="list-text">在 AI 系统，分析和其他关键业务系统之间轻松共享数据。这种数据共享可减少基础架构开销，提高性能并简化整个企业的数据管理。</block>
  <block id="b9f30f0e1030c74a0db7ca1a1e82a22f" category="list-text">可独立扩展的计算和存储，最大限度地降低成本并提高资源利用率。</block>
  <block id="40454c2a63608aacf0433b6a47f388f4" category="list-text">利用集成的 Snapshot 副本和克隆简化开发和部署工作流，实现瞬时且节省空间的用户工作空间，集成版本控制和自动化部署。</block>
  <block id="0543f71645ff9108a860d92965cc1383" category="list-text">企业级数据保护，可实现灾难恢复和业务连续性。本文档中介绍的 NetApp 和联想解决方案是一种灵活的横向扩展架构，非常适合在边缘进行企业级 AI 推理部署。</block>
  <block id="68c8080de8c25b2c95e86546db2c34f4" category="list-text">J.Falkanger ，高级联想 HPC &amp; AI 解决方案经理</block>
  <block id="a1be3af64bad65325413de79cbdd38ec" category="list-text">NetApp 技术营销工程师 Dave Arnette</block>
  <block id="ab7eb4cf2e6900db95523411e2e2d968" category="list-text">NetApp E 系列 AI 解决方案技术主管 Joey Parnell</block>
  <block id="7506341ffff969b3db4120a09a3cd873" category="list-text">NetApp QA 工程师 Cody Harryman</block>
  <block id="16d9e623379df2a050a5042b643bf4fc" category="list-text">NetApp AFF A 系列阵列产品页面</block>
  <block id="2eea2276b1fb61cd770f311f77c0f440" category="inline-link"><block ref="2eea2276b1fb61cd770f311f77c0f440" category="inline-link-rx"></block></block>
  <block id="3ac5561d8de2087fdd9ac49ace880bff" category="paragraph"><block ref="3ac5561d8de2087fdd9ac49ace880bff" category="inline-link-rx"></block></block>
  <block id="ac2e4973250b614c4ffed16837be9bda" category="list-text">NetApp ONTAP 数据管理软件— ONTAP 9 信息库</block>
  <block id="8ac8a4cdf844ed67e9ec6ddc4b3e95ad" category="paragraph"><block ref="8ac8a4cdf844ed67e9ec6ddc4b3e95ad" category="inline-link-rx"></block></block>
  <block id="5dbac8b4dac620b04fd11b54388ac506" category="list-text">TR-4727 ：《 NetApp EF 系列简介》</block>
  <block id="3df74183de4e18a002d0a9dadd2b4b41" category="inline-link"><block ref="3df74183de4e18a002d0a9dadd2b4b41" category="inline-link-rx"></block></block>
  <block id="5e60359f54f57375f6417990b408bc8d" category="paragraph"><block ref="5e60359f54f57375f6417990b408bc8d" category="inline-link-rx"></block></block>
  <block id="bf8eb67f3476640d74487d7395b166a8" category="list-text">NetApp E 系列 SANtricity 软件产品规格</block>
  <block id="01e4cb0e0f13f033fd419d3abf905d34" category="inline-link"><block ref="01e4cb0e0f13f033fd419d3abf905d34" category="inline-link-rx"></block></block>
  <block id="62cabab367af4d0d4f74456d673e91e7" category="paragraph"><block ref="62cabab367af4d0d4f74456d673e91e7" category="inline-link-rx"></block></block>
  <block id="f11b61c13d771c4795415471f8362f8c" category="list-text">适用于容器的 NetApp 持久存储— NetApp Trident</block>
  <block id="856500f909a4984692886f9549398b67" category="inline-link"><block ref="856500f909a4984692886f9549398b67" category="inline-link-rx"></block></block>
  <block id="fe6e33e3be237f2a488d04432ad4b35f" category="list-text"><block ref="fe6e33e3be237f2a488d04432ad4b35f" category="inline-link-rx"></block></block>
  <block id="9083657cbd1d0fb49ada01ab2e2cc193" category="inline-link"><block ref="9083657cbd1d0fb49ada01ab2e2cc193" category="inline-link-rx"></block></block>
  <block id="3de4b3f21621e41c0738a82d4e694114" category="list-text"><block ref="3de4b3f21621e41c0738a82d4e694114" category="inline-link-rx"></block></block>
  <block id="1f07318e5a4df96a96fc92d83bbe5d70" category="inline-link"><block ref="1f07318e5a4df96a96fc92d83bbe5d70" category="inline-link-rx"></block></block>
  <block id="25b3dca46bdabc4612ba4ba5dac0f9db" category="list-text"><block ref="25b3dca46bdabc4612ba4ba5dac0f9db" category="inline-link-rx"></block></block>
  <block id="b658c024dad07cbf1d8523e4c3ba8d21" category="inline-link"><block ref="b658c024dad07cbf1d8523e4c3ba8d21" category="inline-link-rx"></block></block>
  <block id="fdad8301fde8271edff994d643d18865" category="paragraph"><block ref="fdad8301fde8271edff994d643d18865" category="inline-link-rx"></block></block>
  <block id="7749687216549469e9a78db087fbb44b" category="list-text">TensorFlow 基准测试</block>
  <block id="7c8f9b5afa9dfab5f8f375d1b977b046" category="inline-link"><block ref="7c8f9b5afa9dfab5f8f375d1b977b046" category="inline-link-rx"></block></block>
  <block id="be1b7087c9993d320070b1e676c832f9" category="paragraph"><block ref="be1b7087c9993d320070b1e676c832f9" category="inline-link-rx"></block></block>
  <block id="e15fea5c6bb7e2f7d8e055fbb773fc11" category="inline-link"><block ref="e15fea5c6bb7e2f7d8e055fbb773fc11" category="inline-link-rx"></block></block>
  <block id="b1a88588a48ee9492506277f8561b392" category="paragraph"><block ref="b1a88588a48ee9492506277f8561b392" category="inline-link-rx"></block></block>
  <block id="f9732caa47051768fc11729f5535891b" category="list-text">联想 ThinkSystem DM5100F 统一闪存存储阵列</block>
  <block id="a031d2e6ff4219cf38830b0db9d366b1" category="inline-link"><block ref="a031d2e6ff4219cf38830b0db9d366b1" category="inline-link-rx"></block></block>
  <block id="f8287e56c1a5982e49b792d1116aa372" category="paragraph"><block ref="f8287e56c1a5982e49b792d1116aa372" category="inline-link-rx"></block></block>
  <block id="5e79a20254a28ffdb604f6cba5216c75" category="cell">2021年3月</block>
  <block id="dfd02aef9802f4824ead7c08b8f81f1f" category="cell">初始版本。</block>
  <block id="304f30474edd152dc34aef7dbb123607" category="cell">版本 2.0</block>
  <block id="a5f3f63c2f6e1d6d4605650633b9ce8a" category="cell">2021年10月</block>
  <block id="71b3f2dc39aa770e58cd3fad98b76c37" category="cell">更新了 EF 和 MLPerf 推理 v1.1</block>
  <block id="354967c7509f48d7d8a6d2845803bfbc" category="summary">您可以调整用于验证的设置，以适合其他使用情形。</block>
  <block id="c4236be1a211aab0c15476d08b3e7e0c" category="doc">架构规模估算选项</block>
  <block id="ac0ec60d36dfa69ed9c33bff90080b23" category="inline-link-macro">上一步：测试结果。</block>
  <block id="389a3124af7d4b9dc7165b05fd96a378" category="paragraph"><block ref="389a3124af7d4b9dc7165b05fd96a378" category="inline-link-macro-rx"></block></block>
  <block id="9d8c4ebebb4b789e6ec48dda7ac54406" category="section-title">计算服务器</block>
  <block id="1b3bfec82c01730e4379631c5f74db2d" category="paragraph">我们使用的是 Intel Xeon D-2123IT CPU ，这是 SE350 支持的最低 CPU 级别，具有四个物理核心和 60 瓦 TDP 。虽然服务器不支持更换 CPU ，但可以订购功能更强大的 CPU 。支持的最大 CPU 是 Intel Xeon D-2183IT ， 16 核， 100 瓦，运行频率为 2.20 GHz 。这样可以显著提高 CPU 计算能力。虽然 CPU 本身并不是运行推理工作负载的瓶颈，但它有助于处理数据以及执行与推理相关的其他任务。目前， NVIDIA T4 是唯一可用于边缘使用情形的 GPU ；因此，目前无法升级或降级 GPU 。</block>
  <block id="928fe421f0c735b90f3b3ec353741235" category="section-title">共享存储</block>
  <block id="ba49c21e7aa335a8ea452042c02f306a" category="paragraph">在测试和验证中，我们在本文档中使用了 NetApp AFF C190 系统，该系统的最大存储容量为 50.5 TB ，连续读取的吞吐量为 4.4 GBps ，小型随机读取的 IOPS 为 230k ，经证实非常适合边缘推理工作负载。</block>
  <block id="bb33c803e43b816786d862bbbbf2c824" category="paragraph">但是，如果您需要更多存储容量或更快的网络速度，则应使用 NetApp AFF A220 或<block ref="03f94a30ec5c979321fdd9a1ba99a1c6" category="inline-link-rx"></block> 存储系统此外， NetApp EF280 系统的最大容量为 1.5 PB ，带宽为 10 Gbps ，也用于此解决方案验证。如果您希望使用更高带宽获得更多存储容量，<block ref="ab4f2e0c1e56faa457a7a1f93253a647" category="inline-link-rx"></block> 可以使用。</block>
  <block id="fdd5191dcc2e7fa6e2ec4d0618cf2a40" category="paragraph"><block ref="fdd5191dcc2e7fa6e2ec4d0618cf2a40" category="inline-link-macro-rx"></block></block>
  <block id="b481424c052310e67a9b67a931165509" category="summary">本节介绍用于验证此解决方案的测试过程。</block>
  <block id="3562305aa864cd56d3e2840eb5071caa" category="doc">测试操作步骤</block>
  <block id="e46c1f341c1cea1321f4c00d15e90b0d" category="inline-link-macro">先前：测试配置。</block>
  <block id="ed760d2dffd7d011a7870619f7884005" category="paragraph"><block ref="ed760d2dffd7d011a7870619f7884005" category="inline-link-macro-rx"></block></block>
  <block id="bff816e8e8ddbe2a3b705d92abba6627" category="paragraph">在此验证中，我们使用了以下测试操作步骤。</block>
  <block id="1b0981f820949c10d68daad3fdf03976" category="section-title">操作系统和 AI 推理设置</block>
  <block id="c13367945d5d4c91047b3b50234aa7ab" category="inline-link">code</block>
  <block id="fe03e7fb4a8d3a1afb24c94c4c88d32f" category="paragraph">对于 AFF C190 ，我们使用支持 NVIDIA GPU 的 Ubuntu 18.04 和 Docker ，并使用 MLPerf<block ref="72ea1359ddbf7a99cdb0a438fda3e022" category="inline-link-rx"></block> 在联想提交到 MLPerf 推理 v0.7 的过程中提供。</block>
  <block id="504812acf44740b8f536a0d166375734" category="paragraph">对于 EF280 ，我们将 Ubuntu 20.04 与 NVIDIA 驱动程序结合使用，并将 Docker 与 NVIDIA GPU 和 MLPerf 结合使用<block ref="7dc141edfa21f33dbd4b0757be1ad69f" category="inline-link-rx"></block> 在联想提交到 MLPerf 推理 v1.1 的过程中提供。</block>
  <block id="fbd2228a821a8ab1948d4a8c3121fb0e" category="paragraph">要设置 AI 推理，请执行以下步骤：</block>
  <block id="342ecacc441a9548b60eae46065039f8" category="paragraph">在使用本地数据进行测试时，您应在共享存储上共享此目录以供网络存储使用情形使用，或者在本地磁盘上共享此目录。</block>
  <block id="9cfc451dfe052c5c3835b0355375b1b7" category="admonition">以下命令全部从正在运行的 Docker 容器中执行：</block>
  <block id="4efea18a74f8c5a6fa0f4b239ff2d734" category="list-text">要运行推理工作负载，请运行以下命令（一个命令）：</block>
  <block id="9ce2624cb32bec75a2ad4e276fa594f6" category="section-title">AI 推理运行</block>
  <block id="2a71d3fa50a14f6fa9c62d9fe3935d5d" category="paragraph">执行了三种类型的运行：</block>
  <block id="3a4a320ee019614122e99baebf056b86" category="list-text">使用本地存储的单服务器 AI 推理</block>
  <block id="adf25fe660bba733a104887732393fdd" category="list-text">使用网络存储的单服务器 AI 推理</block>
  <block id="34e4c32e4097a70208139be85d5dc892" category="list-text">使用网络存储的多服务器 AI 推理</block>
  <block id="7dc96590f7bab3379a7a79986056d22a" category="inline-link-macro">接下来：测试结果。</block>
  <block id="697d202c2969580ba0434be04d39a929" category="paragraph"><block ref="697d202c2969580ba0434be04d39a929" category="inline-link-macro-rx"></block></block>
  <block id="207e9f2f3c6b5a3e8c9228ceadc806b2" category="summary">本节介绍测试的配置，网络基础架构， SE350 服务器以及存储配置详细信息。</block>
  <block id="32d798df7254f6703ed2262024e0e174" category="doc">测试配置</block>
  <block id="b1ee26c1917a17c30b17d7cd6b01e2cd" category="inline-link-macro">上一步：测试计划。</block>
  <block id="7dffe110836fe412eac19d0f63cf5b5b" category="paragraph"><block ref="7dffe110836fe412eac19d0f63cf5b5b" category="inline-link-macro-rx"></block></block>
  <block id="a55faacbe457d923ebd296421a71b898" category="paragraph">下图显示了测试配置。我们使用了 NetApp AFF C190 存储系统和两个联想 ThinkSystem SE350 服务器（每个服务器都有一个 NVIDIA T4 加速器）。这些组件通过 10GbE 网络交换机进行连接。网络存储包含验证 / 测试数据集和经过预先培训的模型。这些服务器可提供计算功能，并可通过 NFS 协议访问存储。</block>
  <block id="d8c97013f1e301478b23530ad6ed1ef6" category="paragraph">本节介绍测试的配置，网络基础架构， SE350 服务器以及存储配置详细信息。下表列出了解决方案架构的基本组件。</block>
  <block id="fe8ab8cb391be4f8cf88a9b64c3ce3cd" category="list-text">2 个 SE350 服务器，每个服务器具有一个 NVIDIA T4 GPU 卡</block>
  <block id="acd4671bd4d78c7fc0ac8cbc66a01483" category="list-text">每个服务器都包含一个 Intel Xeon D-2123IT CPU ，其中四个物理核心运行速度为 2.20GHz ，并具有 128 GB RAM</block>
  <block id="d7d02fd9ab069a2d95dee248370100f9" category="cell">入门级 NetApp AFF 存储系统（ HA 对）</block>
  <block id="1d680806b37a387e8d84b0c21be4d816" category="list-text">NetApp ONTAP 9 软件</block>
  <block id="0c1dcc458c4dd96728e0b0998cba7305" category="list-text">24 个 960 GB SSD</block>
  <block id="d8e87bd5878266cd4137e82d919799eb" category="list-text">每个控制器一个接口组，挂载点有四个逻辑 IP 地址</block>
  <block id="1a538c197da3186f1eba50d82572dc34" category="paragraph"><block ref="1a538c197da3186f1eba50d82572dc34" category="inline-image-macro-rx" type="image"></block></block>
  <block id="208eac927f1261c6e6eaa3135a529cf3" category="paragraph">下表列出了存储配置：具有 2RU 的 AFF C190 ， 24 个驱动器插槽。</block>
  <block id="9bbf373797bf7cf7ba62c80023682e25" category="cell">控制器</block>
  <block id="2ee34178bb8415b7d7234cd27b83aed6" category="cell">聚合</block>
  <block id="e9db3004828d9514fafc57881dfbdbd2" category="cell">FlexGroup 卷</block>
  <block id="2e0fb97d51b96b1635dcc3ca51f74fee" category="cell">聚合大小</block>
  <block id="b94c9ec583603e13b5c32d83199c7376" category="cell">卷大小</block>
  <block id="53a35f8b51acc9748a3e172a76f542a7" category="cell">操作系统挂载点</block>
  <block id="6a1ab89ed912a96429c83ff1ba0f48d0" category="cell">控制器 1</block>
  <block id="4d80d82716f0b771738e7fad121e059a" category="cell">aggr1.</block>
  <block id="e39298390e27007517a0cb199728188a" category="cell">/netapplenovo_AI_fg</block>
  <block id="4923ec171d721fba1d4547deefc98e8c" category="cell">8.42 TiB</block>
  <block id="f13cb116755b4e8fa1af1b201025f377" category="cell">15 TB</block>
  <block id="3fe74875837b518b23813988af1e39d9" category="cell">/NetApp_Lenovo ， fg</block>
  <block id="3877384a92be771d61972d07648b799f" category="cell">控制器 2.</block>
  <block id="f3913037ef38679d334aa0cf30e2b6fd" category="cell">Aggr2.</block>
  <block id="6b02e3a677be18a8be3641bb43e8b220" category="paragraph">/netappLenovo AI_fg 文件夹包含用于模型验证的数据集。</block>
  <block id="e4239f67d8e47773c69a7cb4be34d949" category="paragraph">下图显示了测试配置。我们使用了 NetApp EF280 存储系统和两个联想 ThinkSystem SE350 服务器（每个服务器都有一个 NVIDIA T4 加速器）。这些组件通过 10GbE 网络交换机进行连接。网络存储包含验证 / 测试数据集和经过预先培训的模型。这些服务器可提供计算功能，并可通过 NFS 协议访问存储。</block>
  <block id="efb90877bc42cc445eb6e1b59c0e1b16" category="paragraph">下表列出了 EF280 的存储配置。</block>
  <block id="0951a6690e5dc87411346792c9f941c7" category="cell">卷组</block>
  <block id="bd7a9717d29c5ddcab1bc175eda1e298" category="cell">Volume</block>
  <block id="6c88d21af6046f64871457b825dcf1c8" category="cell">DDP 大小</block>
  <block id="59b02558285aa326c0e9018324ed0c4f" category="cell">连接方法</block>
  <block id="db320b0194c895c7ac56fedae7928e63" category="cell">DDP1</block>
  <block id="fc452c26db3c4aa6f6213b9c5d9e3abc" category="cell">卷 1</block>
  <block id="fe066d0b9d36398d5f525d6ac7f8e8c5" category="cell">16 TB</block>
  <block id="e0d2b052ec3dbd102ff7a7f2b356ea41" category="cell">SE350-1 到 iSCSI LUN 0</block>
  <block id="ef0e038a9f9b0db74b504d5521e7a0fc" category="cell">第 2 卷</block>
  <block id="5b846730a13fc5ea0a76a6b7b9a69d5a" category="cell">SE350-2 到 iSCSI LUN 1</block>
  <block id="43fa57e4031b0f759153c9c9fa49e6ed" category="paragraph"><block ref="43fa57e4031b0f759153c9c9fa49e6ed" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0fccd40a3886a1e5dc539059407586a0" category="inline-link-macro">下一步：测试操作步骤。</block>
  <block id="3bee5237e36a9a0dc60fd351ce904544" category="paragraph"><block ref="3bee5237e36a9a0dc60fd351ce904544" category="inline-link-macro-rx"></block></block>
  <block id="290612199861c31d1036b185b4e69b75" category="doc">摘要</block>
  <block id="ee0e2e290e4e02a3860382ef2cc42ca0" category="paragraph">高级驾驶辅助系统（ ADAS ），行业 4.0 ，智能城市和物联网（ IoT ）等多种新兴应用场景需要在近乎零的延迟下处理持续数据流。本文档介绍了一种计算和存储架构，用于在边缘环境中为 NetApp 存储控制器和联想 ThinkSystem 服务器部署基于 GPU 的人工智能（ AI ）推理。本文档还提供了行业标准 MLPerf 推理基准测试的性能数据，用于评估配备 NVIDIA T4 GPU 的边缘服务器上的各种推理任务。我们对脱机，单流和多流推理情形的性能进行了调查，并显示具有经济高效的共享网络存储系统的架构具有高性能，为多个边缘服务器的数据和模型管理提供了一个中心。</block>
  <block id="8708911de20cfce9bafb315fd0cde0a2" category="summary">我们会运行大量测试来评估建议的架构的性能。有六种不同的工作负载（图像分类，对象检测（小），对象检测（大），医学影像，语音到文本， 和自然语言处理（ NLP ），您可以在三种不同的情形下运行：脱机，单流和多流。</block>
  <block id="3274a50ba9f0d3c0adefdfa11c5094be" category="doc">测试结果</block>
  <block id="5e2777e1d5ba6adfeabc55064de508f5" category="inline-link-macro">先前版本： Test 操作步骤。</block>
  <block id="3ee9fa6b3e5baa3db7a7d6587d8d590b" category="paragraph"><block ref="3ee9fa6b3e5baa3db7a7d6587d8d590b" category="inline-link-macro-rx"></block></block>
  <block id="507b481f4f0fb36b82f97222c73fb91d" category="section-title">AFF 的测试结果</block>
  <block id="817fbb6103e6cb6855c19a5c1b25f817" category="paragraph">我们会运行大量测试来评估建议的架构的性能。有六种不同的工作负载（图像分类，对象检测（小），对象检测（大），医学影像，语音到文本， 和自然语言处理（ NLP ），您可以在三种不同的情形下运行：脱机，单流和多流。</block>
  <block id="aaabb57453387e4d8fdae92cdf5d558b" category="admonition">最后一种情形仅适用于映像分类和对象检测。</block>
  <block id="e7b8f9d880e5e20f44e5277ba99d101b" category="paragraph">这样可以提供 15 个可能的工作负载，这些工作负载都在三种不同的设置下进行了测试：</block>
  <block id="6beb824a1e58582d2c0c733600244087" category="list-text">单个服务器 / 本地存储</block>
  <block id="0ce03975d1039901bae5d17f67b2ac39" category="list-text">单个服务器 / 网络存储</block>
  <block id="ffac1c611ceb8a0bd6268359872e3e68" category="list-text">多服务器 / 网络存储</block>
  <block id="f5b98cda08f17c4b221c6ef2fbf7217f" category="paragraph">以下各节将介绍这些结果。</block>
  <block id="18d566b8a783b6684a78fc2924714180" category="section-title">AFF 脱机情形中的 AI 推理</block>
  <block id="0aee493b887954641c1ba2e779adcf85" category="paragraph">在这种情况下，服务器可以使用所有数据，并测量了处理所有样本所需的时间。我们会将带宽报告为每秒样本数作为测试结果。如果使用了多个计算服务器，则会报告所有服务器的总带宽总和。下图显示了所有这三种使用情形的结果。对于双服务器情形，我们会报告两个服务器的总带宽。</block>
  <block id="d39bc80b598327ae50c15f64c44bb6ea" category="paragraph"><block ref="d39bc80b598327ae50c15f64c44bb6ea" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a0d89c8c627ec0463d3f82a6cbbc04bd" category="paragraph">结果显示，网络存储不会对性能产生负面影响，更改极少，对于某些任务，未找到任何结果。添加第二台服务器时，总带宽恰好是两倍，或者最差情况下，更改率小于 1% 。</block>
  <block id="d0be2e7e62dc4b0bdbb35ded9b6d842e" category="section-title">在 AFF 的单个流方案中进行 AI 推理</block>
  <block id="fbbf5a4ee90b9175f00f7c8cab5a0670" category="paragraph">此基准测试可测量延迟。对于多个计算服务器案例，我们会报告平均延迟。下图显示了这组任务的结果。对于双服务器案例，我们会报告两个服务器的平均延迟。</block>
  <block id="01f3906715186988e276bc34ebc661c0" category="paragraph"><block ref="01f3906715186988e276bc34ebc661c0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9ef9ced66e0746938556409b4c473052" category="paragraph">结果再次表明，网络存储足以处理这些任务。在一台服务器的情况下，本地存储与网络存储之间的差别很小或没有差别。同样，当两个服务器使用相同的存储时，两个服务器上的延迟保持不变或变化量非常小。</block>
  <block id="64a84459b695510c92164965941ad8f1" category="section-title">在 AFF 的多流方案中进行 AI 推理</block>
  <block id="22ca0fa830d8fd46fe137f6748374c21" category="paragraph">在这种情况下，结果是系统在满足 QoS 限制的情况下可以处理的流数量。因此，结果始终为整数。对于多个服务器，我们会报告所有服务器上的流总数。并非所有工作负载都支持此方案，但我们已执行了这些工作负载。下图总结了我们的测试结果。对于双服务器案例，我们会报告两个服务器的流总数。</block>
  <block id="758b60f43cbc650fded1dcf9be428fa5" category="paragraph"><block ref="758b60f43cbc650fded1dcf9be428fa5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f3eefb9cc4232b7df67a3c63566ae707" category="paragraph">结果显示了设置的完美性能—本地存储和网络存储的结果相同，添加第二个服务器会使建议设置可以处理的流数量增加一倍。</block>
  <block id="4ecb5ff41d7f3bd6f1c92bc183f1cb32" category="section-title">EF 的测试结果</block>
  <block id="ee7c693721c881b091fdb1adf8a37707" category="paragraph">我们会运行大量测试来评估建议的架构的性能。有六种不同的工作负载（图像分类，对象检测（小），对象检测（大），医学影像，语音到文本， 和自然语言处理（ NLP ）），这两种情况下运行：脱机和单流。以下各节将介绍这些结果。</block>
  <block id="010bb9776a194ae73e567f4812c8be99" category="section-title">EF 脱机情形中的 AI 推理</block>
  <block id="f4fc0d2711e472dedfd5d2952191989c" category="paragraph">在这种情况下，服务器可以使用所有数据，并测量了处理所有样本所需的时间。我们会将带宽报告为每秒样本数作为测试结果。对于单节点运行，我们会报告两个服务器的平均值，而对于两个服务器运行，我们会报告所有服务器的总带宽总和。下图显示了使用情形的结果。</block>
  <block id="8e793f971410e2b57df427d1305ee0a2" category="paragraph"><block ref="8e793f971410e2b57df427d1305ee0a2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fb71ae4a7513a21f0771b9aa65aeef9c" category="section-title">在一个流场景中对 EF 进行 AI 推理</block>
  <block id="5656e3a262dfb3d6e1cba96551717de0" category="paragraph"><block ref="5656e3a262dfb3d6e1cba96551717de0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="516a608926718d1a912cf9404f1a63ac" category="inline-link-macro">接下来：架构规模估算选项。</block>
  <block id="9cedf0fb8faddf365d88f523ae482015" category="paragraph"><block ref="9cedf0fb8faddf365d88f523ae482015" category="inline-link-macro-rx"></block></block>
  <block id="00760d3595ff19f6db2da5213b1fdd58" category="summary">本文档介绍了一种计算和存储架构，用于在边缘环境中针对新兴应用程序场景在 NetApp 存储控制器和联想 ThinkSystem 服务器上部署基于 GPU 的人工智能（ AI ）推理。</block>
  <block id="09f4ae28e2596e14a7568f3e12a77834" category="doc">TR-4886 ：《前沿人工智能推理—采用联想 ThinkSystem 的 NetApp —解决方案设计》</block>
  <block id="6671938f046112e34e990cb75cc642dd" category="paragraph">NetApp 公司 Sathish Thyagarajan ，联想公司 Mirosav Hodak</block>
  <block id="a27de0758c1fc778a0fb19ebcb6a8aff" category="paragraph">企业越来越多地在网络边缘生成海量数据。为了从智能传感器和物联网数据中获得最大价值，企业正在寻找支持边缘计算的实时事件流式解决方案。因此，在数据中心以外的边缘执行计算要求苛刻的作业的情况越来越多。AI 推理是这一趋势的推动因素之一。边缘服务器可以为这些工作负载提供足够的计算能力，尤其是在使用加速器时，但有限的存储通常是问题描述，尤其是在多服务器环境中。在本文档中，我们将介绍如何在边缘环境中部署共享存储系统，以及该系统如何在不影响性能的情况下为 AI 推理工作负载带来优势。</block>
  <block id="c22ef83c0446b759f6cd8835206adaae" category="paragraph">本文档介绍了边缘 AI 推理的参考架构。它将多个联想 ThinkSystem 边缘服务器与一个 NetApp 存储系统相结合，创建了一个易于部署和管理的解决方案。本指南旨在为各种情形下的实际部署提供一个基线指南，例如，在工厂车间安装多个摄像头和工业传感器，零售交易中的销售点（ POS ）系统或用于识别自动驾驶车辆中的视觉异常的完全自驾（ FSD ）系统。</block>
  <block id="36d77288dbd3663ec436c43b32682300" category="paragraph">本文档介绍了对由联想 ThinkSystem SE350 边缘服务器和入门级 NetApp AFF 和 EF 系列存储系统组成的计算和存储配置的测试和验证。这些参考架构可为 AI 部署提供高效且经济高效的解决方案，同时还可通过 NetApp ONTAP 和 NetApp SANtricity 数据管理软件提供全面的数据服务，集成数据保护，无缝可扩展性以及云连接数据存储。</block>
  <block id="5dd536dd8122d7ba5df3ce642e603305" category="paragraph">本文档面向以下受众：</block>
  <block id="ebb25f3a3991f2ad744d7ec643c950fe" category="list-text">希望在边缘将 AI 产品化的业务主管和企业架构师。</block>
  <block id="c19c4b63370004c67b540d52ae4d0ba3" category="list-text">数据科学家，数据工程师，人工智能 / 机器学习（ AI / 机器学习， ML ）研究人员和人工智能系统开发人员。</block>
  <block id="d64b2d5963d22d2d9c15222cbbe4a41c" category="list-text">设计用于开发 AI/ML 模型和应用程序的解决方案的企业架构师。</block>
  <block id="563f47ae807a7a985313a5186e239a5d" category="list-text">数据科学家和 AI 工程师正在寻找部署深度学习（ DL ）和 ML 模型的高效方法。</block>
  <block id="c1df171c3c219ea01c2724d28fa03f93" category="list-text">边缘设备管理器和边缘服务器管理员，负责部署和管理边缘推理模型。</block>
  <block id="a40893fa754ed62d5268702b023fea91" category="section-title">解决方案架构</block>
  <block id="f2e5640bc98f623bd0a257e3088ead2c" category="list-text">边缘计算设备对从摄像机，传感器等接收的数据执行推理。</block>
  <block id="ba8dee772ce5a627767af000b8bbb826" category="list-text">一种可用于多种用途的共享存储元素：</block>
  <block id="8a1d15a179258733a83884fac2d16e38" category="list-text">为推理模型和执行推理所需的其他数据提供一个中央位置。计算服务器可以直接访问存储，并在网络中使用推理模型，而无需将其复制到本地。</block>
  <block id="6c20432374a9a40cfb818250edf55367" category="list-text">此处推送更新的型号。</block>
  <block id="4a32229da6d6fceda48d909ad92a952a" category="list-text">对边缘服务器接收的输入数据进行归档，以供日后分析。例如，如果边缘设备连接到摄像机，则存储元素会保留摄像机捕获的视频。</block>
  <block id="45d9a14c8d568ce70d22acbde8373657" category="paragraph"><block ref="45d9a14c8d568ce70d22acbde8373657" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bda9643ac6601722a28f238714274da4" category="cell">红色</block>
  <block id="48d6215903dff56238e52e8891380c8f" category="cell">蓝色</block>
  <block id="95e6ac9e87f07caf580a7b83adb1526b" category="cell">联想计算系统</block>
  <block id="81a15d59c420e43b55830213cc8c16b9" category="cell">NetApp AFF 存储系统</block>
  <block id="f46e4977aa2e9918471e011cafc5cbe1" category="cell">边缘设备对来自摄像机，传感器等的输入执行推理。</block>
  <block id="edb1af4b83edf30ec5e56e3f4a6352f3" category="cell">共享存储，用于存放边缘设备的推理模型和数据，以供日后分析。</block>
  <block id="6fa1f5494d341a20c6c746a33cbb31b3" category="paragraph">NetApp 和联想解决方案具有以下主要优势：</block>
  <block id="f1bd3fc2711f634964362fb2a96445bf" category="list-text">GPU 加快了边缘计算速度。</block>
  <block id="a644cc245485a603217667e7cbdb7ef9" category="list-text">部署从共享存储提供支持和管理的多个边缘服务器。</block>
  <block id="d649f2b00c65fe4953b1a7e7469c9431" category="list-text">强大的数据保护功能，可满足低恢复点目标（ RPO ）和恢复时间目标（ RTO ）的要求，而不会丢失任何数据。</block>
  <block id="2d0fcf5abf2f152f10ecfbf80a62e9db" category="list-text">利用 NetApp Snapshot 副本和克隆优化数据管理，以简化开发工作流。</block>
  <block id="94d9a1cd726b8a3fed2b6beb07904959" category="section-title">如何使用此架构</block>
  <block id="9a22eb3c4ef782aa04a39e5ad3ffc8b5" category="paragraph">本文档将验证建议架构的设计和性能。但是，我们尚未测试某些软件级别的组件，例如容器，工作负载或模型管理以及与内部云或数据中心的数据同步，因为它们是特定于部署情形的。此处有多种选择。</block>
  <block id="e5881392a9b20c55ad87365d4c3cf1d7" category="paragraph">在容器管理级别， Kubernetes 容器管理是一个不错的选择，完全上游版本（ Canonical ）或适用于企业部署的修改版本（ Red Hat ）均支持此功能。。<block ref="867c096c6407993e530788b4fa5e4592" category="inline-link-rx"></block>https://www.netapp.com/pdf.html?item=/media/17241-tr4798pdf.pdf[,^] ，它利用 NetApp Trident 和新添加的<block ref="18f9f1b3975974bec435249b1752c2d6" category="inline-link-rx"></block>https://github.com/NetApp/netapp-data-science-toolkit[,^] 可为数据科学家和数据工程师提供内置的可追溯性，数据管理功能，接口和工具，以便与 NetApp 存储集成。Kubeflow 是适用于 Kubernetes 的 ML 工具包，可在 TensorFlow Serving 或 NVIDIA Triton 推理服务器等多个平台上提供额外的 AI 功能以及对型号版本控制和 KFServing 的支持。另一个选项是 NVIDIA EGX 平台，它可提供工作负载管理以及对支持 GPU 的 AI 推理容器目录的访问。但是，这些选项可能需要大量的精力和专业知识才能投入生产，并且可能需要第三方独立软件供应商（ ISV ）或顾问的协助。</block>
  <block id="1a667cf8dc2ace931f29baf9aeed69d9" category="section-title">解决方案区域</block>
  <block id="560d585bccd63f1ccf34b07b325adbcd" category="paragraph">AI 推理和边缘计算的主要优势是设备能够在无延迟的情况下以高质量计算，处理和分析数据。本文档中需要介绍的边缘计算用例太多，但下面是几个突出的示例：</block>
  <block id="8106f228c3a2b774c2e47d0d2ca766eb" category="section-title">汽车：自动驾驶汽车</block>
  <block id="49f3cb6fe79fc77d0b151dcc2f7d7109" category="paragraph">典型的边缘计算图示位于自动驾驶汽车（ AV ）中的高级驾驶辅助系统（ ADAS ）中。无人驾驶汽车中的 AI 必须快速处理来自摄像机和传感器的大量数据，才能成为成功的安全驱动器。在对象和人类之间进行解释所花费的时间过长可能意味着生命或死亡，因此能够尽可能接近车辆处理数据至关重要。在这种情况下，一个或多个边缘计算服务器处理来自摄像机，雷达， LIDAR 和其他传感器的输入，而共享存储则保存推理模型并存储来自传感器的输入数据。</block>
  <block id="e5e51dcd521792cb797e6e3c53736987" category="section-title">医疗保健：患者监控</block>
  <block id="a5031cd8ea18cb91370c532194ecd58e" category="paragraph">AI 和边缘计算的最大影响之一是，它能够在家庭护理和集中护理部门（ ICU ）中增强对慢性病患者的持续监控。监控 Insulin 级别，呼吸，神经活动，心率和消化系统功能的边缘设备中的数据需要即时分析数据，必须立即对这些数据执行操作，因为拯救生命的行动时间有限。</block>
  <block id="7e4b8a4224f71143d7bd188ceeea4acd" category="section-title">零售：无收银员付款</block>
  <block id="a8712e81fee7af830aa2cd6466cfb339" category="paragraph">边缘计算可以为 AI 和 ML 提供支持，帮助零售商缩短结账时间并增加流量。无收银员系统支持各种组件，例如：</block>
  <block id="dbc0817910529140e6894b79ec51b412" category="list-text">身份验证和访问。将物理购物者连接到经过验证的帐户并允许访问零售空间。</block>
  <block id="349a2650c71706ec201ef08d57dc58e7" category="list-text">清单监控。使用传感器， RFID 标签和计算机视觉系统帮助确认买家选择或取消选择商品。</block>
  <block id="86f5df5b4d7496a74d1d41bed2929983" category="paragraph">此处，每个边缘服务器都会处理每个签出计数器，而共享存储系统则充当一个中央同步点。</block>
  <block id="498375fc1d2fd41616385f8abfd37893" category="section-title">金融服务：信息亭的人员安全和防止欺诈</block>
  <block id="1dd0f8c70693faa846f69d76af9ffbf7" category="paragraph">银行组织正在使用 AI 和边缘计算来创新和打造个性化的银行体验。利用实时数据分析和人工智能推理的交互式信息亭现在不仅可以帮助客户提取资金，还可以通过从摄像机捕获的图像主动监控信息亭，以识别对人类安全或欺诈行为的风险。在这种情况下，边缘计算服务器和共享存储系统连接到交互式信息亭和摄像机，以帮助银行使用 AI 推理模型收集和处理数据。</block>
  <block id="0014200d8a9f4fe7a8b65ae923557be6" category="section-title">制造业：行业 4.0</block>
  <block id="18bfb27ab22a9db6eb932a3bfe5f51a4" category="paragraph">第四次工业革命（工业 4.0 ）已经开始，同时也出现了 Smart Factory 和 3D 打印等新兴趋势。为迎接数据主导的未来，大规模机器到机器（ M2M ）通信和物联网已集成在一起，可提高自动化程度，无需人工干预。制造业已经高度自动化，增加 AI 功能是长期趋势的自然延续。AI 可实现自动化操作，借助计算机视觉和其他 AI 功能，可以实现自动化操作。您可以自动执行质量控制或依赖于人类远见或决策的任务，以便更快地分析工厂车间内装配线上的材料，从而帮助制造工厂满足所需的 ISO 安全和质量管理标准。此处，每个计算边缘服务器都连接到一组传感器，用于监控制造过程，更新的推理模型会根据需要推送到共享存储。</block>
  <block id="a2df8c6c694bb6d9b42851d95a6d7814" category="section-title">电信：防锈检测，塔式检查和网络优化</block>
  <block id="d562d0e475687af21d44b6ea803c10a8" category="paragraph">电信行业使用计算机视觉和人工智能技术来处理图像，这些图像可自动检测到是否存在防腐问题，并识别含有防腐问题的单元塔，因此需要进一步检查。近年来，使用无人机图像和 AI 模型来识别塔中不同的区域，以分析防腐，表面裂纹和防腐的情况有所增加。对 AI 技术的需求继续增长，这些技术可以高效地检查电信基础架构和单元塔，定期评估其降级情况，并在需要时及时修复。</block>
  <block id="50dba7db75064ae2e0beea487226ed46" category="paragraph">此外，电信领域另一个新兴的使用情形是，使用 AI 和 ML 算法预测数据流量模式，检测支持 5G 的设备，以及自动化和增强多输入和多输出（ MIMG ）能源管理。在无线电塔上使用了 MIMO 硬件来增加网络容量，但这会带来额外的能源成本。在单元站点上部署的 ML 型号的 "MIMO 休眠模式 " 可以预测是否高效使用了无线电，并有助于降低移动网络运营商（ MNO ）的能耗成本。AI 推理和边缘计算解决方案可帮助 MNO 减少来回传输到数据中心的数据量，降低 TCO ，优化网络运营并提高最终用户的整体性能。</block>
  <block id="f45c430b02aac052aef8d958c80ff351" category="paragraph"><block ref="f45c430b02aac052aef8d958c80ff351" category="inline-link-macro-rx"></block></block>
  <block id="228af426af79aabaa0b969d8cee05002" category="summary">本文档遵循 MLPerf 推理 v0.7 代码， MLPerf 推理 v1.1 代码和规则。我们运行的基准测试是为在边缘进行推理而设计的，如本节所示的表中所定义。</block>
  <block id="b3e6ac4f3c523ea5a90f4f79ca3e585d" category="doc">测试计划</block>
  <block id="35e08a3e7b357a4284ef29b287063ae5" category="paragraph"><block ref="35e08a3e7b357a4284ef29b287063ae5" category="inline-link-macro-rx"></block></block>
  <block id="a4f86f7bfc24194b276c22e0ef158197" category="inline-link">rules</block>
  <block id="deec4ff19974f12ed781cb9a59064214" category="cell">区域</block>
  <block id="eaeb30f9f18e0c50b178676f3eaef45f" category="cell">任务</block>
  <block id="e110cde47b67924ec0ef64500e8cb067" category="cell">QSL 大小</block>
  <block id="571094bb27864b600d8e6b561a137a55" category="cell">质量</block>
  <block id="77f086368f7402e03b21bb823cda2eb3" category="cell">多流延迟限制</block>
  <block id="99a0628d9f7179c032e0cf59efbc0fad" category="cell">愿景</block>
  <block id="c84e3388f5bc3e4ce028dc81625bf819" category="cell">映像分类</block>
  <block id="4cf67db3abdf54de6064fce40cf27398" category="cell">Resnet50v1.5</block>
  <block id="05e96e35d2778a07f18ff8b414821ee8" category="cell">ImageNet （ 224x224 ）</block>
  <block id="021bbc7ee20b71134d53e20206bd6feb" category="cell">1024</block>
  <block id="79267804a18aa7217c234994e26bb5c7" category="cell">FP32 的 99%</block>
  <block id="c2010c9d1312ce345a2313d3acb5c6d5" category="cell">50 毫秒</block>
  <block id="5d9387d7bf46f8c6854a5caafd6cfbf3" category="cell">对象检测（大型）</block>
  <block id="7dd82182395c2720676a1e82b781ef04" category="cell">SSD - ResNet34</block>
  <block id="0505dc2363120e454308e12e47f6d354" category="cell">可可可（ 1200 x 1200 ）</block>
  <block id="f336aeb0ea3de7c70100c292338460e3" category="cell">66 毫秒</block>
  <block id="a3e1c35debe58b3684abba30911eb0f9" category="cell">对象检测（小型）</block>
  <block id="d05a0b1a6c857a559314f24c10825416" category="cell">SSD — MobileNetsv1</block>
  <block id="f471fd17e298022a58bcbd05aa25a819" category="cell">可可可（ 300 x 300 ）</block>
  <block id="f718499c1c8cef6730f9fd03c8125cab" category="cell">256</block>
  <block id="ed076605284997250d9cc771eedbfc61" category="cell">医学影像分段</block>
  <block id="b8ffefa5ddac895023e8ab6fe1b55b45" category="cell">3D UNET</block>
  <block id="5ea5e4840c21271f42762e8b9271527a" category="cell">Brats 2019 （ 224x224x160 ）</block>
  <block id="8322d3768dee2653e9cc15c955ee60a8" category="cell">FP32 的 99% 和 99.9%</block>
  <block id="274b68192b056e268f128ff63bfcd4a4" category="cell">不适用</block>
  <block id="04a83927cfa1af6ae14f94e90aab9ebb" category="cell">语音</block>
  <block id="ade9e8d743e7e78d87c5c5603b0aa4ae" category="cell">语音到文本</block>
  <block id="69ee0ff6f427bb2dfd286a55bbc181ea" category="cell">RNNT</block>
  <block id="d3c7d61f6e8ea0b76fd8b65e5115b28b" category="cell">Libraispeech 开发清理</block>
  <block id="84b20b1f5a0d103f5710bb67a043cd78" category="cell">2513</block>
  <block id="4994a8ffeba4ac3140beb89e8d41f174" category="cell">language</block>
  <block id="f8672b43ad1f9d3531557d69b6da380c" category="cell">语言处理</block>
  <block id="221c3eff38f8ab54d359694f9da63c6e" category="cell">Bert</block>
  <block id="f50c0cca078c7426bed1eb196911c809" category="cell">Sad v1.1</block>
  <block id="d56da061d55e2175bd67901d5f0948be" category="cell">10833</block>
  <block id="85051346c766b4444af7bfaaa0c189f5" category="cell">场景</block>
  <block id="4bb9c2b62dbc9558da74af948130693b" category="cell">映像分类</block>
  <block id="d5348bf8d0ff8e72043bdbb08aef9767" category="cell">单流，脱机，多流</block>
  <block id="468acb809a41b49bb7fcdf7425dcd7ee" category="cell">单个流，脱机</block>
  <block id="3d1aa46be43bf2f29633e829d42082af" category="cell">语音到文本</block>
  <block id="7966e67de4ba20fb5412257b4023f4d1" category="paragraph">我们使用在此验证中开发的网络存储架构执行了这些基准测试，并将结果与先前提交给 MLPerf 的边缘服务器上本地运行的结果进行了比较。比较结果是，确定共享存储对推理性能有多大影响。</block>
  <block id="a53c037982ff4e0cd4a61ba90c4c21d3" category="inline-link-macro">下一步：测试配置。</block>
  <block id="50cbf9a915ce97c432035077add8a92f" category="paragraph"><block ref="50cbf9a915ce97c432035077add8a92f" category="inline-link-macro-rx"></block></block>
  <block id="012b603d852affe4779f095a5c59f0c5" category="summary">公有云的灵活性，实现价值的时间和成本节省都是企业采用公有云进行数据库应用程序开发和测试的有意义的价值主张。SnapCenter 是快速实现这一目标的最佳工具。SnapCenter 不仅可以在内部保护您的生产数据库，还可以在公有云中快速克隆副本以进行应用程序开发或代码测试，同时只需极少的额外存储。下面详细介绍了使用该工具的分步过程。</block>
  <block id="38da6679588aeb2754e14dd58994685e" category="doc">用于将开发 / 测试容量激增到云的工作流</block>
  <block id="5b9681a3caf5db6230c17718122074d3" category="inline-link-macro">先前版本： AWS 公有云入门。</block>
  <block id="e9e59a2a982f81f5f964248f351b2446" category="paragraph"><block ref="e9e59a2a982f81f5f964248f351b2446" category="inline-link-macro-rx"></block></block>
  <block id="4d8a5b6bc9c43ab79e376d1aa4d83217" category="paragraph">对于采用公有云进行数据库应用程序开发和测试的企业而言，公有云的灵活性，价值实现时间和成本节省都是有意义的价值主张。SnapCenter 是实现这一目标的最佳工具。SnapCenter 不仅可以在内部保护生产数据库，而且还可以在公有云中快速克隆副本以进行应用程序开发或代码测试，同时只需极少的额外存储。下面详细介绍了使用此工具的分步过程。</block>
  <block id="b47b42841be2e173707ab5884714970b" category="section-title">从复制的 Snapshot 备份克隆 Oracle 数据库以进行开发 / 测试</block>
  <block id="8d90529d1117b8d3781bd6781acf4e91" category="list-text">使用适用于 Oracle 的数据库管理用户 ID 登录到 SnapCenter 。导航到资源选项卡，其中显示了受 SnapCenter 保护的 Oracle 数据库。</block>
  <block id="a95ff2a2ae2905b0bb3bd0efa211a040" category="paragraph"><block ref="a95ff2a2ae2905b0bb3bd0efa211a040" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8d539d2e9659870aa79747206fac4769" category="list-text">单击备份拓扑和详细视图的预期内部数据库名称。如果启用了二级复制位置，则会显示链接镜像备份。</block>
  <block id="20111f4a74a9c065157aa13379000a73" category="paragraph"><block ref="20111f4a74a9c065157aa13379000a73" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d4a9c1f33e524696d6f3adebf89947bb" category="list-text">通过单击镜像备份切换到镜像备份视图。然后显示二级镜像备份。</block>
  <block id="e1cbaea95bcc154ccf9e8aece7fc73b3" category="paragraph"><block ref="e1cbaea95bcc154ccf9e8aece7fc73b3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4726a244c3941457e8f62b49c83d35d1" category="list-text">选择要克隆的镜像二级数据库备份副本，并按时间和系统更改编号或 SCN 确定恢复点。通常，恢复点应是完整数据库备份时间的末尾，或者要克隆的 SCN 。确定恢复点后，必须挂载所需的日志文件备份以进行恢复。日志文件备份应挂载到要托管克隆数据库的目标数据库服务器。</block>
  <block id="81d132cd1ae26e007bb608e5f8609288" category="paragraph"><block ref="81d132cd1ae26e007bb608e5f8609288" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b2dc441031605bf54d78fde13b3efc3c" category="paragraph"><block ref="b2dc441031605bf54d78fde13b3efc3c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="22a17e5abcfc4b5e70ebdea098cd1891" category="admonition">如果启用了日志修剪，并且恢复点扩展到上次日志修剪之后，则可能需要挂载多个归档日志备份。</block>
  <block id="e9606676533bbe916f4b4b6824eac195" category="list-text">突出显示要克隆的完整数据库备份副本，然后单击克隆按钮以启动数据库克隆工作流。</block>
  <block id="48493c19ee97a291cd320501daf5c721" category="paragraph"><block ref="48493c19ee97a291cd320501daf5c721" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6c06d82b497809fcc0fd06d00c6d91a5" category="list-text">为完整的容器数据库或 CDB 克隆选择正确的克隆数据库 SID 。</block>
  <block id="f6ee6a459784097119ec1eee6224152e" category="paragraph"><block ref="f6ee6a459784097119ec1eee6224152e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e2c50a030b1c5313fca09568edf8c0f9" category="list-text">选择云中的目标克隆主机，数据文件，控制文件和重做日志目录将通过克隆工作流创建。</block>
  <block id="323554a005f5e77dfaa765ea81e645be" category="paragraph"><block ref="323554a005f5e77dfaa765ea81e645be" category="inline-image-macro-rx" type="image"></block></block>
  <block id="701f017aeafb71656cf2bc3a9bd34862" category="list-text">无凭据名称用于基于操作系统的身份验证，这会使数据库端口变得不相关。按照目标克隆数据库服务器中的配置填写正确的 Oracle 主目录， Oracle 操作系统用户和 Oracle 操作系统组。</block>
  <block id="c5237b674d4a9cd38d44c5e546cc51d4" category="paragraph"><block ref="c5237b674d4a9cd38d44c5e546cc51d4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="26a911f3c85fc3c73d79253e65bf30e3" category="list-text">指定克隆操作前要运行的脚本。更重要的是，可以在此处调整或定义数据库实例参数。</block>
  <block id="56774e452bc62021e52de3e3fea844a2" category="paragraph"><block ref="56774e452bc62021e52de3e3fea844a2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="09d7240367714707474d63a3a574222b" category="list-text">按日期和时间或 SCN 指定恢复点。直到 " 取消 " 将数据库恢复到可用的归档日志为止。从挂载归档日志卷的目标主机指定外部归档日志位置。如果目标服务器 Oracle 所有者与内部生产服务器不同，请验证目标服务器 Oracle 所有者是否可以读取归档日志目录。</block>
  <block id="6cb86841376102e5b8924f9909b8f570" category="paragraph"><block ref="6cb86841376102e5b8924f9909b8f570" category="inline-image-macro-rx" type="image"></block></block>
  <block id="70b171a9c984de6358afb3557fe84586" category="paragraph"><block ref="70b171a9c984de6358afb3557fe84586" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a752afaf144d06159ca3eec8bb23455f" category="list-text">如果需要，配置 SMTP 服务器以发送电子邮件通知。</block>
  <block id="b30b70196320d22207ea0d5d95d2c841" category="paragraph"><block ref="b30b70196320d22207ea0d5d95d2c841" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0421be6f676ac1ddace9e39eeeb54f0f" category="list-text">克隆摘要。</block>
  <block id="a930a442bf914f516109fbb28bf2fbd1" category="paragraph"><block ref="a930a442bf914f516109fbb28bf2fbd1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="69d929881b22cd699e243e2343bd707d" category="list-text">您应在克隆后进行验证，以确保克隆的数据库正常运行。可以在开发 / 测试数据库上执行一些附加任务，例如启动侦听器或关闭数据库日志归档模式。</block>
  <block id="9991775de6f914e5a41601ba523e3193" category="paragraph"><block ref="9991775de6f914e5a41601ba523e3193" category="inline-image-macro-rx" type="image"></block></block>
  <block id="58732c8d9b1293bb6666ef2284840fd3" category="section-title">克隆 SQL 数据库，以便从复制的 Snapshot 备份进行开发 / 测试</block>
  <block id="605f2bb9d099f78e26260848db117df7" category="list-text">使用 SQL Server 的数据库管理用户 ID 登录到 SnapCenter 。导航到 " 资源 " 选项卡，其中显示了受 SnapCenter 保护的 SQL Sever 用户数据库以及公有云中的目标备用 SQL 实例。</block>
  <block id="d238acd8e02d4df70c9b55828a4b8801" category="paragraph"><block ref="d238acd8e02d4df70c9b55828a4b8801" category="inline-image-macro-rx" type="image"></block></block>
  <block id="39c34a717e197c67b1fc8d678db5815b" category="list-text">单击备份拓扑和详细视图的预期内部 SQL Server 用户数据库名称。如果启用了二级复制位置，则会显示链接镜像备份。</block>
  <block id="8c57a9d29ca9640330e03e6edca2b6e5" category="paragraph"><block ref="8c57a9d29ca9640330e03e6edca2b6e5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a5910fa5df5b6482c00b15ae683eef0f" category="list-text">通过单击镜像备份切换到镜像备份视图。然后显示二级镜像备份。由于 SnapCenter 会将 SQL Server 事务日志备份到专用驱动器进行恢复，因此此处仅显示完整的数据库备份。</block>
  <block id="f8d3ed6786c765a87cec8464a574076a" category="paragraph"><block ref="f8d3ed6786c765a87cec8464a574076a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="368014bae8201ab49d2207a53c907069" category="list-text">选择备份副本，然后单击克隆按钮以启动从备份克隆工作流。</block>
  <block id="87dbbaf733c71b9d4e0027ad4a85e709" category="paragraph"><block ref="87dbbaf733c71b9d4e0027ad4a85e709" category="inline-image-macro-rx" type="image"></block></block>
  <block id="75c22c861d423e3f3450da18d56f0599" category="paragraph"><block ref="75c22c861d423e3f3450da18d56f0599" category="inline-image-macro-rx" type="image"></block></block>
  <block id="44258030a87117191bde6d62511ddb9a" category="list-text">选择一个云服务器作为目标克隆服务器，克隆实例名称和克隆数据库名称。选择自动分配挂载点或用户定义的挂载点路径。</block>
  <block id="7841eed97c9a860bcb6a46b08ea08c11" category="paragraph"><block ref="7841eed97c9a860bcb6a46b08ea08c11" category="inline-image-macro-rx" type="image"></block></block>
  <block id="18145dc97ae06034ae9aafa8b98cb36e" category="list-text">按日志备份时间或特定日期和时间确定恢复点。</block>
  <block id="b2798123b4d42e447362355b510a424c" category="paragraph"><block ref="b2798123b4d42e447362355b510a424c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0b9becceddf802cada91d9e2aa84ac5a" category="list-text">指定在克隆操作前后运行的可选脚本。</block>
  <block id="adee0219db450497bd0f545df8d862c7" category="paragraph"><block ref="adee0219db450497bd0f545df8d862c7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e41b01ffd717fd3d0b5788e608e50b52" category="list-text">如果需要电子邮件通知，请配置 SMTP 服务器。</block>
  <block id="9b758c550d5da3ecb44f04ae804293d4" category="paragraph"><block ref="9b758c550d5da3ecb44f04ae804293d4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fc89ae2ec0203249b8e60785a63ca258" category="list-text">克隆摘要。</block>
  <block id="ab74d2d908acf5c3e01544cd4b871b73" category="paragraph"><block ref="ab74d2d908acf5c3e01544cd4b871b73" category="inline-image-macro-rx" type="image"></block></block>
  <block id="28725828580a55d904e8b2a39f377eb9" category="list-text">监控作业状态并验证目标用户数据库是否已连接到云克隆服务器中的目标 SQL 实例。</block>
  <block id="766259946fc034002a24d5f23655c73e" category="paragraph"><block ref="766259946fc034002a24d5f23655c73e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d512bf68b17268adfe539f9722d869b4" category="section-title">克隆后配置</block>
  <block id="50d9180ea26c89fbe6506d71d81d3fb1" category="list-text">内部 Oracle 生产数据库通常以日志归档模式运行。开发或测试数据库不需要此模式。要关闭日志归档模式，请以 sysdba 身份登录到 Oracle 数据库，执行 log mode change 命令并启动数据库以进行访问。</block>
  <block id="b205237d51ff9525496f4b2252942213" category="list-text">配置 Oracle 侦听器，或者向现有侦听器注册新克隆的数据库以供用户访问。</block>
  <block id="800699a04cdaa75b2219988799b0a048" category="list-text">对于 SQL Server ，将日志模式从 Full 更改为 Easy ，以便 SQL Server 开发 / 测试日志文件在填满日志卷时可以随时缩减。</block>
  <block id="89e018d207fd292a4926870904035c18" category="section-title">刷新克隆数据库</block>
  <block id="d84550ba9a340ebf4fa6698dff5ba344" category="list-text">丢弃克隆的数据库并清理云数据库服务器环境。然后，按照上述过程使用新数据克隆新数据库。克隆新数据库只需几分钟。</block>
  <block id="1170d6f09309cb8dc382034a34680937" category="inline-link-macro">刷新克隆</block>
  <block id="fef062eeb7771b01e620bb2460b1bf9a" category="list-text">关闭克隆数据库，使用命令行界面运行克隆刷新命令。有关详细信息，请参见以下 SnapCenter 文档： <block ref="1e4035dee07650c706f8f0714c384872" category="inline-link-macro-rx"></block>。</block>
  <block id="2d6962c20ba37b34437afc30e6838e0d" category="inline-link-macro">NetApp 解决方案自动化社区支持 Slack 通道</block>
  <block id="7b88d7d11804db6b079e226a6f043ea7" category="paragraph">如果您需要有关此解决方案和用例的帮助，请加入 <block ref="f9456f3b54a140d5d3858823c684363f" category="inline-link-macro-rx"></block> 并寻找解决方案自动化渠道来发布您的问题或询问。</block>
  <block id="e2a76301a4117f21d6192304aa650018" category="inline-link-macro">接下来：灾难恢复工作流。</block>
  <block id="28a87ee64d4675e6c24cd960fe71d9bf" category="paragraph"><block ref="28a87ee64d4675e6c24cd960fe71d9bf" category="inline-link-macro-rx"></block></block>
  <block id="d83342bb55cac062a4841a3b7a62a7fd" category="summary">本节概述了为满足上一节所述的前提条件要求而必须完成的任务。下一节提供了内部部署和公有云操作的高级任务列表。可以通过单击相关链接访问详细的流程和过程。</block>
  <block id="21475c5fe4cf73cfbf7756ed71e43375" category="doc">入门概述</block>
  <block id="fa952e93a2f3bc19270cbedd1510f523" category="inline-link-macro">先前版本：公有云的前提条件。</block>
  <block id="f50eb88fd106752cf99e25d4a7259bb7" category="paragraph"><block ref="f50eb88fd106752cf99e25d4a7259bb7" category="inline-link-macro-rx"></block></block>
  <block id="b2e7ae8381268c9d97dc3576aa67da04" category="list-text">在 SnapCenter 中设置数据库管理员用户</block>
  <block id="e1c4efcd7b5b155c8a6e57d348b6c071" category="list-text">SnapCenter 插件安装前提条件</block>
  <block id="cf69df8da81eda7b468d606f3e9aff06" category="list-text">SnapCenter 主机插件安装</block>
  <block id="2a6faa57bc6cc0f7a4c90cebd5e63344" category="list-text">数据库资源发现</block>
  <block id="2a36af746a3cc41f6964edac717b5206" category="list-text">设置存储集群对等和数据库卷复制</block>
  <block id="a227a5da83d0a04e6e8e7e76a89eba09" category="list-text">将 CVO 数据库存储 SVM 添加到 SnapCenter</block>
  <block id="c615eed91e2ab578525394d0ff0138d9" category="list-text">在 SnapCenter 中设置数据库备份策略</block>
  <block id="8ecb914dad4186dafb38268be6fc8a1f" category="list-text">实施备份策略以保护数据库</block>
  <block id="3041fe5faf49efefd030e278790b4faf" category="list-text">验证备份</block>
  <block id="8a3f037eef48de78bfe13d14e3d7cdfa" category="section-title">AWS 公有云</block>
  <block id="0bcf61b20ebca1ef90cb7982284867a6" category="list-text">飞行前检查</block>
  <block id="c27b238e54d27696cafed4684c6f1335" category="list-text">在 AWS 中部署 Cloud Manager 和 Cloud Volumes ONTAP 的步骤</block>
  <block id="2bb50575568fc6429e2c1cef751d40f4" category="list-text">为数据库工作负载部署 EC2 计算实例</block>
  <block id="bc2dcb446bec0ecd131a2e612dbd1ecd" category="paragraph">有关详细信息，请单击以下链接：</block>
  <block id="7146594a919f2b006b1b0911c7b6d7da" category="inline-link-macro">内部部署</block>
  <block id="21aa279d0a145dcaab5feaa02df2c02a" category="inline-link-macro">公有云— AWS</block>
  <block id="fd0476c0c92270df2d75402a67cfe0f4" category="paragraph"><block ref="8f0e2d08c6bad9ef491c2061921b9d90" category="inline-link-macro-rx"></block>， <block ref="11145243f1982fd305768240bff5daad" category="inline-link-macro-rx"></block></block>
  <block id="ff9d8653752bd48bb6b73cf97f207af1" category="summary">采用 SnapCenter 灾难恢复工作流的混合云数据库解决方案</block>
  <block id="ac2e8778240cb518ee14b1defbf55765" category="doc">灾难恢复工作流</block>
  <block id="461887ca64f2d60da58c130a00656a96" category="inline-link-macro">上一页：开发 / 测试向云突发的工作流。</block>
  <block id="b8499237e1a42a05b5306219f80b35ba" category="paragraph"><block ref="b8499237e1a42a05b5306219f80b35ba" category="inline-link-macro-rx"></block></block>
  <block id="8e84608bd62584b2f262d60fd734714f" category="paragraph">企业已将公有云作为灾难恢复的可行资源和目标。SnapCenter 可以尽可能无缝地执行此过程。此灾难恢复工作流与克隆工作流非常相似，但数据库恢复会通过复制到云的最后一个可用日志运行，以恢复所有可能的业务事务。但是，对于灾难恢复，还需要执行其他预配置和后配置步骤。</block>
  <block id="e230d95c57c5534b3e90b93fddbcb1c9" category="section-title">将内部 Oracle 生产数据库克隆到云中进行灾难恢复</block>
  <block id="db9517755259859dbae095126c803544" category="list-text">为了验证克隆恢复是否通过最后一个可用日志运行，我们创建了一个小测试表并插入了一行。测试数据将在完全恢复到最后一个可用日志后进行恢复。</block>
  <block id="39f00f2f1a95739a075844dcffac1441" category="paragraph"><block ref="39f00f2f1a95739a075844dcffac1441" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4fd1337293be82f7472d90bc35f51e90" category="list-text">以 Oracle 的数据库管理用户 ID 登录到 SnapCenter 。导航到资源选项卡，其中显示了受 SnapCenter 保护的 Oracle 数据库。</block>
  <block id="1ddb1f7854ac534473544de627fc5289" category="paragraph"><block ref="1ddb1f7854ac534473544de627fc5289" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e795ef17ab8e08159909afe558c32a1c" category="list-text">选择 Oracle 日志资源组，然后单击立即备份以手动运行 Oracle 日志备份，以便将最新事务刷新到云中的目标。在实际灾难恢复场景中，最后一个可恢复的事务取决于向云复制数据库日志卷的频率，而这反过来又取决于公司的 RTO 或 RPO 策略。</block>
  <block id="e3ea77c81b6559a6984aee62074951ec" category="paragraph"><block ref="e3ea77c81b6559a6984aee62074951ec" category="inline-image-macro-rx" type="image"></block></block>
  <block id="44d1c907c1d5302eb896d76cae9b5e7f" category="paragraph"><block ref="44d1c907c1d5302eb896d76cae9b5e7f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d77575716b9cd49ab1453e367c405abe" category="admonition">在灾难恢复情形下，异步 SnapMirror 会在数据库日志备份间隔内丢失未将其备份到云目标的数据。为了最大限度地减少数据丢失，可以计划更频繁的日志备份。但是，在技术上可以实现的日志备份频率有一定限制。</block>
  <block id="c684c2587fa959f3df40953faab1c1a1" category="list-text">选择二级镜像备份上的最后一个日志备份，然后挂载日志备份。</block>
  <block id="4d27921136b62a393650eec8f38c5a39" category="paragraph"><block ref="4d27921136b62a393650eec8f38c5a39" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6784de36878125b88feb4c3192d2aa3d" category="paragraph"><block ref="6784de36878125b88feb4c3192d2aa3d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fbfa0a2a63c1090863dedb14664d443c" category="list-text">选择上次完整数据库备份，然后单击克隆以启动克隆工作流。</block>
  <block id="ecafa568fe2f36fee38130d0f80eeafc" category="paragraph"><block ref="ecafa568fe2f36fee38130d0f80eeafc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3aa765536eeb5bd55823afbb43c9efdc" category="list-text">在主机上选择一个唯一的克隆数据库 ID 。</block>
  <block id="6d4d1ea488e25d46cd7824491f3f98fb" category="paragraph"><block ref="6d4d1ea488e25d46cd7824491f3f98fb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d57d235b31b66e982ae6d433fa33948e" category="list-text">为 Oracle 闪存恢复区域和联机日志配置日志卷并将其挂载到目标灾难恢复服务器。</block>
  <block id="4ef6ef644cc7510226d8d150ce9cfe73" category="paragraph"><block ref="4ef6ef644cc7510226d8d150ce9cfe73" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4d5730b3167534121e5ac4fcdf84cf1f" category="paragraph"><block ref="4d5730b3167534121e5ac4fcdf84cf1f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6142419cbd2b279a240db52011ea3cab" category="admonition">Oracle 克隆操作步骤不会创建日志卷，而是需要在克隆之前在灾难恢复服务器上配置日志卷。</block>
  <block id="b20da77a777ef0a84d95f447b254387c" category="list-text">选择目标克隆主机和位置以放置数据文件，控制文件和重做日志。</block>
  <block id="326062662ffdb461c61b5ddfc54974bc" category="paragraph"><block ref="326062662ffdb461c61b5ddfc54974bc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6b126b14adfdc04f12e6a00531155f4a" category="list-text">选择克隆的凭据。填写目标服务器上 Oracle 主配置的详细信息。</block>
  <block id="ee4a9d80953ee6db29e5577ef13327ba" category="paragraph"><block ref="ee4a9d80953ee6db29e5577ef13327ba" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c76f59dc52686a71eb5917bbcabfa212" category="list-text">指定克隆前要运行的脚本。可以根据需要调整数据库参数。</block>
  <block id="31b131b08153ae34a96d1e17fa891e1f" category="paragraph"><block ref="31b131b08153ae34a96d1e17fa891e1f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7018f70f78c5e3154b2620e31167c12e" category="list-text">选择直到取消作为恢复选项，以便恢复通过所有可用的归档日志运行，以重新输出复制到二级云位置的最后一个事务。</block>
  <block id="57fa7fef5a8266470204775391a701d3" category="paragraph"><block ref="57fa7fef5a8266470204775391a701d3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6233d74c8f9820a1029624d60ab66049" category="list-text">如果需要，配置 SMTP 服务器以发送电子邮件通知。</block>
  <block id="a563132424d4d3d255697521a0446bc9" category="paragraph"><block ref="a563132424d4d3d255697521a0446bc9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="99a0cd00abfa258b121d480ce7d27e63" category="list-text">灾难恢复克隆摘要。</block>
  <block id="0f66818ccf8a8dd3d6491b9bcf74c02e" category="paragraph"><block ref="0f66818ccf8a8dd3d6491b9bcf74c02e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b4ff014e6bff5ee06349d607c14fcf9e" category="list-text">克隆的数据库会在克隆完成后立即注册到 SnapCenter 中，然后可用于备份保护。</block>
  <block id="18eac7477ab0c6038ec443444677a1eb" category="paragraph"><block ref="18eac7477ab0c6038ec443444677a1eb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="22d74aee547ad10d104f875521cfa6d7" category="section-title">对 Oracle 进行灾难恢复克隆后验证和配置</block>
  <block id="9d58cce71d4c85948ccecfea105367ed" category="list-text">验证在云中的灾难恢复位置上刷新，复制和恢复的最后一个测试事务。</block>
  <block id="1db3ba1f62cbb82a66232de851bad3ce" category="paragraph"><block ref="1db3ba1f62cbb82a66232de851bad3ce" category="inline-image-macro-rx" type="image"></block></block>
  <block id="61b3573abc722a493f53ed27503f7eff" category="list-text">配置闪存恢复区域。</block>
  <block id="71ca9fe67f8c3826e171fb227af4f666" category="paragraph"><block ref="71ca9fe67f8c3826e171fb227af4f666" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4005d553f013abc53c6a1a65aed1d65f" category="list-text">配置用于用户访问的 Oracle 侦听器。</block>
  <block id="0c79c2a9e4fd1ea908a63d58f1f44917" category="list-text">将克隆的卷拆离复制的源卷。</block>
  <block id="42e82bb35283d9f2e2b444419f518667" category="list-text">将复制从云反向复制到内部，并重建发生故障的内部数据库服务器。</block>
  <block id="4ce2420dd00dd0b543e2e51bf7c1c135" category="admonition">克隆拆分可能会产生比正常操作高得多的临时存储空间利用率。但是，在重建内部数据库服务器后，可以释放额外的空间。</block>
  <block id="0e70133bb418f4025b82a6a35301e209" category="section-title">将内部 SQL 生产数据库克隆到云中进行灾难恢复</block>
  <block id="32bfa00a92b9f85d791a43f6d70a35cd" category="list-text">同样，为了验证 SQL 克隆恢复是否经过了最后一个可用日志，我们创建了一个小测试表并插入了一行。测试数据将在完全恢复到最后一个可用日志后进行恢复。</block>
  <block id="321bd96e83b00fcd04bfcc72ec4564ff" category="paragraph"><block ref="321bd96e83b00fcd04bfcc72ec4564ff" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a3b7f1fcf93afdd055ec19e230b54347" category="list-text">使用 SQL Server 的数据库管理用户 ID 登录到 SnapCenter 。导航到资源选项卡，其中显示了 SQL Server 保护资源组。</block>
  <block id="c9673e38d22c239c3b46259620b7b190" category="paragraph"><block ref="c9673e38d22c239c3b46259620b7b190" category="inline-image-macro-rx" type="image"></block></block>
  <block id="608bfa3334f97023b71f6b7a04742bd6" category="list-text">手动运行日志备份以将最后一个事务刷新到公有云中的二级存储。</block>
  <block id="94ca8d0daf1445cae1bbc5a13d7b0c42" category="paragraph"><block ref="94ca8d0daf1445cae1bbc5a13d7b0c42" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a9b9ced1d8d8e91eb2606cb7d0932fa4" category="list-text">为克隆选择最后一个完整的 SQL Server 备份。</block>
  <block id="f93fa51d605a26ef233b6fb9c5489266" category="paragraph"><block ref="f93fa51d605a26ef233b6fb9c5489266" category="inline-image-macro-rx" type="image"></block></block>
  <block id="82efcc579f2220a65dbe5cdd64f47253" category="list-text">设置克隆设置，例如克隆服务器，克隆实例，克隆名称和挂载选项。执行克隆的二级存储位置会自动填充。</block>
  <block id="bb5bdefa03845f9483d1e3fcf8d3b40f" category="paragraph"><block ref="bb5bdefa03845f9483d1e3fcf8d3b40f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9d84ecf0ed314694d6e3ad9b2a96a198" category="list-text">选择要应用的所有日志备份。</block>
  <block id="79284af3915a1bc3e4d4d3993acd9042" category="paragraph"><block ref="79284af3915a1bc3e4d4d3993acd9042" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6f68fbd76be71ebe267aa207f7bef25f" category="list-text">指定克隆前后要运行的任何可选脚本。</block>
  <block id="1f29cf99c49ef1910181e451424c3796" category="paragraph"><block ref="1f29cf99c49ef1910181e451424c3796" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0ac43ede08a0b7154673a619b979f17d" category="list-text">如果需要电子邮件通知，请指定 SMTP 服务器。</block>
  <block id="e8aa5b543b67c22f0a2a205562794787" category="paragraph"><block ref="e8aa5b543b67c22f0a2a205562794787" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f7338d3af995c4a281de85493129cc18" category="list-text">灾难恢复克隆摘要。克隆的数据库会立即注册到 SnapCenter 中，并可用于备份保护。</block>
  <block id="332fb27e1cc349fc79252fbfc5de6ad0" category="paragraph"><block ref="332fb27e1cc349fc79252fbfc5de6ad0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8be7490bb89f986a83768e6a71d78ee8" category="paragraph"><block ref="8be7490bb89f986a83768e6a71d78ee8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5f01a56e31a650c5bb83408b5238270e" category="section-title">SQL 的灾难恢复克隆后验证和配置</block>
  <block id="029640b7bf09578f05703e407e99b8d7" category="list-text">监控克隆作业状态。</block>
  <block id="d5f350d5580b71105a1718557ce88137" category="paragraph"><block ref="d5f350d5580b71105a1718557ce88137" category="inline-image-macro-rx" type="image"></block></block>
  <block id="68236fcee9bee8dbdc1c54b7b2d84b34" category="list-text">验证是否已使用所有日志文件克隆和恢复来复制和恢复最后一个事务。</block>
  <block id="3ebb58ab28579acf2742808bf95fc07e" category="paragraph"><block ref="3ebb58ab28579acf2742808bf95fc07e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="50159c53d6f87eb33c314abd9f0bd28f" category="list-text">在灾难恢复服务器上配置一个新的 SnapCenter 日志目录以进行 SQL Server 日志备份。</block>
  <block id="50f8c30e062c542679b96127a844db6a" category="paragraph">如果您需要有关此解决方案和用例的帮助，请加入 <block ref="f9456f3b54a140d5d3858823c684363f" category="inline-link-macro-rx"></block> 并寻找解决方案自动化渠道来发布您的问题或询问。</block>
  <block id="467bda78c0e1adcc5ed650843fbfbdf5" category="summary">本节介绍在 AWS 中部署 Cloud Manager 和 Cloud Volumes ONTAP 的过程。</block>
  <block id="298a4809d5445df75b6c4a9fb94074a4" category="doc">AWS 公有云入门</block>
  <block id="b8f5ff8c1ae69fa5befe459d3f34b68a" category="inline-link-macro">先前版本：内部部署入门。</block>
  <block id="19f84106226ff97c314f55dd621bbd98" category="paragraph"><block ref="19f84106226ff97c314f55dd621bbd98" category="inline-link-macro-rx"></block></block>
  <block id="87aa698992e009d04733c9906225592c" category="admonition">为了便于操作，我们根据 AWS 中的部署创建了本文档。但是， Azure 和 GCP 的过程非常相似。</block>
  <block id="39845311263ccad04c0d4f0b9aa9d4c6" category="section-title">1 ，飞行前检查</block>
  <block id="12ed93944854c12caa37886d620f16db" category="paragraph">在部署之前，请确保基础架构已准备就绪，以便在下一阶段进行部署。其中包括：</block>
  <block id="c6368ae044df0f7bb26ed60afda5c591" category="list-text">AWS 帐户</block>
  <block id="4019c185756035c18c03fabfccd7d4b2" category="list-text">您选择的地区的 VPC</block>
  <block id="fca5d2fece6e360f78dff4573ba04a20" category="list-text">可访问公有 Internet 的子网</block>
  <block id="e3e5c3dadc3e70d536645a3be9744f79" category="list-text">向 AWS 帐户添加 IAM 角色的权限</block>
  <block id="bd5c82fb0e0371a168f609848b11e92a" category="list-text">AWS 用户的机密密钥和访问密钥</block>
  <block id="c3d1ff3c88148b2246bb0972916da82a" category="section-title">在 AWS 中部署 Cloud Manager 和 Cloud Volumes ONTAP 的步骤</block>
  <block id="6d0eb695a99109617b806676e9610075" category="inline-link">NetApp Cloud 文档</block>
  <block id="593581e466784760a050bceaea5e0c48" category="admonition">部署 Cloud Manager 和 Cloud Volumes ONTAP 的方法有多种；此方法最简单，但需要的权限最多。如果此方法不适用于您的 AWS 环境，请参考<block ref="97a20614f8c0e53f461a9353634e5e51" category="inline-link-rx"></block>。</block>
  <block id="bb3e779fdf877143137572122cf424e3" category="section-title">部署 Cloud Manager 连接器</block>
  <block id="4c6e32ff373dc3ce5b49202f92f01b08" category="list-text">导航到<block ref="143fea272f01f72dbdc942451156df21" category="inline-link-rx"></block> 并登录或注册。</block>
  <block id="356cf5e12d635c19d987b1b195ff5a40" category="paragraph"><block ref="356cf5e12d635c19d987b1b195ff5a40" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2300b8579a8761e452d89a2af6636b7d" category="list-text">登录后，您应转到 " 画布 " 。</block>
  <block id="af93b0b88e1db5f3aa229d2336fedb3c" category="paragraph"><block ref="af93b0b88e1db5f3aa229d2336fedb3c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a3fbf2c408ce86ff3403990e7e32dcb3" category="list-text">单击 " 添加工作环境 " ，然后在 AWS 中选择 Cloud Volumes ONTAP 。您还可以在此处选择是要部署单节点系统还是高可用性对。我已选择部署高可用性对。</block>
  <block id="bb18ff1ebac7ea2039aa297469c76b76" category="paragraph"><block ref="bb18ff1ebac7ea2039aa297469c76b76" category="inline-image-macro-rx" type="image"></block></block>
  <block id="016aa0c0a7322975ec4b8eeac805f2c0" category="list-text">如果尚未创建连接器，则会显示一个弹出窗口，要求您创建连接器。</block>
  <block id="a05691eb0d806668c3796d3d6fe01157" category="paragraph"><block ref="a05691eb0d806668c3796d3d6fe01157" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4fc3362a0d8ab63cc8fa21bbd0fb07db" category="list-text">单击 " 让我们开始 " ，然后选择 "AWS" 。</block>
  <block id="55f5adc74d49945abd7798742f307124" category="paragraph"><block ref="55f5adc74d49945abd7798742f307124" category="inline-image-macro-rx" type="image"></block></block>
  <block id="deae4c054bb3102bbf634b14534da9bf" category="inline-link">NetApp 策略页面</block>
  <block id="651d429a2b6cfcd93f6adb1d4825a214" category="list-text">输入您的机密密钥和访问密钥。确保您的用户具有上所述的正确权限<block ref="fb0c65a047527c32e46baadcaacb4fe2" category="inline-link-rx"></block>。</block>
  <block id="94497191b0b0c6d05a2df7d2175e87f5" category="paragraph"><block ref="94497191b0b0c6d05a2df7d2175e87f5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d8d59b60a74630e45f83fd3c48207b47" category="list-text">为连接器指定一个名称，并使用上所述的预定义角色<block ref="fb0c65a047527c32e46baadcaacb4fe2" category="inline-link-rx"></block> 或者要求 Cloud Manager 为您创建角色。</block>
  <block id="1e64ebe4af05f5d4a8b8c6542e7a09e9" category="paragraph"><block ref="1e64ebe4af05f5d4a8b8c6542e7a09e9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="02d395705fb063ad8d33d8c83c856e6f" category="list-text">提供部署连接器所需的网络信息。验证是否已通过以下方式启用出站 Internet 访问：</block>
  <block id="8215126360cbe5d8f5566c7ffc8cf224" category="list-text">为连接器提供公有 IP 地址</block>
  <block id="22adb619c008bfd7495288573093ae44" category="list-text">为连接器提供一个代理以供其使用</block>
  <block id="58a149795bbe86e4e0d4ab8f10413219" category="list-text">为连接器提供通过 Internet 网关到公有 Internet 的路由</block>
  <block id="5908ad1cf5bd748238e305dd5fc52fac" category="paragraph"><block ref="5908ad1cf5bd748238e305dd5fc52fac" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7c58ebc9f032dc8d2e5c4f522cedbe0b" category="list-text">通过提供安全组或创建新的安全组，通过 SSH ， HTTP 和 HTTPS 提供与连接器的通信。我已启用仅从 IP 地址访问此连接器的功能。</block>
  <block id="1d39d9c13f50dd25f7e54173c87c633a" category="paragraph"><block ref="1d39d9c13f50dd25f7e54173c87c633a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cb444cfaba774437ecdbbb95856d94cd" category="list-text">查看摘要页面上的信息，然后单击添加以部署连接器。</block>
  <block id="5576df68e3720f55e585e7e091d5b9e3" category="paragraph"><block ref="5576df68e3720f55e585e7e091d5b9e3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4255ace47c9ad7f2907c18df7512bb9f" category="list-text">现在，此连接器将使用云形成堆栈进行部署。您可以从 Cloud Manager 或通过 AWS 监控其进度。</block>
  <block id="ff7fb4bedc0d09880f85d9745ec258a5" category="paragraph"><block ref="ff7fb4bedc0d09880f85d9745ec258a5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ca320cc147e2b9fac2dd7379e91012b6" category="list-text">部署完成后，将显示一个成功页面。</block>
  <block id="f5bbadf1ed57058e80e27764684e6314" category="paragraph"><block ref="f5bbadf1ed57058e80e27764684e6314" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6382283fd45b13b5c983745731fec990" category="section-title">部署 Cloud Volumes ONTAP</block>
  <block id="5fe90897c7135ba3020c4a397f55adb6" category="list-text">根据您的要求选择 AWS 和部署类型。</block>
  <block id="63b636f2002a2e7b7c2e2420cd64ff73" category="paragraph"><block ref="63b636f2002a2e7b7c2e2420cd64ff73" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ccf1300c5621fdebe8c1a70fade44f3b" category="list-text">如果尚未分配任何订阅，而您希望使用 PAYGO 购买，请选择编辑凭据。</block>
  <block id="b893bded7e1bd3419a443758a8ef410f" category="paragraph"><block ref="b893bded7e1bd3419a443758a8ef410f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="88eb84b1a8f0417c9de6e1202125df56" category="list-text">选择添加订阅。</block>
  <block id="0b5d3e3d1a9347ff4a7395d09208a8f4" category="paragraph"><block ref="0b5d3e3d1a9347ff4a7395d09208a8f4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="052208bafdfe08bc8f0735a78226e541" category="list-text">选择要订阅的合同类型。我选择了按需购买。</block>
  <block id="4d5ab1ed0682fe644e831558598d4638" category="paragraph"><block ref="4d5ab1ed0682fe644e831558598d4638" category="inline-image-macro-rx" type="image"></block></block>
  <block id="65577508f7897e730adb501d0db73913" category="list-text">系统会将您重定向到 AWS ；选择 Continue to Subscribe 。</block>
  <block id="ac33260d1e06f504f1dcac229aeb269c" category="paragraph"><block ref="ac33260d1e06f504f1dcac229aeb269c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="439c4fb23c120f0a99894c630cedaabd" category="list-text">订阅后，您将重定向回 NetApp Cloud Central 。如果您已订阅，但未被重定向，请选择 " 单击此处 " 链接。</block>
  <block id="a90c8b1fc04a41aff490fd2b269f5932" category="paragraph"><block ref="a90c8b1fc04a41aff490fd2b269f5932" category="inline-image-macro-rx" type="image"></block></block>
  <block id="14b9e98d2b57da92c29826ce7de32c32" category="list-text">系统会将您重定向到 Cloud Central ，您必须在其中为订阅命名并将其分配给 Cloud Central 帐户。</block>
  <block id="c89376fd9624f6ebda7959df6176ef34" category="paragraph"><block ref="c89376fd9624f6ebda7959df6176ef34" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4508f5994d1b34ff85cd1e8a1884d6c1" category="list-text">成功后，将显示一个复选标记页面。导航回 Cloud Manager 选项卡。</block>
  <block id="2b206bbd8f3b20e3282b660a356d90be" category="paragraph"><block ref="2b206bbd8f3b20e3282b660a356d90be" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b3294e5fb9ec1c42cde7ebf9b206c583" category="list-text">现在，此订阅将显示在 Cloud Central 中。单击应用以继续。</block>
  <block id="37ce5c33a55d907edabe632c39a2707c" category="paragraph"><block ref="37ce5c33a55d907edabe632c39a2707c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9f7927b068a5dddb4852b2e7dc256544" category="list-text">输入工作环境详细信息，例如：</block>
  <block id="0dbae4d42c7a0db53e2eb32adee12892" category="list-text">Cluster name</block>
  <block id="0c191ee206a91460fd94e2ff976a38e7" category="list-text">Cluster password</block>
  <block id="53aa18427d1e2c7b7113c668561a62d2" category="list-text">AWS 标记（可选）</block>
  <block id="d3b6ff1e8c6317d132d3a5e974f1374c" category="paragraph"><block ref="d3b6ff1e8c6317d132d3a5e974f1374c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4fb5b261ae3a3581304a283ef70a5246" category="inline-link">NetApp Cloud 主页</block>
  <block id="e7b29c75e71a48483734401322ef6e92" category="list-text">选择要部署的其他服务。要了解有关这些服务的更多信息，请访问<block ref="1bb1213784e04e4f47d06f252d1ba164" category="inline-link-rx"></block>。</block>
  <block id="88e71a2c19d98c79d2ed51a753c8a4c2" category="paragraph"><block ref="88e71a2c19d98c79d2ed51a753c8a4c2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e0dffa77d5644a3816ba69e24ce813ff" category="list-text">选择是部署在多个可用性区域中（即三个子网，每个子网位于不同的 AZ 中），还是部署一个可用性区域。我选择了多个 AZs 。</block>
  <block id="6e4a3fe2b0629dae504d8e727147f709" category="paragraph"><block ref="6e4a3fe2b0629dae504d8e727147f709" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4b889b7255c34e7f230e392668605860" category="list-text">选择要部署到的集群的区域， VPC 和安全组。在本节中，您还可以为每个节点（和调解器）分配可用性分区以及它们所占用的子网。</block>
  <block id="9ad68c9f72863557931a8569462bff52" category="paragraph"><block ref="9ad68c9f72863557931a8569462bff52" category="inline-image-macro-rx" type="image"></block></block>
  <block id="be43ebbf5380089f153e4f1b13e35e6f" category="list-text">选择节点和调解器的连接方法。</block>
  <block id="8bf6da8b537127466c4421c1ae3169be" category="paragraph"><block ref="8bf6da8b537127466c4421c1ae3169be" category="inline-image-macro-rx" type="image"></block></block>
  <block id="204bd52e1d13052712299779cf041df6" category="admonition">调解器需要与 AWS API 进行通信。只要在部署调解器 EC2 实例后可以访问公有，就不需要 API IP 地址。</block>
  <block id="52fade87431f9acc43b7bf6e4c5fd2f1" category="inline-link">NetApp Cloud 文档</block>
  <block id="0c79e4a46253eeb94ba6b8218928aa99" category="list-text">浮动 IP 地址用于访问 Cloud Volumes ONTAP 使用的各种 IP 地址，包括集群管理和数据提供 IP 。这些地址必须是您的网络中尚未可路由的地址，并且已添加到 AWS 环境中的路由表中。要在故障转移期间为 HA 对启用一致的 IP 地址，需要使用这些地址。有关浮动 IP 地址的详细信息，请参见<block ref="72cde540b4f97efa19e071f729439801" category="inline-link-rx"></block>。</block>
  <block id="fd4a46ceddfb2402b7e37177af575e04" category="paragraph"><block ref="fd4a46ceddfb2402b7e37177af575e04" category="inline-image-macro-rx" type="image"></block></block>
  <block id="95ca6b5e9b64aed9132a6be07d061f3b" category="list-text">选择将浮动 IP 地址添加到的路由表。客户端使用这些路由表与 Cloud Volumes ONTAP 进行通信。</block>
  <block id="3453ab81a2f04d5c39ae750fb79ece2a" category="paragraph"><block ref="3453ab81a2f04d5c39ae750fb79ece2a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="af918e519f9c0db1ed5ab4fd4b6e9e05" category="list-text">选择是启用 AWS 托管加密还是启用 AWS KMS 对 ONTAP 根磁盘，启动磁盘和数据磁盘进行加密。</block>
  <block id="058eaefa711702bd45c5f6650cf01e4c" category="paragraph"><block ref="058eaefa711702bd45c5f6650cf01e4c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="01bd54fa77587425fca4a6c352309b5c" category="list-text">选择您的许可模式。如果您不知道选择哪种，请联系您的 NetApp 代表。</block>
  <block id="e5e49184799594a9fa690c9122eb883e" category="paragraph"><block ref="e5e49184799594a9fa690c9122eb883e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="04110b24d1459a6e21e35ad976a8f10e" category="list-text">选择最适合您的用例的配置。这与 " 前提条件 " 页面中所述的规模估算注意事项相关。</block>
  <block id="e19584159c9c3791a9e3c462cb0aa451" category="paragraph"><block ref="e19584159c9c3791a9e3c462cb0aa451" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3ed47788a525c6d08246bfa2f90922da" category="list-text">也可以创建卷。这不是必需的，因为后续步骤使用 SnapMirror ，这将为我们创建卷。</block>
  <block id="01da9401385484b72ba9c016ac6c19ab" category="paragraph"><block ref="01da9401385484b72ba9c016ac6c19ab" category="inline-image-macro-rx" type="image"></block></block>
  <block id="76011f95c4e1b3f68fa5829dab0fb786" category="list-text">查看所做的选择并勾选相应的复选框，确认您了解 Cloud Manager 是否已将资源部署到 AWS 环境中。准备好后，单击 "Go" 。</block>
  <block id="7b78e746aa55ffe6fee1f3e0b65b8cca" category="paragraph"><block ref="7b78e746aa55ffe6fee1f3e0b65b8cca" category="inline-image-macro-rx" type="image"></block></block>
  <block id="13b7f009673a469e5482a96832be1473" category="list-text">Cloud Volumes ONTAP 现在开始其部署过程。Cloud Manager 使用 AWS API 和云构成堆栈来部署 Cloud Volumes ONTAP 。然后，它会根据您的规格对系统进行配置，为您提供一个可立即使用的即用系统。此过程的时间安排因所做的选择而异。</block>
  <block id="11d15d8a4bb9195b48d5010fa30fa547" category="paragraph"><block ref="11d15d8a4bb9195b48d5010fa30fa547" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5e63d2329924bb302fb012e7916b3614" category="list-text">您可以通过导航到时间线来监控进度。</block>
  <block id="77405312cc4c1e96d3f7f796e838bf89" category="paragraph"><block ref="77405312cc4c1e96d3f7f796e838bf89" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4b4df7cc92b3ee31f5d95082a78c7903" category="list-text">时间线可作为对 Cloud Manager 中执行的所有操作的审核。您可以查看 Cloud Manager 在设置到 AWS 和 ONTAP 集群期间发出的所有 API 调用。此外，还可以有效地使用此功能对您遇到的任何问题进行故障排除。</block>
  <block id="8c17e020c76595308d57605fa71dc7af" category="paragraph"><block ref="8c17e020c76595308d57605fa71dc7af" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4c5674ad1910f0a25455fdeb0f3f097a" category="list-text">部署完成后， CVO 集群将显示在当前容量所在的 Canvas 上。处于当前状态的 ONTAP 集群已完全配置，可以实现真正的即装即用体验。</block>
  <block id="db044bc640be9fc8227b7ada891f279d" category="paragraph"><block ref="db044bc640be9fc8227b7ada891f279d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="28d2e01957d5845ff59688f17bd34339" category="section-title">从内部部署到云配置 SnapMirror</block>
  <block id="081494b1a178710486921a42e2bdfa87" category="paragraph">现在，您已部署源 ONTAP 系统和目标 ONTAP 系统，您可以将包含数据库数据的卷复制到云中。</block>
  <block id="cb3269c2496a99fb03bebe82b6a3e4bc" category="inline-link">SnapMirror 兼容性表</block>
  <block id="46aad6288d89ba29f38b4742bf018aca" category="paragraph">有关适用于 SnapMirror 的兼容 ONTAP 版本的指南，请参见<block ref="f75a4f2138bf92eb17ef87cad85a9e34" category="inline-link-rx"></block>。</block>
  <block id="36c5350a8474f2212fecc811eb77df57" category="list-text">单击源 ONTAP 系统（内部），然后将其拖放到目标，选择复制 &gt; 启用或选择复制 &gt; 菜单 &gt; 复制。</block>
  <block id="5dbe69ec28d70286f46385336e96d003" category="paragraph"><block ref="5dbe69ec28d70286f46385336e96d003" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8771a8fdaa9e84a7eef7540edcca5f40" category="paragraph">选择启用。</block>
  <block id="ac21962f3f0ae9f9c17b26196452f903" category="paragraph"><block ref="ac21962f3f0ae9f9c17b26196452f903" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a6a8dc55f6f333187a100f6ed328bdc0" category="paragraph">或选项。</block>
  <block id="949fa0a5e194cf44c9e08903cb914566" category="paragraph"><block ref="949fa0a5e194cf44c9e08903cb914566" category="inline-image-macro-rx" type="image"></block></block>
  <block id="066bf779660ad446aa9b0d4021c4bf40" category="paragraph">复制。</block>
  <block id="deafbb4908c633cb93a7f7e76b31da08" category="paragraph"><block ref="deafbb4908c633cb93a7f7e76b31da08" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5a803b2a55429f981d25fbb8da94aef7" category="list-text">如果未拖放，请选择要复制到的目标集群。</block>
  <block id="630e74180bc1b6c0c0c866d5478ff029" category="paragraph"><block ref="630e74180bc1b6c0c0c866d5478ff029" category="inline-image-macro-rx" type="image"></block></block>
  <block id="761124dc5e0730086556a7d33d43418c" category="list-text">选择要复制的卷。我们复制了数据和所有日志卷。</block>
  <block id="7bec2596a51a0d4a808a37dec9e6c540" category="paragraph"><block ref="7bec2596a51a0d4a808a37dec9e6c540" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bde4e8497f5ecaef866c0f049aada776" category="list-text">选择目标磁盘类型和分层策略。对于灾难恢复，我们建议使用 SSD 作为磁盘类型，并保持数据分层。数据分层可将镜像数据分层为低成本的对象存储，并节省使用本地磁盘的成本。中断关系或克隆卷时，数据将使用快速的本地存储。</block>
  <block id="a7d9908d0f610b3db167c894d109d1ec" category="paragraph"><block ref="a7d9908d0f610b3db167c894d109d1ec" category="inline-image-macro-rx" type="image"></block></block>
  <block id="52f06f2f09c024b69ef3944a8cd78ad9" category="list-text">选择目标卷名称： we chose ` [source_volume_name]_dr` 。</block>
  <block id="6f8ba85bc89d216799431f124e48b25f" category="paragraph"><block ref="6f8ba85bc89d216799431f124e48b25f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2882a0dbc1a6ad74198ac2cb6316870d" category="list-text">选择复制的最大传输速率。这样，如果您与云的连接带宽较低，例如 VPN ，则可以节省带宽。</block>
  <block id="041263f562a9058ae414685962469951" category="paragraph"><block ref="041263f562a9058ae414685962469951" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f81dd66e0f0847d4cb1d2d12fadcc2f3" category="list-text">定义复制策略。我们选择了镜像，它会获取最新的数据集并将其复制到目标卷。您也可以根据自己的要求选择其他策略。</block>
  <block id="d0b86e2934c870915aaa77674d1d79d7" category="paragraph"><block ref="d0b86e2934c870915aaa77674d1d79d7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4db5384e8d04b01ff24a9178b3efaf6a" category="list-text">选择触发复制的计划。NetApp 建议为数据卷设置 " 每日 " 计划，并为日志卷设置 " 每小时 " 计划，但可以根据要求进行更改。</block>
  <block id="c6715d4de4d68a1f8eb9cb8acb63b097" category="paragraph"><block ref="c6715d4de4d68a1f8eb9cb8acb63b097" category="inline-image-macro-rx" type="image"></block></block>
  <block id="02e3a269661e3c96a86a075872a1b269" category="list-text">查看输入的信息，单击 Go 以触发集群对等方和 SVM 对等方（如果这是您首次在两个集群之间复制），然后实施并初始化 SnapMirror 关系。</block>
  <block id="75c2d297cd7282b30ce0400170110307" category="paragraph"><block ref="75c2d297cd7282b30ce0400170110307" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3c160366cab97ee8f1a35416d1294ddb" category="list-text">继续对数据卷和日志卷执行此过程。</block>
  <block id="64853c47f4f907262466c1e5ad154c8c" category="list-text">要检查所有关系，请导航到 Cloud Manager 中的复制选项卡。您可以在此处管理您的关系并检查其状态。</block>
  <block id="641e620fe8c714d7381775d20a707726" category="paragraph"><block ref="641e620fe8c714d7381775d20a707726" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c88bec52f9e24233a78b6a90efa32ec6" category="list-text">复制完所有卷后，您将处于稳定状态，并准备好继续执行灾难恢复和开发 / 测试工作流。</block>
  <block id="86fb3ee49ae2f8c0ee121c551a8f08c2" category="section-title">3. 为数据库工作负载部署 EC2 计算实例</block>
  <block id="91ba52045df2b9244f28270482f749c9" category="inline-link">EC2 实例类型</block>
  <block id="33aaa72e62140af9cecb2c48f836b84b" category="paragraph">AWS 已为各种工作负载预配置 EC2 计算实例。选择实例类型可确定 CPU 核数，内存容量，存储类型和容量以及网络性能。在使用情形中，除了操作系统分区之外，用于运行数据库工作负载的主存储是从 CVO 或 FSX ONTAP 存储引擎分配的。因此，需要考虑的主要因素是 CPU 核心，内存和网络性能级别的选择。可在此处找到典型的 AWS EC2 实例类型：<block ref="9334d5b9e602c5921b4f295f6041489b" category="inline-link-rx"></block>。</block>
  <block id="0af43c3d809d6e56a6a7a0d1ed039bbc" category="section-title">调整计算实例大小</block>
  <block id="0b6e77aedd6bd733f979314fef2a98d7" category="list-text">根据所需的工作负载选择正确的实例类型。需要考虑的因素包括要支持的业务事务数，并发用户数，数据集规模估算等。</block>
  <block id="c421d122321bec48d6b30858f4e7b515" category="inline-link">Amazon EC2</block>
  <block id="ed4b68006572e288530a2152f7fbe5fe" category="list-text">可以通过 EC2 信息板启动 EC2 实例部署。确切的部署过程不在此解决方案的范围内。请参见<block ref="3a5862dd365e3998013717e9cf118a9a" category="inline-link-rx"></block> 了解详细信息。</block>
  <block id="708991723f71fa1bd7b8081be442552c" category="section-title">Oracle 工作负载的 Linux 实例配置</block>
  <block id="5c17b7d75ff16063f772234e1ea8eeb1" category="paragraph">本节介绍部署 EC2 Linux 实例后的其他配置步骤。</block>
  <block id="39d786446455bb2b3017b793805fc902" category="list-text">将 Oracle 备用实例添加到 DNS 服务器，以便在 SnapCenter 管理域中进行名称解析。</block>
  <block id="385a2a4f5305fe5ce8017f18fb7eabd4" category="list-text">添加一个 Linux 管理用户 ID 作为 SnapCenter OS 凭据，并具有 sudo 权限，而不需要密码。在 EC2 实例上启用 ID 和 SSH 密码身份验证。（默认情况下，在 EC2 实例上， SSH 密码身份验证和无密码 sudo 处于关闭状态。）</block>
  <block id="a2b4677d7a72840a78373c600441681a" category="list-text">将 Oracle 安装配置为与内部 Oracle 安装相匹配，例如操作系统修补程序， Oracle 版本和修补程序等。</block>
  <block id="66b65364302a847feb2630bfd7974256" category="inline-link">Oracle 19c 自动化部署</block>
  <block id="fa470598a181c1ed905bace243e46aa3" category="list-text">可以利用 NetApp Ansible DB 自动化角色为数据库开发 / 测试和灾难恢复用例配置 EC2 实例。可以从 NetApp 公有 GitHub 站点下载自动化代码：<block ref="437f8b44ff65600fb5697e9d369a0c54" category="inline-link-rx"></block>。目标是在 EC2 实例上安装和配置数据库软件堆栈，以匹配内部操作系统和数据库配置。</block>
  <block id="97875b4799caf4c948118e7b4776c9fb" category="section-title">SQL Server 工作负载的 Windows 实例配置</block>
  <block id="c63751cfdcf8c0b4e26635a47c7f0d97" category="paragraph">本节列出了最初部署 EC2 Windows 实例后的其他配置步骤。</block>
  <block id="5f44e6a78874f9f49acae3caa71cc14d" category="list-text">检索 Windows 管理员密码以通过 RDP 登录到实例。</block>
  <block id="eabafc642b0901afd6622ab0f19d9ef0" category="list-text">禁用 Windows 防火墙，将主机加入 Windows SnapCenter 域，然后将实例添加到 DNS 服务器以进行名称解析。</block>
  <block id="08bf2d7ff3ac9ab37cfa8dc449b3c8da" category="list-text">配置 SnapCenter 日志卷以存储 SQL Server 日志文件。</block>
  <block id="f97ac9d1946c873247af15165559b47a" category="list-text">在 Windows 主机上配置 iSCSI 以挂载卷并格式化磁盘驱动器。</block>
  <block id="6c2a9c611f48cae767f6ebea6fca0457" category="inline-link">NetApp 自动化</block>
  <block id="6dea6226167bd38268de4c4d948d72de" category="list-text">同样，以前的许多任务都可以通过适用于 SQL Server 的 NetApp 自动化解决方案实现自动化。有关新发布的角色和解决方案，请访问 NetApp Automation 公有 GitHub 站点：<block ref="8cafb3a3b1222d318fcd262791229701" category="inline-link-rx"></block>。</block>
  <block id="752c08adf364adb2721c9a373759f8f6" category="inline-link-macro">接下来：开发 / 测试向云突发的工作流。</block>
  <block id="4e3fc3c2eb04754fcac9e4e23b6de054" category="paragraph"><block ref="4e3fc3c2eb04754fcac9e4e23b6de054" category="inline-link-macro-rx"></block></block>
  <block id="ac9bef0f960e3a46befd2d06b223b61d" category="summary">本节介绍了开发 / 测试和灾难恢复操作的典型混合云架构。</block>
  <block id="fece52c505c48f2979e3fa0c8b6bd8bc" category="paragraph"><block ref="fece52c505c48f2979e3fa0c8b6bd8bc" category="inline-link-macro-rx"></block></block>
  <block id="4085a97aa705c0122bbcec0c84dd97d3" category="paragraph">以下架构图展示了在混合云中实施企业数据库操作的典型实施，用于开发 / 测试和灾难恢复操作。</block>
  <block id="acb339f710a626679c374df5b90c5416" category="paragraph"><block ref="acb339f710a626679c374df5b90c5416" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3cdc302c6d83b60c8ec7ad0b550e55a8" category="paragraph">在正常业务运营中，可以克隆云中的同步数据库卷并将其挂载到开发 / 测试数据库实例中，以进行应用程序开发或测试。如果发生故障，则可以激活云中的同步数据库卷以进行灾难恢复。</block>
  <block id="fbfd3304757c668454a7bdd10f9de200" category="inline-link-macro">接下来：解决方案要求。</block>
  <block id="ae3b1bce66c4c75d8abf9828ec9f2608" category="paragraph"><block ref="ae3b1bce66c4c75d8abf9828ec9f2608" category="inline-link-macro-rx"></block></block>
  <block id="c94d29f1f4f8ef37e9d27f30b7d7c67d" category="summary">必须在内部完成本节所述的任务，以便准备 SnapCenter 混合云数据库工作负载环境。</block>
  <block id="f6a196d9d3a941e76765e4a9395630c4" category="doc">内部部署的前提条件</block>
  <block id="eac55cbc45bfe6b98b8847b3952de7d3" category="inline-link-macro">先前版本：前提条件配置。</block>
  <block id="e63a288cc25b5c4127d3021b339c9f20" category="paragraph"><block ref="e63a288cc25b5c4127d3021b339c9f20" category="inline-link-macro-rx"></block></block>
  <block id="40931dcd4d9132545ec0faf2c5fb1b64" category="paragraph">要准备 SnapCenter 混合云数据库工作负载环境，必须在内部完成以下任务。</block>
  <block id="79daf399b9626cde309801f41a1e2e14" category="section-title">SnapCenter 安装和配置</block>
  <block id="2607530756fefa4173e12cfcd5fbfb01" category="paragraph">NetApp SnapCenter 工具是一款基于 Windows 的应用程序，通常在 Windows 域环境中运行，但也可以部署工作组。它基于多层架构，其中包括用于数据库工作负载的集中式管理服务器（ SnapCenter 服务器）和数据库服务器主机上的 SnapCenter 插件。以下是混合云部署的几个主要注意事项。</block>
  <block id="9f8c0bcd11d7afd1dd2ee818191cb914" category="list-text">* 单实例或 HA 部署。 * HA 部署可在单个 SnapCenter 实例服务器发生故障时提供冗余。</block>
  <block id="1bfa2867d5aa49106efbf3ac752f3084" category="list-text">* 名称解析。 * 必须在 SnapCenter 服务器上配置 DNS 以解析所有数据库主机，并在存储 SVM 上配置 DNS 以进行正向和反向查找。此外，还必须在数据库服务器上配置 DNS ，以解析 SnapCenter 服务器和存储 SVM ，以便进行正向和反向查找。</block>
  <block id="41f54308d86c1d7b525475d6ead22892" category="list-text">* 基于角色的访问控制（ Role-Based Access Control ， RBAC ）配置。 * 对于混合数据库工作负载，您可能需要使用 RBAC 隔离不同数据库平台的管理职责，例如 Oracle 数据库管理员或 SQL Server 管理员。必须为数据库管理员用户授予必要的权限。</block>
  <block id="5aee5dffd2e329652ec35995add763ae" category="list-text">* 启用基于策略的备份策略。 * 以强制实施备份一致性和可靠性。</block>
  <block id="dde4790e572aa9d01cd58fcfd8498766" category="list-text">* 在防火墙上打开所需的网络端口。 * 用于使内部 SnapCenter 服务器与云数据库主机中安装的代理进行通信。</block>
  <block id="e2962676531ebdcf62cb2a7b96042e77" category="list-text">* 端口必须处于打开状态，才能在内部和公有云之间传输 SnapMirror 流量。 * SnapCenter 服务器依靠 ONTAP SnapMirror 将现场 Snapshot 备份复制到云 CVO 存储 SVM 。</block>
  <block id="549762060d7242346fa79f39cba51791" category="inline-link-macro">SnapCenter 安装工作流</block>
  <block id="aec875397d57826c45f7072636026a07" category="paragraph">仔细规划安装前的规划和考虑后，单击此项 <block ref="f44e9d032441cc842cad02c3aab57d84" category="inline-link-macro-rx"></block> 有关 SnapCenter 安装和配置的详细信息。</block>
  <block id="df3fb602185c77a88bab186791d02636" category="section-title">内部数据库服务器存储配置</block>
  <block id="f7f3a649be867b87ccb26789453199db" category="paragraph">存储性能在数据库和应用程序的整体性能中发挥着重要作用。精心设计的存储布局不仅可以提高数据库性能，还可以轻松管理数据库备份和恢复。在定义存储布局时，应考虑多个因素，包括数据库大小，数据库的预期数据更改率以及执行备份的频率。</block>
  <block id="8481231881c8e64b34aa3c7e29510a25" category="paragraph">对于虚拟化数据库工作负载，通过 NFS 或 iSCSI 将存储 LUN 直接连接到子虚拟机通常比通过 VMDK 分配的存储性能更高。NetApp 建议采用下图所示的 LUN 上的大型 SQL Server 数据库的存储布局。</block>
  <block id="cc75f443d22e45e490468a8f20689d77" category="paragraph"><block ref="cc75f443d22e45e490468a8f20689d77" category="inline-image-macro-rx" type="image"></block></block>
  <block id="99aea05cf884bfdec230afa5250968b2" category="paragraph">下图显示了 NetApp 为 LUN 上的小型或中型 SQL Server 数据库建议的存储布局。</block>
  <block id="9fc72535f1113895818f8aa60ef773e7" category="paragraph"><block ref="9fc72535f1113895818f8aa60ef773e7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="76ecde8f778d0dd0676f392793ce4382" category="admonition">日志目录专用于 SnapCenter ，用于执行事务日志汇总以恢复数据库。对于超大型数据库，可以为一个卷分配多个 LUN ，以提高性能。</block>
  <block id="ee9158729a15dbd90d166650ba285d0e" category="paragraph">对于 Oracle 数据库工作负载， SnapCenter 支持以 ONTAP 存储为后盾的数据库环境，这些环境作为物理设备或虚拟设备挂载到主机上。您可以根据环境的严重性将整个数据库托管在一个或多个存储设备上。通常，客户会将专用存储上的数据文件与控制文件，重做文件和归档日志文件等所有其他文件隔离。这有助于管理员在几秒到几分钟内使用 Snapshot 技术快速还原（ ONTAP 单文件 SnapRestore ）或克隆大型关键数据库（ PB 级）。</block>
  <block id="b31fbb7e1a6e863315e431fdf9c00db9" category="paragraph"><block ref="b31fbb7e1a6e863315e431fdf9c00db9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="959a3405dfdfb0469534f5276ffb8e5e" category="paragraph">对于对延迟敏感的任务关键型工作负载，应将专用存储卷部署到不同类型的 Oracle 文件，以尽可能实现最佳延迟。对于大型数据库，应为数据文件分配每个卷的多个 LUN （ NetApp 建议最多八个）。</block>
  <block id="ac111cbcae2e9eaedafe418acc3a2cab" category="paragraph"><block ref="ac111cbcae2e9eaedafe418acc3a2cab" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2702ce3d59ec94853fa030462b309f2f" category="paragraph">对于较小的 Oracle 数据库， SnapCenter 支持共享存储布局，在此布局中，您可以在同一个存储卷或 LUN 上托管多个数据库或数据库的一部分。作为此布局的一个示例，您可以将所有数据库的数据文件托管在 +data ASM 磁盘组或卷组上。其余文件（重做，归档日志和控制文件）可以托管在另一个专用磁盘组或卷组（ LVM ）上。此类部署场景如下所示。</block>
  <block id="6c12e98a6e201f55836390c2a6232e5a" category="paragraph"><block ref="6c12e98a6e201f55836390c2a6232e5a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="93cf45b97655292e0536b810cb248828" category="paragraph">为了便于重新定位 Oracle 数据库， Oracle 二进制文件应安装在常规备份策略中包含的单独 LUN 上。这样可以确保在将数据库重新定位到新服务器主机时，可以启动 Oracle 堆栈进行恢复，而不会因 Oracle 二进制文件不同步而出现任何潜在问题。</block>
  <block id="1e69a4a8adec0842d1e110e970112268" category="section-title">许可要求</block>
  <block id="7f59934b2c0edd33f0d981f3bc4d12e7" category="paragraph">SnapCenter 是 NetApp 提供的许可软件。它通常包含在内部 ONTAP 许可证中。但是，对于混合云部署，要将 CVO 作为目标数据复制目标添加到 SnapCenter ，还需要 SnapCenter 的云许可证。有关详细信息，请查看以下 SnapCenter 基于容量的标准许可证链接：</block>
  <block id="9e86ae6c96041e3cb31e88116102ee35" category="inline-link-macro">基于容量的 SnapCenter 标准版许可证</block>
  <block id="a1d51b5b5f3258b40cbe392146bc8868" category="paragraph"><block ref="a1d51b5b5f3258b40cbe392146bc8868" category="inline-link-macro-rx"></block></block>
  <block id="85db56d490cdd7a31d40697ad1c9be3c" category="section-title">网络和安全性</block>
  <block id="254215e6d18fb5582ba78464fa468553" category="paragraph">在混合数据库操作中，如果需要一个可通过卷到云进行开发 / 测试和灾难恢复的内部生产数据库，则在设置环境并从内部数据中心连接到公有云时，网络连接和安全性是一个重要的考虑因素。</block>
  <block id="1e356fab450b44971b6cdbd1c25586b8" category="paragraph">公有云通常使用虚拟私有云（ Virtual Private Cloud ， VPC ）隔离公共云平台中的不同用户。在单个 VPC 中，可以使用安全组等措施来控制安全性，这些安全组可根据用户锁定 VPC 的需求进行配置。</block>
  <block id="5192a6d33c7a0127a67cbd7e07801735" category="paragraph">可以通过 VPN 通道保护从内部数据中心到 VPC 的连接。在 VPN 网关上，可以使用 NAT 和防火墙规则来加强安全性，这些规则可以阻止尝试从 Internet 上的主机与企业数据中心内的主机建立网络连接。</block>
  <block id="04a3995237c020c6a587d8a7723af6a6" category="paragraph">有关网络和安全注意事项，请查看您选择的公有云的相关入站和出站 CVO 规则：</block>
  <block id="d15513a147fbd525b88805bee9ea17ea" category="inline-link-macro">CVO - AWS 的安全组规则</block>
  <block id="f8d1f085169118c4d407be16136389c6" category="list-text"><block ref="f8d1f085169118c4d407be16136389c6" category="inline-link-macro-rx"></block></block>
  <block id="39f48b44d100d16ed6e2b931111663b7" category="inline-link-macro">CVO 的安全组规则— Azure</block>
  <block id="bcde746324630d82052a4fc9861cfea6" category="list-text"><block ref="bcde746324630d82052a4fc9861cfea6" category="inline-link-macro-rx"></block></block>
  <block id="7b20c547f2fd113499deaa3c0e418282" category="inline-link-macro">CVO - GCP 的防火墙规则</block>
  <block id="acde731d82a437ab33cb200791f7a197" category="list-text"><block ref="acde731d82a437ab33cb200791f7a197" category="inline-link-macro-rx"></block></block>
  <block id="d9446a69434b7c7fdec5c9e35d222834" category="section-title">使用 Ansible 自动化在内部和云之间同步数据库实例—可选</block>
  <block id="1c7c9b49a62ea0dc765d1439120cfc8f" category="paragraph">为了简化混合云数据库环境的管理， NetApp 强烈建议您部署 Ansible 控制器来自动执行某些管理任务，例如将计算实例保持在内部和云中的同步。这一点尤其重要，因为云中的不同步计算实例可能会因缺少内核软件包和其他问题而导致云中恢复的数据库出现错误。</block>
  <block id="7468552c7fc3a7ca377b7fc2405a9940" category="paragraph">此外， Ansible 控制器的自动化功能还可用于在某些任务中扩充 SnapCenter ，例如，拆分 SnapMirror 实例以激活灾难恢复数据副本以投入生产。</block>
  <block id="6ac547919eb6ca11f5a8387eaf990843" category="inline-link-macro">RedHat/CentOS Ansible Controller 设置</block>
  <block id="c8e133fc33bbdb52f84b3532496f2ac8" category="inline-link-macro">Ubuntu 或 Debian Ansible 控制器设置</block>
  <block id="6f332c2f54a4d49478f9588c5cd6c57c" category="paragraph">按照以下说明为 RedHat 或 CentOS 计算机设置 Ansible 控制节点： <block ref="fedce547519117863322cfa54cc2ba7d" category="inline-link-macro-rx"></block>。按照以下说明为 Ubuntu 或 Debian 计算机设置 Ansible 控制节点： <block ref="1c50818f5fe40dbc8b2e05138d554fa4" category="inline-link-macro-rx"></block>。</block>
  <block id="d5316785c089f90464e8e683aadd02e1" category="inline-link-macro">接下来：公有云。</block>
  <block id="d09f79a080b121cb1acc181711b5d02a" category="paragraph"><block ref="d09f79a080b121cb1acc181711b5d02a" category="inline-link-macro-rx"></block></block>
  <block id="d89002d36151bd13d2bba69f3533ee5f" category="summary">此解决方案为 NetApp 现场人员和客户提供了在公有云中使用基于 NetApp SnapCenter 图形用户界面的工具和 NetApp 存储服务 CVO 配置，操作数据库并将其迁移到混合云环境的说明和指导。</block>
  <block id="8269707c3930f3cbcd49193be33bc125" category="doc">TR-4908 ：《采用 SnapCenter 的混合云数据库解决方案概述》</block>
  <block id="7c4d94e1b484fb577b0aeafbec788ea1" category="paragraph">NetApp 公司 Alan Cao ， Felix Melligan</block>
  <block id="268a30b4d0cad062acd42967ce0fab50" category="paragraph">在以下使用情形下，此解决方案可为 NetApp 现场人员和客户提供有关使用基于 NetApp SnapCenter 图形用户界面的工具和公有云中的 NetApp 存储服务 CVO 配置，操作数据库以及将数据库迁移到混合云环境的说明和指导：</block>
  <block id="e88a2467c8ad8bf481854b1a745a875b" category="list-text">混合云中的数据库开发 / 测试操作</block>
  <block id="3c9552536897a076f75b078a5e2a3703" category="list-text">混合云中的数据库灾难恢复</block>
  <block id="a1ac690c228caf22f3228d3a4d8b5cab" category="paragraph">如今，出于性能，安全性和 / 或其他原因，许多企业数据库仍驻留在私有企业数据中心。这种混合云数据库解决方案支持企业在站点上运行主数据库，同时使用公有云进行开发 / 测试数据库操作以及灾难恢复，以降低许可和运营成本。</block>
  <block id="d900d125b3be40bcb79452d624c38561" category="paragraph">许多企业数据库，例如 Oracle ， SQL Server ， SAP HANA 等， 许可和运营成本高昂。许多客户会根据其数据库环境中的计算核心数量支付一次性许可证费用以及年度支持成本，无论这些核心是用于开发，测试，生产还是灾难恢复。其中许多环境可能无法在整个应用程序生命周期内得到充分利用。</block>
  <block id="1f49cc83c5c3735827e3353f320f5f7f" category="paragraph">这些解决方案为客户提供了一个选项，可通过将专用于开发，测试或灾难恢复的数据库环境迁移到云来降低可获得许可的核心数量。通过使用公共云规模，冗余，高可用性和基于消费的计费模式，许可和运营成本可以大幅节省，同时不会影响任何应用程序的可用性或可用性。</block>
  <block id="1a197dd926608052c7d43edfd09556fa" category="paragraph">除了潜在的数据库许可证成本节省之外， NetApp 基于容量的 CVO 许可证模式还可以帮助客户节省每 GB 的存储成本，同时还可以为客户提供竞争对手的存储服务所不具备的高数据库易管理性。下图显示了公有云中常见存储服务的存储成本比较。</block>
  <block id="810fba7bc9a3829eb522ebbc24326a08" category="paragraph"><block ref="810fba7bc9a3829eb522ebbc24326a08" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8e222eb27a0002f2960d1cf1e14bbf7d" category="paragraph">此解决方案表明，通过使用基于 SnapCenter 图形用户界面的软件工具和 NetApp SnapMirror 技术，可以轻松设置，实施和操作混合云数据库操作。</block>
  <block id="26cc8c416b5c9fd6bec3dc68e6f2f0c8" category="paragraph">以下视频演示了 SnapCenter 的实际应用：</block>
  <block id="edc6673fe24c4867029921bbe72f25cb" category="inline-link">使用 SnapCenter 在混合云中备份 Oracle 数据库</block>
  <block id="b10d6cd72b187359c3769fbf5ff10e4c" category="list-text"><block ref="0d160cec2141981b284cd9986321651e" category="inline-link-rx"></block></block>
  <block id="68d9033a95c0ed286c9b7e0e7454cd86" category="inline-link">SnapCenter - 将开发 / 测试克隆到 AWS 云以创建 数据库</block>
  <block id="da8d0116fa67f0499837675277668911" category="list-text"><block ref="da8d0116fa67f0499837675277668911" category="inline-link-rx"></block></block>
  <block id="3b04263461ad5a7b57aa872e093ec9fa" category="paragraph">值得注意的是，尽管本文档中的插图显示 CVO 是公有云中的目标存储实例，但解决方案也已通过全面验证，适用于 AWS 的新版本 FSX ONTAP 存储引擎已发布。</block>
  <block id="c5a6d2f45fc4352f35e95d92c804b6f2" category="paragraph">要自行测试解决方案和用例，可通过以下链接请求 NetApp 按需实验室 SL10680 ： https://labondemand.netapp.com/lod3/labtest/request?nodeid=68761&amp;destination=lod3/testlabs[TL_AWS_004 HCOD ： AWS - nw ， SnapCenter （ OnPrem ）^ 。</block>
  <block id="d31314285161c777a09609cc4fb2d07a" category="inline-link-macro">接下来：解决方案架构。</block>
  <block id="0830319fc7a6b051bbb0602c2778e67c" category="paragraph"><block ref="0830319fc7a6b051bbb0602c2778e67c" category="inline-link-macro-rx"></block></block>
  <block id="8f7280c86689be0a39cdf74aa673040d" category="summary">此解决方案在混合云环境中设计，用于支持内部生产数据库，这些数据库可以突发到所有常见的公有云中进行开发 / 测试和灾难恢复操作。</block>
  <block id="132f2888eb2cfdeef2730212f50c53e3" category="doc">SnapCenter 要求</block>
  <block id="e2a7d0854ef572e10255339732bb005d" category="inline-link-macro">上一篇：解决方案架构。</block>
  <block id="b10927905ed5379ba0d73333abdbe06d" category="paragraph"><block ref="b10927905ed5379ba0d73333abdbe06d" category="inline-link-macro-rx"></block></block>
  <block id="bc3a731533b339cd62ba7f7149313e3b" category="paragraph">此解决方案支持 SnapCenter 当前支持的所有数据库，但此处仅展示了 Oracle 和 SQL Server 数据库。此解决方案已通过虚拟化数据库工作负载的验证，但也支持裸机工作负载。</block>
  <block id="185b108b21dccef917f415be6026c91c" category="paragraph">我们假定生产数据库服务器托管在内部，并从 ONTAP 存储集群向数据库主机提供数据库卷。SnapCenter 软件安装在内部，用于将数据库备份和数据复制到云。建议使用 Ansible 控制器，但在与公有云中的备用灾难恢复实例或开发 / 测试实例同步的数据库部署自动化或操作系统内核和数据库配置时不需要此控制器。</block>
  <block id="47099d9ea153f8abfa5b6b70da253b3a" category="cell">* 内部部署 *</block>
  <block id="d36407241494bfc1e84614ad1b0dd6a4" category="cell">SnapCenter 支持的任何数据库和版本</block>
  <block id="8c8c8ca7a4093a1210412a3a5e5ad55f" category="cell">SnapCenter v4.4 或更高版本</block>
  <block id="9d9ebf67dab68c3c892de99e981039cf" category="cell">Ansible v2.09 或更高版本</block>
  <block id="62dd4f48e99b13c8a00fbaba684f9592" category="cell">ONTAP 集群 9.x</block>
  <block id="d0fdc58e1e05d6cbc8b1beb072bfa235" category="cell">已配置集群间 LIF</block>
  <block id="7135df562bcb25bfdf20e4317b923b88" category="cell">从内部到云 VPC 的连接（ VPN ，互连等）</block>
  <block id="8c27863f5ffd0e66a9304eaca2e47fde" category="cell">网络端口打开 - ssh 22 - TCP 8145 ， 8146 ， 10000 ， 11104 ， 11105</block>
  <block id="bcb9f3419f724f768e30956a4427261d" category="cell">* 云 - AWS*</block>
  <block id="61c90d44785278f980592f082ef500f1" category="inline-link">Cloud Manager Connector</block>
  <block id="97bc5062dceccb6827b1e3f0522035f0" category="cell"><block ref="97bc5062dceccb6827b1e3f0522035f0" category="inline-link-rx"></block></block>
  <block id="2f077494ceff1f33085c5b163c3673b3" category="cell"><block ref="2f077494ceff1f33085c5b163c3673b3" category="inline-link-rx"></block></block>
  <block id="59b2c9424963f98d73ec69c59dde54cb" category="cell">将数据库操作系统 EC2 实例与本地匹配</block>
  <block id="e26786a16da88ee829ab76c48fd3b003" category="cell">* 云 - Azure*</block>
  <block id="c2f8674b07907f393b67a3f9e98d3d56" category="cell"><block ref="c2f8674b07907f393b67a3f9e98d3d56" category="inline-link-rx"></block></block>
  <block id="a8dd724647657a383eb37fd8775ec1a9" category="cell"><block ref="a8dd724647657a383eb37fd8775ec1a9" category="inline-link-rx"></block></block>
  <block id="8bede1f0e559918be01f0646b75b4257" category="cell">将数据库操作系统 Azure 虚拟机与本地匹配</block>
  <block id="b2a454fb4ff03b84162c59d674fdae25" category="cell">* 云 - GCP*</block>
  <block id="af072236983e991ab34e773871b10236" category="cell"><block ref="af072236983e991ab34e773871b10236" category="inline-link-rx"></block></block>
  <block id="499477cf7953707f63a1b1313c8c065a" category="cell"><block ref="499477cf7953707f63a1b1313c8c065a" category="inline-link-rx"></block></block>
  <block id="2900c5e1ee191606f20d007194e70edf" category="cell">将数据库操作系统 Google 计算引擎实例与内部环境匹配</block>
  <block id="126b29c0beff0884077277115103a374" category="inline-link-macro">下一步：前提条件配置。</block>
  <block id="a6d027dea0e97ba248528210d36e5475" category="paragraph"><block ref="a6d027dea0e97ba248528210d36e5475" category="inline-link-macro-rx"></block></block>
  <block id="d0bb28dcc0cc1b523a41bbb46875db9e" category="summary">在安装 Cloud Manager Connector 和 Cloud Volumes ONTAP 并配置 SnapMirror 之前，我们必须为云环境做一些准备。此页面介绍了部署 Cloud Volumes ONTAP 时需要执行的工作以及注意事项。</block>
  <block id="8c6fb9ece3bad11d3e76d1344d9ed9ab" category="doc">公有云的前提条件</block>
  <block id="ac7eeb8ecebe00daa1fdf4fd06cc46de" category="inline-link-macro">先前版本：内部前提条件。</block>
  <block id="70ba5e430ac8eade85f8e01e51412fe4" category="paragraph"><block ref="70ba5e430ac8eade85f8e01e51412fe4" category="inline-link-macro-rx"></block></block>
  <block id="5a2798d22185b0e40ea502bbbb171d38" category="section-title">Cloud Manager 和 Cloud Volumes ONTAP 部署前提条件检查清单</block>
  <block id="1e094e6477be231098329b0096c7221f" category="list-text">NetApp Cloud Central 登录</block>
  <block id="b59e275c4ece2430dff67db92845ab7f" category="list-text">从 Web 浏览器到多个端点的网络访问</block>
  <block id="d2ed5c7ede8a1ce9d218ec60b0f03935" category="list-text">连接器的网络位置</block>
  <block id="0d07862d67097acd517fe27c0de099d7" category="list-text">云提供商权限</block>
  <block id="203802866ac2835e79bd76c94a3761c2" category="list-text">为单个服务建立网络</block>
  <block id="c4d5e1cbdfc47a0fdcb4a1a9dddd9e17" category="inline-link">云文档</block>
  <block id="1a22a3f7b690b2ec8919c8806633fb26" category="paragraph">有关入门内容的详细信息，请访问我们的<block ref="247d95fa755d21bb8790cc6d7a2fc412" category="inline-link-rx"></block>。</block>
  <block id="ea61e2c2ff507048203824add1eb7c21" category="section-title">注意事项</block>
  <block id="176ca67b83510a1281a4cfc749a3543a" category="section-title">1. 什么是 Cloud Manager 连接器？</block>
  <block id="1681641037afae45bd6074dcde9eed00" category="paragraph">在大多数情况下， Cloud Central 帐户管理员必须在云或内部网络中部署连接器。借助此连接器， Cloud Manager 可以管理公有云环境中的资源和流程。</block>
  <block id="8a78be5d168f00b24bf1625de3d5409c" category="paragraph">有关连接器的详细信息，请访问我们的<block ref="f39c14bbbbdd46ca70a63fb06046c789" category="inline-link-rx"></block>。</block>
  <block id="fcc2bf38b8157a22b5fc6975b7054acc" category="section-title">2. Cloud Volumes ONTAP 规模估算和架构</block>
  <block id="1c09b5154aa1f43cb9ebcbd6fea5eadc" category="paragraph">部署 Cloud Volumes ONTAP 时，您可以选择预定义的软件包或创建自己的配置。虽然其中许多值稍后可以无中断地进行更改，但在部署之前，需要根据要在云中部署的工作负载做出一些关键决策。</block>
  <block id="331ce28903aee0b30cd3c94e5483edf5" category="inline-link">CVO 规模估算工具</block>
  <block id="acaed5d74e38e1779b3831dcf51c7600" category="paragraph">每个云提供商都有不同的部署选项，几乎每个工作负载都有自己的独特属性。NetApp 具有<block ref="6a71e7e42ab9335484c5530029f79b92" category="inline-link-rx"></block> 这有助于根据容量和性能正确估算部署规模，但它是围绕一些基本概念构建的，值得考虑：</block>
  <block id="145c90afb7955854f2371e9decf3de9b" category="list-text">所需容量</block>
  <block id="f1521b662bf51f1af6c2d38bd610afae" category="list-text">云虚拟机的网络功能</block>
  <block id="f75d8ba5edc8017382d5df68baf9e30f" category="list-text">云存储的性能特征</block>
  <block id="af9d66ea3132fcfeb46b85557bc1af1b" category="paragraph">关键在于规划的配置不仅要满足当前的容量和性能要求，还要考虑未来的增长。这通常称为容量余量和性能余量。</block>
  <block id="4847e034bb0a55fcbc8a3380d6a3ab80" category="inline-link">AWS</block>
  <block id="3a580f142203677f1f0bc30898f63f53" category="inline-link">Azure 酒店</block>
  <block id="c731f72e1d22a7c5e01a7cb789a8885e" category="inline-link">GCP</block>
  <block id="180f0326dff3a03aecf5e184943d108a" category="paragraph">如果您希望了解更多信息，请阅读有关正确规划的文档<block ref="af5d70b69c3436f8bcf6f7b9579c4e83" category="inline-link-rx"></block>，<block ref="c2e85b51d3015b4c720388e64a3de23e" category="inline-link-rx"></block>，和<block ref="b1068926334a08925797774f64291db4" category="inline-link-rx"></block>。</block>
  <block id="c50ea1f0c6dcf02fbdd39e1e6b5befc2" category="section-title">3. 单节点还是高可用性？</block>
  <block id="eadb13b9c72271dbf16967e78059fea4" category="paragraph">在所有云中，您可以选择在单个节点或具有两个节点的集群模式高可用性对中部署 CVO 。根据使用情形，您可能希望部署一个节点以节省成本，或者部署一个 HA 对以提供进一步的可用性和冗余。</block>
  <block id="9cbd119b18cd836b6020fcfd3bfbe37f" category="paragraph">对于灾难恢复使用情形或为开发和测试而启动临时存储的情形，单个节点很常见，因为突然的区域或基础架构中断所造成的影响较小。但是，对于任何生产用例，如果数据仅位于一个位置，或者数据集必须具有更多冗余和可用性，则建议使用高可用性。</block>
  <block id="83d2ad0cda1f71c52878284cc7c1f713" category="paragraph">有关每个云高可用性版本的架构的详细信息，请访问的文档<block ref="4344469628657b2a6a0d147e5e6fbc9a" category="inline-link-rx"></block>，<block ref="28a8305eced80cb5b1351f5cffb268ae" category="inline-link-rx"></block> 和<block ref="1b945d178a8347e94e5c5456dc9e6db8" category="inline-link-rx"></block>。</block>
  <block id="f0d106c1997a933ecb53ee88e83670e7" category="inline-link-macro">下一步：入门概述。</block>
  <block id="fd43d07d375b44f30fde6995279b9265" category="paragraph"><block ref="fd43d07d375b44f30fde6995279b9265" category="inline-link-macro-rx"></block></block>
  <block id="a10998cc3e1dc7f2a013754d935c4f26" category="summary">NetApp SnapCenter 工具使用基于角色的访问控制（ Role-Based Access Control ， RBAC ）来管理用户资源访问和权限授予，而 SnapCenter 安装会创建预先填充的角色。您还可以根据需要或应用程序创建自定义角色。</block>
  <block id="7e3b07f9add4cd78ade3c795a52dfad2" category="doc">内部部署入门</block>
  <block id="32229cff9e0b41c513b3e3b9e19cec88" category="inline-link-macro">上一步：入门概述。</block>
  <block id="6be036b00e3db4159514171a989cacd6" category="paragraph"><block ref="6be036b00e3db4159514171a989cacd6" category="inline-link-macro-rx"></block></block>
  <block id="d30e54646ba482722332f48ddc22bde5" category="section-title">1. 在 SnapCenter 中设置数据库管理员用户</block>
  <block id="72f706d19ed0d09889b4fbc7578cd1a3" category="paragraph">NetApp SnapCenter 工具使用基于角色的访问控制（ Role-Based Access Control ， RBAC ）来管理用户资源访问和权限授予，而 SnapCenter 安装会创建预先填充的角色。您还可以根据需要或应用程序创建自定义角色。SnapCenter 支持的每个数据库平台都有一个专用的管理员用户 ID ，用于数据库备份，还原和 / 或灾难恢复，这一点很有意义。您也可以使用一个 ID 来管理所有数据库。在测试用例和演示中，我们分别为 Oracle 和 SQL Server 创建了一个专用管理员用户。</block>
  <block id="27733e8f07432bb94ac7621b28d3b2c8" category="paragraph">某些 SnapCenter 资源只能使用 SnapCenterAdmin 角色进行配置。然后，可以将资源分配给其他用户 ID 以进行访问。</block>
  <block id="64784aa3cec13e83af6e941f8489cf06" category="paragraph">在预安装和配置的内部 SnapCenter 环境中，以下任务可能已完成。如果不是，以下步骤将创建一个数据库管理员用户：</block>
  <block id="c8867eac833e7bb55520105b00139f1a" category="list-text">将管理员用户添加到 Windows Active Directory 。</block>
  <block id="dd3e743eb52cbe7c2b6104573a9767e0" category="list-text">使用 SnapCenterAdmin 角色授予的 ID 登录到 SnapCenter 。</block>
  <block id="a6bd76cb24271ba173d16f01bf4108d0" category="list-text">导航到设置和用户下的访问选项卡，然后单击添加以添加新用户。新用户 ID 将链接到步骤 1 中在 Windows Active Directory 中创建的管理员用户。。根据需要为用户分配适当的角色。根据需要向管理员用户分配资源。</block>
  <block id="6a67bb048bd14dd348cca7f81b62d699" category="paragraph"><block ref="6a67bb048bd14dd348cca7f81b62d699" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5d2c51e83f473f137861a132554d1916" category="section-title">2. SnapCenter 插件安装前提条件</block>
  <block id="7bd973d4d28d6fcf5f50379b33a49758" category="paragraph">SnapCenter 使用数据库主机上运行的插件代理执行备份，还原，克隆和其他功能。它会通过在设置和凭据选项卡下配置的凭据连接到数据库主机和数据库，以便安装插件和执行其他管理功能。根据目标主机类型（如 Linux 或 Windows ）以及数据库类型，有特定的权限要求。</block>
  <block id="c342f214098114b90cb67297a2ef5dc3" category="paragraph">在安装 SnapCenter 插件之前，必须配置数据库主机凭据。通常，您希望使用数据库主机上的管理员用户帐户作为插件安装的主机连接凭据。您还可以使用基于操作系统的身份验证为数据库访问授予相同的用户 ID 。另一方面，您还可以使用不同数据库用户 ID 进行数据库身份验证，以进行数据库管理访问。如果您决定使用基于操作系统的身份验证，则必须为操作系统管理员用户 ID 授予数据库访问权限。对于基于 Windows 域的 SQL Server 安装，可以使用域管理员帐户管理域中的所有 SQL Server 。</block>
  <block id="19df1192effefad83e57653fd3a47415" category="paragraph">适用于 SQL Server 的 Windows 主机：</block>
  <block id="e1cc3ce53d7753e33588201db3d3b147" category="list-text">如果使用 Windows 凭据进行身份验证，则必须在安装插件之前设置凭据。</block>
  <block id="a82f1290b72a26d654b93632a1ec50bb" category="list-text">如果使用 SQL Server 实例进行身份验证，则必须在安装插件后添加凭据。</block>
  <block id="63f74bef6650942c6795f96366a39e6a" category="list-text">如果在设置凭据时启用了 SQL 身份验证，则发现的实例或数据库将显示一个红色锁定图标。如果显示锁定图标，则必须指定实例或数据库凭据才能成功将实例或数据库添加到资源组。</block>
  <block id="b61dad3bbbf3270bf2dada5c2ac1f775" category="list-text">满足以下条件时，必须将凭据分配给不具有 sysadmin 访问权限的 RBAC 用户：</block>
  <block id="34cefb5a19894e4f9b1b068544c0f591" category="list-text">此凭据将分配给 SQL 实例。</block>
  <block id="6707464a5871a6aa26dcf785bea4052c" category="list-text">SQL 实例或主机已分配给 RBAC 用户。</block>
  <block id="4bc8aac02ff00d874ad8b4ccd4d745ed" category="list-text">RBAC DB 管理员用户必须同时具有资源组和备份权限。</block>
  <block id="9198b455aa67840c7a69c7a54e94301a" category="paragraph">适用于 Oracle 的 UNIX 主机：</block>
  <block id="71d53e54a48cfe7de69347bcd854ef30" category="list-text">您必须已通过编辑 sshd.conf 并重新启动 sshd 服务为 root 或非 root 用户启用基于密码的 SSH 连接。默认情况下， AWS 实例上基于密码的 SSH 身份验证处于关闭状态。</block>
  <block id="efa873f0464a14d54b066f475ad74480" category="list-text">为非 root 用户配置 sudo 权限以安装和启动插件过程。安装插件后，这些进程将以有效 root 用户身份运行。</block>
  <block id="82a2174029175f8fbc3f52fea4e18c84" category="list-text">使用 Linux 身份验证模式为安装用户创建凭据。</block>
  <block id="86b3cc44ebd8e0a9185e48c4f22e81e9" category="list-text">必须在 Linux 主机上安装 Java 1.8.x （ 64 位）。</block>
  <block id="c1e8851d10ecc615c47a47f704569d29" category="list-text">安装 Oracle 数据库插件还会安装适用于 Unix 的 SnapCenter 插件。</block>
  <block id="7efb27733d1fb21feae901a41580dced" category="section-title">3. SnapCenter 主机插件安装</block>
  <block id="37a5c714defad8175b81b4d49eb0544c" category="admonition">在尝试在云数据库服务器实例上安装 SnapCenter 插件之前，请确保已完成计算实例部署的相关云部分中列出的所有配置步骤。</block>
  <block id="283aa502c28fe1c9ff8dadd1700955fc" category="paragraph">以下步骤说明了在主机上安装 SnapCenter 插件时如何将数据库主机添加到 SnapCenter 中。操作步骤适用场景同时添加内部主机和云主机。以下演示将添加驻留在 AWS 中的 Windows 或 Linux 主机。</block>
  <block id="81ed46777c39c0d0618953601572fc27" category="section-title">配置 SnapCenter VMware 全局设置</block>
  <block id="2aa8a40dbbfb6b52621408c81aa5373c" category="paragraph">导航到设置 &gt; 全局设置。在 Hypervisor Settings 下选择 "VM have iSCSI direct attached disks or NFS for all the hosts" ，然后单击 Update 。</block>
  <block id="4c120331c9eea223eee675b6588d76ee" category="paragraph"><block ref="4c120331c9eea223eee675b6588d76ee" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1f63a469619859e4cfab52fd63523aca" category="section-title">添加 Windows 主机并在主机上安装插件</block>
  <block id="997da6deedab4436b559e3a8f7f05a2e" category="list-text">使用具有 SnapCenterAdmin 权限的用户 ID 登录到 SnapCenter 。</block>
  <block id="97e7f600216a2e9ae18423777e11ad9c" category="list-text">单击左侧菜单中的主机选项卡，然后单击添加以打开添加主机工作流。</block>
  <block id="35314bae57d7ff62ab36156211c1cc71" category="list-text">选择 Windows 作为主机类型；主机名可以是主机名或 IP 地址。主机名必须从 SnapCenter 主机解析为正确的主机 IP 地址。选择在步骤 2 中创建的主机凭据。选择 Microsoft Windows 和 Microsoft SQL Server 作为要安装的插件软件包。</block>
  <block id="b9740ae9eb2ef0fe27e4c541d06a961f" category="paragraph"><block ref="b9740ae9eb2ef0fe27e4c541d06a961f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="31efcd689861354799bb539ab2571ebe" category="list-text">在 Windows 主机上安装此插件后，其整体状态将显示为 "Configure log directory" 。</block>
  <block id="0e15e25c5ee21469698f72cf35caa7bf" category="paragraph"><block ref="0e15e25c5ee21469698f72cf35caa7bf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d2aeaa4503c6d72513c0dbe0f205ee3b" category="list-text">单击主机名以打开 SQL Server 日志目录配置。</block>
  <block id="6fc78660a180b747f815b878c89e3cb0" category="paragraph"><block ref="6fc78660a180b747f815b878c89e3cb0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8cb2b40646a77b4f044e7fa04ea20306" category="list-text">单击 " 配置日志目录 " 以打开 " 为 SQL Server 配置插件 " 。</block>
  <block id="5e3bf9ddacfcad12c5cf63614a869ad4" category="paragraph"><block ref="5e3bf9ddacfcad12c5cf63614a869ad4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f7143b5d162d385dfb1af07f61c59f65" category="list-text">单击浏览以发现 NetApp 存储，以便可以设置日志目录； SnapCenter 使用此日志目录来汇总 SQL Server 事务日志文件。然后单击保存。</block>
  <block id="50eb49de485da684ac1556947ac46aba" category="paragraph"><block ref="50eb49de485da684ac1556947ac46aba" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b0d88588bdb07dd412a4ba1d08348b29" category="admonition">要发现配置到数据库主机的 NetApp 存储，必须将存储（内部或 CVO ）添加到 SnapCenter 中，如 CVO 的步骤 6 中所示。</block>
  <block id="d744af12906d55ab51aa932b3ffcd121" category="list-text">配置日志目录后， Windows 主机插件的整体状态将更改为正在运行。</block>
  <block id="3f7bfffdbb76fd620b0a31d300415528" category="paragraph"><block ref="3f7bfffdbb76fd620b0a31d300415528" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f41517f2e270a138f4ae92988a4cbdd2" category="list-text">要将主机分配给数据库管理用户 ID ，请导航到 " 设置和用户 " 下的 " 访问 " 选项卡，单击数据库管理用户 ID （在我们的情况下，是指需要将主机分配到的 sqldba ），然后单击 " 保存 " 完成主机资源分配。</block>
  <block id="b21f826d2ea15e58b9c8aadccb566cfe" category="paragraph"><block ref="b21f826d2ea15e58b9c8aadccb566cfe" category="inline-image-macro-rx" type="image"></block></block>
  <block id="021de72edbb0f174ffe954c5e5367b80" category="paragraph"><block ref="021de72edbb0f174ffe954c5e5367b80" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e2fe19c733a6342990513e02264db163" category="section-title">添加 Unix 主机并在主机上安装插件</block>
  <block id="6a0f36be9f208d20c3c1145c3a09b876" category="list-text">单击左侧菜单中的主机选项卡，然后单击添加以打开添加主机工作流。</block>
  <block id="dd8c6d773e31c4254eb58b4b5e2ae1be" category="list-text">选择 Linux 作为主机类型。主机名可以是主机名或 IP 地址。但是，必须解析主机名，以更正 SnapCenter 主机的主机 IP 地址。选择在步骤 2 中创建的主机凭据。主机凭据需要 sudo 权限。选中 Oracle Database 作为要安装的插件，该插件将同时安装 Oracle 和 Linux 主机插件。</block>
  <block id="7d4cdef2144fd1466fae298bd27476d1" category="paragraph"><block ref="7d4cdef2144fd1466fae298bd27476d1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="711730391561a228d41f7fede13ca6e8" category="list-text">单击更多选项并选择 " 跳过预安装检查 " 。 系统会提示您确认是否跳过预安装检查。单击是，然后单击保存。</block>
  <block id="3511b18d059f3f300b5fbe827f7273ac" category="paragraph"><block ref="3511b18d059f3f300b5fbe827f7273ac" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e095a093138c6b1968d313d5f799255a" category="list-text">单击提交以开始安装插件。系统将提示您确认指纹，如下所示。</block>
  <block id="146c4805beb9310e4554842f776cb88b" category="paragraph"><block ref="146c4805beb9310e4554842f776cb88b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="53dcda6f2c03efbe73ae5eb311852a8d" category="list-text">SnapCenter 将执行主机验证和注册，然后该插件将安装在 Linux 主机上。状态将从 " 正在安装插件 " 更改为 " 正在运行 " 。</block>
  <block id="2636403a6c50748422736d9d84a3e4be" category="paragraph"><block ref="2636403a6c50748422736d9d84a3e4be" category="inline-image-macro-rx" type="image"></block></block>
  <block id="33ea9d9313933c68d640ebb655ec43dc" category="list-text">将新添加的主机分配给正确的数据库管理用户 ID （在我们的案例中为 oradba ）。</block>
  <block id="2815d2f5e3b49d9332a320ec997271dd" category="paragraph"><block ref="2815d2f5e3b49d9332a320ec997271dd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="eb6a9566891a97e0f8fbaefbd4878bdd" category="paragraph"><block ref="eb6a9566891a97e0f8fbaefbd4878bdd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2b4c839521fd41e845e6e8c3158b809b" category="section-title">4. 数据库资源发现</block>
  <block id="45e46a9524f23884445bf542bf464b93" category="paragraph">成功安装插件后，可以立即发现主机上的数据库资源。单击左侧菜单中的 "Resources" 选项卡。根据数据库平台的类型，可以使用多种视图，例如数据库，资源组等。如果未发现和显示主机上的资源，则可能需要单击刷新资源选项卡。</block>
  <block id="79fca6395972f8079320d3229822e491" category="paragraph"><block ref="79fca6395972f8079320d3229822e491" category="inline-image-macro-rx" type="image"></block></block>
  <block id="66789731e61fd3d4b6024e5fcb0945e1" category="paragraph">首次发现数据库时，整体状态显示为 " 不受保护 " 。 上一屏幕截图显示了一个尚未受备份策略保护的 Oracle 数据库。</block>
  <block id="68148a1249ca9110d03c698ae152932a" category="paragraph">设置备份配置或策略并执行备份后，数据库的整体状态会将备份状态显示为 " 备份成功 " ，并显示上次备份的时间戳。以下屏幕截图显示了 SQL Server 用户数据库的备份状态。</block>
  <block id="2cdfb74ac3aabfde7e1fae347ed5afc7" category="paragraph"><block ref="2cdfb74ac3aabfde7e1fae347ed5afc7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a9c9616324bc00808729d46fba94ad75" category="paragraph">如果未正确设置数据库访问凭据，则红色锁定按钮表示数据库不可访问。例如，如果 Windows 凭据不具有对数据库实例的 sysadmin 访问权限，则必须重新配置数据库凭据以解除红色锁定。</block>
  <block id="dd4606e87689c86d82a694412c5654a5" category="paragraph"><block ref="dd4606e87689c86d82a694412c5654a5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="884f07ad394b89553e7d6d1f90fae584" category="paragraph"><block ref="884f07ad394b89553e7d6d1f90fae584" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0024854a814ddd68bcf3907357c46bc2" category="paragraph">在 Windows 级别或数据库级别配置相应的凭据后，红色锁定将消失，并收集和查看 SQL Server 类型信息。</block>
  <block id="95c88e08b2fd416b4514ce2454af2038" category="paragraph"><block ref="95c88e08b2fd416b4514ce2454af2038" category="inline-image-macro-rx" type="image"></block></block>
  <block id="864f4d2595d06e5e8b46b08edb3899e6" category="section-title">5. 设置存储集群对等和数据库卷复制</block>
  <block id="785196ec55a9e713ad1a4f962baa31dd" category="paragraph">为了使用公有云作为目标目标目标来保护内部数据库数据，使用 NetApp SnapMirror 技术将内部 ONTAP 集群数据库卷复制到云 CVO 。然后，可以克隆复制的目标卷以进行开发 / 运营或灾难恢复。通过以下高级步骤，您可以设置集群对等和数据库卷复制。</block>
  <block id="1f1927293f04e4cf0fc91a7e389612eb" category="list-text">在内部集群和 CVO 集群实例上配置集群间 LIF 以建立集群对等关系。此步骤可使用 ONTAP 系统管理器执行。默认 CVO 部署会自动配置集群间 LIF 。</block>
  <block id="9547803d96e78bbc38305e6300f7a800" category="paragraph">内部集群：</block>
  <block id="2ef6da9ba547bc5361495650ac3fc992" category="paragraph"><block ref="2ef6da9ba547bc5361495650ac3fc992" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f3c5b3e342f57b792e2263e69e41677a" category="paragraph">目标 CVO 集群：</block>
  <block id="d94586e4cd285619a4f1ef0e06636dd1" category="paragraph"><block ref="d94586e4cd285619a4f1ef0e06636dd1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="79d372933b80ed2ca8ca14d8458828af" category="inline-link-macro">入门— AWS 公有云</block>
  <block id="6a87ea28950f9209121872c9d2690049" category="list-text">配置集群间 LIF 后，可以使用 NetApp Cloud Manager 中的拖放功能设置集群对等和卷复制。请参见 <block ref="28783e162df4af496939d6f9f6f31d5f" category="inline-link-macro-rx"></block> 了解详细信息。</block>
  <block id="d1567c6c8f0752cbc7deb6d9f639ba12" category="paragraph">或者，也可以使用 ONTAP 系统管理器执行集群对等和数据库卷复制，如下所示：</block>
  <block id="494c0b53ff31502c0c1105881e2e389a" category="list-text">登录到 ONTAP 系统管理器。导航到集群 &gt; 设置，然后单击对等集群，以便与云中的 CVO 实例建立集群对等关系。</block>
  <block id="ba770272a0f634af47a5788634e80d54" category="paragraph"><block ref="ba770272a0f634af47a5788634e80d54" category="inline-image-macro-rx" type="image"></block></block>
  <block id="54de72c782c4b4ccc7f2914a858d5356" category="list-text">转到卷选项卡。选择要复制的数据库卷，然后单击保护。</block>
  <block id="32588f46a47679329b03194fd2e9084f" category="paragraph"><block ref="32588f46a47679329b03194fd2e9084f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b0aace069b478e8b2b0753f855f2be94" category="list-text">将保护策略设置为异步。选择目标集群和 Storage SVM 。</block>
  <block id="7dbec53b432ae53f7e454836ad0dad00" category="paragraph"><block ref="7dbec53b432ae53f7e454836ad0dad00" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1a2a64fe8af0790615a9344069794e2e" category="list-text">验证卷是否已在源和目标之间同步，以及复制关系是否运行正常。</block>
  <block id="97edcd79a5e90d9caafde40fcb586185" category="paragraph"><block ref="97edcd79a5e90d9caafde40fcb586185" category="inline-image-macro-rx" type="image"></block></block>
  <block id="36097c4ad6058de288de8992f89adbb8" category="section-title">6. 将 CVO 数据库存储 SVM 添加到 SnapCenter</block>
  <block id="ebcf85d67af3f672ade8bd7b224a8a2b" category="list-text">从菜单中单击存储系统选项卡，然后单击新建将托管复制的目标数据库卷的 CVO 存储 SVM 添加到 SnapCenter 。在存储系统字段中输入集群管理 IP ，然后输入相应的用户名和密码。</block>
  <block id="41e9c94a0c8cb108959099b8f87adb82" category="paragraph"><block ref="41e9c94a0c8cb108959099b8f87adb82" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a27406b63f99780f65572b95f2f72348" category="list-text">单击更多选项以打开其他存储配置选项。在平台字段中，选择 Cloud Volumes ONTAP ，选中二级，然后单击保存。</block>
  <block id="8a60464ab91cb2499a03c722639c3aee" category="paragraph"><block ref="8a60464ab91cb2499a03c722639c3aee" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b474a0a2de59b8e3013112beb48af7b7" category="list-text">将存储系统分配给 SnapCenter 数据库管理用户 ID ，如所示 <block ref="8a46cbc3838a53b9205abb25a577bbc8" category="inline-xref-macro-rx"></block>。</block>
  <block id="8691f91a1fe977fd76aa5e53b0f71034" category="paragraph"><block ref="8691f91a1fe977fd76aa5e53b0f71034" category="inline-image-macro-rx" type="image"></block></block>
  <block id="39ec95149453e7bb6b73f1c03228e85c" category="section-title">7. 在 SnapCenter 中设置数据库备份策略</block>
  <block id="37d9f685e375f77a2231e13c88ccc606" category="paragraph">以下过程演示了如何创建完整的数据库或日志文件备份策略。然后，可以实施此策略来保护数据库资源。恢复点目标（ RPO ）或恢复时间目标（ RTO ）决定了数据库和 / 或日志备份的频率。</block>
  <block id="739184f368f13e142dd034fcdc853594" category="section-title">为 Oracle 创建完整的数据库备份策略</block>
  <block id="94b39254a7aba068b68fec64f6331b0b" category="list-text">以数据库管理用户 ID 身份登录到 SnapCenter ，单击设置，然后单击策略。</block>
  <block id="90affc4ffbb767a3d1272be5e1ad8f0c" category="paragraph"><block ref="90affc4ffbb767a3d1272be5e1ad8f0c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a1d144b8c78fc8541b57aa9f0ca863a6" category="list-text">单击 " 新建 " 启动新的备份策略创建工作流或选择要修改的现有策略。</block>
  <block id="29618ae8465c694d23d68e171fe9d905" category="paragraph"><block ref="29618ae8465c694d23d68e171fe9d905" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8c9dac29c26006ce512153a9bdabcc95" category="list-text">选择备份类型和计划频率。</block>
  <block id="10e2791563a2891fd7e4e68c5673671b" category="paragraph"><block ref="10e2791563a2891fd7e4e68c5673671b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4df94ad44381c9fb7fe2f8d01dcd16d8" category="list-text">设置备份保留设置。此选项用于定义要保留的完整数据库备份副本数。</block>
  <block id="6dcc4aa023085480846059b6b1d5e5b3" category="paragraph"><block ref="6dcc4aa023085480846059b6b1d5e5b3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fd634020906b35a41e0ba633eddeb96a" category="list-text">选择二级复制选项以将要复制到云中二级位置的本地主快照备份推送到云中。</block>
  <block id="25ef9e4c73a2da8519e8d232b6a95fcb" category="paragraph"><block ref="25ef9e4c73a2da8519e8d232b6a95fcb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b2e3af55a4355bc46e91425ac5701174" category="list-text">指定在备份运行前后运行的任何可选脚本。</block>
  <block id="326d50fae4f713cebe97d0f6bb23a2d9" category="paragraph"><block ref="326d50fae4f713cebe97d0f6bb23a2d9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cd009bc210e371d36d466b592179e883" category="list-text">根据需要运行备份验证。</block>
  <block id="0b132e3438f5cf31e90f45e79710f0b9" category="paragraph"><block ref="0b132e3438f5cf31e90f45e79710f0b9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dba73d3ec3f929ff18665087076291ac" category="list-text">摘要</block>
  <block id="4f92fa99421beeb9f74ee7613de52706" category="paragraph"><block ref="4f92fa99421beeb9f74ee7613de52706" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b3594f2789840eda9633139ca530384a" category="section-title">为 Oracle 创建数据库日志备份策略</block>
  <block id="be763ec2afcb0358426bb0abcae4dd60" category="list-text">使用数据库管理用户 ID 登录到 SnapCenter ，单击设置，然后单击策略。</block>
  <block id="b0e663a3d363868d6c71ab9ec37940c6" category="list-text">单击 " 新建 " 启动新的备份策略创建工作流，或者选择现有策略进行修改。</block>
  <block id="fa2687f5a5fbedb43745f649a2e11950" category="paragraph"><block ref="fa2687f5a5fbedb43745f649a2e11950" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0938f6574b189bdac27cdd92abc521c5" category="paragraph"><block ref="0938f6574b189bdac27cdd92abc521c5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="59480846ec23463481d361bf3026235e" category="list-text">设置日志保留期限。</block>
  <block id="c8df578fbf71151edda735bc81e8511c" category="paragraph"><block ref="c8df578fbf71151edda735bc81e8511c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="04ba33c0584145006ca637b4556aa919" category="list-text">启用复制到公有云中的二级位置。</block>
  <block id="fdbe42a8484a3e984e4aacb6a31cccef" category="paragraph"><block ref="fdbe42a8484a3e984e4aacb6a31cccef" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ab9406cbd3a8f082700523fdac8a0c1d" category="list-text">指定在日志备份前后运行的任何可选脚本。</block>
  <block id="5b04423521e56720f1f5d0291db584ef" category="paragraph"><block ref="5b04423521e56720f1f5d0291db584ef" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f4b55e05a9ae89fe14377b98bc8a8166" category="list-text">指定任何备份验证脚本。</block>
  <block id="c4dc219fd9466ab86c22ac8e859384ea" category="paragraph"><block ref="c4dc219fd9466ab86c22ac8e859384ea" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2564f2d008c62044da1b7f7397252edf" category="paragraph"><block ref="2564f2d008c62044da1b7f7397252edf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fe147647227dfec6603bc76daf30463e" category="section-title">为 SQL 创建完整的数据库备份策略</block>
  <block id="fa726a7e85857bee77ace96dcf7e5316" category="paragraph"><block ref="fa726a7e85857bee77ace96dcf7e5316" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ce2168daff0c9b1a74e59d999d6ead44" category="paragraph"><block ref="ce2168daff0c9b1a74e59d999d6ead44" category="inline-image-macro-rx" type="image"></block></block>
  <block id="30637cfd5a5cc820d6bc4116fccfff7e" category="list-text">定义备份选项和计划频率。对于配置了可用性组的 SQL Server ，可以设置首选备份副本。</block>
  <block id="b520dcfd25c4b29395bb9b12ac643bb2" category="paragraph"><block ref="b520dcfd25c4b29395bb9b12ac643bb2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5f74ada8393aecd40e892de04b5b30f8" category="list-text">设置备份保留期限。</block>
  <block id="4ade95d8122243cda1455b04504d3367" category="paragraph"><block ref="4ade95d8122243cda1455b04504d3367" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f1a67a80a7ad9403781b210983ea778d" category="list-text">启用备份副本复制到云中的二级位置。</block>
  <block id="caf8324e53d9bb41b3ecb64f3e3b7dda" category="paragraph"><block ref="caf8324e53d9bb41b3ecb64f3e3b7dda" category="inline-image-macro-rx" type="image"></block></block>
  <block id="17b7b360fc2163537795a34cd8d14d6a" category="list-text">指定在备份作业之前或之后运行的任何可选脚本。</block>
  <block id="abbc7de57d2b0d5d1c462b7513199253" category="paragraph"><block ref="abbc7de57d2b0d5d1c462b7513199253" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fb836d972496d965dd2170ed1480917b" category="list-text">指定用于运行备份验证的选项。</block>
  <block id="b4dd01df6b310e6b0814328a86bd6ed6" category="paragraph"><block ref="b4dd01df6b310e6b0814328a86bd6ed6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="67cfb8548ccb78172db31d7af494fa02" category="paragraph"><block ref="67cfb8548ccb78172db31d7af494fa02" category="inline-image-macro-rx" type="image"></block></block>
  <block id="02b67ed2348002e614d5a35151577632" category="section-title">为 SQL 创建数据库日志备份策略。</block>
  <block id="b405195aec7cf62440373fcdc490dec6" category="list-text">使用数据库管理用户 ID 登录到 SnapCenter ，单击 " 设置 "&gt;" 策略 " ，然后单击 " 新建 " 以启动新的策略创建工作流。</block>
  <block id="c236030076b67936a7c1c11d49408838" category="paragraph"><block ref="c236030076b67936a7c1c11d49408838" category="inline-image-macro-rx" type="image"></block></block>
  <block id="acdaf46fc90606d68f3f2b52cca5e95b" category="list-text">定义日志备份选项和计划频率。对于配置了可用性组的 SQL Server ，可以设置首选备份副本。</block>
  <block id="19ab604707a9384fa4883cedd5a525f9" category="paragraph"><block ref="19ab604707a9384fa4883cedd5a525f9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="da00d968a5d810d846ddc815b8f405a4" category="list-text">SQL Server 数据备份策略定义日志备份保留；接受此处的默认值。</block>
  <block id="783828e5ae6dcfd713966e7301831296" category="paragraph"><block ref="783828e5ae6dcfd713966e7301831296" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d04d89062d3ed67bbc9c4aee35bdba7f" category="list-text">启用日志备份复制到云中的二级卷。</block>
  <block id="b1968bd01bc5c402dcd27c99ce6326cc" category="paragraph"><block ref="b1968bd01bc5c402dcd27c99ce6326cc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="30c50cf9d6726341a29a3caf97dc84e8" category="paragraph"><block ref="30c50cf9d6726341a29a3caf97dc84e8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c4d9b291b4ffaddb50c99313e530077f" category="paragraph"><block ref="c4d9b291b4ffaddb50c99313e530077f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f28f6c36698b3a4cd47cbeead15eddf2" category="section-title">8. 实施备份策略以保护数据库</block>
  <block id="37b889cc1b57f66ae9018b6eacb891ba" category="paragraph">SnapCenter 使用资源组以数据库资源的逻辑分组形式备份数据库，例如，服务器上托管的多个数据库，共享相同存储卷的数据库，支持业务应用程序的多个数据库等。保护单个数据库会创建自己的资源组。以下过程演示如何实施第 7 节中创建的备份策略来保护 Oracle 和 SQL Server 数据库。</block>
  <block id="0603dbbe978e4cd3ee1c45ba96a1aa6f" category="section-title">创建一个资源组以对 Oracle 进行完整备份</block>
  <block id="5f4e02f34bcd7993867c4b3297a171d0" category="list-text">使用数据库管理用户 ID 登录到 SnapCenter ，然后导航到资源选项卡。在视图下拉列表中，选择数据库或资源组以启动资源组创建工作流。</block>
  <block id="6eac6f96ac8d968dfec8184d16a73d43" category="paragraph"><block ref="6eac6f96ac8d968dfec8184d16a73d43" category="inline-image-macro-rx" type="image"></block></block>
  <block id="98dcf41bcde9cb6c4235a6a7dfe69346" category="list-text">提供资源组的名称和标记。您可以为 Snapshot 副本定义命名格式，并绕过冗余归档日志目标（如果已配置）。</block>
  <block id="a75ba82042ae54dd2e68cf6c7a26614c" category="paragraph"><block ref="a75ba82042ae54dd2e68cf6c7a26614c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0cd85a82e6f02b779006b158b9c5f828" category="list-text">将数据库资源添加到资源组。</block>
  <block id="3836a8be1f86b6658a7fa6b180e4a72d" category="paragraph"><block ref="3836a8be1f86b6658a7fa6b180e4a72d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cee52cb6702e7590fbef45eccc8fb2df" category="list-text">从下拉列表中选择在第 7 节中创建的完整备份策略。</block>
  <block id="af900bffdda986bc1db955ae78832742" category="paragraph"><block ref="af900bffdda986bc1db955ae78832742" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8fe872cd84ea2e9051770379e63f9caf" category="list-text">单击（ + ）号可配置所需的备份计划。</block>
  <block id="9da504fd8ab60cfcc873608530cf5d56" category="paragraph"><block ref="9da504fd8ab60cfcc873608530cf5d56" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fdc27a4c5d48dbfc04f81ecac85acd64" category="list-text">单击 Load Locators 以加载源卷和目标卷。</block>
  <block id="7242164857e43688f8a7bec97559c36e" category="paragraph"><block ref="7242164857e43688f8a7bec97559c36e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b612dc8868902cf8fbf2b1024ad94e65" category="paragraph"><block ref="b612dc8868902cf8fbf2b1024ad94e65" category="inline-image-macro-rx" type="image"></block></block>
  <block id="95633243861715786b64e1554b629435" category="paragraph"><block ref="95633243861715786b64e1554b629435" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6f7192b9766e6f09c261f3ca3d3bddc8" category="section-title">为 Oracle 的日志备份创建一个资源组</block>
  <block id="1a0cd5de7c84ddbf632838dd9f510d37" category="paragraph"><block ref="1a0cd5de7c84ddbf632838dd9f510d37" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f0ad3d9537c50952c04b71be3f9d4579" category="paragraph"><block ref="f0ad3d9537c50952c04b71be3f9d4579" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c33c31714f671e112fbe52b660d3e7a4" category="paragraph"><block ref="c33c31714f671e112fbe52b660d3e7a4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="03955b73285eab0d68e90c627da9726d" category="list-text">从下拉列表中选择在第 7 节中创建的日志备份策略。</block>
  <block id="6286629570d2ca91cf6860e7da6e9073" category="paragraph"><block ref="6286629570d2ca91cf6860e7da6e9073" category="inline-image-macro-rx" type="image"></block></block>
  <block id="88c73129e9a418955658ce5c48d9d8b5" category="list-text">单击（ + ）号可配置所需的备份计划。</block>
  <block id="8cdd30063d988671ffa9240fe171b1ce" category="paragraph"><block ref="8cdd30063d988671ffa9240fe171b1ce" category="inline-image-macro-rx" type="image"></block></block>
  <block id="eacfd6f10777b8dfb41199e4d4dfa915" category="list-text">如果配置了备份验证，则会显示在此处。</block>
  <block id="69911c1794125b768effca94c8153987" category="paragraph"><block ref="69911c1794125b768effca94c8153987" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1a27fac4b1d49d5468930a56c3a6de56" category="list-text">如果需要，配置用于电子邮件通知的 SMTP 服务器。</block>
  <block id="fd540644538dcedf1f6543455447728f" category="paragraph"><block ref="fd540644538dcedf1f6543455447728f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="554dbe35f6afa38e8232497f5d05d1c1" category="paragraph"><block ref="554dbe35f6afa38e8232497f5d05d1c1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cf688c7a95f421447e84a47fd03f3aa2" category="section-title">创建用于 SQL Server 完整备份的资源组</block>
  <block id="d08ef097ee33c4a3506183adeb51c5e7" category="list-text">使用数据库管理用户 ID 登录到 SnapCenter ，然后导航到资源选项卡。在视图下拉列表中，选择数据库或资源组以启动资源组创建工作流。提供资源组的名称和标记。您可以为 Snapshot 副本定义命名格式。</block>
  <block id="87d2630813d214672697efc01974d64e" category="paragraph"><block ref="87d2630813d214672697efc01974d64e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ec1ace5324d60cb3faa1863efd675149" category="list-text">选择要备份的数据库资源。</block>
  <block id="15330fe5b8f32032bd3b30c091d7dc4b" category="paragraph"><block ref="15330fe5b8f32032bd3b30c091d7dc4b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2fc1974f486effa4a60bf216e63a88d5" category="list-text">选择在第 7 节中创建的完整 SQL 备份策略。</block>
  <block id="dc34bd5487acb7fcd3dcc3f23b2bbc5e" category="paragraph"><block ref="dc34bd5487acb7fcd3dcc3f23b2bbc5e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="12b70beeb570488ba753a620378cacd8" category="list-text">添加准确的备份时间以及频率。</block>
  <block id="8fa0a3897bc03e9b1653d17308464031" category="paragraph"><block ref="8fa0a3897bc03e9b1653d17308464031" category="inline-image-macro-rx" type="image"></block></block>
  <block id="49252579bd8140847f4bbac20ef89b07" category="list-text">如果要执行备份验证，请在二级系统上为备份选择验证服务器。单击加载定位器以填充二级存储位置。</block>
  <block id="355e5eb56524b7365674014ea5868ee6" category="paragraph"><block ref="355e5eb56524b7365674014ea5868ee6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="19e819eadb96ee5769ff4c6309352a62" category="paragraph"><block ref="19e819eadb96ee5769ff4c6309352a62" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0be278d93ec2e64895e31bf440c54b98" category="paragraph"><block ref="0be278d93ec2e64895e31bf440c54b98" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b4dd921984d3a8a89e7df5c97875b923" category="section-title">为 SQL Server 的日志备份创建一个资源组</block>
  <block id="4e94ca9b995e68691b4e67b82b9f5bce" category="list-text">使用数据库管理用户 ID 登录到 SnapCenter ，然后导航到资源选项卡。在视图下拉列表中，选择数据库或资源组以启动资源组创建工作流。提供资源组的名称和标记。您可以为 Snapshot 副本定义命名格式。</block>
  <block id="4e71263f0aec815017fd21a22ddb87d6" category="paragraph"><block ref="4e71263f0aec815017fd21a22ddb87d6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="013faf9f6cde83814469c6d583e10702" category="paragraph"><block ref="013faf9f6cde83814469c6d583e10702" category="inline-image-macro-rx" type="image"></block></block>
  <block id="23e15d7c127e66b1da1d72072a29e9eb" category="list-text">选择在第 7 节中创建的 SQL 日志备份策略。</block>
  <block id="52a8553e4c33eb8353d56286d3845b28" category="paragraph"><block ref="52a8553e4c33eb8353d56286d3845b28" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7e7cac98c16b45d7e4ebec8786b8fda1" category="list-text">添加准确的备份时间以及频率。</block>
  <block id="acfaadb1bfb8a5c0a2c39c1f64291ea3" category="paragraph"><block ref="acfaadb1bfb8a5c0a2c39c1f64291ea3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="68398b6746dde91649e96505d97acc40" category="list-text">如果要执行备份验证，请在二级系统上为备份选择验证服务器。单击负载定位器以填充二级存储位置。</block>
  <block id="3bde998a2436b40589b20d91a713d3ee" category="paragraph"><block ref="3bde998a2436b40589b20d91a713d3ee" category="inline-image-macro-rx" type="image"></block></block>
  <block id="80000e8cb7742af4686df786fdf38249" category="paragraph"><block ref="80000e8cb7742af4686df786fdf38249" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d32fb038efa6b409f8dedd0e02a10f26" category="paragraph"><block ref="d32fb038efa6b409f8dedd0e02a10f26" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a9c72629a46c2e88cf7f6a012167bb16" category="section-title">9. 验证备份</block>
  <block id="d1c55c296cbdaa8d88eda765a6158b62" category="paragraph">创建数据库备份资源组以保护数据库资源后，备份作业将根据预定义的计划运行。在监控选项卡下检查作业执行状态。</block>
  <block id="5f9af2a4e435e2b39c27f43b580d6d20" category="paragraph"><block ref="5f9af2a4e435e2b39c27f43b580d6d20" category="inline-image-macro-rx" type="image"></block></block>
  <block id="57882e224a8cbe8f694da9b1d8fa503e" category="paragraph">转到资源选项卡，单击数据库名称以查看数据库备份的详细信息，然后在本地副本和镜像副本之间切换，以验证 Snapshot 备份是否已复制到公有云中的二级位置。</block>
  <block id="f9b40afbdb387dd32b8523c95080a898" category="paragraph"><block ref="f9b40afbdb387dd32b8523c95080a898" category="inline-image-macro-rx" type="image"></block></block>
  <block id="28268d417882b5cf7a3d3ee3a15834c8" category="paragraph">此时，云中的数据库备份副本已做好克隆准备，可以运行开发 / 测试流程，或者在发生主故障时进行灾难恢复。</block>
  <block id="78b29bbf3f07a44b62307ce90b34904e" category="inline-link-macro">接下来： AWS 公有云入门。</block>
  <block id="7d32c0298884bcc4c0211357748d0e6e" category="paragraph"><block ref="7d32c0298884bcc4c0211357748d0e6e" category="inline-link-macro-rx"></block></block>
  <block id="0f22160e43c900ef7426d8a19e9f482d" category="summary">在执行混合云数据库工作负载之前，必须在内部和云中配置某些前提条件。下一节简要介绍了此过程，以下链接提供了有关必要的系统配置的详细信息。</block>
  <block id="1dad826770c4d2c619351c974f725b36" category="doc">前提条件配置</block>
  <block id="ce38f65c711e7e3047c9350abe42c0c3" category="inline-link-macro">先前版本：解决方案要求。</block>
  <block id="d3fe0eebddd46d46399cb319c7219427" category="paragraph"><block ref="d3fe0eebddd46d46399cb319c7219427" category="inline-link-macro-rx"></block></block>
  <block id="4df40e141b0559f15db8f84f78aed013" category="section-title">内部部署</block>
  <block id="caea8340e2d186a540518d08602aa065" category="list-text">自动化</block>
  <block id="761883c0d5c55fba5b200ac8ac0d86e5" category="section-title">公有云</block>
  <block id="37aa83a33297d9d16b4423be342598bb" category="list-text">连接器的网络位置</block>
  <block id="74c043a4451dd260729a23ce96aa1550" category="paragraph">重要注意事项：</block>
  <block id="7aee27c83b5e3622c1d8cbd5c2098c60" category="list-text">在何处部署 Cloud Manager Connector ？</block>
  <block id="43fd5c6fa3d9ba8a215c31f3bf0a9859" category="list-text">Cloud Volume ONTAP 规模估算和架构</block>
  <block id="7a0e00d70e3b0ff06476a52565f923c4" category="list-text">单节点还是高可用性？</block>
  <block id="2d0b46fff3ae203a435b167c7111b389" category="paragraph">以下链接提供了更多详细信息：</block>
  <block id="cfd98f49422c4fba755a2ff74c55a4a0" category="paragraph"><block ref="cfd98f49422c4fba755a2ff74c55a4a0" category="inline-link-macro-rx"></block></block>
  <block id="704849d56e695ab8f9df0b106e0d7e33" category="inline-link-macro">公有云</block>
  <block id="96e41b2b281ca4b71edf4ed16e46a2be" category="paragraph"><block ref="96e41b2b281ca4b71edf4ed16e46a2be" category="inline-link-macro-rx"></block></block>
  <block id="7c12725837ee75c4c0a9bbc14f99934d" category="inline-link-macro">接下来：内部部署的前提条件。</block>
  <block id="bc57dd30a9059d494c9d76e4b0a9ce8f" category="paragraph"><block ref="bc57dd30a9059d494c9d76e4b0a9ce8f" category="inline-link-macro-rx"></block></block>
  <block id="18e04180e0442e18a559941bb8de310c" category="sidebar">边缘人工智能推理—采用联想 ThinkSystem 的 NetApp —解决方案设计</block>
  <block id="30b22b544972f5adb280ca2975099846" category="sidebar">采用 SnapCenter 的混合云数据库解决方案</block>
  <block id="59f8ae0d5c4ba13dee4828e2727c8859" category="sidebar">内部部署入门</block>
  <block id="96e4797e3006bef737785f8627faae06" category="paragraph">下图显示了 NetApp EF280 存储系统。</block>
  <block id="b407d5a86fd662f03d5a1615963e0827" category="paragraph">ONTAP 9.8.1 是 NetApp 推出的最新一代存储管理软件，可帮助企业打造现代化的基础架构并过渡到云就绪数据中心。借助行业领先的数据管理功能，无论数据位于何处， ONTAP 都可以通过一组工具来管理和保护数据。您还可以将数据自由移动到需要的任何位置：边缘，核心或云。ONTAP 9.8.1 提供了许多功能，可简化数据管理，加快和保护关键数据，并在混合云架构中实现下一代基础架构功能。</block>
  <block id="9177ba75c6dc50d818c52360f10e2fe1" category="list-text">下载需要注册的数据集， ImageNet 2012 验证集， Criteo TB 数据集和 Brats 2019 训练集，然后解压缩这些文件。</block>
  <block id="12dda17fb1d76556387dceb2e85a9290" category="list-text">创建一个至少包含 1 TB 的工作目录，并定义环境变量 `MLPERF_scrating_path` 引用该目录。</block>
  <block id="7c5f7553ff57e0548889000668d1cf39" category="list-text">运行 make `prebuild` 命令，该命令可为所需的推理任务构建并启动 Docker 容器。</block>
  <block id="b25e1e6ba392fe4c0e0da7617a67fa4d" category="list-text">为 MLPerf 推理任务下载经过预先培训的 AI 型号： `make download_model`</block>
  <block id="ed43016366915f1fc65fe332de60965f" category="list-text">下载可免费下载的其他数据集： `make download_data`</block>
  <block id="41165a10471c0644aef30b976f113946" category="list-text">预处理数据： make `preprocess_data`</block>
  <block id="f0bacb5df46d2e8bed3d6d0d863fce01" category="list-text">运行： `m构建` 。</block>
  <block id="189eed4566c6894d64b4d4f8bc9df94c" category="list-text">针对计算服务器中的 GPU 优化的构建推理引擎： `make generate_engine`</block>
  <block id="ca0aa5c3a448e511d9334d94174b8b85" category="paragraph">此基准测试可测量延迟。对于所有情况，我们都会报告运行中涉及的所有服务器的平均延迟。系统将提供此任务套件的结果。</block>
  <block id="f02eaec2bc90de6689765cffde92e809" category="paragraph">结果再次显示，网络存储足以处理这些任务。在一台服务器的情况下，本地存储与网络存储之间的差别很小或没有差别。同样，当两个服务器使用相同的存储时，两个服务器上的延迟保持不变或变化量非常小。</block>
  <block id="cc402abc10a0191493024c4510783afc" category="paragraph">此联想 ThinkSystem 服务器和 NetApp ONTAP 或 NetApp SANtricity 存储解决方案旨在利用 GPU 与传统 CPU 的处理能力处理大型数据集上的 AI 推理。此验证通过一个架构来展示高性能和最佳数据管理，该架构使用一个或多个与单个 NetApp AFF 存储系统互连的联想 SR350 边缘服务器，如以下两个图所示。</block>
  <block id="aa8af408f2dd6ce3e407f4979ab2bb2d" category="paragraph"><block ref="aa8af408f2dd6ce3e407f4979ab2bb2d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="aacb24ff7918ccc37aea66f8c9548b68" category="paragraph"><block ref="aacb24ff7918ccc37aea66f8c9548b68" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fa68c0f0557e1b1d9b151c9be9aae26a" category="paragraph">下图中的逻辑架构概述显示了此架构中计算和存储元素的角色。具体而言，它显示以下内容：</block>
  <block id="eb190159f20d63d1c7687ecafd03fc73" category="paragraph">本文档遵循 MLPerf 推理 v0.7<block ref="72ea1359ddbf7a99cdb0a438fda3e022" category="inline-link-rx"></block>， MLPerf 推理 v1.1<block ref="7dc141edfa21f33dbd4b0757be1ad69f" category="inline-link-rx"></block>，和<block ref="efc21f34f290528320a21a8cc99ffcfc" category="inline-link-rx"></block>。我们运行了专为在边缘进行推理而设计的 MLPerf 基准测试，如下表所述。</block>
  <block id="816720c0b642aa1eef01c4f9108f54c5" category="paragraph">下表介绍了 Edge 基准测试场景。</block>
</blocks>