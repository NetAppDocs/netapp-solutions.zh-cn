<?xml version="1.0" encoding="UTF-8"?>
<blocks>
  <block id="e59c383143e849c3183725256fd9a923" category="summary">介绍混合云，桌面虚拟化和容器解决方案功能的一系列视频和演示</block>
  <block id="abcf24668eda72956736ac7e0d4363b2" category="doc">混合云，桌面虚拟化和容器视频和演示</block>
  <block id="45ab5f50e70c77a29d7191bf77c1ea15" category="paragraph">请参见以下视频和演示，其中重点介绍了混合云，桌面虚拟化和容器解决方案的特定功能。</block>
  <block id="e96910160219339e97abaf85c4323aaa" category="section-title">NetApp 与 VMware Tanzu 视频系列</block>
  <block id="526cee55e2936716b5481f8a933bd217" category="inline-link-macro">如何在 NetApp 和 VMware Tanzu Basic 中使用 VVOL ，第 1 部分</block>
  <block id="c2240101c5a3a188541ce87c59265df9" category="list-text"><block ref="c2240101c5a3a188541ce87c59265df9" category="inline-link-macro-rx"></block></block>
  <block id="2e933c421900ce4ed68883bfdf00a487" category="inline-link-macro">如何在 NetApp 和 VMware Tanzu Basic 中使用 VVOL ，第 2 部分</block>
  <block id="fe72963b1d3021a9f6d8ae34414601c3" category="list-text"><block ref="fe72963b1d3021a9f6d8ae34414601c3" category="inline-link-macro-rx"></block></block>
  <block id="4c1c4ad5c7782eafb30ad4704dbf4419" category="inline-link-macro">如何在 NetApp 和 VMware Tanzu Basic 中使用 VVOL ，第 3 部分</block>
  <block id="4d066173d8401c92a19650e99dcaae5d" category="list-text"><block ref="4d066173d8401c92a19650e99dcaae5d" category="inline-link-macro-rx"></block></block>
  <block id="c232cfc0ae9806d3ad6d34a51df58229" category="section-title">采用 NetApp 技术的 Red Hat OpenShift</block>
  <block id="3699cb747ce71b2fed488fef61ad35be" category="inline-link-macro">工作负载迁移—采用 NetApp 的 Red Hat OpenShift</block>
  <block id="7108e02acdfbc9a7cf66345731d3ec5e" category="summary">讨论 AI 和现代数据分析解决方案功能的系列博客</block>
  <block id="407c5c4d36c8f404212036765bd911ac" category="doc">AI 和现代数据分析博客</block>
  <block id="2aa8a49ee37d7496cf666062c18c3ad3" category="paragraph">重点介绍 AI 和现代数据分析解决方案特定功能的博客概述。</block>
  <block id="27f80f5fcc8cfd10fa4ffd9f6c3bc57e" category="section-title">人工智能博客系列</block>
  <block id="262b50eaf28adc9b3a78eee7815e591b" category="inline-link-macro">NetApp.com 上的 AI 博客</block>
  <block id="4a38fc10bfca86cdca121c2725dd5654" category="list-text"><block ref="4a38fc10bfca86cdca121c2725dd5654" category="inline-link-macro-rx"></block></block>
  <block id="750b570f7c6cacf7b9f43c1c7919ad96" category="inline-link-macro">有关 thePub 的 AI 博客</block>
  <block id="183754618306c7f8d7df04f981d234f0" category="list-text"><block ref="183754618306c7f8d7df04f981d234f0" category="inline-link-macro-rx"></block></block>
  <block id="d41d8cd98f00b204e9800998ecf8427e" category="summary"></block>
  <block id="1cf7e301510c711b73d2b182b9dcf084" category="doc">用例</block>
  <block id="ad54e6f7d665098e981d7e41732ce4c2" category="inline-link-macro">接下来：架构</block>
  <block id="341d84aa26cb4521474864e04ea2a63b" category="inline-image-macro">错误：缺少图形映像</block>
  <block id="6c92285fa6d3e827b198d120ea3ac674" category="inline-link">此处</block>
  <block id="be5acbec67071810913f6782071a73eb" category="section-title">存储设计</block>
  <block id="2d242bb36ec91b32005f9296ff03a912" category="doc">架构</block>
  <block id="9a50201aa3bf66a7a0337ccf29d20c90" category="section-title">解决方案技术</block>
  <block id="2b0d957e4ad1bdfd446155ff5bb8a9b2" category="section-title">架构图</block>
  <block id="b831e128b8fd177e9c80396ed741b7c1" category="section-title">硬件和软件要求</block>
  <block id="a623a8d0366bf079411aa30be45b2d10" category="section-title">计算</block>
  <block id="3c02a379965ab0dfcd77b1c484450433" category="cell">硬件</block>
  <block id="a559b87068921eec05086ce5485e9784" category="cell">型号</block>
  <block id="694e8d1f2ee056f98ee488bdc4982d73" category="cell">数量</block>
  <block id="1679091c5a880faf6fb5e6087eb1b2dc" category="cell">6.</block>
  <block id="719d067b229178f03bcfa1da4ac4dede" category="cell">软件</block>
  <block id="261addf78c7b2c961032b3dd08ba0b1f" category="cell">目的</block>
  <block id="34b6cd75171affba6957e308dcbd92be" category="cell">version</block>
  <block id="ea4c55be196897a16d86999f5c16d582" category="cell">虚拟化</block>
  <block id="c73bbd3786350b0a8d3577d82afdf489" category="cell">Red Hat Enterprise Linux</block>
  <block id="80e910f35b12e9c61335fa88de36edd0" category="cell">Red Hat 虚拟化</block>
  <block id="8c4aa541ee911e8d80451ef8cc304806" category="section-title">存储</block>
  <block id="a87ff679a2f3e71d9181a67b7542122c" category="cell">4.</block>
  <block id="c8984126713ed072b9cb0a44a162be4d" category="cell">AFF</block>
  <block id="c81e728d9d4c2f636f067f89cc14862c" category="cell">2.</block>
  <block id="fcda5b98e8c212807dc088477e802757" category="cell">NetApp Element</block>
  <block id="253b40ae359ba25b56231803430c4873" category="cell">ONTAP</block>
  <block id="3a3a5cd068731551120f43f37950768b" category="cell">ONTAP Select</block>
  <block id="f82f50748d06cc9643330a4a8297ba43" category="cell">9.7</block>
  <block id="a5fa5746370b608090b994a97b49e98b" category="section-title">网络</block>
  <block id="eccbc87e4b5ce2fe28308fd9f2a7baf3" category="cell">3.</block>
  <block id="3887d417240a72ab69f6d0301efd3b2b" category="doc">从何处查找追加信息</block>
  <block id="7d5b957cd473f6eaf5ad335a9c63c4ff" category="paragraph">要了解有关本文档中所述信息的更多信息，请查看以下文档和 / 或网站：</block>
  <block id="1b214ce6b630c9ad822fc984e20f3675" category="inline-link"><block ref="1b214ce6b630c9ad822fc984e20f3675" category="inline-link-rx"></block></block>
  <block id="91fe04078e98f81bd39430c985bba713" category="paragraph"><block ref="91fe04078e98f81bd39430c985bba713" category="inline-link-rx"></block></block>
  <block id="8887a9a417a1629326acdb917d224337" category="list-text">VMware vSphere</block>
  <block id="9ed4a475dd3705157a9fed8811f63ce2" category="list-text">NetApp 互操作性表工具</block>
  <block id="930dd6e7cbd550494f96b487d9d38ec8" category="section-title">硬件要求</block>
  <block id="9d273bd32c1fceb91b7d6a4d40e98bdd" category="section-title">软件要求</block>
  <block id="d9ae1ecd6158beb6acd24c9f59d0498e" category="paragraph">下表列出了实施解决方案所需的软件组件。在任何解决方案实施中使用的软件组件可能会因客户要求而异。</block>
  <block id="5eed1e48d8861a1192e8694a3d24021b" category="inline-link-macro">下一步：用例</block>
  <block id="0cdff7d38ef496f6b5510c5034fedf15" category="list-text">具有性能保证的多租户</block>
  <block id="d8b778c81ae11eb5edbd4291a3cf8fff" category="section-title">技术概述</block>
  <block id="16600c3602f9acbaa2286f34135f6bb8" category="paragraph">通过 NetApp Element 软件集群，可以按卷动态配置 QoS 。您可以使用每个卷的 QoS 设置根据定义的 SLA 控制存储性能。以下三个可配置参数用于定义 QoS ：</block>
  <block id="d91a826908d0c27cf5d21d2152292ab0" category="list-text">* 最小 IOPS* 。 NetApp Element 软件集群为卷提供的最小可持续 IOPS 数。为卷配置的最小 IOPS 是卷的性能保证级别。每个卷的性能不会低于此级别。</block>
  <block id="827b5871d6ce8f2203a567ef3024f072" category="list-text">* 突发 IOPS 。 * 在短时突发情形下允许的最大 IOPS 数。突发持续时间设置是可配置的，默认值为 1 分钟。如果卷运行的 IOPS 低于最大 IOPS 级别，则会累积突发额度。如果性能级别变得非常高并不断推送，则允许卷上的 IOPS 短时突发超过最大 IOPS 。</block>
  <block id="e95bb6f1e85d1ffe0eb983fd5e0fbde8" category="section-title">多租户</block>
  <block id="086d1eacd91102f734387f0266326344" category="paragraph">可通过以下功能实现安全多租户：</block>
  <block id="78712bd6b2d8e5531e122b5e849fb842" category="paragraph">NetApp Element 软件集群可提高整体存储效率和性能。以下功能是实时执行的，始终开启的，无需用户手动配置：</block>
  <block id="7adf04762320f012179ffe68fb0aeb9f" category="paragraph">RHV 具有以下功能：</block>
  <block id="e353dbe42c8654f33588d4da0b517469" category="doc">摘要</block>
  <block id="87495e311a3944910e3cc0c7bee3d754" category="cell">VLAN</block>
  <block id="b7dff125c9fce628900142990708436f" category="cell">带外管理网络</block>
  <block id="c74d97b01eae257e44aa9d5bade97baf" category="cell">16.</block>
  <block id="7b9993fac4b9a60605aa2884eb40f4a3" category="cell">带内管理网络</block>
  <block id="36a1694bce9815b7e38a9dad05ad42e0" category="cell">1172.</block>
  <block id="cd3718e8610b820344c9a0284fe84f90" category="cell">存储网络</block>
  <block id="21c5bba1dd6aed9ab48c2b34c1a0adde" category="cell">3343</block>
  <block id="3de18ffc25309bd0755d8543a30ded78" category="cell">迁移网络</block>
  <block id="38a77aa456fc813af07bb428f2363c8d" category="cell">3345</block>
  <block id="9335616a8b7dc0e6f94fd0c6aa720efe" category="list-text">至少一个 DNS 服务器，提供可从带内管理网络和 VM 网络访问的完整主机名解析。</block>
  <block id="905a394004d9055ec4708e53880cac66" category="list-text">至少可从带内管理网络和 VM 网络访问一个 NTP 服务器。</block>
  <block id="729d72c073b607d370c067152cc53a10" category="doc">验证结果</block>
  <block id="1b21b0d71706897b69f108572c444d40" category="cell">虚拟机管理程序</block>
  <block id="382b0f5185773fa0f67a8ed8056c7759" category="cell">不适用</block>
  <block id="b872d0389acf826cc7cf1939cd17a05d" category="inline-link-macro">下一步：从何处查找追加信息</block>
  <block id="3b878279a04dc47d60932cb294d96259" category="doc">概述</block>
  <block id="1ddf333c6654f7f89c739dddfb4cc429" category="section-title">应用程序</block>
  <block id="ee68e5b99222bbc29a480fcb0d1d6ee2" category="section-title">前提条件</block>
  <block id="794df3791a8c800841516007427a2aa3" category="section-title">许可证</block>
  <block id="ea355214fd4bc7c57f471bd92918879b" category="section-title">部署</block>
  <block id="65cd53ff19e601ea00bf9688be4dd86a" category="summary">借助 NetApp ONTAP 实现 Red Hat OpenShift 虚拟化</block>
  <block id="ad3a2e9007d848afd0c15ffc402781bb" category="doc">工作流：使用 NetApp ONTAP 实现 Red Hat OpenShift 虚拟化</block>
  <block id="55c7e45b50d0b012faf4bce31b6ad05d" category="section-title">从 Snapshot 创建 VM</block>
  <block id="f991e1a54e399d272c7d968dcdfdb690" category="paragraph">对于 OpenShift 中的 Snapshot 操作，必须定义资源 VolumeSnapshotClass ， VolumeSnapshot 和 VolumeSnapshotContent 。</block>
  <block id="0e2d1628ef03c4400cd293c3143cabb3" category="list-text">VolumeSnapshotContent 是从集群中的卷生成的实际快照。它是一种集群范围的资源，类似于用于存储的 PersistentVolume 。</block>
  <block id="8ca4876558d3675f7a3e2c452c62a215" category="list-text">VolumeSnapshot 是指创建卷快照的请求。它类似于 PersistentVolumeClaim 。</block>
  <block id="7f9fbed02a61699d31f7d9a0eb11bc81" category="list-text">管理员可以使用 VolumeSnapshotClass 为 VolumeSnapshot 指定不同的属性。通过此选项，您可以为从同一卷创建的不同快照设置不同的属性。</block>
  <block id="7f7858938c48bb9f08341c0e41c9162d" category="image-alt">Snapshot 架构中的 VM</block>
  <block id="99bf6e1ad41f7875d5b7ec9f857c4f0f" category="paragraph">要创建虚拟机的 Snapshot ，请完成以下步骤：</block>
  <block id="52f0977d1e65469f01e2f290e637a8f1" category="list-text">输入 Snapshot 类的名称，输入驱动程序的 csi.trident.netapp.io ，然后单击创建。</block>
  <block id="508073b07367d898823f1841627451d4" category="image-alt">创建 Snapshot 类</block>
  <block id="2bde7e02152796551174ea391bda0b60" category="list-text">确定连接到源 VM 的 PVC ，然后创建该 PVC 的 Snapshot 。导航到 `Storage &gt; VolumeSnapshots` ，然后单击 Create VolumeSnapshots 。</block>
  <block id="b9513caba1fba7b4291a9e22bc512de5" category="list-text">选择要为其创建 Snapshot 的 PVC ，输入 Snapshot 的名称或接受默认值，然后选择相应的 VolumeSnapshotClass 。然后单击创建。</block>
  <block id="a7a384e6f13cae2ef877b4dd78fd48ad" category="image-alt">创建快照</block>
  <block id="d8ae3e40f0f0dba0b7c7ba5b8eea845a" category="list-text">此时将创建 PVC 的快照。</block>
  <block id="e9b3b34ca8f917d1968a106e682f1a97" category="section-title">从快照创建新虚拟机</block>
  <block id="5160cd070df38f982551c5fea6f1c844" category="list-text">输入新 PVC 的详细信息，然后单击还原。这样就会创建一个新的 PVC 。</block>
  <block id="0d695454ca10516a832452b6123c5bb5" category="image-alt">将 Snapshot 还原到新的 PVC</block>
  <block id="75b0d3500d81c7799a5b84eca57d6d04" category="list-text">单击创建以创建新虚拟机。</block>
  <block id="57dc3c96f32e4895e89eab4a248088f5" category="list-text">成功创建虚拟机后，访问并验证新虚拟机的状态是否与创建快照时使用 PVC 创建快照的虚拟机的状态相同。</block>
  <block id="a4957cf974ce20219897bbbf5b131cb8" category="paragraph">管理员可以根据项目需求和存储系统型号配置多个存储后端，以实现高级存储功能，包括数据压缩，特定磁盘类型或 QoS 级别，以保证一定水平的性能。定义后，开发人员可以在其项目中使用这些后端创建永久性卷声明（ PVC ），并按需将永久性存储附加到容器。</block>
  <block id="ecfb2402c181e98da49a5d763378b116" category="paragraph"><block ref="ecfb2402c181e98da49a5d763378b116" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b62bb4786ef52ad76706950add6991dd" category="paragraph">从 20.04 版开始， Trident 设置由 Trident 操作员执行。操作员可以简化大规模部署，并为在 Trident 安装过程中部署的 Pod 提供额外的支持，包括自我修复。</block>
  <block id="4a85fdd5a26454abc330a5ec2a46a326" category="paragraph">在 21.01 版中，我们提供了一个 Helm 图表，用于简化 Trident 操作员的安装。</block>
  <block id="f95d0437e813349fa018b7f0e68e9a7d" category="paragraph">要在已部署的用户集群上安装 Trident 并配置永久性卷，请完成以下步骤：</block>
  <block id="422269f9bb560b76869cbd586b8370d5" category="list-text">从下载的软件包中提取 Trident 安装。</block>
  <block id="52d012c119e8e080d08f6a1592f8f9ec" category="section-title">使用 Helm 安装 Trident 操作员</block>
  <block id="68602d0447fae81afa9d0528ef0c6420" category="list-text">首先将用户集群的 `kubeconfig` 文件的位置设置为环境变量，以便您不必引用该文件，因为 Trident 没有传递此文件的选项。</block>
  <block id="449774824d889f1d6ebc0bbcc4920493" category="list-text">在用户集群中创建 Trident 命名空间时，运行 Helm 命令从 Helm 目录中的 tarball 安装 Trident 操作员。</block>
  <block id="64e437a845e5de3c8e50925ebdfce295" category="list-text">您可以通过检查命名空间中运行的 Pod 或使用 tridentctl 二进制文件检查已安装的版本来验证 Trident 是否已成功安装。</block>
  <block id="3ce67d5de6974f67e0048e6fdbf89498" category="admonition">在某些情况下，客户环境可能需要自定义 Trident 部署。在这种情况下，还可以手动安装 Trident 操作员并更新所包含的清单以自定义部署。</block>
  <block id="8bd534d3b6bc8d2541df052e053ed65d" category="section-title">手动安装 Trident 操作员</block>
  <block id="1315b42a551dafb715ab654d8eb5af40" category="list-text">首先，将用户集群的 `kubeconfig` 文件的位置设置为环境变量，以便您不必引用该文件，因为 Trident 没有传递此文件的选项。</block>
  <block id="5d710ec7d521df428edd75c1885ee89b" category="list-text">`trident 安装程序` 目录包含用于定义所有所需资源的清单。使用适当的清单创建 `TridentOrchestrator` 自定义资源定义。</block>
  <block id="0ac11186fb38b2e9d4acd38d03f61b5c" category="list-text">如果不存在 Trident 命名空间，请使用提供的清单在集群中创建一个 Trident 命名空间。</block>
  <block id="004c51fe71b5c654f88a31270ec6c8e9" category="list-text">为 Trident 操作员部署创建所需的资源，例如为操作员创建 `ServiceAccount` ，为 `SClusterRole` 和 `ClusterRoleBinding` ，为` erviceAccount `，专用` PodSecurityPolicy `或操作员本身创建。</block>
  <block id="f7b9c678b684e969a3ee5ac971514f48" category="list-text">您可以使用以下命令在操作员部署后检查其状态：</block>
  <block id="b34dd67c198ad4cf0088bd29c7ef4658" category="list-text">部署操作员后，我们现在可以使用它来安装 Trident 。这需要创建 `TridentOrchestrator` 。</block>
  <block id="e32d70a13ba1767d9a373fe9a0535531" category="section-title">准备工作节点以进行存储</block>
  <block id="4b4d60be85b0c53c72ae4b8a05deacef" category="paragraph">大多数 Kubernetes 分发软件包和实用程序都会随附用于挂载默认安装的 NFS 后端的软件包和实用程序，包括 Red Hat OpenShift 。</block>
  <block id="693642fbb464db49c22715a536e99c3f" category="paragraph">要使工作节点做好准备，以便能够通过 iSCSI 协议映射块存储卷，您必须安装支持此功能所需的软件包。</block>
  <block id="cccb85b5e6a9a19187087f71254d1fb2" category="paragraph">在 Red Hat OpenShift 中，可通过在部署集群后将 MCO （计算机配置操作员）应用于集群来实现此目的。</block>
  <block id="0b23a2a9d2c7b936148c2852bb596b4d" category="paragraph">要配置工作节点以运行存储服务，请完成以下步骤：</block>
  <block id="7b8e6ef8272a81ebcc108ee3fcf4eac8" category="list-text">登录到 OCP Web 控制台并导航到 Compute &gt; Machine Configs 。单击 Create Machine Config 。复制并粘贴 YAML 文件，然后单击创建。</block>
  <block id="c25282bfd8c140d1f79c25362637f744" category="paragraph">不使用多路径时：</block>
  <block id="541c76e8762c84e3e0488f91c8062e08" category="paragraph">使用多路径时：</block>
  <block id="d9f036d3b9f84b626f8a777480066cab" category="list-text">创建配置后，将此配置应用于工作节点并重新加载它们大约需要 20 到 30 分钟。使用 `oc get MCP` 验证是否应用了计算机配置，并确保已更新员工的计算机配置池。您还可以登录到工作节点，以确认 iscsid 服务正在运行（如果使用多路径，则 multipathd 服务正在运行）。</block>
  <block id="6e16409ed6038c106c7fa1dfbfb9da0f" category="admonition">此外，还可以通过使用适当的标志运行 `oc debug` 命令来确认 MachineConfig 已成功应用且服务已按预期启动。</block>
  <block id="b09d268106fd9cbfffd1dc848382a150" category="section-title">创建存储系统后端</block>
  <block id="615767b52353571ac174e22f1a984aa3" category="inline-link-macro">NetApp ONTAP NFS</block>
  <block id="fa0fe4c03e1ba99a2cac1c4c208b7fbd" category="list-text"><block ref="fa0fe4c03e1ba99a2cac1c4c208b7fbd" category="inline-link-macro-rx"></block></block>
  <block id="c93e7ef2934826b1393251e9f7d9e331" category="inline-link-macro">NetApp ONTAP iSCSI</block>
  <block id="d7b539d4bc16fbdf1477adddfda6c802" category="list-text"><block ref="d7b539d4bc16fbdf1477adddfda6c802" category="inline-link-macro-rx"></block></block>
  <block id="d0e0904111acb167badbf5f196ad1205" category="inline-link-macro">NetApp Element iSCSI</block>
  <block id="2e5d36490241211379006b7f6934bf06" category="list-text"><block ref="2e5d36490241211379006b7f6934bf06" category="inline-link-macro-rx"></block></block>
  <block id="7f3417590f5bba5cf5eb34fb288135f1" category="inline-link-macro">接下来：解决方案验证 / 使用情形：采用 NetApp 的 Red Hat OpenShift 。</block>
  <block id="7a38916784a7216f98837f315958c175" category="paragraph"><block ref="7a38916784a7216f98837f315958c175" category="inline-link-macro-rx"></block></block>
  <block id="93e14ba37d069eff22130cf694c451c1" category="summary">NetApp AFF 是一款功能强大的全闪存存储平台，可提供低延迟性能，集成数据保护，多协议支持和无中断运行。NetApp AFF 由 NetApp ONTAP 数据管理软件提供支持，可确保从维护到升级再到存储系统的完全更换，无中断运行。</block>
  <block id="c0c4b60d27032c028c91440e9d3be949" category="doc">解决方案概述</block>
  <block id="9ecccbf5710194af15cca545b567957a" category="section-title">基于 NetApp AFF/FAS 的 NetApp ONTAP</block>
  <block id="13a74472f5a5018f40319d30a728d03e" category="paragraph">NetApp ONTAP 是一款功能强大的存储软件工具，具有直观的图形用户界面，具有自动化集成功能的 REST API ，基于 AI 的预测性分析和更正操作，无中断硬件升级和跨存储导入等功能。</block>
  <block id="3716516b242be48f15f8cbce6557a296" category="paragraph">ONTAP 提供以下功能：</block>
  <block id="3e23168685787e9deffccb3bdb29d98a" category="list-text">一个统一存储系统，可同时访问和管理 NFS ， CIFS ， iSCSI ， FC ， FCoE ， 和 FC-NVMe 协议。</block>
  <block id="11927aa24f71bc959d85115c8dd8c3a9" category="list-text">不同的部署模式包括内部全闪存，混合和全 HDD 硬件配置；基于 VM 的存储平台位于受支持的虚拟机管理程序（如 ONTAP Select ）上；云端为 Cloud Volumes ONTAP 。</block>
  <block id="65c42edcb28a34e276f92dd9b2172613" category="list-text">通过支持自动数据分层，实时数据压缩，重复数据删除和数据缩减，提高 ONTAP 系统的数据存储效率。</block>
  <block id="f0a8a62c8d7ea4d12a7f1c95b40d3cb3" category="list-text">基于工作负载，由 QoS 控制的存储。</block>
  <block id="1e16ebc829d46d68a51d55ac22293b1e" category="list-text">与公有云无缝集成，实现数据分层和保护。ONTAP 还提供强大的数据保护功能，使其在任何环境中脱颖而出：</block>
  <block id="613db5a747bd15eeccbcbedce5bd8888" category="list-text">* NetApp Snapshot 副本。 * 使用最少的磁盘空间对数据进行快速时间点备份，而不会产生额外的性能开销。</block>
  <block id="8f666d296151faf9c472110831227243" category="list-text">* NetApp SnapMirror 。 * 将数据的 Snapshot 副本从一个存储系统镜像到另一个存储系统。ONTAP 还支持将数据镜像到其他物理平台和云原生服务。</block>
  <block id="5685b3f13393b751231ff096f77e6747" category="list-text">* NetApp SnapLock 。 * 将不可重写数据写入指定时间段内无法覆盖或擦除的特殊卷，从而高效管理这些数据。</block>
  <block id="dff1063d1e007396b7fb75f266dd48b7" category="list-text">* NetApp Snapshot.* 可将多个存储系统中的数据备份到一个中央 SnapVault 副本中，该副本可用作所有指定系统的备份。</block>
  <block id="779cb4084f09228e9562ca3bedc5555c" category="list-text">* NetApp SyncMirror 。 * 可将数据实时镜像到物理连接到同一控制器的两个不同磁盘丛中。</block>
  <block id="929a0581ca4b2982313e21e51effbc10" category="list-text">* NetApp SnapRestore 。 * 可根据需要从 Snapshot 副本快速还原备份的数据。</block>
  <block id="774a065cb3548cc61fb0ec3bc1494fbe" category="inline-link">ONTAP 9 文档中心</block>
  <block id="fce4095b40c80c8632028b9837563736" category="list-text">* NetApp FlexClone 。 * 可根据 Snapshot 副本即时配置 NetApp 卷的完全可读写副本。有关 ONTAP 的详细信息，请参见<block ref="eb1214e3900207403ada8715d3d4c764" category="inline-link-rx"></block>。</block>
  <block id="c389369b80a8ce8ead607b4c7088682e" category="paragraph">NetApp ONTAP 可在内部部署，虚拟化或云中使用。</block>
  <block id="75714c8168a0c2a2594249ece5acf44c" category="paragraph"><block ref="75714c8168a0c2a2594249ece5acf44c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e71e852dc96d4d0e2da95de923a6f8ff" category="section-title">NetApp Trident</block>
  <block id="a0694d53b19f7a5e452e776ee3d2e9a4" category="paragraph">NetApp Trident 是一款开源且完全受支持的存储编排程序，适用于容器和 Kubernetes 分发版，包括 Google Cloud Anthos 。它可以与整个 NetApp 存储产品组合配合使用，包括 NetApp ONTAP 软件。Trident 完全符合 CSI ，它允许您从 NetApp 存储系统配置和管理存储，而无需存储管理员干预，从而加快了 DevOps 工作流的速度。Trident 部署为一个操作员，负责直接与 Kubernetes API 端点进行通信，以便通过在 NetApp 存储系统上创建和管理卷，以永久性卷声明（ Persistent Volume Claim ， PVC ）的形式处理容器的存储请求。</block>
  <block id="dad787ba7494eee7d6dbd3cef7e5900e" category="paragraph">永久性卷（ PV ）是根据 Kubernetes 环境中定义的存储类进行配置的。它们使用存储管理员创建的存储后端（可根据项目需求进行自定义）和存储系统型号，以支持任意数量的高级存储功能，例如压缩，特定磁盘类型或 QoS 级别，以保证性能。</block>
  <block id="10f0fa4079121b371145e16713fdbb44" category="inline-link">Trident</block>
  <block id="73cdbc9c6537713844b52fa7c0f1e655" category="paragraph">有关 NetApp Trident 的详细信息，请参见<block ref="9f564c4a71f7ad715885fb9db4485dda" category="inline-link-rx"></block> 页面。</block>
  <block id="3068002de1b5d66a6a163ddc9883ad94" category="paragraph">Trident 会从 NetApp 产品组合中的每个系统和服务编排存储。</block>
  <block id="6d906f4c160e6416d4f0c02a0fb9696c" category="paragraph"><block ref="6d906f4c160e6416d4f0c02a0fb9696c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3c572f7c92d4b91543f94621d03cf993" category="section-title">Google Cloud 的 Anthos</block>
  <block id="885a32398324f13cbf847894ab05bb41" category="paragraph">Google Cloud 的 Anthos 是一款基于云的 Kubernetes 数据中心解决方案，支持企业构建和管理现代混合云基础架构，同时采用专注于应用程序开发的灵活工作流。裸机中的 Anthos 扩展了 Anthos 的功能，可以在没有虚拟机管理程序层的情况下直接在内部物理服务器上运行，并可与 Google Cloud 中的 Anthos GKEE 集群进行互操作。</block>
  <block id="581adec598400d9d02114736724b28d3" category="paragraph">通过采用容器，服务网状和其他转型技术，企业可以在本地和基于云的环境中体验一致的应用程序开发周期和可随时投入生产的工作负载。</block>
  <block id="ea2625d89edeb5ba9cb41ca58df54e93" category="paragraph">Anthos 提供以下功能：</block>
  <block id="c10e0a21a04a29dfca9609b3ec4bab76" category="list-text">* Anthos 配置管理。 * 自动执行混合 Kubernetes 部署的策略和安全性。</block>
  <block id="e8c4d5cbaf3932ffa3fa7a097bff923e" category="list-text">* Anthos Service mesh 。 * 利用 Istio 支持的服务网格增强应用程序的可观察性，安全性和控制力。</block>
  <block id="b7fd1509ff5472f08e8216f563c9c8af" category="list-text">* 适用于 Kubernetes 应用程序的 Google Cloud Marketplace 。 * 一个精心设计的容器应用程序目录，可用于轻松部署。</block>
  <block id="5204c290ae3b1ebca311a7ca7d447791" category="list-text">* 迁移 for Anthos.* 将物理服务和 VM 从内部环境自动迁移到云。图 3 展示了 Anthos 解决方案以及内部数据中心部署如何与云中的基础架构互连。</block>
  <block id="608fd0ec5cdb56ad3d3e6d9595ec6f19" category="inline-link">Anthos 网站</block>
  <block id="1192e096cd21e1aa81d806fe9e5d2213" category="paragraph">有关 Anthos 的详细信息，请参见<block ref="717e02fd176ae4981315950f42bdf0a6" category="inline-link-rx"></block>。</block>
  <block id="70f64e61deea67473fb9951b8f5888b3" category="paragraph">下图显示了 Google Cloud 的 Anthos 架构。</block>
  <block id="99d1b69697dd97e963c0a8145277719d" category="paragraph"><block ref="99d1b69697dd97e963c0a8145277719d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="aa69ca65720dd2e4eef99ebfb7816268" category="section-title">裸机上的 Anthos</block>
  <block id="761fffea4910d62111da90337e75abb5" category="paragraph">裸机上的 Anthos 是 GKEE 的扩展，部署在客户的私有数据中心中。企业可以在内部的 Anthos 集群中部署设计为在 Google Cloud 容器中运行的相同应用程序。在裸机上运行的 Anthos 直接运行在物理服务器上，用户可以选择底层 Linux 操作系统，并为客户提供一个成熟的混合云环境，使其能够在数据中心的核心或边缘运行。</block>
  <block id="9eb2eb227133ada575ae959b570e545c" category="paragraph">裸机上的 Anthos 具有以下优势：</block>
  <block id="d966dba0352f5bc4bd7cec115bb0f6f4" category="list-text">* 不受硬件限制。 * 客户可以在现有数据中心选择的优化硬件平台上运行 Anthos 。</block>
  <block id="69dd75c781331ee9a4c6b2b30d065262" category="list-text">* 节省成本。 * 您可以通过使用自己的物理资源来部署应用程序，而不是在 Google Cloud 环境中配置资源来显著节省成本。</block>
  <block id="22c97b10f741190427f7bf14aaa217c3" category="list-text">* 先开发再发布。 * 您可以在开发应用程序时使用内部部署，这样可以在本地数据中心的隐私环境下测试应用程序，然后再将其公开发布到云中。</block>
  <block id="0f9f68e8f2e2599804f40d8fc0861b6d" category="list-text">* 性能更高。 * 需要低延迟和最高性能的密集型应用程序可以在更靠近硬件的位置运行。</block>
  <block id="844236b21d302f8c93eda00636abfff8" category="list-text">* 安全要求。 * 安全问题日益增加或无法存储在公有云中的敏感数据集的客户可以从自己的数据中心的安全环境中运行其应用程序，从而满足组织的要求。</block>
  <block id="895cc29ffb809aaf615d5db487a23c7c" category="list-text">* 管理和运营。 * 裸机上的 Anthos 配备了一系列可提高运营效率的设施，例如内置网络，生命周期管理，诊断，运行状况检查，日志记录， 和监控。</block>
  <block id="04b942b754be5e16fc9d5b114dd70bb7" category="inline-link-macro">接下来：解决方案要求。</block>
  <block id="dea54f5c884510a9da9977e2655c0a5a" category="paragraph"><block ref="dea54f5c884510a9da9977e2655c0a5a" category="inline-link-macro-rx"></block></block>
  <block id="b6bd3694e26914bcad3a91cd2d709e12" category="summary">NetApp 和 Google Cloud 之间的关系已有多年， NetApp 率先通过 Cloud Volumes ONTAP 和 Cloud Volumes Service 向 Google Cloud 推出云数据服务。然后，我们对 NetApp HCI 平台进行了验证，使其能够与内部环境中部署的 Google Cloud Anthos 结合使用，这是一种基于虚拟机管理程序的混合多云 Kubernetes 解决方案，部署在 VMware vSphere 上。然后， NetApp 通过了 NetApp Trident ， ONTAP 和 NFS 协议的 Anthos Ready 认证，为容器提供动态持久存储。</block>
  <block id="6de80120fa9469d052fc37775d89d5ca" category="doc">WP-7337 ：《裸机上的 Anthos 》</block>
  <block id="3f4b17e041e63192875c654812122484" category="paragraph">NetApp 公司 Alan Cowles 和 Nikhil M Kulkarni</block>
  <block id="3e2875179d9d16600aa48cbb428cefbb" category="paragraph">NetApp 和 Google Cloud 之间的关系已有多年， NetApp 首次通过 Cloud Volumes ONTAP 和 Cloud Volumes Service 为 Google Cloud 推出云数据服务。然后，我们对 NetApp HCI 平台进行了验证，使其能够与内部环境中部署的 Google Cloud Anthos 结合使用，这是一种基于虚拟机管理程序的混合多云 Kubernetes 解决方案，部署在 VMware vSphere 上。然后， NetApp 通过了 NetApp Trident ， ONTAP 和 NFS 协议的 Anthos Ready 认证，为容器提供动态持久存储。</block>
  <block id="edb5855aa73d26775d73760286fad940" category="paragraph">现在， Anthos 可以直接安装在客户环境中的裸机服务器上，这为客户提供了一个额外的选项，可以在不使用虚拟机管理程序的情况下将 Google Cloud 扩展到其本地数据中心。此外，通过利用 NetApp ONTAP 存储操作系统和 NetApp Trident 的功能，您可以通过为容器集成永久性存储来扩展平台的功能。</block>
  <block id="8310f10ba877c17b561c1119aa03a750" category="paragraph">通过这种组合，您可以充分发挥服务器，存储和网络的全部潜能，并获得 Google Cloud 提供的支持，服务级别，每月计费和按需灵活性。由于您使用的是自己的硬件，网络和存储，因此您可以直接控制应用程序的规模，安全性和网络延迟，还可以利用裸机上的 Anthos 实现托管和容器化应用程序的优势。</block>
  <block id="5cb451e1c66a533348d9c913d8c630e3" category="inline-link-macro">接下来：解决方案概述。</block>
  <block id="7133ec6c94c3cb3dd5d77dce10f8fd70" category="paragraph"><block ref="7133ec6c94c3cb3dd5d77dce10f8fd70" category="inline-link-macro-rx"></block></block>
  <block id="eed1ab12478f3384bfca66e2b382aefc" category="doc">使用 NetApp ONTAP 部署 Red Hat OpenShift 虚拟化</block>
  <block id="7dc3a10e876dbab2b177f35c0b436f3a" category="list-text">Red Hat OpenShift 集群（ 4.6 版之后的版本），安装在具有 RHCOS 工作节点的裸机基础架构上</block>
  <block id="b5762731ee8c7a3d9a7ce9abe3804cf0" category="list-text">OpenShift 集群必须通过安装程序配置的基础架构（ IPI ）进行安装</block>
  <block id="7ed0bc09bfa62b64806b6b5c2f4378c7" category="list-text">部署计算机运行状况检查以保持虚拟机的 HA</block>
  <block id="43b1ab0e04b8f87e603cc790967d2886" category="list-text">NetApp ONTAP 集群</block>
  <block id="d4c321b9edd8d817bdc7ca442e71e3af" category="list-text">在 ONTAP 集群上配置了 SVM 的 Trident 后端</block>
  <block id="cfcf3a62902e36f3d966271cc090b65c" category="list-text">对 Red Hat OpenShift 集群的集群管理员访问</block>
  <block id="af91af16b4791d61bb2e9206807a658d" category="list-text">对 NetApp ONTAP 集群的管理员访问权限</block>
  <block id="e281839ef9ef6cb1eadcc2aa7d6d63be" category="list-text">安装了 tridentctl 和 oc 工具并将其添加到 $path 中的管理工作站</block>
  <block id="314f04ff1024e623d43e0cda9a9df410" category="paragraph">由于 OpenShift 虚拟化由 OpenShift 集群上安装的操作员管理，因此会增加内存， CPU 和存储的开销，在规划集群的硬件要求时必须考虑这些开销。请参见文档<block ref="f9421eaa4175c3e9f421a9acaf6f00d6" category="inline-link-rx"></block> 有关详细信息：</block>
  <block id="be51a7d8687b0a6254a274c1e0100052" category="paragraph">或者，您也可以通过配置节点放置规则来指定一组 OpenShift 集群节点，以托管 OpenShift 虚拟化操作员，控制器和 VM 。要为 OpenShift 虚拟化配置节点放置规则，请按照文档进行操作<block ref="325820076f9012df5bb7261c397a527f" category="inline-link-rx"></block>。</block>
  <block id="a805b74dbb589c916a1ebf0e08601665" category="paragraph">对于支持 OpenShift 虚拟化的存储， NetApp 建议使用一个专用 StorageClass ，以便从特定 Trident 后端请求存储，而该后端又由专用 SVM 提供支持。这样就可以在 OpenShift 集群上为基于 VM 的工作负载提供的数据方面保持多租户级别。</block>
  <block id="adb787dc1bae0d1c8dee5bd61d49c235" category="inline-link-macro">下一步：通过操作员部署。</block>
  <block id="6166597c75dc82b2cc8c50a0d5d74400" category="paragraph"><block ref="6166597c75dc82b2cc8c50a0d5d74400" category="inline-link-macro-rx"></block></block>
  <block id="4c37a5afd480a0042f69d7628cadd57d" category="summary">借助 NetApp 在 Red Hat OpenShift 上为 Kubernetes 提供高级集群管理</block>
  <block id="43288d8129021b1fe8b4bc6784e65b32" category="doc">功能：借助 NetApp 在 Red Hat OpenShift 上为 Kubernetes 提供高级集群管理</block>
  <block id="d10b633b8bd8d022c66a52d93e0ed6ce" category="section-title">集群生命周期管理</block>
  <block id="8b9449bdfc859a900fc4da7c79420145" category="paragraph">要管理不同的 OpenShift 集群，您可以创建这些集群或将其导入到高级集群管理中。</block>
  <block id="0becde0fcfda03aec9c722d042326324" category="list-text">要创建新的 OpenShift 集群，请完成以下步骤：</block>
  <block id="50dfc508091b37338da8357e63e6a405" category="image-alt">添加提供程序连接</block>
  <block id="2984cab36bd51d5446963e671e808f5d" category="image-alt">添加集群</block>
  <block id="e6d9a6b38dd36fd9870260249ba5fc1f" category="list-text">要导入现有集群，请完成以下步骤：</block>
  <block id="9a618414b83afe67c19abcf935be6dbd" category="image-alt">导入现有集群</block>
  <block id="c812d1382d834648706b3bf1e6848135" category="list-text">创建并导入多个集群后，您可以从一个控制台监控和管理这些集群。</block>
  <block id="068e5ec1cc0eaa7c2596be7eb1b40194" category="inline-link-macro">接下来：功能—应用程序生命周期管理。</block>
  <block id="0405bd6ea905b8d563fd501d933a3e51" category="paragraph"><block ref="0405bd6ea905b8d563fd501d933a3e51" category="inline-link-macro-rx"></block></block>
  <block id="3605e05aa598ff405b5edffc1bf474f1" category="summary">在使用 NetApp 的 Red Hat OpenShift 上配置多租户</block>
  <block id="13148717f8faa9037f37d28971dfc219" category="doc">验证</block>
  <block id="286c0d2f200233e63709210881b700c4" category="paragraph">要验证在上述步骤中配置的多租户架构，请完成以下步骤：</block>
  <block id="f4da6475fc7e97756adf2751840e077d" category="list-text">以项目 1 中的 OCP-project-1-user 和开发人员身份登录。</block>
  <block id="2d7fbbcee3114769610fea6ef6f4cdf0" category="list-text">检查访问权限以创建新项目。</block>
  <block id="12cdc5f68c3a0ca10544c0a57e866249" category="list-text">使用分配给 project-1 的 storageclass 在 project-1 中创建 PVC 。</block>
  <block id="145d2249af633a497182f76e714d1f2e" category="list-text">检查与 PVC 关联的 PV 。</block>
  <block id="d424ec829e7a6f56de4d74835b97103a" category="list-text">验证 PV 及其卷是否已在 NetApp ONTAP 上专用于 project-1 的 SVM 中创建。</block>
  <block id="a345b6be662b316a3b3e3cfbc7566b31" category="list-text">在 project-1 中创建 POD ，然后挂载上一步创建的 PVC 。</block>
  <block id="7b929f9e235c85c6b73ed2ee867c5514" category="list-text">检查 POD 是否正在运行以及是否已挂载卷。</block>
  <block id="8e27501b578972bd7b65468deaa482ca" category="list-text">使用分配给 project-2 的 storageclass 在 project-1 中创建 PVC 。</block>
  <block id="71bc5a6f1f0141981e0034b388233917" category="list-text">在 project-2 中创建 PVC 。</block>
  <block id="1149bf04288dfa82d0e3b713a6e66aa1" category="list-text">请确保未创建 PVC `test-vpa-project-1-sc-2` 和 `test-vpa-project-2-sc-1` 。</block>
  <block id="0d843e91c3b8f62457e19b2d32ecace3" category="list-text">在 project-2 中创建 POD 。</block>
  <block id="43700888cdcd166f379f95bd1751ae63" category="list-text">检查访问权限以创建新项目。</block>
  <block id="32579947c29f341292c3ce775140178b" category="list-text">验证对查看项目的访问权限。</block>
  <block id="9e97a1398bb4a0499bb69bf1c9e67d6a" category="list-text">检查用户是否可以在 project-1 中查看或编辑 ResourceQuotas 。</block>
  <block id="17a658c4329ed475a82d2e02c0406118" category="list-text">验证用户是否有权查看存储器。</block>
  <block id="aa177e49bfc4cc0182f57218ce6bdd4d" category="list-text">检查访问权限以描述存储器。</block>
  <block id="997cef2cfb8ccc12d8739c63e69794f3" category="list-text">验证用户的访问权限以编辑存储器库。</block>
  <block id="9eb6f7c0e27dd8274a30b43a4aee8d53" category="inline-link-macro">下一步：扩展。</block>
  <block id="acd8a990c476bd6cb45a9044361ba723" category="paragraph"><block ref="acd8a990c476bd6cb45a9044361ba723" category="inline-link-macro-rx"></block></block>
  <block id="8921c6e9843ba7487c77f4dce1467111" category="summary">NetApp Element 软件可提供模块化的可扩展性能，每个存储节点均可为环境提供有保障的容量和吞吐量。NetApp Element 系统可以在一个集群中从 4 个节点扩展到 100 个节点，并提供多种高级存储管理功能。</block>
  <block id="5d77fe4a6bb4c5e88c5c18510b3c4749" category="doc">NetApp Element ：采用 NetApp 技术的 Red Hat OpenShift</block>
  <block id="22f48c519a73ce4759edffb196331422" category="paragraph"><block ref="22f48c519a73ce4759edffb196331422" category="inline-image-macro-rx" type="image"></block></block>
  <block id="27765508a97a89684590658c3465fb70" category="inline-link">NetApp SolidFire 网站</block>
  <block id="d37eaafbb6dfb29673d63ff988ff4f41" category="paragraph">有关 NetApp Element 存储系统的详细信息，请访问<block ref="0d1d77e6774527457304fa15f73899a1" category="inline-link-rx"></block>。</block>
  <block id="bd4ffcaabbe4a4f83fbfaaa2e34dc8a3" category="section-title">iSCSI 登录重定向和自我修复功能</block>
  <block id="dbafa7c074ef7efc3c778b69c0ad31b5" category="paragraph">NetApp Element 软件利用 iSCSI 存储协议，这是在传统 TCP/IP 网络上封装 SCSI 命令的标准方式。当 SCSI 标准发生变化或以太网网络的性能提高时， iSCSI 存储协议就会受益，而无需进行任何更改。</block>
  <block id="23e6b910b28346537f5696478fffe779" category="paragraph">尽管所有存储节点都有一个管理 IP 和一个存储 IP ，但 NetApp Element 软件会为集群中的所有存储流量公布一个存储虚拟 IP 地址（ SVIP 地址）。在 iSCSI 登录过程中，存储可以响应目标卷已移至其他地址，因此无法继续协商过程。然后，主机将在不需要主机端重新配置的过程中向新地址重新发出登录请求。此过程称为 iSCSI 登录重定向。</block>
  <block id="b8603f3d585261d0005c7c5e51108d19" category="paragraph">iSCSI 登录重定向是 NetApp Element 软件集群的一个关键部分。收到主机登录请求后，节点将根据 IOPS 和卷的容量要求确定集群中应由哪个成员处理流量。卷分布在 NetApp Element 软件集群中，如果单个节点处理的卷流量过多或添加了新节点，则会重新分配这些卷。给定卷的多个副本会在阵列中分配。</block>
  <block id="772db62cf9ecb837ed4f0a91a5963492" category="paragraph">这样，如果节点发生故障后又发生卷重新分布，则除了注销和登录并重定向到新位置之外，对主机连接不会产生任何影响。通过 iSCSI 登录重定向， NetApp Element 软件集群是一种自我修复型横向扩展架构，能够无中断升级和操作。</block>
  <block id="5c8e89de2b8e6e2f103d858b59e5aca0" category="section-title">NetApp Element 软件集群 QoS</block>
  <block id="f8cd3dfe225577e230dc2699ebbbfe34" category="list-text">* 最大 IOPS* 。 NetApp Element 软件集群为特定卷提供的最大可持续 IOPS 数。</block>
  <block id="97bee3e8d0db89b2cd19eba861763e7a" category="list-text">* 安全身份验证。 * 质询握手身份验证协议（ Challenge-Handshake Authentication Protocol ， CHAP ）用于安全卷访问。轻量级目录访问协议（ Lightweight Directory Access Protocol ， LDAP ）用于安全访问集群以进行管理和报告。</block>
  <block id="3918507b16aa3cc38274c29da446d90f" category="list-text">* 卷访问组（ VAG ）。 * 也可以使用 VAG 代替身份验证，将任意数量的 iSCSI 启动程序专用 iSCSI 限定名称（ IQN ）映射到一个或多个卷。要访问 VAG 中的卷，启动程序的 IQN 必须位于该卷组允许的 IQN 列表中。</block>
  <block id="28328e0db9c18c9ada207997f806124f" category="list-text">* 租户虚拟 LAN （ VLAN ）。 * 在网络级别，使用 VLAN 可提高 iSCSI 启动程序与 NetApp Element 软件集群之间的端到端网络安全性。对于为隔离工作负载或租户而创建的任何 VLAN ， NetApp Element 软件会创建一个单独的 iSCSI 目标 SVIP 地址，该地址只能通过特定 VLAN 进行访问。</block>
  <block id="5fec85270e969240cc769f429b9c8cdc" category="list-text">启用了 VRF 的 VLAN 。 * 为了进一步支持数据中心的安全性和可扩展性，您可以使用 NetApp Element 软件为任何租户 VLAN 启用类似 VRF 的功能。此功能增加了以下两项关键功能：</block>
  <block id="fca8436836d48525b8d98babbfd68518" category="list-text">通过 * L3 路由到租户 SVIP 地址。 * 此功能，您可以将 iSCSI 启动程序置于与 NetApp Element 软件集群不同的网络或 VLAN 上。</block>
  <block id="eaea554ececf5b64515f0833c56b3de4" category="list-text">* IP 子网重叠或重复。 * 此功能可用于向租户环境添加模板，从而可以从同一 IP 子网为每个租户 VLAN 分配 IP 地址。此功能对于扩展和保留 IP 空间非常重要的服务提供商环境非常有用。</block>
  <block id="c08531651ee4977d5020da1b84003631" category="section-title">企业级存储效率</block>
  <block id="6893566c26b28e197cebdefdcc6af3ae" category="list-text">* 重复数据删除。 * 系统仅存储唯一的 4 K 块。任何重复的 4K 块都会自动与已存储的数据版本关联。数据位于块驱动器上，并使用 NetApp Element 软件 Helix 数据保护进行镜像。此系统可显著减少系统中的容量消耗和写入操作。</block>
  <block id="2e5dd3a69ccb3f04d7814fc742318204" category="list-text">* 压缩。 * 数据写入 NVRAM 之前，会实时执行数据压缩。数据会进行压缩，以 4 k 块的形式存储，并在系统中保持压缩状态。这种压缩可显著减少集群中的容量消耗，写入操作和带宽消耗。</block>
  <block id="215de8162cb5ac909005881f92812fb0" category="list-text">* 精简配置。 * 此功能可在需要时提供适当数量的存储，从而消除因过度配置卷或未充分利用卷而导致的容量消耗。</block>
  <block id="95f1b89c8e9c330fcfdc8ec84633bfe6" category="list-text">* Helix.* 单个卷的元数据存储在元数据驱动器上，并复制到二级元数据驱动器以实现冗余。</block>
  <block id="da9c9b2b4164632e569069fe1e7c53ee" category="admonition">Element 专为自动化而设计。所有存储功能均可通过 API 使用。这些 API 是 UI 用于控制系统的唯一方法。</block>
  <block id="ec22e01e7cd5087ef746b3db5852da6e" category="doc">扩展：添加更多项目</block>
  <block id="0e4136a9f4ad3204c07db26d3c28a546" category="paragraph">在多租户配置中，使用存储资源添加新项目需要进行额外配置，以确保不会违反多租户要求。要在多租户集群中添加更多项目，请完成以下步骤：</block>
  <block id="c8acb1fa89b1ec9d78799a2dd4aa8b59" category="list-text">以存储管理员身份登录到 NetApp ONTAP 集群。</block>
  <block id="d0ed0d7b81278233c852e4a0d8aa123b" category="list-text">导航到 `Storage -&gt; Storage VM` ，然后单击 `Add` 。创建一个专用于 project-3 的新 SVM 。此外，还可以创建 vsadmin 帐户来管理 SVM 及其资源。</block>
  <block id="5790e2b8b367726e78500054d959d6f7" category="image-alt">创建 SVM 以进行扩展</block>
  <block id="b0c67e9a89c7ece3169ab5849bb0e411" category="list-text">以集群管理员身份登录到 Red Hat OpenShift 集群。</block>
  <block id="c9e86337c7483c8d45e5e535829d2163" category="list-text">创建新项目。</block>
  <block id="46c82384780a492254c43d461363d9ac" category="list-text">为 project-3 创建开发人员角色。</block>
  <block id="21ac9e9bbb2cfc707143311f4601af1c" category="admonition">本节中提供的角色定义只是一个示例。必须根据最终用户要求定义开发人员角色。</block>
  <block id="8efa8222e644f71e636f98917439566d" category="list-text">在 project-3 中为开发人员创建 RoleBinding. 将开发人员项目 3 角色绑定到 project-3 中的相应组（ OCP-project-3 ）。</block>
  <block id="e1f01c3341da15c9079bf5996c059811" category="list-text">以存储管理员身份登录到 Red Hat OpenShift 集群</block>
  <block id="2ca2d57f42208b6e7e9026b491595f41" category="list-text">创建 Trident 后端并将其映射到专用于 project-3 的 SVM 。NetApp 建议使用 SVM 的 vsadmin 帐户将后端连接到 SVM ，而不是使用 ONTAP 集群管理员。</block>
  <block id="c4dcda95616fac9215b5dac3cde37220" category="admonition">在此示例中，我们使用的是 ontap-NAS 驱动程序。使用相应的驱动程序根据使用情形创建后端。</block>
  <block id="8628ed29313534f54f01e0da36e66ab7" category="admonition">我们假定 Trident 已安装在 Trident 项目中。</block>
  <block id="55da75937cfedfe97c220c1e9d556d84" category="list-text">为 project-3 创建存储类，并将其配置为使用专用于 project-3 的后端存储池。</block>
  <block id="6efdcf6ed405066371d23375541816a1" category="list-text">创建 ResourceQuota 以限制项目 3 中的资源，从而从专用于其他项目的存储库请求存储。</block>
  <block id="1dea1d57247580b530335ec2d484f8a5" category="list-text">在其他项目中修补 ResourceQuotas ，以限制这些项目中的资源从专用于项目 3 的存储库访问存储。</block>
  <block id="31fd0c2c8d388a4cd2c6459234743476" category="section-title">可观察性</block>
  <block id="7a6ccefec75a946583cffdd0a8a47e09" category="image-alt">可观察性主页</block>
  <block id="4a973ae1a908770e354f949d3c0592f8" category="image-alt">观察 Pod</block>
  <block id="8a373f777de729c082b5be2d80b7eca6" category="image-alt">观察节点</block>
  <block id="2ececa2c251a851a85e976daae558c81" category="image-alt">观察集群</block>
  <block id="a883982d5f8961021329c238318d4e2b" category="inline-link-macro">接下来：功能—创建资源。</block>
  <block id="5ca146f2101c14a961df161060f86cb9" category="paragraph"><block ref="5ca146f2101c14a961df161060f86cb9" category="inline-link-macro-rx"></block></block>
  <block id="4e42a1e911325b5048e50f7b5ea73d1f" category="section-title">VM 实时迁移</block>
  <block id="09e113cd46b4487f140ee07899ea3359" category="image-alt">VM 实时迁移架构</block>
  <block id="660b7fa756d01df7c4338afb9050abb1" category="paragraph">要创建绑定到具有共享 ReadWriteMany 访问权限的 PVC 的 VM ，请执行以下操作：</block>
  <block id="416d6e9d0df33a74dd38603be60453c1" category="list-text">选择所需的操作系统，然后单击下一步。假设选定操作系统已配置了启动源。</block>
  <block id="e1b595d3037639bdea165dde4b1f3906" category="list-text">在 Review and Create 窗格中，选择要在其中创建 VM 的项目并提供 VM 详细信息。确保选择了要克隆的启动源，并使用为选定操作系统分配的相应 PVC 从 CD-ROM 启动。</block>
  <block id="998a8df469c318f9cd606b44664cea5d" category="list-text">单击自定义虚拟机，然后单击存储。</block>
  <block id="ef44ba6bf4a3e677b41b361628554b88" category="image-alt">使磁盘 rwx 可访问</block>
  <block id="2ae6b586f76075c7d71faff7ba9d2a41" category="list-text">单击 Review 并确认，然后单击 Create Virtual Machine 。</block>
  <block id="18c830e61a7a92c60804118ef362933c" category="paragraph">要手动将虚拟机迁移到 OpenShift 集群中的另一个节点，请完成以下步骤。</block>
  <block id="cc58a226305ad2362de0317c1fd8261b" category="list-text">对于要迁移的虚拟机，单击省略号，然后单击迁移虚拟机。</block>
  <block id="b5839595a4132807edfc858d9f6d90ad" category="list-text">当消息弹出时，单击迁移进行确认。</block>
  <block id="d0f501bd9588700bc91fe10b7d3f761a" category="admonition">如果 evictionStrategy 设置为 LiveMigrate ，则在将原始节点置于维护模式时， OpenShift 集群中的 VM 实例会自动迁移到另一节点。</block>
  <block id="ca77161ad6ca11bca347f347b181c25f" category="inline-link-macro">接下来：工作流： VM 克隆。</block>
  <block id="294f8e986041208286bb2300b191a2ff" category="paragraph"><block ref="294f8e986041208286bb2300b191a2ff" category="inline-link-macro-rx"></block></block>
  <block id="68d13ef3d87e892878a6e6cbb44d1f21" category="doc">Red Hat OpenShift Deployment on RHV ：采用 NetApp 的 Red Hat OpenShift</block>
  <block id="5e217c79c499978721e658f868053d3f" category="inline-link-macro">接下来：追加信息：采用 NetApp 技术的 Red Hat OpenShift 。</block>
  <block id="d2fb587a433995783f0688b22359272d" category="paragraph"><block ref="d2fb587a433995783f0688b22359272d" category="inline-link-macro-rx"></block></block>
  <block id="91286d4add9b720fd5ff3bb121e12b2f" category="paragraph">本文档概述了如何使用适用于 Kubernetes 的开源存储编排程序 NetApp Trident 在裸机平台上配置和验证 NetApp ONTAP 存储平台以及 Google Cloud 的 Anthos ，以便为有状态应用程序容器部署和管理永久性存储。</block>
  <block id="122aacda8785e42ca8fd7bd6ebce84f8" category="summary">VMware vSphere 是一个虚拟化平台，用于集中管理 ESXi 虚拟机管理程序上运行的大量虚拟化服务器和网络。</block>
  <block id="68bc8529d7c57946fe13e6b3399ee287" category="inline-link">VMware vSphere 网站</block>
  <block id="80888e73d00a224bebfc22e8e4539b6d" category="paragraph">有关 VMware vSphere 的详细信息，请参见<block ref="8e822bbeb5824c0a05189bf9ff98da5c" category="inline-link-rx"></block>。</block>
  <block id="cb4d59b9004b7c584811a3d656f78bc5" category="paragraph">VMware vSphere 可提供以下功能：</block>
  <block id="cfb123c76f1c7a506310e1162d7ae235" category="paragraph"><block ref="cfb123c76f1c7a506310e1162d7ae235" category="inline-image-macro-rx" type="image"></block></block>
  <block id="19c939070c0b6ebbb52e1e0119b15301" category="section-title">网络设计</block>
  <block id="f1744781b12c15ad3b748bea44d9582b" category="section-title">VLAN 要求</block>
  <block id="e75b582a8823d532f6022b43ac209538" category="paragraph">VMware vSphere 上的 Red Hat OpenShift 旨在通过使用虚拟局域网（ VLAN ）在逻辑上隔离不同用途的网络流量。此配置可以进行扩展，以满足客户需求，或者为特定网络服务提供进一步隔离。下表列出了在 NetApp 验证解决方案时实施解决方案所需的 VLAN 。</block>
  <block id="05808f0e86c04c2a062c2e041f9e0827" category="cell">VLAN ID</block>
  <block id="3c8c5d8387f173924ffeb2bf88084dba" category="cell">管理物理节点和 IPMI</block>
  <block id="c61d980d5248923d65a5dfe7f8818011" category="cell">VM 网络</block>
  <block id="fc221309746013ac554571fbd180e1c8" category="cell">181</block>
  <block id="c846a1f843522d592b784a66368abed3" category="cell">ONTAP NFS 的存储网络</block>
  <block id="6cdd60ea0045eb7a6ec44c54d29ed402" category="cell">184</block>
  <block id="5e6094f6f2176409f469ee445fcf3f50" category="cell">适用于 ONTAP iSCSI 的存储网络</block>
  <block id="eecca5b6365d9607ee5a9d336962c534" category="cell">185.</block>
  <block id="45cf0331a91fdc3679a78fdd8f7c60a7" category="cell">管理 ESXi 节点， vCenter Server ， ONTAP Select</block>
  <block id="e8e0dd181e4ee545195120626098bfba" category="cell">3480</block>
  <block id="11967d5f57969ea4713204eace8fbf4e" category="cell">适用于 NetApp Element iSCSI 的存储网络</block>
  <block id="3fb04953d95a94367bb133f862402bce" category="cell">3481</block>
  <block id="c87f7de78a1912f53050e58df90e1445" category="cell">用于虚拟子系统迁移的网络</block>
  <block id="b7fede84c2be02ccb9c77107956560eb" category="cell">3482</block>
  <block id="35b5078b5953437a59ffd4f77c464800" category="section-title">网络基础架构支持资源</block>
  <block id="0bad9231e1bf61bc343a986739f155c1" category="paragraph">在部署 OpenShift 容器平台之前，应具备以下基础架构：</block>
  <block id="447cb4a01965e3df01476db3576e0399" category="list-text">（可选）带内管理网络和 VM 网络的出站 Internet 连接。</block>
  <block id="a181412a291a7d0ae8a71300abf746b8" category="section-title">生产部署的最佳实践</block>
  <block id="0f19aa91cffca51fd061e34dee1e5c79" category="paragraph">本节列出了企业在将此解决方案部署到生产环境之前应考虑的几个最佳实践。</block>
  <block id="bd690c49b77b8274786240fa94d9d880" category="section-title">将 OpenShift 部署到至少包含三个节点的 ESXi 集群</block>
  <block id="9dc31e1598f94b9476a025632cee3e19" category="section-title">配置虚拟机和主机关联性</block>
  <block id="9934283c0bf98610b4be1803b9ad3430" category="inline-link">vSphere 6.7 文档：使用 DRS 关联性规则</block>
  <block id="291f24f63dc31f9f921b09c567fc963f" category="paragraph">要配置相关性组，请参见<block ref="4b14049244eae7b3d11ef8e44785dd4e" category="inline-link-rx"></block>。</block>
  <block id="ed3ecd4254cc054c70ddee702d7ed519" category="section-title">使用自定义安装文件进行 OpenShift 部署</block>
  <block id="7b65abec68958867d7dd5f43b3b06e08" category="inline-link">Red Hat OpenShift 通过自定义在 vSphere 上安装集群</block>
  <block id="f5b3b6b5d5a71b2934abd61ddb561ce2" category="inline-link-macro">接下来： NetApp 存储概述。</block>
  <block id="dd2c34a46e688e4fd1c53e1a8d8af1d0" category="paragraph"><block ref="dd2c34a46e688e4fd1c53e1a8d8af1d0" category="inline-link-macro-rx"></block></block>
  <block id="a0e01d06503f271c1de7acc0acd01733" category="doc">NVA-1160 ：采用 NetApp 技术的 Red Hat OpenShift</block>
  <block id="4711a0fd2fa3c3625080f399e5261ecd" category="paragraph">采用 NetApp 解决方案的 Red Hat OpenShift 旨在为客户提供卓越的价值，其使用情形如下：</block>
  <block id="44815e873492015d6a8ab6362de8da6c" category="list-text">使用 IPI （安装程序配置的基础架构）在裸机上， Red Hat OpenStack Platform ， Red Hat 虚拟化和 VMware vSphere 上轻松部署和管理 Red Hat OpenShift 。</block>
  <block id="03bb323d052d033ea0b5b2cab17f1219" category="list-text">将企业级容器和虚拟化工作负载的强大功能与 Red Hat OpenShift 相结合， Red Hat OpenShift 可虚拟部署在 OSP ， RHV 或 vSphere 上，也可通过 OpenShift 虚拟化部署在裸机上。</block>
  <block id="932ba7da1da9b241bfc5ddbb10e49da2" category="paragraph">企业越来越多地采用 DevOps 实践来创建新产品，缩短发布周期并快速添加新功能。由于容器和微服务本身的灵活性，它们在支持 DevOps 实践方面发挥着至关重要的作用。但是，在企业环境中以生产规模实施 DevOps 会带来自身的挑战，并对底层基础架构提出一些要求，例如：</block>
  <block id="43ee156205e7f74e32a02d556537fe90" category="list-text">堆栈中所有层的高可用性</block>
  <block id="b59807af538b77fee1fb3d1d3c81f9a8" category="list-text">易于部署过程</block>
  <block id="2748d7182409b378e23f62724be778fd" category="list-text">无中断运行和升级</block>
  <block id="1a4af279491c72d7c36b4c9767ae712f" category="list-text">API 驱动的可编程基础架构，可跟上微服务灵活性的步伐</block>
  <block id="8ca11bfd783c730b04c0c77fc7574406" category="list-text">能够同时运行虚拟化和容器化工作负载</block>
  <block id="0111977afdb7fa380f806edbe8438163" category="list-text">能够根据工作负载需求独立扩展基础架构</block>
  <block id="42c487483a8feee3cc0365881a4cc265" category="paragraph">Red Hat OpenShift with NetApp 认可这些挑战，并提供了一个解决方案，通过在客户选择的数据中心环境中实施完全自动化的 RedHat OpenShift IPI 部署，帮助解决每个问题。</block>
  <block id="fd89bb4228981d3b22187eb451421cd6" category="section-title">Red Hat OpenShift 容器平台</block>
  <block id="70240bc0debcb080aa08dbd9e7b9a525" category="paragraph">有关详细信息，请访问 OpenShift 网站<block ref="35d5a627a33ce17e4bd125258d59fbc4" category="inline-link-rx"></block>。</block>
  <block id="aa4193984de53d2a6d8fcc2d77c09bda" category="paragraph">有关详细信息，请访问 NetApp 网站<block ref="95da63d781dead5af723667a3f69096a" category="inline-link-rx"></block>。</block>
  <block id="e7e767d7c0e58b16e57d3ab16150db80" category="cell">技术</block>
  <block id="7b02ea300aef2e0bff0d7f6111053284" category="cell">NetApp ONTAP</block>
  <block id="601712ded7a71b0842984ad41b6aad39" category="cell">12.3</block>
  <block id="765bb3744268ca0de607208bfdc8a37a" category="cell">存储编排</block>
  <block id="b175d08ac03101cd40f077848d436e1f" category="cell">Red Hat OpenShift</block>
  <block id="7cf4fea896dee61293d729d9985621d7" category="cell">容器编排</block>
  <block id="2454407b9991c6c5f417a2feb8ea7970" category="cell">4.6 EUS ， 4.7</block>
  <block id="9c4e78a1b7e7b4981aced1e10d037c6d" category="cell">Red Hat OpenStack 平台</block>
  <block id="de45aa336111dfa1825c54726464307c" category="cell">私有云基础架构</block>
  <block id="3c5825a0d4bdb85c67182ef89bc9c7eb" category="cell">16.1</block>
  <block id="f9a97ed4e88eeab44f2693afa0eb2089" category="cell">4.4</block>
  <block id="9c295b8302ac546bb93a346b68089f50" category="cell">6.7U3.</block>
  <block id="aacc79f269e716528198eabb064b216b" category="inline-link-macro">接下来： Red Hat OpenShift 概述。</block>
  <block id="62857c2aca7eeae2c1f44104c3fc7dde" category="paragraph"><block ref="62857c2aca7eeae2c1f44104c3fc7dde" category="inline-link-macro-rx"></block></block>
  <block id="1be465260df7c846768e06c988594a6a" category="paragraph">要了解有关本文档中所述信息的更多信息，请查看以下网站：</block>
  <block id="e690fa655ec589e6d0abb58164d5ccfd" category="doc">追加信息：采用 NetApp 技术的 Red Hat OpenShift</block>
  <block id="6f4e4d9fbe846fd8bf7decf7dcffbd63" category="list-text">NetApp 文档</block>
  <block id="1497398039e94eb756be9a3cff5649c7" category="inline-link"><block ref="1497398039e94eb756be9a3cff5649c7" category="inline-link-rx"></block></block>
  <block id="f2d3084aa0f70da5e15757ee3292cda7" category="paragraph"><block ref="f2d3084aa0f70da5e15757ee3292cda7" category="inline-link-rx"></block></block>
  <block id="21b11dbf6ab3c6d36a76f280fe8ec75d" category="list-text">Red Hat OpenShift 文档</block>
  <block id="74201863479cf5c9b89330c920283301" category="inline-link"><block ref="74201863479cf5c9b89330c920283301" category="inline-link-rx"></block></block>
  <block id="3e10ed3875c45f9dc9064324660fc2b1" category="paragraph"><block ref="3e10ed3875c45f9dc9064324660fc2b1" category="inline-link-rx"></block></block>
  <block id="06fd33ae9f869a89e860634ec94b9793" category="list-text">Red Hat OpenStack Platform 文档</block>
  <block id="647d438a62673b6a6c9830682f6bc128" category="inline-link"><block ref="647d438a62673b6a6c9830682f6bc128" category="inline-link-rx"></block></block>
  <block id="705a39bc1a12c50103a847633c3f7493" category="paragraph"><block ref="705a39bc1a12c50103a847633c3f7493" category="inline-link-rx"></block></block>
  <block id="8d79e9650a1f62f89d77743225e203c0" category="list-text">Red Hat 虚拟化文档</block>
  <block id="a1bcc86cb4d53b458f0fdad36c20a0c0" category="inline-link"><block ref="a1bcc86cb4d53b458f0fdad36c20a0c0" category="inline-link-rx"></block></block>
  <block id="6d6038842b529e3d97aa9a8a9d81d866" category="paragraph"><block ref="6d6038842b529e3d97aa9a8a9d81d866" category="inline-link-rx"></block></block>
  <block id="4666fc2f640685636f115f8b2b6b8ce0" category="list-text">VMware vSphere 文档</block>
  <block id="9c2eeeb25388391ff52a45ac0567fa73" category="inline-link"><block ref="9c2eeeb25388391ff52a45ac0567fa73" category="inline-link-rx"></block></block>
  <block id="71aa41fc980571d5a324adedae614f9c" category="paragraph"><block ref="71aa41fc980571d5a324adedae614f9c" category="inline-link-rx"></block></block>
  <block id="639813d9aa126816c3f9e9de2a45ce17" category="paragraph">OSP 是一种基础架构即服务（ Infrastructure-as-a-Service ， IaaS ）云，由一组控制服务实施，用于管理计算，存储和网络资源。环境可通过基于 Web 的界面进行管理，管理员和用户可以控制，配置和自动化 OpenStack 资源。此外，还通过广泛的命令行界面和 API 为 OpenStack 基础架构提供便利，为管理员和最终用户提供全面的自动化功能。</block>
  <block id="737c38dd225185612ac8fa148ae9583e" category="inline-link">Red Hat OpenStack Platform 网站</block>
  <block id="19fb2090425be8f78441166e8f1d8d6f" category="paragraph">有关 OSP 的详细信息，请参见<block ref="9c79780f89511512bd5bf54ce21d04de" category="inline-link-rx"></block>。</block>
  <block id="e2ab8aafc6151adfa655ffd5d2425e7d" category="section-title">OpenStack 服务</block>
  <block id="f5fdcf6d68d437c59942a35d79b8c7b1" category="paragraph"><block ref="f5fdcf6d68d437c59942a35d79b8c7b1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c2ba7e785c49050f48da9aacc45c2b85" category="cell">服务</block>
  <block id="b5a7adde1af5c87d7fd797b6245c2a39" category="cell">Description</block>
  <block id="2938c7f7e560ed972f8a4f68e80ff834" category="cell">信息板</block>
  <block id="85fb7708d989f936cb51ef53a8af080f" category="cell">Horizon</block>
  <block id="d5a9efab6df20a9e132b774795775dde" category="cell">基于 Web 浏览器的信息板，用于管理 OpenStack 服务。</block>
  <block id="c9c5c65fb4af9cf90eb99b3b84424189" category="cell">身份</block>
  <block id="1ce2096c300f78bbb8389ca2603e6dd9" category="cell">Keystone</block>
  <block id="91c68681aadba9c0e8308f7d0b3cc416" category="cell">用于身份验证和授权 OpenStack 服务以及管理用户，项目和角色的集中式服务。</block>
  <block id="88fac409baf592beb25e285d8663edcb" category="cell">中子</block>
  <block id="0283e46fd80198d441eb742b88cf96f1" category="cell">在 OpenStack 服务的接口之间提供连接。</block>
  <block id="a7173cc5cdd0e31df00cd34f058b1d33" category="cell">Cinder</block>
  <block id="597dab3a2b3c74e3c266b2f65ec28619" category="cell">管理虚拟机（ VM ）的永久性块存储卷。</block>
  <block id="6e747c4965495f2e26bf17e647aa0083" category="cell">Nova</block>
  <block id="f13c04e9c49274cd31bd8092c8f50304" category="cell">管理和配置计算节点上运行的 VM 。</block>
  <block id="be53a0541a6d36f6ecb879fa2c584b08" category="cell">图像</block>
  <block id="10ec3a0506fab7073649337ca7be7979" category="cell">概览</block>
  <block id="d9ff71ddcb6bbbe8ad48ae8b678369d4" category="cell">用于存储 VM 映像和卷快照等资源的注册表服务。</block>
  <block id="ae832e9b5bda2699db45f3fa6aa8c556" category="cell">Swift</block>
  <block id="41c380458dfcdc118ef573a2d98c6acb" category="cell">允许用户存储和检索文件和任意数据。</block>
  <block id="aa96a21412def0d916f43b639424f8e4" category="cell">遥测</block>
  <block id="8fb4b5e28f192236eaa9e4972f810dbd" category="cell">Ceilmeter</block>
  <block id="ed622b9c64858cc66a01c58893b5d39d" category="cell">提供对云资源使用情况的衡量指标。</block>
  <block id="d9cc1f843ea62c12a3e59afbbdc2f9ce" category="cell">流程编排</block>
  <block id="7d486371bb65b0633535ceba4189d8ed" category="cell">热</block>
  <block id="abaa6ebae60b74638c54a43f3341db8e" category="cell">基于模板的流程编排引擎，支持自动创建资源堆栈。</block>
  <block id="5ddbd3cec63b14995bf6a5823b692de7" category="paragraph">采用 NetApp 解决方案的 Red Hat OpenShift 使用两个数据交换机以 25 Gbps 的速度提供主数据连接。它还使用两个额外的管理交换机，这些交换机以 1 Gbps 的速度提供连接，用于存储节点的带内管理以及 IPMI 功能的带外管理。</block>
  <block id="c546b983b02d8654c5b245147d99dcf0" category="paragraph">采用 NetApp 的 Red Hat OpenShift 旨在通过使用虚拟局域网（ VLAN ）在逻辑上隔离不同用途的网络流量。此配置可以进行扩展，以满足客户需求，或者为特定网络服务提供进一步隔离。下表列出了在 NetApp 验证解决方案时实施解决方案所需的 VLAN 。</block>
  <block id="414b4843c124e72b43bccf2948a53a41" category="cell">用于管理物理节点和 IPMI 服务的网络具有讽刺意味。</block>
  <block id="e8cbca2d71bd2aeff622a07b4ffad6c2" category="cell">用于控制器节点直接映射卷以支持 Swift 等基础架构服务的网络。</block>
  <block id="757b505cfd34c64c85ca5b5690ee5293" category="cell">201</block>
  <block id="e103375dfc18f23e4fc072903e894fe9" category="cell">存储 Cinder</block>
  <block id="0bdfa6389eb47674a02f6049f342785d" category="cell">用于将块卷直接映射和附加到环境中部署的虚拟实例的网络。</block>
  <block id="854d6fae5ee42911677c739ee1734486" category="cell">202</block>
  <block id="772d9a23b79ccb504fa0590644934c3b" category="cell">内部 API</block>
  <block id="e44f5f63400b0975b884dc2980ee3a61" category="cell">用于通过 API 通信， RPC 消息和数据库通信在 OpenStack 服务之间进行通信的网络。</block>
  <block id="34ed066df378efacc9b924ec161e7639" category="cell">301.</block>
  <block id="6252d0571760e3d285e2e41a2b1e7743" category="cell">租户</block>
  <block id="577bcc914f9e55d5e4e4f82f9f00e7d4" category="cell">302.</block>
  <block id="cdc529b5e11a981e4597195c5f1c53b5" category="cell">OpenStack 对象存储（ Swift ）使用此网络在参与的副本节点之间同步数据对象。代理服务充当用户请求与底层存储层之间的中间接口。代理接收传入请求并找到所需的副本以检索请求的数据。</block>
  <block id="11b9842e0a271ff252c1903e7132cd68" category="cell">303.</block>
  <block id="5214f1e2490f3878e307fd6f81f9f77f" category="cell">PXE</block>
  <block id="16d856c79e739181f35adfe5b791c650" category="cell">OpenStack Director 在具有讽刺意味的裸机配置服务中提供 PXE 启动，用于编排 OSP Overcloud 的安装。</block>
  <block id="966b6dfb6b0819cc10644bea3115cf20" category="cell">3484</block>
  <block id="b206a1b4ea1097761f78e8876f6da779" category="cell">外部</block>
  <block id="dfeb9598fbfb97cc6bbcc0aff2c785d6" category="cell">3485</block>
  <block id="32223320445c4cf46444e40ebde18b7e" category="cell">提供对系统管理功能的访问，例如 SSH 访问， DNS 流量和网络时间协议（ NTP ）流量。此网络还充当非控制器节点的网关。</block>
  <block id="ab4f2b5fd96ca65349119909c1eada2d" category="cell">3486</block>
  <block id="f2260a90424f1d412334d1b3467abd22" category="list-text">至少一个 DNS 服务器，可提供完整的主机名解析。</block>
  <block id="d70672769aa84f2a999291a645e67355" category="list-text">至少三个 NTP 服务器，这些服务器可以使解决方案中的服务器保持时间同步。</block>
  <block id="478a3526bd6097c6b7a330fd6aae410e" category="list-text">（可选） OpenShift 环境的出站 Internet 连接。</block>
  <block id="9a14258452ea5da50d562e08e5b9291c" category="section-title">将 OpenShift 部署到至少包含三个计算节点的 OSP 私有云</block>
  <block id="7a595c63e0ebc069af3da46e3d1c8fee" category="section-title">配置虚拟机 / 主机关联性</block>
  <block id="9c0af999b760fac2aa82d9d105fa7a7e" category="paragraph">默认情况下，服务器组最多可管理 10 个虚拟实例的放置。可以通过更新 Nova 的默认配额来修改此设置。</block>
  <block id="8aea038e418642b1735131358c24a866" category="inline-link">如何为 OpenStack 实例配置关联性和反关联性？</block>
  <block id="d90e13a49726d9175649113d81f4caa7" category="paragraph">要配置相关性组，请参见<block ref="f5b5be16184c5362a1ca218025e91581" category="inline-link-rx"></block>。</block>
  <block id="47a822101acb11c74a4877a3d0b77093" category="inline-link">Red Hat OpenShift 通过自定义在 OpenStack 上安装集群</block>
  <block id="e38be1dc20a2b358b917b60fe2677b39" category="doc">NetApp Element iSCSI 配置</block>
  <block id="27ef1192cd037c8978195be045fa054e" category="list-text">编辑 `endpoint` 行上的用户，密码和 MVIP 值。</block>
  <block id="d1b7418d19df7144a98dfde725db068c" category="list-text">编辑 `SVIP` 值。</block>
  <block id="dd7f72325e6f60ea7163b071e4d5e2cc" category="list-text">安装好此后端文件后，运行以下命令创建第一个后端。</block>
  <block id="d8f188eff4c16fa87dd87f51db847f73" category="list-text">创建后端后，您接下来必须创建一个存储类。与后端一样，可以在 sample-inputs 文件夹中为环境编辑一个示例存储类文件。将其复制到工作目录并进行必要的编辑，以反映所创建的后端。</block>
  <block id="eb22c0d536e50f388da6dfd91ba4c0b6" category="list-text">必须对此文件进行的唯一编辑是，为新创建的后端存储驱动程序的名称定义 `backendType` 值。另请注意 name-field 值，稍后必须引用该值。</block>
  <block id="3ae96676432caea17595a22525bd9660" category="admonition">此文件中定义了一个名为 `FSType` 的可选字段。在 iSCSI 后端，可以将此值设置为特定的 Linux 文件系统类型（ XFS ， ext4 等），也可以删除此值，以便 OpenShift 决定要使用的文件系统。</block>
  <block id="7183f006fd74d941c838f003380f3f46" category="list-text">运行 `oc` 命令以创建存储类。</block>
  <block id="71cb54ab06aa16af27a0ec2157972648" category="list-text">创建存储类后，您必须创建第一个永久性卷请求（ PVC ）。此外，还可以在 sample-inputs 中使用一个示例 `pva-basic 。 yaml` file 来执行此操作。</block>
  <block id="afc499f2f95809cedce5c8922067065f" category="list-text">必须对此文件进行的唯一编辑是，确保 `storageClassName` 字段与刚刚创建的字段匹配。可以根据要配置的工作负载的需要进一步自定义 PVC 定义。</block>
  <block id="02eb9c3824b0b8eae9723daa7a2912d1" category="list-text">发出 `oc` 命令创建 PVC 。根据所创建的后备卷的大小，创建可能需要一些时间，因此您可以在该过程完成后进行观察。</block>
  <block id="de59be6e44d20d9dd12412571b745c5f" category="section-title">应用程序生命周期管理</block>
  <block id="fa19c463235a810b3a93333d6ee51d6c" category="paragraph">要创建应用程序并在一组集群中对其进行管理，</block>
  <block id="6b41f909eb299f214abfb15580583456" category="image-alt">创建应用程序</block>
  <block id="bcb3e5b76f189a87ea350550f86de83f" category="list-text">安装应用程序组件后，此应用程序将显示在列表中。</block>
  <block id="d70fc022d09a33f4044c81cd670a71b6" category="image-alt">应用程序列表</block>
  <block id="672d326704c3be4bebf6c816a48495e7" category="list-text">现在，可以从控制台监控和管理此应用程序。</block>
  <block id="0787d747a308cc786b50363313ccf714" category="inline-link-macro">接下来：功能—监管和风险。</block>
  <block id="f4c7ffc89dab76d5a6dccad54114c204" category="paragraph"><block ref="f4c7ffc89dab76d5a6dccad54114c204" category="inline-link-macro-rx"></block></block>
  <block id="9d312703c40c2d87b835076063682d59" category="summary">NetApp ONTAP 是一款功能强大的存储软件工具，具有直观的图形用户界面，具有自动化集成功能的 REST API ，基于 AI 的预测性分析和更正操作，无中断硬件升级和跨存储导入等功能。</block>
  <block id="48235fec2427a785c4a09d7150fc11fc" category="inline-link">NetApp ONTAP 网站</block>
  <block id="e65027864c84a42fc0799d878ffa0005" category="paragraph">有关 NetApp ONTAP 存储系统的详细信息，请访问<block ref="be9464a7a83e639a645a801fff2791d9" category="inline-link-rx"></block>。</block>
  <block id="4e3f9a03501932f914205c4ad0e682ea" category="list-text">* NetApp FlexClone 。 * 可根据 Snapshot 副本即时配置 NetApp 卷的完全可读写副本。</block>
  <block id="96f474208f638efbbd85fac3a46a2ed4" category="paragraph">有关 ONTAP 的详细信息，请参见<block ref="eb1214e3900207403ada8715d3d4c764" category="inline-link-rx"></block>。</block>
  <block id="81bf516f5b38ea41d503a2670a9dc144" category="paragraph"><block ref="81bf516f5b38ea41d503a2670a9dc144" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e80842c9211bc376ee42d583c70ae408" category="section-title">NetApp 平台</block>
  <block id="5a69e0f8303b40f9f4d56038d3d260c9" category="section-title">NetApp AFF/FAS</block>
  <block id="d4c312c600a949fb72436c2d10568a90" category="paragraph">这两个系统均由 NetApp ONTAP 数据管理软件提供支持。 NetApp 数据管理软件是业内最先进的数据管理软件，可提供高度可用的云集成简化存储管理，可提供您的 Data Fabric 所需的企业级速度，效率和安全性。</block>
  <block id="992c24be8f66e4259b38ce763c115251" category="paragraph">有关 NetApp AFF/FAS 平台的详细信息，请单击<block ref="629508ef5a91b5835f70894f34eed424" category="inline-link-rx"></block>。</block>
  <block id="b008e805d13d953ddb5cbb220d8ef9b6" category="paragraph">ONTAP Select 是 NetApp ONTAP 的软件定义部署，可以部署到您环境中的虚拟机管理程序上。它可以安装在 VMware vSphere 或 KVM 上，并提供基于硬件的 ONTAP 系统的完整功能和体验。</block>
  <block id="3f0bbee5abf3eed060d4147cb0d060b9" category="paragraph">有关 ONTAP Select 的详细信息，请单击<block ref="7c1424ed7be035c303f12b0763e38ece" category="inline-link-rx"></block>。</block>
  <block id="117bdbda976fe8b3212bc3b6327a0a1b" category="section-title">Cloud Volumes ONTAP</block>
  <block id="f0f4b6de2040d7dc57e7f4f6baee7ec3" category="paragraph">NetApp Cloud Volumes ONTAP 是 NetApp ONTAP 的云部署版本，可部署在多个公有云中，包括 Amazon AWS ， Microsoft Azure 和 Google Cloud 。</block>
  <block id="c7fa0d52c3955385f084d0e67c59f963" category="paragraph">有关 Cloud Volumes ONTAP 的详细信息，请单击<block ref="75c9b0075008bbe40ac851ad7f6dda6a" category="inline-link-rx"></block>。</block>
  <block id="14a9bacc4b197037f54eb0c4c7e1970c" category="paragraph">因此，企业需要寻找在这两种环境中都能获得最佳性能的解决方案，例如，允许他们在一个集群中运行所有工作负载，同时为每个工作负载提供专用集群的优势。</block>
  <block id="cde9f9f8fcae0cdc6624895868803d60" category="list-text">通过共享集群资源，降低资本支出和运营支出</block>
  <block id="943a49720e6c85fa9692af2a5ebd8829" category="list-text">降低运营和管理开销</block>
  <block id="f51a58b3ab19c778652fcff9dd39ca55" category="list-text">保护工作负载免受安全违规交叉影响</block>
  <block id="181cfddfdb055879df4d55323a14c473" category="list-text">保护工作负载，防止因资源争用而导致性能意外下降</block>
  <block id="d463f48696e58e286e9c0d594169b395" category="inline-link-macro">接下来：架构。</block>
  <block id="4fbbd2f5b2a8e82447aa1b841b2a70d0" category="paragraph"><block ref="4fbbd2f5b2a8e82447aa1b841b2a70d0" category="inline-link-macro-rx"></block></block>
  <block id="25d77826c061b84a0c036f43e02aa129" category="doc">安装 OpenShift 虚拟化：采用 NetApp 的 Red Hat OpenShift</block>
  <block id="8fe3ce682e72fe87e56e5b11e1c2cd36" category="inline-link-macro">接下来：追加信息：采用 NetApp 技术的 Red Hat OpenShift</block>
  <block id="5dbd13d011610e2b4d57bd4ca3fd685f" category="paragraph"><block ref="5dbd13d011610e2b4d57bd4ca3fd685f" category="inline-link-macro-rx"></block></block>
  <block id="06fdae3f02fee5cbe172f1574564c925" category="doc">适用于 Kubernetes 的高级集群管理：采用 NetApp 的 Red Hat OpenShift</block>
  <block id="30c15b5a84f4fb26cd25b38dc787b22d" category="paragraph">随着容器化应用程序从开发过渡到生产，许多组织需要使用多个 Red Hat OpenShift 集群来支持该应用程序的测试和部署。同时，企业通常会在 OpenShift 集群上托管多个应用程序或工作负载。因此，每个组织最终都会管理一组集群，因此 OpenShift 管理员必须面对在跨多个内部数据中心和公有云的一系列环境中管理和维护多个集群这一额外挑战。为了应对这些挑战， Red Hat 推出了适用于 Kubernetes 的高级集群管理。</block>
  <block id="a7516c278242a08b85090e24cbf67218" category="paragraph">Red Hat Advanced Cluster Management for Kubernetes 作为 Red Hat OpenShift 集群的附加组件进行安装，并使用此集群作为其所有操作的中央控制器。此集群称为集线器集群，它会为用户提供一个管理平面以连接到高级集群管理。通过高级集群管理控制台导入或创建的所有其他 OpenShift 集群均由集线器集群管理，称为受管集群。它会在受管集群上安装一个名为 Kluterlet 的代理，将其连接到中心集群，并处理与集群生命周期管理，应用程序生命周期管理，可观察性和安全合规性相关的不同活动请求。</block>
  <block id="b1000f23e43dfac19b53c74d7ebe66c8" category="image-alt">ACM 架构</block>
  <block id="a376445fd812a7fa27714e6b11bc6163" category="paragraph">有关详细信息，请参见文档<block ref="50c0dc50e188cf3a7847d9a813fd829e" category="inline-link-rx"></block>。</block>
  <block id="2bd77ae4e72f37c837a2da8cfa83e210" category="inline-link-macro">接下来：部署前提条件。</block>
  <block id="a99137a02f570225903b02b175e289a4" category="paragraph"><block ref="a99137a02f570225903b02b175e289a4" category="inline-link-macro-rx"></block></block>
  <block id="7c613b296892d4712b9041d3081282f8" category="summary">借助 NetApp 在 Red Hat OpenShift 上为 Kubernetes 提供高级集群管理。</block>
  <block id="78e1aefe2bbb2518f1156636e761e479" category="paragraph">要在 OpenShift 集群上安装适用于 Kubernetes 的高级集群管理，请完成以下步骤：</block>
  <block id="b17056cdbd9ec695d4348e1ad799ace4" category="list-text">选择一个 OpenShift 集群作为中心集群，并使用 cluster-admin 权限登录到该集群。</block>
  <block id="2e5d3941e033e96d5317cc2bbd1da914" category="image-alt">ACM 磁贴</block>
  <block id="cc5a9dd5971b8369354db684e5dbfe2b" category="image-alt">ACM 图块详细信息</block>
  <block id="72b342ddabad6a9ec11df82389c40b88" category="image-alt">安装 ACM 操作员磁贴</block>
  <block id="11458c333e4903e54ca46f822ba6a3b6" category="list-text">等待操作员安装完成。</block>
  <block id="64524f91c2fdfcd54b4bbcab35392908" category="image-alt">正在安装 ACM 操作员</block>
  <block id="e0d84ec6a5b8f92909a7a3bef11455c1" category="image-alt">ACM 操作员 MulticlusterHub</block>
  <block id="344f0cb43d1b2e7a719bea808fe7c5bf" category="image-alt">创建多集群中心屏幕</block>
  <block id="851548d1ad843a23609f325e8b54e72d" category="image-alt">安装了含 ACM 的操作员</block>
  <block id="c7aa79f0c31ac15d728ee47c7e6eaee2" category="image-alt">多集群集线器就绪</block>
  <block id="f761fad3f1c25e94d5f46ebd9e23a901" category="image-alt">ACM 控制台路由</block>
  <block id="4488e277b96ae08def5eb77c2d8c6e74" category="inline-link-macro">接下来：功能—集群生命周期管理。</block>
  <block id="8a4d50965d8a3c708bdb16a716d64246" category="paragraph"><block ref="8a4d50965d8a3c708bdb16a716d64246" category="inline-link-macro-rx"></block></block>
  <block id="482f4dddd14a12f4ece48aef54de313c" category="summary">Red Hat OpenShift 容器平台将开发和 IT 运营统一到一个平台上，以便在内部和混合云基础架构中一致地构建，部署和管理应用程序。Red Hat OpenShift 基于开源创新和行业标准构建，其中包括 Kubernetes 和 Red Hat Enterprise Linux CoreOS ，这是全球领先的企业级 Linux 版本，专为基于容器的工作负载而设计。</block>
  <block id="e68e90b5707502c9f2fc1361ac071b3d" category="paragraph">Red Hat OpenShift 容器平台将开发和 IT 运营统一到一个平台上，以便在内部和混合云基础架构中一致地构建，部署和管理应用程序。Red Hat OpenShift 基于开源创新和行业标准构建，其中包括 Kubernetes 和 Red Hat Enterprise Linux CoreOS ，这是全球领先的企业级 Linux 版本，专为基于容器的工作负载而设计。OpenShift 是 Cloud 原生计算基金会（ CNCF ）认证 Kubernetes 计划的一部分，可为容器工作负载提供可移植性和互操作性。</block>
  <block id="b2b7104a419a54dcb2763bddc6a0a47c" category="section-title">Red Hat OpenShift 提供以下功能：</block>
  <block id="d383250f88949df87bac7768b697ccb6" category="list-text">* 自助式配置。 * 开发人员可以使用最常用的工具快速轻松地按需创建应用程序，同时操作人员可以完全控制整个环境。</block>
  <block id="df45d857ed72e8e5ed370c6fdfd1e305" category="list-text">* 永久性存储。 * 通过为永久性存储提供支持， OpenShift 容器平台允许您同时运行有状态应用程序和云本机无状态应用程序。</block>
  <block id="29ee9790b817110f2303080d5b295946" category="list-text">* 持续集成和持续开发（ CI/CD ）。 * 此源代码平台可大规模管理构建和部署映像。</block>
  <block id="a0f0997dded25d9aa9c767f29c17c249" category="list-text">* 开源标准。 * 除了其他开源技术之外，这些标准还采用了用于容器编排的开放式容器计划（ OCI ）和 Kubernetes 。您不受限于特定供应商的技术或业务路线图。</block>
  <block id="7dc3d12ecda66373091607ba18ef4434" category="list-text">* CI/CD 管道。 * OpenShift 可为 CI/CD 管道提供即装即用的支持，以便开发团队可以自动执行应用程序交付流程的每个步骤，并确保对应用程序代码或配置所做的每一项更改都能得到执行。</block>
  <block id="95e4c6a8e27cc92068d97ef795477714" category="list-text">* 基于角色的访问控制（ Role-Based Access Control ， RBAC ）。 * 此功能可对团队和用户进行跟踪，以帮助组织大型开发人员组。</block>
  <block id="d565eddf8e07af916519ec07f8712204" category="list-text">* 自动化构建和部署。 * OpenShift 允许开发人员选择构建容器化应用程序，或者让平台使用应用程序源代码甚至二进制文件构建容器。然后，该平台会根据为这些应用程序定义的特征在整个基础架构中自动部署这些应用程序。例如，为了使资源符合第三方许可证的要求，应分配的资源数量以及应部署在基础架构上的什么位置。</block>
  <block id="4fe0bdfd5a2ae34ba1a93860fd91d2fd" category="list-text">* 环境一致。 * OpenShift 可确保为开发人员配置的环境以及应用程序在整个生命周期内从操作系统到库，运行时版本（例如 Java runtime ）， 甚至是正在使用的应用程序运行时（例如 Tomcat ），以便消除因环境不一致而产生的风险。</block>
  <block id="64f8957eb1a3bb6a1e9ebd391e76925a" category="list-text">* 配置管理。 * 配置和敏感数据管理内置在平台中，可确保为应用程序提供一致且与环境无关的应用程序配置，无论使用哪种技术构建应用程序或部署哪种环境。</block>
  <block id="5efb308bdb8052c1aa3fe8333f459fe5" category="list-text">* 应用程序日志和指标。 * 快速反馈是应用程序开发的一个重要方面。OpenShift 集成式监控和日志管理可为开发人员提供即时指标，使他们能够研究应用程序在发生变更时的行为方式，并能够在应用程序生命周期中尽早修复问题。</block>
  <block id="16c321ec2744799f0acef92ce84d06ca" category="paragraph"><block ref="16c321ec2744799f0acef92ce84d06ca" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fe8c2f8039053e077a0ca678496b72aa" category="section-title">Red Hat OpenShift 的部署方法</block>
  <block id="ec55e5ffb2376dada4b2eb066c1fd9fd" category="section-title">Red Hat OpenShift 的 IPI 安装</block>
  <block id="a91a379e59fea6610134af1efa3dfe87" category="paragraph">OpenShift 的安装程序配置基础架构（ IPI ）部署涉及以下高级步骤：</block>
  <block id="d1befa03c79ca0b84ecc488dea96bc68" category="inline-link">网站</block>
  <block id="a07879007b1202a533ff3ef18bc0d197" category="list-text">访问 Red Hat OpenShift<block ref="36af4d1b80928d398e137421c95a1013" category="inline-link-rx"></block> 并使用您的 SSO 凭据登录。</block>
  <block id="cc66c30273a9be504b88d3239e65516b" category="paragraph"><block ref="cc66c30273a9be504b88d3239e65516b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="86b43786316d35748685c4f7abc4145b" category="paragraph"><block ref="86b43786316d35748685c4f7abc4145b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7586dbf5f3ac1a66383f6c201a17a341" category="inline-link">安装说明</block>
  <block id="c9a2aa5906b4dad4a982c3a9c51d31f3" category="list-text">按照<block ref="04512308a1627dc41acfeed51ef16ba3" category="inline-link-rx"></block> 由 Red Hat 提供，用于部署到您选择的环境。</block>
  <block id="220887aee59c37fa79fc366cba7dad4e" category="section-title">经过 NetApp 验证的 OpenShift 部署</block>
  <block id="aa9095c5ba77e3549672e5c4fae1fedc" category="inline-link-macro">裸机上的 OpenShift</block>
  <block id="fecab6277bc7322982f127ce83dee308" category="list-text"><block ref="fecab6277bc7322982f127ce83dee308" category="inline-link-macro-rx"></block></block>
  <block id="5f6a8f3661e7319797d4eab6792350e6" category="inline-link-macro">基于 Red Hat OpenStack 平台的 OpenShift</block>
  <block id="ff3de63c4917b45d20525986d5b29962" category="list-text"><block ref="ff3de63c4917b45d20525986d5b29962" category="inline-link-macro-rx"></block></block>
  <block id="f88eb30a75027b557910958c7306cb4e" category="inline-link-macro">基于 Red Hat 虚拟化的 OpenShift</block>
  <block id="92fb5c16a9f212d49c0c5fb48ebc9144" category="list-text"><block ref="92fb5c16a9f212d49c0c5fb48ebc9144" category="inline-link-macro-rx"></block></block>
  <block id="2772c11e552b243e60a34490c4174ff9" category="inline-link-macro">VMware vSphere 上的 OpenShift</block>
  <block id="83fc4dbe543f82a9e50bc1bd4c74fb70" category="list-text"><block ref="83fc4dbe543f82a9e50bc1bd4c74fb70" category="inline-link-macro-rx"></block></block>
  <block id="943dbb8750d636d9918af903ac016c0e" category="summary">NetApp 拥有多个存储平台，这些平台符合 Trident Storage Orchestrator 的要求，可为 Red Hat OpenShift 上部署的应用程序配置存储。</block>
  <block id="0186ffea1bd2c7ff6458a3a619d01ea2" category="paragraph"><block ref="0186ffea1bd2c7ff6458a3a619d01ea2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3cc957c67b836ddc993931d8d2253032" category="list-text">NetApp Cloud Volumes Service （ AWS/GCP ）和 Azure NetApp Files 可在云中提供基于文件的存储。</block>
  <block id="faad8e024544c328d584c28118fb4102" category="list-text">NetApp Element 存储系统可在高度可扩展的环境中提供基于块的（ iSCSI ）用例。</block>
  <block id="85a240011ba49404bf70606e37c41c96" category="paragraph">以下页面介绍了有关已在 Red Hat OpenShift with NetApp 解决方案中验证的 NetApp 存储系统的追加信息：</block>
  <block id="3a374bfcdd912b5071f863e2b9f0eefa" category="list-text"><block ref="3a374bfcdd912b5071f863e2b9f0eefa" category="inline-link-macro-rx"></block></block>
  <block id="70b44fe3d3567f3f2a5ccd67ff8ac852" category="list-text"><block ref="70b44fe3d3567f3f2a5ccd67ff8ac852" category="inline-link-macro-rx"></block></block>
  <block id="eeaa3ef2816f113fd1978b036eefc4a4" category="doc">解决方案验证和使用情形：采用 NetApp 的 Red Hat OpenShift</block>
  <block id="9e766e668731b912ea84be747f0d6b4b" category="paragraph">此页面上提供的示例包括解决方案验证以及采用 NetApp 的 Red Hat OpenShift 的用例。</block>
  <block id="6f60a8e202d6d4f297230695ffa9c1a6" category="inline-link-macro">部署具有永久性存储的 Jenkins CI/CD 管道</block>
  <block id="20b131c747c2ab8c4c617107b04dfe76" category="list-text"><block ref="20b131c747c2ab8c4c617107b04dfe76" category="inline-link-macro-rx"></block></block>
  <block id="e85b6a5686bf01c916e1c3b442e8db44" category="inline-link-macro">在使用 NetApp 的 Red Hat OpenShift 上配置多租户</block>
  <block id="29a3155f4e27ac61f0e6d1e00866c981" category="list-text"><block ref="29a3155f4e27ac61f0e6d1e00866c981" category="inline-link-macro-rx"></block></block>
  <block id="781cf19a6329e508987456098cde8c79" category="list-text"><block ref="781cf19a6329e508987456098cde8c79" category="inline-link-macro-rx"></block></block>
  <block id="ddb9608f0f25d56d00a539a63333efa0" category="list-text"><block ref="ddb9608f0f25d56d00a539a63333efa0" category="inline-link-macro-rx"></block></block>
  <block id="0b41ceffa053ec5210732b1f8d0f0c5d" category="inline-link-macro">接下来：视频和演示。</block>
  <block id="232b127190e97018e70ee81d28e36117" category="paragraph"><block ref="232b127190e97018e70ee81d28e36117" category="inline-link-macro-rx"></block></block>
  <block id="7cd95c816f8a04ff858a857e3e5a484d" category="cell">20.04</block>
  <block id="d7ac58512991ed45f3abecbfbb9cddf1" category="cell">容器编排</block>
  <block id="4d7f7f28f54da25e8386b6cfbcbda861" category="summary">此解决方案的当前部署已通过两个严格的验证流程，这两个流程均使用 Google 云团队提供的工具。</block>
  <block id="9fc7e91d0cfa196bee652e5b3ab8991b" category="doc">解决方案验证</block>
  <block id="1bee22d71e0dda5649b05ac8074a7994" category="paragraph">此解决方案的当前部署已通过两个严格的验证流程，这两个流程均使用 Google 云团队提供的工具。这些验证包括以下部分测试：</block>
  <block id="9ce4b6121b9169f9a57e370bc063e43a" category="list-text">合作伙伴验证 Anthos 就绪平台：</block>
  <block id="b490ae83108f0a60d2d464f37aed5b33" category="list-text">确认裸机平台服务上的所有 Anthos 均已安装并运行。</block>
  <block id="132b0b7921ef1247c2db8a06ebb68fa0" category="list-text">将裸机集群上的物理 Anthos 从四个辅助节点缩减为三个，然后再缩减为四个。</block>
  <block id="5d80842c7c4c549fffd35b71989523c6" category="list-text">创建并删除自定义命名空间。</block>
  <block id="bd4534ff45d2d6e71d15c4133153f039" category="list-text">创建一个 nginx Web 服务器部署，通过增加副本数量来扩展该部署。</block>
  <block id="afdfab7c351a97a8f8e386c8c07eead0" category="list-text">为 nginx 应用程序创建一个入口，并通过 curling the index.html 验证连接。</block>
  <block id="e093cbb18731dc9a857dff2a5a9c5b0d" category="list-text">成功清理所有测试套件活动并将集群恢复为预测试状态。</block>
  <block id="6c91e0c5fc919c3ee9adc7909c3331b7" category="list-text">合作伙伴验证 Anthos 就绪存储：</block>
  <block id="5aacb1c1d8ec3130c7bfc91d7678968c" category="list-text">创建具有永久性卷声明的部署。</block>
  <block id="1f8b95da3c7377c3616667d09bfbcf96" category="list-text">使用 NetApp Trident 从 NetApp ONTAP 配置和附加请求的永久性卷。</block>
  <block id="5fac429b30f448d8149f93a83869e87f" category="list-text">验证永久性卷的断开和重新连接功能。</block>
  <block id="5a1ed343aaa28f6d14745016b7c06cf7" category="list-text">验证从节点上的其他 Pod 对永久性卷进行多连接只读访问。</block>
  <block id="7c14d31217a85dc93c1505315501ef24" category="list-text">验证脱机卷大小调整操作。</block>
  <block id="b6ab6f9d0bc58a79facf618d65db092c" category="list-text">验证此永久性卷是否在集群扩展操作期间不受影响。</block>
  <block id="4b774a4819b60036fd16dae7b1618fe7" category="inline-link-macro">接下来：总结。</block>
  <block id="fa789d11a4863ab2ab7271940566105a" category="paragraph"><block ref="fa789d11a4863ab2ab7271940566105a" category="inline-link-macro-rx"></block></block>
  <block id="3a724344bfc1b086a678d66814f20dd7" category="summary">本节介绍了与 Jenkins 部署持续集成和持续交付或部署管道以验证解决方案运行的步骤。</block>
  <block id="b830a759b7bbee23da50f11979fb8f27" category="doc">部署采用永久性存储的 Jenkins CI/CD 管道：采用 NetApp 的 Red Hat OpenShift</block>
  <block id="ff587ce314d6f90660779e9d75cafe53" category="paragraph">本节介绍了与 Jenkins 部署持续集成 / 持续交付或部署（ CI/CD ）管道以验证解决方案运行的步骤。</block>
  <block id="9eb8af4dd2c3557a24b914601b6ae465" category="section-title">创建 Jenkins 部署所需的资源</block>
  <block id="93b3852e5c67975dd33b1769b24a4a85" category="paragraph">要创建部署 Jenkins 应用程序所需的资源，请完成以下步骤：</block>
  <block id="9fd493573e73cb0e5e55e97306249596" category="list-text">创建一个名为 Jenkins 的新项目。</block>
  <block id="5690195262fb589b6021733b4a5a4432" category="paragraph"><block ref="5690195262fb589b6021733b4a5a4432" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f9db9f308c8ed7f5d0ed0851d8d605cb" category="paragraph"><block ref="f9db9f308c8ed7f5d0ed0851d8d605cb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9272f40a21ca3dad814c4e3886b40776" category="section-title">使用永久性存储部署 Jenkins</block>
  <block id="939a7b51bfb262627185af768c3c1024" category="paragraph">要使用永久性存储部署 Jenkins ，请完成以下步骤：</block>
  <block id="bc5512ef7a17a0cfb58cb1ede30a6137" category="paragraph"><block ref="bc5512ef7a17a0cfb58cb1ede30a6137" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6baa4bd25992de2d17278ade0d3090ad" category="list-text">单击 `实例化模板` 。</block>
  <block id="949381804bf1e16ca04ba9ac5fabc6a4" category="paragraph"><block ref="949381804bf1e16ca04ba9ac5fabc6a4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c7b4a6da6ab2733552de61d67b38a39e" category="list-text">默认情况下，系统会填充 Jenkins 应用程序的详细信息。根据您的要求，修改参数并单击创建。此过程将创建支持 OpenShift 上的 Jenkins 所需的所有资源。</block>
  <block id="cc9a211dac876290bd6ed039cf1afdcf" category="paragraph"><block ref="cc9a211dac876290bd6ed039cf1afdcf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="274c247b7612630006e3d87d5ed5d46f" category="paragraph"><block ref="274c247b7612630006e3d87d5ed5d46f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2ebe03c4d2a2f4464e9ec333d6fd7c17" category="paragraph"><block ref="2ebe03c4d2a2f4464e9ec333d6fd7c17" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8dd2ba6f6eb648ee9a5d6e1b6aa96114" category="paragraph"><block ref="8dd2ba6f6eb648ee9a5d6e1b6aa96114" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9359288fc248319fa9acef62e4686d1c" category="paragraph"><block ref="9359288fc248319fa9acef62e4686d1c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="00713894c16827219fd5ab50c5fc3794" category="paragraph"><block ref="00713894c16827219fd5ab50c5fc3794" category="inline-image-macro-rx" type="image"></block></block>
  <block id="24f99be3c7033ab08c3baec1cdf32702" category="paragraph"><block ref="24f99be3c7033ab08c3baec1cdf32702" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3b6fc174a3fad5c396413febe1d4ba50" category="list-text">在创建项目页面上，输入所选名称，选择管道，然后单击确定。</block>
  <block id="b8c544e8c9e5bd5fa17dce065fd5dcc9" category="paragraph"><block ref="b8c544e8c9e5bd5fa17dce065fd5dcc9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dedbf53849830e8b275b69e9b98159ce" category="paragraph"><block ref="dedbf53849830e8b275b69e9b98159ce" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1d11f84feef51515ab9fdaafb3f02f3a" category="paragraph"><block ref="1d11f84feef51515ab9fdaafb3f02f3a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="43d9a2fc4d89e82c869a466778811ab3" category="paragraph"><block ref="43d9a2fc4d89e82c869a466778811ab3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8d256abce3dbdfed83e337956e42f60f" category="list-text">在此示例中，我们使用永久性存储部署了 Jenkins 。要支持 Jenkins 构建，请创建 PVC 。导航到 "Storage"&gt;"Persistent Volume Claim " ，然后单击 "Create Persistent Volume Claim " 。选择已创建的存储类，确保永久性卷声明名称是 Jenkins ，选择适当的大小和访问模式，然后单击创建。</block>
  <block id="da33835bff86a0b0c8be6c67dcf677bb" category="list-text">实例化 Pod 后，导航到 "Networking" （网络） &gt;"routes" （路由）。要打开 Jenkins 网页，请单击为 Jenkins 路由提供的 URL 。</block>
  <block id="0191ad3b841f8db403ec4749d571eb4b" category="list-text">单击 Build now ，在准备，构建和测试阶段触发开发。完成整个构建过程并显示构建结果可能需要几分钟的时间。</block>
  <block id="b04b355d9fc6a2e23965649ebdd0aa31" category="list-text">只要代码发生任何更改，就可以重新构建管道来修补新版本的软件，从而实现持续集成和持续交付。单击 Recent Changes 以跟踪与先前版本相比的更改。</block>
  <block id="f913f3c8b073438c23eb36c9cf8237ac" category="section-title">创建虚拟机</block>
  <block id="71dd19ec5a595517b0b57750ad1a6568" category="paragraph">VM 是有状态部署，需要使用卷来托管操作系统和数据。使用 CNV 时，由于 VM 作为 Pod 运行，因此 VM 由 NetApp ONTAP 上通过 Trident 托管的 PV 提供支持。这些卷作为磁盘连接并存储整个文件系统，包括虚拟机的启动源。</block>
  <block id="e01cb9126428f7417091e42362dcb6cb" category="image-alt">创建 VM 架构</block>
  <block id="51f24796fdd958a7a4ab9fb9a1086c9a" category="paragraph">要在 OpenShift 集群上创建虚拟机，请完成以下步骤：</block>
  <block id="9b992d4161d9af3e77a9c4e35f9d7652" category="image-alt">为 VM 创建启动源</block>
  <block id="fe46fcd3bb2eadd55896f6a4e9af5b05" category="list-text">如果选定操作系统已配置启动源，则可以跳过上一步。</block>
  <block id="c119644bb97e69cc47555d48ff5ead07" category="list-text">如果要自定义虚拟机，请单击 "Customize Virtual Machine" 并修改所需的参数。</block>
  <block id="8b2c60e63de0927cca5bd9401cdd4647" category="list-text">单击 Create Virtual Machine 以创建虚拟机；此操作将在后台生成相应的 Pod 。</block>
  <block id="ba7734e1db4ae3c0a25330f01ced054d" category="paragraph">从 URL 或注册表为模板或操作系统配置启动源时，它会在 `OpenShift-virtual-os-images` 项目中创建一个 PVC ，并将 KVM 子映像下载到 PVC 。您必须确保模板 PVC 具有足够的已配置空间，以容纳相应操作系统的 KVM 子映像。然后，使用任何项目中的相应模板创建这些 PVC 时，这些 PVC 会克隆并作为根磁盘附加到虚拟机中。</block>
  <block id="2188a3011c4ccaa5490bcaca14a05579" category="inline-link-macro">接下来：工作流： VM 实时迁移。</block>
  <block id="a997d50e238a53b066824f32046c10ab" category="paragraph"><block ref="a997d50e238a53b066824f32046c10ab" category="inline-link-macro-rx"></block></block>
  <block id="4d4480c77d84881f85763c51fb0a0ebb" category="doc">视频和演示：采用 NetApp 的 Red Hat OpenShift</block>
  <block id="f64f81d4393ab1fc9545c35c8eb9f74d" category="paragraph">以下视频演示了本文档中介绍的一些功能：</block>
  <block id="762a14964ee1713d320b8beefaf55b17" category="inline-link-macro">视频：安装 OpenShift 虚拟化—采用 NetApp 的 Red Hat OpenShift</block>
  <block id="5ac70ba9dc4ef90bfb3a829919c8044d" category="list-text"><block ref="5ac70ba9dc4ef90bfb3a829919c8044d" category="inline-link-macro-rx"></block></block>
  <block id="aad993afc3c78a3a38ae471fa2ae1060" category="inline-link-macro">视频：使用 OpenShift 虚拟化部署虚拟机—采用 NetApp 的 Red Hat OpenShift</block>
  <block id="1c9dc04aa9e0e0aaf52a33af61d8d630" category="list-text"><block ref="1c9dc04aa9e0e0aaf52a33af61d8d630" category="inline-link-macro-rx"></block></block>
  <block id="051525dd6e814133d477a1812a4164c2" category="inline-link-macro">视频：基于 Red Hat 虚拟化部署的适用于 Red Hat OpenShift 的 NetApp HCI</block>
  <block id="817cc3ec794caf508075034f1fa54315" category="list-text"><block ref="817cc3ec794caf508075034f1fa54315" category="inline-link-macro-rx"></block></block>
  <block id="4bb047f8c530785002e490ef17fa725e" category="doc">从何处查找追加信息</block>
  <block id="c12328be87e4d79e79b3db80bd6ff03f" category="list-text">NetApp ONTAP 文档中心</block>
  <block id="0b98c026ddf9e406d439373d2dab724b" category="inline-link"><block ref="0b98c026ddf9e406d439373d2dab724b" category="inline-link-rx"></block></block>
  <block id="63d46b0efa85a58196faf13e5aa20d7d" category="paragraph"><block ref="63d46b0efa85a58196faf13e5aa20d7d" category="inline-link-rx"></block></block>
  <block id="712cab3570d004ba67a47d7ff8df208b" category="inline-link"><block ref="712cab3570d004ba67a47d7ff8df208b" category="inline-link-rx"></block></block>
  <block id="a5526c10a9a8b42f6aab833b33a57eaf" category="paragraph"><block ref="a5526c10a9a8b42f6aab833b33a57eaf" category="inline-link-rx"></block></block>
  <block id="a3df86c144842761b9bcb0b540edbefe" category="inline-link"><block ref="a3df86c144842761b9bcb0b540edbefe" category="inline-link-rx"></block></block>
  <block id="8d3014f959efddffaea116898b063218" category="paragraph"><block ref="8d3014f959efddffaea116898b063218" category="inline-link-rx"></block></block>
  <block id="92637d8d513510f7c1f5bfac6e1cce9b" category="paragraph">要启用 Trident 与 NetApp ONTAP 存储系统的集成，您必须创建一个后端，以便与存储系统进行通信。</block>
  <block id="3ca99f0e09d3b1ea097a113dd72c9317" category="list-text">下载的安装归档中提供了 `sample-input` folder 层次结构中的示例后端文件。对于提供 iSCSI 的 NetApp ONTAP 系统，将 `backend-ontap-san.json` 文件复制到您的工作目录并编辑该文件。</block>
  <block id="fa346018b8222fdc195d0b73016cf5a0" category="list-text">编辑此文件中的 managementLIF ， dataLIF ， SVM ，用户名和密码值。</block>
  <block id="38ace6c607c7db13cd4cc319f9b0225b" category="list-text">安装此后端文件后，运行以下命令以创建第一个后端。</block>
  <block id="8e0bd613649f232fe1f718134898ea21" category="paragraph">要启用 Trident 与 NetApp ONTAP 存储系统的集成，您必须创建一个后端，以便与存储系统进行通信。</block>
  <block id="89441fb0b16307f49090afa2b479b9fa" category="list-text">下载的安装归档中提供了 `sample-input` folder 层次结构中的示例后端文件。对于提供 NFS 的 NetApp ONTAP 系统，将 `backend-ontap-nas.json` 文件复制到您的工作目录并编辑该文件。</block>
  <block id="87f6ff6bf74013e1dfe6df49a1cf1986" category="list-text">编辑 backendName ， managementLIF ， dataLIF ， SVM ，用户名， 和密码值。</block>
  <block id="00d6947fd6a153943286b857dcd0f339" category="admonition">此文件中定义了一个名为 `FSType` 的可选字段。可以在 NFS 后端删除此行。</block>
  <block id="648bdcd0b9a0f83d7b068dbed3c21c07" category="doc">设计注意事项</block>
  <block id="c2ffe02d76c4f089648f1647b43e4ee5" category="section-title">最佳实践</block>
  <block id="2d52bcd2e896c32a66c9fe10fed38e0f" category="inline-link-macro">接下来：硬件和软件要求</block>
  <block id="254f642527b45bc260048e30704edb39" category="doc">Configuration</block>
  <block id="44b1200b793638d4a3aebd1bee591e12" category="paragraph">对于任何多租户解决方案，任何用户都无法访问比所需更多的集群资源。因此，要在多租户配置中配置的整个资源集将在集群管理员，存储管理员和处理每个项目的开发人员之间进行划分。</block>
  <block id="1ceba10f8902735a18e8c3bb3e8a3052" category="paragraph">下表概括了不同用户要执行的不同任务：</block>
  <block id="bbbabdbe1b262f75d99d62880b953be1" category="cell">Role</block>
  <block id="ef615563c8e8ea902c7fcac3cd2c4246" category="cell">任务</block>
  <block id="064dceba374668ef0734be5f9e182682" category="cell">* 集群管理 *</block>
  <block id="e033ab3bea3b8a20afb5852070df0203" category="cell">为 storage-admin 创建 ClusterRoles 和 RoleBindings</block>
  <block id="293d08622718634a8518b6fcc6376617" category="cell">为分配对特定项目的访问权限的开发人员创建角色和角色绑定</block>
  <block id="3e97e469255cd3686174c371f50961f9" category="cell">[ 可选 ] 配置项目以在特定节点上计划 Pod</block>
  <block id="93ffd2b1215bc47cc78b020f89e922ef" category="cell">* 存储管理 *</block>
  <block id="043ab42cdcbdacc4691c26ee52ed8ccd" category="cell">在 NetApp ONTAP 上创建 SVM</block>
  <block id="be09a24f118a66330a40633e9d5ebfca" category="cell">创建 Trident 后端</block>
  <block id="55995e8c220e05b3e75252cccf5752be" category="cell">创建 StorageClasses</block>
  <block id="2a5eb41b2d7fd04d01836f89ab790852" category="cell">创建存储 ResourceQuotas</block>
  <block id="4e00898ecc4e6640083ccff8d85fbe87" category="cell">* 开发人员 *</block>
  <block id="4edd9914739183e9cb724a222261a01f" category="inline-link-macro">下一步：前提条件。</block>
  <block id="8013a47a037d25fa6d9671120cfc1ee5" category="paragraph"><block ref="8013a47a037d25fa6d9671120cfc1ee5" category="inline-link-macro-rx"></block></block>
  <block id="47dee50ad0138b8f5ca70e40e86e6c04" category="section-title">硬件要求</block>
  <block id="7ddb33edf227a18eb76201fcb9e2c9db" category="section-title">软件要求</block>
  <block id="bfd15aa26ba0ced782240c4a8b7e517e" category="cell">存储管理</block>
  <block id="59a703e67b19adc4bdb1373c25fbca94" category="inline-link-macro">下一步：部署步骤。</block>
  <block id="98f770b0af18ca763421bac22b4b6805" category="section-title">功能</block>
  <block id="2c65eb4e4300c763b9d8ffcdc45660fc" category="paragraph">要安装 OpenShift 虚拟化，请完成以下步骤：</block>
  <block id="bb761e1ed8ef4412cddb399e81488f83" category="list-text">使用 cluster-admin 访问权限登录到 Red Hat OpenShift 裸机集群。</block>
  <block id="3f4b86cf3e8a535371d3937bd126d789" category="list-text">从 "Perspective" 下拉列表中选择 "Administrator" 。</block>
  <block id="78146e6a44100deebbe276c19e6c437a" category="image-alt">OpenShift 操作员中心</block>
  <block id="016a229c1180d24870be44f7391c5678" category="list-text">选择 OpenShift 虚拟化磁贴，然后单击安装。</block>
  <block id="fe87c9ebb6d1db5af643c2101dd83c2d" category="image-alt">OpenShift 虚拟化操作员图块</block>
  <block id="d2770f20a312c7d906cf3d8a97d335a2" category="list-text">在 Install Operator 屏幕上，保留所有默认参数，然后单击 Install 。</block>
  <block id="66b5ae84d6c0a470bb131b7aeb63f734" category="image-alt">OpenShift 虚拟化操作员详细信息</block>
  <block id="5f27d84a5a158e75ab7ac4543ca7c1be" category="image-alt">OpenShift 虚拟化操作员安装</block>
  <block id="49598c5badb95e31a9894d5dc277f301" category="list-text">安装操作员后，单击 Create HyperConverged 。</block>
  <block id="f63ea68253a91a92e8afb2e42bf0fb36" category="image-alt">OpenShift 虚拟化操作员—创建超融合</block>
  <block id="0e4308133099865567bc6a19f0abcb88" category="list-text">在 Create HyperConverged 屏幕上，单击 Create ，接受所有默认参数。此步骤将开始安装 OpenShift 虚拟化。</block>
  <block id="c57b56755457ec355801b1e17915fc47" category="image-alt">OpenShift 虚拟化操作员—超融合详细信息</block>
  <block id="ee0ffac6ee8f4e224a044d95e68aa30d" category="list-text">在 OpenShift-cnv 命名空间中的所有 Pod 都变为 running 状态且 OpenShift 虚拟化操作员处于 succeeded 状态后，操作员便可随时使用了。现在，可以在 OpenShift 集群上创建 VM 。</block>
  <block id="423e88e20ace3dbca3f9d5bd3b109cef" category="image-alt">OpenShift 虚拟化操作员安装完成</block>
  <block id="46af5002087f682df1feb9b3339d1f68" category="inline-link-macro">接下来：工作流：创建 VM 。</block>
  <block id="066b9e10038ca1d47643166f151f910c" category="paragraph"><block ref="066b9e10038ca1d47643166f151f910c" category="inline-link-macro-rx"></block></block>
  <block id="50465c19760e2a5476479f1f4a464119" category="summary">采用 NetApp 技术的裸机 Anthos 提供了一个强大的平台，可通过自定义已部署的基础架构来高效运行基于容器的工作负载。</block>
  <block id="6f8b794f3246b0c1e1780bb4d4d5dc53" category="doc">结论</block>
  <block id="f887fad1ad196c388701d07189696570" category="paragraph">采用 NetApp 技术的裸机 Anthos 提供了一个强大的平台，可通过自定义已部署的基础架构来高效运行基于容器的工作负载。客户可以使用自己选择的服务器基础架构和受支持的操作系统，甚至可以在现有基础架构中部署解决方案。通过集成 NetApp ONTAP 和 NetApp Trident ，这些环境的功能和灵活性得到了显著提高，通过高效配置和管理容器的永久性存储来支持有状态应用程序工作负载。通过将 Google Cloud 的潜力扩展到由 NetApp 提供支持的数据中心，客户可以利用一个完全受支持，高度可用，易于扩展且完全受管的 Kubernetes 解决方案来开发和生产其应用程序工作负载。</block>
  <block id="40a15e6807b47955e7b7a9b1bd330b01" category="inline-link-macro">下一步：从何处查找追加信息。</block>
  <block id="3ae752a47170fdc4f7ff5ed3204c1fb5" category="paragraph"><block ref="3ae752a47170fdc4f7ff5ed3204c1fb5" category="inline-link-macro-rx"></block></block>
  <block id="86c2cc4630e619e2c08c32f54e844297" category="section-title">在多个集群上创建资源</block>
  <block id="24800112d59462f8ea9ff03f5dd456a7" category="image-alt">创建资源</block>
  <block id="67a3852a946bc539243cc1e5f8982d03" category="section-title">裸机上的 OpenShift 可提供以下功能：</block>
  <block id="096e71732ebcd1f43544a7159596cb17" category="paragraph"><block ref="096e71732ebcd1f43544a7159596cb17" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bb18861dc375756df1a31b7ed3c03f38" category="paragraph"><block ref="bb18861dc375756df1a31b7ed3c03f38" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c5a0639a1bbc3695e0ebaf4c3affe363" category="paragraph">采用 NetApp 解决方案的 Red Hat OpenShift 可通过使用虚拟局域网（ VLAN ）在逻辑上隔离不同用途的网络流量。</block>
  <block id="3d9073c9e531118eb3aff0f20647c86f" category="cell">管理裸机节点和 IPMI</block>
  <block id="44a94f76baabd05ab407f76c946326c8" category="cell">集群可用后用于 OpenShift 服务的网络</block>
  <block id="846325c36d78e7582d8bfcab277ca67a" category="cell">通过 IPI 以 PXE 启动和安装裸机节点的网络</block>
  <block id="cb8e8e87ec9c630a0a27910fe29abceb" category="summary">RHV 是一个企业级虚拟数据中心平台，运行在 Red Hat Enterprise Linux （ RHEL ）上，并使用 KVM 虚拟机管理程序。</block>
  <block id="603bc85f6f6f4d9e5095745d9252f1d3" category="inline-link">Red Hat 虚拟化网站</block>
  <block id="8a961382f0c47dc86706f0aa8bb93fb4" category="paragraph">有关 RHV 的详细信息，请参见<block ref="ac07861257bcab0c21d310fa00cb324b" category="inline-link-rx"></block>。</block>
  <block id="0178ef6806a57586f6c66dde7e0e86d2" category="list-text">* 集中管理 VM 和主机。 * 在部署中， RHV 管理器作为物理机或虚拟机（ VM ）运行，并提供一个基于 Web 的图形用户界面，用于从中央界面管理解决方案。</block>
  <block id="01b0ee840ef208c283c3f4e959aa9427" category="paragraph"><block ref="01b0ee840ef208c283c3f4e959aa9427" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2d7e48e226974692ed3f522a2baef6db" category="paragraph">RHV 上的 Red Hat OpenShift 旨在通过使用虚拟局域网（ VLAN ）在逻辑上隔离不同用途的网络流量。此配置可以进行扩展，以满足客户需求，或者为特定网络服务提供进一步隔离。下表列出了在 NetApp 验证解决方案时实施解决方案所需的 VLAN 。</block>
  <block id="3083202a936b7d0ef8b680d7ae73fa1a" category="cell">3344</block>
  <block id="7e4be32047fe5b09a23fd956cd4e82f0" category="section-title">将 OpenShift 部署到至少包含三个节点的 RHV 集群</block>
  <block id="de4e964e7be880b328384cfedd5873d9" category="paragraph">本文档中介绍的经验证的架构介绍了适用于 HA 操作的最低硬件部署，具体方法是部署两个 RHV-H 虚拟机管理程序节点，并确保采用容错配置，两个主机均可管理托管引擎，而已部署的虚拟机可在两个虚拟机管理程序之间迁移。</block>
  <block id="b98f17dd49fc6d1c2a9b58922fae2686" category="paragraph">您可以通过启用虚拟机 / 主机关联性在多个虚拟机管理程序节点之间分布 OpenShift 主节点。</block>
  <block id="df1b58247681ba5f974a572d530dbdf9" category="paragraph">关联性是一种为一组 VM 和 / 或主机定义规则的方法，用于确定这些 VM 是在组中的同一主机上运行还是在不同主机上运行。它通过创建由具有一组相同参数和条件的 VM 和 / 或主机组成的关联组来应用于 VM 。根据关联组中的 VM 是在组中的同一主机上运行，还是在不同主机上单独运行，此关联组的参数可以定义正关联性或负关联性。</block>
  <block id="5c00bc5cb1bdae240d18551e77806abd" category="inline-link">Red Hat 6.11 。关联性组文档</block>
  <block id="f38d8cd9caeb9a037c470b7d061392a0" category="paragraph">要配置相关性组，请参见<block ref="eb1587f3cb611d53dba5bde41d49122a" category="inline-link-rx"></block>。</block>
  <block id="1050f3dc9e3ee559789e3b25f2e4f77e" category="inline-link">Red Hat OpenShift 通过自定义在 RHV 上安装集群</block>
  <block id="3c438be737391744e2fed6f73c418638" category="section-title">技术要求</block>
  <block id="ff94444190436ee7694d15be2dde0f29" category="list-text">NetApp ONTAP 存储集群</block>
  <block id="b645e117fe786bf56128cde2dec3971a" category="list-text">Red Hat OpenShift 集群</block>
  <block id="0d46ef98dfe52c8d01c0c5ace93d8165" category="section-title">Red Hat OpenShift —集群资源</block>
  <block id="c4ff2177ae2f8ed9c3e5353068cf2195" category="section-title">Red Hat OpenShift —存储资源</block>
  <block id="6c7eefdca8e3859011afa00995879a32" category="inline-link-macro">下一步：配置。</block>
  <block id="0c86c0f2c0ad5b82864ef1b20a904132" category="paragraph"><block ref="0c86c0f2c0ad5b82864ef1b20a904132" category="inline-link-macro-rx"></block></block>
  <block id="114856cfc010d937269afe29138175fc" category="doc">部署采用 OpenShift 虚拟化的虚拟机：采用 NetApp 的 Red Hat OpenShift</block>
  <block id="9f9077091d74fb2c701c8c8c4a837c16" category="summary">在对此解决方案进行初始验证时， NetApp 与全球技术（ World Wide Technology ， WWT ）合作，在 WWT 的高级技术中心（ Advanced Technology Center ， ATT ）建立了一个环境。Anthos 使用 Google Cloud 提供的 bmctl 工具部署在裸机基础架构上。下一节详细介绍了用于验证的部署。</block>
  <block id="06dc93ff20817f0d5fb8a07f8e43d6cb" category="doc">部署摘要</block>
  <block id="195d9c1693fc10788ad8da5d4d9d2402" category="paragraph">采用 NetApp 解决方案的裸机上的 Anthos 是一个高可用性混合集群，其中包含三个 Anthos 控制平台节点和四个 Anthos 工作节点。</block>
  <block id="d0236eb3bd180706e0eaca7d726c66e6" category="paragraph">使用的控制面板节点是托管在机箱中的 Cisco UCS B200M3 刀片式服务器，每个节点上配置有一个虚拟网络接口卡（ vNIC ），从而可以在 Cisco UCS 平台级别进行 A/B 故障转移以实现容错。上游连接到一对 Cisco UCS 6248 互联阵列的 Cisco UCS 机箱，可提供不同的路径来分隔阵列 A 和阵列 B 上的流量这些互联阵列会上游连接到一对 Cisco Nexus 5548 数据中心交换机，这些交换机会绑定回 WWT 的核心网络。</block>
  <block id="3753f99ef321c354828532bad11422ec" category="paragraph">工作节点为 HP ProLiant DL360 节点，每个节点均运行一个支持的 Linux 分发版，用于裸机上的 Anthos ： Red Hat Enterprise Linux 8.2 ， CentOS 8.2 ， Ubuntu 20.04 LTS 或 Ubuntu 18.04 LTS 。Red Hat Enterprise Linux 8 和 CentOS 8 节点配置了在 LACP 模式下运行的 NIC 组，并通过缆线连接到两个 Nexus 9k C93180YC-FX 交换机以实现容错。Ubuntu 服务器已配置为在 LACP 模式下进行网络绑定，并已连接到同一对 Nexus 9k 交换机以实现容错。</block>
  <block id="a847089866aa2e6d9077cdc08cce930b" category="paragraph">运行 ONTAP 9.7 软件的 NetApp AFF A300 存储系统已安装并以物理方式连接到与 Anthos 工作节点相同的一对 Nexus 9k 交换机。这些网络上行链路聚合到一个接口组（ a0a ）中，并标记了相应的数据网络 VLAN ，以使工作节点能够与存储系统进行交互。创建了一个 Storage Virtual Machine （ SVM ），其中包含支持 NFS 协议并专用于 Trident 存储操作的数据 LIF ，以便为裸机集群上的 Anthos 中部署的容器提供永久性存储。这些永久性卷由 NetApp Trident 20.10 提供，该软件是完全受支持的适用于 Kubernetes 的 NetApp 开源存储编排程序的最新版本。</block>
  <block id="e5b1fecda3d68cda9e216e0e73b26dec" category="paragraph">下图展示了解决方案到机架数据中心交换机顶部的物理布线图。</block>
  <block id="aa5914d8b6d8a27fd4df86fef0c0395a" category="paragraph"><block ref="aa5914d8b6d8a27fd4df86fef0c0395a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2a7a105940efa6ed6c71004ff40b8347" category="paragraph">下图显示了在 NetApp 合作伙伴 WWT 实验室的硬件上部署和验证的解决方案逻辑视图。</block>
  <block id="ff8f4395cfa334d6d144e3a2426e7b96" category="paragraph"><block ref="ff8f4395cfa334d6d144e3a2426e7b96" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e8d3f61f51562ad245b65242dc92c0da" category="inline-link-macro">接下来：解决方案验证。</block>
  <block id="b1d15269d6e9cabdf17337c73e6a5f07" category="paragraph"><block ref="b1d15269d6e9cabdf17337c73e6a5f07" category="inline-link-macro-rx"></block></block>
  <block id="7652dcfa1608f7891f4e5c9b462354be" category="paragraph">为了应对这一挑战， Red Hat 从 OpenShift 4.6 版开始引入了 OpenShift 虚拟化（以前称为容器原生虚拟化）。通过 OpenShift 虚拟化功能，您可以在同一 OpenShift 容器平台安装中运行和管理虚拟机以及容器，从而提供混合管理功能，通过操作员自动部署和管理 VM 。除了使用 OpenShift 虚拟化在 OpenShift 中创建 VM 之外， Red Hat 还支持从 VMware vSphere ， Red Hat 虚拟化和 Red Hat OpenStack Platform 部署导入 VM 。</block>
  <block id="269bac1ed5128eacc45c06318333642a" category="image-alt">OpenShift 虚拟化</block>
  <block id="8a5bcb32f7cb878beee68d6f84b3ada7" category="paragraph">要了解有关 Red Hat OpenShift 虚拟化的详细信息，请参见相关文档<block ref="3339eb5909b80aa35681f9f3f9478c17" category="inline-link-rx"></block>。</block>
  <block id="3a86ddb85761278fa813d15edecbc2b1" category="paragraph"><block ref="3a86ddb85761278fa813d15edecbc2b1" category="inline-link-macro-rx"></block></block>
  <block id="ad8905a47eb465223ebe7acf569732b1" category="doc">配置： cluster-admin 任务</block>
  <block id="552eab1d1ea09d0d1733b97dee6609a1" category="paragraph">Red Hat OpenShift cluster-admin 执行以下任务：</block>
  <block id="8a4ffd494b5e8af3ac1be2cd9ab254fb" category="list-text">以 cluster-admin 身份登录到 Red Hat OpenShift 集群。</block>
  <block id="7ccd4d72e4addf5c27c53bafaeb3fdbd" category="list-text">创建两个与不同项目对应的项目。</block>
  <block id="6c98bfb16f2e9bbebd943c1f8592306d" category="list-text">为 project-1 创建开发人员角色。</block>
  <block id="3c73122271c9219b54ca745b732adc28" category="list-text">同样，为 project-2 创建开发人员角色。</block>
  <block id="7428df2e0e503f4cabb43a4667bc1983" category="list-text">所有 OpenShift 和 NetApp 存储资源通常由存储管理员管理。存储管理员的访问由安装 Trident 时创建的 Trident 操作员角色控制。此外，存储管理员还需要访问 ResourceQuotas 来控制存储的使用方式。</block>
  <block id="36e36b60ddb8f46fe0b9b4e8f4dce56f" category="list-text">为存储管理员配置 ClusterRoleBindings 。</block>
  <block id="ced38b1f1c19446862c601754b82b94c" category="list-text">为开发人员创建 RoleBindings ，将开发人员项目 1 角色绑定到项目 1 中的相应组（ OCP-project-1 ）。</block>
  <block id="2aa292f2ff8b13fe141ca55c27bc29c2" category="list-text">同样，为开发人员创建 RoleBindings ，将开发人员角色绑定到 project-2 中的相应用户组。</block>
  <block id="7d03daab3e74958fc08ebc0c90e0a6a2" category="inline-link-macro">下一步：存储管理员任务。</block>
  <block id="f3d9bb76442ab5c11e6af4dd328b2559" category="paragraph"><block ref="f3d9bb76442ab5c11e6af4dd328b2559" category="inline-link-macro-rx"></block></block>
  <block id="d008c60ddb28c0bbad1dfabdd77327fc" category="doc">配置： storage-admin 任务</block>
  <block id="6c0ed744c737f30af364d229639c8288" category="paragraph">存储管理员必须配置以下资源：</block>
  <block id="64244866ddff81ded5e6aaa49055c6aa" category="list-text">以管理员身份登录到 NetApp ONTAP 集群。</block>
  <block id="3f8bc17bf8dd138aa2915235f0a9c0d3" category="image-alt">在 ONTAP 上创建 SVM</block>
  <block id="c9bd46366e9fb78552566f1e7a13633a" category="list-text">为 project-1 创建后端，并将其映射到专用于该项目的 SVM 。NetApp 建议使用 SVM 的 vsadmin 帐户将后端连接到 SVM ，而不是使用 ONTAP 集群管理员。</block>
  <block id="4a6c648106c1ff38316705bf986de601" category="list-text">同样，为 project-2 创建 Trident 后端，并将其映射到专用于 project-2 的 SVM 。</block>
  <block id="9a45d41277a2e8ce29709826a31fb482" category="list-text">接下来，创建存储类。为 project-1 创建存储类，并通过设置 storagePools 参数将其配置为使用后端专用于 project-1 的存储池。</block>
  <block id="4350d40426f8c94f6ca046609969adb2" category="list-text">同样，为 project-2 创建一个存储类，并将其配置为使用专用于 project-2 的后端存储池。</block>
  <block id="2ee847ebe129ae778860d6dd2da21cf6" category="list-text">创建 ResourceQuota 以限制 project-1 中的资源，从而从专用于其他项目的存储库请求存储。</block>
  <block id="c689ae18a0f5e47541dcec4afb6e187a" category="list-text">同样，也可以创建 ResourceQuota 来限制项目 2 中的资源，以便从专用于其他项目的存储库请求存储。</block>
  <block id="7f9ddc8224f28e1481299160807c876d" category="inline-link-macro">下一步：验证。</block>
  <block id="93a1440c4dcba82f234a9305a9445144" category="paragraph"><block ref="93a1440c4dcba82f234a9305a9445144" category="inline-link-macro-rx"></block></block>
  <block id="5568d55567785f154c987872c1684bfa" category="doc">工作负载迁移：采用 NetApp 的 Red Hat OpenShift</block>
  <block id="7e897f23ed71aef1c0a8acf1ae54e9e4" category="doc">解决方案组件</block>
  <block id="b917a2bfe0dd0160c3ad88751f355f5d" category="inline-link-macro">下一步：集群管理员任务。</block>
  <block id="7a9f102fda0e3438bff54da4acdbccbb" category="paragraph"><block ref="7a9f102fda0e3438bff54da4acdbccbb" category="inline-link-macro-rx"></block></block>
  <block id="f41043c73a62a435944d8abfb45094cb" category="list-text">适用于受管集群的 Red Hat OpenShift 集群（高于 4.5.3 版）</block>
  <block id="374185e020d06ceed3f020af518a1c14" category="list-text">适用于 Kubernetes 的 Red Hat 高级集群管理订阅</block>
  <block id="9afcd045ce0197d71ba631e3fbe43095" category="paragraph">高级集群管理是 OpenShift 集群的一个附加功能，因此，根据在集线器和受管集群中使用的功能，硬件资源具有某些要求和限制。在对集群进行规模估算时，您需要考虑这些问题。请参见文档<block ref="a5d2b81b971715f092f7296621743e22" category="inline-link-rx"></block> 有关详细信息：</block>
  <block id="65a62318377ddbc5fe3f73548dc3d677" category="paragraph">或者，如果集线器集群具有专用节点来托管基础架构组件，并且您希望仅在这些节点上安装高级集群管理资源，则需要相应地为这些节点添加容错和选择器。有关详细信息，请参见文档<block ref="df4d7b25534e8f26e8ab3acc1c646101" category="inline-link-rx"></block>。</block>
  <block id="3f71071db67a1d6b5b63e2d9cc6b0e93" category="inline-link-macro">下一步：安装。</block>
  <block id="2a9cc50366c16ec40c1a5132f8fe5533" category="paragraph"><block ref="2a9cc50366c16ec40c1a5132f8fe5533" category="inline-link-macro-rx"></block></block>
  <block id="03cae7751c31cc76a90cf5e94e86eb3a" category="section-title">监管和风险</block>
  <block id="9d7264067197bc9ff368288f98750fd6" category="paragraph">通过此功能，您可以为不同的集群定义合规性策略，并确保集群遵循此策略。您可以对策略进行配置，以通知或修复任何规则偏差或违规行为。</block>
  <block id="f6262e5369e2b989638aaa9d4f333d91" category="image-alt">创建合规性策略</block>
  <block id="0a1575621f2b12d5216e6d1c95eed2e6" category="list-text">配置完所有必需的策略后，可以通过高级集群管理监控和修复任何策略或集群违规。</block>
  <block id="38c080ff2128a92954fb61942ea497c0" category="image-alt">策略监控</block>
  <block id="465d1c9d2d9ea711e43e2e20077e10f9" category="inline-link-macro">接下来：功能—可观察性。</block>
  <block id="056789fad8ccaddf0ac3b4ef0a68b61a" category="paragraph"><block ref="056789fad8ccaddf0ac3b4ef0a68b61a" category="inline-link-macro-rx"></block></block>
  <block id="4b6826f4f20a8e7e7a3b42ccb81d514f" category="section-title">VM 克隆</block>
  <block id="0ea820e58acf3d0c3acac3f64518c517" category="image-alt">VM 克隆架构</block>
  <block id="a1dbf280b3b5da141010127710d68ba7" category="paragraph">要考虑 CSI 卷克隆的某些限制：</block>
  <block id="7f8cb9ac957166d3d134bf9df8861f5b" category="list-text">源 PVC 和目标 PVC 必须位于同一项目中。</block>
  <block id="058d8141e417cb514573ba1a70e2e0cd" category="list-text">在同一存储类中支持克隆。</block>
  <block id="611b1b227968093cc5c73e69f7ac0fda" category="list-text">只有当源卷和目标卷使用相同的卷模式设置时，才能执行克隆；例如，一个块卷只能克隆到另一个块卷。</block>
  <block id="557d036c1a69ab0889c0820deb1e88de" category="paragraph">可以通过两种方式克隆 OpenShift 集群中的 VM ：</block>
  <block id="e1230e5b1f51d793ea14fb31df500399" category="list-text">关闭源 VM</block>
  <block id="29ec5d7b455e19c4f8141df877a9af0a" category="list-text">使源 VM 保持活动状态</block>
  <block id="84d19f7437a8329c49099517eccd37dc" category="section-title">关闭源 VM</block>
  <block id="375000776ee4694734b1d066c46e7096" category="list-text">单击克隆虚拟机并提供新虚拟机的详细信息。</block>
  <block id="b22c43b0906ef8ba78f3fbb7d5b1ff20" category="image-alt">克隆虚拟机</block>
  <block id="cf702a835a3fd4b019603d29ec402106" category="list-text">单击克隆虚拟机；此操作将关闭源 VM 并启动克隆 VM 的创建。</block>
  <block id="82cfb538b52ee01d4a9901d4d2cfad4d" category="list-text">完成此步骤后，您可以访问并验证克隆的虚拟机的内容。</block>
  <block id="3c7aa222cd4c9ee079b31567a347c05f" category="paragraph">也可以通过克隆源 VM 的现有 PVC ，然后使用克隆的 PVC 创建新 VM 来克隆现有 VM 。此方法不需要关闭源 VM 。要克隆虚拟机而不关闭它，请完成以下步骤。</block>
  <block id="545ce69617c1c157be6073dcc63bfbae" category="list-text">单击克隆 PVC 并提供新 PVC 的详细信息。</block>
  <block id="e659422cf737778a2fb1cdd50cc8003e" category="image-alt">克隆 PVC</block>
  <block id="07c24ffdbaf9583216cca9f030058c11" category="list-text">然后单击克隆。这样就会为新虚拟机创建一个 PVC 。</block>
  <block id="19e005e0709674157e554800d5ea7ef9" category="list-text">成功创建 VM 后，访问并验证新 VM 是否为源 VM 的克隆。</block>
  <block id="fdbfc131399a8776fecd30fa821de4d0" category="inline-link-macro">接下来：工作流：从 Snapshot 创建 VM 。</block>
  <block id="c5c4205f35e83d4dc33cfa7821ceb5a7" category="paragraph"><block ref="c5c4205f35e83d4dc33cfa7821ceb5a7" category="inline-link-macro-rx"></block></block>
  <block id="b2f35a84b813ef160b585d350d2fcd58" category="summary">在裸机上使用 Anthos 与硬件无关的功能，您可以选择针对您的用例优化的计算平台。因此，您可以匹配现有基础架构并减少资本支出。</block>
  <block id="5f95fbda20eeb9ce0859afe2ac6f42fa" category="doc">解决方案要求</block>
  <block id="7d4009b9254a61f6afd71a2656a3a78f" category="section-title">计算：自带服务器</block>
  <block id="dee41946d9d6ca32131352cb4374f12b" category="paragraph">下表列出了实施此解决方案所需的最低计算硬件组件数量，尽管所使用的硬件型号可能因客户要求而异。</block>
  <block id="c64518704ce0c0d5501a45763f464276" category="cell">使用情况</block>
  <block id="602f72fff77475a16eff159759656261" category="cell">硬件和型号</block>
  <block id="06e9950a2c1bb489cf54d03d4547e913" category="cell">管理节点</block>
  <block id="b349dcffed4594674c8ce6c91e72e42f" category="cell">Cisco UCS B200</block>
  <block id="fcb81a84511da525a1581c4ccc00d0fb" category="cell">工作节点</block>
  <block id="4867cc2ab4385d91c3a36d6ace67a984" category="cell">HP ProLiant DL360</block>
  <block id="2c0b20f0fbc047d58ca10a50c6a32bc7" category="section-title">存储： NetApp ONTAP</block>
  <block id="604e83a5a6c4302c60ee5e331dcd342c" category="paragraph">下表列出了实施解决方案所需的最低存储硬件组件数量，尽管所使用的硬件型号可能因客户要求而异。</block>
  <block id="8bf5bd6530ea430a8edac8a795165179" category="cell">NetApp AFF</block>
  <block id="eb8440af98c502b8095408e970297e6b" category="cell">NetApp AFF A300</block>
  <block id="e8d610d6c2d243856beaade33b5aa123" category="cell">2 个（ 1 个 HA 对）</block>
  <block id="b6ce11f078022a4ab598b8016db52a13" category="paragraph">下表中标识的软件版本由 NetApp 和我们的合作伙伴使用，用于向 NetApp 验证解决方案，但所使用的软件组件可能因客户要求而异。</block>
  <block id="3d945423f8e9496c429a5d8c65b4604f" category="cell">Ubuntu</block>
  <block id="128b9c7509f09d8ff4b08e87def0ac74" category="cell">操作系统位于 3 个管理员上</block>
  <block id="836a05a21ac6df3b6bcf9838895b017e" category="cell">基于 Worker4 的操作系统</block>
  <block id="bbd243e896202aa0eb00ce19d8a7fea8" category="cell">基于 Worker3 的操作系统</block>
  <block id="4077fabc9a8b0e761cfd9bf752e03c8a" category="cell">18.04</block>
  <block id="aa1fc3398e84bda331b47203c1e53ad5" category="cell">CentOS</block>
  <block id="aaad0494526f271ca02ebd06a79e7382" category="cell">基于 Worker2 的操作系统</block>
  <block id="2a568439f8e6ff92daa9925ce8a03adf" category="cell">8.2</block>
  <block id="7ac53708026d8515ce15cc154e95f46b" category="cell">基于 Worker1 的操作系统</block>
  <block id="d6422a625045167156b3c0d85ca23ebf" category="cell">8.1</block>
  <block id="ca9f0d77f73d954e88e6ab43539ac7cb" category="cell">1.6.0</block>
  <block id="ea704238343d48baa3a08f039015185f" category="cell">存储 OS</block>
  <block id="f33749dd101d316dcf2e6953732629f9" category="cell">9.7P8.</block>
  <block id="8fe1ffd8f7dcf339dd4f34aabb6e1c99" category="cell">容器存储管理</block>
  <block id="a84024ce06ef98519b3b51300b2c8fbf" category="cell">20.10</block>
  <block id="37979dccdf7857a1abffb7df7c837853" category="admonition">此多操作系统环境显示了与裸机解决方案上受支持的操作系统版本的 Anthos 的互操作性。我们预计，客户将在部署时对一个或一小部分操作系统进行标准化。</block>
  <block id="d94e09dc1956d9513e690f8d24852f05" category="inline-link">裸机文档上的 Anthos</block>
  <block id="dea0bcd20b41ad5a5b5830e0facf5d5d" category="paragraph">有关裸机硬件和软件上的 Anthos 要求，请参见<block ref="39597b4f74e08019db4cace51500cfd6" category="inline-link-rx"></block> 页面。</block>
  <block id="71196ec10a92c76a666a93f55523b96e" category="inline-link-macro">接下来：部署摘要。</block>
  <block id="1b8d67e147d4d9c532832778cca5fee8" category="paragraph"><block ref="1b8d67e147d4d9c532832778cca5fee8" category="inline-link-macro-rx"></block></block>
  <block id="ae6f5747bf29f889c1d28208afab2a1a" category="doc">部署应用程序</block>
  <block id="cef52206f11ced919c8d0dd4b2c791a4" category="paragraph">以下各节介绍了如何安装和部署应用程序。</block>
  <block id="d0954433c0b62861850b87d9cba7599f" category="inline-link-macro">下一步：从 GitHub 获取代码</block>
  <block id="255a6bf7e1d34563f76daaf2b6cd6184" category="paragraph"><block ref="26e27ac56fb4c03c9632ab9bd4fc068b" category="inline-link-macro-rx"></block>。</block>
  <block id="84ffd62e595c9d0122e136c3b255f4df" category="doc">致谢</block>
  <block id="74f47434914d29c7ec7d7d42593303b7" category="list-text">NetApp 技术营销工程师 Mike Oglesby</block>
  <block id="94a8512f59eafd68b470105fc3269fd4" category="list-text">NetApp 高级技术总监 Santosh Rao</block>
  <block id="17e1dd6389643aeecf567ba08bf1df2c" category="paragraph"><block ref="17e1dd6389643aeecf567ba08bf1df2c" category="inline-link-macro-rx"></block></block>
  <block id="bd3114e9e2000f42e265a067e98b0d25" category="doc">以履行引擎的形式连接到第三方 API</block>
  <block id="1aea646cd3c044dd0758af18e73cfef3" category="paragraph">我们将以下第三方 API 作为履行引擎连接到问题解答问题：</block>
  <block id="94c494471216991658782a32f1e3ef37" category="inline-link">WeatherStack API</block>
  <block id="f7eb24e530470f21243c27770bd2c549" category="list-text"><block ref="c8600f69e922164a09610e481537b92d" category="inline-link-rx"></block>：返回给定位置的天气，温度，雨和雪。</block>
  <block id="1c96228fa1453bf3f691d5081cbd6adb" category="inline-link">Yelp Fusion API</block>
  <block id="55a3b552be8202b066ea237b831186f4" category="list-text"><block ref="8af0de0530d799485b6d6a2d146ab784" category="inline-link-rx"></block>：返回给定位置中最接近的存储信息。</block>
  <block id="114e8180b93cb1b21cd00067e446e5f0" category="inline-link">eBay Python SDK</block>
  <block id="da6816adc86546982065d9aef78845e5" category="list-text"><block ref="3d046b40b6d382ee41dd02d3b6ab007c" category="inline-link-rx"></block>：返回给定项目的价格。</block>
  <block id="3f7ba19f5b656e6cf8db9c69330a6d6e" category="inline-link-macro">接下来： NetApp 零售助理演示</block>
  <block id="23e96dc8693037c8fa1d7c0587a2d5eb" category="paragraph"><block ref="23e96dc8693037c8fa1d7c0587a2d5eb" category="inline-link-macro-rx"></block></block>
  <block id="e88a70d67e9de42d391fd019f2d06484" category="summary">要了解有关本文档所述信息的更多信息，请查看以下文档和网站。</block>
  <block id="0f68b904e33d9ac04605aecc958bcf52" category="doc">追加信息</block>
  <block id="b49efd5b259d6a3bceda1ebb8e34064a" category="list-text">数据集： TuSimple</block>
  <block id="61554b11b65c50bf7a094a86d699c8d5" category="inline-link"><block ref="61554b11b65c50bf7a094a86d699c8d5" category="inline-link-rx"></block></block>
  <block id="b150fd9c1d7740c871626031a398c8a3" category="paragraph"><block ref="b150fd9c1d7740c871626031a398c8a3" category="inline-link-rx"></block></block>
  <block id="a3a3504f7b11916e352125a598e15797" category="list-text">深度学习网络架构：空间对流神经网络</block>
  <block id="6467a460cb421335f9f5b0523c38c9a6" category="inline-link"><block ref="6467a460cb421335f9f5b0523c38c9a6" category="inline-link-rx"></block></block>
  <block id="35527148b08f99f1d85797af833430dc" category="paragraph"><block ref="35527148b08f99f1d85797af833430dc" category="inline-link-rx"></block></block>
  <block id="cc1881adebe7ddf5b873966741a32ef1" category="list-text">分布式深度学习培训框架： Horovod</block>
  <block id="732f85d0d5eaa9222831dd5290518ff2" category="inline-link"><block ref="732f85d0d5eaa9222831dd5290518ff2" category="inline-link-rx"></block></block>
  <block id="655c281079d0281fcf4b8f2f08634c16" category="paragraph"><block ref="655c281079d0281fcf4b8f2f08634c16" category="inline-link-rx"></block></block>
  <block id="934b1fbd011b584c4878284f454f812e" category="list-text">运行： AI 容器编排解决方案：运行： AI 产品简介</block>
  <block id="64b899832bfcad18bb426fb355a0d03b" category="inline-link"><block ref="64b899832bfcad18bb426fb355a0d03b" category="inline-link-rx"></block></block>
  <block id="b78ec84f003a4d277e318031a163e191" category="paragraph"><block ref="b78ec84f003a4d277e318031a163e191" category="inline-link-rx"></block></block>
  <block id="275dbaaa3169640f82917075918df905" category="list-text">运行： AI 安装文档</block>
  <block id="1173c05ffb489483ec926c6c1dbc3c26" category="inline-link"><block ref="1173c05ffb489483ec926c6c1dbc3c26" category="inline-link-rx"></block></block>
  <block id="517046a8acf2e7fa61798debc5b6e25e" category="inline-link"><block ref="517046a8acf2e7fa61798debc5b6e25e" category="inline-link-rx"></block></block>
  <block id="b8b2e04f115b148d49a8cb477ed86af9" category="paragraph"><block ref="f03e58e4917966d9b82995c8ce69643b" category="inline-link-rx"></block><block ref="3530112fad5ba376549c9e0750df83f3" category="inline-link-rx"></block></block>
  <block id="8787c0bfc5af7ce34db56c9a5739f788" category="list-text">在运行中提交作业： AI CLI</block>
  <block id="99a4cc6ec01bd067dc6642e6fd5efa0a" category="inline-link"><block ref="99a4cc6ec01bd067dc6642e6fd5efa0a" category="inline-link-rx"></block></block>
  <block id="ca4ef6cf830a9de78ea71279d0d5417c" category="paragraph"><block ref="ca4ef6cf830a9de78ea71279d0d5417c" category="inline-link-rx"></block></block>
  <block id="984fd97f526f8afe9d2472b0894b84c2" category="inline-link"><block ref="984fd97f526f8afe9d2472b0894b84c2" category="inline-link-rx"></block></block>
  <block id="65640a241681656a4410cd7184278c9b" category="paragraph"><block ref="65640a241681656a4410cd7184278c9b" category="inline-link-rx"></block></block>
  <block id="33a756969a35b0a9029bf2a2c10e6d67" category="list-text">Azure 云资源： Azure NetApp Files</block>
  <block id="99ac98f589f6b551211f31e86cb9a212" category="inline-link"><block ref="99ac98f589f6b551211f31e86cb9a212" category="inline-link-rx"></block></block>
  <block id="3085d4407b575d4a8938814c7db17d92" category="paragraph"><block ref="3085d4407b575d4a8938814c7db17d92" category="inline-link-rx"></block></block>
  <block id="f938809a358080d4c7a941e59abfca40" category="list-text">Azure Kubernetes Service</block>
  <block id="21d0acc34f6416d6ebd8074617c57439" category="inline-link"><block ref="21d0acc34f6416d6ebd8074617c57439" category="inline-link-rx"></block></block>
  <block id="91c4b230ded9b13564b447ba71304aeb" category="paragraph"><block ref="91c4b230ded9b13564b447ba71304aeb" category="inline-link-rx"></block></block>
  <block id="d9d650693b25d0540fbb606b1d1fbe4e" category="list-text">Azure VM SKUs</block>
  <block id="08318cbecd61665ab1824d118c1029a5" category="inline-link"><block ref="08318cbecd61665ab1824d118c1029a5" category="inline-link-rx"></block></block>
  <block id="3e05fd8f7e2e0ac6116dd746a8823eaa" category="paragraph"><block ref="3e05fd8f7e2e0ac6116dd746a8823eaa" category="inline-link-rx"></block></block>
  <block id="b9a1a7c8f2194407b24183f7826d2e44" category="list-text">采用 GPU SKU 的 Azure VM</block>
  <block id="6046df9266bb79e1d99f9c232c1835e3" category="inline-link"><block ref="6046df9266bb79e1d99f9c232c1835e3" category="inline-link-rx"></block></block>
  <block id="d0bf246853f6f35070f6a8231d468c87" category="paragraph"><block ref="d0bf246853f6f35070f6a8231d468c87" category="inline-link-rx"></block></block>
  <block id="43a545df8285ba2aba289a52824f250d" category="inline-link"><block ref="43a545df8285ba2aba289a52824f250d" category="inline-link-rx"></block></block>
  <block id="944823ac69152177e369bd5d9a61a02f" category="paragraph"><block ref="944823ac69152177e369bd5d9a61a02f" category="inline-link-rx"></block></block>
  <block id="a9359a0f51034e1b1972f7690fe03f71" category="list-text">由 NetApp 提供支持的 Data Fabric</block>
  <block id="781262103885a96ffc9275431a7ef132" category="inline-link"><block ref="781262103885a96ffc9275431a7ef132" category="inline-link-rx"></block></block>
  <block id="93e35e3e458c1d81846aa83c346e240e" category="paragraph"><block ref="93e35e3e458c1d81846aa83c346e240e" category="inline-link-rx"></block></block>
  <block id="bc4fe2352063642d68529f2aa0ca7ca3" category="list-text">NetApp 产品文档</block>
  <block id="3cd8b5fe5ca94a9fdb5caaf96875ef7e" category="inline-link"><block ref="3cd8b5fe5ca94a9fdb5caaf96875ef7e" category="inline-link-rx"></block></block>
  <block id="6bfac05f3cc2c0adace9c385ef708fd9" category="paragraph"><block ref="6bfac05f3cc2c0adace9c385ef708fd9" category="inline-link-rx"></block></block>
  <block id="37e875b843ef9539c02d09d3bbee6668" category="doc">第 4.8 节的测试详细信息</block>
  <block id="638c2d891d4e85bcfae409499fba817c" category="inline-link-macro">通过过度配额 GPU 分配实现高集群利用率</block>
  <block id="d9ed812c8dd9083f1fb345425b8ce100" category="paragraph">此部分包含此部分的测试详细信息 <block ref="fdc629b29ea94e672f68b28bf3b661b4" category="inline-link-macro-rx"></block>。</block>
  <block id="f354c9a7a0a52e7a5a3514252ea5f8b7" category="paragraph">按以下顺序提交作业：</block>
  <block id="9e727fdd3aec8274f46685441900280d" category="cell">项目</block>
  <block id="b3428404a5be1cf95d4e53b2ddc8288a" category="cell">GPU 数量</block>
  <block id="96b0141273eabab320119c467cdcaf17" category="cell">总计</block>
  <block id="0be8406951cdfda82f00f79328cf4efc" category="cell">comment</block>
  <block id="9320270de4ff6824ae7a21f729fb7d44" category="cell">团队 A</block>
  <block id="c6e328a3639bc00374d81e681f89f609" category="cell">Jupyter</block>
  <block id="c4ca4238a0b923820dcc509a6f75849b" category="cell">1.</block>
  <block id="ff8bed43ac09b1148fc7648f5845f698" category="cell">1 ， 4</block>
  <block id="37ce74088416f28dc9bb04355c2e5a28" category="cell">–</block>
  <block id="cfaa375bf6c7f9fcc1bc04d4f30c9154" category="cell">NetApp</block>
  <block id="6408e079aefee9702aa00f77228dd941" category="cell">2 ， 4</block>
  <block id="00833fac70036c049bd75443869cacb5" category="cell">运行： AI</block>
  <block id="36d2df43ead992a1e3c86acd0cec69f9" category="cell">4.4</block>
  <block id="d2313e844e73fe4a8f63d93f4df355fc" category="cell">正在使用其所有配额</block>
  <block id="238ff8d9192e9c01e50a8d6d21f1607b" category="cell">团队 b</block>
  <block id="e95e1ca27d0e39aa03eb5a611ce4122f" category="cell">0.6</block>
  <block id="e4275e3860ed32f489dbb6a5d4a10f5f" category="cell">0.6/2</block>
  <block id="8457d97e0a0f74a5926d1dee27e53541" category="cell">GPU 百分比</block>
  <block id="54fbf38cf649866815e0fefc46a1f6c7" category="cell">0.4</block>
  <block id="975ca8804565c1a569450d61090b2743" category="cell">1.2</block>
  <block id="867c7d7d65c50ae3679fabce2eab87a3" category="cell">2/2</block>
  <block id="c3a4885d143dc5b306446fb380c6cfda" category="cell">4/2</block>
  <block id="411472b1216ec08457e653eac42d7bbd" category="cell">两个超过配额</block>
  <block id="3b40d1328b825dda4b761a8e534669b7" category="cell">团队 c</block>
  <block id="d310cb367d993fb6fb584b198a2fd72c" category="cell">0.5</block>
  <block id="76169512ef5ca1abe70b32c0993856af" category="cell">0.5/2</block>
  <block id="e85b79abfd76b7c13b1334d8d8c194a5" category="cell">0 ， 3.</block>
  <block id="5c2b079fc9750c2995852b8fb354aae3" category="cell">0.8/2</block>
  <block id="3d522deaf85577451c01974654b36ad3" category="cell">0.2</block>
  <block id="00fd1da21e8b4ef31d987665dc575099" category="cell">3/2</block>
  <block id="0375b76ff57435094e28e94015a5f052" category="cell">一个超过配额</block>
  <block id="ae7ccf7b1a6a1a023f611a294572a900" category="cell">团队</block>
  <block id="ecdb9acc2db02134680a9c49abe3e991" category="cell">4 ， 8.</block>
  <block id="30c006c71ada68e2273b128bc2e6831b" category="cell">正在使用配额的一半</block>
  <block id="36cf0dc9f04c54214fa577ec66ff53fc" category="paragraph">命令结构：</block>
  <block id="7b3a4ccf5e0cc7918cd458f7e46b9c8e" category="paragraph">测试中使用的实际命令顺序：</block>
  <block id="3bf38f884fd74f6e6f1ec3d80018edd8" category="paragraph">此时，您应处于以下状态：</block>
  <block id="e55f05703a3e04fbd9e10f76ae925cc9" category="cell">已分配 GPU</block>
  <block id="26cc9c6ccae01f319282379c339cd90b" category="cell">已排队的工作负载</block>
  <block id="478eb1c4e698b325048b6bccfb8974f6" category="cell">4/4 （软配额 / 实际分配）</block>
  <block id="6adf97f83acf6453d4a6a4b1070f3754" category="cell">无</block>
  <block id="2df6f557cc57e6d4044b9611b1f56439" category="inline-link-macro">通过过度分配 GPU 实现高集群利用率</block>
  <block id="3667ebc7f28f59fc13bfcf314c67de05" category="paragraph">请参见一节 <block ref="dee5d16c649661a62d3a765af5b1a963" category="inline-link-macro-rx"></block> 用于讨论继续测试场景。</block>
  <block id="ac8466404b94a669f51a3d2db2401cf0" category="inline-link-macro">接下来：第 4.9 节的测试详细信息</block>
  <block id="84b7d04f598931bc149a92c543d3146f" category="paragraph"><block ref="84b7d04f598931bc149a92c543d3146f" category="inline-link-macro-rx"></block></block>
  <block id="1e92efa8f46c28a3c3a1c03ababfa7be" category="doc">NetApp 零售助理演示</block>
  <block id="c2e2fce3a995f59900d7afbbe58683f5" category="inline-link">此链接。</block>
  <block id="bb07f1ff94c6f99bf48a403706bea4ca" category="paragraph">我们录制了 NetApp 零售助理（ Nara ）的演示视频。单击<block ref="c1305d6e7f2e06345748f63e36abba33" category="inline-link-rx"></block> 打开下图并播放视频演示。</block>
  <block id="088070f65f454d6b38e8e40e332e70a8" category="paragraph"><block ref="088070f65f454d6b38e8e40e332e70a8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3d81ccbd202a60c621000abca3f6f3de" category="inline-link-macro">下一步：使用 NetApp Cloud Sync 归档对话历史记录</block>
  <block id="a165baa9089720dc90e8baf16267821f" category="paragraph"><block ref="a165baa9089720dc90e8baf16267821f" category="inline-link-macro-rx"></block></block>
  <block id="6f7f6c0b1054487e622896990b1d6d55" category="doc">TR-4841 ：采用数据缓存的混合云 AI 操作系统</block>
  <block id="1b55e21d5b19a6ba57ae9bbd6f3a0630" category="paragraph">Rick Huang ， David Arnette ， NetApp Ychay Ettun ， cnvrg.io</block>
  <block id="28d9fd6fa10254fdcc59aa182ae32dc9" category="paragraph">数据的爆炸式增长以及 ML 和 AI 的指数级增长已经融合在一起，形成了一个具有独特开发和实施挑战的超字节经济。</block>
  <block id="eb35f773ff882afb6d6d67613a4701ee" category="paragraph">尽管众所周知， ML 模型需要大量数据，并且需要接近计算资源的高性能数据存储，但在实践中，实施这种模型并不是那么直接，尤其是在混合云和弹性计算实例中。大量数据通常存储在低成本数据湖中， GPU 等高性能 AI 计算资源无法高效访问这些数据。在混合云基础架构中，如果某些工作负载在云中运行，而某些工作负载完全位于内部或不同的 HPC 环境中，则此问题会更加严重。</block>
  <block id="2b8ab86ccf473cca225e50ddb8c47e25" category="paragraph">在本文档中，我们介绍了一款全新的解决方案， IT 专业人员和数据工程师可以利用可感知拓扑的数据中心创建一个真正的混合云 AI 平台，数据科学家可以利用该平台在计算资源附近即时自动创建数据集缓存。 无论它们位于何处。因此，不仅可以完成高性能模型培训，而且还可以带来更多优势，包括多名 AI 实践者的协作，他们可以立即访问数据集版本中心内的数据集缓存，版本和行。</block>
  <block id="3bc3b194b0ef70e2e6ce113f819619c4" category="inline-link-macro">下一步：使用案例概述和问题陈述</block>
  <block id="3eb8a6b81400ec3a497fb59a7e6f4360" category="paragraph"><block ref="3eb8a6b81400ec3a497fb59a7e6f4360" category="inline-link-macro-rx"></block></block>
  <block id="a6214fe1ac9a6825ffe38f3b34489c9d" category="summary">NetApp Run AI 合作创建了本技术报告，展示了 Azure NetApp Files 与 Run AI 平台在简化 AI 工作负载流程方面的独特功能。</block>
  <block id="a55106260c16aab506cebfb58e07e030" category="paragraph">NetApp 与 Run ： AI 合作创建了本技术报告，展示了 Azure NetApp Files 的独特功能以及用于简化 AI 工作负载流程的 Run ： AI 平台。本技术报告提供了一个参考架构，用于简化分布式通道检测培训的数据管道和工作负载流程编排流程。</block>
  <block id="4e51614a389f3ad4fa17e2ce7ad984e7" category="paragraph">总之，对于大规模分布式培训（尤其是在公有云环境中），资源编排和存储组件是解决方案的重要组成部分。确保数据管理不会妨碍多个 GPU 处理，从而实现 GPU 周期的最佳利用率。这样，就可以使该系统尽可能地经济高效地用于大规模分布式培训。</block>
  <block id="269c35b1959d92e9ef6665bb4c60ad5d" category="paragraph">NetApp 提供的 Data Fabric 可以帮助数据科学家和数据工程师在内部和云中相互连接，以实现同步数据，而无需执行任何手动干预，从而克服了这一挑战。换言之， Data Fabric 可以平稳地管理分布在多个位置的 AI 工作流。此外，它还可以将数据贴近计算，并在需要时随时随地执行分析，培训和验证，从而促进基于需求的数据可用性。此功能不仅可以实现数据集成，还可以保护和保障整个数据管道的安全。</block>
  <block id="1d22ea3c852f35081a408a42b1caa719" category="doc">cnvrg.io 部署</block>
  <block id="e1d91df1cfd0e5839c45e06d0504c9d6" category="section-title">使用 Helm 部署 cnvrg 核心</block>
  <block id="7e9e2a4317009b27ebfc0b4cd222ba30" category="paragraph">使用任何集群，内部， MinikubE 或任何云集群（如 AKS ， EKS 和 GKE） ， Helm 是快速部署 cnvrg 的最简单方法。本节介绍如何在安装了 Kubernetes 的内部（ DGX-1 ）实例上安装 cnvrg 。</block>
  <block id="ea6de3fdf29035cd2d521949527c2a44" category="paragraph">在完成安装之前，您必须在本地计算机上安装并准备以下依赖项：</block>
  <block id="6f49e891fdb1bb11823492f4d315b2fd" category="list-text">Kubectl</block>
  <block id="5e6cef7c129d4703b20be420ac32145c" category="list-text">Helm 3.x</block>
  <block id="93fafc2be5db6c259030d6d8dc989752" category="list-text">Kubernetes 集群 1.15 及更高版本</block>
  <block id="116efea8faeef9714de76fe9f81d9b82" category="section-title">使用 Helm 部署</block>
  <block id="237800170a9b824a7de8c08766ea114e" category="list-text">要下载最新的 cnvrg Helm 图表，请运行以下命令：</block>
  <block id="9b821098b02043dada6b07b924f4ef5f" category="list-text">在部署 cnvrg 之前，您需要集群的外部 IP 地址以及要部署 cnvrg 的节点的名称。要在内部 Kubernetes 集群上部署 cnvrg ，请运行以下命令：</block>
  <block id="1d1eb4e0da8bac1b4eaa79c1f0be9e04" category="list-text">运行 `helm install` 命令。所有服务和系统都会自动安装在集群上。此过程可能需要长达 15 分钟。</block>
  <block id="e269e5751f8883222b6d2f55da7ed811" category="list-text">`helm install` 命令可能需要长达 10 分钟的时间。部署完成后，转到新部署的 cnvrg 的 URL 或将新集群添加为组织内部的资源。使用 `helm` 命令可向您告知正确的 URL 。</block>
  <block id="ac0cc75e8d4f0df818dd93a00041897a" category="list-text">当所有容器的状态为 running 或 complete 时，已成功部署 cnvrg 。它应类似于以下示例输出：</block>
  <block id="3e82668da957bceb0d0c7024273ab624" category="section-title">使用 ResNet50 和 Chest X 射线数据集的计算机视觉模型培训</block>
  <block id="c9c734dfca60f137a58e1a5cb9c89b62" category="inline-link">NIH 下载站点</block>
  <block id="0c7f26c15912f9f5d0e0473bb21cb9a2" category="paragraph">cnvrg.io AI 操作系统部署在 Kubernetes 设置中，并部署在由 NVIDIA DGX 系统提供支持的 NetApp ONTAP AI 架构上。为了进行验证，我们使用了 NIH Chest X ray 数据集，该数据集包含经去除身份识别的胸 x 射线图像。这些映像采用 PNG 格式。这些数据由 NIH 临床中心提供，可通过获取<block ref="4e3f11b94ad47864cbd9c6049036ac93" category="inline-link-rx"></block>。我们使用了一个 250 GB 的数据样本，其中包含 627 ， 615 个图像，分布在 15 个类别中。</block>
  <block id="de53b795a18176edb91a88632f621868" category="paragraph">数据集已上传到 cnvrg 平台，并在 NetApp AFF A800 存储系统的 NFS 导出中进行缓存。</block>
  <block id="ec948f075c372d4beb7d19a5266f22d5" category="section-title">设置计算资源</block>
  <block id="42af2f71dc8561eb9cfe43d45664ecb3" category="paragraph">借助 cnvrg 架构和元数据计划功能，工程师和 IT 专业人员可以将不同的计算资源连接到一个平台。在我们的设置中，我们使用了为运行深度学习工作负载而部署的相同集群 cnvrg 。如果需要连接其他集群，请使用 GUI ，如以下屏幕截图所示。</block>
  <block id="df25fca4c07e68ed339b0e1974a9d59f" category="paragraph"><block ref="df25fca4c07e68ed339b0e1974a9d59f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f541774a08fc687f6e2016c77a6ebca5" category="section-title">加载数据</block>
  <block id="564bfd33ed32c02158989dfcee59ae89" category="paragraph">要将数据上传到 cnvrg 平台，您可以使用 GUI 或 cnvrg CLI 。对于大型数据集， NetApp 建议使用 CLI ，因为它是一款强大，可扩展且可靠的工具，可以处理大量文件。</block>
  <block id="41ad6001e0d3c17bd4a7957e18bd8bab" category="paragraph">要上传数据，请完成以下步骤：</block>
  <block id="192b006166881688d04f398db712aaeb" category="inline-link">cnvrg 命令行界面</block>
  <block id="8e9fbcfb57e26d7a14f0292c11fae122" category="list-text">下载<block ref="d3ae4cf97b77cb5805c16205cd459ce4" category="inline-link-rx"></block>。</block>
  <block id="5cea56fcf2481a021f3d93843a22c319" category="list-text">导航到 x-ray 目录。</block>
  <block id="1c5a650f398227a4f97ed81accfbbb4b" category="list-text">使用 `cnvrg data init` 命令初始化平台中的数据集。</block>
  <block id="5c48f13a3d988e0d618145098a829e3a" category="list-text">使用 `cnvrg data sync` 命令将目录的所有内容上传到中央数据湖。将数据上传到中央对象存储（ StorageGRID ， S3 或其他）后，您可以使用 GUI 进行浏览。下图显示了一个已加载的胸 X 射线纤维化影像 PNG 文件。此外， cnvrg 会对数据进行版本控制，以便您构建的任何模型都可以复制到数据版本。</block>
  <block id="935b6e25167b65d839bc1487ebb2fa6e" category="paragraph"><block ref="935b6e25167b65d839bc1487ebb2fa6e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="308e9394a715dc64aa4e48e0054775ed" category="section-title">Cach 数据</block>
  <block id="556cde11a66a789acb7e62b934c1a88c" category="paragraph">为了加快训练速度并避免为每个模型训练和实验下载 60 万多个文件，在数据最初上传到中央数据湖对象存储之后，我们使用了数据缓存功能。</block>
  <block id="3d163413cac9b6cc4726a9c83d37fed3" category="paragraph"><block ref="3d163413cac9b6cc4726a9c83d37fed3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d006c100d76e7d21d64055ce3cfe6a24" category="paragraph">用户单击缓存后， cnvrg 将从远程对象存储下载其特定提交中的数据，并将其缓存到 ONTAP NFS 卷上。完成后，可以使用这些数据进行即时培训。此外，如果数据在几天内未使用（例如用于模型训练或探索），则 cnvrg 会自动清除缓存。</block>
  <block id="53ad459d9bb7a65de3d1cc839b75c19f" category="section-title">使用缓存数据构建 ML 管道</block>
  <block id="db226c80bcb6098ce2f47dd3982cca26" category="paragraph">借助 cnvrg 流，您可以轻松构建生产 ML 管道。流非常灵活，可用于任何类型的 ML 用例，并可通过 GUI 或代码创建。一个流中的每个组件都可以使用不同的 Docker 映像在不同的计算资源上运行，从而可以构建混合云和优化的 ML 管道。</block>
  <block id="6b0eae96748d48b032362774a6467411" category="paragraph"><block ref="6b0eae96748d48b032362774a6467411" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e1f18dfff2566b35d7d0e528565c43aa" category="section-title">构建箱内 X 射线流：设置数据</block>
  <block id="adec555cb8cd4de3f288baed510d1163" category="paragraph">我们已将数据集添加到新创建的流中。添加数据集时，您可以选择特定版本（提交）并指示是否需要缓存版本。在此示例中，我们选择了缓存的提交。</block>
  <block id="6dd780034ed574b328dbc16a6b485b79" category="paragraph"><block ref="6dd780034ed574b328dbc16a6b485b79" category="inline-image-macro-rx" type="image"></block></block>
  <block id="13e0789c536fc18ddcdc32b4ca598b58" category="section-title">构建箱内 X 射线流：设置训练模型： ResNet50</block>
  <block id="fa3c48d58d8e9fd17365fd986906dd52" category="paragraph">在管道中，您可以添加所需的任何类型的自定义代码。在 cnvrg 中，还提供了 AI 库，这是一个可重复使用的 ML 组件集合。在 AI 库中，有算法，脚本，数据源以及其他解决方案可用于任何 ML 或深度学习流。在此示例中，我们选择了预构建的 ResNet50 模块。我们使用的是默认参数，例如 batch_size ： 128 ， epodchs ： 10 等。可以在 AI 库文档中查看这些参数。以下屏幕截图显示了将 X 线数据集连接到 ResNet50 的新流。</block>
  <block id="defe5cc08faaa501eeb5fc5500664d29" category="paragraph"><block ref="defe5cc08faaa501eeb5fc5500664d29" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bf9bb479506589dfd719446fe3e054c7" category="section-title">为 ResNet50 定义计算资源</block>
  <block id="943cb3f5c7789c68e811b0accdb6c5d9" category="paragraph">cnvrg 流中的每个算法或组件都可以使用不同的 Docker 映像在不同的计算实例上运行。在我们的设置中，我们希望使用 NetApp ONTAP AI 架构在 NVIDIA DGX 系统上运行训练算法。在下图中，我们选择了 `GPU Real` ，这是我们内部集群的计算模板和规范。我们还创建了一个模板队列并选择了多个模板。这样，如果无法分配 `GPU-Real` 资源（例如，如果其他数据科学家正在使用该资源），则可以通过添加云提供商模板来启用自动云突发功能。以下屏幕截图显示了如何使用 GPU Real 作为 ResNet50 的计算节点。</block>
  <block id="27c8450e6f62877ec794262ae4c5a713" category="paragraph"><block ref="27c8450e6f62877ec794262ae4c5a713" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bee38713f37ae72239f6bda08384dfbb" category="section-title">跟踪和监控结果</block>
  <block id="546b7da7049f1d7fdf35cdb57fa96c7c" category="paragraph">执行流量后， cnvrg 将触发跟踪和监控引擎。每次运行流程都会自动记录并实时更新。超参数，指标，资源使用情况（ GPU 利用率等），代码版本，项目，日志， 实验部分会自动提供，如以下两个屏幕截图所示。</block>
  <block id="8fabeb8b8d143d509bb92087cbbf953c" category="paragraph"><block ref="8fabeb8b8d143d509bb92087cbbf953c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fdbd22304f732000189e44de22498da1" category="paragraph"><block ref="fdbd22304f732000189e44de22498da1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="254a4a0ddc892d6a01d7e7ef286fbb71" category="inline-link-macro">接下来：总结。</block>
  <block id="debe391efc3dc12a7d87720a4cf068a5" category="paragraph"><block ref="debe391efc3dc12a7d87720a4cf068a5" category="inline-link-macro-rx"></block></block>
  <block id="c83553858a60514501e9751c0747dea0" category="doc">基本资源分配公平</block>
  <block id="dc12a1ce34c0a7a264de91bc9b933a62" category="paragraph">在本节中，我们会显示，当 `team-d` 请求更多 GPU （它们低于其配额）时，系统会暂停 `team-b` 和 `team-c` 的工作负载，并以公平的方式将其移至待定状态。</block>
  <block id="ccc33823c0dc5e9ee0838a5eaa86f076" category="inline-link-macro">第 4.9 节的测试详细信息</block>
  <block id="86bbd55ea7850716c0c192b19c86176a" category="paragraph">有关提交作业，使用的容器映像以及执行的命令序列等详细信息，请参见一节 <block ref="94d73a1896276f719be59227f0e93a14" category="inline-link-macro-rx"></block>。</block>
  <block id="b6ea2a2f48a443e7d027bd652ac84762" category="paragraph">下图显示了由于自动负载平衡和预先计划而产生的集群利用率，每个组分配的 GPU 以及待处理作业。我们可以观察到，当所有团队工作负载请求的 GPU 总数超过集群中可用的 GPU 总数时， Run ： AI 的内部公平算法会分别为 `team-b` 和 `team-c` 暂停一个作业，因为它们已达到项目配额。这样可以提供整体较高的集群利用率，而数据科学团队仍在管理员设置的资源限制下工作。</block>
  <block id="d1a54cf8cb2a06c0715d2f042fbf44bd" category="paragraph"><block ref="d1a54cf8cb2a06c0715d2f042fbf44bd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d52816ece2166f7a2e0eadf58d617df9" category="paragraph">此测试场景的结果显示以下内容：</block>
  <block id="bce83ec0a92a5b10380007a1643b2fd0" category="list-text">* 自动负载平衡。 * 系统会自动平衡 GPU 的配额，使每个团队现在都在使用其配额。暂停的工作负载属于超过其配额的团队。</block>
  <block id="f8be0d1ca354f8cb4aaa4c8aadcea80b" category="list-text">* 公平共享暂停。 * 系统会选择停止超过配额的一个组的工作负载，然后停止另一个组的工作负载。Run ： AI 具有内部公平算法。</block>
  <block id="c088b6e407ba7f9c0274382acfa3eae0" category="inline-link-macro">下一步：过度配额公平</block>
  <block id="8e015e1b989b11d70fcb778747b8c614" category="paragraph"><block ref="8e015e1b989b11d70fcb778747b8c614" category="inline-link-macro-rx"></block></block>
  <block id="4ac9fa791a6d1c7c97bbae134dd22586" category="paragraph">一个真正的人工智能对话系统可以进行类似于人类的对话，了解相关背景并提供智能响应。此类 AI 模型通常非常庞大且非常复杂。借助 NVIDIA GPU 和 NetApp 存储，可以对大规模的一流语言模型进行培训和优化，以快速运行推理。这是一个重大的进步，旨在结束快速 AI 模型与大型复杂 AI 模型之间的权衡。GPU 优化的语言理解模式可以集成到医疗保健，零售和金融服务等行业的 AI 应用程序中，为智能扬声器和客户服务线中的高级数字语音助理提供支持。通过这些高质量的对话式 AI 系统，各个垂直行业的企业可以在与客户接洽时提供以前无法实现的个性化服务。</block>
  <block id="45d5663acc501eba25058f8956035e9a" category="paragraph">借助 JARVIS ，可以部署虚拟助手，数字 avatars ，多模式传感器 Fusion （ CV 与 ASS/NLP/TTs 融合）或任何 ASS/NLP/TTS/CV 独立用例，如记录。我们构建了一个虚拟零售助理，可以对天气，关注点和库存定价方面的问题进行问题解答处理。此外，我们还展示了如何通过使用 Cloud Sync 归档对话历史记录并对 Nemo 模型进行新数据培训来提高对话 AI 系统的自然语言理解能力。</block>
  <block id="c6a4d485e7c4cefa4c121ce6c59b28dc" category="inline-link-macro">下一步：致谢</block>
  <block id="38a609a97a676f2cc28ccec3d3097d4b" category="paragraph"><block ref="38a609a97a676f2cc28ccec3d3097d4b" category="inline-link-macro-rx"></block></block>
  <block id="1d91c2c04b7f73cb59edb799d095c75c" category="paragraph">本白皮书为客户提供了一些指导原则，帮助他们使用 NVIDIA JarVis 框架以及 NetApp ONTAP AI 和 Cloud Sync 构建适用于零售和其他使用情形的对话人工智能（人工智能， AI ）解决方案。其中包括有关在为虚拟助手开发自然语言处理（ NLP ）模型时使用的高级工作流的信息，经过验证的测试用例和结果。</block>
  <block id="4c2588a1e3dbf6824a4f05095df75f83" category="paragraph">尽管当今所有应用程序都不是人工智能驱动的，但它们正在不断发展的功能，使其能够获得人工智能的巨大优势。为了支持采用 AI ，应用程序需要一个基础架构，以便为其提供最佳运行级别所需的资源，并支持其持续发展。</block>
  <block id="31965de7c735983bb41a0b7e70361db2" category="paragraph">对于 AI 驱动的应用程序，边缘位置是主要的数据源。如果在一段时间内从多个边缘位置收集可用数据以构成培训数据集，则可以将这些数据用于培训。然后，可以将经过培训的模型部署回收集数据的边缘位置，从而加快推理速度，而无需将生产数据重复传输到专用推理平台。</block>
  <block id="9e53c147a93fed13d4349cba2a35e36b" category="paragraph">NetApp HCI AI 推理解决方案由采用 NVIDIA T4 GPU 和 NetApp 云连接存储系统的 NetApp H615c 计算节点提供支持，由 NetApp 和 NVIDIA 开发并验证。NetApp HCI 通过解决不确定性问题，消除设计复杂性和结束猜测，简化了在边缘数据中心部署 AI 推理解决方案的过程。此解决方案为 IT 组织提供了一个规范化的架构，可以：</block>
  <block id="9c4a53996590c74a0de3bba81f878254" category="list-text">在边缘数据中心启用 AI 推理</block>
  <block id="20c3f996d396cc8c92788bb3585a6e86" category="list-text">优化 GPU 资源的使用</block>
  <block id="06e81c54cb9157aa59541289f1163daf" category="list-text">提供基于 Kubernetes 的推理平台，以提高灵活性和可扩展性</block>
  <block id="9c6bd300c8cf3ca98c8548bbb27cc34a" category="list-text">消除设计复杂性</block>
  <block id="ba37c372c4a9119e45c7f525f4743cfc" category="paragraph">边缘数据中心在非常接近生成点的位置管理和处理数据。这种接近性可提高处理数据时的效率并减少相关延迟。许多垂直市场已经实现了边缘数据中心的优势，并在很大程度上采用这种分布式数据处理方法。</block>
  <block id="b501a0f0a3e7d559cecfad08c330227e" category="paragraph">下表列出了边缘垂直市场和应用程序。</block>
  <block id="06ce2a25e5d12c166a36f654dbea6012" category="cell">垂直</block>
  <block id="077262cc53a1fb1b5f651d31b6bf81ba" category="cell">医疗</block>
  <block id="9da98fbc1c3d290fefb743a2df8914b4" category="cell">计算机辅助诊断可帮助医务人员进行早期疾病检测</block>
  <block id="fa0a7aa1622ad105e9cdf5a706058333" category="cell">石油和天然气</block>
  <block id="55dae4e2e7f267e43e5768e66c7c3771" category="cell">对远程生产设施，视频和图像分析进行自主检查</block>
  <block id="252ddb15657f2c60bddc73633a7bf8c0" category="cell">航空</block>
  <block id="7a84f6faf76fd3533ae6ca65d28c53eb" category="cell">空中交通控制辅助和实时视频源分析</block>
  <block id="81ea9456adf225bcf11b668b427fd4f2" category="cell">媒体和娱乐</block>
  <block id="5015819e58d425b19f8acc93866e76fa" category="cell">音频 / 视频内容筛选功能，可提供适合家庭使用的内容</block>
  <block id="616e90f12cb95950bc1c75396902393a" category="cell">业务分析</block>
  <block id="3e4c06851690089d4952320e9df36dc2" category="cell">品牌认知度，用于分析在流式直播电视活动中的品牌表现</block>
  <block id="a9f7ecebb493e129aafb4cbfd73e85df" category="cell">电子商务</block>
  <block id="5df4fc692c9317012855d6935bf10310" category="cell">将供应商产品智能捆绑在一起，找到理想的商家和仓库组合</block>
  <block id="053e0bc8b9627b28e2ed8029a34b35bd" category="cell">零售</block>
  <block id="7cf7816e39e6e0c259a79dc29c5a5e7c" category="cell">自动结账，用于识别客户放入购物车的物品，并便于进行数字支付</block>
  <block id="165f5687ea9050fba239731810d0abe8" category="cell">智慧城市</block>
  <block id="a47b360ffbe39c5a39c7e12e2ae8fdf5" category="cell">改善交通，优化停车，增强人行和骑行者的安全</block>
  <block id="e86883c7cfc07afcf1e5ad8dffd7e1cc" category="cell">制造</block>
  <block id="f4d790a35097fa97c2687ac573b25338" category="cell">质量控制，装配线监控和缺陷识别</block>
  <block id="2273d1167a6212812d95dc8fadbae78e" category="cell">客户服务</block>
  <block id="bf4948e47ea0d77a86e639979879262d" category="cell">客户服务自动化，用于分析和鉴别咨询（电话，电子邮件和社交媒体）</block>
  <block id="8e54e9aa508ea37f7fe734e86ba9da27" category="cell">农业</block>
  <block id="7fb956270d49b22c3226bc1db2b0269f" category="cell">智能的农场运营和活动规划，可优化肥料和除草剂应用</block>
  <block id="3190a811a89bc9da4384152bc43d1b94" category="section-title">目标受众</block>
  <block id="549c608b9fe93192110cc2552d28da22" category="paragraph">解决方案的目标受众包括以下组：</block>
  <block id="134481f7bea652a34fa2ada120d250e5" category="list-text">数据科学家</block>
  <block id="8d26f0555c7ace3d4b297da8c12fb31b" category="list-text">IT 架构师</block>
  <block id="c114d2813b0041352b49187ebc28b62b" category="list-text">现场顾问</block>
  <block id="2d6d0cc18609f97853f883c1891397d2" category="list-text">专业服务</block>
  <block id="467f739adb5605167109d76676b44696" category="list-text">IT 经理</block>
  <block id="dcfa1c08d3b0126217af0b8690305c08" category="list-text">需要在边缘位置提供 IT 创新和强大数据和应用程序服务的基础架构的任何其他人</block>
  <block id="dcea35e5c6c7dfb5a3d0b5083bb4bb90" category="paragraph"><block ref="dcea35e5c6c7dfb5a3d0b5083bb4bb90" category="inline-link-macro-rx"></block></block>
  <block id="3bb420314fa4b29837c4b0528524000f" category="doc">NetApp ONTAP AI 和 AI 控制平台</block>
  <block id="1b85c0e7f381bd6f8c3150cafe56a9f0" category="paragraph">NetApp ONTAP AI 架构，由 NVIDIA DGX 系统和 NetApp 云连接存储系统提供支持。此参考架构为 IT 组织提供了以下优势：</block>
  <block id="5116c5071beb9f4f5b673c988c417c71" category="list-text">支持独立扩展计算和存储</block>
  <block id="eccaf37681e446d183db0332d1e50552" category="list-text">支持客户从小规模入手，无缝扩展</block>
  <block id="bae698d3cdcc290d6a0048c7b786446c" category="list-text">为各种性能和成本点提供一系列存储选项 NetApp ONTAP AI 可将 DGX 系统和 NetApp AFF A800 存储系统与一流的网络紧密集成在一起。NetApp ONTAP AI 和 DGX 系统消除了设计复杂性和猜测性工作，从而简化了 AI 部署。客户可以从小规模入手，无中断地扩展系统，同时智能地管理从边缘到核心再到云再到云的数据。</block>
  <block id="c729dcbcad9e1c72ae15d4b823e9f311" category="paragraph">NetApp AI 控制平台是一个全堆栈 AI ， ML 和深度学习（ DL ）数据和实验管理解决方案，适用于数据科学家和数据工程师。随着企业越来越多地使用 AI ，他们面临着许多挑战，包括工作负载可扩展性和数据可用性。NetApp AI 控制平台可通过各种功能来应对这些挑战，例如像 Git repo一样 快速克隆数据命名空间，以及定义和实施 AI 培训工作流，这些工作流可近乎即时地创建数据和模型基线以实现版本控制和可追溯性。借助 NetApp AI 控制平台，您可以在站点和区域之间无缝复制数据，并快速配置 Jupyter 笔记本工作空间，以便访问海量数据集。</block>
  <block id="42cac0fcbbddfc99b31ff898d7902c83" category="inline-link-macro">接下来：运行 AI 工作负载编排的 AI 平台</block>
  <block id="e3683938a3c34e6a7cf5b3896258e91e" category="paragraph"><block ref="a8dcbc617641d20db42fd66f3a42caae" category="inline-link-macro-rx"></block>。</block>
  <block id="6b4330df9a37bcfef1faecd1e8973464" category="inline-link-macro">配额过度公平</block>
  <block id="5648f06cc2dff861e557e088190ccbe2" category="paragraph">在本节和各节中 <block ref="26be59a535445b1fffeef12f5e70f3e6" category="inline-link-macro-rx"></block>，和 <block ref="2783e1454358e180d4e2876ef9492c64" category="inline-link-macro-rx"></block>，我们设计了高级测试方案，用于演示运行： AI 流程编排功能，以实现复杂的工作负载管理，自动抢占式计划和超配额 GPU 配置。我们这样做是为了在 ONTAP AI 环境中实现高集群资源利用率并优化企业级数据科学团队的工作效率。</block>
  <block id="fed09193953a2a2d15bfba4063981f8c" category="paragraph">对于这三个部分，请设置以下项目和配额：</block>
  <block id="d2d5c3e087f684e56b5b81d6212d7ccb" category="cell">配额</block>
  <block id="c9f0f895fb98ab9159f51fd0297e236d" category="cell">8.</block>
  <block id="207b738b6cd0e1cf6ac4a405dc72102f" category="paragraph">此外，我们还会对这三个部分使用以下容器：</block>
  <block id="cc6f12794ea24a191cb4f699f1b95036" category="list-text">Jupyter 笔记本电脑： `jupyter/base-notebook`</block>
  <block id="b8d0bb7e356bfdd7e018a7c62f9343fa" category="list-text">Run ： AI Quickstart ： `gcr.io/run-ai-demo/Quickstart`</block>
  <block id="c9582d103b2fe8050364d3e629c4e80e" category="paragraph">我们为此测试场景设定了以下目标：</block>
  <block id="c2d51205301247cd0aa0eca284d3889b" category="list-text">展示资源配置的简便性以及如何从用户中提取资源</block>
  <block id="dfd4af458e74e30246827532e692dca7" category="list-text">展示用户如何轻松配置 GPU 的小部分和 GPU 的整数</block>
  <block id="d7bf7c7f0d7884bd8fe07da4f6a8aba3" category="list-text">展示如果集群中存在可用 GPU ，系统如何通过允许团队或用户超过其资源配额来消除计算瓶颈</block>
  <block id="f93609e9c7f7c826e6c83bb1f8416207" category="list-text">展示如何在运行计算密集型作业（例如 NetApp 容器）时使用 NetApp 解决方案消除数据管道瓶颈</block>
  <block id="8ac218f5a62c8021756a192ac737a7f2" category="list-text">显示如何使用系统运行多种类型的容器</block>
  <block id="802125395813e0bec35472d0403ab94e" category="list-text">Jupyter 笔记本电脑</block>
  <block id="91c4a4ef606f959264719f8d084aab0e" category="list-text">运行： AI 容器</block>
  <block id="23edbe937c996eb973ab4c69f9648893" category="list-text">集群已满时显示高利用率</block>
  <block id="815a27a2c38741e36d920cbea5587384" category="paragraph">有关在测试期间执行的实际命令序列的详细信息，请参见 <block ref="3a65193f11bb9f699d19b0e9a996cd93" category="inline-link-macro-rx"></block>。</block>
  <block id="9d020ce52f8e9ff0d2f2defe3942d660" category="paragraph">提交所有 13 个工作负载后，您可以看到一个容器名称和分配的 GPU 列表，如下图所示。我们有七个培训和六个互动作业，模拟四个数据科学团队，每个团队都有自己的模型运行或开发。对于交互式作业，各个开发人员都在使用 Jupyter 笔记本电脑编写或调试其代码。因此，它适合在不使用过多集群资源的情况下配置 GPU 分段。</block>
  <block id="5deafc9e56279ca519f1e3c351856aa8" category="paragraph"><block ref="5deafc9e56279ca519f1e3c351856aa8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1aa04853a58b1b9ab0033c7e24b9d929" category="paragraph">此测试场景的结果如下：</block>
  <block id="dbaf41fcdcf0aa8cd93bfdf0e7f916f2" category="list-text">集群应已满：使用了 16/16 个 GPU 。</block>
  <block id="25421e793bda820f3023762c547a2495" category="list-text">集群利用率高。</block>
  <block id="fdf3de6e0502b5404d2e0b379421f759" category="list-text">由于分配百分比的影响，比 GPU 的实验更多。</block>
  <block id="68cf93a70e0f0fe62bc0428ce8a8b348" category="list-text">`team-d` 并未使用所有配额；因此， `team-b` 和 `team-c` 可以在其实验中使用额外的 GPU ，从而加快创新速度。</block>
  <block id="9083e59932e59a6f85524ab956fcf772" category="inline-link-macro">下一步：基本资源分配公平</block>
  <block id="654c44d69d64b0a5a656dd7b1375ac03" category="paragraph"><block ref="654c44d69d64b0a5a656dd7b1375ac03" category="inline-link-macro-rx"></block></block>
  <block id="3642f282b12269091ab196a3aabf0858" category="summary">Trident 操作示例</block>
  <block id="7f41e102595a65d30401b887b75060a4" category="paragraph">本节包括您可能希望使用 Trident 执行的各种操作的示例。</block>
  <block id="5a95bc44d2d93c77b65585a52a71d631" category="section-title">导入现有卷</block>
  <block id="37e60d34ab15afa59aac0989309fc77a" category="paragraph">如果您的 NetApp 存储系统 / 平台上有要挂载到 Kubernetes 集群中的容器上但未与集群中的 PVC 绑定的现有卷，则必须导入这些卷。您可以使用 Trident 卷导入功能导入这些卷。</block>
  <block id="f363c1a10e150fdee0f4f310a06acb5e" category="inline-link-macro">ONTAP AI 部署的 Trident 后端示例</block>
  <block id="8f811f6151a10e9d15de57c2af8fcfed" category="inline-link">Kubernetes 官方文档</block>
  <block id="40ef3fb23e015d9b4b46a16fa50f10d3" category="inline-link">Trident 文档</block>
  <block id="4330c34147b36030c50afe1d04ec2213" category="paragraph">以下示例命令显示了为在本节示例中创建的每个 Trident 后端导入相同卷 `PB_FG_ALL` 两次 <block ref="5ce2b96729b1637e197bdd36eb4db4ee" category="inline-link-macro-rx"></block>，步骤 1 。通过以这种方式导入同一卷两次，您可以在不同 LIF 之间多次挂载此卷（现有 FlexGroup 卷），如一节所述 <block ref="5ce2b96729b1637e197bdd36eb4db4ee" category="inline-link-macro-rx"></block>，步骤 1 。有关 PVCs 的详细信息，请参见<block ref="ca589c3cf5b20ae0a636e2b7691f2873" category="inline-link-rx"></block>。有关卷导入功能的详细信息，请参见<block ref="e6b3671f5db59046617458d31ef4f50b" category="inline-link-rx"></block>。</block>
  <block id="313da63dfeb95842dd6a105fdcf40ebc" category="paragraph">在示例 PVC 规范文件中指定了 `accessModes` 值 `ReadOnlyMany` 。有关 `accessMode` 字段的详细信息，请参见<block ref="ca589c3cf5b20ae0a636e2b7691f2873" category="inline-link-rx"></block>。</block>
  <block id="6631bf64346739a9880a9789a941a8d6" category="inline-link-macro">适用于 ONTAP AI 部署的 Kubernetes StorageClasses 示例</block>
  <block id="e6d82e60d43fe02e01930addfe670e8f" category="admonition">以下示例导入命令中指定的后端名称与在本节的示例中创建的后端相对应 <block ref="5ce2b96729b1637e197bdd36eb4db4ee" category="inline-link-macro-rx"></block>，步骤 1 。以下示例 PVC 定义文件中指定的 StorageClass 名称与在本节的示例中创建的 StorageClasses 相对应 <block ref="6d8c8eb29a4e4c3a50119b70d2e8171e" category="inline-link-macro-rx"></block>，步骤 1 。</block>
  <block id="533fff63e0b7486b2768ad15b5e2981c" category="section-title">配置新卷</block>
  <block id="e149d2e1fdb31ad28f79dd3d2c7ee8ff" category="paragraph">您可以使用 Trident 在 NetApp 存储系统或平台上配置新卷。以下示例命令显示了新 FlexVol 卷的配置。在此示例中，使用在一节的示例中创建的 StorageClass 配置卷 <block ref="6d8c8eb29a4e4c3a50119b70d2e8171e" category="inline-link-macro-rx"></block>，步骤 2 。</block>
  <block id="78b7c8c28867630a421236d6f1ff9ba3" category="paragraph">在以下示例 PVC 定义文件中指定了 `accessModes` 值 `ReadWriteMany` 。有关 `accessMode` 字段的详细信息，请参见<block ref="ca589c3cf5b20ae0a636e2b7691f2873" category="inline-link-rx"></block>。</block>
  <block id="c701c7fe143bef79cc6eebc32606262e" category="paragraph">要了解有关本文档中所述信息的更多信息，请参见以下资源：</block>
  <block id="e40030fd64108859627c7a126638f0e6" category="list-text">NetApp AI 控制平台：</block>
  <block id="63178726ae501745b3914ec3aa50969e" category="list-text">NetApp AI 控制平面技术报告</block>
  <block id="3ce56c027572d1908d65b63056be024f" category="inline-link"><block ref="3ce56c027572d1908d65b63056be024f" category="inline-link-rx"></block></block>
  <block id="445a4d3400bdde832e8898d8349696c0" category="paragraph"><block ref="445a4d3400bdde832e8898d8349696c0" category="inline-link-rx"></block></block>
  <block id="de1e4a3a0cae539a34678546eb6e91b3" category="list-text">适用于容器的 NetApp 持久存储：</block>
  <block id="36c1c8df527a7721115f4ba53b5ea5a6" category="inline-link"><block ref="36c1c8df527a7721115f4ba53b5ea5a6" category="inline-link-rx"></block></block>
  <block id="e582bd0f584c041fb70164ea1502666b" category="paragraph"><block ref="e582bd0f584c041fb70164ea1502666b" category="inline-link-rx"></block></block>
  <block id="193721fbb9ea3851cafcea43a4d95f73" category="list-text">ML 框架和工具：</block>
  <block id="c8c2399b3aef347e9bdc7ab4ff8da4e0" category="inline-link"><block ref="c8c2399b3aef347e9bdc7ab4ff8da4e0" category="inline-link-rx"></block></block>
  <block id="9a8ec45d909b996af4c042e44b5c5f29" category="list-text">TensorFlow ：适用于所有人的开源机器学习框架<block ref="db3465122fd83ad1dc4cff7e67d794df" category="inline-link-rx"></block></block>
  <block id="c5fd214cdd0d2b3b4272e73b022ba5c2" category="list-text">Docker</block>
  <block id="4c3db4ae25b5f5aaa206a7fedd201322" category="inline-link"><block ref="4c3db4ae25b5f5aaa206a7fedd201322" category="inline-link-rx"></block></block>
  <block id="60ea9e9ecbf839c413c5e977002eabf4" category="paragraph"><block ref="60ea9e9ecbf839c413c5e977002eabf4" category="inline-link-rx"></block></block>
  <block id="30136395f01879792198317c11831ea4" category="list-text">Kubernetes</block>
  <block id="9b4643ea7f05b216a0cf56ceddb43241" category="inline-link"><block ref="9b4643ea7f05b216a0cf56ceddb43241" category="inline-link-rx"></block></block>
  <block id="6bd14be39aedfe96ceacec2caaac0532" category="paragraph"><block ref="6bd14be39aedfe96ceacec2caaac0532" category="inline-link-rx"></block></block>
  <block id="bb643a3a76aab569f9245a19f77d4b65" category="list-text">Kubeflow</block>
  <block id="a33d91971f7757996ab0eb8eb0362814" category="inline-link"><block ref="a33d91971f7757996ab0eb8eb0362814" category="inline-link-rx"></block></block>
  <block id="6771540ad76dbed724cb9025978b8510" category="paragraph"><block ref="6771540ad76dbed724cb9025978b8510" category="inline-link-rx"></block></block>
  <block id="cc68740519bf7afc9dc5c17acc7db61e" category="list-text">Jupyter 笔记本电脑服务器</block>
  <block id="c90a0598d42425e6ec2dfb3058534b35" category="inline-link"><block ref="c90a0598d42425e6ec2dfb3058534b35" category="inline-link-rx"></block></block>
  <block id="ef9e62eeb81c0987fbe61de48635886a" category="paragraph"><block ref="ef9e62eeb81c0987fbe61de48635886a" category="inline-link-rx"></block></block>
  <block id="3bc4d41311862190a8fd0d6c8f661971" category="list-text">Iguazio 数据科学平台</block>
  <block id="737d4d1e81ff236001338f46d1623aaa" category="list-text">Iguazio 数据科学平台文档</block>
  <block id="7911479a3e8e121b0dc1c551f56fa6ca" category="inline-link"><block ref="7911479a3e8e121b0dc1c551f56fa6ca" category="inline-link-rx"></block></block>
  <block id="bcdc0ac9ae93bcfb8ae21a0a8713528e" category="paragraph"><block ref="bcdc0ac9ae93bcfb8ae21a0a8713528e" category="inline-link-rx"></block></block>
  <block id="4f0f362becf6baf6e08f490115d76d98" category="list-text">Nercio 无服务器功能</block>
  <block id="89aa84cdf5db1bece2993801c78914de" category="inline-link"><block ref="89aa84cdf5db1bece2993801c78914de" category="inline-link-rx"></block></block>
  <block id="93eac034cc1c1aaedaf6ed41063825ee" category="paragraph"><block ref="93eac034cc1c1aaedaf6ed41063825ee" category="inline-link-rx"></block></block>
  <block id="b5266d58998338015b5e02ee7e84a833" category="list-text">MLRun 开源渠道业务流程框架</block>
  <block id="b96a861dccea968edc0b7a9ff96203e9" category="inline-link"><block ref="b96a861dccea968edc0b7a9ff96203e9" category="inline-link-rx"></block></block>
  <block id="70a8a001358e056f435199da7e17e427" category="paragraph"><block ref="70a8a001358e056f435199da7e17e427" category="inline-link-rx"></block></block>
  <block id="b3f90aaddad391963c2090db8f1b727e" category="list-text">NVIDIA DGX-1 系统</block>
  <block id="45a310b0e4b087b75cb073303044f6f9" category="inline-link"><block ref="45a310b0e4b087b75cb073303044f6f9" category="inline-link-rx"></block></block>
  <block id="af828c56c03364ebbde4c582adeb8de3" category="paragraph"><block ref="af828c56c03364ebbde4c582adeb8de3" category="inline-link-rx"></block></block>
  <block id="d6a377b23d0f4dbe3f5bf91d5f6abf74" category="list-text">NVIDIA Tesla V100 Tensor 核心 GPU</block>
  <block id="fad8218d69ce01748faed5492aa5d3ef" category="inline-link"><block ref="fad8218d69ce01748faed5492aa5d3ef" category="inline-link-rx"></block></block>
  <block id="a724832176ce84a9d4be5c34e44891d3" category="paragraph"><block ref="a724832176ce84a9d4be5c34e44891d3" category="inline-link-rx"></block></block>
  <block id="0df7621d860637a2e6e462c56322edab" category="list-text">NVIDIA GPU 云</block>
  <block id="5c75bfead88762783d54deaaa3d62735" category="inline-link"><block ref="5c75bfead88762783d54deaaa3d62735" category="inline-link-rx"></block></block>
  <block id="839d9b8469a8d9554891a7515a2b9be7" category="paragraph"><block ref="839d9b8469a8d9554891a7515a2b9be7" category="inline-link-rx"></block></block>
  <block id="b2412d3528eff2c1e191154bf1ecfd60" category="list-text">NetApp AFF 系统</block>
  <block id="584122d1d5e8c2c4232e029a6896ba40" category="list-text">AFF 产品规格</block>
  <block id="9a84c14d2692222552174943486e7136" category="inline-link"><block ref="9a84c14d2692222552174943486e7136" category="inline-link-rx"></block></block>
  <block id="0d9d8991a05834f0e52a99b37ce360b8" category="paragraph"><block ref="0d9d8991a05834f0e52a99b37ce360b8" category="inline-link-rx"></block></block>
  <block id="5f662f6dc276dd5a2a83440d0fe63e9b" category="list-text">适用于 AFF 的 NetApp 闪存优势</block>
  <block id="9dcd8a7bfc88cf6bbca4b422861950bf" category="inline-link"><block ref="9dcd8a7bfc88cf6bbca4b422861950bf" category="inline-link-rx"></block></block>
  <block id="72cf25e9f1e13167cd0dde6f285552ea" category="paragraph"><block ref="72cf25e9f1e13167cd0dde6f285552ea" category="inline-link-rx"></block></block>
  <block id="30df7f622635480ab538fb3016f9c36a" category="list-text">ONTAP 9.x 文档</block>
  <block id="a5bc7bee9fd33d829e41934aedd6404c" category="inline-link"><block ref="a5bc7bee9fd33d829e41934aedd6404c" category="inline-link-rx"></block></block>
  <block id="a5d59e86f09bafae4247836d5135b6a3" category="paragraph"><block ref="a5d59e86f09bafae4247836d5135b6a3" category="inline-link-rx"></block></block>
  <block id="35d8efcf211e40a836698bff14ed0ff6" category="list-text">NetApp FlexGroup 技术报告</block>
  <block id="1ab29fc7fde3319a82a477ec308cf820" category="inline-link"><block ref="1ab29fc7fde3319a82a477ec308cf820" category="inline-link-rx"></block></block>
  <block id="7a26d62dac2be507dcc3e5b9da0ed765" category="paragraph"><block ref="7a26d62dac2be507dcc3e5b9da0ed765" category="inline-link-rx"></block></block>
  <block id="af2063646dcea30a4bac90a1c51b14aa" category="list-text">NetApp ONTAP AI</block>
  <block id="47c991332229e0cbfe947beaa428ea61" category="list-text">采用 DGX-1 的 ONTAP AI 和 Cisco 网络设计指南</block>
  <block id="b141781260425e95eee945147e2f0d99" category="inline-link"><block ref="b141781260425e95eee945147e2f0d99" category="inline-link-rx"></block></block>
  <block id="9fbee18519e76388280bc1f8e3fd6c7e" category="paragraph"><block ref="9fbee18519e76388280bc1f8e3fd6c7e" category="inline-link-rx"></block></block>
  <block id="0be3b0697a0ffdfe9065df24ec1d3e16" category="list-text">《采用 DGX-1 的 ONTAP AI 和 Cisco 网络部署指南》</block>
  <block id="921f17c41dea89b0a711f380e9864e09" category="inline-link"><block ref="921f17c41dea89b0a711f380e9864e09" category="inline-link-rx"></block></block>
  <block id="aef3d0752148699921f8a251537d5ff3" category="paragraph"><block ref="aef3d0752148699921f8a251537d5ff3" category="inline-link-rx"></block></block>
  <block id="205a4f16a51f3acd6dbba76dbeb10818" category="list-text">采用 DGX-1 和 Mellanox 网络设计指南的 ONTAP AI</block>
  <block id="07dc94af34e2f98bbc8328d8ef9ea1e0" category="inline-link"><block ref="07dc94af34e2f98bbc8328d8ef9ea1e0" category="inline-link-rx"></block></block>
  <block id="0a9e1455c4a5a9965867a5efd6b8cc9b" category="paragraph"><block ref="0a9e1455c4a5a9965867a5efd6b8cc9b" category="inline-link-rx"></block></block>
  <block id="913c29df09bcb5715ed7a48c12f3a0da" category="list-text">ONTAP AI 网络</block>
  <block id="ae2703e9b1dff6da048c786142c2e7db" category="list-text">Cisco Nexus 3232C 系列交换机</block>
  <block id="bb31172f259c591005fd4cbcdbfadd11" category="inline-link"><block ref="bb31172f259c591005fd4cbcdbfadd11" category="inline-link-rx"></block></block>
  <block id="96eb8aa0e86d101fdf87284d7d6f1bc7" category="paragraph"><block ref="96eb8aa0e86d101fdf87284d7d6f1bc7" category="inline-link-rx"></block></block>
  <block id="8a27a2062df55e0aa73964ea8ec2ab55" category="list-text">Mellanox 横向扩展 SN2000 以太网交换机系列</block>
  <block id="87a849c2f3c412a491f97674d5e27ed1" category="inline-link"><block ref="fd77c1cd25d650110f7047fa02f8327d" category="inline-link-rx"></block></block>
  <block id="a6c16c720941d75800533dedd69929cc" category="paragraph"><block ref="ad90d1952f7d0f85370461937e4484b7" category="inline-link-rx"></block></block>
  <block id="7450cfde7058dc5e1f7909d0280fd7ae" category="list-text">Azure NetApp Files</block>
  <block id="142f782bb2b326679982208fe40cec31" category="section-title">NVIDIA DeepOps</block>
  <block id="337f05fad2de58e4a8b74cb25536b52d" category="doc">设置概述</block>
  <block id="666f45aef7a28ef5ba6e4bfb2f71bcee" category="section-title">安装 Iguazio</block>
  <block id="b681b0e4b3576aa1cd854e2b66c16dcd" category="paragraph">Iguazio 可以安装在内部或云提供商上。配置可以作为一项服务来完成，并由 Iguazio 或客户进行管理。在这两种情况下， Iguazio 都会提供一个部署应用程序（ Provazio ）来部署和管理集群。</block>
  <block id="3b31e2e4387e938056251a113831e6da" category="inline-link">NVA-1121</block>
  <block id="8334797b9b3383d4f48d98178b8845ea" category="inline-link">此页面</block>
  <block id="ade8a7efee71036d2ca57676a54b31e3" category="paragraph">有关内部安装，请参见<block ref="c37aff28e1a25306bf31a11e21ff2c71" category="inline-link-rx"></block> 用于计算，网络和存储设置。Iguazio 的内部部署由 Iguazio 提供，客户无需支付额外费用。请参见<block ref="d273dd0a16e6003b56381a70823807f7" category="inline-link-rx"></block> DNS 和 SMTP 服务器配置。Provazio 安装页面如下所示。</block>
  <block id="8e72dced5918c4009ff80044ba6f44db" category="paragraph"><block ref="8e72dced5918c4009ff80044ba6f44db" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c16d8d5e717cd029389f76abddf769b7" category="inline-link-macro">下一步：配置 Kubernetes 集群</block>
  <block id="1d42e0b2a8893ff00a35554162554936" category="paragraph"><block ref="1d42e0b2a8893ff00a35554162554936" category="inline-link-macro-rx"></block></block>
  <block id="3ec365dd533ddb7ef3d1c111186ce872" category="cell">详细信息</block>
  <block id="1d1a594959ec615f56516f5d0f5e8ddb" category="cell">NFS</block>
  <block id="ed4a202c34987f40d5e245e76a65a243" category="paragraph">下图显示了建议的对话 AI 系统架构。您可以使用语音信号或文本输入与系统进行交互。如果检测到语音输入，则 JARVIS AI as-service （ AIaaS ）将执行 As1 ，以便为对话框管理器生成文本。对话框管理器会记住对话状态，将文本路由到相应的服务，并将命令传递到实施引擎。JARVIS NLP 服务会输入文本，识别意向和实体，并将这些意向和实体插槽输出回对话框管理器，然后由该对话框管理器向执行引擎发送操作。履行引擎由问题解答用户查询的第三方 API 或 SQL 数据库组成。从实施引擎收到结果后，对话管理器会将文本路由到 JarVis TTSAIaaS ，以便为最终用户生成音频响应。我们可以归档对话历史记录，为 Nemo 培训添加意向和插槽，以便随着更多用户与系统交互， NLP 服务得到改进。</block>
  <block id="308a0722262fbc3adde5d5d900ad0c36" category="paragraph"><block ref="308a0722262fbc3adde5d5d900ad0c36" category="inline-image-macro-rx" type="image"></block></block>
  <block id="863eef2617ffc374c485389aabdd8a24" category="paragraph">此解决方案已通过一个 DGX 工作站和一个 AFF A220 存储系统的验证。JARVIS 需要使用 T4 或 V100 GPU 来执行深度神经网络计算。</block>
  <block id="6c4fbfa85e86ba1acd8a66b367a3b2c4" category="paragraph">下表列出了在测试中实施解决方案所需的硬件组件。</block>
  <block id="71c9e70899509bff35197ba9da10dafc" category="cell">T4 或 V100 GPU</block>
  <block id="8f452959667e7665cddf2484ddca1724" category="cell">NVIDIA DGX Station</block>
  <block id="f7a05af899e536cde0a9c8476c2da0a1" category="paragraph">下表列出了在测试中实施解决方案所需的软件组件。</block>
  <block id="5acec1d6c6e07042eb0c19bc926d2633" category="cell">版本或其他信息</block>
  <block id="5339d389f2f896062fb28b05454dc94a" category="cell">NetApp ONTAP 数据管理软件</block>
  <block id="eaf2f97729e8d5e4d205672da8afc9a5" category="cell">9.6</block>
  <block id="efdec37786e687a58664ebd4ef6bdba4" category="cell">Cisco NX-OS 交换机固件</block>
  <block id="976d6c35e21478ef03ca2cec2a74dc71" category="cell">7.0 （ 3 ） I6 （ 1 ）</block>
  <block id="a62649c559be1634e22dd7df0b58ad32" category="cell">NVIDIA DGX 操作系统</block>
  <block id="4a5be8fea83a32ad5c7fc31b02ef1028" category="cell">4.0.4 — Ubuntu 18.04 LTS</block>
  <block id="0664d9eb73230b2a0b514b0facae8ade" category="cell">NVIDIA JarVis Framework</block>
  <block id="cc5f21cb121669006a19c9fde049f048" category="cell">EA v0.2</block>
  <block id="dfcc0491fc5a6e738ca8b5ef3a258093" category="cell">NVIDIA Nemo</block>
  <block id="317fe32bf712dffb43ddc0ee8dde8c3c" category="cell">nvcr.io/nvidia/nemo ： v0.10</block>
  <block id="44769dc982b2126503d2d014bcf7c15a" category="cell">Docker 容器平台</block>
  <block id="0cc9a8e76e0a79d0e0072e0a0d675fe5" category="cell">18.06.1-ce [e68fc7a]</block>
  <block id="3032d0de2852f0bb1e13142c2c47cd5b" category="inline-link-macro">接下来：使用 Jarvis ， Cloud Sync 和 Nemo 概述构建虚拟助手</block>
  <block id="5cefb81f0324c44ec13c02fa7700924b" category="paragraph"><block ref="5cefb81f0324c44ec13c02fa7700924b" category="inline-link-macro-rx"></block></block>
  <block id="9783bbad26249ed7f40d89e12ba42020" category="doc">运行：适用于 AI 工作负载编排的 AI 平台</block>
  <block id="cb39fb629a91fdf37928a15d38e05318" category="list-text">加快创新速度。通过将运行： AI 资源池化，排队和优先级划分机制与 NetApp 存储系统结合使用，研究人员可以消除基础架构管理方面的麻烦，并可以专注于数据科学。运行： AI 和 NetApp 客户可以根据需要运行任意数量的工作负载，而不会出现计算或数据管道瓶颈，从而提高工作效率。</block>
  <block id="8df86cf2931aab70fd9ad1f919f40449" category="list-text">提高团队工作效率。Run ： AI 公平算法可确保所有用户和团队都能获得他们应得的资源份额。可以预设优先级项目的策略，该平台支持将资源从一个用户团队动态分配到另一个用户团队，从而帮助用户及时访问所需的 GPU 资源。</block>
  <block id="c835378d4be1896f62ef5d2760340909" category="list-text">提高 GPU 利用率。通过 Run ： AI 计划程序，用户可以轻松地使用部分 GPU ，整数 GPU 和多个 GPU 节点在 Kubernetes 上进行分布式培训。这样， AI 工作负载就可以根据需求运行，而不是根据容量运行。数据科学团队可以在同一基础架构上运行更多 AI 实验。</block>
  <block id="5960deb1522a82336a7a31213acea4b0" category="inline-link-macro">接下来：解决方案技术</block>
  <block id="dde440f8f7c47863e65c2d82a820b8a5" category="paragraph"><block ref="d9533ea5c6cb975dff314dace88f2aa4" category="inline-link-macro-rx"></block>。</block>
  <block id="fa752e98365b630341b8478c89a6757f" category="doc">正在配置 Kubernetes 集群</block>
  <block id="f12c340e651d989970371432778f9be2" category="paragraph">本节将分别分为两部分，分别用于云和内部部署。</block>
  <block id="ee06675a624f2ec74e8b71b5a57f8f9e" category="section-title">云部署 Kubernetes 配置</block>
  <block id="b513a0297a0d2efdebed8ce18e2f1715" category="paragraph">通过 NetApp Cloud Manager ，您可以定义与 Iguazio Kubernetes 集群的连接。要使卷可用， Trident 需要访问集群中的多个资源。</block>
  <block id="2d5bc331cc722113dd483838e908804c" category="list-text">要启用访问，请从一个 Iguazio 节点获取 Kubernetes 配置文件。该文件位于 ` /home/Iguazio/.Kube/config 下。` 将此文件下载到桌面。</block>
  <block id="17c6b0de5b91c5c06a0d8173c89110d8" category="list-text">转至 Discover Cluster 以进行配置。</block>
  <block id="df37cca51036f4c5b59db211df5354bc" category="paragraph"><block ref="df37cca51036f4c5b59db211df5354bc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b848e07dc3f62b4307419421d844f123" category="list-text">上传 Kubernetes 配置文件。请参见下图。</block>
  <block id="5bcc42d0a2624f1586064488c3484529" category="paragraph"><block ref="5bcc42d0a2624f1586064488c3484529" category="inline-image-macro-rx" type="image"></block></block>
  <block id="63de24a45facebf9f65cb6578847f2b4" category="list-text">部署 Trident 并将卷与集群相关联。有关定义永久性卷并将其分配给 Iguazio 集群的信息，请参见下图。此过程将在 Iguazio 的 Kubernetes 集群中创建永久性卷（ PV ）。在使用它之前，您必须定义永久性卷声明（ PVC ）。</block>
  <block id="eee185b539f0e52d8b64916066463222" category="paragraph"><block ref="eee185b539f0e52d8b64916066463222" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8b69025b2efa1b2ccb917bc911d30ccd" category="section-title">内部部署 Kubernetes 配置</block>
  <block id="31bbf80f0649d07d3e8340123f1a6963" category="inline-link">TR-4798</block>
  <block id="5be8900878997a404baf02b07ff271c6" category="paragraph">有关 NetApp Trident 的内部安装，请参见<block ref="7ccf7acaa308282d5274101157fd43e5" category="inline-link-rx"></block> 了解详细信息。配置 Kubernetes 集群并安装 NetApp Trident 后，您可以将 Trident 连接到 Iguazio 集群以启用 NetApp 数据管理功能，例如为数据和型号创建 Snapshot 副本。</block>
  <block id="50af1dc10d66589053fc82292fe61444" category="inline-link-macro">下一步：定义永久性卷声明</block>
  <block id="bb0c0300eb362a15d2d6480d832ecfbe" category="paragraph"><block ref="bb0c0300eb362a15d2d6480d832ecfbe" category="inline-link-macro-rx"></block></block>
  <block id="677b450634b1a6a563206526cb4d9075" category="doc">TR-4858 ：《 NetApp Orchestration 解决方案与 Run ： AI 》</block>
  <block id="0959ee1db60e15d1e8e42d1206ca6a19" category="paragraph">Rick Huang ， David Arnette ， Sung-Han Lin ， NetApp Yaron Goldberg ， Run ： AI</block>
  <block id="c87cafeb37457343ef978bbf8cad88b5" category="paragraph">NetApp AFF 存储系统可提供极致性能和行业领先的混合云数据管理功能。NetApp 与 Run ： AI 合作展示了 NetApp ONTAP AI 解决方案在人工智能（ AI ）和机器学习（ ML ）工作负载方面的独特功能，这些功能可提供企业级性能，可靠性和支持。Run ： AI 工作负载的 AI 流程编排增加了一个基于 Kubernetes 的计划和资源利用率平台，可帮助研究人员管理和优化 GPU 利用率。NetApp ， NVIDIA 和 Run ： AI 的解决方案与 NVIDIA DGX 系统相结合，可提供一个专为企业 AI 工作负载构建的基础架构堆栈。本技术报告为客户构建对话式 AI 系统以支持各种用例和行业垂直市场提供了方向性指导。其中包括有关部署 Run ： AI 和 NetApp AFF A800 存储系统的信息，并可作为参考架构来快速成功地部署 AI 计划。</block>
  <block id="cae36004793b7131e0fc2323f598e7bb" category="list-text">为容器化微服务等基于 Kubernetes 的用例设计 AI 模型和软件开发解决方案的企业架构师</block>
  <block id="5d138e1f42e31fb645a3e3f5a8d37929" category="list-text">数据科学家正在寻找高效的方法，以便在具有多个团队和项目的集群环境中实现高效的模型开发目标</block>
  <block id="0d43a0c7aeec219a746e836746c0b208" category="list-text">负责维护和运行生产模型的数据工程师</block>
  <block id="00d764d2e91381a99d6f2c7b108e7c8e" category="list-text">希望打造最佳 Kubernetes 集群资源利用体验并通过 AI 计划缩短上市时间的高管和 IT 决策者和业务主管</block>
  <block id="7a83f363d45e73d7915a600e1bbc92ba" category="inline-link-macro">接下来：解决方案概述。</block>
  <block id="29d90e44a805022079f5ad8bc748f89f" category="paragraph"><block ref="29d90e44a805022079f5ad8bc748f89f" category="inline-link-macro-rx"></block></block>
  <block id="01360221b637a04fa184dc6b9355fa46" category="summary">在创建此解决方案时，我们执行了简单的性能比较。我们使用 Kubernetes 执行了多个标准 NetApp 基准测试作业，并将基准测试结果与使用简单 Docker run 命令执行的执行情况进行了比较。</block>
  <block id="0e2f0f77407bfd956f621e13b8c1be34" category="doc">性能测试</block>
  <block id="467941822b3a557a8db7197e12285f14" category="paragraph">在创建此解决方案时，我们执行了简单的性能比较。我们使用 Kubernetes 执行了多个标准 NetApp AI 基准测试作业，并将基准测试结果与使用简单 Docker run 命令执行的执行情况进行了比较。我们没有发现任何明显的性能差异。因此，我们得出的结论是，使用 Kubernetes 编排容器化 AI 培训作业不会对性能产生负面影响。有关性能比较结果，请参见下表。</block>
  <block id="74575b23d5305310e904f87eb02ff980" category="cell">基准测试</block>
  <block id="239658e016e3d5d06ae719d280a79fec" category="cell">数据集</block>
  <block id="c269688995d2959579fca276425898b8" category="cell">Docker 运行（映像 / 秒）</block>
  <block id="b3acbf223e2bb7a3a796e3b698a7748d" category="cell">Kubernetes （图像 / 秒）</block>
  <block id="6de4dbc350a60fb9d5ea80ac7854681d" category="cell">单节点 TensorFlow</block>
  <block id="2ec7cdace40d8a092e842288dfe854f7" category="cell">合成数据</block>
  <block id="a5ee9f5535788c17b947b7f2d8354351" category="cell">6,667.2475</block>
  <block id="b573d76a35b8d44de29524f11e873c60" category="cell">6,661.93125</block>
  <block id="b318879f822314efe94c2f096d06465c" category="cell">ImageNet</block>
  <block id="f9622443c76d58838af97acd4f0c12ed" category="cell">6,570.2025</block>
  <block id="f93ed9c22230ae6e2ed85323e8d3dff7" category="cell">6,530.59125</block>
  <block id="83817408eae44458daefc1a9516ad170" category="cell">同步分布式双节点 TensorFlow</block>
  <block id="d4b63997154f30598f823403bb4df7ba" category="cell">13,213.70625</block>
  <block id="a328a929a422e4b69be5bbe94694282e" category="cell">13,218.288125</block>
  <block id="209f721713f475a9a0f4ba2743b40853" category="cell">12,941.69125</block>
  <block id="1f07dab13107a813c6d35bb76648ec48" category="cell">12,881.33875</block>
  <block id="66bc9494be0116470b223f2e07873f77" category="summary">本页介绍部署 Kubernetes 集群以实施 NetApp AI 控制平面解决方案时必须完成的任务。如果您已有 Kubernetes 集群，则只要您运行的是 Kubernetes 和 NetApp Trident 支持的 Kubernetes 版本，就可以跳过本节。</block>
  <block id="2034cc978abb3057c4cf27e92b16ee74" category="doc">Kubernetes 部署</block>
  <block id="7236436bac67d8eaadbf52811774b916" category="inline-link">Kubeflow 官方文档</block>
  <block id="7c1ab988344d6a8d8cd9a30d6240955a" category="paragraph">本节介绍部署 Kubernetes 集群以实施 NetApp AI 控制平面解决方案时必须完成的任务。如果您已有 Kubernetes 集群，则只要您运行的是 Kubernetes 和 NetApp Trident 支持的 Kubernetes 版本，就可以跳过本节。有关 Kubeflow 支持的 Kubernetes 版本列表，请参见<block ref="01b2e82a7080cdbeb934280240df876e" category="inline-link-rx"></block>。有关 Trident 支持的 Kubernetes 版本列表，请参见<block ref="e6b3671f5db59046617458d31ef4f50b" category="inline-link-rx"></block>。</block>
  <block id="ef8333b35fd982099a6ca0c7799b5618" category="paragraph">对于采用采用 NVIDIA GPU 的裸机节点的内部 Kubernetes 部署， NetApp 建议使用 NVIDIA 的 DeepOps Kubernetes 部署工具。本节概述了使用 DeepOps 部署 Kubernetes 集群的过程。</block>
  <block id="e5595c75c723712666f834213ee6568f" category="paragraph">在执行本节所述的部署练习之前，我们假定您已执行以下任务：</block>
  <block id="612cba744b0eac9a7f153d2c4b8975da" category="list-text">您已按照标准配置说明配置任何裸机 Kubernetes 节点（例如，属于 ONTAP AI POD 的 NVIDIA DGX 系统）。</block>
  <block id="5a881e8e37e19924ac592136b5e7cfd3" category="inline-link">DeepOps GitHub 站点</block>
  <block id="452f5f6e8da4512f6cce223a76ae3558" category="list-text">您已在所有 Kubernetes 主节点和工作节点以及部署跳转主机上安装受支持的操作系统。有关 DeepOps 支持的操作系统列表，请参见<block ref="253a2cf380d7db7eaadb375aa91e2221" category="inline-link-rx"></block>。</block>
  <block id="a711e4ccced882d1762a8c653be8e921" category="section-title">使用 NVIDIA DeepOps 安装和配置 Kubernetes</block>
  <block id="47302a7393e0a038a150e679c9b3e80d" category="paragraph">要使用 NVIDIA DeepOps 部署和配置 Kubernetes 集群，请从部署跳转主机执行以下任务：</block>
  <block id="5c51dc3fcfdd9653809e90fa3948c2f4" category="inline-link">Getting Started 页面</block>
  <block id="0e91d2e60705ecb1730e9b96510019af" category="list-text">按照上的说明下载 NVIDIA DeepOps<block ref="6fb71807bf6999d2aec034d498e3ebf6" category="inline-link-rx"></block> 在 NVIDIA DeepOps GitHub 站点上。</block>
  <block id="2ed5978807d3da780c60a19b3f38a293" category="inline-link">Kubernetes 部署指南页面</block>
  <block id="5c18e4efa8c5cc9efb26e3f748b4e26d" category="list-text">按照上的说明在集群中部署 Kubernetes<block ref="b336a8bbad16f0e8d58bf87e261f51fa" category="inline-link-rx"></block> 在 NVIDIA DeepOps GitHub 站点上。</block>
  <block id="cb2418c01859c7704da751aa5a7d2421" category="doc">解决方案概述</block>
  <block id="4ed0a51bc1c995651eec6f50591eec1a" category="section-title">NetApp ONTAP AI 和 Cloud Sync</block>
  <block id="bff183f31dd9706bece9767f4388a819" category="paragraph">由 NVIDIA DGX 系统和 NetApp 云连接存储系统提供支持的 NetApp ONTAP AI 架构由 NetApp 和 NVIDIA 开发并验证。此参考架构为 IT 组织提供了以下优势：</block>
  <block id="88acd7d612f76d7928b6b0448806e1ea" category="list-text">为各种性能和成本点提供一系列存储选项 NetApp ONTAP AI 可将 DGX 系统和 NetApp AFF A220 存储系统与一流的网络紧密集成在一起。NetApp ONTAP AI 和 DGX 系统消除了设计复杂性和猜测性工作，从而简化了 AI 部署。客户可以从小规模入手，无中断地扩展系统，同时智能地管理从边缘到核心再到云再到云的数据。</block>
  <block id="69be3bc10a1ad78dbe823def1907c730" category="paragraph">通过 NetApp Cloud Sync ，您可以通过各种协议轻松移动数据，无论是在两个 NFS 共享，两个 CIFS 共享还是一个文件共享与 Amazon S3 ， Amazon Elastic File System （ EFS ）或 Azure Blob 存储之间。主动 - 主动操作意味着您可以继续同时使用源和目标，并在需要时逐步同步数据更改。通过使您能够在任何源系统和目标系统之间移动和增量同步数据，无论是内部系统还是基于云的系统， Cloud Sync 为您打开了多种新的数据使用方式。在内部系统，云入网和云迁移或协作和数据分析之间迁移数据变得非常容易。下图显示了可用的源和目标。</block>
  <block id="1e01782ef13699818c9eb9eab796bffc" category="paragraph">在对话式 AI 系统中，开发人员可以利用 Cloud Sync 将对话历史记录从云归档到数据中心，以便对自然语言处理（ NLP ）模型进行脱机培训。通过培训模式识别更多意向，对话式 AI 系统将更好地处理最终用户提出的更复杂的问题。</block>
  <block id="45f2cdf50f8bb89b245e814009b4244c" category="section-title">NVIDIA JarVis 多模式框架</block>
  <block id="7e3a7922ac3cd73ae37b26c0b9c99ee3" category="paragraph"><block ref="7e3a7922ac3cd73ae37b26c0b9c99ee3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7ad66827309f61fd22dc58cbbb2f8273" category="inline-link">NVIDIA JarVis</block>
  <block id="241d985aedf9124840f9adfa9496755d" category="paragraph"><block ref="9f89431954623c8e5c580e4350b427e7" category="inline-link-rx"></block> 是一个端到端框架，用于构建对话式 AI 服务。它包括以下经过 GPU 优化的服务：</block>
  <block id="bb3e7af8136880e3a92118c172aed302" category="list-text">自动语音识别（ Automatic Speech Recognition ， As1 ）</block>
  <block id="3c07089a439435a2998f14ea97f90825" category="list-text">自然语言理解（ NLF ）</block>
  <block id="8375cc1d63ce172363c4ed9c3cddd508" category="list-text">与域特定的履行服务集成</block>
  <block id="84fb561f92aa70d5e118f429e98ee99b" category="list-text">文本语音转换（ TTS- 语音转换）</block>
  <block id="9478a4e1be70e1be0fdd56f3929bbdc2" category="list-text">基于计算机视觉（ CV ） Jarvis 的服务使用最先进的深度学习模型来应对实时对话 AI 这一复杂且极具挑战性的任务。要与最终用户进行实时自然的交互，模型需要在 300 毫秒内完成计算。自然交互具有挑战性，需要多模式感知集成。模型管道也很复杂，需要在上述服务之间进行协调。</block>
  <block id="c29efa8b1d5c9d6d647a8ce72bef1b74" category="paragraph">JarVis 是一个完全加速的应用程序框架，用于构建使用端到端深度学习管道的多模式对话 AI 服务。JARVIS 框架包括经过预先培训的人工智能对话模型，工具以及针对语音，视觉和 NLU 任务优化的端到端服务。除了 AI 服务之外， JarVis 还支持您同时融合视觉，音频和其他传感器输入，以便在虚拟助手，多用户化和呼叫中心助理等应用程序中提供多用户，多上下文对话等功能。</block>
  <block id="dc3652fc64a2a6ea2a3cfd5c40443b16" category="paragraph"><block ref="4282ee73b9eecd67e90ed51f4f36b077" category="inline-link-rx"></block> 是一款开源 Python 工具包，用于使用易于使用的应用程序编程接口（ API ）构建，培训和微调 GPU 加速的一流对话 AI 模型。Nemo 使用 NVIDIA GPU 中的 Tensor 核心运行混合精度计算，并可轻松扩展到多个 GPU ，以提供尽可能高的训练性能。Nemo 用于为视频呼叫记录，智能视频助理以及医疗保健，金融，零售和电信等不同行业的自动呼叫中心支持等实时应用程序构建模型。</block>
  <block id="4e5ae683e2a399c166a1724b0aa6952e" category="paragraph">我们使用 Nemo 来训练模型，以便识别归档对话历史记录中用户问题的复杂意图。此培训将零售虚拟助手的功能扩展到了 Jarvis 所提供的功能之外。</block>
  <block id="053bc62e92a61e44afd338bcb27c422f" category="section-title">零售用例摘要</block>
  <block id="e1196fc000d661461f32bcaab7319c6a" category="inline-link">针对零售用例自定义状态和流程</block>
  <block id="8b6b761738b93e745ffa4f73dd233c08" category="paragraph">我们使用 NVIDIA Jarvis 构建了一个虚拟零售助理，可接受语音或文本输入并回答有关天气，关注点和库存定价的问题。对话式 AI 系统能够记住对话流，例如，如果用户未指定天气或感兴趣点的位置，可以询问跟进问题。系统还可以识别诸如 " 泰国食品 " 或 " 笔记本电脑内存 " 等复杂实体。 它了解自然语言问题，例如 " 下星期在洛杉矶会下雨吗？ " 有关零售虚拟助手的演示，请参见<block ref="0ba395e7fb59bace5ff35ab3c02ad737" category="inline-link-rx"></block>。</block>
  <block id="af8f881c5074e5e10cd7a34ccbaa9e57" category="paragraph"><block ref="af8f881c5074e5e10cd7a34ccbaa9e57" category="inline-link-macro-rx"></block></block>
  <block id="c755c33dca37a8aaffbf190bdf3f5fef" category="paragraph">此解决方案是在一个 NetApp AFF A800 系统，两个 DGX-1 服务器和两个 Cisco Nexus 3232C 100GbE 交换机上实施的。每个 DGX-1 服务器都通过四个 100GbE 连接连接连接到 Nexus 交换机，这些连接可通过使用基于融合以太网（ RoCE ）的远程直接内存访问（ RDMA ）进行 GPU 间通信。NFS 存储访问的传统 IP 通信也发生在这些链路上。每个存储控制器均使用四个 100GbE 链路连接到网络交换机。下图显示了本技术报告中用于所有测试场景的 ONTAP AI 解决方案架构。</block>
  <block id="782c9fdc3f29358987c2f5b99fe9e6b9" category="paragraph"><block ref="782c9fdc3f29358987c2f5b99fe9e6b9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bf8b135ff3c775c5b9bbba1b2f7a61ce" category="section-title">此解决方案中使用的硬件</block>
  <block id="a4ec49885c617f2b2500789af7e6eebf" category="paragraph">此解决方案已使用 ONTAP AI 参考架构两个 DGX-1 节点和一个 AFF A800 存储系统进行了验证。请参见<block ref="c37aff28e1a25306bf31a11e21ff2c71" category="inline-link-rx"></block> 有关此验证中使用的基础架构的更多详细信息。</block>
  <block id="fe59cdcdefd7c53625e1e745b9c5be09" category="cell">DGX-1 系统</block>
  <block id="53270fbfda62583949b287e08ae3d063" category="cell">AFF A800</block>
  <block id="6da64488bfb7f3216610e30ced34ff23" category="cell">Nexus 3232C 交换机</block>
  <block id="8e926487edd9348114ada5fa88a732df" category="paragraph">此解决方案已通过安装了 Run ： AI 操作员的基本 Kubernetes 部署进行验证。Kubernetes 是使用部署的<block ref="1c894f7463797b81796e78efc8345fb0" category="inline-link-rx"></block> 部署引擎，用于为生产就绪环境部署所有必需的组件。DeepOps 会自动部署<block ref="ca1c90879f9a0e8dc4ff805fb398f7ff" category="inline-link-rx"></block> 为了与 K8s 环境实现持久存储集成，我们创建了默认存储类，以便容器可以利用 AFF A800 存储系统中的存储。有关在 ONTAP AI 上使用 Kubernetes 进行 Trident 的详细信息，请参见<block ref="7ccf7acaa308282d5274101157fd43e5" category="inline-link-rx"></block>。</block>
  <block id="a2525584dd9d2a9522ddea95841c06b3" category="cell">9.6 第 4 页</block>
  <block id="80afba45eb055fc9bdc48c90d1debd06" category="cell">Kubernetes 版本</block>
  <block id="4bbe90408850f459864a71c8054732f1" category="cell">1.17</block>
  <block id="f1112223b41fddc71fd6a626582dfb78" category="cell">Trident 版本</block>
  <block id="43d66966083b0e0feac8fb9be14ba5b8" category="cell">20.04.0</block>
  <block id="e993176eed424766bc6bd4758eaf2cb6" category="cell">运行： AI 命令行界面</block>
  <block id="5e6305186adf6e7dcf03f5cbfc802c49" category="cell">v2.1.13</block>
  <block id="f3eeed8e4b2791f80e2f123c4720aef5" category="cell">运行： AI Orchestration Kubernetes Operator 版本</block>
  <block id="bf8c2933a2f54ce25fe986f66d3bffa3" category="cell">1.0.39</block>
  <block id="076ca75e2fc5b6ea85d72b0a9adc8844" category="inline-link">运行： AI GPU 集群前提条件</block>
  <block id="eaec7f01752b17abf6125d8f29a8543c" category="paragraph">有关 Run ： AI 的其他软件要求，请参见<block ref="98bb21d82bcd499a183c82dcfc9b02f3" category="inline-link-rx"></block>。</block>
  <block id="cc352f05f03c970b081b8afa29693b60" category="inline-link-macro">接下来：使用 Run AI 优化集群和 GPU 利用率</block>
  <block id="b1b09355c9538fe149372d3728c98bb1" category="paragraph"><block ref="b1b09355c9538fe149372d3728c98bb1" category="inline-link-macro-rx"></block></block>
  <block id="7fd01fa95033c040ddfe882c5258bda9" category="paragraph">= ： hardbress ：：： nod页 脚：：： icons ：字体： linkattrs ：：： imagesdir ： ./../media/</block>
  <block id="dbb4dd9a11f48db13d63eedaae717fe5" category="doc">为数据科学团队创建项目并分配 GPU</block>
  <block id="22d09d229a06f294b0f45804f8e639d3" category="paragraph">研究人员可以通过 Run ： AI CLI ， Kubeflow 或类似流程提交工作负载。为了简化资源分配并创建优先级， Run ： AI 引入了项目概念。项目是指将项目名称与 GPU 分配和首选项关联的配额实体。这是一种管理多个数据科学团队的简单便捷的方式。</block>
  <block id="c0bd05e9d88cf015eac684873bfd14c7" category="paragraph">提交工作负载的研究人员必须将项目与工作负载请求相关联。运行： AI 计划程序会将请求与当前分配和项目进行比较，并确定是否可以为工作负载分配资源或是否应保持待定状态。</block>
  <block id="800f40fa67f69116bf6f38cd07456608" category="paragraph">作为系统管理员，您可以在 Run ： AI projects 选项卡中设置以下参数：</block>
  <block id="9c429f2284a95aaa299c7d85ccb16734" category="list-text">* 模拟项目。 * 为每个用户设置一个项目，为每个用户团队设置一个项目，并为每个实际组织项目设置一个项目。</block>
  <block id="b2f1422cf0d082a495bbf865b9a5621d" category="list-text">* 项目配额。 * 每个项目都与一个 GPU 配额相关联，可以同时为此项目分配 GPU 配额。这是一个有保障的配额，因为使用此项目的研究人员无论在集群中处于何种状态，都可以获得这一数量的 GPU 。通常，项目分配总和应等于集群中的 GPU 数量。除此之外，此项目的用户还可以收到超配额。只要未使用 GPU ，使用此项目的研究人员就可以获得更多 GPU 。我们在中演示了超额配额测试场景和公平考虑事项<block ref="9563fd9ab6978412dc97d80a70e51786" category="inline-link-rx"></block>，<block ref="a8ad108feafc827856baa28b0b9070ed" category="inline-link-rx"></block>，和<block ref="be867f64efefe193012b1dfc6c82f783" category="inline-link-rx"></block>。</block>
  <block id="20a3a45fbbd9502add12fd216350d569" category="list-text">创建新项目，更新现有项目并删除现有项目。</block>
  <block id="3bf13b237342258b6ddb3f167d679a3b" category="inline-link">运行： AI 文档</block>
  <block id="77332641abf52ec5dc1af8b23b2339f3" category="list-text">* 限制作业在特定节点组上运行 * 。您可以分配仅在特定节点上运行的特定项目。如果项目团队需要专用硬件，例如具有足够内存的硬件，则此功能非常有用。或者，项目团队也可能是特定硬件的所有者，这些硬件是通过专门预算获得的，或者您可能需要直接构建或交互式工作负载来处理较弱的硬件，并将较长的培训或无人看管的工作负载定向到较快的节点。有关对节点进行分组并为特定项目设置相关性的命令，请参见 <block ref="eae60ce89b8727160634b52e7654bf73" category="inline-link-rx"></block>。</block>
  <block id="2bd802cca9bf193b441123437f5d39ca" category="list-text">* 限制交互作业的持续时间 * 。研究人员经常忘记关闭交互式作业。这可能会导致资源浪费。一些组织倾向于限制交互式作业的持续时间并自动关闭这些作业。</block>
  <block id="10c2495ded559d79de96be22751712dc" category="paragraph">下图显示了已创建四个团队的 " 项目 " 视图。每个团队分配不同数量的 GPU 来处理不同的工作负载， GPU 总数等于由两个 DGX-1 组成的集群中可用 GPU 总数。</block>
  <block id="9ba047faa1d241a6153be986be27097f" category="paragraph"><block ref="9ba047faa1d241a6153be986be27097f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c4804b15e4766599ceade052b5ca8af9" category="inline-link-macro">下一步：在 Run AI CLI 中提交作业</block>
  <block id="9c6088fad9917e07026030c1d3eaad09" category="paragraph"><block ref="9c6088fad9917e07026030c1d3eaad09" category="inline-link-macro-rx"></block></block>
  <block id="9e40fd8f5f0e113c758dfa63adc1221d" category="summary">Kubeflow 能够快速配置新的 Jupyter 笔记本电脑服务器，以充当数据科学家工作空间。要使用 Kubeflow 配置新的 Jupyter 笔记本电脑服务器，请执行此页面上列出的任务。</block>
  <block id="7fad49a67f130cbd7629be2d6c719aea" category="doc">为数据科学家或开发人员配置 Jupyter 笔记本电脑工作空间</block>
  <block id="52d84951381eb0ab7a285dd32b31702c" category="paragraph">Kubeflow 能够快速配置新的 Jupyter 笔记本电脑服务器，以充当数据科学家工作空间。要使用 Kubeflow 配置新的 Jupyter 笔记本电脑服务器，请执行以下任务。有关 Kubeflow 上下文中 Jupyter 笔记本电脑的详细信息，请参见<block ref="05932219411c169f9e48f874e56f1ed3" category="inline-link-rx"></block>。</block>
  <block id="5e82e4aa94a53b3b50acf347914be197" category="list-text">从 Kubeflow 中央信息板中，单击主菜单中的 Notebook Servers 以导航到 Jupyter 笔记本电脑服务器管理页面。</block>
  <block id="358d18b5a42ec1d80b04e767298ea372" category="paragraph"><block ref="358d18b5a42ec1d80b04e767298ea372" category="inline-image-macro-rx" type="image"></block></block>
  <block id="208feb7a4d57f0afc49e53fe1fe8b978" category="list-text">单击新服务器以配置新的 Jupyter 笔记本电脑服务器。</block>
  <block id="3541a3b25823fa3b302c686b6fe2a212" category="paragraph"><block ref="3541a3b25823fa3b302c686b6fe2a212" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5f95069a2e81949b101427e1fa4afddf" category="list-text">为新服务器指定一个名称，选择希望服务器基于的 Docker 映像，并指定服务器要预留的 CPU 和 RAM 量。如果命名空间字段为空，请使用页面标题中的选择命名空间菜单选择命名空间。然后， Namespace 字段将自动填充所选命名空间。</block>
  <block id="4fbbbc4aaa49d653f486738eed12357a" category="paragraph">在以下示例中，选择了 `kubeflow-anonymous` 命名空间。此外，还接受 Docker 映像， CPU 和 RAM 的默认值。</block>
  <block id="69bc8b3ae7667985c27ce3ef5de0e6ca" category="paragraph"><block ref="69bc8b3ae7667985c27ce3ef5de0e6ca" category="inline-image-macro-rx" type="image"></block></block>
  <block id="124793fd2a85b1699a94b12bf4661758" category="inline-link-macro">Kubeflow 部署</block>
  <block id="095efbb867f01094d56c633d3337a412" category="list-text">指定工作空间卷详细信息。如果选择创建新卷，则会使用默认 StorageClass 配置该卷或 PVC 。因为在部分中，使用 Trident 的 StorageClass 被指定为默认 StorageClass <block ref="b868c02e3d390c0001190527c8f4ba0b" category="inline-link-macro-rx"></block>，卷或 PVC 配置有 Trident 。此卷会自动挂载为 Jupyter 笔记本电脑服务器容器中的默认工作空间。用户在服务器上创建但未保存到单独数据卷的任何笔记本电脑将自动保存到此工作空间卷。因此，这些笔记本电脑在重新启动后会持久存在。</block>
  <block id="c44927b0124469511a724e179c80bfb5" category="paragraph"><block ref="c44927b0124469511a724e179c80bfb5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="555e44b3745904843417371073338d08" category="list-text">添加数据卷。以下示例指定了一个名为 "pt-fg-all" 的现有 PVC 并接受默认挂载点。</block>
  <block id="0c73069b282d8e99ecbd8feb39164d40" category="paragraph"><block ref="0c73069b282d8e99ecbd8feb39164d40" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b120f9006af3d27ef70eb256c99c6617" category="list-text">* 可选： * 请求将所需数量的 GPU 分配给您的笔记本服务器。在以下示例中，请求一个 GPU 。</block>
  <block id="c969e6364e4561a959d1ce20f7187723" category="paragraph"><block ref="c969e6364e4561a959d1ce20f7187723" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b8da2142543d647576288d71dddabb01" category="list-text">单击启动以配置新的笔记本电脑服务器。</block>
  <block id="37a742c47c216725dd178d8c3c7a3f31" category="list-text">等待笔记本电脑服务器完全配置完毕。如果您从未使用您指定的 Docker 映像配置服务器，则可能需要几分钟的时间，因为需要下载此映像。服务器配置完成后， Jupyter 笔记本电脑服务器管理页面上的状态列会显示一个绿色复选标记。</block>
  <block id="417a2eafac6842560d3900cf9d12b5bb" category="paragraph"><block ref="417a2eafac6842560d3900cf9d12b5bb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0463a63e8059055e703ecd9ffa72e106" category="list-text">单击连接以连接到新的服务器 Web 界面。</block>
  <block id="4fbf21602f4888216386998d62f1defd" category="list-text">确认步骤 6 中指定的数据集卷已挂载到服务器上。请注意，默认情况下，此卷会挂载在默认工作空间中。从用户的角度来看，这只是工作空间中的另一个文件夹。用户可能是数据科学家，而不是基础架构专家，因此使用此卷无需具备任何存储专业知识。</block>
  <block id="c4b6acc44505864a5dccae2571b74f6a" category="paragraph"><block ref="c4b6acc44505864a5dccae2571b74f6a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a7d375154397ce9358d2234ec578ff7e" category="paragraph"><block ref="a7d375154397ce9358d2234ec578ff7e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="479d03862d87da58784e60e5cfcec977" category="list-text">打开一个终端，假设步骤 5 中请求了一个新卷，请执行 `df -h` 以确认已挂载新的 Trident 配置的永久性卷作为默认工作空间。</block>
  <block id="68f39a4f77e618e6617c3830fb47de7c" category="paragraph">默认工作空间目录是首次访问服务器的 Web 界面时显示的基目录。因此，使用 Web 界面创建的任何项目都会存储在此 Trident 配置的永久性卷上。</block>
  <block id="d3e91c75db0cb717734224e6eb72e201" category="paragraph"><block ref="d3e91c75db0cb717734224e6eb72e201" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1d739fe0e421e9cb4d6315f0021cc5eb" category="paragraph"><block ref="1d739fe0e421e9cb4d6315f0021cc5eb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b8c20de15cf5efa2297f9d40d899450e" category="list-text">使用终端运行 `nvidia-smi` 以确认为笔记本电脑服务器分配了正确数量的 GPU 。在以下示例中，已按照步骤 7 中的请求为笔记本电脑服务器分配一个 GPU 。</block>
  <block id="ed4e7225349e5c6cd33dfd15ad878438" category="paragraph"><block ref="ed4e7225349e5c6cd33dfd15ad878438" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0a37acabf89826767b5a5fcb8dacffa3" category="summary">此页面介绍了在 Kubernetes 集群中部署 Kubeflow 必须完成的任务。</block>
  <block id="e560b8ed748180150ee1a196f2247fce" category="paragraph">本节介绍在 Kubernetes 集群中部署 Kubeflow 必须完成的任务。</block>
  <block id="f48269a81318d4bd2dd9e57a8239fe56" category="list-text">您已有一个有效的 Kubernetes 集群，并且正在运行 Kubernetes 支持的版本。有关支持的版本列表，请参见<block ref="01b2e82a7080cdbeb934280240df876e" category="inline-link-rx"></block>。</block>
  <block id="3429b7e0331de8d2f8d377b034ca6855" category="inline-link-macro">Trident 部署和配置</block>
  <block id="9fc644d78f21555decceeddf5b691fa4" category="list-text">您已在 Kubernetes 集群中安装和配置 NetApp Trident ，如中所述 <block ref="ec7700e2b8d95edf2f2700b590eab273" category="inline-link-macro-rx"></block>。</block>
  <block id="72727333279dd1f9e8b63f969075bca8" category="section-title">设置默认 Kubernetes StorageClass</block>
  <block id="e1be30d98edccc10974d5d339832197c" category="paragraph">在部署 Kubeflow 之前，您必须在 Kubernetes 集群中指定一个默认 StorageClass 。Kubeflow 部署过程会尝试使用默认 StorageClass 配置新的永久性卷。如果未将任何 StorageClass 指定为默认 StorageClass ，则部署将失败。要在集群中指定默认 StorageClass ，请从部署跳转主机执行以下任务。如果已在集群中指定默认 StorageClass ，则可以跳过此步骤。</block>
  <block id="e3e4fbe325df2b20670ca04ad0c2a517" category="list-text">将现有 StorageClasses 之一指定为默认 StorageClass 。以下示例命令显示了名为 `ontap-ai- FlexVols-Retain` 的 StorageClass 的默认 StorageClass 。</block>
  <block id="f830a6eea70ae3a0e7af4606462ad281" category="admonition">`ontap-nas-flexgroup` Trident 后端类型的最小 PVC 大小相当大。默认情况下， KubeFlow 会尝试配置大小只有少数几 GB 的 PVC 。因此，在部署 Kubeflow 时，不应将利用 `ontap-nas-flexgroup` 后端类型的 StorageClass 指定为默认 StorageClass 。</block>
  <block id="f12aad36b1ab9194dd8bc67542366bff" category="section-title">使用 NVIDIA DeepOps 部署 Kubeflow</block>
  <block id="3e1922d78dd7bdb1e8d7e7bd8f5aa92c" category="paragraph">NetApp 建议使用 NVIDIA DeepOps 提供的 Kubeflow 部署工具。要使用 DeepOps 部署工具在 Kubernetes 集群中部署 Kubeflow ，请从部署跳转主机执行以下任务。</block>
  <block id="3ede8bc1f55c95b9a16b2429e0b9bbcc" category="admonition">或者，您也可以按照手动方式部署 Kubeflow<block ref="c75d7e23bc80ca81cea11fe427173cb3" category="inline-link-rx"></block> 在 Kubeflow 官方文档中</block>
  <block id="a73d6d865f72179145299c720c53d39c" category="inline-link">Kubeflow 部署说明</block>
  <block id="04e3c704baa1b4c23cd48a18c10fcf39" category="list-text">按照中的说明在集群中部署 Kubeflow<block ref="5e7f04c1dfa70dd058d2720be031c44b" category="inline-link-rx"></block> 在 NVIDIA DeepOps GitHub 站点上。</block>
  <block id="2efdbab31c5d41a149e5092f4b8d7e48" category="list-text">记下 DeepOps Kubeflow 部署工具输出的 Kubeflow 信息板 URL 。</block>
  <block id="b714a06d49f16f8b7f988d95734d177f" category="list-text">确认在 Kubeflow 命名空间中部署的所有 Pod 均显示 `Ststatus` of `running` ，并确认命名空间中部署的任何组件均未处于错误状态。可能需要几分钟时间，才能启动所有 Pod 。</block>
  <block id="d6049afd6b1943d1e98ca6347dd907c5" category="list-text">在 Web 浏览器中，通过导航到步骤 2 中记下的 URL 来访问 Kubeflow 中央信息板。</block>
  <block id="64f559cf2e77f73aca6bd3dc9649f62c" category="paragraph">默认用户名为 `admin@kubeflow.org` ，默认密码为 `1231234` 。要创建其他用户，请按照中的说明进行操作<block ref="f529217f090b2c9cc3764f14abdec5f7" category="inline-link-rx"></block>。</block>
  <block id="2d84920115f9dc91fe2d35c4dc07eaf0" category="paragraph"><block ref="2d84920115f9dc91fe2d35c4dc07eaf0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="48c4dc7fbfa1197490124f13eb565bd2" category="doc">ONTAP AI 部署</block>
  <block id="70d5c23ad68d59b2546133efdd1c3267" category="inline-link">NVA-1121-Deploy ：由 NVIDIA 提供支持的 NetApp ONTAP AI</block>
  <block id="b393f072bc6b17085b75486a2abbcf97" category="paragraph">部署 ONTAP AI 需要安装和配置网络，计算和存储硬件。本文档不会介绍有关部署 ONTAP AI 基础架构的具体说明。有关详细的部署信息，请参见<block ref="8c03c9c25bc6aba17e86c510148a3423" category="inline-link-rx"></block>。</block>
  <block id="03e335ae74b1356b294af55e07eb6b70" category="paragraph">在此解决方案验证中，创建了一个卷并将其挂载到 DGX-1 系统。然后，该挂载点会挂载到容器中，以使数据可供训练访问。对于大规模部署， NetApp Trident 可自动创建和挂载卷，以消除管理开销并支持最终用户管理资源。</block>
  <block id="328d9c8854162b6d9dae70c57baa7505" category="inline-link-macro">接下来： Kubernetes 部署</block>
  <block id="5102c02ef61bdeaa79904c17f58ca7e3" category="paragraph"><block ref="5102c02ef61bdeaa79904c17f58ca7e3" category="inline-link-macro-rx"></block></block>
  <block id="7a879e305f90568b91e8623ce5f9ee39" category="summary">自 2019 年 5 月起， Microsoft 推出了 Azure 原生，这是基于 NetApp ONTAP 技术的第一方门户服务，适用于企业级 NFS 和 SMB 文件服务。</block>
  <block id="0bf51d984b6a6d3fddc0e24f62eb1a14" category="doc">TR-4896 ： Azure 中的分布式培训：通道检测—解决方案设计</block>
  <block id="0ab5aa2896d8eed7732e69be5e5782b4" category="paragraph">NetApp Ronen Dar 的 Mameer Ahmad 和 Verron Martina ， Run ： AI</block>
  <block id="a89ade32996e322edf837476febbc9bd" category="paragraph">自 2019 年 5 月起， Microsoft 推出了 Azure 原生，这是基于 NetApp ONTAP 技术的第一方门户服务，适用于企业级 NFS 和 SMB 文件服务。这一发展由 Microsoft 和 NetApp 之间的战略合作伙伴关系推动，进一步将世界级 ONTAP 数据服务的覆盖范围扩展到 Azure 。</block>
  <block id="d6312cb01ee08559dbaa35c308e72268" category="paragraph">作为领先的云数据服务提供商， NetApp 与 Run ： AI 合作，这是一家对 AI 基础架构进行虚拟化的公司，可以利用全 GPU 利用率加快 AI 实验速度。通过这种合作关系，团队可以并行运行多项实验，快速访问数据并利用无限计算资源，从而加快 AI 的运行速度。运行： AI 通过自动分配资源来充分利用 GPU ，而经验证的 Azure NetApp Files 架构可以消除数据管道障碍，让每个实验都能以最高速度运行。</block>
  <block id="5234f8ee670afed8c398940a707f25df" category="paragraph">NetApp 和 Run ： AI 联手为客户在 Azure 中的人工智能之旅提供一个适应未来需求的平台。从分析和高性能计算（ HPC ）到自主决策（客户只需在需要时为所需的资源付费，即可优化 IT 投资）， NetApp 与 Run 之间的联合： AI 在 Azure Cloud 中提供统一的体验。</block>
  <block id="74c071ff3c1d6d6fc39b72d617aefdf8" category="doc">解决方案部署和验证详细信息</block>
  <block id="b122830b8b8edd9e76690ea23b0c4cbd" category="paragraph">以下各节将讨论解决方案部署和验证的详细信息。</block>
  <block id="ebe48d794d8ada5d4e067cd5993bdd3e" category="inline-link-macro">接下来： ONTAP AI 部署</block>
  <block id="3b103491115e62f2388d69086a2eff9d" category="paragraph"><block ref="3b103491115e62f2388d69086a2eff9d" category="inline-link-macro-rx"></block></block>
  <block id="f7235eb2146d800446cbbbac3a57548c" category="paragraph"><block ref="b1b09355c9538fe149372d3728c98bb1" category="inline-link-macro-rx"></block>。</block>
  <block id="d052a88935efadcc9eebf94684d52e19" category="doc">实现高集群利用率</block>
  <block id="27d597678185c0988ffb2dbb0c1b941d" category="inline-link-macro">使用 ImageNet 数据集的 RESNET-50 基准测试摘要</block>
  <block id="8d46742dbd21a217f738a9ca6a31f634" category="paragraph">在本节中，我们模拟了一个实际场景，其中四个数据科学团队各自提交自己的工作负载，以展示 Run ： AI Orchestration 解决方案，它可以在保持 GPU 资源优先级和平衡的同时实现高集群利用率。我们首先使用一节中所述的 RESNET-50 基准测试 <block ref="5872a8c23866a6bf186843724ee58ad7" category="inline-link-macro-rx"></block>：</block>
  <block id="14f48338822299bdf82bb4528d3c9e07" category="paragraph">我们运行的 RESNET-50 基准测试与中相同<block ref="c37aff28e1a25306bf31a11e21ff2c71" category="inline-link-rx"></block>。对于不驻留在公有 Docker 存储库中的容器，我们使用了标志 ` -local-image` 。我们将主机 DGX-1 节点上的目录 ` /mnt` 和 ` /tm` 分别挂载到 ` /mnt` 和 ` /tm` 。该数据集位于 NetApp AFFA800 上，并且 `dataset_dir` 参数指向目录。` -num_devices=1` 和 ` -g 1` 表示我们为此作业分配一个 GPU 。前者是 `run.py` 脚本的参数，而后者是 `runai Submit` 命令的标志。</block>
  <block id="bccb844975c2eec86eb25c0d8e2a989b" category="paragraph">下图显示了一个系统概述信息板，其中 GPU 利用率为 97% ，所有十六个可用 GPU 均已分配。您可以在 GPU/ 项目条形图中轻松查看为每个团队分配的 GPU 数量。" 正在运行的作业 " 窗格显示当前正在运行的作业名称，项目，用户，类型，节点， GPU 已用，运行时间，进度和利用率详细信息。队列中的工作负载列表及其等待时间显示在 "Pending" 作业中。最后，节点框将提供集群中各个 DGX-1 节点的 GPU 编号和利用率。</block>
  <block id="1acc627e7c9d8002628b2e12c91ac683" category="paragraph"><block ref="1acc627e7c9d8002628b2e12c91ac683" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9d5d3b5670d9303fddfb021e681546c0" category="inline-link-macro">接下来：为要求较低的工作负载或交互式工作负载分配的 GPU 百分比</block>
  <block id="3d9997e0f8b3b6a279c8779455e7c760" category="paragraph"><block ref="3d9997e0f8b3b6a279c8779455e7c760" category="inline-link-macro-rx"></block></block>
  <block id="3ff1a758f526c5ceb434059efe27020a" category="summary">Apache 气流工作流示例</block>
  <block id="6e4cd672cd8bd06c42a9e4ba697c61de" category="inline-link">适用于 Kubernetes 的 NetApp 数据科学工具包</block>
  <block id="c5da96d7204df28dd9fdc33139c8a776" category="paragraph">。<block ref="42224cf159df1ff428bf611c27a06039" category="inline-link-rx"></block> 可与气流结合使用。通过将 NetApp 数据科学工具包与 Airflow 结合使用，您可以将 NetApp 数据管理操作整合到由 Airflow 协调的自动化工作流中。</block>
  <block id="dee957e8ec77b256b931e812220f0553" category="inline-link">气流示例</block>
  <block id="9fc322b3a5bb56d2d6ac18c15773d1c2" category="paragraph">请参见<block ref="c50bba54faf39c027cd571674d44a9c0" category="inline-link-rx"></block> 有关在 Airflow 中使用工具包的详细信息，请参见 NetApp Data Science Toolkit GitHub 存储库中的一节。</block>
  <block id="fbe29309a183681bc26203d4c65853a2" category="paragraph">本节将介绍传统数据科学管道及其缺点。此外，还介绍了建议的数据集缓存解决方案的架构。</block>
  <block id="1f14aecc1193f646e0005e27fbc6e63d" category="section-title">传统数据科学管道和缺点</block>
  <block id="17fb7d0ba5495199d3e18fe23dff7b59" category="paragraph">ML 模型开发和部署的典型顺序涉及以下迭代步骤：</block>
  <block id="63e1ded7e3ae73253b5c287bc9bdef02" category="list-text">正在载入数据</block>
  <block id="52e028dc7ac82e9d4b7b1ae588fecc9a" category="list-text">数据预处理（创建多个版本的数据集）</block>
  <block id="33cd0fcdd9ee7e650043133b12516155" category="list-text">运行多个涉及超参数优化，不同型号等的实验</block>
  <block id="b85c416c94e0c5314a1e6fcc21d4139e" category="list-text">Monitoringcnvrg.io 开发了一个全面的平台，可以自动执行从研究到部署的所有任务。下图显示了与管道相关的一小部分信息板屏幕截图。</block>
  <block id="5a5ade85e7f7478bcba59e8c3891c914" category="paragraph"><block ref="5a5ade85e7f7478bcba59e8c3891c914" category="inline-image-macro-rx" type="image"></block></block>
  <block id="26d6a4638ffd0b7779f1353f5fe54f0d" category="paragraph">从公有存储库和私有数据中使用多个数据集非常常见。此外，每个数据集可能具有多个版本，这些版本是由数据集清理或功能工程产生的。需要一个信息板来提供数据集中心和版本中心，以确保团队可以使用协作和一致性工具，如下图所示。</block>
  <block id="e884d73b6a4214bea010ec3bbfdad8b6" category="paragraph"><block ref="e884d73b6a4214bea010ec3bbfdad8b6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="93661dde7027bf31b3d007740a3d4648" category="paragraph">管道的下一步是培训，这需要多个并行的培训模型实例，每个实例都与一个数据集和一个特定计算实例相关联。将数据集绑定到使用特定计算实例的特定实验是一项挑战，因为某些实验可能由 Amazon Web Services （ AWS ）中的 GPU 实例执行，而其他实验则由内部 DGX-1 或 DGX-2 实例执行。可能会在 GCP 的 CPU 服务器中执行其他实验，但数据集位置与执行培训的计算资源不是很近。如果距离合理，则从数据集存储到计算实例的连接将达到全 10GbE 或更高的低延迟。</block>
  <block id="ba4f5ee1b0d01d3416723cfc3ec296ec" category="paragraph">数据科学家通常会将数据集下载到执行培训和实验的计算实例中。但是，此方法可能会出现以下几个问题：</block>
  <block id="90b6a1c5b483f6c6b399bc17c5e1af9a" category="list-text">当数据科学家将数据集下载到计算实例时，无法保证集成计算存储具有高性能（高性能系统的一个示例是 ONTAP AFF A800 NVMe 解决方案）。</block>
  <block id="5713a88504bb65e3808faac627a6a0fc" category="list-text">如果下载的数据集驻留在一个计算节点中，则在多个节点上执行分布式模型时，存储可能会成为瓶颈（与 NetApp ONTAP 高性能分布式存储不同）。</block>
  <block id="299b9ae5439d32ed932f51f3b3aa92d6" category="list-text">由于队列冲突或优先级问题，下次迭代训练实验可能会在不同的计算实例中执行，这再次导致从数据集到计算位置的网络距离过长。</block>
  <block id="30e37003024e85518a26760a7ab58f4e" category="list-text">在同一计算集群上执行训练实验的其他团队成员不能共享此数据集；每个团队成员都从任意位置执行数据集（昂贵的）下载。</block>
  <block id="9e5d53150336efb0446a063309805f01" category="list-text">如果后续培训作业需要使用同一数据集的其他数据集或版本，则数据科学家必须再次将数据集（昂贵）下载到执行 training.NetApp 的计算实例中，而 cnvrg.io 已创建一个新的数据集缓存解决方案来消除这些障碍。解决方案通过在 ONTAP 高性能存储系统上缓存热数据集，加快了 ML 管道的执行速度。使用 ONTAP NFS 时，数据集会在由 NetApp 提供支持的数据网络结构（例如 AFF A800 ）中缓存一次（并且只缓存一次），该数据网络结构与计算搭配使用。由于 NetApp ONTAP NFS 高速存储可以为多个 ML 计算节点提供服务，因此培训模型的性能得到了优化，从而为企业节省了成本，提高了工作效率并提高了运营效率。</block>
  <block id="9f6302143996033ebb94d536b860acc3" category="section-title">解决方案架构</block>
  <block id="a63af1f206939a3c956a2e8b6ab53103" category="paragraph">NetApp 和 cnvrg.io 提供的此解决方案可提供数据集缓存，如下图所示。通过数据集缓存，数据科学家可以选择所需的数据集或数据集版本，并将其移动到靠近 ML 计算集群的 ONTAP NFS 缓存中。现在，数据科学家可以运行多个实验，而不会造成延迟或下载。此外，所有协作工程师都可以将同一数据集与连接的计算集群结合使用（并可自由选择任何节点），而无需从数据湖中进行额外下载。数据科学家可以获得一个信息板，用于跟踪和监控所有数据集和版本，并查看缓存的数据集。</block>
  <block id="612eaee91b23ecc385c1b402d44c081f" category="paragraph">cnvrg.io 平台会自动检测某个时间内未使用的过期数据集，并从缓存中将其转出，从而为更常用的数据集保留可用的 NFS 缓存空间。需要注意的是，使用 ONTAP 的数据集缓存可在云端和内部环境中运行，从而提供最大的灵活性。</block>
  <block id="0cb5e14601fcf39745352a9556939aa3" category="paragraph"><block ref="0cb5e14601fcf39745352a9556939aa3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="810aceabf729ffa8c2dfd61a3aaeafaa" category="inline-link-macro">接下来：概念和组件</block>
  <block id="0a01ff9defa9120e928e7e306e3e3234" category="paragraph"><block ref="0a01ff9defa9120e928e7e306e3e3234" category="inline-link-macro-rx"></block></block>
  <block id="fb1290be14b9bc3c64a2c3c9ace6c065" category="doc">用例概述和问题陈述</block>
  <block id="aa04a8198c7c60df7adcd6cd49bec6f8" category="paragraph">数据集和数据集版本通常位于数据湖中，例如 NetApp StorageGRID 基于对象的存储，这样可以降低成本并获得其他运营优势。数据科学家利用这些数据集，通过多个步骤对其进行设计，使其为使用特定模型进行培训做好准备，通常会在整个过程中创建多个版本。下一步，数据科学家必须选择经过优化的计算资源（ GPU ，高端 CPU 实例，内部集群等）来运行此模型。下图显示了 ML 计算环境中数据集不接近的情况。</block>
  <block id="cc054601488581e80cc1d19c227126f6" category="paragraph"><block ref="cc054601488581e80cc1d19c227126f6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="88515fca547c502286d6f2a9081fc734" category="paragraph">但是，多个训练实验必须在不同的计算环境中并行运行，每个实验都需要从数据湖中下载数据集，这是一个昂贵且耗时的过程。无法保证数据集与计算环境（尤其是混合云）的距离。此外，使用同一数据集运行自己实验的其他团队成员也必须经历同样艰巨的过程。除了明显缓慢的数据访问之外，还存在一些挑战，包括跟踪数据集版本，数据集共享，协作和可重现性方面的困难。</block>
  <block id="30b64502c0cb2f8a9bf951993e0abbac" category="section-title">客户要求</block>
  <block id="5243f720d7e440d7746f03df97ef885f" category="paragraph">为了在高效利用资源的同时实现高性能 ML 运行，客户要求可能有所不同；例如，客户可能需要满足以下要求：</block>
  <block id="1735cf11ce0034dbb80c297fb204bc21" category="list-text">从执行训练模型的每个计算实例快速访问数据集，而不会导致昂贵的下载和复杂的数据访问</block>
  <block id="80085a846f90523080cf086e66561d52" category="list-text">在云或内部环境中使用任何计算实例（ GPU 或 CPU ），而无需考虑数据集的位置</block>
  <block id="de79912b1ab8764406a232888aab85e5" category="list-text">通过在同一数据集中与不同计算资源并行运行多个训练实验，而不会出现不必要的延迟和数据延迟，提高了效率和工作效率</block>
  <block id="5211203793a223f02322b88b2e698a82" category="list-text">最大限度地降低计算实例成本</block>
  <block id="6a6fcee71b4e22ac6a4afdfdb5940b67" category="list-text">利用工具来保留数据集，其沿袭，版本和其他元数据详细信息的记录，从而提高了可重现性</block>
  <block id="930d18875813298018f8364069441eee" category="list-text">增强了共享和协作功能，使团队中的任何授权成员都可以访问数据集并运行实验</block>
  <block id="5f700d00ad72470694a5aa06cd515c8b" category="paragraph">要使用 NetApp ONTAP 数据管理软件实施数据集缓存，客户必须执行以下任务：</block>
  <block id="41fac0272180c0141b5cd7ad6ad85a44" category="list-text">配置和设置最接近计算资源的 NFS 存储。</block>
  <block id="25a3a7ee3cfbb4afc291cd5b94dec000" category="list-text">确定要缓存的数据集和版本。</block>
  <block id="dbffd2a20c35c06fbb6ba0cd17e54ef6" category="list-text">监控提交到缓存数据集的总内存以及可用于其他缓存提交的 NFS 存储容量（例如缓存管理）。</block>
  <block id="61d5e7050cbe037ad5adeaf246e6be19" category="list-text">如果数据集在特定时间未使用，则会使其过期。默认值为一天；其他配置选项可用。</block>
  <block id="36691dc48fac4774974c970e3bfa1a7d" category="paragraph"><block ref="36691dc48fac4774974c970e3bfa1a7d" category="inline-link-macro-rx"></block></block>
  <block id="0a1bc6b4024485ff9b55c99c1237e175" category="doc">使用 Run ： AI 优化集群和 GPU 利用率</block>
  <block id="b8b025dc1895637326d2420e912751e0" category="summary">在使用 Trident 在 Kubernetes 集群中动态配置存储资源之前，必须先创建一个或多个 Trident 后端。此页面上的示例展示了在 ONTAP AI POD 上部署 NetApp AI 控制平面解决方案时可能需要创建的不同类型的后端。</block>
  <block id="c0fe00dd01499e23426b850b65782c77" category="paragraph">在使用 Trident 在 Kubernetes 集群中动态配置存储资源之前，必须先创建一个或多个 Trident 后端。以下示例展示了在 ONTAP AI POD 上部署 NetApp AI 控制平台解决方案时可能需要创建的不同类型的后端。有关后端的详细信息，请参见<block ref="e6b3671f5db59046617458d31ef4f50b" category="inline-link-rx"></block>。</block>
  <block id="1e698f68960fb964df99e73068c9377c" category="list-text">NetApp 建议为要在 NetApp AFF 系统上使用的每个数据 LIF （提供数据访问的逻辑网络接口）创建一个启用了 FlexGroup 的 Trident 后端。这样，您可以在 LIF 之间平衡卷挂载</block>
  <block id="327a3876126e4773cfcc5e30649c9483" category="paragraph">以下示例命令显示了为与同一 ONTAP Storage Virtual Machine （ SVM ）关联的两个不同数据 LIF 创建两个启用了 FlexGroup 的 Trident 后端。这些后端使用 `ontap-nas-flexgroup` 存储驱动程序。ONTAP 支持两种主要数据卷类型： FlexVol 和 FlexGroup 。FlexVol 卷具有大小限制（截至本文撰写时，最大大小取决于特定部署）。另一方面， FlexGroup 卷可以线性扩展到高达 20 PB 和 4000 亿个文件，从而提供一个可显著简化数据管理的命名空间。因此， FlexGroup 卷最适合依赖大量数据的 AI 和 ML 工作负载。</block>
  <block id="ba9f56aafb45a750a8dffe5de6d2ed78" category="paragraph">如果您使用的是少量数据，并且希望使用 FlexVol 卷而不是 FlexGroup 卷，则可以创建使用 `ontap-NAS` 存储驱动程序而不是 `ontap-nas-flexgroup` 存储驱动程序的 Trident 后端。</block>
  <block id="d04adbc45ec06c05c1826745b8f4ddf2" category="list-text">NetApp 还建议创建一个或多个启用了 FlexVol 的 Trident 后端。如果您使用 FlexGroup 卷来训练数据集存储，则可能需要使用 FlexVol 卷来存储结果，输出，调试信息等。如果要使用 FlexVol 卷，必须创建一个或多个启用了 FlexVol 的 Trident 后端。下面的示例命令显示了如何创建一个使用单个数据 LIF 且已启用 FlexVol 的 Trident 后端。</block>
  <block id="e2b5e920360785877a1831ff4b128520" category="summary">NetApp 设置</block>
  <block id="ad2376beebecdcf7846ba973fa1a005b" category="doc">设置</block>
  <block id="9af8334f3fca73145524498c2f49ee10" category="inline-link-macro">下一步：概述</block>
  <block id="02e8a07ffc2e2c5240049e5214d70427" category="paragraph"><block ref="02e8a07ffc2e2c5240049e5214d70427" category="inline-link-macro-rx"></block></block>
  <block id="9dc7cfc5bd8fb85bad9fdab5cdded288" category="doc">运行： AI 安装</block>
  <block id="c1b7d088e01f6ec6ec89bf69437e4bb1" category="paragraph">要安装 Run ： AI ，请完成以下步骤：</block>
  <block id="7ad0483bc07dbde29ffd404af83f8305" category="list-text">使用 DeepOps 安装 Kubernetes 集群并配置 NetApp 默认存储类。</block>
  <block id="16d20d34f759cd25fd7486bbc4046a50" category="list-text">准备 GPU 节点：</block>
  <block id="d3eff3861b26ba61222bacaa41bc0fa7" category="list-text">验证是否已在 GPU 节点上安装 NVIDIA 驱动程序。</block>
  <block id="3683aa7fe695a205b8e40e9589c94a2e" category="list-text">验证是否已安装 `nvidia-Docker` 并将其配置为默认 Docker 运行时。</block>
  <block id="cef990020518a58fb1e70a90b5df80fe" category="list-text">安装运行： AI ：</block>
  <block id="e2d6778a342979b567501f951e36118a" category="inline-link">运行： AI 管理员 UI</block>
  <block id="6fc7ea9b01c6028f691aac2aeac528f1" category="list-text">登录到<block ref="668d940d94d02be49a88c4cfd2736fa9" category="inline-link-rx"></block> 以创建集群。</block>
  <block id="fe8f08cfda6726e2dcc5d0b85ed2c67d" category="list-text">下载创建的 `runai-operator-&lt;clustername&gt;.yaml` 文件。</block>
  <block id="b428155da5c27d208abd6c179c7669d3" category="list-text">将操作员配置应用于 Kubernetes 集群。</block>
  <block id="fac4447e0ea2e4cd1a2d9e2fefeab694" category="list-text">验证安装。</block>
  <block id="d63ebd1b7a89c0dad6259299d710b16e" category="inline-link"><block ref="d63ebd1b7a89c0dad6259299d710b16e" category="inline-link-rx"></block></block>
  <block id="2d14c64dc5dfa79a68cd6965fbf9e4b7" category="list-text">转至<block ref="115d2727bd1dc614110a31f98c029830" category="inline-link-rx"></block>。</block>
  <block id="feb48a27d95fc7a7e0c6db496c54d2fa" category="list-text">转到 " 概述 " 信息板。</block>
  <block id="09fa3891e2b39bb62217c6d097310577" category="inline-link">在内部 Kubernetes 集群上安装 Run ： AI</block>
  <block id="45d7be937e1eddf966adaf68562966d4" category="inline-link">安装 Run ： AI 命令行界面</block>
  <block id="728f8fd776de1dc47f318473052286db" category="list-text">验证右上角的 GPU 数量是否反映了预期的 GPU 数量，并且 GPU 节点均位于服务器列表中。有关 Run ： AI 部署的详细信息，请参见<block ref="089aa48f8d7b3b135b035765dd1e17ba" category="inline-link-rx"></block> 和<block ref="f2f48a2074c9edc0c2dea174863a4f6e" category="inline-link-rx"></block>。</block>
  <block id="db9d1f740f050b1d20ab43a459bb225a" category="inline-link-macro">接下来：运行 AI 信息板和视图</block>
  <block id="c56b5d251d18e9b020f95696fef9f0b9" category="paragraph"><block ref="c56b5d251d18e9b020f95696fef9f0b9" category="inline-link-macro-rx"></block></block>
  <block id="91c847ff0ec1e96ccc74039eaf1b5bf3" category="section-title">NetApp 概述</block>
  <block id="d30aa8861afaf98888c2367f107a8bc6" category="paragraph">NetApp 是混合云数据管理领域的权威企业。NetApp 提供全套混合云数据服务，可简化云和内部环境中的应用程序和数据管理，加速数字化转型。NetApp 与我们的合作伙伴携手，赋予全球企业充分释放数据的全部潜能，以扩大客户接触点，促进更大的创新并优化运营的能力。</block>
  <block id="ee86473f0dbd191846077276ce455778" category="paragraph">NetApp ONTAP AI 由 NVIDIA DGX 系统和 NetApp 云互联全闪存存储提供支持，可可靠地简化数据流，并加快从边缘到核心再到云的数据网络结构的分析，培训和推理速度。它为 IT 组织提供了一个架构，可提供以下优势：</block>
  <block id="cee5abf75433f502c31530bc72eecd6a" category="list-text">支持独立扩展计算和存储</block>
  <block id="6cb062d50ca0d4a2bfa0caec33fea16f" category="list-text">为各种性能和成本点提供一系列存储选项 NetApp ONTAP AI 提供融合基础架构堆栈，其中包括 NVIDIA DGX-1 ，一个 petaflop 级 AI 系统和 NVIDIA Mellanox 高性能以太网交换机，可统一 AI 工作负载，简化部署并加快 ROI 。在本技术报告中，我们将 ONTAP AI 与一个 DGX-1 和一个 NetApp AFF A800 存储系统结合使用。下图显示了此验证中使用的 DGX-1 系统的 ONTAP AI 拓扑。</block>
  <block id="3eedc2d7451e7ff0440f17c9e61227dc" category="paragraph"><block ref="3eedc2d7451e7ff0440f17c9e61227dc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="543ca2d3d9aa63e1a63c69dd219d5f2a" category="section-title">NetApp AI 控制平台</block>
  <block id="e1fc355cf7f97dbf25407695f8852241" category="paragraph">借助 NetApp AI 控制平台，您可以借助解决方案充分发挥 AI 和 ML 的潜能，该平台可提供极高的可扩展性，简化的部署以及无中断的数据可用性。AI 控制平面解决方案将 Kubernetes 和 Kubeflow 与 NetApp 支持的数据网络结构相集成。Kubernetes 是适用于云原生部署的行业标准容器编排平台，可实现工作负载的可扩展性和可移动性。Kubeflow 是一款开源机器学习平台，可简化管理和部署，使开发人员能够在更短的时间内完成更多的数据科学工作。NetApp 支持的 Data Fabric 可提供无与伦比的数据可用性和可移植性，确保您的数据可通过管道从边缘到核心再到云进行访问。本技术报告在 MLRun 管道中使用 NetApp AI 控制平台。下图显示了 Kubernetes 集群管理页面，您可以在其中为每个集群设置不同的端点。我们将 NFS 永久性卷连接到 Kubernetes 集群，下图显示了连接到集群的永久性卷，其中<block ref="33155b45dbdad2f412212744fbe6f8dc" category="inline-link-rx"></block> 提供持久存储支持和数据管理功能。</block>
  <block id="b058638c35435549e77a90b91abd3305" category="paragraph"><block ref="b058638c35435549e77a90b91abd3305" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7d371ade9f9702601a7e2f8f57c8b013" category="paragraph"><block ref="7d371ade9f9702601a7e2f8f57c8b013" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a1dc271f7d3ae88e2a019314b7e4fd8e" category="section-title">Iguazio 概述</block>
  <block id="0c9fe13fe6a660070e99a54151edd7c3" category="paragraph">Iguazio 数据科学平台是一个完全集成且安全的数据科学平台即服务（ PaaS ），可简化开发，加快性能，促进协作并解决运营难题。此平台包含以下组件， Iguazio 数据科学平台如下图所示：</block>
  <block id="2137518d79f0a3dfe335e8c02312cf96" category="list-text">数据科学工作台，包括 Jupyter 笔记本电脑，集成分析引擎和 Python 软件包</block>
  <block id="68ed19bfa85e4c4677e50979864e169b" category="list-text">通过试验跟踪和自动化管道功能进行模型管理</block>
  <block id="37a28d84cd653345f1f2c036cb732f2d" category="list-text">通过可扩展的 Kubernetes 集群管理数据和 ML 服务</block>
  <block id="77fdda1a79199ac02cde44b4249cb509" category="list-text">Nutrio ，一种实时无服务器功能框架</block>
  <block id="96a6f4a99a7526e82a294d44ed005701" category="list-text">一个速度极快且安全的数据层，支持 SQL ， NoSQL ，时间序列数据库，文件（简单对象）和流式传输</block>
  <block id="00a48f02675717eaf6082c4ba536a366" category="list-text">与 NetApp ， Amazon S3 ， HDFS ， SQL 数据库以及流式传输或消息传送协议等第三方数据源集成</block>
  <block id="901630ad39a688431a68dc119f5378a3" category="list-text">基于 Grafana 的实时信息板</block>
  <block id="887fce38ef8ddd8546748bb746ed7e5a" category="paragraph"><block ref="887fce38ef8ddd8546748bb746ed7e5a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="961027a0ac9a1d9515fa54a5d5372c79" category="inline-link-macro">接下来：软件和硬件要求</block>
  <block id="a10e3ee0949323f601d4c9624980eb47" category="paragraph"><block ref="a10e3ee0949323f601d4c9624980eb47" category="inline-link-macro-rx"></block></block>
  <block id="a905494ad30a6d54678a2122c04bfd54" category="summary">Jupyter 笔记本电脑和 Kubeflow 管道示例</block>
  <block id="80e94617849fe0b057f3edcc76a6ac72" category="doc">示例笔记本电脑和管道</block>
  <block id="3da57858cd6a76521b38784effc6a06f" category="paragraph">。<block ref="42224cf159df1ff428bf611c27a06039" category="inline-link-rx"></block> 可与 Kubeflow 结合使用。将 NetApp 数据科学工具包与 Kubeflow 结合使用具有以下优势：</block>
  <block id="624a53dc5871ce49612a285ee2bf367e" category="list-text">数据科学家可以直接在 Jupyter 笔记本电脑中执行高级 NetApp 数据管理操作。</block>
  <block id="1c7d37cb415e8b7777b071784911a77a" category="list-text">可以使用 Kubeflow 管道框架将高级 NetApp 数据管理操作整合到自动化工作流中。</block>
  <block id="5e646a4ae4330cb948544333980f9f49" category="inline-link">Kubeflow 示例</block>
  <block id="987823970c7b662272fb9e0058bf5ff1" category="paragraph">请参见<block ref="3eb5d4ffd5360858e22dfb9799f211d7" category="inline-link-rx"></block> 有关将工具包与 Kubeflow 结合使用的详细信息，请参见 NetApp Data Science Toolkit GitHub 存储库中的一节。</block>
  <block id="7c0ea3e86521674f72e056d148d4f2ce" category="paragraph">NetApp 和 Run ： AI 已在本技术报告中展开合作，展示了 NetApp ONTAP AI 解决方案与 Run ： AI 平台在简化 AI 工作负载流程方面的独特功能。上述步骤提供了一个参考架构，用于简化深度学习的数据管道和工作负载流程。建议希望实施这些解决方案的客户联系 NetApp 和 Run ： AI 了解更多信息。</block>
  <block id="f797637684ff1290d12e5495dac050a6" category="inline-link-macro">接下来：第 4.8 节的测试详细信息</block>
  <block id="bbe251d46ac2a6899a2a4d5d0e331a43" category="paragraph"><block ref="bbe251d46ac2a6899a2a4d5d0e331a43" category="inline-link-macro-rx"></block></block>
  <block id="8383a1cf96c028a0986b7371049c8495" category="doc">网络设备故障预测用例摘要</block>
  <block id="dea416ff04e558b0d76cce896b618880" category="paragraph">本用例基于亚洲电信领域的 Iguazio 客户。每年有 10 万个企业客户和 125 万个网络中断事件，因此迫切需要预测并采取主动行动，防止网络故障影响客户。此解决方案为他们提供了以下优势：</block>
  <block id="feb68271e6d14db0b1ff524f3eb47a27" category="list-text">对网络故障进行预测性分析</block>
  <block id="70e00676492bea584fb8e7d551515eb5" category="list-text">与票证系统集成</block>
  <block id="6de8d1444549249c0161228a7b7c1d27" category="list-text">通过主动采取措施，防止因实施 Iguazio 而导致网络故障， 60% 的故障都是主动预防的。</block>
  <block id="fd80dbb606385d62c59605ec96147d3f" category="inline-link-macro">下一步：设置概述</block>
  <block id="d31627f0c8fea1236773b2420ab9cd39" category="paragraph"><block ref="d31627f0c8fea1236773b2420ab9cd39" category="inline-link-macro-rx"></block></block>
  <block id="8fcbbd73e86fa0b56d72d6127c318c85" category="paragraph">数据的爆炸式增长以及机器学习（ ML ）和人工智能（ AI ）的指数级增长已经融合在一起，形成了一个具有独特开发和实施挑战的新经济。大量数据通常存储在低成本的数据湖中， GPU 等高性能 AI 计算资源无法高效地访问它。在本报告中，我们介绍了一款全新的解决方案，数据科学实践者可以在其中实施数据中心，只需单击一下，即可在数据集的计算资源附近创建一个数据集缓存，无论这些数据集位于何处。因此，借助新的数据集版本中心所支持的增强协作， AI 实践者可以更轻松地执行高性能模型培训。</block>
  <block id="0c8a89e4d7937b03d3adc0f1d6530b08" category="paragraph"><block ref="0c8a89e4d7937b03d3adc0f1d6530b08" category="inline-link-macro-rx"></block></block>
  <block id="321cf11d6ad313e01614cfa7817893fb" category="doc">JarVis 部署</block>
  <block id="24a0684c018bf0ed5e7001773d8df2c5" category="inline-link">JARVIS 早期访问计划</block>
  <block id="55ce258288b89404cc493de8c839e20a" category="paragraph">您可以注册<block ref="de4a7b23900edb1996cbcb27f4a65904" category="inline-link-rx"></block> 访问 NVIDIA GPU Cloud （ NGC ）上的 JarVis 容器。从 NVIDIA 收到凭据后，您可以使用以下步骤部署 JarVis ：</block>
  <block id="e5a6dabbbe3f9144d9f6e72b568893cd" category="list-text">登录到 NGC 。</block>
  <block id="a668e3da095eca41ef93e0c494a6ebad" category="list-text">在 NGC 上设置您的组织： `ea-2-JarVis` 。</block>
  <block id="f3b0315f8d213517a6076eb7aff49cb6" category="list-text">找到 JarVis EA v0.2 资产： JarVis containers are in `Private Registry` &gt; `Organization Containers` 。</block>
  <block id="6db8e9899d42bcac6aeb824da5e952ef" category="list-text">选择 JarVis ：导航到 `Model Scripts` ，然后单击 `JarVis Quick Start`</block>
  <block id="737af365257800065a6412e56d652acc" category="list-text">验证所有资产是否均正常工作。</block>
  <block id="8a5fd124171d01a74b1af73e73ab7761" category="list-text">查找用于构建您自己的应用程序的文档： PDF 可在 `Model Scripts` &gt; `JarVis Documentation` &gt; `File Browser` 中找到。</block>
  <block id="f3e3b1e7550f6cf9fe883b01695163b7" category="inline-link-macro">接下来：针对零售用例自定义状态和流程</block>
  <block id="3ae7e712d75bd01d43546679548a28a1" category="paragraph"><block ref="3ae7e712d75bd01d43546679548a28a1" category="inline-link-macro-rx"></block></block>
  <block id="f68b67869778246b8f0d8a98ed043512" category="paragraph">本节详细介绍了虚拟零售助理的实施。</block>
  <block id="02216530e0245f79b0b7448e14bffbce" category="inline-link-macro">接下来： JarVis 部署</block>
  <block id="a9ca2532d8607b5827969961f314249e" category="paragraph"><block ref="a9ca2532d8607b5827969961f314249e" category="inline-link-macro-rx"></block></block>
  <block id="1703cadf8e847114fb353feaaf03beb9" category="summary">本节包括在 ONTAP AI POD 上部署 Kubernetes 时可以执行的各种高性能作业的示例。</block>
  <block id="639ce1b23959b4470d67802f0e5e412a" category="doc">ONTAP AI 部署的高性能作业示例</block>
  <block id="e7446d382d8184be0a342a2fc45d4394" category="doc">WP-7328 ：使用 NVIDIA JarVis 的 NetApp 对话 AI</block>
  <block id="5dabc617366db74ce2a9fa3915f6af5a" category="paragraph">Rick Huang ， Sung-Han Lin ， NetApp ， NVIDIA 公司的 Dide Onofino</block>
  <block id="018aacc6ea95e20996bf57b319fd037a" category="paragraph">NVIDIA DGX 系统系列由全球首款基于人工智能（ AI ）的集成系统组成，这些系统专为企业 AI 而构建。NetApp AFF 存储系统可提供极致性能和行业领先的混合云数据管理功能。NetApp 和 NVIDIA 合作创建了 NetApp ONTAP AI 参考架构，这是一款适用于人工智能和机器学习（ ML ）的统包解决方案工作负载，可提供企业级性能，可靠性和支持。</block>
  <block id="1a76c739ce37834495a22c5db663d24b" category="paragraph">本白皮书为客户构建对话式 AI 系统提供了方向性指导，以支持各个行业的不同使用情形。其中包括有关使用 NVIDIA JarVis 部署系统的信息。这些测试是使用 NVIDIA DGX 工作站和 NetApp AFF A220 存储系统执行的。</block>
  <block id="f813bd56d696cb8de386a53a37eed6f6" category="list-text">企业架构师，负责设计用于开发人工智能模型和软件的解决方案，用于虚拟零售助理等人工智能对话用例</block>
  <block id="0497dfe9ff978e87977c978d3443e206" category="list-text">寻求高效方式实现语言建模开发目标的数据科学家</block>
  <block id="e84c345e30f668aa19a041e2e12bc9fe" category="list-text">负责维护和处理客户问题和对话记录等文本数据的数据工程师</block>
  <block id="00101e6b2bf526b1ee79d39389f461fa" category="list-text">有兴趣转变对话式 AI 体验并加快 AI 计划上市速度的高管和 IT 决策者以及业务主管</block>
  <block id="88851610d9d91a7b78ab814276bebba7" category="paragraph"><block ref="88851610d9d91a7b78ab814276bebba7" category="inline-link-macro-rx"></block></block>
  <block id="b682eee68510f6de72c9f48b832fba3c" category="inline-link"><block ref="b682eee68510f6de72c9f48b832fba3c" category="inline-link-rx"></block></block>
  <block id="3e5d8230d86c09995fcd8e9ccf335813" category="list-text">cnvrg-io （<block ref="0691e14f48847a7f13eaf800c0f5813a" category="inline-link-rx"></block>）：</block>
  <block id="6536b07bf755c64528073e655a567c32" category="list-text">cnvrg 核心（免费 ML 平台）</block>
  <block id="0a16af2994c8e10c6c5976d774430a92" category="paragraph"><block ref="0a16af2994c8e10c6c5976d774430a92" category="inline-link-rx"></block></block>
  <block id="1b21ae34f592a7f2ca92d4a44122475d" category="list-text">Cnvrg 文档</block>
  <block id="0730c44e9dc233c7fce5d95816294f52" category="inline-link"><block ref="0730c44e9dc233c7fce5d95816294f52" category="inline-link-rx"></block></block>
  <block id="f3a2f110576ed38849e70a6bb9794ae8" category="paragraph"><block ref="f3a2f110576ed38849e70a6bb9794ae8" category="inline-link-rx"></block></block>
  <block id="c7c082299876892b4274ecfb3c3f7bcd" category="list-text">NVIDIA DGX-1 服务器：</block>
  <block id="d2647f7d8e79758eea27c6cdcf636638" category="list-text">NVIDIA DGX-1 服务器</block>
  <block id="65d1be94e9f29dc4af77bef169d5be14" category="list-text">NVIDIA Tesla V100 Tensor 核心 GPU</block>
  <block id="9052758d35faeab8995feefc50d729ed" category="list-text">NVIDIA GPU Cloud （ NGC ）</block>
  <block id="64ba1593b4427fb62b53b007d4a1c26e" category="list-text">NetApp AFF 系统：</block>
  <block id="092940c9deac7c0f10a0ed36613c28c2" category="paragraph"><block ref="092940c9deac7c0f10a0ed36613c28c2" category="inline-link-rx"></block></block>
  <block id="b4199ce9c494dec10c6ee051ddb413e2" category="list-text">适用于 AFF 的 NetApp FlashAdvantage</block>
  <block id="974aeb47ab8fd0a635d02d8ac80b9eb1" category="paragraph"><block ref="974aeb47ab8fd0a635d02d8ac80b9eb1" category="inline-link-rx"></block></block>
  <block id="1cb9a8619999ebc0a2d9c07624d76166" category="list-text">NetApp 互操作性表</block>
  <block id="d51c982ce98a1e197c234ea0b9a5e7d9" category="paragraph"><block ref="d51c982ce98a1e197c234ea0b9a5e7d9" category="inline-link-rx"></block></block>
  <block id="7a211d267d46c5b44662098f9234fcd0" category="list-text">ONTAP AI 网络：</block>
  <block id="b8a60c56690ddfc62bd735d0b212c396" category="list-text">Cisco Nexus 3232C 交换机</block>
  <block id="926dc08a3a3a3946402bb1beab6545cc" category="list-text">Mellanox Spectrum 2000 系列交换机</block>
  <block id="492f548658890a1d2495b8af5cebef8c" category="paragraph"><block ref="11ff6f8fb3928ea5c0863401e5e79d17" category="inline-link-rx"></block></block>
  <block id="edb7d6728a9813b505cb306367d453e3" category="list-text">DALI</block>
  <block id="bdee52e8a4d1d258eb5a296fbd0ad9b5" category="paragraph"><block ref="bdee52e8a4d1d258eb5a296fbd0ad9b5" category="inline-link-rx"></block></block>
  <block id="1b2766572fa1896116e3c218eb697113" category="list-text">TensorFlow ：适用于所有人的开源机器学习框架</block>
  <block id="26909d0380bdba02e2fcf7f7157cd78b" category="list-text">Horovod ： Uber 的 TensorFlow 开源分布式深度学习框架</block>
  <block id="3ffa9619031400d374ed5c0860d434ab" category="paragraph"><block ref="3ffa9619031400d374ed5c0860d434ab" category="inline-link-rx"></block></block>
  <block id="c9cbaff7c173f4b7bc923573ca753577" category="list-text">在容器运行时生态系统中启用 GPU</block>
  <block id="b3a776c1e64d267ebe62a7bf45c6c1b7" category="paragraph"><block ref="b3a776c1e64d267ebe62a7bf45c6c1b7" category="inline-link-rx"></block></block>
  <block id="ccd09fd9430cf2df88a137dbec97676b" category="paragraph"><block ref="ccd09fd9430cf2df88a137dbec97676b" category="inline-link-rx"></block></block>
  <block id="22d149e351657eac5bd1db4934498bbe" category="list-text">数据集和基准测试：</block>
  <block id="717108fd0999828c4a6d8290d419733b" category="list-text">NIH Chest X 射线数据集</block>
  <block id="4eb7427d14327fa86230f324870dc6b8" category="paragraph"><block ref="4eb7427d14327fa86230f324870dc6b8" category="inline-link-rx"></block></block>
  <block id="f249b6ce18772b83efb8a6e58ac09d47" category="list-text">王晓松，彭义文，卢乐，陆志勇，莫哈马达迪 · 巴格里， Ronald Summers ， ChestX-ray8 ：《医院级胸 X 射线数据库和常见胸病的弱监督分类和本地化基准》， IEEE CVPR ，第页3462-3471 ， 2017TR-4841-0620</block>
  <block id="1e3ecab57c1572b4a25412b1e395562a" category="paragraph">您可以针对特定使用情形自定义对话框管理器的状态和流。在我们的零售示例中，我们提供了以下四个 YAML 文件，用于根据不同意向指导对话。</block>
  <block id="608f6d7dfd7bc98630446f0c601cc730" category="paragraph">查看以下文件名列表以及每个文件的问题描述：</block>
  <block id="77d10e2958e3d21f89adae8647e8d0d2" category="list-text">`main_flow.yml` ：定义主要对话流和状态，并在必要时将此流定向到其他三个 YAML 文件。</block>
  <block id="96b445ea5c6b049dfc1250466b6bdf2e" category="list-text">`retail _flow.yml` ：包含与零售或感兴趣点问题相关的状态。系统会提供最近商店的信息或给定商品的价格。</block>
  <block id="17a0ea5055e6be908d7e2f6f983aa471" category="list-text">`weather flow.yml` ：包含与天气问题相关的状态。如果无法确定位置，系统会询问一个跟进问题以进行澄清。</block>
  <block id="ade7d8cc2b23f24add45c4096dd41795" category="list-text">`error_flow.yml` ：处理用户意向不属于上述三个 YAML 文件的情况。显示错误消息后，系统会重新路由到接受用户问题。以下各节包含这些 YAML 文件的详细定义。</block>
  <block id="ef7c28f5093b59a07761555c8914df26" category="section-title">main_flow.yml</block>
  <block id="dfc9a806326d590aa4ccf49aa6909cda" category="section-title">Retail ， flow.yml</block>
  <block id="6e08d9d65c68d5f447f4fd239052c12e" category="section-title">weather flow.yml</block>
  <block id="b7dc1d2ced2caa9352158983c5ffeda1" category="section-title">error_flow.yml</block>
  <block id="c6496825f1a87696b60935af9416283a" category="inline-link-macro">下一步：连接到第三方 API 作为实施引擎</block>
  <block id="3a9d38bca913120b9d3638cb194cd7e6" category="paragraph"><block ref="3a9d38bca913120b9d3638cb194cd7e6" category="inline-link-macro-rx"></block></block>
  <block id="39cf3ca3e5dbe56d6eade7cbe3cc40e6" category="doc">Kubeflow 操作和任务示例</block>
  <block id="368c8f521d74a015b7a3e1a46c8847b1" category="paragraph">本节包括您可能希望使用 Kubeflow 执行的各种操作和任务的示例。</block>
  <block id="33204bfa9ee287508f03782fd7ad512e" category="summary">在使用 Trident 在 Kubernetes 集群中动态配置存储资源之前，必须创建一个或多个 Kubernetes StorageClasses 。此页面上的示例展示了在 ONTAP AI POD 上部署 NetApp AI 控制平面解决方案时可能需要创建的不同类型的 StorageClasses 。</block>
  <block id="d9206a5144976221af82df78ad3d7977" category="paragraph">在使用 Trident 在 Kubernetes 集群中动态配置存储资源之前，必须创建一个或多个 Kubernetes StorageClasses 。以下示例展示了在 ONTAP AI POD 上部署 NetApp AI 控制平面解决方案时可能需要创建的不同类型的 StorageClasses 。有关 StorageClasses 的详细信息，请参见<block ref="e6b3671f5db59046617458d31ef4f50b" category="inline-link-rx"></block>。</block>
  <block id="993143e7434e63409a07cf3e8c422505" category="list-text">NetApp 建议为在一节中创建的每个启用了 FlexGroup 的 Trident 后端创建一个单独的 StorageClass <block ref="5ce2b96729b1637e197bdd36eb4db4ee" category="inline-link-macro-rx"></block>，步骤 1 。通过这些粒度级 StorageClasses ，您可以将与特定 LIF （创建 Trident 后端时指定的 LIF ）相对应的 NFS 挂载添加为 StorageClass 规范文件中指定的特定后端。下面的示例命令显示了两个 StorageClasses 的创建过程，这两个 StorageClasses 对应于在部分中创建的两个示例后端 <block ref="5ce2b96729b1637e197bdd36eb4db4ee" category="inline-link-macro-rx"></block>，步骤 1 。有关 StorageClasses 的详细信息，请参见<block ref="e6b3671f5db59046617458d31ef4f50b" category="inline-link-rx"></block>。</block>
  <block id="d9348d075dc7b3c91cff99d56dfc327b" category="inline-link">Kubernetes 文档</block>
  <block id="a596fcc71d1c43e3ba86b1557ac7af81" category="paragraph">为了在删除相应的 PersistentVolumeClaim （ PVC ）时不删除永久性卷，以下示例使用了 `reClaimPolicy` 值 `Retain` 。有关 `re"claimPolicy` " 字段的详细信息，请参见相关官员<block ref="2b8f9bbf9efeff879b3debc5484f0056" category="inline-link-rx"></block>。</block>
  <block id="f053cb3a491d2bc48d41230b10a9b164" category="list-text">NetApp 还建议创建一个与您在部分中创建的启用了 FlexVol 的 Trident 后端对应的 StorageClass <block ref="5ce2b96729b1637e197bdd36eb4db4ee" category="inline-link-macro-rx"></block>，步骤 2 。下面的示例命令显示了为 FlexVol 卷创建一个 StorageClass 的过程。</block>
  <block id="99608a01905f0e69895bbb864a0deba3" category="paragraph">在以下示例中，未在 StorageClass 定义文件中指定特定后端，因为仅创建了一个启用了 FlexVol 的 Trident 后端。使用 Kubernetes 管理使用此 StorageClass 的卷时， Trident 会尝试使用使用 `ontap-NAS` 驱动程序的任何可用后端。</block>
  <block id="ee1d27a4ae3e30ff30ef72e305b029e7" category="list-text">NetApp 还建议为 FlexGroup 卷创建通用存储类。以下示例命令显示了如何为 FlexGroup 卷创建一个通用 StorageClass 。</block>
  <block id="d4a43a35c5d5a5ce3aefe77ceaa73a5c" category="paragraph">请注意， StorageClass 定义文件中未指定特定后端。因此，在使用 Kubernetes 管理使用此 StorageClass 的卷时， Trident 会尝试使用使用 `ontap-nas-flexgroup` 驱动程序的任何可用后端。</block>
  <block id="2732cb29fe3befd83c06e7c220b5456d" category="doc">第 4.10 节的测试详细信息</block>
  <block id="273936fc522fd7dbe4473de8a0b2a985" category="paragraph">此部分包含此部分的测试详细信息 <block ref="2783e1454358e180d4e2876ef9492c64" category="inline-link-macro-rx"></block>。</block>
  <block id="cf46f9264bb33ef7576cf671194a0275" category="paragraph">按以下顺序提交 `team-A` ， `team-b` 和 `team-c` 的作业：</block>
  <block id="fac80c1054e849e1ec88244c017978e7" category="cell">1 个工作负载已排队</block>
  <block id="eefc99cd833e14811fb22b758cbc62e5" category="cell">已排队 2 个工作负载</block>
  <block id="be46ffa9e65cb964fc3236de02c41e4e" category="paragraph">请参见以下已执行的命令序列：</block>
  <block id="001f9003205f670658ffc60b1e4d62d8" category="cell">两个工作负载要求每个 GPU 两个</block>
  <block id="f0f10ddbe8f00433aad17626c8d96a73" category="cell">两个工作负载，每个工作负载需要两个 GPU</block>
  <block id="f82056dbbe3376b10ac622b0bdaae914" category="cell">8/8.</block>
  <block id="61b8291124bff8ee36a1c799e35395e9" category="paragraph">接下来，删除 `team-d` 的所有工作负载：</block>
  <block id="ed9cf33d84548b5953f8b042c72faef4" category="paragraph">请参见一节 <block ref="2783e1454358e180d4e2876ef9492c64" category="inline-link-macro-rx"></block>，用于讨论后续测试场景。</block>
  <block id="543cdcd352596e4ad69b4597a2188c02" category="paragraph"><block ref="543cdcd352596e4ad69b4597a2188c02" category="inline-link-macro-rx"></block></block>
  <block id="5b7a8a379330d9d43907b47a6d7ee306" category="doc">使用 Nemo 培训扩展意向模型</block>
  <block id="a7fbadb37067070a61a3da62b548ba3c" category="paragraph">NVIDIA Nemo 是由 NVIDIA 构建的一个工具包，用于创建对话式 AI 应用程序。该工具包包含一系列针对 ASL ， NLP 和 TTS- 的预培训模块，使研究人员和数据科学家能够轻松构建复杂的神经网络架构，并更加专注于设计自己的应用程序。</block>
  <block id="1a56a4858eeec63d31bc890d38325b84" category="paragraph">如上例所示， Nara 只能处理有限类型的问题。这是因为经过预先培训的 NLP 模型只会对这些类型的问题进行训练。如果我们希望 Nara 能够处理更广泛的问题，我们需要使用自己的数据集对其进行重新训练。因此，我们将在此演示如何使用 Nemo 扩展 NLP 模型以满足要求。我们首先将从 Nara 收集的日志转换为 Nemo 的格式，然后训练数据集以增强 NLP 模型。</block>
  <block id="4e19d1e300ea3cd63472939c24caf65d" category="paragraph">我们的目标是使 Nara 能够根据用户首选项对项目进行排序。例如，我们可能会要求 Nara 推荐排名最高的寿司店，也可能希望 Nara 寻找价格最低的 jeans 。为此，我们使用 Nemo 中提供的意向检测和插槽填充模型作为我们的培训模型。通过此模型， Nara 可以了解搜索首选项的意图。</block>
  <block id="5cb83e5ef3cd25eb53fa55d635a7758f" category="section-title">数据准备</block>
  <block id="807cace7b07fcded06b9d106c4dd4d2d" category="paragraph">为了训练模型，我们会收集此类问题的数据集，并将其转换为 Nemo 格式。我们在此处列出了用于训练模型的文件。</block>
  <block id="dc1d3747ed1059f234cbe4a104700abd" category="section-title">dict.intents.csv</block>
  <block id="e803005a5c3a99889733e9c8e8bba406" category="paragraph">此文件列出了我们希望 Nemo 了解的所有意向。此处，我们有两个主要意向，一个意图仅用于对不符合任何主要意向的问题进行分类。</block>
  <block id="ce2440c5074ba6a1e30fa2ec906dafb4" category="section-title">dict.slots.csv</block>
  <block id="a3fc542c51797c85b30365ba9b2d12c5" category="paragraph">此文件列出了我们可以在培训问题上标记的所有插槽。</block>
  <block id="795cab38744084526a62914e47789fbe" category="section-title">Traine.tsv</block>
  <block id="8a5ae45ea3762f79d1a520bcf61275d5" category="paragraph">这是主要的培训数据集。每行都以文件 dict.intent.csv 中列出的意图类别后面的问题开头。此标签将从零开始枚举。</block>
  <block id="db487d8daea13e36203f660d46b3cdfc" category="section-title">Train_slots.tsv</block>
  <block id="73ade6fc5004174d2abe822c85cdfbef" category="section-title">训练模型</block>
  <block id="c764142480a5daa39ac98125503352e8" category="paragraph">然后，我们将使用以下命令启动此容器。在此命令中，我们会将容器限制为使用单个 GPU （ GPU ID = 1 ），因为这是一项轻型训练练习。此外，我们还会将本地工作空间 /workstore/nemo/ 映射到容器 /nemo 中的文件夹。</block>
  <block id="a712c52af847db1e143ca43fdd44bd39" category="paragraph">在容器中，如果要从最初的预先培训的 Bert 模型开始，我们可以使用以下命令启动培训操作步骤。data_dir 是用于设置训练数据路径的参数。work_dir 用于配置检查点文件的存储位置。</block>
  <block id="9e654b2215e90d20951b3ddd67a15bc6" category="paragraph">如果我们有新的培训数据集并希望改进先前的模型，则可以使用以下命令从停止的位置继续操作。checkpoint_dir 获取上一个检查点文件夹的路径。</block>
  <block id="87eea49f703666c49da2d7987ba093b2" category="section-title">推理模型</block>
  <block id="484c4e9e4a0a20bf41551f65663fa9d2" category="paragraph">我们需要在经过一定次数的时间之后验证经过训练的模型的性能。使用以下命令，我们可以逐个测试查询。例如，在此命令中，我们希望检查我们的模型是否能够正确识别查询的目的 `在哪里可以获得最好的意大利面` 。</block>
  <block id="de558a28e6333ac9f453a42631f44c12" category="paragraph">然后，以下是推理的输出。在输出中，我们可以看到经过培训的模型可以正确预测 DETAINT_the_store 的意向，并返回我们感兴趣的关键字。通过这些关键字，我们可以使 Nara 搜索用户所需内容并进行更精确的搜索。</block>
  <block id="5b7f09a1d5da38512130330f4d38fd32" category="paragraph"><block ref="5b7f09a1d5da38512130330f4d38fd32" category="inline-link-macro-rx"></block></block>
  <block id="84860cc77161e23e44eccd05430c00ea" category="doc">在 Run ： AI 命令行界面中提交作业</block>
  <block id="68c9d249f35c91dfcc4a11e209ccbdba" category="paragraph">本节详细介绍了可用于运行任何 Kubernetes 作业的基本 Run ： AI 命令。它会根据工作负载类型分为三部分。AI/ML/DL 工作负载可分为两种通用类型：</block>
  <block id="754edd5bae16b4a2ed8e6673821d3339" category="list-text">* 无人参与的培训课程 * 。对于这些类型的工作负载，数据科学家会准备一个自运行的工作负载并将其发送给执行。执行期间，客户可以检查结果。此类工作负载通常用于生产或模型开发阶段，无需人工干预。</block>
  <block id="fdfda155b7c1021ae5e73d2ab01c0129" category="list-text">* 交互式构建会话 * 。对于这些类型的工作负载，数据科学家将与 Bash ， Jupyter Notebook ，远程 PyCharm 或类似的 IDE 打开交互式会话，并直接访问 GPU 资源。我们还提供了第三种使用连接的端口运行交互式工作负载的方案，以便向容器用户显示内部端口。</block>
  <block id="6ec08732676824c58d76b0ecdc2aed24" category="section-title">无人参与的培训工作负载</block>
  <block id="18cb2734d0533ff093ddcb1b3005e216" category="paragraph">设置项目并分配 GPU 后，您可以在命令行中使用以下命令运行任何 Kubernetes 工作负载：</block>
  <block id="68e667063c4711033bbf6b7f8b312e1f" category="paragraph">此命令将为团队 A 启动无人参与的培训作业，并分配一个 GPU 。此作业基于示例 Docker 映像 `gcr.io/run-ai-demo/Quickstart` 。我们将作业命名为 `hyper1` 。然后，您可以运行以下命令来监控作业的进度：</block>
  <block id="cbae10285b6d282e740369a59fd25aaf" category="paragraph">下图显示了 `runai list` 命令的结果。您可能看到的典型状态包括：</block>
  <block id="e749e4e3bf7ed6d5368f336ba6ceeead" category="list-text">`容器创建` 。正在从云存储库下载 Docker 容器。</block>
  <block id="f5231f23820da3ad520bb16a9dfe97a7" category="list-text">`待定` 。作业正在等待计划。</block>
  <block id="411497b40a902afd2813d3c7af137ffb" category="list-text">`运行` 。作业正在运行。</block>
  <block id="c0801feb8216aa6b36a769e14c3bc138" category="paragraph"><block ref="c0801feb8216aa6b36a769e14c3bc138" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4f5f0c8fb5ec5bccf18cfd167b1d3bc5" category="paragraph">要获取作业的其他状态，请运行以下命令：</block>
  <block id="db0b192c9c9b9885b435e466b9ac861c" category="paragraph">要查看作业日志，请运行 `runai logs &lt;job-name&gt;` 命令：</block>
  <block id="280782f59c990a941b600c998427a52c" category="paragraph">在此示例中，您应看到正在运行的 DL 会话的日志，包括当前训练时间， ETA ，损失函数值，准确性以及每个步骤所用时间。</block>
  <block id="848ad760ae00e3eca33445cd09cfdf34" category="paragraph">您可以在运行： AI UI 上查看集群状态，网址为<block ref="115d2727bd1dc614110a31f98c029830" category="inline-link-rx"></block>。在 Dashboards &gt; Overview 下，您可以监控 GPU 利用率。</block>
  <block id="f899123d07ffe99c3d97952ae96017ed" category="paragraph">要停止此工作负载，请运行以下命令：</block>
  <block id="1f979b6140776c287d458036805ad8aa" category="inline-link">启动无人参与的培训工作负载</block>
  <block id="637552715214e8c0c87022bac459e824" category="paragraph">此命令将停止训练工作负载。您可以再次运行 `runai list` 来验证此操作。有关详细信息，请参见<block ref="e5fbbc266c1fd3a9a029581f5747622d" category="inline-link-rx"></block>。</block>
  <block id="7afece97948db40e546138d81dd343e1" category="section-title">交互式构建工作负载</block>
  <block id="30330792601ba24e9ad5f4f5ee0d5151" category="paragraph">设置项目并分配 GPU 后，您可以在命令行中使用以下命令运行交互式构建工作负载：</block>
  <block id="ca57038d87e3f48eb98329e6fd449824" category="paragraph">此作业基于示例 Docker 映像 python 。我们将作业 BUILD1 命名为。</block>
  <block id="39fd96ce47a2aa757eb5cc98cd910730" category="admonition">` - 交互式` 标志表示作业没有开始或结束研究人员有责任完成此项工作。管理员可以为交互式作业定义一个时间限制，在该时间限制之后，系统会终止这些作业。</block>
  <block id="d39d9c693980c2af510d4a58be6f2620" category="paragraph">` -g 1` 标志可为此作业分配一个 GPU 。提供的命令和参数为 ` —命令休眠— args infinity` 。您必须提供命令，否则容器将立即启动并退出。</block>
  <block id="aedc6bf8e3cb52af4a660584c69353ca" category="paragraph">以下命令的工作方式与中所述的命令类似 <block ref="a09c3ced87a580a4004dfa2429aba9c7" category="inline-xref-macro-rx"></block>：</block>
  <block id="1d2bac5ee25c12c0ee793df98c1b4d49" category="list-text">`runai list` ：显示名称，状态，期限，节点，映像， 用于作业的项目，用户和 GPU 。</block>
  <block id="6b5b5fdb13c8b8af02a41b296af91a2e" category="list-text">`runai get build1` ：显示作业 build1 的其他状态。</block>
  <block id="9c1e129aa488b11d05275f016f42dda5" category="list-text">`runai delete build1` ：停止交互式工作负载 BUILD1.To get a bash shell to the container ， the following command ：</block>
  <block id="ac97b61bdc50cfc22ffd507de190d00c" category="paragraph">这样就可以直接将 shell 连接到计算机。然后，数据科学家可以在容器中开发或微调其模型。</block>
  <block id="5051a9eb1fad38f876a260ba0a4850af" category="inline-link"><block ref="5051a9eb1fad38f876a260ba0a4850af" category="inline-link-rx"></block></block>
  <block id="c7fdd5fcf033fb9395c27ecbf2e54fc9" category="inline-link">启动和使用交互式构建工作负载</block>
  <block id="ff53dc42327d97c7410a6ac241222ffe" category="paragraph">您可以在运行： AI UI 上查看集群状态，网址为<block ref="29f2b88109b12c4db8e875d3f5ba7aae" category="inline-link-rx"></block>。有关详细信息，请参见<block ref="f3d6ab8050b43c83f452779c7622ab1d" category="inline-link-rx"></block>。</block>
  <block id="1028c65994f7201e0f43b3bf5d3c6b41" category="section-title">使用已连接端口的交互式工作负载</block>
  <block id="7d05c708b92b4809bfe9bf66edf8f765" category="inline-link">传入</block>
  <block id="34274fcc13408f06acfe43c4065c3f3b" category="paragraph">作为交互式构建工作负载的扩展，在使用 Run ： AI CLI 启动容器时，您可以向容器用户显示内部端口。这对于云环境，使用 Jupyter 笔记本电脑或连接到其他微服务非常有用。<block ref="fd51448530c36b6101cc67fbacf525b9" category="inline-link-rx"></block> 允许从 Kubernetes 集群外部访问 Kubernetes 服务。您可以通过创建一组规则来配置访问，这些规则定义哪些入站连接访问哪些服务。</block>
  <block id="e7f72a2c9a0cb7337eb00a3093f846da" category="paragraph">为了更好地管理对集群中服务的外部访问，我们建议集群管理员安装<block ref="fd51448530c36b6101cc67fbacf525b9" category="inline-link-rx"></block> 并配置负载平衡器。</block>
  <block id="16d79943625573d5b80809fe2a7ddbdd" category="paragraph">要使用传入作为服务类型，请在提交工作负载时运行以下命令以设置方法类型和端口：</block>
  <block id="79fcc0299f1a85ebab053926e2222bca" category="paragraph">容器成功启动后，执行 `runai list` 以查看用于访问 Jupyter 笔记本电脑的 `S服务 URL （ S ）` 。此 URL 由入口端点，作业名称和端口组成。例如，请参见<block ref="0309fbe8f364c8f6dfe6f383da8c46c2" category="inline-link-rx"></block>。</block>
  <block id="451b08ed1bf6f7f0a8931cff52c4c45e" category="inline-link">使用连接的端口启动交互式构建工作负载</block>
  <block id="b524842923f8cb1e38064fadc680893f" category="paragraph">有关详细信息，请参见<block ref="414875add8a18a03ddddfb14fb1c47f4" category="inline-link-rx"></block>。</block>
  <block id="5bb97c2dd089da990a792356c72a6128" category="inline-link-macro">接下来：实现高集群利用率</block>
  <block id="8f87de13e6ff3dd2fc164bdb930759bb" category="paragraph"><block ref="8f87de13e6ff3dd2fc164bdb930759bb" category="inline-link-macro-rx"></block></block>
  <block id="86608a0b346f307c76f8ae00c9f6bcb9" category="summary">此报告介绍如何快速克隆数据命名空间。它演示了如何定义和实施 AI 培训工作流，这些工作流可以近乎即时地创建数据和模型基线，以实现可追溯性和版本控制。同时，还介绍了如何在站点和区域之间无缝复制数据，以及如何快速配置 Jupyter 笔记本电脑工作空间，以便访问海量数据集。</block>
  <block id="f0829d8f9d70b9de9de7beae86dc2129" category="paragraph">NetApp 公司 Mike Oglesby</block>
  <block id="27114500e25aba7a27847b772d396575" category="paragraph">各行各业各种规模的企业和组织都在转向人工智能（ AI ），机器学习（ ML ）和深度学习（ DL ），以解决实际问题，提供创新产品和服务，并在竞争日益激烈的市场中占据优势。随着企业越来越多地使用 AI ， ML 和 DL ，他们面临着许多挑战，包括工作负载可扩展性和数据可用性。本文档演示了如何使用 NetApp AI 控制平台来应对这些挑战， NetApp AI 控制平台是一种将 NetApp 数据管理功能与常见开源工具和框架配对的解决方案。</block>
  <block id="98300151efa6f504dee4866e49cf2078" category="paragraph">此报告介绍如何快速克隆数据命名空间。此外，还将向您展示如何在站点和区域之间无缝复制数据，以创建统一的统一 AI/ML/DL 数据管道。此外，它还会指导您完成 AI ， ML 和 DL 培训工作流的定义和实施，这些工作流可近乎即时地创建数据和模型基线，以实现可追溯性和版本控制。使用此解决方案，您可以跟踪每个模型训练返回到用于训练和 / 或验证模型的确切数据集。最后，本文档将向您介绍如何快速配置 Jupyter 笔记本电脑工作空间，以便访问海量数据集。</block>
  <block id="3a8a3991c7ef251983bda0fd052b9b10" category="inline-link-macro">TR-4890</block>
  <block id="3cbee33bcafaf0315e821a3331b91eb5" category="inline-link-macro">NetApp 完全支持的并行文件系统解决方案 BeeGFS</block>
  <block id="63de7cb3a054a3754335c60a0c8ba878" category="paragraph">注意：对于涉及大量需要共享访问同一数据集的 GPU 服务器的 HPC 模式大规模分布式培训，或者如果您需要 / 更喜欢并行文件系统，请查看 <block ref="f82f3a4db7a848244fd5070f378c86fb" category="inline-link-macro-rx"></block>。本技术报告介绍了如何包括 <block ref="99c493838dffa23aa6d1149e33e3edf0" category="inline-link-macro-rx"></block> 作为 NetApp AI 控制平台的一部分。此解决方案可从少数 NVIDIA DGX A100 系统扩展到全闪满的 140 节点 SuperPOD 。</block>
  <block id="9f1cc947f3e0236f8d5bc32d8d33509a" category="inline-link">cloud.netapp.com</block>
  <block id="9d50c340b35848862ab6ecbdadc401ed" category="paragraph">NetApp AI 控制平台面向数据科学家和数据工程师，因此只需极少的 NetApp 或 NetApp ONTAP ® 专业知识即可。借助此解决方案，可以使用简单熟悉的工具和界面来执行数据管理功能。如果您的环境中已有 NetApp 存储，您可以立即测试运行 NetApp AI Control 平台。如果您要测试解决方案驱动器，但尚未安装 NetApp 存储，请访问<block ref="d72e38e0d1c5ca8869f2dd987734920b" category="inline-link-rx"></block>，您只需几分钟即可使用基于云的 NetApp 存储解决方案启动并运行。下图显示了解决方案的可视化视图。</block>
  <block id="1f39acb56ba2a8669371819a64348c74" category="paragraph"><block ref="1f39acb56ba2a8669371819a64348c74" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ed8e4613850a4014b0e6ef830982caf2" category="paragraph">此部分包含此部分的测试详细信息 <block ref="26be59a535445b1fffeef12f5e70f3e6" category="inline-link-macro-rx"></block>。</block>
  <block id="17b3673d5c28fb72e7cc48549f489dd4" category="cell">6/8</block>
  <block id="ffe090618e54b7916fa47cf8881019b1" category="cell">team-b/c 工作负载暂停并移至 `pending` 。</block>
  <block id="bccfe4ac65004fb31c146d17003d00e8" category="cell">其他团队（ b/c ）工作负载暂停并移至 `pending` 。</block>
  <block id="3b099141b6a7e4e8804c3fda5ed4f440" category="paragraph">请参见一节 <block ref="26be59a535445b1fffeef12f5e70f3e6" category="inline-link-macro-rx"></block> 有关继续测试场景的讨论。</block>
  <block id="5d52789e4f8028aca21d5650bed8273b" category="inline-link-macro">接下来：第 4.10 节的测试详细信息</block>
  <block id="61a1556247485f1d0fbb34dbe36d1503" category="paragraph"><block ref="61a1556247485f1d0fbb34dbe36d1503" category="inline-link-macro-rx"></block></block>
  <block id="aa364e0963e38930007df2b60bdba067" category="doc">将数据保存到 Trident 配置的 PersistentVolume</block>
  <block id="ef1fb51957f2aa894de5476a9a0112a2" category="paragraph">NetApp Trident 是一个完全受支持的开源项目，旨在帮助您满足容器化应用程序的复杂持久性需求。您可以将数据读写到 Trident 配置的 Kubernetes PersistentVolume （ PV ）中，并通过 NetApp ONTAP 数据管理软件提供数据分层，加密， NetApp Snapshot 技术，合规性和高性能优势。</block>
  <block id="a821f368daf439d909bfed3c8e95d4b9" category="section-title">重复使用现有命名空间中的 PVC</block>
  <block id="be3455a34c69a26df1a5f04a6245249b" category="inline-link">NetApp Trident 文档</block>
  <block id="15040fc521e7fa5e8ef42694ca89e53d" category="paragraph">对于规模较大的 AI 项目，不同容器向同一个 Kubernetes PV 读取和写入数据可能会更高效。要重复使用 Kubernetes 永久性卷声明（ PVC ），用户必须已创建 PVC 。请参见<block ref="5b6274adc29653ed1820027957bdb4e2" category="inline-link-rx"></block> 有关创建 PVC 的详细信息。以下是重复使用现有 PVC 的示例：</block>
  <block id="743520c366f0d11ca817811dda85fcf1" category="paragraph">运行以下命令查看项目 `team-A` 的作业 `pvc 测试` 的状态：</block>
  <block id="7d4c508442c775f946e3d9318b75b1a0" category="paragraph">您应看到 PV /tmp/pvc1mount 挂载到 `team-A` job `vc-test` 。这样，多个容器就可以从同一个卷读取数据，这在开发或生产环境中存在多个竞争模式时非常有用。数据科学家可以构建一系列模型，然后通过多数投票或其他技术将预测结果结合起来。</block>
  <block id="dae81aa45b8ce281aabbd1402afe277b" category="paragraph">使用以下命令访问容器 Shell ：</block>
  <block id="bc63da8fa87210da818596598e359427" category="paragraph">然后，您可以检查已挂载的卷并访问容器中的数据。</block>
  <block id="fc180b17e3fccb2beb46854f71d31406" category="paragraph">这种重复使用 PVC 的功能可与 NetApp FlexVol 卷和 NetApp ONTAP FlexGroup 卷配合使用，从而使数据工程师可以使用更灵活，更强大的数据管理选项来利用由 NetApp 提供支持的数据网络结构。</block>
  <block id="2e203cb5454e63a32bcdb87dc9cb77ad" category="paragraph"><block ref="2e203cb5454e63a32bcdb87dc9cb77ad" category="inline-link-macro-rx"></block></block>
  <block id="52c7321ea4e3d5b264fdc8639a65e280" category="doc">部署 Grafana 信息板</block>
  <block id="c843fc0ceca9c58b409cab519799c125" category="paragraph">部署完所有内容后，我们会对新数据运行推断。这些型号可预测网络设备故障。预测结果存储在 Iguazio 时间序列表中。您可以在与 Iguazio 的安全和数据访问策略集成的平台中使用 Grafana 来查看结果。</block>
  <block id="ae93e86067cc1d0e7bb1ec8fdca6fbc3" category="paragraph">您可以通过将提供的 JSON 文件导入到集群中的 Grafana 接口来部署信息板。</block>
  <block id="213977705fe35a4cb0cfc9365088fc87" category="list-text">要验证 Grafana 服务是否正在运行，请查看服务下的。</block>
  <block id="b426c25dbb35de6b9c6bff0b10b8bef9" category="paragraph"><block ref="b426c25dbb35de6b9c6bff0b10b8bef9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="58b6e0cc0a098260878a0e8fa4eb7766" category="list-text">如果不存在此实例，请从服务部分部署此实例：</block>
  <block id="cd40a7a2e0a86f4a0283af5999a050db" category="list-text">单击新建服务。</block>
  <block id="59c4bcb990174489660974167376a50a" category="list-text">从列表中选择 Grafana 。</block>
  <block id="7e280ecf88737f34a1972ac94f9ae2a1" category="list-text">接受默认值。</block>
  <block id="9e47b36567e5001dea59ffee81456737" category="list-text">单击下一步。</block>
  <block id="4fa350b43dd079673b6fca4852841147" category="list-text">输入您的用户 ID 。</block>
  <block id="af81385be6cef15b54f8c8c126c0eab0" category="list-text">单击 Save Service 。</block>
  <block id="568c8b6f668936384414e470f9ddd939" category="list-text">单击顶部的 Apply Changes 。</block>
  <block id="b5be50b376063d6c3ffaa3be10d4a9d3" category="list-text">要部署信息板，请通过 Jupyter 界面下载文件 `NetopsPredictions-Dashboard.json` 。</block>
  <block id="587b311a501585c3a1d9260d4f147990" category="paragraph"><block ref="587b311a501585c3a1d9260d4f147990" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4ad16c6527a3abd13b6864b8b078586b" category="list-text">从服务部分打开 Grafana 并导入信息板。</block>
  <block id="0b78dd574d02d72071845d040fdde57c" category="paragraph"><block ref="0b78dd574d02d72071845d040fdde57c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5c3ce0bca8ff75db7ff2bbc3e76532b2" category="list-text">单击 Upload ` * 。 json` File ，然后选择先前下载的文件（`NetopsPredictions-Dashboard.json` ）。上传完成后，将显示信息板。</block>
  <block id="7cd4d06091771aa3f16d2759a067e18c" category="paragraph"><block ref="7cd4d06091771aa3f16d2759a067e18c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a0258dc4515b0e18ecd4b55651e27671" category="section-title">部署清理功能</block>
  <block id="ff4bdefb3ddd7532393d08c8df14d786" category="paragraph">当您生成大量数据时，保持数据干净有序非常重要。为此，请使用 `cleanup.ipynb` 笔记本部署清理功能。</block>
  <block id="e654f7a86a4458b9cd662267e0f29b52" category="section-title">优势</block>
  <block id="6d0f7ccc9b17bcabb743cabdfb56e0da" category="paragraph">NetApp 和 Iguazio 通过构建 Kubeflow ， Apache Spark 和 TensorFlow 等基本框架以及 Docker 和 Kubernetes 等业务流程工具，加快并简化 AI 和 ML 应用程序的部署。通过统一端到端数据管道， NetApp 和 Iguazio 可以减少许多高级计算工作负载固有的延迟和复杂性，从而有效地缩小开发和运营之间的差距。在培训阶段，数据科学家可以对大型数据集运行查询，并与授权用户安全地共享数据和算法模型。容器化模型准备好投入生产后，您可以轻松地将其从开发环境迁移到操作环境。</block>
  <block id="daee7e425c63dff416cde0a8932a8483" category="paragraph"><block ref="daee7e425c63dff416cde0a8932a8483" category="inline-link-macro-rx"></block></block>
  <block id="612edeb05f6d237e20f3d843d6e7eba4" category="paragraph">以下各节详细介绍了运行： AI 安装，测试场景以及在此验证中执行的结果。</block>
  <block id="2df14da3d7db15550e8eafc892e89d8e" category="paragraph">我们使用行业标准基准测试工具（包括 TensorFlow 基准测试）验证了此系统的运行和性能。ImageNet 数据集用于训练 RESNET-50 ，它是一种著名的神经网络（ Convolutional Neural Network ， CNN ） DL 图像分类模型。RESNET-50 可提供准确的训练结果，并缩短处理时间，从而使我们能够对存储产生足够的需求。</block>
  <block id="a89cd2a9c8244dab756ec04aeb8247e9" category="inline-link-macro">下一步：运行 AI 安装</block>
  <block id="13bb3aa52565b3e3f517764c0e88c324" category="paragraph"><block ref="123704fec3ddad892d7c2ae5c4de301b" category="inline-link-macro-rx"></block>。</block>
  <block id="afee48a46dd68b9618cec81a8ee5ba86" category="paragraph">本节介绍 ONTAP AI 解决方案的技术要求。</block>
  <block id="e96b7604f8b75ae786c6c0e1016e46fd" category="inline-link">ONTAP AI 网站</block>
  <block id="929f5f13d86d1be55b96dba26e773c6f" category="paragraph">虽然硬件要求取决于特定的客户工作负载，但 ONTAP AI 可以在任何规模部署，用于数据工程，模型培训和生产推理，从单个 GPU 到机架级配置，用于大规模 ML/DL 操作。有关 ONTAP AI 的详细信息，请参见<block ref="7ec9b089c41da1b986bad97e1099df1c" category="inline-link-rx"></block>。</block>
  <block id="41e840b508d9e839f95d16dd582af8d6" category="paragraph">此解决方案已通过使用 DGX-1 系统进行计算，使用 NetApp AFF A800 存储系统和使用 Cisco Nexus 3232C 进行网络连接的验证。在此验证中使用的 AFF A800 可支持多达 10 个 DGX-1 系统，用于大多数 ML/DL 工作负载。下图显示了此验证中用于模型培训的 ONTAP AI 拓扑。</block>
  <block id="bc2eb92d1e1797a759b677c38f619a8f" category="paragraph"><block ref="bc2eb92d1e1797a759b677c38f619a8f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d98e5c43e7b3be89fe8a9076f89f1e99" category="paragraph">要将此解决方案扩展到公有云，可以将 Cloud Volumes ONTAP 与云 GPU 计算资源一起部署，并集成到混合云数据网络结构中，使客户能够使用适合任何给定工作负载的任何资源。</block>
  <block id="4dc70b997a39a64b2def3ef74a96fdb4" category="paragraph">下表显示了此解决方案验证中使用的特定软件版本。</block>
  <block id="2cb05e4bb7830be982f0922fed86b4cd" category="cell">组件</block>
  <block id="d173e10eb6a0fc7969fe540c987e0c7d" category="cell">18.04.4 LTS</block>
  <block id="9b4bffa460105781f82b1d463bde8200" category="cell">4.4.0</block>
  <block id="3c1d47ba5c1ada327abd4532ff9f4437" category="cell">20.02.1</block>
  <block id="0083e57a258edd18b949d3afbf6cfc2a" category="cell">1.15</block>
  <block id="152090ff5e9a05ea7e1cf0c248449638" category="cell">掌舵</block>
  <block id="232de5556d4148d75b55012e1230616c" category="cell">3.1.0</block>
  <block id="e5e8ab661917b89b4161959c7dc28442" category="cell">cnvrg.io</block>
  <block id="272f0a04b740763e0a29316bc4af89a4" category="cell">3.0.0</block>
  <block id="d8a31094f88724af6834c47a6697dc56" category="cell">9.6P4</block>
  <block id="9909115a4f9fe32731077286c367501c" category="paragraph">在此解决方案验证中， Kubernetes 会在 DGX-1 系统上部署为单节点集群。对于大规模部署，应部署独立的 Kubernetes 主节点，以提供高可用性的管理服务，并为 ML 和 DL 工作负载预留有价值的 DGX 资源。</block>
  <block id="1c428dd76324aae91879799ae73fbc37" category="inline-link-macro">接下来：解决方案部署和验证详细信息</block>
  <block id="5e5761a91dc25c881f4ca86678634b1b" category="paragraph"><block ref="5e5761a91dc25c881f4ca86678634b1b" category="inline-link-macro-rx"></block></block>
  <block id="ecb81ab37e1d2a7ed6dfce3807622e3d" category="summary">本节详细介绍了如何使用 Run AI Orchestrator 设置平台，以便大规模执行车道检测分布式培训。</block>
  <block id="0714a752696f8feed939bbf52a6214f7" category="doc">车道检测—使用 Run ： AI 进行分布式培训</block>
  <block id="dbf10b854b8b7fc90297279e7ad0f745" category="paragraph">本节详细介绍了如何设置平台，以便使用 run ： AI orchator 大规模执行车道检测分布式培训。我们将讨论所有解决方案要素的安装以及在所述平台上运行分布式培训作业的问题。可以使用 NetApp SnapshotTM 并将其与 run ： AI 实验相链接来完成 ML 版本控制，以实现数据和模型可重现性。在跟踪模型，团队成员之间共享工作，结果的可重现性，将新型号版本投入生产以及数据来源方面， ML 版本控制起着至关重要的作用。NetApp ML 版本控制（ Snapshot ）可以捕获与每个实验相关的数据，经过培训的模型和日志的时间点版本。它具有丰富的 API 支持，可以轻松地与运行： AI 平台集成；您只需根据训练状态触发事件即可。此外，您还必须捕获整个实验的状态，而不更改 Kubernetes （ K8 ）上运行的代码或容器中的任何内容。</block>
  <block id="25d19977e35c6d286c5b051982ae3f3c" category="paragraph">最后，本技术报告将对 AKS 中多个启用了 GPU 的节点进行性能评估。</block>
  <block id="1987a7039dccb848f2e8ce693ba3faff" category="section-title">针对使用 TuSimple 数据集的通道检测用例的分布式培训</block>
  <block id="f75a7cb3d80e7be148c1ce86a4347011" category="paragraph">在本技术报告中，对 TuSimple 数据集进行了分布式培训，用于检测通道。在本培训代码中， Horovod 用于通过 AKS 在 Kubernetes 集群中的多个 GPU 节点上同时执行数据分布式培训。代码作为容器映像打包，以供 TuSimple 数据下载和处理。处理后的数据存储在 NetApp Trident 插件分配的永久性卷上。在培训中，还会创建一个容器映像，并使用在下载数据期间创建的永久性卷上存储的数据。</block>
  <block id="58b4798157820b4e4415d8136cf60fe9" category="paragraph">要提交数据和培训作业，请使用 run ： ai 编排资源分配和管理。Run ： AI 允许您执行 Horovod 所需的消息传递接口（ Message Passing Interface ， MPI ）操作。此布局允许多个 GPU 节点彼此通信，以便在每次训练迷你批处理后更新训练权重。此外，它还可以通过 UI 和 CLI 监控训练，从而轻松监控实验进度。</block>
  <block id="ecbeff08f5ec15c6952355b518d4ae02" category="paragraph">NetApp Snapshot 集成在培训代码中，可捕获每个实验的数据状态和经过培训的模型。通过此功能，您可以跟踪所用数据和代码的版本以及生成的相关培训模型。</block>
  <block id="63addc90b28c066bd235c900fed65314" category="section-title">AK 设置和安装</block>
  <block id="50f7d8213ee52350926ec407074e68f1" category="inline-link">创建 AKS 集群</block>
  <block id="55b295c729173e8c0c745bb036b03270" category="paragraph">要设置和安装 AKS 集群，请转至<block ref="77c1c334ebc4c997080bda32aa569d69" category="inline-link-rx"></block>。然后，按照以下一系列步骤进行操作：</block>
  <block id="8f9d847fad9782b080de76b0161b1c45" category="list-text">选择节点类型（无论是系统（ CPU ）节点还是辅助（ GPU ）节点）时，请选择以下项：</block>
  <block id="957d1a35f975177c3fd161490f3e2d83" category="list-text">以 `Standard_DS2_v2` 大小添加名为 `agentpool` 的主系统节点。使用默认的三个节点。</block>
  <block id="8853a13db2e2a03cb5b2f1186fbcd0a6" category="list-text">添加工作节点 `gpupool` 并使用 `Standard_Nc6s_v3` 池大小。至少为 GPU 节点使用三个节点。</block>
  <block id="5085043d6dea89934a2e516fc46f891a" category="paragraph"><block ref="5085043d6dea89934a2e516fc46f891a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="633b880bff72a9f1c1114df31dec55bf" category="admonition">部署需要 5 – 10 分钟。</block>
  <block id="f55bb34768c41f91318fb57b85c1def9" category="inline-link">安装工具</block>
  <block id="6369fc9d36c9d56cbebefdeccda5fbff" category="list-text">部署完成后，单击 Connect to Cluster 。要连接到新创建的 AKS 集群，请从本地环境（笔记本电脑 /PC ）安装 Kubernetes 命令行工具。请访问<block ref="bcd577f96ff7023ec6fd5c904f040896" category="inline-link-rx"></block> 以根据您的操作系统进行安装。</block>
  <block id="811c47e56617f97db3579bc32a9085c9" category="inline-link">在本地环境中安装 Azure CLI</block>
  <block id="ea5d45554a3e9cb9cbc0ddea4c228b28" category="list-text"><block ref="2db79c584144175dd0bb69b6c7045fc9" category="inline-link-rx"></block>。</block>
  <block id="825ca3bff78c42ec87920dfbce105fae" category="list-text">要从终端访问 AKS 集群，请先输入 `az login` 并输入凭据。</block>
  <block id="3394029cd334ed00686c86c088d73c24" category="list-text">运行以下两个命令：</block>
  <block id="193937b265ce655417f00a79334d3937" category="list-text">在 Azure 命令行界面中输入此命令：</block>
  <block id="cbf78d8bb0be543834c56e61560773b0" category="admonition">如果所有六个节点均按此处所示启动并运行，则 AKS 集群已准备就绪并连接到本地环境。</block>
  <block id="e8085ec7505cfe6f3cfbe2c2628386dc" category="paragraph"><block ref="e8085ec7505cfe6f3cfbe2c2628386dc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0143a2caee1b9ab090de587206b65fe6" category="section-title">为 Azure NetApp Files 创建委派子网</block>
  <block id="450cf7e7f8262fdaa3454c2e11aad687" category="paragraph">要为 Azure NetApp Files 创建委派子网，请执行以下一系列步骤：</block>
  <block id="0ca30ab1eb5e523356720465eb7439c8" category="list-text">导航到 Azure 门户中的虚拟网络。查找新创建的虚拟网络。它应具有前面板，如 AK vnet ，如此处所示。单击虚拟网络的名称。</block>
  <block id="ce0c628aca3577055043c7f8364600d9" category="paragraph"><block ref="ce0c628aca3577055043c7f8364600d9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="25157709e5a253560f5ec68b8262563c" category="list-text">单击子网，然后从顶部工具栏中选择 +Subnet 。</block>
  <block id="d9bf5876b80dbf558587f06630e3915c" category="paragraph"><block ref="d9bf5876b80dbf558587f06630e3915c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6a07ef5dbc59d5ba150de82d519fb4f8" category="list-text">为子网提供名称，例如 `ANF.SN` ，然后在 Subnet delegation 标题下选择 Microsoft.NetApp/volumes 。请勿更改任何其他内容。单击确定。</block>
  <block id="a8ccea52e17d54aea1295a99ab4d5c2e" category="paragraph"><block ref="a8ccea52e17d54aea1295a99ab4d5c2e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d182b62071ada1a29e4f9c26487c1121" category="paragraph">Azure NetApp Files 卷将分配给应用程序集群，并在 Kubernetes 中用作永久性卷声明（ Persistent Volume Claim ， PVC ）。反过来，这种分配也为我们提供了将卷映射到不同服务的灵活性，包括 Jupyter 笔记本电脑，无服务器功能等</block>
  <block id="a74ff852d3b3b8447b0306018a76c4f1" category="paragraph">服务用户可以通过多种方式使用平台中的存储。Azure NetApp Files 的主要优势包括：</block>
  <block id="a7c5a83cc4ccf14374e496bcbb4363f5" category="list-text">使用户能够使用快照。</block>
  <block id="ea437fe76a4bba5bf335daccbbd24b50" category="list-text">允许用户在 Azure NetApp Files 卷上存储大量数据。</block>
  <block id="cedebf66380d43f58c07dfb1d4d686a6" category="list-text">在一组大型文件上运行 Azure NetApp Files 卷的型号时，可以获得这些卷的性能优势。</block>
  <block id="75ab13308585f62c3cd57a246d0e0c64" category="section-title">Azure NetApp Files 设置</block>
  <block id="8c060d9ae24c7bc4518e54cd5ed13098" category="inline-link">快速入门：设置 Azure NetApp Files 并创建 NFS 卷</block>
  <block id="fd01c32c80d631ed4bebff78fa83b23e" category="paragraph">要完成 Azure NetApp Files 的设置，必须先按照中所述对其进行配置<block ref="2f4e63e538c7dd311b18db058621cef8" category="inline-link-rx"></block>。</block>
  <block id="e26f032bd6f7f5636860d6b94ac84859" category="paragraph">但是，您可以省略为 Azure NetApp Files 创建 NFS 卷的步骤，因为您将通过 Trident 创建卷。在继续操作之前，请确保您已：</block>
  <block id="e953b5e281d40c5db3cc047889eec4f2" category="inline-link">注册 Azure NetApp Files 和 NetApp 资源提供商（通过 Azure Cloud Shell ）</block>
  <block id="3b46d13fb20fe6a92456f742b5732774" category="list-text"><block ref="527fb205c939c551ed93f597562513fb" category="inline-link-rx"></block>。</block>
  <block id="d0652e942d3d4b469179248d72ccaa5c" category="inline-link">已在 Azure NetApp Files 中创建帐户</block>
  <block id="82a51bbfec23ca7366c216813caeacc8" category="list-text"><block ref="874637dbfce24ba5a63adadd91968dc9" category="inline-link-rx"></block>。</block>
  <block id="02209b9e3a221b39bf0ce87641e7afc6" category="inline-link">设置容量池</block>
  <block id="7b4cb99ad8c150ff95b1a65d0f0524cc" category="list-text"><block ref="0fa33cef09dfad4c8795f42dd9dd5248" category="inline-link-rx"></block> （最低 4 TiB 标准版或高级版，具体取决于您的需求）。</block>
  <block id="1c7c9057bf4f7aee40c5a117c160c0fd" category="section-title">建立 AKS 虚拟网络和 Azure NetApp Files 虚拟网络对等关系</block>
  <block id="998069ab494c49ade2cc77591c02d9fa" category="paragraph">接下来，按照以下步骤将 AKS 虚拟网络（ vNet ）与 Azure NetApp Files vNet 建立对等关系：</block>
  <block id="bf12dce8dcc6febfeddec5ed2570e7d7" category="list-text">在 Azure 门户顶部的搜索框中，键入虚拟网络。</block>
  <block id="3f961f79effdf0aa37042e1733ee53ef" category="list-text">单击 vNet AK - vnet-name ，然后在搜索字段中输入 Peeids 。</block>
  <block id="0249aa06ef3e10e8754106189b542be4" category="list-text">单击 +Add ，然后输入下表中提供的信息：</block>
  <block id="6f16a5f8ff5d75ab84c018adacdfcbb7" category="cell">字段</block>
  <block id="88645c17102d75583e93db9aa716b012" category="cell">值或问题描述</block>
  <block id="f80824cb9ab9f704542dec0c71c5f38b" category="cell">对等链路名称</block>
  <block id="5d43607a5a0ebb50f3ea9348485daa15" category="cell">aps-vnet-name_to_anf</block>
  <block id="62912b52e584278e26870d9e5092e723" category="cell">subscriptionId</block>
  <block id="7d97336a164d9ce685e88a121141b189" category="cell">订阅要与之建立对等关系的 Azure NetApp Files vNet</block>
  <block id="82a60e720574cf435dda0a03976e8323" category="cell">vNet 对等配对节点</block>
  <block id="d2ade9376eb8b87db099330d20c4f180" category="cell">Azure NetApp Files vNet</block>
  <block id="5b92ad691782a9e4cc701e479c90997f" category="admonition">保留所有非星号部分的默认设置</block>
  <block id="0e5883528161213f3edc02dd718e1693" category="list-text">单击添加或确定将对等添加到虚拟网络。</block>
  <block id="12eee9bf8836d675f26602260016f7da" category="inline-link">创建，更改或删除虚拟网络对等关系</block>
  <block id="fa1f15d2aebd0592f338ea9f49e06377" category="paragraph">有关详细信息，请访问<block ref="610fa6db13a2eefe4a391b16732fbbf0" category="inline-link-rx"></block>。</block>
  <block id="91d2f55da5f23abbcf1a0656897d101b" category="paragraph">Trident 是 NetApp 为应用程序容器永久性存储维护的一个开源项目。Trident 已作为外部配置程序控制器实施，该控制器本身作为 POD 运行，可监控卷并完全自动化配置过程。</block>
  <block id="4088b2a65b2a3182209479dced5e78c5" category="paragraph">NetApp Trident 通过创建和附加永久性卷来存储培训数据集和经过培训的模型，可以与 K8 平稳集成。借助此功能，数据科学家和数据工程师可以更轻松地使用 K8 ，而无需手动存储和管理数据集。Trident 还可以通过逻辑 API 集成将数据管理相关任务集成在一起，因此数据科学家无需学习管理新的数据平台。</block>
  <block id="b8b9eab8c1ed7b79387652490f5724ec" category="section-title">安装 Trident</block>
  <block id="77dc68d199719a4b8f5eba742ecb7056" category="paragraph">要安装 Trident 软件，请完成以下步骤：</block>
  <block id="2f2e9ef9449e2f31756b1d3683a207b3" category="inline-link">首先安装 Helm</block>
  <block id="089f0e488d4e2b1a4b02d6d6b638c9d3" category="list-text"><block ref="b3c10ddb3b7f0e3e121ce123f60cc497" category="inline-link-rx"></block>。</block>
  <block id="e12559703ec38e80de7b94fecc84a043" category="list-text">下载并解压缩 Trident 21.01.1 安装程序。</block>
  <block id="7ee913d1a8b01e1a461f9eb99b0bba74" category="list-text">将目录更改为 `trident 安装程序` 。</block>
  <block id="8ad5650fb94bff45b328581838d836fd" category="list-text">将 `tridentctl` 复制到系统中的目录 ` $path.`</block>
  <block id="6da8d48465deb31425595b33a9172acf" category="list-text">使用 Helm 在 K8s 集群上安装 Trident ：</block>
  <block id="7b09729551ddb1a7445f559eb1186978" category="list-text">将目录更改为 helm 目录。</block>
  <block id="27b4c36cae8d1c4fd515d289942c87cc" category="list-text">安装 Trident 。</block>
  <block id="cea04f1ceb2ba2472ec50de3a03a689c" category="list-text">按照通常的 K8s 方式检查 Trident Pod 的状态：</block>
  <block id="6ac3c5fc780260af91dd10523188e6fd" category="list-text">如果所有 Pod 均已启动且正在运行，则会安装 Trident ，您可以继续操作。</block>
  <block id="7862dabe13bf66a99fcfd3a6b1af4d94" category="section-title">设置 Azure NetApp Files 后端和存储类</block>
  <block id="7e98dce86779e84763b71398d851f7bb" category="paragraph">要设置 Azure NetApp Files 后端和存储类，请完成以下步骤：</block>
  <block id="dadab4bead78e450739c0f56bad40cda" category="list-text">切换回主目录。</block>
  <block id="65b8f7db2e9a3793e76d2ec3787f71fa" category="inline-link">项目存储库</block>
  <block id="03636accad716972f761628ea21e43f6" category="list-text">克隆<block ref="2b240ffa21ddbdc99d1706dee4302f7e" category="inline-link-rx"></block> `lan-detect-scnan-horovod` 。</block>
  <block id="0ea725833b806058fe7810e6be91f9c0" category="list-text">转至 `trident — config` 目录。</block>
  <block id="c51fa2034e7d5d97ec8c31248fc18e98" category="list-text">创建 Azure 服务原则（服务原则是 Trident 如何与 Azure 通信以访问 Azure NetApp Files 资源）。</block>
  <block id="7c794fc1e683a6843753158bb92cab75" category="paragraph">输出应类似于以下示例：</block>
  <block id="203565dfd87ac32927ce5a828d45babd" category="list-text">创建 Trident `backend json` 文件。</block>
  <block id="d7e47f31bf1c921dd5e28ee7e6f5cd34" category="list-text">使用您的首选文本编辑器，填写 `anf-backend.json` 文件中下表中的以下字段。</block>
  <block id="689202409e48743b914713f96d93947c" category="cell">价值</block>
  <block id="8c443e170595ba0feac007ffb92cb49a" category="cell">subscriptionId</block>
  <block id="deb6a9aaa10be6bb24feea6a3540128c" category="cell">您的 Azure 订阅 ID</block>
  <block id="bc54592d6183695b841c6d1880ec0bf8" category="cell">tenantId</block>
  <block id="b147f00fa948b22faa89aa8044904495" category="cell">您的 Azure 租户 ID （上一步 AZ AD sp 的输出）</block>
  <block id="93c5bebdea9c94a0740fe6fd9bb250f0" category="cell">clientId</block>
  <block id="5760e6800c58c7dc9ee68efdc6db38de" category="cell">您的应用程序 ID （来自上一步 AZ AD sp 的输出）</block>
  <block id="2b53761249254ce6b502f521e5cc0683" category="cell">客户端机密</block>
  <block id="0571f76a94493cb2020d6c3b7453a367" category="cell">您的密码（上一步 AZ AD sp 的输出）</block>
  <block id="25e6b7ea847b31b4f88b60acd65052db" category="paragraph">此文件应类似于以下示例：</block>
  <block id="49356331b94221561b7751ae1f5343a9" category="list-text">指示 Trident 在 `trident` 命名空间中创建 Azure NetApp Files 后端，使用 `anf-backend.json` 作为配置文件，如下所示：</block>
  <block id="bd9c5e9bd5f130a6fbdbcaeb04656652" category="list-text">创建存储类：</block>
  <block id="a9fa0a3d8bf1bce76ef654f0a047b8fe" category="list-text">K8 用户使用按名称指定存储类的 PVC 配置卷。指示 K8s 使用以下命令创建一个存储类 `azurenetappfiles` ，该存储类将引用上一步中创建的 Azure NetApp Files 后端：</block>
  <block id="5e121b263b32950e629eaf774c12da78" category="list-text">使用以下命令检查是否已创建存储类：</block>
  <block id="202ed88f7ec48eda708f6c062786f474" category="paragraph"><block ref="202ed88f7ec48eda708f6c062786f474" category="inline-image-macro-rx" type="image"></block></block>
  <block id="72611a189b0331f709788d99912a1bd7" category="section-title">在 AKS 上部署和设置卷快照组件</block>
  <block id="3ea90db69187da57e9739e033add6801" category="paragraph">如果集群未预安装正确的卷快照组件，则可以通过运行以下步骤手动安装这些组件：</block>
  <block id="c3987ca9f11aad20ef5d2ae0dd30f9cb" category="admonition">AK 1.18.14 没有预安装的 Snapshot 控制器。</block>
  <block id="312e34d756f6ef39f0bd74e2f844773f" category="list-text">使用以下命令安装 Snapshot 测试版 CRD ：</block>
  <block id="529616f838a47cade6e5fac6f879ce5a" category="list-text">使用 GitHub 中的以下文档安装 Snapshot 控制器：</block>
  <block id="90a2427d3a3145723cd2a130c5372865" category="inline-link">卷快照类</block>
  <block id="8f2838f14b6a64dd466dc23bcf7e3c01" category="list-text">设置 K8s `volumesnapshotclass` ：创建卷快照之前，请先执行<block ref="cba124de563550c68e57cf9a6641a5d1" category="inline-link-rx"></block> 必须已设置。为 Azure NetApp Files 创建卷快照类，并使用它通过 NetApp Snapshot 技术实现 ML 版本控制。create `volumesnapshotclass netapp-csI-snapclass` 并将其设置为 default `volumesnapshotclass `，如下所例：</block>
  <block id="adc3a39a071327998da9cc6708ef4fe8" category="paragraph"><block ref="adc3a39a071327998da9cc6708ef4fe8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="770bec683fa99c1a917babb074d95e66" category="list-text">使用以下命令检查是否已创建卷 Snapshot 副本类：</block>
  <block id="99b5a364457d91999df6ca6488b800f2" category="paragraph"><block ref="99b5a364457d91999df6ca6488b800f2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2d9a6cca62c9095cbae70692ef82741c" category="section-title">运行： AI 安装</block>
  <block id="d1d2b81816d977b7a9d3480a495beda5" category="paragraph">要安装 run ： ai ，请完成以下步骤：</block>
  <block id="7899a1a12ecf76a5676a6d5ddb64842f" category="inline-link">在 AKS 上安装 run ： ai 集群</block>
  <block id="54437101a8cdfe297499d517331ced60" category="list-text"><block ref="400679f1b873ae4a832f018613d486cc" category="inline-link-rx"></block>。</block>
  <block id="5f854e827ba37f66f45f8e47643e23ea" category="list-text">转至 app.runai.ai ，单击创建新项目，然后将其命名为 LAN-detection 。它将在 K8s 集群上创建一个命名空间，其开头为 `runai` - ，后跟项目名称。在这种情况下，创建的命名空间将为 runai-lane 检测。</block>
  <block id="e699d582d1b58a9a23ebd74cab11d5bc" category="paragraph"><block ref="e699d582d1b58a9a23ebd74cab11d5bc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="546524b2c8ed6fd083c9286159ebd55a" category="inline-link">安装 run ： ai 命令行界面</block>
  <block id="f3a9807f54199fd5dbad651af2ea853a" category="list-text"><block ref="6291ffcd5a23a3d0b996bc90930ef0b3" category="inline-link-rx"></block>。</block>
  <block id="08d1d73b27232763a82ef46a413779ce" category="list-text">在您的终端上，使用以下命令将通道检测设置为默认运行： AI project ：</block>
  <block id="0ca589f93fd9565aa5fc097fd66437ae" category="paragraph"><block ref="0ca589f93fd9565aa5fc097fd66437ae" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4cd1a85dd18a7a0b8f1d07b4240fafcf" category="list-text">为项目命名空间创建 ClusterRole 和 ClusterRoleBinding （例如， `LANE-detection ）` 因此，属于 `runai-lan-detection` namespace 的默认服务帐户有权在作业执行期间执行 `volumesnapshot` 操作：</block>
  <block id="351495b134e625df33dfb5230d6eab7b" category="list-text">使用以下命令列出命名空间以检查 `runai-lan-detection` 是否存在：</block>
  <block id="bd546162071f28fd50f8c977ac61149e" category="paragraph">输出应类似于以下示例：</block>
  <block id="8c33c9910dfecb6260489cd05f43b275" category="paragraph"><block ref="8c33c9910dfecb6260489cd05f43b275" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f23930532ba19f8970c6dcb4b6ad778f" category="list-text">使用以下命令创建 ClusterRole `netappsnapshot` 和 ClusterRoleBinding`netappsnapshot` ：</block>
  <block id="7e3ec6f763cd8a13380162aba60c47e0" category="section-title">下载并将 TuSimple 数据集作为 run ： ai 作业处理</block>
  <block id="c0cc307d9f63d0a096f8d6e3193cd561" category="paragraph">下载并处理运行时的 TuSimple 数据集的过程： AI 作业是可选的。其中包括以下步骤：</block>
  <block id="52eeaf7bac6d3e2111d129a11d0bafed" category="list-text">构建并推送 Docker 映像，或者如果要使用现有 Docker 映像（例如， `muneer7589/download-tusimple ： 1.0 ）` ，则省略此步骤</block>
  <block id="0d5647db76048e129c1146a822abbdd8" category="list-text">切换到主目录：</block>
  <block id="02c403c221afbdccdc4f7182e2eb5cb7" category="list-text">转到项目的数据目录 `lan-detect-scnan-horovod` ：</block>
  <block id="eed104c2f8af7c3526ec55b8cc69dde7" category="list-text">修改 `build_image.sh` shell 脚本并将 Docker 存储库更改为您的。例如，将 `muneer7589` 替换为 Docker 存储库名称。您还可以更改 Docker 映像名称和标记（例如 `download-tusimple` 和 `1.0` ）：</block>
  <block id="689ff7d72d2cc0f0d595b0c8ace1cdfa" category="paragraph"><block ref="689ff7d72d2cc0f0d595b0c8ace1cdfa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6ed49e04589e6c9071bbd1af307f83a0" category="list-text">运行脚本以构建 Docker 映像，并使用以下命令将其推送到 Docker 存储库：</block>
  <block id="8ebf5e70d0ed304519c7c9b525d80af1" category="list-text">提交运行： AI 作业，以下载，提取，预处理并将 Tubple 通道检测数据集存储在一个 `PVC` 中，该 PVC 由 NetApp Trident 动态创建：</block>
  <block id="050d58b165aef32cad86839521b721b2" category="list-text">使用以下命令提交运行： AI 作业：</block>
  <block id="83b4fb868b7505e293871c3e5accc98c" category="list-text">输入下表中的信息以提交运行： AI 作业：</block>
  <block id="e50d72d773874b2be58530daec43900c" category="cell">name</block>
  <block id="37e9bb74490b0ac510effff5a546f11d" category="cell">作业的名称</block>
  <block id="5503ed8f71ae365eb6f5e8221562a0eb" category="cell">-pvc</block>
  <block id="626299ff067d1e6a178beced1631ab43" category="cell">PVC 格式为 [StorageClassName] ： size ： ContainerMountPath 在上述作业提交中，您正在使用具有存储类 azurenetappfiles 的 Trident 根据需要创建 PVC 。此处的永久性卷容量为 100Gi ，并挂载在路径 /mnt 处。</block>
  <block id="0247d7fb481075907b9eb467cfe90e3a" category="cell">图像</block>
  <block id="b30f1ca8b35fd6ccab829a959f414a51" category="cell">创建此作业的容器时要使用的 Docker 映像</block>
  <block id="22a55ba6c8590fa98f1b3234141f2848" category="paragraph"><block ref="22a55ba6c8590fa98f1b3234141f2848" category="inline-image-macro-rx" type="image"></block></block>
  <block id="af270e479cd849e4a9cb6d17b76585ef" category="list-text">列出已提交的运行： AI 作业。</block>
  <block id="f740410b6ea33d3ffc740140cc23a0e2" category="paragraph"><block ref="f740410b6ea33d3ffc740140cc23a0e2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="51869a860c4af748ec2815d406929a17" category="list-text">检查提交的作业日志。</block>
  <block id="ab353387b0e5276e03aecae4cc95d150" category="paragraph"><block ref="ab353387b0e5276e03aecae4cc95d150" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d84dd51baa0cf15db0a639dbb6d5d8ee" category="list-text">列出已创建的 `PVC` 。在下一步中使用此 `PVC` 命令进行培训。</block>
  <block id="cc2e05fe54a847aee415a2deb0b7f13e" category="paragraph"><block ref="cc2e05fe54a847aee415a2deb0b7f13e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b20e4749f78095f0b9adf5c3cad36f81" category="list-text">在 run ： ai UI （或 `app.run.ai` ）中检查作业。</block>
  <block id="ced39410c19f3968638fc81e16743f32" category="paragraph"><block ref="ced39410c19f3968638fc81e16743f32" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3dee54cb181d3bfde644600fb15bbac4" category="section-title">使用 Horovod 执行分布式通道检测培训</block>
  <block id="645e2c981858a720c673c6a782efd9ea" category="paragraph">使用 Horovod 执行分布式通道检测培训是一个可选过程。但是，需要执行以下步骤：</block>
  <block id="04e568eec6dda4a0cfb1fc6680509d35" category="list-text">构建并推送 Docker 映像，或者如果要使用现有 Docker 映像（例如， `muneer7589/dist-lan-detection ： 3.1 ），请跳过此步骤：`</block>
  <block id="b01fdc5088b4a04549ed5e7cc71f898b" category="list-text">切换到主目录。</block>
  <block id="14e21ef8495bc1dd543db0aebbe06c5b" category="list-text">转到项目目录 `lan-detect-scnan-horovod.`</block>
  <block id="0a27aa824e245e7b31f5f8d990636ead" category="list-text">修改 `build_image.sh` shell 脚本并将 Docker 存储库更改为您的（例如，将 `muneer7589` 替换为您的 Docker 存储库名称）。您也可以更改 Docker 映像名称和标记（例如， `dist-lan-detection` 和 `3.1 ）` 。</block>
  <block id="c9ce95c3d4cf96d5e894e4a834754cb6" category="paragraph"><block ref="c9ce95c3d4cf96d5e894e4a834754cb6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2776d43d1e635424496622f14cfd745c" category="list-text">运行脚本以构建 Docker 映像并推送到 Docker 存储库。</block>
  <block id="b9bcfd06c5cdfc67a00ffe8a0c846318" category="list-text">提交 Run ： AI 作业以执行分布式培训（ MPI ）：</block>
  <block id="f3b76b64a9761cfb85f0ddc37d910fef" category="list-text">使用提交运行： AI 在上一步中自动创建 PVC （用于下载数据）仅允许您访问 RW ，这样不允许多个 Pod 或节点在分布式培训中访问同一 PVC 。将访问模式更新为 ReadWriteMany ，然后使用 Kubernetes 修补程序执行此操作。</block>
  <block id="2874172b683ddc4047fd63f29baf543d" category="list-text">首先，运行以下命令以获取 PVC 的卷名称：</block>
  <block id="bcc0952c2970bfd6c85cd65050e00533" category="paragraph"><block ref="bcc0952c2970bfd6c85cd65050e00533" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f64ac0e4e6343f4593e210b98f9c91de" category="list-text">修补卷并将访问模式更新为 ReadWriteMany （在以下命令中将卷名称替换为您的）：</block>
  <block id="7a9d347cf2f324e82478a9cf243448f7" category="list-text">使用下表中的信息提交运行： AI MPI 作业以执行分布式培训` 作业：</block>
  <block id="b068931cc450442b63f5b3d276ea4297" category="cell">name</block>
  <block id="e4580c1854231c935f0cf2eb4609d97a" category="cell">分布式培训作业的名称</block>
  <block id="384dd16a327b7f16278642f008c27fab" category="cell">大型 shm</block>
  <block id="fc9fed4d0a3cb207102499ba041f2603" category="cell">挂载大型 /dev/shm 设备这是一个挂载在 RAM 上的共享文件系统，可为多个 CPU 工作人员提供足够大的共享内存来处理批处理并将其加载到 CPU RAM 中。</block>
  <block id="530968b205d33b3869aa32e2933fbfad" category="cell">流程</block>
  <block id="403e4aa48fedb1c5777ee913b2f2bedb" category="cell">分布式培训流程的数量</block>
  <block id="0aa0be2a866411d9ff03515227454947" category="cell">GPU</block>
  <block id="031492a2d708ca774bd08c099eb4dd79" category="cell">要为此作业中的作业分配的 GPU/ 进程数，有三个 GPU 工作进程（ -processes=3 ），每个进程都分配有一个 GPU （ -GPU 1 ）</block>
  <block id="642542e40351edbd731ebad352b31317" category="cell">PVC</block>
  <block id="c50723a53a74a682495f8c3810ce4a65" category="cell">使用由先前作业（ download-tusimple 数据）创建并挂载到路径 /mnt 的现有永久性卷（ vpvc 下载 -tusimple 数据 0 ）</block>
  <block id="78805a221a988e79ef3f42d7c5bfd418" category="cell">图像</block>
  <block id="8c236f63f205a50942b609a6d45734a7" category="cell">定义要在容器中设置的环境变量</block>
  <block id="61dcf83940f915d0c5fe5b985eed7be8" category="cell">use_works.</block>
  <block id="f84e120605e14d9755a1ed2e8e03cea6" category="cell">如果将参数设置为 true ，则会启用多进程数据加载</block>
  <block id="90b186f5d2a6890e77373c8aa60461e7" category="cell">num_works.</block>
  <block id="a10574eb8e119b847fb5ab95b788e723" category="cell">数据加载程序工作进程的数量</block>
  <block id="61c67ea819106ff81c08249014791d3b" category="cell">batch_size</block>
  <block id="243f7fe32e2dbb7748c1a018fe60016e" category="cell">训练批大小</block>
  <block id="d07f4474a5e5996da9b6e57abb250331" category="cell">使用 VAL</block>
  <block id="919bc92a851c1d3e2c467e844398b751" category="cell">如果将参数设置为 true ，则可以进行验证</block>
  <block id="c4407b612c3b5e2c00c1b5522c686c84" category="cell">Val_batch_size</block>
  <block id="597765782da042e86019b4c919a86248" category="cell">验证批处理大小</block>
  <block id="18e0d33045db50bb37e6f2fcd5c0b842" category="cell">enable_snapshot</block>
  <block id="67c5deea68dff022b0f807ffb3bf56e2" category="cell">如果将参数设置为 true ，则可以为 ML 版本控制创建数据和经过培训的模型快照</block>
  <block id="cdd7dd1603420ef6c3efe7b264205137" category="cell">PVC_NAME</block>
  <block id="d95926771c9100db9ba3e3247c86a192" category="cell">要为其创建快照的 PVC 的名称。在提交的上述作业中，您将创建由数据集和经过培训的模型组成的 PVC-download-tusimple data-0 的快照</block>
  <block id="b302d66ab7f3f0c94236ff26c8ead4d9" category="inline-image-macro">错误：缺少图形映像</block>
  <block id="d52f66f6b7bb9cf3c7382d8ce6f6b9ea" category="paragraph"><block ref="d52f66f6b7bb9cf3c7382d8ce6f6b9ea" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3299ed00d03beff0cc2ebaf178a91786" category="list-text">列出已提交的作业。</block>
  <block id="2e593aa2ccf62807184e56a543d23e97" category="paragraph"><block ref="2e593aa2ccf62807184e56a543d23e97" category="inline-image-macro-rx" type="image"></block></block>
  <block id="82abe908a319245230ef0f3ec84c263f" category="list-text">已提交作业日志：</block>
  <block id="dab56217fc48a1919fee48434a7c7204" category="paragraph"><block ref="dab56217fc48a1919fee48434a7c7204" category="inline-image-macro-rx" type="image"></block></block>
  <block id="981528b0e4cd4a19c56310c6b9c915ce" category="list-text">查看 Run 中的培训作业： AI GUI （或 app.runai.ai): run ： AI Dashboard ，如下图所示。第一个图详细介绍了为分布在 AKS 三个节点上的分布式培训作业分配的三个 GPU ，以及第二个运行： AI 作业：</block>
  <block id="d8cbd4299e4baf5de5572bf6af32dd52" category="paragraph"><block ref="d8cbd4299e4baf5de5572bf6af32dd52" category="inline-image-macro-rx" type="image"></block></block>
  <block id="90fdc4068f0b660d1d6b102946986bd1" category="paragraph"><block ref="90fdc4068f0b660d1d6b102946986bd1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9e8bb0b427c33dd6cf63d1a3a37c7022" category="list-text">完成培训后，请检查创建的 NetApp Snapshot 副本，并将其与 run ： ai 作业链接在一起。</block>
  <block id="6c94f812a836696605e3e2b6bd5ca768" category="paragraph"><block ref="6c94f812a836696605e3e2b6bd5ca768" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e4c0a1395081fc81855e465c493f4967" category="section-title">从 NetApp Snapshot 副本还原数据</block>
  <block id="ec8de1dcfce51c9d877901e2f6f5971e" category="paragraph">要从 NetApp Snapshot 副本还原数据，请完成以下步骤：</block>
  <block id="5adc4d7860e7ad0f78ada0bb1f0eaca6" category="list-text">转到项目目录 `lan-detect-scnan-horovod` 。</block>
  <block id="6344772f26907403fed713060f33b8f4" category="list-text">修改 `restore-snaphot-vc.yaml` 并将 `dataSource` `name` 字段更新到要从中还原数据的 Snapshot 副本。您也可以更改要将数据还原到的 PVC 名称，在此示例中为其 `restored-tusimple` 。</block>
  <block id="b3b5448c329ac882bc890a1be1a1b369" category="paragraph"><block ref="b3b5448c329ac882bc890a1be1a1b369" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8f8efb3d1b86c88cfab193291776b6ad" category="list-text">使用 `restore-snapshot-vc.yaml` 创建新的 PVC 。</block>
  <block id="34c7c2e95019754701182fe2ab194499" category="paragraph"><block ref="34c7c2e95019754701182fe2ab194499" category="inline-image-macro-rx" type="image"></block></block>
  <block id="070856555a817dbf9a4061542b2098ca" category="list-text">如果您要使用刚刚还原的数据进行培训，则作业提交将保持不变；在提交培训作业时，只需将 `vc_name` 替换为已还原的 `vc_name` ，如以下命令所示：</block>
  <block id="e945ddc4d35a9c49a17bd00c53db05a6" category="section-title">性能评估</block>
  <block id="3451b157ef07ae84bfaba5fb6639c1ba" category="paragraph">为了显示解决方案的线性可扩展性，我们对以下两种情形进行了性能测试：一个 GPU 和三个 GPU 。在有关 TuSimple 通道检测数据集的培训中，我们捕获了 GPU 分配， GPU 和内存利用率，不同的单节点和三节点指标。为了分析培训过程中的资源利用率，数据增加了五倍。</block>
  <block id="b8077d533d2f9918c47d330cbac4392d" category="inline-link-macro">Azure NetApp Files 服务级别</block>
  <block id="da9b7dc2993c3c848d5d9a9a15806d8c" category="paragraph">借助解决方案，客户可以从一个小型数据集和几个 GPU 入手。当数据量和 GPU 需求增加时，客户可以动态地横向扩展标准层中的 TB ，并快速扩展到高级层，从而在不移动任何数据的情况下获得每 TB 吞吐量的四倍。本节将进一步介绍此过程。 <block ref="bdbab4daa7de478307acc7147c869853" category="inline-link-macro-rx"></block>。</block>
  <block id="090a231c840a0cb23aa29c8d1afc7832" category="paragraph">一个 GPU 的处理时间为 12 小时 45 分钟。三个节点上的三个 GPU 的处理时间约为 4 小时 30 分钟。</block>
  <block id="49eca64b9f03702167beb48ebd38587b" category="paragraph">本文档其余部分中显示的图说明了根据各个业务需求提供的性能和可扩展性示例。</block>
  <block id="abfc10c2bc00a990735e6d27797295a8" category="paragraph">下图显示了 1 个 GPU 分配和内存利用率。</block>
  <block id="8d7e3abab70510c3f4636ff7bf953250" category="paragraph"><block ref="8d7e3abab70510c3f4636ff7bf953250" category="inline-image-macro-rx" type="image"></block></block>
  <block id="31a3d2def4927574922946c38f043c0b" category="paragraph">下图显示了单节点 GPU 利用率。</block>
  <block id="58cf0f270760f08ac96254402d0696dc" category="paragraph"><block ref="58cf0f270760f08ac96254402d0696dc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dcca9cfd87d9f2087d720ef187655cea" category="paragraph">下图显示了单节点内存大小（ 16 GB ）。</block>
  <block id="e22d39f2830d0f3e3944644d0f605d41" category="paragraph"><block ref="e22d39f2830d0f3e3944644d0f605d41" category="inline-image-macro-rx" type="image"></block></block>
  <block id="576c0843e21d5ee884a067aa7b6a1a40" category="paragraph">下图显示了单节点 GPU 计数（ 1 ）。</block>
  <block id="ef855771be83c072ebaafc60d2d1933f" category="paragraph"><block ref="ef855771be83c072ebaafc60d2d1933f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a2c50f1b8fc86c36cc0df94dd14b46b9" category="paragraph">下图显示了单节点 GPU 分配（ % ）。</block>
  <block id="e295f84458327d01315b814d8deb2aea" category="paragraph"><block ref="e295f84458327d01315b814d8deb2aea" category="inline-image-macro-rx" type="image"></block></block>
  <block id="54b2b7f256373eac14419bfec5b84b21" category="paragraph">下图显示了三个节点上的三个 GPU — GPU 分配和内存。</block>
  <block id="e763ef0e4b7cb9d022bf6db49319c570" category="paragraph"><block ref="e763ef0e4b7cb9d022bf6db49319c570" category="inline-image-macro-rx" type="image"></block></block>
  <block id="94ab4242b167972f7a9f0513ca772555" category="paragraph">下图显示了三个节点的三个 GPU 利用率（ % ）。</block>
  <block id="d786146ae56597413fa5be548126cda9" category="paragraph"><block ref="d786146ae56597413fa5be548126cda9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="45c31ecb239228cac5e96860d42f9a4d" category="paragraph">下图显示了三个节点的三个 GPU 内存利用率（ % ）。</block>
  <block id="2224958fd5113068ac8a3b55a336661b" category="paragraph"><block ref="2224958fd5113068ac8a3b55a336661b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="79f05e8f99917560625d1cf3f2d4fc5d" category="inline-link">服务级别</block>
  <block id="07c1fda2408980b5d53ea06ad3cc5ed1" category="paragraph">您可以通过将现有卷移动到使用的另一个容量池来更改此卷的服务级别<block ref="bc9fbd5fd43d884f02abe6a6f9b51339" category="inline-link-rx"></block> 所需的卷。此卷的现有服务级别更改不需要迁移数据。它也不会影响对卷的访问。</block>
  <block id="5e2ff0b5dc3206032a81aa3aecb7c462" category="section-title">动态更改卷的服务级别</block>
  <block id="58e691ddc6184f73e5d6b513ca5a3c49" category="paragraph">要更改卷的服务级别，请执行以下步骤：</block>
  <block id="3f19b438418ed162387a3050b304c89b" category="list-text">在卷页面上，右键单击要更改其服务级别的卷。选择更改池。</block>
  <block id="5acf521dbc5099b2ec33a64efac89595" category="paragraph"><block ref="5acf521dbc5099b2ec33a64efac89595" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6533c4186062235d8b7f47e232e92597" category="list-text">在更改池窗口中，选择要将卷移动到的容量池。然后，单击确定。</block>
  <block id="3f0874d07ce6ae728a6dcdda7903f9cd" category="paragraph"><block ref="3f0874d07ce6ae728a6dcdda7903f9cd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cb935c59f24539e0966b7ab5c761e862" category="section-title">自动执行服务级别更改</block>
  <block id="1391028ed384c93fd59fd5a0097f9181" category="paragraph">动态服务级别更改当前仍在公有预览中，但默认情况下不会启用。要在 Azure 订阅上启用此功能，请按照文档 " 中提供的步骤进行操作<block ref="5c3671452d40598396b030d5c9c6dc27" category="inline-link-rx"></block>。 "</block>
  <block id="407443b5508c517acd825fbcddb7ab4c" category="inline-link">AZ netappfiles volume ：管理 Azure NetApp Files （ ANF ）卷资源</block>
  <block id="1d3afb31c5d2a81fca940ae760671a1c" category="list-text">您还可以对 Azure 使用以下命令： CLI 。有关更改 Azure NetApp Files 的池大小的详细信息，请访问<block ref="8b45caafcc8d758d5c37edb19f8a2761" category="inline-link-rx"></block>。</block>
  <block id="ebd5b070cb8457b94f1916baa92c3c7d" category="inline-link">更改 Azure NetApp Files 卷的池</block>
  <block id="d5460fd5fbfbf643b9a4bc1d1de279d0" category="list-text">此处显示的 `set- aznetappfilesvolumepool` cmdlet 可更改 Azure NetApp Files 卷的池。有关更改卷池大小和 Azure PowerShell 的详细信息，请访问<block ref="70c8d95cde8b63eae0d37a8b81a31482" category="inline-link-rx"></block>。</block>
  <block id="092bf78f9c97ba171b8232ddff585392" category="doc">追加信息</block>
  <block id="7661400c51b9fc184bdec46eb5577ff9" category="doc">从 GitHub 获取代码</block>
  <block id="1a3652d661d6b73b6aa57aff1fa5e4d4" category="paragraph">既然 NetApp Cloud Volume 或 NetApp Trident 卷可供 Iguazio 集群和开发人员环境使用，您就可以开始查看该应用程序了。</block>
  <block id="ae53ae826cc9a587fbaee0e834dd75ca" category="paragraph">用户拥有自己的工作空间（目录）。在每个笔记本电脑上，用户目录的路径为 ` /User` 。Iguazio 平台负责管理目录。如果按照上述说明进行操作，则可以在 ` /NetApp` 目录中找到 NetApp Cloud 卷。</block>
  <block id="754e85a9ea7f4fbb718080a73790abdb" category="paragraph">使用 Jupyter 终端从 GitHub 获取代码。</block>
  <block id="1d706cc291efb1d79274befd6f9dd64c" category="paragraph"><block ref="1d706cc291efb1d79274befd6f9dd64c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="12d0e4b8ba8db4e6a7aa1dda942a1ed4" category="paragraph">在 Jupyter 终端提示符处，克隆项目。</block>
  <block id="d4095d9e0ab52b6d683ace00b5cbea55" category="paragraph">现在，您应在 Jupyter 工作空间的文件树中看到 `NetOps" - "NetApp` " 文件夹。</block>
  <block id="f8161ff446bbd6f76b0d99d6f34a1d7f" category="inline-link-macro">下一步：配置工作环境</block>
  <block id="48dd929a2f5f248856ce2768950aff4e" category="paragraph"><block ref="48dd929a2f5f248856ce2768950aff4e" category="inline-link-macro-rx"></block></block>
  <block id="2e52c56d063752bbfeda9c8f9d2fee41" category="summary">此页面介绍了在 Kubernetes 集群中安装和配置 NetApp Trident 时必须完成的任务。</block>
  <block id="7c4090c7fa7a91e8c7fed182401dbf6b" category="doc">NetApp Trident 部署和配置</block>
  <block id="e539ec743b02403b5ba74b884d117a5a" category="paragraph">本节介绍在 Kubernetes 集群中安装和配置 NetApp Trident 时必须完成的任务。</block>
  <block id="d6c3cdbd20fe8752d1f443bdb84038e3" category="list-text">您已有一个有效的 Kubernetes 集群，并且正在运行 Trident 支持的 Kubernetes 版本。有关支持的版本列表，请参见<block ref="e6b3671f5db59046617458d31ef4f50b" category="inline-link-rx"></block>。</block>
  <block id="14ede02439184c7c75e53410ffa40370" category="list-text">您已有一个可正常工作的 NetApp 存储设备，软件定义的实例或云存储服务， Trident 支持此服务。</block>
  <block id="984b69562391cb8032fd50ded03a29a6" category="paragraph">要在 Kubernetes 集群中安装和配置 NetApp Trident ，请从部署跳转主机执行以下任务：</block>
  <block id="07d8795f785e6495307106596d07402e" category="list-text">使用以下方法之一部署 Trident ：</block>
  <block id="040d3466a6f1c45ca2e523c9354dfdc7" category="inline-link">Trident 部署说明</block>
  <block id="bb6989644edf59b8c5e0de0c25b6f8b6" category="list-text">如果您使用 NVIDIA DeepOps 部署 Kubernetes 集群，则也可以使用 NVIDIA DeepOps 在 Kubernetes 集群中部署 Trident 。要使用 DeepOps 部署 Trident ，请按照<block ref="77e542aaaac8c5d2482c94ca2d79c997" category="inline-link-rx"></block> 在 NVIDIA DeepOps GitHub 站点上。</block>
  <block id="014e85e7f3bbdad1ad6f193e82d21755" category="inline-link">部署说明</block>
  <block id="b6463ef77c88b4c74dd6c4b1479d1bae" category="list-text">如果您未使用 NVIDIA DeepOps 部署 Kubernetes 集群，或者您只是希望手动部署 Trident ，则可以按照部署 Trident<block ref="73e6be38c8ff1e0c58865c34876a2e98" category="inline-link-rx"></block> 在 Trident 文档中。请务必至少创建一个 Trident 后端和一个 Kubernetes StorageClass 。有关后端和 StorageClasses 的详细信息，请参见<block ref="e6b3671f5db59046617458d31ef4f50b" category="inline-link-rx"></block>。</block>
  <block id="7cfdcb466d040b6c8f9c85e9981b9652" category="inline-link-macro">适用于 ONTAP AI 部署的 Kubernetes Storageclasses 示例</block>
  <block id="180b707bbdd9c2fc8001a966c6c7d029" category="admonition">如果要在 ONTAP AI POD 上部署 NetApp AI 控制平台解决方案，请参见 <block ref="5ce2b96729b1637e197bdd36eb4db4ee" category="inline-link-macro-rx"></block> 有关您可能希望创建和的不同 Trident 后端的一些示例，请参见 <block ref="d495c2f5a68f6923824470c0096419c8" category="inline-link-macro-rx"></block> 有关可能要创建的不同 Kubernetes StorageClasses 的一些示例，请参见。</block>
  <block id="13e8f52d7e19f83d3e64003c58ea220b" category="doc">使用 NDE 在 NetApp HCI 上部署 VMware 虚拟基础架构（自动化部署）</block>
  <block id="2635318d9bf1ea76c73bfab7f3eeafb7" category="section-title">NDE 部署前提条件</block>
  <block id="f6ec2c1aa5118cb19e89af5a10ecb65c" category="inline-link">NetApp HCI 前提条件检查清单</block>
  <block id="2187fc20798cda55150d8c067fac10be" category="paragraph">请参见<block ref="c760383d1767df51ab118e6ffc289894" category="inline-link-rx"></block> 在开始部署之前查看 NetApp HCI 的要求和建议。</block>
  <block id="cd02d0868a7414dd1e76924b30b82b52" category="list-text">网络和交换机要求和配置</block>
  <block id="1d8b6c167080876dff9ad2e74e70fecf" category="list-text">准备所需的 VLAN ID</block>
  <block id="17cec09f14c225b5f27dc73542e9077a" category="list-text">交换机配置</block>
  <block id="4d40082ed807aa2fb7e1d2f03921e4d4" category="list-text">NetApp HCI 和 VMware 的 IP 地址要求</block>
  <block id="2e8e4792043f43cb4b34a84b8dcd909b" category="list-text">DNS 和保留时间要求</block>
  <block id="829710d6ec2a8e59e7a69fb3537ec494" category="list-text">最后准备工作</block>
  <block id="fb720b4ad7c03710e0e5771c9fb58b44" category="section-title">NDE 执行</block>
  <block id="cf50c81e30d1d64fcb4992a9792abedb" category="paragraph">在执行 NDE 之前，您必须完成所有组件的机架和堆栈，网络交换机的配置以及所有前提条件的验证。如果您计划允许 NDE 自动配置所有地址，则可以通过连接到单个存储节点的管理地址来执行 NDE 。</block>
  <block id="130c61c344b6fbf262b6f63818eab7e4" category="paragraph">NDE 执行以下任务以使 HCI 系统联机：</block>
  <block id="d89f68a2ec388fe5d72fb6fe024a0176" category="list-text">至少在两个存储节点上安装存储节点（ NetApp Element 软件）。</block>
  <block id="f6f86c1086573c7daeb1f48535041576" category="list-text">至少在两个计算节点上安装 VMware 虚拟机管理程序。</block>
  <block id="0718265bec3e2ee6fc9d5e0773b5ff60" category="list-text">安装 VMware vCenter 以管理整个 NetApp HCI 堆栈。</block>
  <block id="e09575b9713329ebe2480dbf404b2b1b" category="list-text">安装和配置 NetApp 存储管理节点（ mNode ）和 NetApp 监控代理。</block>
  <block id="dddc28f734d0bcb367638f51ef8b4dfa" category="admonition">此验证使用 NDE 自动配置所有地址。您也可以在环境中设置 DHCP ，或者为每个存储节点和计算节点手动分配 IP 地址。本指南不会介绍这些步骤。</block>
  <block id="dd9cd526f5753b79bda6de19f1a66fe9" category="paragraph">如前所述，此验证对计算节点使用双缆线配置。</block>
  <block id="32691d86c49e682187776e0262b732d7" category="paragraph">本文档不介绍 NDE 的详细步骤。</block>
  <block id="968a3687be335c74374e73712c63e2e4" category="inline-link">部署指南</block>
  <block id="8b6e1a3a9d21ff63520793416432cd56" category="paragraph">有关完成基础 NetApp HCI 平台部署的分步指导，请参见<block ref="7742239770a3accee30f01673a1a43a5" category="inline-link-rx"></block>。</block>
  <block id="61ef02ded53524d506cd714c5821cd86" category="list-text">完成 NDE 后，登录到 vCenter 并创建一个分布式端口组 `NetApp HCI VDS 01-NFS_Network` ，以供 ONTAP Select 和应用程序使用。</block>
  <block id="9fb27fdce8d8c70b2c7b741958c8ac6e" category="inline-link-macro">下一步：配置 NetApp H615c （手动部署）</block>
  <block id="6623698128b1c14d8639f2404306f783" category="paragraph"><block ref="6623698128b1c14d8639f2404306f783" category="inline-link-macro-rx"></block></block>
  <block id="bd9091c7320e4b1069eed28f04839354" category="paragraph">在构建自己的 AI/ML 管道时，配置架构中组件的集成，管理，安全性和可访问性是一项极具挑战性的任务。让开发人员访问和控制其环境也带来了另一组挑战。</block>
  <block id="820423ca1ad0e872ef04cbb366b6e3de" category="paragraph">NetApp 与 Iguazio 的结合将这些技术作为托管服务整合在一起，加快了技术采用速度，并缩短了新 AI/ML 应用程序的上市时间。</block>
  <block id="b0a9c7dc36cb18f93679b833533b9936" category="paragraph"><block ref="b0a9c7dc36cb18f93679b833533b9936" category="inline-link-macro-rx"></block></block>
  <block id="2fb227f90ebf269423fe0cf1a15b8111" category="doc">定义永久性卷声明</block>
  <block id="8f5da11015f2baf835f0e8b421c1cfe9" category="list-text">将以下 YAML 保存到文件中，以创建类型为 Basic 的 PVC 。</block>
  <block id="04c58cdb1d0c073dd558caf87f2b8ed1" category="list-text">将 YAML 文件应用于您的 Iguazio Kubernetes 集群。</block>
  <block id="f685fdfcc5aedb3ccc237a4020b69cd8" category="section-title">将 NetApp 卷附加到 Jupyter 笔记本电脑</block>
  <block id="dc4b8e255a77b2c73f89b702dbb7acc5" category="inline-link">Iguazio 应用程序服务和工具概述</block>
  <block id="11eb1e24a14c1d15ee5e287b4338b764" category="paragraph">Iguazio 提供多种托管服务，为数据科学家提供完整的端到端堆栈，用于开发和部署 AI/ML 应用程序。有关这些组件的详细信息，请参见<block ref="2cf4dcc22fda31f66959754df93d6196" category="inline-link-rx"></block>。</block>
  <block id="3591be3d07a4f8a37d218b9e92bea432" category="paragraph">其中一项托管服务是 Jupyter Notebook 。每个开发人员都可以使用开发所需的资源自行部署一个笔记本容器。要授予他们对 NetApp Cloud Volume 的访问权限，您可以将卷分配给容器，并在下图中显示了永久性卷声明的正在运行的用户和环境变量设置。</block>
  <block id="e0d870d503aeb797f7626b14c9acb4ae" category="paragraph">对于内部配置，您可以参见<block ref="7ccf7acaa308282d5274101157fd43e5" category="inline-link-rx"></block> 在 Trident 设置中启用 NetApp ONTAP 数据管理功能，例如为数据或模型创建 Snapshot 副本以进行版本控制。在 Trident 后端配置文件中添加以下行，以使 Snapshot 目录可见：</block>
  <block id="12ce9751e0e6d2a7d593d46e19211984" category="inline-link">Trident 命令</block>
  <block id="71f8fa2d01d0c5a2d9af72f90f65e379" category="paragraph">您必须以 JSON 格式创建 Trident 后端配置文件，然后运行以下命令<block ref="1dce3ee9e9ff2b59caf27104be259d37" category="inline-link-rx"></block> 要参考此指南：</block>
  <block id="2842c07cfacaf614e63dc1f2afef93b2" category="paragraph"><block ref="2842c07cfacaf614e63dc1f2afef93b2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d47cd04a0ddb5c3e6a2d9b9bc5c6a120" category="inline-link-macro">下一步：部署应用程序</block>
  <block id="fafac2eb9a7c4fcf46778865a22a00d2" category="paragraph"><block ref="fafac2eb9a7c4fcf46778865a22a00d2" category="inline-link-macro-rx"></block></block>
  <block id="34d54070f7d06f04159ffbc3d9a3e082" category="doc">配置工作环境</block>
  <block id="8302b607de31151e5500de556070d9b9" category="paragraph">将 `Notebook` `set_env-example.ipynb` 复制为 `set_env.ipynb` 。打开并编辑 `set_env.ipynb` 。此笔记本电脑可为凭据，文件位置和执行驱动程序设置变量。</block>
  <block id="3dc3cffc26096b89061a452cc7d16b6a" category="paragraph">如果按照上述说明进行操作，则只需执行以下步骤即可：</block>
  <block id="26448fec50e405fb230427686eeb11f4" category="list-text">从 Iguazio 服务信息板获取此值： `docker_regRegistry`</block>
  <block id="837784ac15c5cac463a4d016bac63db1" category="paragraph">示例： `docker-registry.default-tenant.app.clusterq.iguaziodev.com:80`</block>
  <block id="04dca9f72f7dfc6f87034c574f821a12" category="list-text">将 `admin` 更改为您的 Iguazio 用户名：</block>
  <block id="b2dea33f1195135f6905b7dd0ee58713" category="paragraph">`IGZ_container_path = "/" 用户 /admin"`</block>
  <block id="0ddaf8f981ee966dc3533de490c7ee4e" category="paragraph">下面是 ONTAP 系统连接详细信息。包括安装 Trident 时生成的卷名称。以下设置适用于内部 ONTAP 集群：</block>
  <block id="dada97be0cb81e6518d92aa7112fa356" category="paragraph">以下设置适用于 Cloud Volumes ONTAP ：</block>
  <block id="586d20125924bc57624aaacc07973d5a" category="section-title">创建基本 Docker 映像</block>
  <block id="0ab24923db4855b821917446711104c9" category="paragraph">构建 ML 管道所需的一切都包含在 Iguazio 平台中。开发人员可以定义运行管道和从 Jupyter Notebook 执行映像创建所需的 Docker 映像的规格。打开笔记本 `creation- images.ipynb` 并运行所有单元格。</block>
  <block id="3dc4e8abb0e99c6cf29451a16a891524" category="paragraph">此笔记本可创建两个我们在管道中使用的映像。</block>
  <block id="5446cc82e4c165e2700af830f8428d63" category="list-text">`igiio/NetApp.` 用于处理 ML 任务。</block>
  <block id="61145f9d17e187b69bc41525b10aafe6" category="paragraph"><block ref="61145f9d17e187b69bc41525b10aafe6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="62e9956426227f62abc9692954a5ad39" category="list-text">`NetApp/ 渠道` 。包含用于处理 NetApp Snapshot 副本的实用程序。</block>
  <block id="4050f795a12d7f83a545999c8a0d1905" category="paragraph"><block ref="4050f795a12d7f83a545999c8a0d1905" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6677daf583d4c0cf5860927a024f278d" category="section-title">查看各个 Jupyter 笔记本电脑</block>
  <block id="6414e1c23e017075a375d3a531eab90c" category="paragraph">下表列出了我们用于构建此任务的库和框架。所有这些组件均已与 Iguazio 基于角色的访问和安全控制完全集成。</block>
  <block id="da292beca00e0b352eade7a070855fd3" category="cell">库 / 框架</block>
  <block id="124d604ba0d3fd8e3d31c821b2a332f5" category="cell">MLRun</block>
  <block id="1c1491d01d96c08951ae2ac55fadf443" category="cell">由 Iguazio 管理的，用于组装，执行和监控 ML/AI 管道。</block>
  <block id="a2580bd6e044f86f4e39be2f59ee91da" category="cell">Nutriio</block>
  <block id="2d753cbb7762fe25d15a2cda2ff84790" category="cell">与 Iguazio 集成的无服务器功能框架。也可作为由 Iguazio 管理的开源项目提供。</block>
  <block id="0bbee378f2697a1d0c184e76d2b206c6" category="cell">基于 Kubernetes 的框架，用于部署管道。这也是一个开源项目， Iguazio 为此做出了贡献。它与 Iguazio 集成，可提高安全性，并与基础架构的其余部分集成。</block>
  <block id="849efb47ec760eb7c3c6b5848e740c3b" category="cell">Docker 注册表作为服务在 Iguazio 平台中运行。您也可以更改此设置以连接到注册表。</block>
  <block id="a38f73277b7341a709cf0cb57ebc4434" category="cell">NetApp Cloud Volumes</block>
  <block id="7279bb663993b77e219b4ca813326d77" category="cell">通过在 AWS 上运行的 Cloud Volumes ，我们可以访问大量数据，并可以创建 Snapshot 副本来版本用于培训的数据集。</block>
  <block id="9953e13b783f3ad45d99187c955cb9f9" category="cell">Trident 是一个由 NetApp 管理的开源项目。它有助于与 Kubernetes 中的存储和计算资源集成。</block>
  <block id="5fa4506d691373039fd2834939e582b3" category="paragraph">我们使用多台笔记本电脑来构建 ML 管道。在将每台笔记本电脑整合到管道中之前，可以对其进行单独测试。我们将按照此演示应用程序的部署流程分别介绍每台笔记本电脑。</block>
  <block id="06a86c2506db8ef5fdac675c1352e3cf" category="paragraph">理想的结果是，通过管道根据数据的 Snapshot 副本训练模型，并部署模型进行推理。下图显示了已完成的 MLRun 管道的结构图。</block>
  <block id="1d79eb753e06f2122a118408a14d6c51" category="paragraph"><block ref="1d79eb753e06f2122a118408a14d6c51" category="inline-image-macro-rx" type="image"></block></block>
  <block id="51b666fe429f998144ea4f2ce818cd60" category="section-title">部署数据生成功能</block>
  <block id="034015442bf8bf34c0e7e8149d35dae6" category="paragraph">本节介绍如何使用 Nutrio 无服务器功能生成网络设备数据。此用例是从部署了管道并使用 Iguazio 服务监控和预测网络设备故障的 Iguazio 客户端改编而来的。</block>
  <block id="2d024dd4dc0601ff2e4d0b81fcaec60a" category="inline-link">Nutrio 网站</block>
  <block id="59009d367371847f2042c59338282f4b" category="paragraph">我们模拟了来自网络设备的数据。执行 Jupyter 笔记本 `data-generator.ipynb` 可创建一个每 10 分钟运行一次的无服务器功能，并使用新数据生成一个 Parquet 文件。要部署此功能，请运行此笔记本中的所有单元。请参见<block ref="a9d48e85369982160b96d90770d878d1" category="inline-link-rx"></block> 查看此笔记本中任何不熟悉的组件。</block>
  <block id="fa0c06ebcd647f13ce81472307615ee3" category="paragraph">生成函数时，将忽略包含以下注释的单元格。假设笔记本电脑中的每个单元都属于该功能的一部分。导入 Nuclio 模块以启用 ` %nuclio 幻影` 。</block>
  <block id="c2b253a6bc491b37027772dba5f0b4e7" category="paragraph">在函数规范中，我们定义了函数的执行环境，触发方式以及使用的资源。</block>
  <block id="95b0eb5f892f7b0bcb3ec7dbb9058c02" category="paragraph">初始化 `init_context` 函数时， Noclio 框架会调用该函数。</block>
  <block id="1aab9637db54631d95ec5901bfda0947" category="paragraph">在函数初始化时，将调用不在函数中的任何代码。调用该命令时，系统将执行处理程序功能。您可以更改处理程序的名称并在函数规范中指定它。</block>
  <block id="94be7a657ecb54ef7337030d9dd78b70" category="paragraph">您可以在部署之前从笔记本电脑测试此功能。</block>
  <block id="01237c05459839293bfcd5a3beb1364f" category="paragraph">该功能可以从笔记本电脑部署，也可以从 CI/CD 管道部署（修改此代码）。</block>
  <block id="c697561ec27606d29683f7fc5fb3846d" category="section-title">渠道笔记本电脑</block>
  <block id="83041c5547fb0ad965936febfc41508d" category="paragraph">这些笔记本电脑不能单独执行此设置。这只是对每台笔记本电脑的回顾。我们在管道中调用了这些命令。要分别执行这些操作，请查看 MLRun 文档，将其作为 Kubernetes 作业执行。</block>
  <block id="c16b208e4ffb938f4008373dea5fb4ec" category="section-title">Snap_CV.ipynb</block>
  <block id="eeb06194a969eee5616e56b449a99306" category="paragraph">此笔记本电脑在管道开始时处理 Cloud Volume Snapshot 副本。它会将卷的名称传递到管道环境。此笔记本会调用 shell 脚本来处理 Snapshot 副本。在管道中运行时，执行上下文包含可帮助查找执行所需的所有文件的变量。编写此代码时，开发人员不必担心执行此代码的容器中的文件位置。如后面所述，此应用程序会随其所有依赖项一起部署，而是通过管道参数的定义来提供执行上下文。</block>
  <block id="dc82b570ec10aa261c20bf4828af24c1" category="paragraph">创建的 Snapshot 副本位置将放置在 MLRun 上下文中，供管道中的步骤使用。</block>
  <block id="7f609b3599e86a8f1b83bde97709ba37" category="paragraph">接下来的三台笔记本电脑将并行运行。</block>
  <block id="d1839287f93e09936af234173d03d6b7" category="section-title">data-prep.ipynb</block>
  <block id="dbe6ca7c47e3dc8cbd3a4956e684b761" category="paragraph">必须将原始指标转换为功能，才能进行模型培训。此笔记本电脑可从 Snapshot 目录读取原始指标，并将模型培训的功能写入 NetApp 卷。</block>
  <block id="dab65fbdf0ed5ce626558d99e83c618f" category="paragraph">在管道环境中运行时，输入 `DATA_DIR` 包含 Snapshot 副本位置。</block>
  <block id="4636df8c7ba383c5f135c7ae8f2ef772" category="section-title">描述 .ipynb</block>
  <block id="43099d46867c7c0cc922fdd3e026d029" category="paragraph">为了直观显示传入指标，我们部署了一个管道步骤，该步骤可提供通过 Kubeflow 和 MLRun UI 提供的图解和图形。每个执行都有自己版本的此可视化工具。</block>
  <block id="7fd47125b80c0e6241052a47dcb41b98" category="section-title">deploy-feature-feature.ipynb</block>
  <block id="684eb641c7a322c328f8ea91cd482b0d" category="paragraph">我们会持续监控指标以查找异常。此笔记本电脑可创建一个无服务器功能，用于生成对传入指标运行预测所需的功能。此笔记本电脑将调用函数的创建。功能代码位于笔记本电脑 `data-prep.ipynb` 中。请注意，我们使用同一笔记本电脑作为管道中的一个步骤。</block>
  <block id="1c475141d16ada0e53ddb14047963024" category="section-title">训练 .ipynb</block>
  <block id="43b6984a9b2a7863061833c96be2b851" category="paragraph">创建功能后，我们将触发模型培训。此步骤的输出为要用于推理的模型。我们还会收集统计信息，以跟踪每个执行情况（实验）。</block>
  <block id="a6858cae929a8eed6e9c9d6cfa9befac" category="paragraph">例如，以下命令会将准确性得分输入到该实验的上下文中。此值在 Kubeflow 和 MLRun 中可见。</block>
  <block id="9d1126b5d7690c0eb46dd7713822680e" category="section-title">deploy-inftion-Function.ipynb</block>
  <block id="827ebf8bb3ee1798b5394ecd2a8bb3ae" category="paragraph">管道中的最后一步是将模型部署为无服务器功能，以实现持续推理。此笔记本电脑将调用在 `nuclio-inference - Function .ipynb` 中定义的无服务器功能的创建过程。</block>
  <block id="4d2c908b5247626d682903dc9527bd05" category="section-title">审核和构建管道</block>
  <block id="6c8673acfb6249793bed69954ca16a9b" category="paragraph">通过将所有笔记本电脑整合到一个管道中，可以持续运行实验，根据新指标重新评估模型的准确性。首先，打开 `pipeline.ipynb` 笔记本电脑。我们将详细介绍 NetApp 和 Iguazio 如何简化此 ML 管道的部署。</block>
  <block id="50d4decae4f0f08e83a1bd8342bd6ef1" category="paragraph">我们使用 MLRun 为管道的每个步骤提供上下文并处理资源分配。MLRun API 服务在 Iguazio 平台中运行，是与 Kubernetes 资源交互的点。每个开发人员都不能直接请求资源； API 负责处理这些请求并启用访问控制。</block>
  <block id="c7c5ccf69a87e301b134dcfdf46ab307" category="paragraph">此管道可以与 NetApp Cloud Volumes 和内部卷配合使用。我们构建此演示的目的是使用 Cloud Volumes ，但您可以在代码中看到在内部运行的选项。</block>
  <block id="ce16d064e13fffda0ff2a07c50276f33" category="paragraph">将 Jupyter 笔记本电脑转变为 Kubeflow 步骤所需的第一个操作是将代码转换为函数。功能具有运行该笔记本电脑所需的所有规格。向下滚动笔记本电脑时，您可以看到我们为管道中的每个步骤定义了一个函数。</block>
  <block id="8bbbd384e919f705f071525a96cdfaec" category="cell">属于笔记本电脑</block>
  <block id="5d75cd50687084d681964f5c6ee8a73a" category="cell">&lt;code_to_Function&gt; （ MLRun 模块的一部分）</block>
  <block id="eef456f018469b2d403742d05e33a5dd" category="cell">函数名称： project name 。用于组织所有项目项目项目。此信息会显示在 MLRun UI 中。好的。在这种情况下，是 Kubernetes 作业。这可以是 dask ， MPI ， spark8s 等。有关详细信息，请参见 MLRun 文档。文件笔记本的名称。此位置也可以是 Git （ HTTP ）中的一个位置。</block>
  <block id="d0161cbbc56081c803c919679b76b846" category="cell">我们在此步骤中使用的 Docker 映像的名称。我们先前使用 create-image.ipynb 笔记本创建了此版本。</block>
  <block id="28bb8862d962b462f621d9098de311cd" category="cell">volume_mounts 和 volumes</block>
  <block id="a6841da965bfb59838d367b9fdc30a8c" category="cell">有关在运行时挂载 NetApp Cloud Volume 的详细信息。</block>
  <block id="5d9261bc63dfeef8d26c807e36a9daa4" category="paragraph">我们还定义了步骤的参数。</block>
  <block id="fcd242cd0d87d4de3be34f843180bdb0" category="paragraph">在为所有步骤定义了函数之后，您可以构建管道。我们使用 `kfp` 模块来定义此定义。使用 MLRun 与自行构建之间的区别在于编码的简化和缩短。</block>
  <block id="f02b57d2fbd61d7629e76438ba68f7a1" category="paragraph">我们定义的函数将使用 MLRun 的 `as_step` 函数转换为步骤组件。</block>
  <block id="8859e75c5bfd3a8ea5a783296d71b795" category="section-title">Snapshot 步骤定义</block>
  <block id="dabb827ac33da3a8d8a2384874221aab" category="paragraph">启动 Snapshot 功能，输出并将 v3io 作为源进行挂载：</block>
  <block id="3225a10b07f1580f10dee4abc3779e6c" category="cell">Parameters</block>
  <block id="422ac26927e8ad3d6b30617226e26c2a" category="cell">newtask</block>
  <block id="b954691c9a06ef7281bf4c836e7684f1" category="cell">newtask 是函数 run 的定义。</block>
  <block id="7871261404e7a8d93339696184b243b9" category="cell">（ MLRun 模块）</block>
  <block id="4522319a8fbbe0a85c82e604047dfe6c" category="cell">处理程序。要调用的 Python 函数的名称。我们在笔记本中使用了名称处理程序，但这不是必需的。参数。我们传递给执行的参数。在代码中，我们使用 context.get_param （‘parameter ｝ ）来获取值。</block>
  <block id="6cebb60f71d9de65143ade7a8388e27a" category="cell">as_step</block>
  <block id="070faabab806ce863279f5bd38452cc4" category="cell">NameKubeflow 管道步骤的名称。输出。这些值是步骤在完成时添加到词典中的值。查看 snap_CV.ipynb 笔记本电脑。mount_v3io （）。此操作将为执行管道的用户配置挂载 /User 的步骤。</block>
  <block id="a8aff967e1649a1c82ea607c881e8091" category="cell">输入</block>
  <block id="6f1ba99c8ee685047e0fa3c32349a01f" category="cell">您可以将上一步的输出传递到步骤。在这种情况下， snap.outputs"snapVolumeDetails" 是我们在快照步骤中创建的 Snapshot 副本的名称。</block>
  <block id="a399d9e54dd5dc35c6b455d995702175" category="cell">输出路径</block>
  <block id="026446ea82508e4c9f41609b3484b4cb" category="cell">一个位置，用于放置使用 MLRun 模块 log_tools. 生成的项目。</block>
  <block id="2fe8889e7fb9545ea383ff3c0451cabf" category="paragraph">您可以从上至下运行 `pipvip.ipynb` 。然后，您可以转到 Iguazio 信息板中的管道选项卡来监控进度，如 Iguazio 信息板管道选项卡中所示。</block>
  <block id="74dec5a93e3c1ccb06f26ebc6f9401fb" category="paragraph"><block ref="74dec5a93e3c1ccb06f26ebc6f9401fb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f47db69a9e60b47a1c8f7800753f6b57" category="paragraph">由于我们在每次运行中都记录了训练步骤的准确性，因此我们在每个实验中都有一个准确性记录，如训练准确性记录所示。</block>
  <block id="5bb7a1a5b810ce843cd4d41a7137ce26" category="paragraph"><block ref="5bb7a1a5b810ce843cd4d41a7137ce26" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a9ebd260b4ed60a239b8228fe68b2dbc" category="paragraph">如果选择 Snapshot 步骤，则可以看到用于运行此实验的 Snapshot 副本的名称。</block>
  <block id="1d231b2e1da6122607105ce52f87a763" category="paragraph"><block ref="1d231b2e1da6122607105ce52f87a763" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9fc578a2d3b019d646da18c9172282dc" category="paragraph">所述步骤具有可视化项目，可用于浏览我们使用的指标。您可以展开以查看完整图，如下图所示。</block>
  <block id="ffb599ed438d33d337e7cca9a1fbaf07" category="paragraph"><block ref="ffb599ed438d33d337e7cca9a1fbaf07" category="inline-image-macro-rx" type="image"></block></block>
  <block id="89238f00748675db057567546f67c2c5" category="paragraph">此外， MLRun API 数据库还会跟踪按项目组织的每个运行的输入，输出和项目。下图显示了每个运行的输入，输出和项目示例。</block>
  <block id="a8baa83f88edfb0fceafeda75819cb5f" category="paragraph"><block ref="a8baa83f88edfb0fceafeda75819cb5f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3c6050fe85d7b5528bc8356c88eab725" category="paragraph">对于每个作业，我们会存储更多详细信息。</block>
  <block id="8683624a37c6626765321b5cc2f60954" category="paragraph"><block ref="8683624a37c6626765321b5cc2f60954" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9f02f72c9470e67a8b3c5f9054b0a32c" category="inline-link">MLRun GitHub 站点</block>
  <block id="01661b1e0825da7434573266df1672e0" category="paragraph">有关 MLRun 的信息比本文档中介绍的信息更多。可以将 AL 项目（包括步骤和功能的定义）保存到 API 数据库中，并进行版本控制，也可以单独调用或作为完整项目调用。此外，还可以保存项目并将其推送到 Git 以供日后使用。我们建议您在中了解更多信息<block ref="92ae596fd8e402850e22f59a73ed3a44" category="inline-link-rx"></block>。</block>
  <block id="43486dfb907f148e40f3719f314caeb4" category="inline-link-macro">接下来：部署 Grafana 信息板</block>
  <block id="0670d6ac4e77f5862afcc2fde43bcc72" category="paragraph"><block ref="0670d6ac4e77f5862afcc2fde43bcc72" category="inline-link-macro-rx"></block></block>
  <block id="10dedd24e41d2fa9b5a5e681dd5b4882" category="summary">此页面提供了了解 NetApp 如何推进 AI 项目的背景信息，包括有关容器， Kubernetes ， NetApp Trident 等的信息。</block>
  <block id="0b7e964d1176d21b9ba3eceec8ed95ac" category="doc">概念和组件</block>
  <block id="5cd2adc9e2a5254e4c1da803519f298b" category="section-title">人工智能</block>
  <block id="c2fabc0982aa161064ff2b73f50800d5" category="paragraph">AI 是一门计算机科学学科，其中计算机经过训练，可以模拟人类思维的认知功能。AI 开发人员培训计算机，以便以类似于甚至优于人类的方式学习和解决问题。深度学习和机器学习是 AI 的子领域。企业越来越多地采用 AI ， ML 和 DL 来满足其关键业务需求。以下是一些示例：</block>
  <block id="b3e764d3292b880c63140b20b9a90e6c" category="list-text">分析大量数据以挖掘以前未知的业务洞察力</block>
  <block id="30512c04b26c269ec31ecd09f1f3a208" category="list-text">使用自然语言处理直接与客户互动</block>
  <block id="4ee20869dbb821d3744d87176797401f" category="list-text">自动化执行各种业务流程和功能</block>
  <block id="5919922c658bd2a4f33f0cf546be3ea9" category="paragraph">现代 AI 训练和推理工作负载需要大规模并行计算功能。因此， GPU 越来越多地用于执行 AI 操作，因为 GPU 的并行处理功能远远优于通用 CPU 。</block>
  <block id="5382aaf8b3d2fdeb6717f9805b0dd511" category="section-title">容器</block>
  <block id="2154bae452b2343b649ee4b088b399f6" category="paragraph">容器是在共享主机操作系统内核上运行的隔离用户空间实例。容器的采用率正在快速增长。容器可提供许多与虚拟机（ VM ）相同的应用程序沙盒优势。但是，由于虚拟机所依赖的虚拟机管理程序和子操作系统层已被消除，因此容器的重量要轻得多。下图展示了虚拟机与容器的可视化情况。</block>
  <block id="91945d3c9ebb2261142b9c7fc516b559" category="inline-link">Docker 网站</block>
  <block id="da28cd415837c7f3d1d6221ff490b84b" category="paragraph">此外，还可以通过容器直接将应用程序依赖关系，运行时间等内容高效地打包到应用程序中。最常用的容器打包格式是 Docker 容器。已采用 Docker 容器格式进行容器化的应用程序可以在可以运行 Docker 容器的任何计算机上执行。即使计算机上不存在应用程序的依赖关系，也是如此，因为所有依赖关系都打包在容器中。有关详细信息，请访问<block ref="f3aa778c455b7c9002cc51cdc41e7924" category="inline-link-rx"></block>。</block>
  <block id="9c3d617029ed075512781527983e01e4" category="paragraph"><block ref="9c3d617029ed075512781527983e01e4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1304134d4f70b5d09af5fb5a8bda1de8" category="inline-link">Kubernetes 网站</block>
  <block id="7a1446916a360f9c8ae3b94a97ad8c86" category="paragraph">Kubernetes 是一款开源分布式容器编排平台，最初由 Google 设计，现在由 Cloud 原生计算基金会（ CNCF ）维护。Kubernetes 可以为容器化应用程序实现部署，管理和扩展功能的自动化。近年来， Kubernetes 已成为主导容器业务流程平台。虽然支持其他容器打包格式和运行时间，但 Kubernetes 最常用作 Docker 容器的业务流程系统。有关详细信息，请访问<block ref="b99a36b6d7a8af9ad1172136115f0275" category="inline-link-rx"></block>。</block>
  <block id="6ea70a0ecace7daa9dfbbc8ff3282de1" category="inline-link">Trident 网站</block>
  <block id="f9b736ec48694a34e744a1a0309602bd" category="paragraph">Trident 是一款由 NetApp 开发和维护的开源存储编排程序，可大大简化 Kubernetes 工作负载的永久性存储的创建，管理和使用。Trident 本身是 Kubernetes 本机应用程序，直接在 Kubernetes 集群中运行。借助 Trident ， Kubernetes 用户（开发人员，数据科学家， Kubernetes 管理员等）可以采用他们已熟悉的标准 Kubernetes 格式创建，管理永久性存储卷并与其交互。同时，他们还可以利用 NetApp 的高级数据管理功能以及由 NetApp 技术提供支持的数据网络结构。Trident 可将持久存储的复杂性抽象化，并使其易于使用。有关详细信息，请访问<block ref="ad5406ed69f3fe0de810f757310402c9" category="inline-link-rx"></block>。</block>
  <block id="47bbe104ad41e6af2ee0dba5dc76d74d" category="inline-link">DeepOps 网站</block>
  <block id="b1c5aef0d1e7ec0339ca5caa48c1b3e3" category="paragraph">DeepOps 是 NVIDIA 的一个开源项目，通过使用 Ansible ，可以根据最佳实践自动部署 GPU 服务器集群。DeepOps 采用模块化设计，可用于执行各种部署任务。在本文档及其所述的验证练习中， DeepOps 用于部署一个由 GPU 服务器辅助节点组成的 Kubernetes 集群。有关详细信息，请访问<block ref="640792bfd91bad987ba8fd5d776a2824" category="inline-link-rx"></block>。</block>
  <block id="173c35c4ef789d6956a0cd6fbd9a0cfc" category="inline-link">Kubeflow 网站</block>
  <block id="ea77b50ef31a778a66411b993d6cb7d1" category="paragraph">Kubeflow 是一款适用于 Kubernetes 的开源 AI 和 ML 工具包，最初由 Google 开发。通过 Kubeflow 项目，可以在 Kubernetes 上轻松，便携且可扩展地部署 AI 和 ML 工作流。Kubeflow 将 Kubernetes 的错综复杂之处抽象出来，让数据科学家能够专注于他们最了解的―数据科学。有关可视化效果，请参见下图。随着企业 IT 部门越来越多地在 Kubernetes 上实现标准化， Kubeflow 的吸引力也越来越大。有关详细信息，请访问<block ref="bbfd4ba68f44e2ff98f04ea32205485d" category="inline-link-rx"></block>。</block>
  <block id="a2b0a43dcae6386929654b652393e691" category="paragraph"><block ref="a2b0a43dcae6386929654b652393e691" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e569c07c88fe6f8af1f63410c200abd1" category="section-title">KubeFlow 管道</block>
  <block id="384873a621d99250018cd7ce1768f8af" category="paragraph">Kubeflow 管道是 Kubeflow 的一个关键组件。Kubeflow 管道是一个平台和标准，用于定义和部署可移植且可扩展的 AI 和 ML 工作流。有关详细信息，请参见<block ref="6de5a235a0c43df48d05588e1b69b959" category="inline-link-rx"></block>。</block>
  <block id="a0b0430a41f582a12dac8f4d63ab450d" category="inline-link">Jupyter 网站</block>
  <block id="3cecf3b7bbdb1a67a537c65bfd6fd529" category="paragraph">Jupyter 笔记本电脑服务器是一款开源 Web 应用程序，数据科学家可以利用它创建类似于维基的文档，这些文档称为 Jupyter 笔记本电脑，其中包含实时代码以及描述性测试。Jupyter 笔记本电脑在 AI 和 ML 社区中广泛使用，可用于记录，存储和共享 AI 和 ML 项目。Kubeflow 可简化 Kubernetes 上 Jupyter 笔记本电脑服务器的配置和部署。有关 Jupyter 笔记本电脑的详细信息，请访问<block ref="412a2c3f2a7af96a2a4f6a512ee2088e" category="inline-link-rx"></block>。有关 Kubeflow 环境中 Jupyter 笔记本电脑的详细信息，请参见<block ref="c5d2218884acd101e6deb4d8c7d39370" category="inline-link-rx"></block>。</block>
  <block id="385904ba8ac27bcacafadf2113386df4" category="section-title">Apache 气流</block>
  <block id="c01fb6f699235f8c5d36bdda9e155c77" category="paragraph">Apache Airflow 是一个开源工作流管理平台，支持对复杂的企业工作流进行编程创作，计划和监控。它通常用于自动执行 ETL 和数据管道工作流，但不限于这些类型的工作流。气流项目由 Airbnb 发起，但此后在业内备受欢迎，现在由 Apache 软件基金会赞助。气流采用 Python 编写，气流工作流通过 Python 脚本创建，气流是按照 " 配置即代码 " 原则设计的。 现在，许多企业级气流用户都在 Kubernetes 上运行 Airflow 。</block>
  <block id="8fb4a72500791f0bea82c5c9b4c33772" category="section-title">定向循环图（ DAG ）</block>
  <block id="afd712bbacf94fbaf2852bd23c6b1a84" category="paragraph">在气流模式下，工作流称为定向环比图（ DAG ）。DAG 由按顺序，并行或两者的组合执行的任务组成，具体取决于 DAG 定义。气流计划程序会根据 DAG 定义中指定的任务级别依赖关系对一组工作负载执行各个任务。DAG 是通过 Python 脚本定义和创建的。</block>
  <block id="a5119a6bd0f4d733e0f1f4c10f9d063b" category="section-title">NetApp ONTAP 9.</block>
  <block id="0b83cba78e13ee67f3ada794b1e8edb8" category="paragraph">NetApp ONTAP 9 是 NetApp 推出的最新一代存储管理软件，可帮助像您这样的企业打造现代化的基础架构并过渡到云就绪数据中心。借助行业领先的数据管理功能，无论数据位于何处， ONTAP 都可以通过一组工具来管理和保护数据。您还可以将数据自由移动到任何需要的位置：边缘，核心或云。ONTAP 9 包含许多功能，可简化数据管理，加快和保护关键数据，并在混合云架构中打造适应未来需求的基础架构。</block>
  <block id="849f9e6e3176f7bb2abaf1dfdda6f4de" category="section-title">简化数据管理</block>
  <block id="5d0a72b50313f5f3615263a7d19ee676" category="paragraph">数据管理对于企业 IT 运营至关重要，这样您就可以为应用程序和数据集使用适当的资源。ONTAP 包括以下功能，可简化运营并降低总运营成本：</block>
  <block id="30490e1b1bd18c329c3b28df91914ffe" category="list-text">* 实时数据缩减和扩展的重复数据删除。 * 数据缩减可减少存储块中浪费的空间，重复数据删除可显著提高有效容量。</block>
  <block id="c5b25bb449b07e8b863f41dbe3b90a2a" category="list-text">* 最低，最高和自适应服务质量（ QoS ）。 * 细粒度 QoS 控制有助于在高度共享的环境中保持关键应用程序的性能水平。</block>
  <block id="d9a5709ce7afa0856dd86539f75c8087" category="list-text">* ONTAP FabricPool 。 * 此功能可将冷数据自动分层到公有和私有云存储选项，包括 Amazon Web Services （ AWS ）， Azure 和 NetApp StorageGRID 基于对象的存储。</block>
  <block id="ddb2f8d78c57d5743fdee9e17ae053c9" category="section-title">加速和保护数据</block>
  <block id="4994fe58be1734616de0863809040200" category="paragraph">ONTAP 可提供卓越的性能和数据保护，并通过以下功能扩展这些功能：</block>
  <block id="b109ecc7b4570bf3dbb9f8d082595075" category="list-text">* 高性能和低延迟。 * ONTAP 以尽可能低的延迟提供最高的吞吐量。</block>
  <block id="9e184f7b8847a390232c0163d45ab461" category="list-text">* NetApp ONTAP FlexGroup 技术 * 。 FlexGroup 卷是一种高性能数据容器，可线性扩展到高达 20 PB 和 4000 亿个文件，从而提供一个可简化数据管理的命名空间。</block>
  <block id="ef9770ee572f97c59254dc0d022afda8" category="list-text">* 数据保护。 * ONTAP 提供内置数据保护功能，并在所有平台之间进行通用管理。</block>
  <block id="493a7caad772a79b06f5d4a7dd98afcd" category="list-text">* NetApp 卷加密。 * ONTAP 提供原生卷级加密，并支持板载和外部密钥管理。</block>
  <block id="0950833529b7822458a242631cce3b3b" category="section-title">Future-Proof 基础架构</block>
  <block id="ba5b61620e18b71a8644dbc382c0c4f1" category="paragraph">ONTAP 9 可帮助您满足不断变化的苛刻业务需求：</block>
  <block id="d9d73747d25ab5e9c5de8f1f61c9ec7c" category="list-text">* 无缝扩展和无中断运行。 * ONTAP 支持向现有控制器和横向扩展集群无中断添加容量。您可以升级到 NVMe 和 32 Gb FC 等最新技术，而无需进行昂贵的数据迁移或中断。</block>
  <block id="512a65c054e8b5d06216e0eae55abedb" category="list-text">* 云连接。 * ONTAP 是云连接最广泛的存储管理软件之一，可在所有公有云中选择软件定义的存储（ ONTAP Select ）和云原生实例（ NetApp Cloud Volumes Service ）。</block>
  <block id="5ca60f373401802dfa44501cfa4f5cc7" category="list-text">* 与新兴应用程序集成。 * 通过使用支持现有企业级应用程序的相同基础架构， ONTAP 可为 OpenStack ， Hadoop 和 MongoDB 等下一代平台和应用程序提供企业级数据服务。</block>
  <block id="49a023178611b07475bac0823fc2dd53" category="section-title">NetApp Snapshot 副本</block>
  <block id="42884680ea9780d61f4cce71fdc606b1" category="paragraph">NetApp Snapshot 副本是卷的只读时间点映像。该映像占用的存储空间极少，并且性能开销极低，因为它仅记录自创建上次 Snapshot 副本以来创建的文件所做的更改，如下图所示。</block>
  <block id="13455e6dd452fcc850acd6696e670600" category="paragraph">Snapshot 副本的效率归功于核心 ONTAP 存储虚拟化技术—任意位置写入文件布局（ Write Anywhere File Layout ， WAFL ）。与数据库一样， WAFL 使用元数据指向磁盘上的实际数据块。但是，与数据库不同， WAFL 不会覆盖现有块。它会将更新后的数据写入新块并更改元数据。这是因为 ONTAP 在创建 Snapshot 副本时引用元数据，而不是复制数据块，因此 Snapshot 副本的效率非常高。这样做可以避免其他系统在查找要复制的块时花费寻道时间，并避免创建副本本身的成本。</block>
  <block id="921d0d1d37872e6233bf4da3688b03ef" category="paragraph">您可以使用 Snapshot 副本恢复单个文件或 LUN ，或者还原卷的整个内容。ONTAP 会将 Snapshot 副本中的指针信息与磁盘上的数据进行比较，以重建缺少或损坏的对象，而不会造成停机或高昂的性能成本。</block>
  <block id="9787a3a5983c64cfaf3029a721aab4f0" category="paragraph"><block ref="9787a3a5983c64cfaf3029a721aab4f0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="76a33b697177fedefd70387e86214ebd" category="section-title">NetApp FlexClone 技术</block>
  <block id="78e8cd917c99154d22a94ba80186ac33" category="paragraph">NetApp FlexClone 技术会引用 Snapshot 元数据来创建卷的可写时间点副本。副本与其父级共享数据块，在将更改写入副本之前，除了元数据所需的存储外，不会占用任何其他存储，如下图所示。传统副本可能需要几分钟甚至几小时才能创建，而 FlexClone 软件可以让您几乎即时复制最大的数据集。因此，如果您需要相同数据集的多个副本（例如，开发工作空间）或数据集的临时副本（针对生产数据集测试应用程序），则这种情况是理想之选。</block>
  <block id="423c2edb645c178257ba9d79bd9ac684" category="paragraph"><block ref="423c2edb645c178257ba9d79bd9ac684" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f67824f4f94415299484432a092f76b1" category="section-title">NetApp SnapMirror 数据复制技术</block>
  <block id="553416a55e03cc49df61e631d17b8011" category="paragraph">NetApp SnapMirror 软件是一款经济高效且易于使用的统一复制解决方案，可跨数据网络结构实现。它可以通过 LAN 或 WAN 高速复制数据。它可以为各种类型的应用程序提供高数据可用性和快速数据复制，包括虚拟和传统环境中的业务关键型应用程序。在将数据复制到一个或多个 NetApp 存储系统并持续更新二级数据时，您的数据将保持最新，并可随时使用。不需要外部复制服务器。有关利用 SnapMirror 技术的架构示例，请参见下图。</block>
  <block id="5a12ba5d186c9ffcce65438f531e7c47" category="paragraph">SnapMirror 软件通过仅通过网络发送更改的块来利用 NetApp ONTAP 的存储效率。SnapMirror 软件还可使用内置网络压缩来加快数据传输速度，并将网络带宽利用率降低多达 70% 。借助 SnapMirror 技术，您可以利用一个精简复制数据流创建一个存储库，同时维护活动镜像和先前的时间点副本，从而将网络流量减少多达 50% 。</block>
  <block id="423eee692f81241addaf586841d0c66a" category="paragraph"><block ref="423eee692f81241addaf586841d0c66a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dc188738e6cc2e9f8314e1b95f18ebfd" category="section-title">NetApp Cloud Sync</block>
  <block id="2e386ef1ace3f8ea71edbaa6f9cbbd00" category="paragraph">Cloud Sync 是一项 NetApp 服务，用于快速安全地同步数据。无论您需要在内部 NFS 还是 SMB 文件共享， NetApp StorageGRID ， NetApp ONTAP S3 ， NetApp Cloud Volumes Service ， Azure NetApp Files ， AWS S3 ， AWS EFS ， Azure Blob ， Google 云存储或 IBM 云对象存储， Cloud Sync 可将文件快速安全地移动到您需要的位置。</block>
  <block id="c1bea6c8c836c6911127e6fe3fde762a" category="paragraph">数据传输完成后，即可在源和目标上完全使用。Cloud Sync 可以在触发更新时按需同步数据，也可以根据预定义的计划持续同步数据。无论如何， Cloud Sync 只会移动增量，因此将数据复制所花费的时间和金钱降至最低。</block>
  <block id="18c24ab391d7e12f4abcfea370fb4e81" category="paragraph">Cloud Sync 是一款软件即服务（ SaaS ）工具，设置和使用极其简单。由 Cloud Sync 触发的数据传输由数据代理执行。Cloud Sync 数据代理可以部署在 AWS ， Azure ， Google 云平台或内部环境中。</block>
  <block id="6efa8f47d1a76af77ce311b436e4dca9" category="section-title">NetApp XCP</block>
  <block id="0e4fcaf78d0d4feda27a31ecb6944b58" category="paragraph">NetApp XCP 是一款基于客户端的软件，可用于任意到 NetApp 以及 NetApp 到 NetApp 的数据迁移和文件系统洞察。XCP 旨在通过利用所有可用系统资源来处理大容量数据集和高性能迁移来实现扩展和最大性能。XCP 可通过生成报告的选项帮助您全面了解文件系统。</block>
  <block id="9a3914e340e4b09762f8231f9fd0ddaa" category="paragraph">NetApp XCP 可通过一个软件包提供，该软件包支持 NFS 和 SMB 协议。XCP 包括一个适用于 NFS 数据集的 Linux 二进制文件和一个适用于 SMB 数据集的 Windows 可执行文件。</block>
  <block id="adc911d4d2f4e0008e765523cff39824" category="paragraph">NetApp XCP 文件分析是一款基于主机的软件，可检测文件共享，对文件系统运行扫描并提供用于文件分析的信息板。XCP 文件分析与 NetApp 和非 NetApp 系统兼容，并可在 Linux 或 Windows 主机上运行，以便为 NFS 和 SMB 导出的文件系统提供分析。</block>
  <block id="957e30f73566564bd8a99a6fac13e015" category="section-title">NetApp ONTAP FlexGroup 卷</block>
  <block id="22bd32dacc144ffc2601e6685260b4c3" category="paragraph">培训数据集可以是一组可能包含数十亿个文件的集合。文件可以包括文本，音频，视频以及其他形式的非结构化数据，这些数据必须进行存储和处理才能并行读取。存储系统必须存储大量小文件，并且必须并行读取这些文件，以便执行顺序和随机 I/O</block>
  <block id="6d7d8c1311f5ac7d2ed289e012822f78" category="paragraph">FlexGroup 卷是一个包含多个成分卷的命名空间，如下图所示。从存储管理员的角度来看， FlexGroup 卷是一个受管卷，其作用类似于 NetApp FlexVol 卷。FlexGroup 卷中的文件将分配给各个成员卷，并且不会在卷或节点之间进行条带化。它们支持以下功能：</block>
  <block id="28f25e3d6de5d5fe801c8d194234f0a5" category="list-text">FlexGroup 卷可为高元数据工作负载提供多 PB 的容量和可预测的低延迟。</block>
  <block id="82b42713e1be50bb140b7e85eecdd91f" category="list-text">它们在同一命名空间中最多支持 4000 亿个文件。</block>
  <block id="50af21bd57d5360eb9ffc8dbc4b9a5bd" category="list-text">它们支持在 CPU ，节点，聚合和成分卷之间的 NAS 工作负载中执行并行操作 FlexVol 。</block>
  <block id="07e40bce6e02494c0af7b6a5f2aeaad8" category="paragraph"><block ref="07e40bce6e02494c0af7b6a5f2aeaad8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="28b9eb1a9ba550cf23239eb33610203e" category="doc">软件和硬件要求</block>
  <block id="dce011ea921230b4e3061bb70569c598" category="section-title">网络配置：</block>
  <block id="5c56d5a342310a4d1ead67adc85adcab" category="paragraph">以下是在云中设置的网络配置要求：</block>
  <block id="df97d4ea35e2febbb06b9bd1ba29b50e" category="list-text">Iguazio 集群和 NetApp Cloud Volumes 必须位于同一个虚拟私有云中。</block>
  <block id="a8f3c1a7fc956bcddef483bc8797e742" category="list-text">云管理器必须有权访问 Iguazio 应用程序节点上的端口 6443 。</block>
  <block id="0d1562d43d3c0d4c52eef4a841896eba" category="list-text">我们在本技术报告中使用了 Amazon Web Services 。但是，用户可以选择在任何云提供商中部署解决方案。为了便于在采用 NVIDIA DGX-1 的 ONTAP AI 中进行内部测试，我们使用了 Iguazio 托管的 DNS 服务。</block>
  <block id="820de5e74a90f4dbc17e37b78258c35b" category="paragraph">客户端必须能够访问动态创建的 DNS 域。如果需要，客户可以使用自己的 DNS 。</block>
  <block id="43ad77bf4f253415b4e90ea4aa41a2d7" category="paragraph">您可以在自己的集群中安装 Iguazio 内部部署。我们已使用 NVIDIA DGX-1 系统验证了 NetApp ONTAP AI 中的解决方案。下表列出了用于测试此解决方案的硬件。</block>
  <block id="7b6f2acc1b4489fd971965be635ea987" category="cell">NetApp AFF A800 系统</block>
  <block id="55552614d2dd18f2d6c40759f2de9e22" category="cell">1 个高可用性（ HA ）对，包括 2 个控制器和 48 个 NVMe SSD （ 3.8 TB 或更高）</block>
  <block id="413400218c4c262991ad8483b3be0a04" category="cell">Cisco Nexus 3232C 网络交换机</block>
  <block id="72f23e74ab545a9064f74aca4d904bf4" category="paragraph">下表列出了内部测试所需的软件组件：</block>
  <block id="751601035b4077a9c6f7280ab1d3369c" category="cell">4.4 — Ubuntu 18.04 LTS</block>
  <block id="bb3121464976ef0c6b6b2b81fc75f3c5" category="cell">19.03.5</block>
  <block id="2a820a07d05055e147221622557f34b9" category="cell">容器版本</block>
  <block id="6f3d0f773f6be20d70e6bbbafca93de9" category="cell">20.01-tF1-py2.</block>
  <block id="46b6cc5d90605df4689002387db99128" category="cell">机器学习框架</block>
  <block id="f060e908e90b13cff9447e18fbb6bb20" category="cell">TensorFlow 1.15.0</block>
  <block id="4ec1f03a0b910370451392d8af8cd05a" category="cell">Iguazio</block>
  <block id="80b1aaf85493db4117fca57135bec077" category="cell">版本 2.8+</block>
  <block id="20de768bd6142b858c4e99c64e19f37b" category="cell">ESX 服务器</block>
  <block id="f884cc5c56f9c9a8d4d61568ff64db9c" category="cell">6.5</block>
  <block id="95b4a53c1023a65c982b077b13be4b96" category="paragraph">此解决方案已通过 Iguazio 2.5 版和适用于 AWS 的 NetApp Cloud Volumes ONTAP 的全面测试。Iguazio 集群和 NetApp 软件均在 AWS 上运行。</block>
  <block id="efbef76fea5d52b17e66f66b7fbdb1be" category="cell">版本或类型</block>
  <block id="1f2c90c0f9931b94eab6d9d2d3a640c9" category="cell">应用程序节点</block>
  <block id="8f33b30dd333b320c87f038f61e17523" category="cell">m5.4xlarge</block>
  <block id="b8f3b98512c841c7f30ce704570ac0b6" category="cell">数据节点</block>
  <block id="ea93f0324aaeaa177497ea41b52cb9ff" category="cell">I3.4 x 大型</block>
  <block id="870032d2d605939c0c8a813ac8534e80" category="inline-link-macro">下一步：网络设备故障预测用例摘要</block>
  <block id="6b90a2e4861b0a6faf4f640ece131282" category="paragraph"><block ref="6b90a2e4861b0a6faf4f640ece131282" category="inline-link-macro-rx"></block></block>
  <block id="232abf87aa3028a990e94f6bb51fe8bd" category="summary">要在 Kubernetes 集群中执行单节点 AI 和 ML 作业，请从部署跳转主机执行此页面上的任务。</block>
  <block id="46300fa439cc237919f854816fc89fc2" category="doc">执行单节点 AI 工作负载</block>
  <block id="ebbcd572ece7625ba24f2c3ecda6d5b5" category="paragraph">要在 Kubernetes 集群中执行单节点 AI 和 ML 作业，请从部署跳转主机执行以下任务。借助 Trident ，您可以快速轻松地使可能包含数 PB 数据的数据卷可供 Kubernetes 工作负载访问。要使此类数据卷可从 Kubernetes Pod 中访问，只需在 Pod 定义中指定 PVC 即可。此步骤是 Kubernetes 本机操作；不需要 NetApp 专业知识。</block>
  <block id="e3305581bc1f67d1989e08e42a43c113" category="admonition">本节假定您已将尝试在 Kubernetes 集群中执行的特定 AI 和 ML 工作负载容器化（采用 Docker 容器格式）。</block>
  <block id="6bdbab1141be3c52dec1f29c4c5fdf52" category="inline-link">ImageNet 网站</block>
  <block id="08eb6cc7203ec1b36805e4767d450467" category="list-text">以下示例命令显示了如何为使用 ImageNet 数据集的 TensorFlow 基准工作负载创建 Kubernetes 作业。有关 ImageNet 数据集的详细信息，请参见<block ref="19a9693db577a40175aef26761f77fe7" category="inline-link-rx"></block>。</block>
  <block id="56920225f5c2d474925baad76ae3e7ce" category="paragraph">此示例作业请求八个 GPU ，因此可以在具有八个或更多 GPU 的单个 GPU 工作节点上运行。此示例作业可以在集群中提交，其中包含八个或更多 GPU 的工作节点不存在或当前占用另一个工作负载。如果是，则此作业将保持待定状态，直到此类辅助节点变为可用为止。</block>
  <block id="dd36f0d653a70e6e6c7e838454ee7e20" category="paragraph">此外，为了最大程度地提高存储带宽，包含所需训练数据的卷会在该作业创建的 POD 中挂载两次。此外，还会在 Pod 中挂载另一个卷。第二个卷将用于存储结果和指标。这些卷在作业定义中使用 PVC 的名称进行引用。有关 Kubernetes 作业的详细信息，请参见<block ref="0ceaf9ba0112a862c5fa5f8d38bee04b" category="inline-link-rx"></block>。</block>
  <block id="225e66547943a27f429558dce4e639e2" category="paragraph">在本示例作业创建的 Pod 中， `edium` 值为 `Memory` 的` emtyDir `m卷将挂载到 ` /dev/shm` 。Docker 容器运行时自动创建的 ` /dev/shm` 虚拟卷的默认大小有时可能不足以满足 TensorFlow 的需求。按以下示例所示挂载 `emptyDir` 卷可提供足够大的 ` /dev/shm` 虚拟卷。有关 `emptyDir` 卷的详细信息，请参见<block ref="ad2ab91baa5517930a567ac7588e61fd" category="inline-link-rx"></block>。</block>
  <block id="ac5f33311bbfb696a5966510fc4a38b8" category="paragraph">在此示例作业定义中指定的单个容器将获得 `securityContext &gt; privileged` 值 `true` 。此值表示容器在主机上具有有效的 root 访问权限。在这种情况下使用此标注是因为要执行的特定工作负载需要 root 访问权限。具体而言，工作负载执行的清除缓存操作需要 root 访问权限。是否需要此 `特权： true` 标注取决于您要执行的特定工作负载的要求。</block>
  <block id="8db728b0062c29a77e48bcd3be77be7f" category="list-text">确认您在步骤 1 中创建的作业正在正确运行。以下示例命令确认已按照作业定义中的指定为此作业创建了一个 POD ，并且此 POD 当前正在其中一个 GPU 工作节点上运行。</block>
  <block id="7b2880ed5066d8fda6f6d5a4ec8f39ac" category="list-text">确认您在步骤 1 中创建的作业已成功完成。以下示例命令确认作业已成功完成。</block>
  <block id="bead823acab8a06d478eb02c7ff84d35" category="list-text">* 可选： * 清理作业项目。以下示例命令显示了在步骤 1 中创建的作业对象的删除情况。</block>
  <block id="cb215cf0e9fb88bd1fc97b4ba53fd36f" category="paragraph">删除作业对象时， Kubernetes 会自动删除任何关联的 Pod 。</block>
  <block id="65f63f96295566cd4278775eef1b4c8c" category="doc">为要求较低的工作负载或交互式工作负载分配的 GPU 百分比</block>
  <block id="1b3d285072ee60a98cde2f66b6e47fde" category="paragraph">当研究人员和开发人员在开发，超参数调整或调试阶段使用其模型时，此类工作负载通常所需的计算资源更少。因此，配置百分比 GPU 和内存的效率更高，以便可以将同一 GPU 同时分配给其他工作负载。Run ： AI 的业务流程解决方案为 Kubernetes 上的容器化工作负载提供了一个百分比 GPU 共享系统。该系统支持运行 CUDA 程序的工作负载，尤其适用于推理和模型构建等轻型 AI 任务。部分 GPU 系统可以透明地为数据科学和 AI 工程团队提供在一个 GPU 上同时运行多个工作负载的能力。这样，企业就可以在同一硬件上运行更多的工作负载，例如计算机视觉，语音识别和自然语言处理，从而降低成本。</block>
  <block id="5db1fcd5bb529fa2475aaf893414d2e4" category="paragraph">Run ： AI 的百分比 GPU 系统可利用自身的内存和计算空间有效地创建虚拟化逻辑 GPU ，容器可以使用和访问这些 GPU ，就像它们是独立的处理器一样。这样，多个工作负载便可在同一 GPU 上的容器中并排运行，而不会相互干扰。解决方案是透明，简单且可移植的，不需要对容器本身进行更改。</block>
  <block id="71cdf780e37cc9571b5fcd0bf89958b1" category="paragraph">一个典型的使用情形可能会看到在同一个 GPU 上运行两到八个作业，这意味着您可以使用同一个硬件执行八倍的工作。</block>
  <block id="0a1f69603a47f75f701f92ad7d94e3c5" category="paragraph">对于下图中的作业 `frac05` 属于项目 `team-d` ，我们可以看到分配的 GPU 数量为 0.5 。这一点可通过 `nvidia-smi` 命令进一步验证，该命令显示容器可用的 GPU 内存为 16 ， 255 MB ： DGX-1 节点中每个 V100 GPU 32 GB 的一半。</block>
  <block id="e6d9743072cdc6867ea2980c7db7e7fd" category="paragraph"><block ref="e6d9743072cdc6867ea2980c7db7e7fd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9afb11deef37d75cf56adc6e1a2f4020" category="inline-link-macro">接下来：通过过度配额 GPU 分配实现高集群利用率</block>
  <block id="15968f671ef08561726e3064358c707b" category="paragraph"><block ref="15968f671ef08561726e3064358c707b" category="inline-link-macro-rx"></block></block>
  <block id="ff9caff469d56a572a569942ca24c8b4" category="list-text">NVIDIA DGX 系统</block>
  <block id="b69073c22b4269568fd577ea090ce638" category="list-text">NVIDIA DGX-1 系统<block ref="45a310b0e4b087b75cb073303044f6f9" category="inline-link-rx"></block></block>
  <block id="fe287c518b9b1345defadacdc6a9ecbf" category="list-text">NVIDIA V100 Tensor 核心 GPU<block ref="fad8218d69ce01748faed5492aa5d3ef" category="inline-link-rx"></block></block>
  <block id="d6a8716635a5681cde357a465953bc72" category="list-text">NVIDIA NGC<block ref="5c75bfead88762783d54deaaa3d62735" category="inline-link-rx"></block></block>
  <block id="11bdb18e1c5e7d1e4362c9d2f6956fc8" category="list-text">运行： AI 容器编排解决方案</block>
  <block id="5afc85c81e76f427a293dd861e0109a3" category="list-text">Run ： AI 产品简介<block ref="64b899832bfcad18bb426fb355a0d03b" category="inline-link-rx"></block></block>
  <block id="9acfbb098f0d9b45b5897b44ae347ee9" category="list-text">运行： AI 安装文档<block ref="cb05a776556ca5a25aec417185ef6863" category="inline-link-rx"></block>
<block ref="b2e8533fae57aa9047d7731db51b6dfe" category="inline-link-rx"></block></block>
  <block id="b0d8a6d0eebdc42ac243c16f9137118d" category="list-text">在 Run ： AI 命令行界面中提交作业<block ref="97ec6c214f99d7e6a39194a167aeecc8" category="inline-link-rx"></block>
<block ref="d75350381b5fda5cc9c9a1ce34c24299" category="inline-link-rx"></block></block>
  <block id="9bd35f4f3f6faa9e9330c54fd2086967" category="list-text">在 Run ： AI 命令行界面中分配 GPU 分数<block ref="e343516de5fb56c6a0d652bcdfceaab7" category="inline-link-rx"></block></block>
  <block id="ddb27cb97146c8f5964eaf368feb4ce0" category="list-text">技术报告<block ref="3ce56c027572d1908d65b63056be024f" category="inline-link-rx"></block></block>
  <block id="2273cd603e277bb35f96881a557b0608" category="list-text">简短演示<block ref="61e3673018126d9a106032d9ff691322" category="inline-link-rx"></block></block>
  <block id="45f26b752dfae88ec8c7def446162521" category="list-text">GitHub 存储库<block ref="f9a4909739179bedfa8ba1d225598979" category="inline-link-rx"></block></block>
  <block id="c36e36ff8b7edf8dd17781148ed57337" category="list-text">NetApp AFF A 系列产品规格<block ref="9a84c14d2692222552174943486e7136" category="inline-link-rx"></block></block>
  <block id="ffc4c8e8bc10afc438d9c590f44e3b51" category="list-text">适用于全闪存 FAS 的 NetApp 闪存优势<block ref="9dcd8a7bfc88cf6bbca4b422861950bf" category="inline-link-rx"></block></block>
  <block id="7843ce52c43038d88c2f54d85f3f764d" category="list-text">ONTAP 9 信息库<block ref="974aeb47ab8fd0a635d02d8ac80b9eb1" category="inline-link-rx"></block></block>
  <block id="5f1b8a708e16776ca4372c71dc377653" category="list-text">NetApp ONTAP FlexGroup Volumes 技术报告<block ref="1ab29fc7fde3319a82a477ec308cf820" category="inline-link-rx"></block></block>
  <block id="062d7e5979c653f33e03cb0aaeaec6e9" category="list-text">采用 DGX-1 的 ONTAP AI 和 Cisco 网络设计指南<block ref="b141781260425e95eee945147e2f0d99" category="inline-link-rx"></block></block>
  <block id="59086e50189644b7c19947dfa68f8395" category="list-text">《采用 DGX-1 的 ONTAP AI 和 Cisco 网络部署指南》<block ref="921f17c41dea89b0a711f380e9864e09" category="inline-link-rx"></block></block>
  <block id="062afad089226e62b53e77ba2af24574" category="list-text">采用 DGX-1 和 Mellanox 网络设计指南的 ONTAP AI<block ref="f2345b2674d3976c091d4af042c36a8f" category="inline-link-rx"></block></block>
  <block id="e6b737f0513721f0a8024f538058333e" category="list-text">采用 DGX-2 的 ONTAP AI 设计指南<block ref="b38db7c217c396412f601b87dfc58a8c" category="inline-link-rx"></block></block>
  <block id="1f9a7430deed674d394796eaea14138f" category="paragraph">本技术报告为拥有小型到大型数据科学 / 工程团队的客户提供了一些准则，可通过使用运行： AI 命令行界面和 NetApp ONTAP AI 上的系统信息板来优化 Kubernetes 集群和 GPU 的使用。此外，它还包括运行： AI 平台安装信息，测试场景以及适用于经验证的测试用例的详细命令。Run ： AI Orchestration 解决方案与 NetApp AI 控制平面相结合，可通过优化资源利用率提高开发人员的工作效率，从而加快创新速度。</block>
  <block id="892726726d592ee18c9ee8ad25a088ae" category="inline-link-macro">下一步：内容提要</block>
  <block id="e6c479abab08e982bd2f0efd6e3e405a" category="paragraph"><block ref="e6c479abab08e982bd2f0efd6e3e405a" category="inline-link-macro-rx"></block></block>
  <block id="c2ae2e58baf01933984b63bbfd58c6c2" category="summary">本节介绍在 Kubernetes 集群中部署气流时必须完成的任务。</block>
  <block id="7d2a9e50f39ee00c2b180900e7bacc92" category="doc">Apache Airflow 部署</block>
  <block id="f23c532f744716d23270b963c3eca570" category="paragraph">NetApp 建议在 Kubernetes 顶部运行 Apache Airflow 。本节介绍在 Kubernetes 集群中部署气流时必须完成的任务。</block>
  <block id="1874d60ac69d2a867825b1b7ab0f9297" category="admonition">可以在 Kubernetes 以外的平台上部署 Airflow 。在 Kubernetes 以外的平台上部署气流不在此解决方案的范围内。</block>
  <block id="c7a7dda60a4edd19d3b5bad13d43d605" category="list-text">您已有一个工作正常的 Kubernetes 集群。</block>
  <block id="e59b39fd5c122dde3747561247eb2888" category="list-text">您已按照《 NetApp Trident 部署和配置》一节中所述在 Kubernetes 集群中安装和配置 NetApp Trident 。</block>
  <block id="ead9806c164633fcb334dc844a3d588f" category="section-title">安装 Helm</block>
  <block id="f9093f3279eca680041e957a2a0505dd" category="paragraph">Airflow 可使用 Kubernetes 常用的软件包管理器 Helm 进行部署。在部署气流之前，必须在部署跳转主机上安装 Helm 。要在部署跳转主机上安装 Helm ，请按照<block ref="cf3f65305f288242c9d49061d26ec8ec" category="inline-link-rx"></block> 在官方 Helm 文档中。</block>
  <block id="678c0949a1824bf54eba73ab0a2609d8" category="paragraph">在部署 Airflow 之前，您必须在 Kubernetes 集群中指定一个默认 StorageClass 。气流部署过程会尝试使用默认 StorageClass 配置新的永久性卷。如果未将任何 StorageClass 指定为默认 StorageClass ，则部署将失败。要在集群中指定默认 StorageClass ，请按照一节中所述的说明进行操作 <block ref="b868c02e3d390c0001190527c8f4ba0b" category="inline-link-macro-rx"></block>。如果已在集群中指定默认 StorageClass ，则可以跳过此步骤。</block>
  <block id="c7feb8d7350bb5372c4dd0dfc1383865" category="section-title">使用 Helm 部署气流</block>
  <block id="a781e1f3dbd7b5f15c3257febe820528" category="paragraph">要使用 Helm 在 Kubernetes 集群中部署气流，请从部署跳转主机执行以下任务：</block>
  <block id="fe1b26293aba127732d69bdc90866794" category="list-text">按照说明使用 Helm 部署气流<block ref="e4140084ec840191180d755827375d89" category="inline-link-rx"></block> 用于 Artifact Hub 上的官方气流图表。下面的示例命令显示了如何使用 Helm 部署气流。根据您的环境和所需配置，根据需要修改，添加和 / 或删除 `custom- values.yaml` 文件中的值。</block>
  <block id="fa7edbfc4d9facbb8db918116ff0ae46" category="list-text">确认所有气流 Pod 均已启动且正在运行。所有 POD 可能需要几分钟的时间才能启动。</block>
  <block id="9bb040ffef8c89d0861be81732ca17de" category="list-text">按照步骤 1 中使用 Helm 部署 Airflow 时控制台上印有的说明获取 Airflow Web 服务 URL 。</block>
  <block id="0db6a8f601b49c6c3780b668eac398a8" category="list-text">确认您可以访问 Airflow Web 服务。</block>
  <block id="6a8e19652a540e359304ba812d39ea8e" category="paragraph"><block ref="6a8e19652a540e359304ba812d39ea8e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1e48409a293254dced52407be3dbb722" category="doc">使用 Jarvis ， Cloud Sync 和 Nemo 构建虚拟助手</block>
  <block id="68dc442228015e015ca6272edb5994e4" category="inline-link-macro">接下来：使用 Jarvis ， Cloud Sync 和 Nemo 概述构建虚拟助手</block>
  <block id="f308b9afc8e29196ebb4fe535e29fc51" category="paragraph"><block ref="f308b9afc8e29196ebb4fe535e29fc51" category="inline-link-macro-rx"></block></block>
  <block id="3ad0505876550699ce505845f96683a7" category="doc">使用 NetApp Cloud Sync 归档对话历史记录</block>
  <block id="a7e4c14a726c28e6cb4b935701ac2899" category="paragraph">通过每天将对话历史记录转储到 CSV 文件中一次，我们可以利用 Cloud Sync 将日志文件下载到本地存储中。下图显示了在内部和公有云中部署 JarVis ，同时使用 Cloud Sync 发送 Nemo 培训对话历史记录的架构。有关 Nemo 培训的详细信息，请参见一节 <block ref="14a0a4dd1a1c18cba42b2036fe4dfc33" category="inline-link-macro-rx"></block>。</block>
  <block id="e60c4461b2b4dcf3aa8535e3aab780b3" category="paragraph"><block ref="e60c4461b2b4dcf3aa8535e3aab780b3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="00717575e300ae9f18fa0a24d97bcca5" category="inline-link-macro">接下来：使用 Nemo 培训扩展意向模型</block>
  <block id="7ee8a10f8da0d566f0c5cccb9528b186" category="paragraph"><block ref="7ee8a10f8da0d566f0c5cccb9528b186" category="inline-link-macro-rx"></block></block>
  <block id="c4e7b8572218b2c9421122c7ab76be25" category="paragraph">NetApp 和 cnvrg.io 合作为客户提供了一个完整的数据管理解决方案，用于 ML 和 DL 软件开发。ONTAP AI 可为任何规模的运营提供高性能计算和存储，而 cnvrg.io 软件可简化数据科学工作流并提高资源利用率。</block>
  <block id="8537de5688b6b855ec8b5465eca4e8f6" category="list-text">NVIDIA DGX Station ， V100 GPU ， GPU Cloud</block>
  <block id="e4c64a7040f5ee4721b3880f35ae02c8" category="inline-link"><block ref="e4c64a7040f5ee4721b3880f35ae02c8" category="inline-link-rx"></block></block>
  <block id="432a0462f3a215c89d6067d01ac9fee8" category="list-text">NVIDIA DGX Station<block ref="00e84bc2760804fd15a292583676639b" category="inline-link-rx"></block></block>
  <block id="a8135dcfdfd9c1074b55895b8d51f9be" category="list-text">NVIDIA V100 Tensor 核心 GPU<block ref="a724832176ce84a9d4be5c34e44891d3" category="inline-link-rx"></block></block>
  <block id="f3e44b157fa7ead37042e8a6f3b14071" category="list-text">NVIDIA NGC<block ref="839d9b8469a8d9554891a7515a2b9be7" category="inline-link-rx"></block></block>
  <block id="944c1fe2317541350506cecb6131b857" category="inline-link"><block ref="944c1fe2317541350506cecb6131b857" category="inline-link-rx"></block></block>
  <block id="d3ceb6166da1ada512f22bc7832ec047" category="list-text">NVIDIA JarVis<block ref="34ae4389dc7afcada801d63c08e322b9" category="inline-link-rx"></block></block>
  <block id="21ce987b6ba4d344f1427dc72d497669" category="inline-link"><block ref="21ce987b6ba4d344f1427dc72d497669" category="inline-link-rx"></block></block>
  <block id="7bf7a8db8c3809766aa2579c2eadf37d" category="list-text">NVIDIA JarVis Early Access<block ref="2daee9604c6a07f74e6776847d2ee61e" category="inline-link-rx"></block></block>
  <block id="e58709fef6e6eb28a11c06d27c5d6aa7" category="inline-link"><block ref="e58709fef6e6eb28a11c06d27c5d6aa7" category="inline-link-rx"></block></block>
  <block id="852c7bf0a8f3b30a5a001dbf642dbebe" category="list-text">NVIDIA Nemo<block ref="fa9e246f0ef36a285adacc70507ae974" category="inline-link-rx"></block></block>
  <block id="299a4717590cda2cfe1db321802b4995" category="inline-link"><block ref="299a4717590cda2cfe1db321802b4995" category="inline-link-rx"></block></block>
  <block id="dfc2ce4fd02d20052bebaa2e6b8cd029" category="list-text">开发人员指南<block ref="9940ba67713949ce4f2fc05d3a37bd8c" category="inline-link-rx"></block></block>
  <block id="5467c9d1c07a7d1786936650b3c2d52a" category="list-text">NetApp AFF A 系列产品规格<block ref="0d9d8991a05834f0e52a99b37ce360b8" category="inline-link-rx"></block></block>
  <block id="6bb399f406fc5ac4150ad21c6aa05ab2" category="list-text">适用于全闪存 FAS 的 NetApp 闪存优势<block ref="72cf25e9f1e13167cd0dde6f285552ea" category="inline-link-rx"></block></block>
  <block id="9415aef2732728cc097fbbc9ab96b2fe" category="list-text">ONTAP 9 信息库<block ref="8ac8a4cdf844ed67e9ec6ddc4b3e95ad" category="inline-link-rx"></block></block>
  <block id="d106dc348953acc0500f03a25379282e" category="list-text">NetApp ONTAP FlexGroup Volumes 技术报告<block ref="7a26d62dac2be507dcc3e5b9da0ed765" category="inline-link-rx"></block></block>
  <block id="05dbc5885d3bec70d2317a4b51526d96" category="list-text">采用 DGX-1 的 ONTAP AI 和 Cisco 网络设计指南<block ref="9fbee18519e76388280bc1f8e3fd6c7e" category="inline-link-rx"></block></block>
  <block id="af5797305db370f4f59d77bf7c73160b" category="list-text">《采用 DGX-1 的 ONTAP AI 和 Cisco 网络部署指南》<block ref="aef3d0752148699921f8a251537d5ff3" category="inline-link-rx"></block></block>
  <block id="f2345b2674d3976c091d4af042c36a8f" category="inline-link"><block ref="f2345b2674d3976c091d4af042c36a8f" category="inline-link-rx"></block></block>
  <block id="f63c45f352478237d0d0fe7c5a26d6bf" category="list-text">采用 DGX-1 和 Mellanox 网络设计指南的 ONTAP AI<block ref="459df3a4bfb1f89f6920196001257745" category="inline-link-rx"></block></block>
  <block id="b38db7c217c396412f601b87dfc58a8c" category="inline-link"><block ref="b38db7c217c396412f601b87dfc58a8c" category="inline-link-rx"></block></block>
  <block id="da8009e462fd2ec5eeb41b4cf3721f7a" category="list-text">采用 DGX-2 的 ONTAP AI 设计指南<block ref="86d70269673ee41c37a2673f7d3655ce" category="inline-link-rx"></block></block>
  <block id="ca6d5ad374e3cf268dec341c0c398442" category="summary">在此架构中，重点关注 AI 或机器学习（ ML ）分布式车道检测训练流程中计算最密集的部分。</block>
  <block id="8cb13336dc020a2fb7bca9d4e940cc64" category="paragraph">在此架构中，重点关注 AI 或机器学习（ ML ）分布式车道检测训练流程中计算最密集的部分。车道检测是自动驾驶中最重要的任务之一，它有助于通过对车道标记进行定位来引导车辆。车道标记等静态组件可引导车辆以交互方式安全地在高速公路上驾驶。</block>
  <block id="0721542454dcaa77c97cd9c545d9063f" category="paragraph">基于卷积神经网络（ CNN ）的方法将场景理解和分段提升到了一个新的水平。虽然对于结构较长的对象以及可能被堵塞的区域（例如，极柱，车道上的阴影等）来说，这种方法并不能很好地发挥作用。空间对流神经网络（ SCNN ）将 CNN 概括为丰富的空间级别。它可以在同一层的神经元之间传播信息，从而最适合结构化对象，例如通道，极或带有 occlusi 的叉车。这种兼容性是因为空间信息可以得到增强，并且可以保持平稳性和连续性。</block>
  <block id="df38a65c87631c9530cc3a6832ea7a7d" category="paragraph">需要在系统中注入数千个场景图像，以便模型能够学习和区分数据集中的各个组件。这些图像包括天气，日间或夜间，多层公路以及其他交通状况。</block>
  <block id="f7759f002b4a60b5c837abb7f8936037" category="paragraph">对于培训，需要高质量和高数量的数据。单个 GPU 或多个 GPU 可能需要数天到数周才能完成培训。数据分布式培训可通过使用多个和多节点 GPU 来加快此过程。Horovod 就是这样一个框架，它可以提供分布式培训，但在 GPU 集群之间读取数据可能会成为一种障碍。Azure NetApp Files 提供超快，高吞吐量和持续低延迟，可提供横向扩展 / 纵向扩展功能，从而充分利用 GPU 的计算容量。我们的实验证实，集群中的所有 GPU 平均使用 96% 以上的 GPU 来使用 SCNN 进行通道检测训练。</block>
  <block id="bf8dd94f74c5878ba969abeeef0286d1" category="section-title">目标受众</block>
  <block id="0ca450eccdc7141b5e85e9e691a7f16b" category="paragraph">数据科学在 IT 和业务领域整合了多个学科，因此我们的目标受众中包含多个角色：</block>
  <block id="8acb1f50d0ada4e1149c01a5aa15b9ce" category="list-text">数据科学家需要灵活地使用自己选择的工具和库。</block>
  <block id="d0ba3808090644db73caeb23fcc2b17c" category="list-text">数据工程师需要了解数据的流动方式及其所在位置。</block>
  <block id="22a8c99419dee54a28ed1e2355a6706b" category="list-text">自主驾驶用例专家。</block>
  <block id="18f66c4bad233033dabddf6ff1289eeb" category="list-text">云管理员和架构师设置和管理云（ Azure ）资源。</block>
  <block id="4c9b6067f04f945e9247ecd00c22e328" category="list-text">开发运营工程师需要使用工具将新的 AI/ML 应用程序集成到持续集成和持续部署（ CI/CD ）管道中。</block>
  <block id="53720cf6403ac6b8a2402cce66c79d4f" category="list-text">业务用户希望能够访问 AI/ML 应用程序。</block>
  <block id="68dcdc6243e54c14b4c41c129d574c43" category="paragraph">在本文档中，我们将介绍 Azure NetApp Files ， Run ： AI 和 Microsoft Azure 如何帮助这些角色为业务带来价值。</block>
  <block id="8f4c7939e8a42e023939df947aba54f6" category="section-title">解决方案技术</block>
  <block id="8017303b9b2c96742151083f089fc51f" category="paragraph">本节介绍了在 Azure 云中全面运行的大规模分布式训练解决方案的通道检测用例的技术要求。下图概述了解决方案架构。</block>
  <block id="f17291da16ed3dd7b705548f16706120" category="paragraph">此解决方案中使用的元素包括：</block>
  <block id="f28c5620810ae2a6961a1811277a7ff8" category="list-text">Azure Kubernetes Service （ AKS ）</block>
  <block id="03023f4a63d3d8f8ff86ff8246f75b9a" category="list-text">采用 NVIDIA GPU 的 Azure 计算 SKU</block>
  <block id="ae5ba69294a1b9feb03e6dd75395092c" category="list-text">运行： AI</block>
  <block id="951370659c41a55ac9f80ff19c2f4b26" category="paragraph">中列出了指向此处提及的所有要素的链接 <block ref="c8b73068ae16e202922904f7ed452f8e" category="inline-link-macro-rx"></block> 部分。</block>
  <block id="00d9279819736707d2b224ec427a8aae" category="paragraph"><block ref="00d9279819736707d2b224ec427a8aae" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e6a2faff353ad4e74bf3ee92e5d8b9c6" category="section-title">云资源和服务要求</block>
  <block id="5b691a1a00c6c03be70e559f55ae4fef" category="paragraph">下表列出了实施解决方案所需的硬件组件。在任何解决方案实施中使用的云组件可能会因客户要求而异。</block>
  <block id="c8e2277ecfb1427838c488c217f99466" category="cell">云</block>
  <block id="5f3bc5eb45e6b472bf3345d1036945e9" category="cell">AK</block>
  <block id="55b8660903ebaaed924e945432fe269e" category="cell">至少三个系统节点和三个 GPU 工作节点</block>
  <block id="3580a6b3e7ba0d55af17daee07244cbd" category="cell">虚拟机（ VM ） SKU 系统节点</block>
  <block id="8f75b0af54b5e672a660f4f1f1557f18" category="cell">三个 Standard_DS2_v2</block>
  <block id="a6066b29e1c4603af2c5c46cf549f764" category="cell">VM SKU GPU 工作节点</block>
  <block id="6aa4bab72f83c0b68587ee208f2c9ab0" category="cell">三个 Standard_NC6s_v3</block>
  <block id="3468e131592d70a22139936f3fb21403" category="cell">4 TB 标准层</block>
  <block id="cb251883efe045266871b7dd15229644" category="cell">版本或其他信息</block>
  <block id="bb451ae1fa5a629a0307949d38a60e2d" category="cell">AK — Kubernetes 版本</block>
  <block id="f2d1dd8f39098da402272f7606fd2638" category="cell">1.18.14</block>
  <block id="13c5eaa211a3778d391d5c8f65b80234" category="cell">运行： AI 命令行界面</block>
  <block id="89633b9d6f401377b6ece0682b92530a" category="cell">v2.2.25</block>
  <block id="4b138e2d1492b1e550d42348c65cbf82" category="cell">运行： AI Orchestration Kubernetes Operator 版本</block>
  <block id="6db851ff24c4b893a85242e63bbea119" category="cell">1.0.109</block>
  <block id="f5f1c35a78d5584cdb787d4e3b6b10b6" category="cell">Horovod</block>
  <block id="4a7724061c17f8cf5be61a8adf4c170f" category="cell">0.21.2.</block>
  <block id="44adee2c140fc723412bae93732e5993" category="cell">20.01.1</block>
  <block id="1a7fa7cc4c79d5163f691ff60e6fc34d" category="doc">运行： AI 信息板和视图</block>
  <block id="3473dab452c5446b1a01a923e9879461" category="paragraph">在 Kubernetes 集群上安装 Run ： AI 并正确配置容器后，您将看到以下信息板和视图<block ref="2af90fde6f4d8ae5947b005d1208e742" category="inline-link-rx"></block> 在浏览器中，如下图所示。</block>
  <block id="f977554b7762214959db36c20484c697" category="paragraph"><block ref="f977554b7762214959db36c20484c697" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8dfd99441ce89d4be896e4fc9757f7d2" category="paragraph">集群中共有 16 个 GPU ，由两个 DGX-1 节点提供。您可以查看节点数，可用 GPU 总数，分配给工作负载的已分配 GPU ，正在运行的作业总数，待定作业以及闲置已分配 GPU 。右侧的条形图显示每个项目的 GPU ，其中总结了不同团队如何使用集群资源。中间是当前正在运行的作业列表，其中包含作业详细信息，包括作业名称，项目，用户，作业类型， 每个作业正在运行的节点，为此作业分配的 GPU 数量，作业的当前运行时间，作业进度百分比以及该作业的 GPU 利用率。请注意，集群利用率不足（ GPU 利用率为 23% ），因为一个团队只提交了三个正在运行的作业（`team-A` ）。</block>
  <block id="67545e2efac33412706ff883eff2e1c4" category="paragraph">在下一节中，我们将介绍如何在 " 项目 " 选项卡中创建多个团队，并为每个团队分配 GPU ，以便在每个集群有大量用户时最大限度地提高集群利用率并管理资源。这些测试场景模拟了在训练，推理和交互式工作负载之间共享内存和 GPU 资源的企业环境。</block>
  <block id="73eea118e4762640a7f60136f3e5c1a0" category="inline-link-macro">接下来：为数据科学团队创建项目并分配 GPU</block>
  <block id="7c2c470385b4f61a9e9b5b0881d2f061" category="paragraph"><block ref="7c2c470385b4f61a9e9b5b0881d2f061" category="inline-link-macro-rx"></block></block>
  <block id="efbb4ade01a09771413f4c09880e800a" category="paragraph">在本节中，我们将扩展多个团队提交工作负载并超过其配额的情形。通过这种方式，我们将展示 Run ： AI 的公平性算法如何根据预设配额比率分配集群资源。</block>
  <block id="3bd5af2e3a75651c4b9c45d26400fbaa" category="paragraph">此测试场景的目标：</block>
  <block id="cc9e23eb4fe1626d97a5dfeab7cf0d25" category="list-text">显示多个团队请求超过其配额的 GPU 时的排队机制。</block>
  <block id="050060785f2852b203c9e82254f2946a" category="list-text">显示系统如何根据配额之间的比率在超过配额的多个组之间分配公平的集群份额，以便具有较大配额的组获得较大的备用容量份额。</block>
  <block id="9e06f625a31670e60f0a8a09917c3ba0" category="paragraph">结束时 <block ref="26be59a535445b1fffeef12f5e70f3e6" category="inline-link-macro-rx"></block>，有两个工作负载排队：一个用于 `team-b` ，一个用于 `team-c` 。在本节中，我们将对其他工作负载进行排队。</block>
  <block id="286cda6cf9e9438a2cff2827773cfe7a" category="inline-link-macro">第 4.10 节的测试详细信息</block>
  <block id="0e7a9992269080ceaf2b90c188cbb861" category="paragraph">有关提交作业，使用的容器映像以及执行的命令序列等详细信息，请参见 <block ref="37da92aa18d307c3afbe514e0c6c1f90" category="inline-link-macro-rx"></block>。</block>
  <block id="b1df8ade330dd8e3c0962d87a58c1ba9" category="paragraph">根据部分提交所有作业时 <block ref="37da92aa18d307c3afbe514e0c6c1f90" category="inline-link-macro-rx"></block>系统信息板显示 `team-A` ， `team-b` 和 `team-c` 所有 GPU 都超过其预设配额。与预设的软配额（ 4 个）相比， `team-A` 占用的 GPU 更多，而 `team-b` 和 `team-c` 每个占用的 GPU 都比其软配额（ 2 个）多两个。分配的过度配额 GPU 的比率等于其预设配额的比率。这是因为系统使用预设配额作为优先级的参考，并在多个团队请求更多 GPU ，超过其配额时相应地进行配置。当企业数据科学团队积极参与 AI 模型的开发和生产时，这种自动负载平衡可以实现公平和优先级划分。</block>
  <block id="6effcb49094093af4699b050b9994a58" category="paragraph"><block ref="6effcb49094093af4699b050b9994a58" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b3be1869ca88e0b5881bc6d1da583426" category="list-text">系统开始将其他团队的工作负载取消队列。</block>
  <block id="d2325970b5cec6b47eb2c10267e3a599" category="list-text">除队顺序根据公平算法来确定，这样 `team-b` 和 `team-c` 会获得相同数量的超配额 GPU （因为它们具有类似的配额）， 而 `team-A` 获得的 GPU 数量是原来的两倍，因为他们的配额是 `team-b` 和 `team-c` 的两倍。</block>
  <block id="e2cc28c61aaa6ca7e38bd7ed9de398f1" category="list-text">所有分配都将自动完成。</block>
  <block id="c21d5f3e7c1336258c406bddcde6e0f8" category="paragraph">因此，系统应在以下状态下保持稳定：</block>
  <block id="8f2185cd998019e76038f11669cfbfb0" category="cell">已分配 GPU</block>
  <block id="3b55c08436be9e1008bb19488c139c88" category="cell">8/4.</block>
  <block id="f532ced5959572a93091758c821d7ff1" category="cell">超过配额的四个 GPU 。空队列。</block>
  <block id="b0713292a73176f9754bd528cecde2d1" category="cell">超过配额的两个 GPU 。一个工作负载已排队。</block>
  <block id="1f0189591d8d7dc1d3db367398fb49c5" category="cell">0/8</block>
  <block id="7c0de9de98eb6577a96694238e533915" category="cell">根本不使用 GPU ，没有已排队的工作负载。</block>
  <block id="948c32bf5f56f7dd6f3b2baab5f6d89d" category="paragraph">下图显示了各个部分的 Run ： AI Analytics 信息板中每个项目在一段时间内的 GPU 分配情况 <block ref="fdc629b29ea94e672f68b28bf3b661b4" category="inline-link-macro-rx"></block>， <block ref="26be59a535445b1fffeef12f5e70f3e6" category="inline-link-macro-rx"></block>，和 <block ref="2783e1454358e180d4e2876ef9492c64" category="inline-link-macro-rx"></block>。图中的每一行表示在任何时间为给定数据科学团队配置的 GPU 数量。我们可以看到，系统会根据提交的工作负载动态分配 GPU 。这样，当集群中存在可用 GPU 时，团队可以超过配额，然后根据公平原则抢占作业，最后达到所有四个团队的稳定状态。</block>
  <block id="d7fc0f82166b3a8fb5cbc55d2fb5efb0" category="paragraph"><block ref="d7fc0f82166b3a8fb5cbc55d2fb5efb0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e94097f9836d70dc64016728992696a0" category="inline-link-macro">下一步：将数据保存到 Trident 配置的 PersistentVolume</block>
  <block id="14718f3c808034f0e3239dbaf832a478" category="paragraph"><block ref="14718f3c808034f0e3239dbaf832a478" category="inline-link-macro-rx"></block></block>
  <block id="3c97b4929008c9f4091a8070f570ccd4" category="paragraph">我们使用行业标准基准工具 TensorFlow 基准测试对该系统的运行和性能进行了验证。ImageNet 数据集用于训练 RESNET-50 ，它是一种著名的用于图像分类的 Convolutional Neural Network （ CNN ） DL 模型。RESNET-50 可提供准确的训练结果，并缩短处理时间，从而使我们能够对存储产生足够的需求。</block>
  <block id="123704fec3ddad892d7c2ae5c4de301b" category="paragraph"><block ref="123704fec3ddad892d7c2ae5c4de301b" category="inline-link-macro-rx"></block></block>
  <block id="56dfbb2acffcc994819cbad5ec450617" category="paragraph">本节介绍与 ML 工作流中的数据缓存相关的概念和组件。</block>
  <block id="091fa9121c047db1dd48c3e2ab5f3c91" category="section-title">机器学习</block>
  <block id="d3f18dede1775f82df24232095090253" category="paragraph">对于全球许多企业和组织来说， ML 正迅速变得至关重要。因此， IT 和 DevOps 团队现在面临着标准化 ML 工作负载以及配置云，内部和混合计算资源的挑战，这些资源支持 ML 作业和管道所需的动态密集型工作流。</block>
  <block id="f71dfff263d05c18171dcf4b8c538ebf" category="section-title">基于容器的机器学习和 Kubernetes</block>
  <block id="002f314c3c41ffb741f8c91d2274af9a" category="paragraph">容器是在共享主机操作系统内核上运行的隔离用户空间实例。容器的采用率正在快速增长。容器可提供许多与虚拟机（ VM ）相同的应用程序沙盒优势。但是，由于虚拟机所依赖的虚拟机管理程序和子操作系统层已被消除，因此容器的重量要轻得多。</block>
  <block id="ce8bb3a31abf8bfcdcdacb34d96b010a" category="paragraph">此外，还可以通过容器直接将应用程序依赖关系，运行时间等内容高效地打包到应用程序中。最常用的容器打包格式是 Docker 容器。已采用 Docker 容器格式进行容器化的应用程序可以在可以运行 Docker 容器的任何计算机上执行。即使计算机上不存在应用程序的依赖关系，也是如此，因为所有依赖关系都打包在容器中。有关详细信息，请访问<block ref="5b5112034c22f544bc19c7a568afbfcb" category="inline-link-rx"></block>。</block>
  <block id="cfbe31a3e8ac3348240670510232ed8f" category="paragraph">Kubernetes 是一款广受欢迎的容器编排程序，可帮助数据科学家启动基于容器的灵活作业和管道。它还支持基础架构团队在一个受管云原生环境中管理和监控 ML 工作负载。有关详细信息，请访问<block ref="45556eaecf73275e38fa694031a104a3" category="inline-link-rx"></block>。</block>
  <block id="371ac536e4099ad82f6080b713ce9647" category="paragraph">cnvrg.io 是一款 AI 操作系统，可将企业管理，扩展和加速 AI 和数据科学开发的方式从研究转变为生产。代码优先平台由数据科学家为数据科学家构建，可灵活地在内部或云中运行。借助模型管理， MLOps 和持续的 ML 解决方案， cnvrg.io 为数据科学团队带来了一流的技术，因此他们可以减少在开发运营上花费的时间，专注于真正的魔力—算法。自使用 cnvrg.io 以来，各个行业的团队已获得更多生产模式，从而增加了业务价值。</block>
  <block id="ffb1d184fa3790eda48f1fc2d9c2f821" category="section-title">cnvrg.io 元数据计划程序</block>
  <block id="55fdc117823776b1ebb2170b4adfadf6" category="paragraph">cnvrg 。IO 具有一个独特的架构，允许 IT 和工程师将不同的计算资源连接到同一控制平面，并使 cnvrg-io 管理所有资源中的 ML 作业。这意味着它可以连接多个内部 Kubernetes 集群， VM 服务器和云帐户，并在所有资源上运行 ML 工作负载，如下图所示。</block>
  <block id="3c7fcf7e73eda18d7277b14914857f38" category="paragraph"><block ref="3c7fcf7e73eda18d7277b14914857f38" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cfff0196a077e92a8fe9326f97cb7fc5" category="section-title">cnvrg.io 数据缓存</block>
  <block id="ad693e5ee82f0e0486a136821d0a0779" category="paragraph">借助 cnvrg.io ，数据科学家可以利用其数据缓存技术定义热数据集和冷数据集版本。默认情况下，数据集存储在集中式对象存储数据库中。然后，数据科学家可以在选定计算资源上缓存特定数据版本，以节省下载时间，从而提高 ML 开发和工作效率。已缓存且在几天内未使用的数据集将自动从选定 NFS 中清除。只需单击一下鼠标即可执行缓存和清除操作；无需进行编码， IT 或 DevOps 工作。</block>
  <block id="42cf1b27f88752e1e98918981aa76e41" category="section-title">cnvrg.io 流和 ML 管道</block>
  <block id="1bc2ab6c98ec5b23a8a384861da1c6ca" category="paragraph">cnvrg.io 流是一种用于构建生产 ML 管道的工具。流中的每个组件都是一个脚本 / 代码，在选定计算上运行，并具有一个基本 Docker 映像。这种设计使数据科学家和工程师能够构建一个可同时在内部和云中运行的管道。cnvrg.io 可确保数据，参数和项目在不同组件之间移动。此外，还会对每个流进行监控和跟踪，以实现 100% 可重现的数据科学。</block>
  <block id="87cd11047488d3aa87eb2829eeb02305" category="section-title">cnvrg.io 核心</block>
  <block id="526c8ebff3057ce85f47160f32e15556" category="paragraph">cnvrg.io 核心是数据科学社区的一个免费平台，可帮助数据科学家更加专注于数据科学，而不是专注于开发运营。核心灵活的基础架构使数据科学家能够控制使用任何语言， AI 框架或计算环境，无论是内部环境还是云环境，以便他们能够做到最擅长的事情，构建算法。在任何 Kubernetes 集群上，只需一个命令即可轻松安装 cnvrg-io 核心。</block>
  <block id="f92894a2a2633c488de71d74ace474d7" category="paragraph">ONTAP AI 是一款适用于 ML 和深度学习（ DL ）工作负载的数据中心参考架构，它使用 NetApp AFF 存储系统和采用 Tesla V100 GPU 的 NVIDIA DGX 系统。ONTAP AI 基于基于 100 Gb 以太网的行业标准 NFS 文件协议，可为客户提供高性能 ML/DL 基础架构，该基础架构使用标准数据中心技术来降低实施和管理开销。通过使用标准化网络和协议， ONTAP AI 可以集成到混合云环境中，同时保持操作的一致性和精简性。作为一款经过预先验证的基础架构解决方案， ONTAP AI 可减少部署时间和风险，并显著降低管理开销，从而使客户能够更快地实现价值。</block>
  <block id="c2148c4c14a795b271b67f662900da4e" category="paragraph">Trident 是一款由 NetApp 开发和维护的开源存储编排程序，可大大简化 Kubernetes 工作负载的永久性存储的创建，管理和使用。Trident 本身是 Kubernetes 的本机应用程序，它直接在 Kubernetes 集群中运行。借助 Trident ， Kubernetes 用户（开发人员，数据科学家， Kubernetes 管理员等）可以采用他们已熟悉的标准 Kubernetes 格式创建，管理永久性存储卷并与其交互。同时，他们还可以利用 NetApp 的高级数据管理功能以及由 NetApp 技术提供支持的数据网络结构。Trident 可将持久存储的复杂性抽象化，并使其易于使用。有关详细信息，请访问<block ref="c98bfcab9052a99136f8752a5ac8ed0b" category="inline-link-rx"></block>。</block>
  <block id="55cf1a0f0fce69fd543500e5761dd26d" category="section-title">NetApp StorageGRID</block>
  <block id="ecfefbd82f34239e668be7aac3762226" category="paragraph">NetApp StorageGRID 是一款软件定义的对象存储平台，旨在通过提供简单的类似于云的存储来满足这些需求，用户可以使用 S3 协议访问这些存储。StorageGRID 是一种横向扩展系统，旨在支持互联网连接站点之间的多个节点，而不管距离如何。借助 StorageGRID 的智能策略引擎，用户可以选择跨站点的纠删编码对象，以便在远程站点之间实现地理故障恢复能力或对象复制，从而最大程度地减少 WAN 访问延迟。StorageGRID 在此解决方案中提供了一个出色的私有云主对象存储数据湖。</block>
  <block id="0f0b99ea2f70cd363c2c6a279f74e760" category="section-title">NetApp Cloud Volumes ONTAP</block>
  <block id="c060a6548f860aa739b76c0178ac7c5c" category="paragraph">NetApp Cloud Volumes ONTAP 数据管理软件可以灵活地为用户数据提供控制，保护和效率，同时还可以灵活地使用 AWS ， Google 云平台和 Microsoft Azure 等公有云提供商。Cloud Volumes ONTAP 是一款基于 NetApp ONTAP 存储软件构建的云原生数据管理软件，可为用户提供出色的通用存储平台来满足其云数据需求。在云端和内部部署中使用相同的存储软件，可以为用户提供 Data Fabric 的价值，而无需培训 IT 员工掌握全新的数据管理方法。</block>
  <block id="e16f1943a363dfa46a958bd450c2ecf8" category="paragraph">对于对混合云部署模式感兴趣的客户， Cloud Volumes ONTAP 可以在大多数公有云中提供相同的功能和同类领先的性能，以便在任何环境中提供一致，无缝的用户体验。</block>
  <block id="82ac5cdab15b3954389238dddbc12168" category="paragraph"><block ref="82ac5cdab15b3954389238dddbc12168" category="inline-link-macro-rx"></block></block>
  <block id="d993b502abe38cef7c7256291e3ffa8e" category="paragraph">下表列出了实施解决方案所需的硬件组件。在任何特定解决方案实施中使用的硬件组件可能会因客户要求而异。</block>
  <block id="4c2db3e48f4f33a355c8e493453b53c2" category="inline-link-macro">接下来：软件要求</block>
  <block id="54870296c311c566be3a76b4a4df8e8c" category="paragraph"><block ref="43a6574de87222e6a8a22c8138fc4c45" category="inline-link-macro-rx"></block>。</block>
  <block id="48fe531f68f98f9f6afcf79da6d3b1b3" category="doc">TR-4834 ：《 NetApp 和 Iguazio for MLRun 管道》</block>
  <block id="a0e5bba9c75f65c1d58c6a238316bd2b" category="paragraph">Rick Huang ， David Arnette ， NetApp Marcelo LitovskY ， Iguazio</block>
  <block id="dd9508a891c15cc4bb34f03dc870ab6c" category="paragraph">本文档介绍了使用 NetApp ONTAP AI ， NetApp AI 控制平台， NetApp Cloud Volumes 软件和 Iguazio 数据科学平台的 MLRun 管道的详细信息。我们使用的是 Nercio 无服务器功能， Kubernetes 永久性卷， NetApp Cloud Volumes ， NetApp Snapshot 副本， Grafana 信息板， 以及 Iguazio 平台上的其他服务，用于构建端到端数据管道，以模拟网络故障检测。我们集成了 Iguazio 和 NetApp 技术，可在内部和云端实现快速的模型部署，数据复制和生产监控功能。</block>
  <block id="d431a0ad3e0e99cf99c08fda529884bd" category="paragraph">数据科学家的工作重点应放在机器学习（ ML ）和人工智能（ AI ）模型的培训和调整上。但是，根据 Google 的研究，数据科学家花费了 ~80% 的时间来研究如何使其模型能够与企业应用程序结合使用并大规模运行，如以下描述 AI/ML 工作流中模型开发的图像所示。</block>
  <block id="f08b641e59dba6d999dc1bc2085bcd2c" category="paragraph"><block ref="f08b641e59dba6d999dc1bc2085bcd2c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1eec0363d19df86d30ecefc2e44170fa" category="paragraph">要管理端到端 AI/ML 项目，需要更广泛地了解企业组件。虽然 DevOps 已接管这些类型的组件的定义，集成和部署，但机器学习操作的目标是类似的流程，其中包括 AI/ML 项目。要了解端到端 AI/ML 管道在企业中涉及的内容，请参见以下所需组件列表：</block>
  <block id="ea2ef9b0d095bf991f4973633b485340" category="list-text">数据库</block>
  <block id="3b18b13f059019d19211f8a9f36f7e4e" category="list-text">文件系统</block>
  <block id="d6c823008f20bbfce5f39b30ec9fa918" category="list-text">持续集成和持续部署（ CI/CD ）管道</block>
  <block id="52681719ec1296447ae0e357c4781415" category="list-text">开发集成开发环境（ IDE ）</block>
  <block id="2fae32629d4ef4fc6341f1751b405e45" category="list-text">安全性</block>
  <block id="bd0992d43bb2d0ca676184502e14754e" category="list-text">数据访问策略</block>
  <block id="a9353b1bd1eeedb788a74090b5f8d0bc" category="list-text">数据科学工具集和库</block>
  <block id="2f0ff7df4fd6fa99bbf249af2ea4c3a5" category="paragraph">在本白皮书中，我们展示了 NetApp 与 Iguazio 之间的合作关系如何显著简化端到端 AI/ML 管道的开发。这种简化可以加快所有 AI/ML 应用程序的上市速度。</block>
  <block id="253411380ba9cde08bcfafbd516ad585" category="paragraph">数据科学领域涉及信息技术和业务领域的多个学科。</block>
  <block id="cddde51824956f407b4c02c1e4bc8004" category="list-text">数据科学家需要灵活地使用自己选择的工具和库。</block>
  <block id="310a768ecb4689bcaf80072231d73e83" category="list-text">数据工程师需要了解数据的流动方式及其所在位置。</block>
  <block id="c12281f5ea7b17e370414efbf3f26c30" category="list-text">DevOps 工程师需要使用工具将新的 AI/ML 应用程序集成到其 CI/CD 管道中。</block>
  <block id="f1a4e0eca545ebe9e3c32f1fde407410" category="list-text">业务用户希望能够访问 AI/ML 应用程序。我们介绍了 NetApp 和 Iguazio 如何帮助这些角色为我们的平台带来业务价值。</block>
  <block id="00cc9e5c959e62a9132baca479060db3" category="paragraph">此解决方案遵循 AI/ML 应用程序的生命周期。我们从数据科学家的工作开始，定义准备数据以及训练和部署模型所需的不同步骤。接下来，我们将完成创建完整管道所需的工作，该管道能够跟踪项目，试验执行并部署到 Kubeflow 。为了完成整个周期，我们将管道与 NetApp Cloud Volumes 集成，以启用数据版本控制，如下图所示。</block>
  <block id="ddd4a11ec23c52d3f0831809bc4d7c8f" category="paragraph"><block ref="ddd4a11ec23c52d3f0831809bc4d7c8f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c7c8cd7998e5c4a67923acf8580d94e2" category="inline-link-macro">接下来：技术概述</block>
  <block id="b9023dede6231d8f57593d31db930bf6" category="paragraph"><block ref="b9023dede6231d8f57593d31db930bf6" category="inline-link-macro-rx"></block></block>
  <block id="0de039e647bc53dcce6e7bceb8605cbf" category="paragraph">各行各业各种规模的企业和组织都在转向人工智能（ AI ），机器学习（ ML ）和深度学习（ DL ），以解决实际问题，提供创新产品和服务，并在竞争日益激烈的市场中占据优势。随着企业越来越多地使用 AI ， ML 和 DL ，他们面临着许多挑战，包括工作负载可扩展性和数据可用性。可以通过使用 NetApp AI 控制平台解决方案来应对这些挑战。</block>
  <block id="cae02473f4798da0fdd40f4f598b1d96" category="paragraph">通过此解决方案，您可以快速克隆数据命名空间。此外，您还可以定义和实施 AI ， ML 和 DL 培训工作流，这些工作流可近乎即时地创建数据和模型基线，以实现可追溯性和版本控制。使用此解决方案，您可以跟踪每个模型训练返回到模型经过训练和 / 或验证的确切数据集。最后，借助此解决方案，您可以快速配置 Jupyter 笔记本电脑工作空间，以访问海量数据集。</block>
  <block id="696dba9a093d4ac7b67234745dd57835" category="paragraph">由于此解决方案面向数据科学家和数据工程师，因此只需极少的 NetApp 或 NetApp ONTAP 专业知识即可。借助此解决方案，可以使用简单熟悉的工具和界面来执行数据管理功能。此外，此解决方案还利用完全开源和免费的组件。因此，如果您的环境中已有 NetApp 存储，则可以立即实施此解决方案。如果您要测试此解决方案的驱动器，但尚未安装 NetApp 存储，请访问<block ref="d72e38e0d1c5ca8869f2dd987734920b" category="inline-link-rx"></block>，您可以随时使用基于云的 NetApp 存储解决方案启动和运行。</block>
  <block id="3a607d0e3fa64fd7558e11352f751dd0" category="summary">NetApp AI 控制平面解决方案不依赖于此特定硬件。</block>
  <block id="976cf3edd8adeff2e75cd7a9dd0dae21" category="paragraph">NetApp AI 控制平面解决方案不依赖于此特定硬件。解决方案与 Trident 支持的任何 NetApp 物理存储设备，软件定义的实例或云服务兼容。例如， NetApp AFF 存储系统， Azure NetApp Files ， NetApp Cloud Volumes Service ， NetApp ONTAP Select 软件定义的存储实例或 NetApp Cloud Volumes ONTAP 实例。此外，只要 Kubernetes 和 NetApp Trident 支持所使用的 Kubernetes 版本，即可在任何 Kubernetes 集群上实施解决方案。有关 Kubeflow 支持的 Kubernetes 版本列表，请参见<block ref="01b2e82a7080cdbeb934280240df876e" category="inline-link-rx"></block>。有关 Trident 支持的 Kubernetes 版本列表，请参见<block ref="e6b3671f5db59046617458d31ef4f50b" category="inline-link-rx"></block>。有关用于验证解决方案的环境的详细信息，请参见下表。</block>
  <block id="2e4fd4a404800f52299c132a3403dc72" category="cell">基础架构组件</block>
  <block id="64d354dc5879cf570ce7b4ef676e75bd" category="cell">操作系统</block>
  <block id="4152ac69f367cb5f64dfbc247dd41db0" category="cell">部署跳转主机</block>
  <block id="583a65df9db4119165f5ea0abaa50281" category="cell">虚拟机</block>
  <block id="204dd0a482d284a7fb87c908f713f9bd" category="cell">Ubuntu 20.04.2 LTS</block>
  <block id="f341fd2fe180518e152be2d6fb4ec20b" category="cell">Kubernetes 主节点</block>
  <block id="a89c263b82f7c7f61c9b6c93080f8425" category="cell">Kubernetes 工作节点</block>
  <block id="76a7e6383604f84ace970ce86ba76a9f" category="cell">Kubernetes GPU 工作节点</block>
  <block id="f89b34b046a8d6e3137c95861fa3cf8a" category="cell">NVIDIA DGX-1 （裸机）</block>
  <block id="eba551f3f972830c55b1c9bef15b5f26" category="cell">NVIDIA DGX OS 4.0.5 （基于 Ubuntu 18.04.2 LTS ）</block>
  <block id="0911ffdbb76c891f964e39a07eb6b697" category="cell">1 个 HA 对</block>
  <block id="1672d070f346948fb25e819b40bb3ade" category="cell">NetApp AFF A220</block>
  <block id="d1d73cf191d1afbd40e85644467cae8b" category="cell">NetApp ONTAP 9.7 P6</block>
  <block id="68782f72ebeb2cac06f03226a6e941bb" category="cell">软件组件</block>
  <block id="47354877541923135499c38a6606138a" category="cell">2.0.1</block>
  <block id="9ba69bd971d430b368ce3f0286c8e77c" category="cell">Apache 气流 Helm 图表</block>
  <block id="ecfa741d55b7b1a85bd61a2307877c8c" category="cell">8.0.8</block>
  <block id="fd99a7ef225418315b041ad631a5674c" category="cell">19.03.12</block>
  <block id="56765472680401499c79732468ba4340" category="cell">1.2</block>
  <block id="48d02190984e4f8526f99f9cd9550e08" category="cell">1.18.9</block>
  <block id="d58d49f83f534f5d71b20750bb7927c7" category="cell">21.01.2</block>
  <block id="7a04e1f765218bcbfc633ef331b312b8" category="inline-link-macro">61898cdfda</block>
  <block id="7855beff2fafbce2cf0df4d67f8dfed7" category="cell">提交时主分支的 Trident 部署功能 <block ref="686ead03155c78694e1a59db0970fc1a" category="inline-link-macro-rx"></block>；从 21.03 版开始提供所有其他功能</block>
  <block id="db5eb84117d06047c97c9a0191b5fffe" category="section-title">支持</block>
  <block id="b2e75bbfb9933bc21b7f875e8676641d" category="inline-link-macro">请联系 NetApp</block>
  <block id="a1773dfa99aa26853e90886d55e0d05a" category="paragraph">NetApp 不为 Apache Airflow ， Docker ， Kubeflow ， Kubernetes 或 NVIDIA DeepOps 提供企业级支持。如果您对具有与 NetApp AI 控制平台解决方案类似的功能的完全受支持的解决方案感兴趣， <block ref="103a4ac9affe57bb7edb7796bfdeb684" category="inline-link-macro-rx"></block> 关于 NetApp 与合作伙伴共同提供的完全受支持的 AI/ML 解决方案。</block>
  <block id="3cfbc3bac23f6bb9e7ebdc6deefeaf1d" category="paragraph">由 NetApp 和 NVIDIA 开发并验证的 NetApp ONTAP AI 架构由 NVIDIA DGX 系统和 NetApp 云连接存储系统提供支持。此参考架构为 IT 组织提供了以下优势：</block>
  <block id="410a2fbd85ad3d74051034eac2b94889" category="list-text">为各种性能和成本点提供了一系列存储选项</block>
  <block id="6fa0f6cc1d5d12069641e73217a17be2" category="paragraph">NetApp ONTAP AI 将 DGX 系统和 NetApp AFF A800 存储系统与一流的网络紧密集成在一起。NetApp ONTAP AI 和 DGX 系统消除了设计复杂性和猜测性工作，从而简化了 AI 部署。客户可以从小规模入手，无中断地扩展系统，同时智能地管理从边缘到核心再到云再到云的数据。</block>
  <block id="bdc094a519f73076386a8bf2948832a6" category="paragraph">NetApp AI 控制平台是一个全堆栈 AI ， ML 和深度学习（ DL ）数据和实验管理解决方案，适用于数据科学家和数据工程师。随着企业越来越多地使用 AI ，他们面临着许多挑战，包括工作负载可扩展性和数据可用性。NetApp AI 控制平台可通过多种功能来应对这些挑战，例如像 Git repo一样 快速克隆数据命名空间，以及定义和实施 AI 培训工作流，这些工作流可以近乎即时地创建数据和模型基线，以实现可追溯性和版本控制。借助 NetApp AI 控制平台，您可以在站点和区域之间无缝复制数据，并快速配置 Jupyter 笔记本工作空间，以便访问海量数据集。</block>
  <block id="22101b8498dea1c2e2e35bd4868847a4" category="paragraph">运行： AI 为 AI 基础架构构建了全球首款业务流程和虚拟化平台。通过将工作负载从底层硬件中抽象出来， Run ： AI 可创建一个可动态配置的 GPU 资源共享池，从而高效地编排 AI 工作负载并优化 GPU 的使用。数据科学家可以无缝地使用大量 GPU 功能来改进和加快研究速度，同时 IT 团队可以对资源配置，队列和利用率保持集中的跨站点控制和实时可见性。Run ： AI 平台基于 Kubernetes 构建，可与现有 IT 和数据科学工作流轻松集成。</block>
  <block id="ae00256db8d45ecdaf9c364a96821417" category="paragraph">Run ： AI 平台具有以下优势：</block>
  <block id="d472807c15e94ef6053e95521ff7e838" category="list-text">* 加快创新速度。 * 通过将 Run ： AI 资源池，队列和优先级划分机制与 NetApp 存储系统结合使用，研究人员可以从基础架构管理的麻烦中消除，并可以专注于数据科学。运行： AI 和 NetApp 客户可以根据需要运行任意数量的工作负载，而不会出现计算或数据管道瓶颈，从而提高工作效率。</block>
  <block id="2707d068deb9b46967615c70c806e0d8" category="list-text">* 提高团队工作效率。 * 运行： AI 公平算法可确保所有用户和团队都能获得公平的资源份额。可以预设优先级项目的策略，该平台支持将资源从一个用户或团队动态分配给另一个用户或团队，从而帮助用户及时访问所需的 GPU 资源。</block>
  <block id="faa5854c7e84507b88cba1c0ec1a9aaf" category="list-text">* 提高了 GPU 利用率。 * 运行： AI 计划程序使用户能够轻松地使用百分比 GPU ，整数 GPU 和多个 GPU 节点在 Kubernetes 上进行分布式培训。这样， AI 工作负载就可以根据您的需求运行，而不是根据容量运行。数据科学团队可以在同一基础架构上运行更多 AI 实验。</block>
  <block id="d9533ea5c6cb975dff314dace88f2aa4" category="paragraph"><block ref="d9533ea5c6cb975dff314dace88f2aa4" category="inline-link-macro-rx"></block></block>
  <block id="9abac747d764180a5fe55920e00e887d" category="section-title">客户价值</block>
  <block id="45ce76bfe721ca13d37ca15fdbebd391" category="paragraph">作者衷心感谢我们尊敬的 NVIDIA 同事：达维德 · 奥诺弗罗， Alex Qi ， Sicong Ji ， Marty Jain 和 Robert Sohigian 为本白皮书所做的贡献。作者还想感谢 NetApp 团队的主要成员所做的贡献： Santosh Rao ， David Arnette ， Michael Oglesby ， Brent Davis ， Andy Sayare ， Erik Minder 和 Mike McNamara 。</block>
  <block id="81fbc4247f2c3a990b090cef6b9ebe03" category="paragraph">我们衷心感谢所有这些人士，他们提供了洞察力和专业知识，为本白皮书的编写提供了极大的帮助。</block>
  <block id="bc2f62a5c14dc9d16f38cc32c304164c" category="paragraph"><block ref="bc2f62a5c14dc9d16f38cc32c304164c" category="inline-link-macro-rx"></block></block>
  <block id="25edd21a28cb2fca00ab6f30e47c6d79" category="paragraph">要运行示例推理请求，请完成以下步骤：</block>
  <block id="cb11a85322b32a7615367d2523718b49" category="list-text">获取客户端容器 /Pod 的 Shell 。</block>
  <block id="b489ec265fd981ff7aa78a7721bd3101" category="list-text">运行示例推理请求。</block>
  <block id="15c5e1ffe753f0365f39e7b508ce5ae0" category="paragraph"><block ref="15c5e1ffe753f0365f39e7b508ce5ae0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b5bf2ae3a2d0d1dd1e0740744c9ebb1b" category="paragraph">此推理请求调用用于图像识别的 `resnet50_netdef` 模型。其他客户端也可以通过类似的方法并调用相应的模型来同时发送推理请求。</block>
  <block id="a301641e2c9595a0c9c39ee7986f7ca8" category="paragraph"><block ref="a301641e2c9595a0c9c39ee7986f7ca8" category="inline-link-macro-rx"></block></block>
  <block id="21f937997adb0cac073e2458491f2c2f" category="list-text">按照上的说明下载 NVIDIA DeepOps<block ref="a94c3c17b923443c927cfa8fe7a2482a" category="inline-link-rx"></block> 在 NVIDIA DeepOps GitHub 站点上。</block>
  <block id="76ada3ea43b0e44772967793fe69b1bd" category="inline-link">《 Kubernetes 部署指南》</block>
  <block id="03628142cdc704dd6ffe5d7d13573999" category="list-text">按照上的说明在集群中部署 Kubernetes<block ref="cdf0a6d71dcbe898357c0e37010d30de" category="inline-link-rx"></block> 在 NVIDIA DeepOps GitHub 站点上。</block>
  <block id="2dfe8bb84d94f23030d91e315d7899bc" category="admonition">要使 DeepOps Kubernetes 部署正常工作，所有 Kubernetes 主节点和工作节点上必须存在相同的用户。</block>
  <block id="c6fff1434177c1b95244b5300314f730" category="paragraph">如果部署失败，请在 `deepops/config/group_vars/K8s-cluster.yml` 中将 `kubectl_localhost` 的值更改为 false ，然后重复步骤 2 。`Copy kubectl binary to Ansible host` 任务仅在 `kubectl_localhost` 值为 true 时执行，它依赖于 Fetch Ansible 模块，该模块存在已知的内存使用问题。这些内存使用问题有时可能会使任务发生原因失败。如果任务因内存问题描述而失败，则部署操作的其余部分将无法成功完成。</block>
  <block id="24e1fa4c913dcdc975e022f921d4d603" category="paragraph">如果在将 `kubectl_localhost` 的值更改为 `false` 后部署成功完成，则必须手动将 `kubectl 二进制文件` 从 Kubernetes 主节点复制到部署跳转主机。您可以通过直接在特定主节点上运行 `which kubectl` 命令来查找 `kubectl 二进制文件` 在该节点上的位置。</block>
  <block id="a185054da23018c3578742c41141312b" category="inline-link-macro">接下来： Cnvrg.io 部署</block>
  <block id="c18b567a6a5397941715c30a00a97395" category="paragraph"><block ref="c18b567a6a5397941715c30a00a97395" category="inline-link-macro-rx"></block></block>
  <block id="d7cd7846436814deb26b0df06d7a4b2a" category="summary">要在 Kubernetes 集群中执行同步多节点 AI 和 ML 作业，请在部署跳转主机上执行此页面上列出的任务。通过此过程，您可以利用存储在 NetApp 卷上的数据，并使用单个工作节点所能提供的 GPU 。</block>
  <block id="8725f0c1877790fea82aedbc23e26e70" category="doc">执行同步分布式 AI 工作负载</block>
  <block id="deb7f52575de614a91ae7472b76138ec" category="paragraph">要在 Kubernetes 集群中执行同步多节点 AI 和 ML 作业，请在部署跳转主机上执行以下任务。通过此过程，您可以利用存储在 NetApp 卷上的数据，并使用单个工作节点所能提供的 GPU 。有关同步分布式 AI 作业的描述，请参见下图。</block>
  <block id="c073d47c72ebccdc821d9e6419b3008c" category="admonition">与异步分布式作业相比，同步分布式作业有助于提高性能和训练准确性。本文档不会讨论同步作业与异步作业的利弊。</block>
  <block id="262523fcbe6eb0ec96ea58299e58f65c" category="paragraph"><block ref="262523fcbe6eb0ec96ea58299e58f65c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3a9af10e4883efa64de927027b5b0ffa" category="list-text">以下示例命令显示了创建一名员工参与同步分布式执行本节中示例中在单个节点上执行的同一 TensorFlow 基准测试作业的过程 <block ref="b66468ea886b06cfd7c572c68cd74c28" category="inline-link-macro-rx"></block>。在此特定示例中，仅部署一个员工，因为此作业会在两个员工节点上执行。</block>
  <block id="e3a5f2bdfc8576b6847bcbf0d53889d4" category="paragraph">此示例员工部署请求八个 GPU ，因此可以在一个 GPU 工作节点上运行，该节点具有八个或更多 GPU 。如果您的 GPU 工作节点具有八个以上的 GPU ，则为了最大限度地提高性能，您可能需要增加此数量，使其等于您的工作节点所具有的 GPU 数量。有关 Kubernetes 部署的详细信息，请参见<block ref="29c4feb256f061356947baec0e1bfcb2" category="inline-link-rx"></block>。</block>
  <block id="bfe89db11adc9a38165e670f3062d398" category="paragraph">在此示例中创建了 Kubernetes 部署，因为此特定容器化员工永远不会自行完成。因此，使用 Kubernetes 作业构造来部署它毫无意义。如果员工的设计或编写是为了自己完成，则可以使用此作业构建来部署员工。</block>
  <block id="05bdf5435b916b7b205f448788324f2b" category="paragraph">在此示例部署规范中指定的 Pod 的值为 `hostNetwork` 值 `true` 。此值表示 Pod 使用主机工作节点的网络堆栈，而不是 Kubernetes 通常为每个 Pod 创建的虚拟网络堆栈。在这种情况下使用此标注是因为特定工作负载依靠 Open MPI ， NCCL 和 Horovod 以同步分布式方式执行工作负载。因此，它需要访问主机网络堆栈。有关 Open MPI ， NCCL 和 Horovod 的讨论不在本文档的讨论范围之内。是否需要此 `hostNetwork ： true` 标注取决于要执行的特定工作负载的要求。有关 `hostNetwork` 字段的详细信息，请参见<block ref="f46b1bf9e67570ceac06230c1e502909" category="inline-link-rx"></block>。</block>
  <block id="b3f8c0432fa807543e6e24f429362a32" category="list-text">确认您在第 1 步中创建的员工部署已成功启动。以下示例命令确认已为部署创建了一个辅助 POD ，如部署定义所示，并且此 POD 当前正在其中一个 GPU 辅助节点上运行。</block>
  <block id="3ba975f6a7389af18602f0e938bcc37b" category="list-text">为启动，参与并跟踪同步多节点作业执行的主节点创建 Kubernetes 作业。以下示例命令创建一个主节点，用于启动，参与和跟踪在一节中的示例中对单个节点执行的相同 TensorFlow 基准测试作业的同步分布式执行 <block ref="b66468ea886b06cfd7c572c68cd74c28" category="inline-link-macro-rx"></block>。</block>
  <block id="4161928cbea20386310894ea85fd3711" category="paragraph">此示例主作业请求八个 GPU ，因此可以在具有八个或更多 GPU 的单个 GPU 工作节点上运行。如果您的 GPU 工作节点具有八个以上的 GPU ，则为了最大限度地提高性能，您可能需要增加此数量，使其等于您的工作节点所具有的 GPU 数量。</block>
  <block id="3e04ef9469e6953d66ae9c7536ed9b26" category="paragraph">在本示例作业定义中指定的主 Pod 的值为 `hostNetwork` 值为 `true` ，就像在步骤 1 中为工作 Pod 提供了 `hostNetwork` 值 `true` 一样。有关为何需要此值的详细信息，请参见第 1 步。</block>
  <block id="8600ba20f40fb5668a1b2c02f92e220d" category="list-text">确认您在步骤 3 中创建的主作业正在正确运行。以下示例命令确认已为作业创建了一个主 Pod ，如作业定义所示，并且此 Pod 当前正在其中一个 GPU 工作节点上运行。您还应看到，您最初在步骤 1 中看到的辅助 POD 仍在运行，并且主节点和辅助节点正在不同的节点上运行。</block>
  <block id="0f27ae3c630b411ce8f8dc123361f1b1" category="list-text">确认您在步骤 3 中创建的主作业已成功完成。以下示例命令确认作业已成功完成。</block>
  <block id="6fe5035373f479ed2a1c1d457e64ae9d" category="list-text">如果您不再需要此员工部署，请将其删除。以下示例命令显示了删除在步骤 1 中创建的工作部署对象的过程。</block>
  <block id="e3861d1527373e7d8eeea1704f818a15" category="paragraph">删除 worker 部署对象时， Kubernetes 会自动删除任何关联的 worker Pod 。</block>
  <block id="7e4d2c0ae78fc38eeb38ffe12f736290" category="list-text">* 可选： * 清理主作业项目。以下示例命令显示了删除在步骤 3 中创建的主作业对象的过程。</block>
  <block id="d844794bfc5a0949dc2c38fecacf9ff1" category="paragraph">删除主作业对象时， Kubernetes 会自动删除任何关联的主 Pod 。</block>
  <block id="46b8f9361fae73f13467cd1aaff186ba" category="summary">记录 NetApp 解决方案资料的最新变更</block>
  <block id="679ce0aa9d3d54bfddd37e1b78b802de" category="doc">NetApp 解决方案变更日志</block>
  <block id="aceacf14369d872e8cb00f62613f52c6" category="paragraph">NetApp 解决方案资料的最新变更。首先列出最新的更改。</block>
  <block id="fcf140abed196b8eba71c45f21312bce" category="cell">NetApp 解决方案</block>
  <block id="c30dd1a85cf86d95b11c1a08f70130ce" category="cell">Oracle 数据库</block>
  <block id="2e130352b486464834bcc7dda1ff2603" category="cell">VMware 虚拟化</block>
  <block id="4549cdf15178a5f0535be7f0f86cdb4d" category="cell">企业数据库</block>
  <block id="b0ac6120dada9135114784db22a59940" category="cell">现代数据分析</block>
  <block id="408649df4ac74ae19e47eef7d060c5cb" category="cell">解决方案自动化</block>
  <block id="cb1501db8fac0fe0b1cc3b53200f0ab9" category="summary">业务应用程序和企业数据库解决方案资料的最新补充内容</block>
  <block id="74f0f9a40da4d7423bb50570c4d050bf" category="doc">业务应用程序和企业数据库解决方案的新增功能</block>
  <block id="9de8e04d062d5eb8e2ff199783964174" category="paragraph">概述最新的业务应用程序和企业数据库解决方案和解决方案宣传材料。</block>
  <block id="2dc95f2080ad2dba9a9207db808106e5" category="cell">* Oracle 数据库 *</block>
  <block id="14c4dbb7c61081eee1c499c4cf138c96" category="inline-link-macro">FlexPod 数据中心上的 Oracle 19c RAC 数据库，采用 Cisco UCS 和基于 FC 的 NetApp AFF A800</block>
  <block id="e9dcec3e531a3cec5ee733f23baab91d" category="inline-link-macro">在 NFS 上自动部署适用于 ONTAP 的 Oracle 19c</block>
  <block id="e10944318a093524b44d6671144720e9" category="cell"><block ref="e10944318a093524b44d6671144720e9" category="inline-link-macro-rx"></block></block>
  <block id="71e4dd221a9f0c3610e81f8ebab870ea" category="cell">* SAP HANA *</block>
  <block id="c55aef4f96cafe48d6e5cf37af33721b" category="inline-link-macro">采用 SnapCenter 的 SAP HANA B&amp;M 和 R</block>
  <block id="ffbfe314fcb0f0531b18b666e3f70bcc" category="inline-link-macro">基于 FC SAN 的 SAP HANA</block>
  <block id="03bd539868199e3d2eb12809418e0815" category="cell">* Microsoft SQL Server*</block>
  <block id="760b7d532df381143dc946fd59bf0b62" category="inline-link-macro">Azure NetApp Files 上的 SQL Server</block>
  <block id="9b849a5e6a46a992279087781315f191" category="inline-link-macro">Microsoft SQL Server 上的 SAP 应用程序</block>
  <block id="77c484629c9e9b5aed6fa32ebb0e7229" category="inline-link-macro">基于 SolidFire ESDS 的 SQL Server ，用于虚拟化基础架构</block>
  <block id="91be6e42fe122f20831dcd474322dc82" category="inline-link-macro">SQL Server —使用 NetApp HCI 确保数据库性能</block>
  <block id="d4c96dcd516adf0c5bde093b0b7b7255" category="summary">此页面介绍了在 NetApp ONTAP 存储上部署 Oracle19c 的自动化方法。</block>
  <block id="cb59b87e00d11222bfd9159d0d23836f" category="doc">入门</block>
  <block id="def8ebf26c2dec5f6af5a00893fae037" category="paragraph">此解决方案可以在 AWX/Tower 环境中运行，也可以通过命令行界面在 Ansible 控制主机上运行。</block>
  <block id="008ba800d97cb969def651e93f0d93fb" category="section-title">AWX/ 塔式</block>
  <block id="a481f1841043d60245f18522a86731b1" category="paragraph">对于 AWX/Tower 环境，系统将引导您创建 ONTAP 集群管理和 Oracle 服务器（ IP 和主机名）清单，创建凭据，配置从 NetApp Automation Github 提取 Ansible 代码的项目以及启动自动化的作业模板。</block>
  <block id="5055de7b9d28f88e537f99f34959c80c" category="list-text">填写特定于您的环境的变量，然后将其复制并粘贴到作业模板中的额外 VAR 字段中。</block>
  <block id="d116f375db402ba471f519c0a4df15dc" category="list-text">将额外的变量添加到作业模板后，您可以启动自动化。</block>
  <block id="8ca0a52cf9938328875e0a8803ae71dd" category="list-text">通过为 ontap_config ， linux_config 和 oracle_config 指定标记，作业模板将分三个阶段运行。</block>
  <block id="da3d0d670ace8a327170aa25ee29f272" category="section-title">通过 Ansible 控制主机执行 CLI</block>
  <block id="6a5f01bc22c397ee84e04e48c178e980" category="inline-link-macro">单击此处查看 RHEL 7/8 或 CentOS 7/8</block>
  <block id="7946c3996884ee105962c5334bfd9fef" category="inline-link-macro">此处适用于 Ubuntu 或 Debian</block>
  <block id="f5344fe4d88d29ee79ba6110f60cfa9b" category="list-text">配置 Linux 主机，以便用作 Ansible 控制主机<block ref="8688caf90b0dc445f61be35cbf93ed1a" category="inline-link-macro-rx"></block>或<block ref="2b00e81c1e240a58c4df0e850699511b" category="inline-link-macro-rx"></block></block>
  <block id="28e934ddab7714830f8afe8d3b641dc9" category="list-text">配置 Ansible 控制主机后，您可以克隆 Ansible Automation 存储库。</block>
  <block id="f667be8dac02593d217a02ac5bfb18de" category="list-text">使用 ONTAP 集群管理的 IP 和 / 或主机名以及 Oracle 服务器的管理 IP 编辑 hosts 文件。</block>
  <block id="95bd15e6b4a109de659c54c331c06284" category="list-text">填写特定于您的环境的变量，然后将其复制并粘贴到 `vars.yml` 文件中。</block>
  <block id="ca548be3e5f238d32286d43dc4c89f7b" category="list-text">每个 Oracle 主机都有一个可变文件，该文件由其主机名标识，其中包含主机专用变量。</block>
  <block id="87192ebbcab92216d25fd694a282971d" category="list-text">完成所有可变文件后，您可以通过为 `ontap_config` ， `linux_config` 和 `oracle_config` 指定标记来分三个阶段运行此攻略手册。</block>
  <block id="5a2ebfb8baa378cfcfcba58bbb1380c2" category="section-title">要求</block>
  <block id="0ba29c6a1afacf586b03a26162c72274" category="cell">environment</block>
  <block id="9d5cfca4ad04b54536e5ad15210f7dc2" category="cell">* 可逆环境 *</block>
  <block id="eebc1357e7d1e88ed4e4908d5ae86c0b" category="cell">AWX/Tower 或 Linux 主机作为 Ansible 控制主机</block>
  <block id="3f0733e14ebf265f0abf4b32371043ac" category="cell">Ansible v.10 及更高版本</block>
  <block id="3c91a74236fab100f024452f6df13b5e" category="cell">Python 3.</block>
  <block id="215b38d177939de20bbb7b7913ce32c1" category="cell">Python 库— netapp-lib — xmltodict — jMespath</block>
  <block id="d911b17f4f4cdcca62a04ad77aa9403d" category="cell">* ONTAP *</block>
  <block id="0a928fe81d89083ed303ea3d9f1af8c9" category="cell">ONTAP 版本 9.3 - 9.7</block>
  <block id="10aadda84b1b1da26c3757dfdb59379d" category="cell">两个数据聚合</block>
  <block id="9f998f9668ffe69c62d78760d1c531f0" category="cell">已创建 NFS VLAN 和 ifgrp</block>
  <block id="ba5f343281b90f0408008806c66bce86" category="cell">* Oracle 服务器 *</block>
  <block id="6f1de5f0d7966ebf5f8d255fe28ebffe" category="cell">RHEL 7/8</block>
  <block id="aa596da3b79631d86c0d35e1c4b03aac" category="cell">Oracle Linux 7/8</block>
  <block id="814e8f57514db6134b6ffcd7a4ce20a6" category="cell">NFS ，公有和可选管理的网络接口</block>
  <block id="515f291f3ecc550c5d13cf31fadba91d" category="cell">Oracle 服务器上的 Oracle 安装文件</block>
  <block id="ae9205dab0c26cca7762be5149a93923" category="section-title">自动化详细信息</block>
  <block id="ba0676e7ae183e2c0bbd54261818154f" category="paragraph">此自动化部署采用一本 Ansible 攻略手册设计，该攻略手册包含三个不同的角色。这些角色适用于 ONTAP ， Linux 和 Oracle 配置。下表介绍了正在自动执行的任务。</block>
  <block id="9bb642814808cd0cab510ddfb9e5969c" category="cell">* ontap_config*</block>
  <block id="c0563eda0fb9d63778efe04a13a5d744" category="cell">预检查 ONTAP 环境</block>
  <block id="79b814c8267c6b7822e78ab4624db8e0" category="cell">为 Oracle 创建基于 NFS 的 SVM</block>
  <block id="0c981d6164da0d8e69cdb199966316b0" category="cell">创建导出策略</block>
  <block id="99179ac01bbb0236fc540871377c55c4" category="cell">为 Oracle 创建卷</block>
  <block id="db738705829d97db1e287ad8ea9e5400" category="cell">创建 NFS LIF</block>
  <block id="089c4c184b079d771501d8ceb0f3bb05" category="cell">* Linux 配置 *</block>
  <block id="3ea572544d30a39d236496578f980d13" category="cell">创建挂载点并挂载 NFS 卷</block>
  <block id="db6c0f994cc39fbf66d58eea6c627e6a" category="cell">验证 NFS 挂载</block>
  <block id="6a882e7966e7869ab1d2112a0b1c0074" category="cell">特定于操作系统的配置</block>
  <block id="6e6d41d1398fafd8809de20e831c9ce3" category="cell">创建 Oracle 目录</block>
  <block id="6f965a5d44e1653dac9825f465f71c84" category="cell">配置页面</block>
  <block id="be577868fe0712b7bbb6d5cb5eae613c" category="cell">禁用 SELinux 和防火墙守护进程</block>
  <block id="bb6f16330211bf24baa83db38b11e4a9" category="cell">启用并启动 chronyd 服务</block>
  <block id="e9e5cefa281d2c696aac82ef9c756f51" category="cell">增加文件描述符硬限制</block>
  <block id="a4acc779f882208c081f943aedfeab5c" category="cell">创建 pam 会话文件</block>
  <block id="d03021f9e02b9fa9ebac591ad4bfea08" category="cell">* ORACLE_CONFIG *</block>
  <block id="5e706781d4bf141c80e249a244179235" category="cell">Oracle 软件安装</block>
  <block id="1a98fce6d77de1126bf3cb8247747621" category="cell">创建 Oracle 侦听器</block>
  <block id="841df7bfbef212936073c6d261d4dba9" category="cell">创建 Oracle 数据库</block>
  <block id="845a6e024025bb13aafdc167511e5e7d" category="cell">Oracle 环境配置</block>
  <block id="666113957f940ba4319b4f0d9c3e86c0" category="cell">保存 PDB 状态</block>
  <block id="264bca6ddd5a16346460d9c21e8f926d" category="cell">启用实例归档模式</block>
  <block id="620ca5ae835411d2031ca0fdbbbe61a1" category="cell">启用 DNFS 客户端</block>
  <block id="4d7e6c9b84f6f86cf4817262ad424eeb" category="cell">在操作系统重新启动之间启用数据库自动启动和关闭</block>
  <block id="bf60025632dd0c4a2cf35e8b33e80619" category="section-title">默认参数</block>
  <block id="ebda2606845855cc07ce0ce15ecf8a00" category="paragraph">为了简化自动化，我们已使用默认值预设了许多必需的 Oracle 部署参数。通常，无需更改大多数部署的默认参数。更高级的用户可以谨慎地更改默认参数。默认参数位于每个角色文件夹的默认目录下。</block>
  <block id="452eff11ca6d680a279a3e81b8dc8974" category="section-title">部署说明</block>
  <block id="1cf7ad9cd74067dd3f4aee3c1690ea32" category="paragraph">开始之前，请下载以下 Oracle 安装和修补程序文件，并将其放置在 ` /tmp/archive` 目录中，以便每个要部署的数据库服务器上的所有用户都能进行读取，写入和执行访问。自动化任务会在该特定目录中查找命名的安装文件，以便进行 Oracle 安装和配置。</block>
  <block id="19adadc497199e16f07f9744d43b2899" category="paragraph">您应按照 Github 存储库中的说明读取许可证信息。访问，下载，安装或使用此存储库中的内容即表示您同意所规定的许可证条款 <block ref="07d15b3b85718d883b437fb3739e59a7" category="inline-link-macro-rx"></block>。</block>
  <block id="87d624bc8a7f555a711e7214ee002eec" category="paragraph">请注意，在生成和 / 或共享任何派生作品时，此存储库中的内容存在一定的限制。请务必阅读的条款 <block ref="49480c711afcff6aca610d8294731030" category="inline-link-macro-rx"></block> 在使用内容之前。如果您不同意所有条款，请勿访问，下载或使用此存储库中的内容。</block>
  <block id="5abe869dd828ac1e4527f07db79841a8" category="inline-link-macro">此处可查看 AWX/ 塔式部署的详细步骤</block>
  <block id="c3bcf861ccc9247a7c0a9b4749747e4e" category="inline-link-macro">此处用于命令行界面部署</block>
  <block id="f867ea86471dd6849f2c840cf13d1536" category="paragraph">准备就绪后，单击 <block ref="0ecf76284fbf596cdd030af085c16a3b" category="inline-link-macro-rx"></block> 或 <block ref="42cd9508ebf775e8df0efba80be76af7" category="inline-link-macro-rx"></block>。</block>
  <block id="9b64a6dfae1f3fa326b750c2790c79fe" category="summary">本节介绍如何在使用 Azure NetApp Files SMB 卷的 AOAG 配置中实时部署 SQL 数据库资产。</block>
  <block id="5ca1071c67ab704b04ed27747f213551" category="doc">实时，高级别的参考设计</block>
  <block id="bb0357d1c0b3b8ebd31a43c9b30f3745" category="list-text">节点数： 4</block>
  <block id="7f4f30d96e1d0a820a6962ad6ac994ee" category="list-text">数据库数量： 21</block>
  <block id="f28735e3e5e57049aa575b3f0ec83c61" category="list-text">可用性组数： 4</block>
  <block id="96fb94ba9fad0b4452c212b21df61eab" category="list-text">备份保留： 7 天</block>
  <block id="a8d1485807d36562316fb8b2254bca57" category="list-text">备份归档： 365 天</block>
  <block id="4afa49afd4ebc3638f3e000d65825370" category="admonition">在具有 Azure NetApp Files 共享的 Azure 虚拟机上使用 SQL Server 部署 FCI 可提供一个具有单个数据副本的经济高效模式。如果文件路径与二级副本不同，则此解决方案可以防止出现添加文件操作问题。</block>
  <block id="ab030ea777250278c4f110a497eeef88" category="paragraph"><block ref="ab030ea777250278c4f110a497eeef88" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4822d9597460a9166778308da312709c" category="paragraph">下图显示了 AOAG 中分布在各个节点上的数据库。</block>
  <block id="af316199cc8e77dcbb6fb560cbc4c44c" category="paragraph"><block ref="af316199cc8e77dcbb6fb560cbc4c44c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d22a890163762fcf7a4cb7605c29b7e6" category="section-title">数据布局</block>
  <block id="35c33dd0c5565dbdba04dc2b313d7a2e" category="paragraph">用户数据库文件（ .mdf ）和用户数据库事务日志文件（ .ldf ）以及 tempdb 存储在同一个卷上。服务级别为 " 超 " 。</block>
  <block id="9b7d6479a15395afefc6d7f9e38a4f17" category="paragraph">此配置由四个节点和四个 AGS 组成。所有 21 个数据库（动态 AX ， SharePoint ， RDS 连接代理和索引服务的一部分）都存储在 Azure NetApp Files 卷上。数据库在 AOAG 节点之间进行平衡，以便有效地使用节点上的资源。WSFC 中添加了四个 D32 v3 实例，该实例参与了 AOAG 配置。这四个节点在 Azure 虚拟网络中进行配置，不会从内部迁移。</block>
  <block id="fcbd19b726fdd6160dfe2ab43f285a55" category="paragraph">* 注： *</block>
  <block id="09a10f0ab048cde1d7b704392ba05d9a" category="list-text">如果日志需要更高的性能和吞吐量，具体取决于应用程序的性质以及执行的查询，则可以将数据库文件置于高级服务级别，并将日志存储在超服务级别。</block>
  <block id="51368a236b969e288242f0b0b615cf74" category="list-text">如果 tempdb 文件已放置在 Azure NetApp Files 上，则 Azure NetApp Files 卷应与用户数据库文件分隔开。下面是在 AOAG 中分发数据库文件的示例。</block>
  <block id="2e66f3d288799e6f4235b883bb2f693c" category="list-text">为了保留基于 Snapshot 副本的数据保护的优势， NetApp 建议不要将数据和日志数据组合到同一个卷中。</block>
  <block id="1452bcdb4aeb229a2c2e503f9bbba753" category="list-text">如果二级数据库的文件路径与相应主数据库的路径不同，则对主副本执行的添加文件操作可能会在二级数据库上失败。如果主节点和二级节点上的共享路径不同（由于计算机帐户不同），则可能会发生这种情况。此故障可能会暂停二级数据库的发生原因。如果无法预测增长或性能模式，并且计划稍后添加文件，则使用 Azure NetApp Files 的 SQL Server 故障转移集群是可接受的解决方案。对于大多数部署， Azure NetApp Files 均可满足性能要求。</block>
  <block id="19f59b74448f6a27519db281a44e4b12" category="section-title">migration</block>
  <block id="cd6b4503e07d15cebc0842bb8da7b765" category="paragraph">可以通过多种方法将内部 SQL Server 用户数据库迁移到 Azure 虚拟机中的 SQL Server 。迁移可以联机或脱机。选择的选项取决于组织内定义的 SQL Server 版本，业务要求和 SLA 。为了最大限度地减少数据库迁移过程中的停机时间， NetApp 建议使用 AlwaysOn 选项或事务复制选项。如果无法使用这些方法，您可以手动迁移数据库。</block>
  <block id="2d4221f1ee93c102ca047daac1fba4a7" category="paragraph">在计算机之间移动数据库时，最简单且经过最彻底测试的方法是备份和还原。通常，您可以先从数据库备份开始，然后再将数据库备份副本复制到 Azure 中。然后，您可以还原数据库。为了获得最佳数据传输性能，请使用压缩的备份文件将数据库文件迁移到 Azure 虚拟机。本文档中引用的高级设计采用 Azure 文件同步 Azure 文件存储的备份方法，然后还原到 Azure NetApp Files 。</block>
  <block id="623f8382f97ee8df2d7af54439833812" category="admonition">Azure Migrate 可用于发现，评估和迁移 SQL Server 工作负载。</block>
  <block id="fbc25f1c70f1a9c133715cac6d66b21b" category="paragraph">要执行迁移，请完成以下高级步骤：</block>
  <block id="d807caa187d2fea33bab50ed1e1c79bb" category="list-text">根据您的要求设置连接。</block>
  <block id="59f59f1aebe4fc18ab054480b3a1098a" category="list-text">将完整数据库备份到内部文件共享位置。</block>
  <block id="4891d727582d5df766ee6737fe7fb761" category="list-text">使用 Azure 文件同步将备份文件复制到 Azure 文件共享。</block>
  <block id="135899cc34886eb6ce9baf7211d4adb5" category="list-text">使用所需版本的 SQL Server 配置 VM 。</block>
  <block id="fbef0b11b7ee9e0d709d3d1c6efbd4d4" category="list-text">在命令提示符处使用 `copy` 命令将备份文件复制到虚拟机。</block>
  <block id="b9786aca69df61c5165147929b4ced89" category="list-text">将完整数据库还原到 Azure 虚拟机上的 SQL Server 。</block>
  <block id="e937691d64dcb1188cbbcbcd83d87d2f" category="admonition">要还原 21 个数据库，大约需要 9 小时。此方法是针对此情形的。但是，可以根据您的情况和要求使用下面列出的其他迁移技术。</block>
  <block id="2b9d85faa379ef985ae3851810db1403" category="paragraph">用于将数据从内部 SQL Server 移动到 Azure NetApp Files 的其他迁移选项包括：</block>
  <block id="90248308f9c24bd3bf817ee129838603" category="list-text">断开数据和日志文件，将其复制到 Azure Blob 存储，然后将其附加到 Azure 虚拟机中的 SQL Server ，并使用从 URL 挂载的 ANF 文件共享。</block>
  <block id="82ce70205698ed956d1fce48af1360c0" category="inline-link">添加 Azure 副本向导</block>
  <block id="e5e07f1ff84f0082089e4fec71ed43a4" category="list-text">如果您使用的是内部部署的始终可用性组，请使用<block ref="aea558e3371e9956f5e03828309464a0" category="inline-link-rx"></block> 在 Azure 中创建副本，然后执行故障转移。</block>
  <block id="eedc53c13a9992999dba36bda1b62255" category="inline-link">事务复制</block>
  <block id="47a43d904457c52da2918f290a0ae5cb" category="list-text">使用 SQL Server<block ref="21bf5f41b40b598aae9dd55aa9dcb960" category="inline-link-rx"></block> 要将 Azure SQL Server 实例配置为订阅者，请禁用复制并将用户指向 Azure 数据库实例。</block>
  <block id="bf4614882fd1000329cfcb76f98f6c17" category="list-text">使用 Windows 导入 / 导出服务运送硬盘。</block>
  <block id="be062cdcabbb3055334e8f19b4bdf378" category="section-title">备份和恢复</block>
  <block id="b855582b6472c4fbe2a5f606191e66d6" category="paragraph">备份和恢复是任何 SQL Server 部署的一个重要方面。必须具有适当的安全网，以便与 AOAG 等高可用性解决方案结合使用，从各种数据故障和丢失情形中快速恢复。可以使用 SQL Server 数据库静默工具， Azure 备份（流式）或任何第三方备份工具（例如 Commvault ）对数据库执行应用程序一致的备份，</block>
  <block id="3896e1102f68b0bc974f324bb134f6e6" category="inline-link">SCSQLAPI 工具</block>
  <block id="e372173044ccba12657b2e3dbff1879b" category="paragraph">借助 Azure NetApp Files Snapshot 技术，您可以轻松创建用户数据库的时间点（ PIT ）副本，而不会影响性能或网络利用率。通过此技术，您还可以使用还原卷功能将 Snapshot 副本还原到新卷，或者将受影响的卷快速还原到创建 Snapshot 副本时的状态。与 Azure 备份提供的流式备份不同， Azure NetApp Files 快照过程非常快速高效，可以进行多个每日备份。如果在给定日期内可以创建多个 Snapshot 副本，则 RPO 和 RTO 时间可以显著缩短。要添加应用程序一致性，以便在创建 Snapshot 副本之前数据完好无损并正确地转储到磁盘，请使用 SQL Server 数据库暂停工具 <block ref="b800e9e09a17fc5b41967404ec8e47ac" category="inline-link-rx"></block>；访问此链接需要 NetApp SSO 登录凭据）。此工具可从 PowerShell 中执行，此工具会暂停 SQL Server 数据库，进而生成应用程序一致的存储 Snapshot 副本进行备份。</block>
  <block id="04666a337d02195d17089298f5773f4c" category="paragraph">* 注： *</block>
  <block id="a4d5ac6087b7ce119cfe6b7ad4d77ee5" category="list-text">SCSQLAPI 工具仅支持 2016 和 2017 版本的 SQL Server 。</block>
  <block id="fdcb10d4c2db07cf930247a4f9898ec5" category="list-text">SCSQLAPI 工具一次只能使用一个数据库。</block>
  <block id="2f65ae42dc3aa8b735406a2d56ceb6fb" category="list-text">通过将文件放置在单独的 Azure NetApp Files 卷上，将其与每个数据库隔离。</block>
  <block id="879351e17b2cd6d740ac0974e9ff8a5a" category="inline-link">Azure 备份</block>
  <block id="794b24c8957eec03a1402459d32f6810" category="paragraph">由于 SCSQL API 的巨大限制，<block ref="10a72c6743c3c6714e03b5537ec15603" category="inline-link-rx"></block> 用于数据保护，以满足 SLA 要求。它可以为 Azure 虚拟机和 Azure NetApp Files 中运行的 SQL Server 提供基于流的备份。Azure Backup 支持 15 分钟的 RPO ，并可频繁进行日志备份和长达一秒的 PIT 恢复。</block>
  <block id="423e555c5ec3885f2bb5d9d2d6627f63" category="section-title">监控</block>
  <block id="fe58430a0bb00057a08eed382c5d82b2" category="paragraph">Azure NetApp Files 与 Azure 监控器集成，可提供时间序列数据，并提供有关已分配存储，实际存储使用情况，卷 IOPS ，吞吐量，磁盘读取字节 / 秒的指标。 磁盘写入字节 / 秒，磁盘读取 / 秒和磁盘写入 / 秒以及相关延迟。此数据可用于确定警报瓶颈，并执行运行状况检查，以验证 SQL Server 部署是否在最佳配置下运行。</block>
  <block id="48419e90c914ae5fa935283404de8a2a" category="paragraph">在此 HLD中 ， ScienceLogic 用于通过使用适当的服务主体公开指标来监控 Azure NetApp Files 。下图显示了 Azure NetApp Files Metric 选项的示例。</block>
  <block id="2bede5da6907dcdcebc6a8f407f07467" category="paragraph"><block ref="2bede5da6907dcdcebc6a8f407f07467" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6fe292df6373534e554d5a7938bc3c3b" category="section-title">使用厚克隆的 DevTest</block>
  <block id="652f67778e6d02c7b5bfe46a3e579f7f" category="paragraph">借助 Azure NetApp Files ，您可以创建即时数据库副本，以测试应用程序开发周期内应使用当前数据库结构和内容实施的功能，并在填充数据仓库时使用数据提取和操作工具。 或者甚至恢复错误删除或更改的数据。此过程不涉及从 Azure Blob 容器复制数据，因此效率非常高。还原卷后，可以将其用于读 / 写操作，从而显著缩短验证时间和上市时间。为了确保应用程序一致性，需要将此功能与 SCSQLAPI 结合使用。这种方法提供了另一种持续成本优化技术，同时 Azure NetApp Files 还利用了 " 还原到新卷 " 选项。</block>
  <block id="e4665dd99280634e4b44ff82666fbb9f" category="list-text">使用还原新卷选项从 Snapshot 副本创建的卷会占用容量池中的容量。</block>
  <block id="0031911d8ba66a79d06b9819afd4f082" category="list-text">您可以使用 REST 或 Azure 命令行界面删除克隆的卷，以避免额外成本（如果必须增加容量池）。</block>
  <block id="cb4d46fdcb0881652013c495d90ae732" category="section-title">混合存储选项</block>
  <block id="e6a1767911a937e11cc1750fcc4256c3" category="paragraph">虽然 NetApp 建议对 SQL Server 可用性组中的所有节点使用相同的存储，但在某些情况下，可以使用多个存储选项。在 Azure NetApp Files 中， AOAG 中的一个节点与 Azure NetApp Files SMB 文件共享连接，而第二个节点与 Azure 高级磁盘连接时，可能会出现这种情况。在这些情况下，请确保 Azure NetApp Files SMB 共享包含用户数据库的主副本，并且高级磁盘用作二级副本。</block>
  <block id="009d3d51226fdccd09052934b65100db" category="list-text">在这种部署中，为了避免任何故障转移问题，请确保在 SMB 卷上启用持续可用性。如果没有持续可用的属性，则在存储层进行任何后台维护时，数据库可能会失败。</block>
  <block id="918e9d895272e6a326c6585e05ae4c08" category="list-text">将数据库的主副本保留在 Azure NetApp Files SMB 文件共享上。</block>
  <block id="1a5c3601eda1cd38072323e418968743" category="section-title">业务连续性</block>
  <block id="064ea84d2e6072b28bfd7a8b36aed3db" category="paragraph">在任何部署中，灾难恢复通常都是事后考虑的。但是，必须在初始设计和部署阶段解决灾难恢复问题，以避免对您的业务造成任何影响。借助 Azure NetApp Files ，可以使用跨区域复制（ CRR ）功能将块级别的卷数据复制到配对区域，以处理任何意外的区域中断。启用了 CRR 的目标卷可用于读取操作，因此它是灾难恢复模拟的理想候选卷。此外，可以为 CRR 目标分配最低的服务级别（例如标准），以降低总 TCO 。发生故障转移时，复制可能会中断，从而使相应的卷具有读 / 写能力。此外，还可以使用动态服务级别功能更改卷的服务级别，从而显著降低灾难恢复成本。这是 Azure NetApp Files 在 Azure 中进行块复制的另一项独特功能。</block>
  <block id="86258094262f66b30d10068d1d9c29d4" category="section-title">长期 Snapshot 副本归档</block>
  <block id="65bd92a3b5fcfea7efeb973a0a2483d8" category="inline-link">AzCopy</block>
  <block id="e6bf440e9e7e787ce92e6f8661daf9e9" category="paragraph">许多组织都必须长期保留数据库文件中的快照数据，这是强制性合规性要求。虽然此 HLD" 不会使用此过程，但可以使用简单的批处理脚本轻松完成此过程<block ref="f326c7b047cd071718d141dba06c550f" category="inline-link-rx"></block> 将 Snapshot 目录复制到 Azure Blob 容器。可以使用已计划的任务根据特定计划触发批处理脚本。此过程非常简单，包括以下步骤：</block>
  <block id="dfdc6514d824f948d82ee2ac6515603f" category="list-text">下载 AzCopy V10 可执行文件。没有要安装的内容，因为它是一个 `exe` 文件。</block>
  <block id="5434519f37049a19d388fb3edabd08f7" category="list-text">在容器级别使用具有适当权限的 SAS 令牌来授权 AzCopy 。</block>
  <block id="73facdc1e77927e1c0d4c2f66c6fedf9" category="list-text">授权 AzCopy 后，数据传输开始。</block>
  <block id="a2c31034ac77c6ad0ce6dae2a7882d73" category="list-text">在批处理文件中，请确保转义 SAS 令牌中显示的 % 字符。为此，可以在 SAS 令牌字符串中的现有 % 字符旁边添加一个额外的 % 字符。</block>
  <block id="0eed577952fd376af1fa48aa241e3df7" category="inline-link">需要安全传输</block>
  <block id="b2f731ca364e7df30cd69650bdc19d46" category="list-text">。<block ref="7e9be5c7f255e20f7f3a81046108dcad" category="inline-link-rx"></block> 存储帐户的设置可确定与存储帐户的连接是否使用传输层安全（ Transport Layer Security ， TLS ）进行保护。默认情况下，此设置处于启用状态。以下批处理脚本示例以递归方式将数据从 Snapshot 副本目录复制到指定的 Blob 容器：</block>
  <block id="f2c225fb316953652d9040f71e76717c" category="paragraph">在 PowerShell 中执行以下示例 cmd ：</block>
  <block id="e7cc24e4ddff469c6304653aea869597" category="list-text">Azure NetApp Files 不久将提供类似的长期保留备份功能。</block>
  <block id="03930ecbc2c505278298d571631e23bb" category="list-text">在任何需要将数据复制到任何区域的 Blob 容器的情况下，均可使用此批处理脚本。</block>
  <block id="a39ae09f8be4327fc176cfeb76a0e366" category="section-title">成本优化</block>
  <block id="07ecdeff0f5a70968e882eb4ace6f576" category="paragraph">随着对数据库完全透明的卷重新调整和动态服务级别更改， Azure NetApp Files 可以在 Azure 中实现持续成本优化。此 HLDC 广泛使用此功能，以避免过度配置额外存储来处理工作负载高峰。</block>
  <block id="bf511e8b678dd2ecee162930e6c8c9e6" category="paragraph">通过结合 Azure 警报日志创建 Azure 功能，可以轻松调整卷大小。</block>
  <block id="13d13fda6fbfbd83ab30f9a5bee17b08" category="section-title">在 NFS 上自动部署适用于 ONTAP 的 Oracle19c</block>
  <block id="9ce6d30135c2644ff34390c65af4061b" category="paragraph">企业正在对其环境进行自动化，以提高效率，加快部署速度并减少手动操作。Ansible 等配置管理工具正在用于简化企业数据库操作。在此解决方案中，我们将演示如何使用 Ansible 通过 NetApp ONTAP 自动配置和配置 Oracle 19c 。通过使存储管理员，系统管理员和 DBA 能够一致快速地部署新存储，配置数据库服务器并安装 Oracle 19c 软件，您可以获得以下优势：</block>
  <block id="5291cb8e681983247b899ce2364188f2" category="list-text">消除设计复杂性和人为错误，并实施可重复的一致部署和最佳实践</block>
  <block id="a90516bf4597e04e1a97bd9cb37087d8" category="list-text">缩短配置存储，配置数据库主机和安装 Oracle 的时间</block>
  <block id="a54e59b6b063d8a2bf18acffab877d09" category="list-text">提高数据库管理员，系统和存储管理员的工作效率</block>
  <block id="d18d76441366273feb36bde890ad5e1c" category="list-text">轻松扩展存储和数据库</block>
  <block id="7d85c5a5f016aefeda6b89687f1307bb" category="paragraph">NetApp 为客户提供经过验证的 Ansible 模块和角色，以加快 Oracle 数据库环境的部署，配置和生命周期管理。此解决方案提供了相关说明和 Ansible 攻略手册代码，可帮助您：</block>
  <block id="547b893b7cd300d6a8335f5b179ad12e" category="list-text">为 Oracle 数据库创建和配置 ONTAP NFS 存储</block>
  <block id="36bb01ec9f02292fb44b9f10f57ceae7" category="list-text">在 RedHat Enterprise Linux 7/8 或 Oracle Linux 7/8 上安装 Oracle 19c</block>
  <block id="548bf87c41c9d3bb76981decbd599c90" category="list-text">在 ONTAP NFS 存储上配置 Oracle 19c</block>
  <block id="950496934d91d07bb089d6ed0999b5a9" category="paragraph">有关更多详细信息或要开始，请参见下面的概述视频。</block>
  <block id="b923f56ad2a53fa1a3ca1160e48f141e" category="section-title">AWX/ 塔式部署</block>
  <block id="ab81e47672e89830ec16c581f44cb23c" category="list-text">第 1 部分：入门，要求，自动化详细信息和初始 AWX/ 塔式配置</block>
  <block id="cf7bbd18f18fdc73ee49ffea888126c7" category="list-text">第 2 部分：变量和运行攻略手册</block>
  <block id="f5e227cfa54c5693c512c6adf41a3772" category="section-title">CLI 部署</block>
  <block id="0b8a09b5974336d1f5e510d18205c03c" category="list-text">第 1 部分：入门，要求，自动化详细信息和可变控制主机设置</block>
  <block id="93cba07454f06a4a960172bbd6e2a435" category="cell">是的。</block>
  <block id="bafd7322c6e97d25b6299b5d6fe8920b" category="cell">否</block>
  <block id="0dd197c8abd1f3c3607887dbc615148f" category="doc">验证 Oracle 安装</block>
  <block id="f673434da0f39c1b4366cbc45f67da8a" category="admonition">如果安装按预期完成且 Oracle 数据库已启动，则此列表将列出 Oracle 进程</block>
  <block id="91bcd024d07cb33293902b287b0cc68c" category="paragraph">[Oracle@localhost ~ ]$ sqlplus / 作为 sysdba</block>
  <block id="b95bce10ef504692a6d971d3a30ac8c4" category="paragraph">SQL* Plus ：版本 19.0.0.0.0 —在 5 月 6 日星期四 12 ： 52 ： 51 2021 年版本 19.8.0.0.0 上生产</block>
  <block id="a2494ba30f29d91ff6876152fc693ab3" category="paragraph">版权所有（ c ） 1982-2019 ， Oracle 。保留所有权利。</block>
  <block id="ce8b3f5af3f95d98bbbf478e4c37024f" category="paragraph">已连接到： Oracle Database 19c Enterprise Edition 版本 19.0.0.0.0 - 生产版本 19.8.0.0.0</block>
  <block id="28a359e505158300600d776ae9347cac" category="paragraph">SQL/</block>
  <block id="63102463594ac5bd274343651065779d" category="paragraph">sql &gt; 从 v$database 中选择名称 log_mode ；名称 log_mode --- ------- CDB2 归档日志</block>
  <block id="7d8bf5a6b847068ff3c0eb0ca0892acf" category="paragraph">sql &gt; 显示 PDF</block>
  <block id="33c7676f0bdcf42bed62c146feaf485c" category="paragraph">sql &gt; col svrname form A30 sql &gt; col dirname form A30 sql &gt; 从 v$dnfs_servers 中选择 svrname ， dirname ， nfsversion ；</block>
  <block id="d6bee2dc52f5708cd8af49c1c263c714" category="paragraph">SVRname 名称 NFSVERSION ----------- ----------------- --------- 172.21.126.200 /rhelora03_u02 NFSv3.0 172.21.126.200 /rhelora03_u03 NFSv3.0 172.21.126.200 /rhelora03_u01 NFSv3.0</block>
  <block id="ea12870da72347cdd45bc11ae4d603dc" category="paragraph">[Oracle@localhost ~ ]$ sqlplus 系统@ //localhost ： 1523/ cdb2_pdb1.cie.netapp.com</block>
  <block id="aff680efe40afd832819af131e324051" category="paragraph">SQL* Plus ：版本 19.0.0.0.0 — 5 月 6 日星期四 13 ： 19 ： 57 2021 年版本 19.8.0.0.0</block>
  <block id="6c3d252188792733323cf879b5d196cf" category="paragraph">输入密码：上次成功登录时间： Wed ， 2021 年 5 月 5 日 17 ： 11 ： 11 -04 ： 00</block>
  <block id="531fea2bb939d7c35cad66fde1640511" category="paragraph">sql &gt; show user user is "system" sql &gt; show con_name con_name CDB2_PDB1</block>
  <block id="52320018ddc230fda7bdeccfda8b9f0a" category="section-title">如何获取帮助？</block>
  <block id="1b6a5f8b328d3175066895d7ff5ea576" category="inline-link-macro">NetApp 解决方案自动化社区支持 Slack 通道</block>
  <block id="12f178498803c606c23e7166dcefb0cb" category="paragraph">如果您需要有关该工具包的帮助，请加入 <block ref="f1bb21e2ce6888d898ae31a2098245a1" category="inline-link-macro-rx"></block> 并寻找解决方案自动化渠道来发布您的问题或询问。</block>
  <block id="75b7d47e2aa19968e092ab7ddb108a3f" category="summary">无论您是针对采用延伸型数据库的全云云还是混合云， Azure NetApp Files 都可以提供出色的选项来部署和管理数据库工作负载，同时通过将数据需求无缝迁移到应用程序层来降低 TCO 。</block>
  <block id="d8d2e6021f496c4e4a31a3d5d51c0a97" category="paragraph">本文档介绍了有关使用 Azure NetApp Files 规划，设计，优化和扩展 Microsoft SQL Server 部署的建议，这些建议可能因实施方式而异。正确的解决方案取决于实施的技术细节以及推动项目的业务需求。</block>
  <block id="56925354251a536c23de1174d3001595" category="section-title">要点总结</block>
  <block id="033e6e43f2148e187e072dc7e6585802" category="paragraph">本文档的要点包括：</block>
  <block id="b2b363e230905b04f6e9c7263aa93f42" category="list-text">现在，您可以使用 Azure NetApp Files 托管 SQL Server 集群的数据库和文件共享见证。</block>
  <block id="4d6ec76303888bc681d543d1f4593c55" category="list-text">您可以缩短应用程序响应时间并提供 99.9999% 的可用性，以便在需要时随时随地访问 SQL Server 数据。</block>
  <block id="408e4b7fbec4ba85e097b9393d2b27a7" category="list-text">您可以简化 SQL Server 部署和持续管理（例如 RAID 条带化）的整体复杂性，并即时调整大小。</block>
  <block id="41642b38214243168d907d92759dde36" category="list-text">您可以借助智能操作功能在几分钟内部署 SQL Server 数据库，并加快开发周期。</block>
  <block id="61a32d891a5f7bca599a014bc56eec61" category="list-text">如果 Azure Cloud 是目标，则 Azure NetApp Files 是最适合优化部署的存储解决方案。</block>
  <block id="d0db3f5a4a306cff20be4187b3ef3445" category="doc">VAR</block>
  <block id="fd18465573ec21a6218982055981f6b1" category="section-title">存储效率</block>
  <block id="6e8775bd755a8835ce86806d669677ea" category="section-title">存储配置</block>
  <block id="c20ad4d76fe97759aa27a0c99bff6710" category="cell">12</block>
  <block id="5b12ee0369243579651edca43ff65c85" category="cell">NFSv3</block>
  <block id="de841868c2911da76b8ae2da9fa3166d" category="cell">NFSv4.1</block>
  <block id="4db58285a0e634acd6843c40f7a6f4e0" category="paragraph">要了解有关本文档中所述信息的更多信息，请访问以下网站链接：</block>
  <block id="d53a72004974ee8431ee292856c0bba3" category="list-text">使用 Azure NetApp Files 的解决方案架构</block>
  <block id="653ba0610595f0695c3ceb2c59afed59" category="inline-link"><block ref="653ba0610595f0695c3ceb2c59afed59" category="inline-link-rx"></block></block>
  <block id="d5ec9321fb49816034de6b296ef6baa2" category="paragraph"><block ref="d5ec9321fb49816034de6b296ef6baa2" category="inline-link-rx"></block></block>
  <block id="ba110408cece764b57b56f1129b3ba2e" category="list-text">使用 Azure NetApp Files for SQL Server 部署的优势</block>
  <block id="62b5dbc436fc2540c46476bd8e484c11" category="inline-link"><block ref="62b5dbc436fc2540c46476bd8e484c11" category="inline-link-rx"></block></block>
  <block id="44594562b4f528fe8d864bd3f48ddff6" category="paragraph"><block ref="44594562b4f528fe8d864bd3f48ddff6" category="inline-link-rx"></block></block>
  <block id="7aa91f5f0414f1488ce2f5324e63d12e" category="list-text">《使用 Azure NetApp Files 的 Azure 上的 SQL Server 部署指南》</block>
  <block id="9021ea474df74856b145a78c58c35e05" category="inline-link"><block ref="9021ea474df74856b145a78c58c35e05" category="inline-link-rx"></block></block>
  <block id="52a5313d9aca117b5d167e6be79c5bc7" category="paragraph"><block ref="52a5313d9aca117b5d167e6be79c5bc7" category="inline-link-rx"></block></block>
  <block id="49217b0d4a68c88899c93d24203a34b4" category="list-text">借助 Azure NetApp Files 实现容错，高可用性和故障恢复能力</block>
  <block id="9e5e063336d276080a054861016aadd8" category="inline-link"><block ref="9e5e063336d276080a054861016aadd8" category="inline-link-rx"></block></block>
  <block id="7ff89d0ad939652d37cbab9b6f420f65" category="paragraph"><block ref="7ff89d0ad939652d37cbab9b6f420f65" category="inline-link-rx"></block></block>
  <block id="05807e454c19f244770adae059b3c330" category="section-title">高可用性</block>
  <block id="6551468cb4811e7add616eea103efea9" category="doc">分步部署操作步骤</block>
  <block id="0e6b1c16527d2792d391c578bbf12efe" category="section-title">CLI 部署 Oracle 19c 数据库</block>
  <block id="57daddd847cdbab22b7363630de48a2f" category="inline-link-macro">入门和要求部分</block>
  <block id="82ba94e85d91493ea6c88423c0b34605" category="paragraph">本节介绍使用 CLI 准备和部署 Oracle19c 数据库所需的步骤。确保您已查看 <block ref="598ea103507880273a5a1840cac102d8" category="inline-link-macro-rx"></block> 并相应地准备好您的环境。</block>
  <block id="0f2d7675188dbfc7b9df587588bff71b" category="section-title">下载 Oracle19c repo</block>
  <block id="4e2b619426350db7e7d5b09c96b8010b" category="section-title">编辑 hosts 文件</block>
  <block id="b183e47af1fa85c93e4a4368205c3249" category="paragraph">在部署之前完成以下操作：</block>
  <block id="c4ab1530ffd8a3306d47c804ca88240c" category="list-text">编辑 hosts 文件 na_oracle19c_deploy 目录。</block>
  <block id="bc1dd0e50a3c20e78cc2d680eaf32378" category="list-text">在 ONTAP 下，将 IP 地址更改为集群管理 IP 。</block>
  <block id="6475f51ce7ff0a21a5635ea50b1f1a86" category="list-text">在 Oracle 组下，添加 Oracle 主机名称。主机名必须通过 DNS 或 hosts 文件解析为其 IP 地址，或者必须在主机中指定。</block>
  <block id="5c3f5e9dc815ca28c7cf1ff64cdc61a2" category="list-text">完成这些步骤后，请保存所做的任何更改。</block>
  <block id="b27994a7bba852ac9a8f1a262413e68b" category="paragraph">以下示例说明了一个主机文件：</block>
  <block id="1caa2eee0ed6a6c5c6edcbc0320e8671" category="paragraph">此示例将执行该攻略手册，并在两个 Oracle DB 服务器上同时部署 Oracle 19c 。您也可以仅使用一个数据库服务器进行测试。在这种情况下，您只需要配置一个主机变量文件。</block>
  <block id="d11927d6f93a4edaa78dc52c6e34fd5f" category="admonition">无论您部署多少 Oracle 主机和数据库，本攻略手册的执行方式都是相同的。</block>
  <block id="030c98564d5fbd7c8672a76e2a593b21" category="section-title">编辑 host_vars 下的 host_name.yml 文件</block>
  <block id="86c40bb4891f3e6b34a2eece7bb19532" category="paragraph">每个 Oracle 主机都有其主机变量文件，该文件由包含主机专用变量的主机名标识。您可以为主机指定任何名称。从 Host VARS Config 部分编辑并复制 `host_vars` ，然后将其粘贴到所需的 `host_name.yml` 文件中。</block>
  <block id="93be2ec6954884b83ac9df8117967949" category="admonition">必须根据您的环境更改蓝色项。</block>
  <block id="5bbe8264b4d6c6787657c66d4017c183" category="section-title">主机 VARS 配置</block>
  <block id="44505c1007599884b05c0148599ad1b0" category="section-title">编辑 vars.yml 文件</block>
  <block id="41cdd95196e2753968e0d69375c41825" category="paragraph">`vars.yml` 文件整合了所有环境特定的变量（ ONTAP ， Linux 或 Oracle ），用于 Oracle 部署。</block>
  <block id="271f9ccf9c8189bb1888d25c7f0e025b" category="list-text">编辑并复制 VARS 部分中的变量，然后将这些变量粘贴到 `vars.yml` 文件中。</block>
  <block id="78d77851709e21512097cee585c59d0c" category="section-title">运行攻略手册</block>
  <block id="8f42d9f703ada5b4f1374ca96a4f1cec" category="paragraph">完成所需的环境前提条件并将变量复制到 `vars.yml` 和 `yor_host.yml` 中后，您便可部署攻略手册了。</block>
  <block id="6226590ec5d4a109e4b93317425994c1" category="admonition">必须根据您的环境更改 &lt; 用户名 &gt; 。</block>
  <block id="24b2767982b51deb19947fb3e94279c6" category="section-title">在同一 Oracle 主机上部署其他数据库</block>
  <block id="5cc75d1029461de7ddcd02bbc784af26" category="paragraph">此攻略手册的 Oracle 部分会每次在 Oracle 服务器上创建一个 Oracle 容器数据库。要在同一服务器上创建其他容器数据库，请完成以下步骤：</block>
  <block id="b4a35a2d5c3a4f3efb7c77f6bcd2a905" category="list-text">修改 host_vars 变量。</block>
  <block id="5641cb71d4e10abef15918c2dd828917" category="list-text">返回到步骤 3 - 编辑 `host_vars` 下的 `host_name.yml` 文件。</block>
  <block id="ffcc6e6df9c3839334c063a9223c65b3" category="list-text">将 Oracle SID 更改为其他命名字符串。</block>
  <block id="a936a5fabc881eb3591658385409dfb8" category="list-text">将侦听器端口更改为其他编号。</block>
  <block id="24f0029973c35b16fc49847b27215915" category="list-text">如果已安装 EM Express ，请将 EM Express 端口更改为其他编号。</block>
  <block id="365c64de6adc281d7f484029d1356855" category="list-text">将修订后的主机变量复制并粘贴到 `host_vars` 下的 Oracle 主机变量文件中。</block>
  <block id="b64219fd8290ac8a154f733df0825dbb" category="list-text">使用 `ORACLE_CONFIG` 标记执行攻略手册，如中所示 <block ref="1c892654e23ff69bf71caefc702aa8b4" category="inline-xref-macro-rx"></block>。</block>
  <block id="c150393fd3b1bd9d801cbd062234f73d" category="section-title">AWX/Tower 部署 Oracle 19c 数据库</block>
  <block id="32003b051ef9368756d1e9cd79796719" category="section-title">1. 为您的环境创建清单，组，主机和凭据</block>
  <block id="2c8b94d570dd5a63a27d112e32a1c799" category="paragraph">本节介绍如何在 AWX/Ansible 塔中设置清单，组，主机和访问凭据，以便为使用 NetApp 自动化解决方案的环境做好准备。</block>
  <block id="134d501fee5367069f0746f15302ce1f" category="list-text">配置清单。</block>
  <block id="af2c7dd4ecef5e42e9bc8f88213d51d9" category="list-text">导航到资源→清单→添加，然后单击添加清单。</block>
  <block id="56fc26ef1c8ae54dced3529eec65fa26" category="list-text">提供名称和组织详细信息，然后单击保存。</block>
  <block id="fe0981da08a8d2f4fed2006bafd9fb30" category="list-text">在清单页面上，单击已创建的清单。</block>
  <block id="3fa16e80574aff03c27de1253474a20f" category="list-text">如果存在任何清单变量，请将其粘贴到变量字段中。</block>
  <block id="65d119ae335d9e7c9c798b3e6db1b2d0" category="list-text">导航到组子菜单，然后单击添加。</block>
  <block id="396641e01a7451ca821b5d7d1377b0c7" category="list-text">提供 ONTAP 的组名称，粘贴组变量（如果有），然后单击保存。</block>
  <block id="a4f13b6e4100f2d5db093eb54a3ffe0c" category="list-text">对 Oracle 的另一个组重复此过程。</block>
  <block id="6f29f21d5f3e40494291fb357b9f4f73" category="list-text">选择已创建的 ONTAP 组，转到主机子菜单，然后单击添加新主机。</block>
  <block id="8d92ffd9d0d2b033d05731ec4af50af8" category="list-text">提供 ONTAP 集群管理 IP 的 IP 地址，粘贴主机变量（如果有），然后单击保存。</block>
  <block id="f1254ecbe57ff98d850d541b8a1ab988" category="list-text">必须对 Oracle 组和 Oracle 主机管理 IP/ 主机名重复此过程。</block>
  <block id="f11c5853bdca384314b28c9c59f2d6d0" category="list-text">创建凭据类型。对于涉及 ONTAP 的解决方案，您必须配置凭据类型以匹配用户名和密码条目。</block>
  <block id="c87e3da0a9f8d5eeacea4eac9bef80ea" category="list-text">导航到管理→凭据类型，然后单击添加。</block>
  <block id="e6bf632438290fdf98265b2b18943118" category="list-text">提供名称和问题描述。</block>
  <block id="5f5a0974b600f86bd4e77595282fcf70" category="list-text">将以下内容粘贴到输入配置中：</block>
  <block id="1616edbabbc3bbfd22afe144d1929386" category="list-text">将以下内容粘贴到注射器配置中：</block>
  <block id="c4053f20c3fe50fe899484a64367439e" category="list-text">配置凭据。</block>
  <block id="41dcc8a8aaaa79a511ba0ab4e6bde225" category="list-text">导航到资源→凭据，然后单击添加。</block>
  <block id="cc865c923bcb1c61acf9985311675b93" category="list-text">输入 ONTAP 的名称和组织详细信息。</block>
  <block id="ea314f484653e7f9f25144ea61d34888" category="list-text">选择为 ONTAP 创建的自定义凭据类型。</block>
  <block id="179cae6336461d9f165e8fa87146362a" category="list-text">在 Type Details 下，输入用户名，密码和 vsadmin_password 。</block>
  <block id="659fb4c811f1a73cf40492056e6d3c3f" category="list-text">单击 Back to Credential ，然后单击 Add 。</block>
  <block id="3b9c90c4bf202563a3cdeda5ec78fac2" category="list-text">输入 Oracle 的名称和组织详细信息。</block>
  <block id="9ef3fcc446a5f500717f9b5e9291bce4" category="list-text">选择计算机凭据类型。</block>
  <block id="9fadc5c4eed350a8a1423628227dad59" category="list-text">在 Type Details 下，输入 Oracle 主机的 Username 和 Password 。</block>
  <block id="b4ca3125325138b1dbfc309e6bd67b80" category="list-text">选择正确的权限升级方法，然后输入用户名和密码。</block>
  <block id="51b04d83367483575e89740841d94262" category="section-title">2. 创建项目</block>
  <block id="e56fa1e2655db1bc7664a00295bd62a2" category="list-text">转至 "Resources" → "projects" ，然后单击 "Add" 。</block>
  <block id="9c78f8d8687776e79018ded982e14c25" category="list-text">输入名称和组织详细信息。</block>
  <block id="4096a1870a258e9d46585f08d4906f21" category="list-text">在源控制凭据类型字段中选择 Git 。</block>
  <block id="784148c4a03cf22250dddc5756684e39" category="list-text">输入 ... <block ref="4509731a8f0f86cf7d8a010739dfd7c5" category="inline-link-rx"></block> 作为源控制 URL 。</block>
  <block id="7557bd62e953fb4d48f07977151ea94f" category="list-text">单击保存。</block>
  <block id="99bc2ea435ea8ae0ed38ef3051a4350a" category="list-text">当源代码发生更改时，项目可能偶尔需要同步。</block>
  <block id="14e017f358e18dd612a468713206093f" category="section-title">3. 配置 Oracle host_vars</block>
  <block id="05557c38b20e42173356b53f42c92152" category="paragraph">本节中定义的变量将应用于每个 Oracle 服务器和数据库。</block>
  <block id="ac886b852fd1b481e9c7e68c217b5e21" category="list-text">以以下嵌入式 Oracle hosts 变量或 host_vars 形式输入环境特定的参数。</block>
  <block id="e1847b1a99378b07a0df71cf2baac5da" category="list-text">填写蓝色字段中的所有变量。</block>
  <block id="741c92ab2429ff59927918c7a07ad9a5" category="list-text">完成变量输入后，单击表单上的复制按钮以复制要传输到 AWX 或塔式的所有变量。</block>
  <block id="1e1ea51549ac2a644a3e965113c1d370" category="list-text">导航回 AWX 或塔式，然后转到资源→主机，选择并打开 Oracle 服务器配置页面。</block>
  <block id="0d630b14098a793ac4586173286d0805" category="list-text">在详细信息选项卡下，单击编辑并将从步骤 1 复制的变量粘贴到 YAML 选项卡下的变量字段。</block>
  <block id="c6dca9e669d097298fc6059b27f96e09" category="list-text">对系统中的任何其他 Oracle 服务器重复此过程。</block>
  <block id="7890327bd98d1ec932e453254511754d" category="section-title">4. 配置全局变量</block>
  <block id="e5cac740ce6bd43e6ff83881e150d0f3" category="paragraph">本节中定义的变量适用于所有 Oracle 主机，数据库和 ONTAP 集群。</block>
  <block id="87b55102ec2889891b0258253b739244" category="list-text">在以下嵌入式全局变量或变量表单中输入环境特定的参数。</block>
  <block id="7d2a3c2ad9ee2eeb7547d205d30b9335" category="list-text">在蓝色字段中填写所有变量。</block>
  <block id="099f04b51539ed973890f1d1af2d5063" category="list-text">完成变量输入后，单击表单上的复制按钮，将要传输到 AWX 或塔式的所有变量复制到以下作业模板中。</block>
  <block id="c807b1735c1915c52547b9f7e917b55d" category="section-title">5. 配置并启动作业模板。</block>
  <block id="b1171f0b44b8d9b11ac555972ebc8c3b" category="list-text">创建作业模板。</block>
  <block id="0fd181172a82ebe5219e9a30e5d97c0d" category="list-text">导航到资源→模板→添加，然后单击添加作业模板。</block>
  <block id="c7fa74fb4cbaab9d336a8e55bf164684" category="list-text">输入名称和问题描述</block>
  <block id="3dcca032e3328f54206079a87830aa27" category="list-text">选择作业类型；运行将根据攻略手册配置系统，而检查将在不实际配置系统的情况下执行攻略手册的试运行。</block>
  <block id="daefcb84cec2b58089094a64cefb845f" category="list-text">为攻略手册选择相应的清单，项目，攻略手册和凭据。</block>
  <block id="b01c6189ccdc531874f3442803680525" category="list-text">选择 all_playbook.yml 作为要执行的默认攻略手册。</block>
  <block id="ce150ce9cfe145db199958e7cd2ecce0" category="list-text">将从步骤 4 复制的全局变量粘贴到 YAML 选项卡下的模板变量字段中。</block>
  <block id="e8f0426d97d09775fb78bdeb793b0b3e" category="list-text">选中作业标记字段中的启动时提示框。</block>
  <block id="31e2568c13fbdaaad088eb3b665dea9d" category="list-text">启动作业模板。</block>
  <block id="3624b34cb634949984bcb28c79fd327f" category="list-text">导航到资源→模板。</block>
  <block id="56ae7378358ba2b1c55c47283f544991" category="list-text">单击所需模板，然后单击启动。</block>
  <block id="ad7ad1bbc416fda1f9518ff4004d891c" category="list-text">在启动作业标记时系统提示时，键入 requirements_config 。您可能需要单击 requirements_config 下方的 Create Job Tag 行以输入作业标记。</block>
  <block id="b9ef793a3db3f07ed7dc808f4709c6ca" category="admonition">requirements_config 可确保您有正确的库来运行其他角色。</block>
  <block id="6ac039e55dcf8a249f5122b1fdbbf60e" category="list-text">单击下一步，然后单击启动以启动作业。</block>
  <block id="06f392c8dfb4783859e67f16fed69bc7" category="list-text">单击查看→作业以监控作业输出和进度。</block>
  <block id="7f6a02c24592bd309f31b5a72a0f8d6d" category="list-text">在启动作业标记时，系统提示您键入 ontap_config 。您可能需要单击 ontap_config 下方的 Create "Job Tag （创建作业标记） " 行以输入作业标记。</block>
  <block id="18c003af9ed29d295877baabf7b42ce1" category="list-text">单击查看→作业以监控作业输出和进度</block>
  <block id="c0029d5cdcaae1ceef3bed244b3ab3c6" category="list-text">完成 ontap_config 角色后，对 linux_config 再次运行此过程。</block>
  <block id="fc71758268fe1c3aba4b75df3ee0560f" category="list-text">选择所需模板，然后单击启动。</block>
  <block id="bbe073bafc2875db8b48e59284636931" category="list-text">在 Linux_config 中启动作业标记类型时，系统提示您选择 Linux_config 下方的创建 " 作业标记 " 行以输入作业标记。</block>
  <block id="bc43b7acafead2cdee67de733ae10b13" category="list-text">选择 View → Jobs 以监控作业输出和进度。</block>
  <block id="e73718535637e07111f6a4925685c0bd" category="list-text">完成 Linux_config 角色后，对 ORACLE_CONFIG 再次运行此过程。</block>
  <block id="574f8726a5cc088da32ab84269c8e0f8" category="list-text">转至资源→模板。</block>
  <block id="252b85bc679cb8ecdccbcd127c65b795" category="list-text">在启动作业标记时，系统提示您键入 ORACLE_CONFIG 。您可能需要选择 ORACLE_CONFIG 下方的 "Create Job Tag （创建作业标记） " 行以输入作业标记。</block>
  <block id="6757805f64ddba2566927ece0d9f30e1" category="section-title">6. 在同一 Oracle 主机上部署其他数据库</block>
  <block id="4edc1d4492ab93edbbb0a67c0c265b84" category="paragraph">此攻略手册的 Oracle 部分会每次在 Oracle 服务器上创建一个 Oracle 容器数据库。要在同一服务器上创建其他容器数据库，请完成以下步骤。</block>
  <block id="a12a0fa7fe728658376da87df04fa7c2" category="list-text">修改 host_vars 变量。</block>
  <block id="ba52bf2d165115d60675d61a4b84b0c6" category="list-text">返回到步骤 2 —配置 Oracle host_vars 。</block>
  <block id="d9fa63a6f267402d4cf6068165e04a38" category="list-text">如果要安装 EM Express ，请将 EM Express 端口更改为其他编号。</block>
  <block id="23f5c9b4f57b3075f9890f1bc1896ebe" category="list-text">将修订后的主机变量复制并粘贴到主机配置详细信息选项卡中的 Oracle 主机变量字段中。</block>
  <block id="4d4426a703dd8227727fef5758b680d8" category="list-text">启动仅包含 ORACLE_CONFIG 标记的部署作业模板。</block>
  <block id="0b79795d3efc95b9976c7c5b933afce2" category="section-title">简介</block>
  <block id="a2810b66f557bf43f1c602ecfe7f52b1" category="summary">本文档介绍如何利用 Azure 虚拟机在 Azure NetApp Files 上实时部署 SQL Server 始终可用性组（ AOAG ）。</block>
  <block id="0ecccb1d48727b6da357728efe7b6375" category="doc">TR-4897 ： Azure NetApp Files 上的 SQL Server — Real Deployment 视图</block>
  <block id="4eae423bbc6520b4a8fa4d0d4de28b8a" category="paragraph">NetApp 公司 Niyaz Mohamed</block>
  <block id="8ae2b9aab28b6c00df7581f99f9211ef" category="paragraph">IT 组织面临着不断变化的问题。据 Gartner 报告，到 2022 年，所有数据库中有近 75% 的数据库将需要基于云的存储。作为领先的关系数据库管理系统（ Relational Database Management System ， RDBMS ）， Microsoft SQL Server 是 Windows 平台设计的应用程序和组织的首选，这些应用程序和组织依靠 SQL Server 来实现从企业资源规划（ Enterprise Resource Planning ， ERP ）到分析再到内容管理的所有功能。SQL Server 帮助企业彻底改变了管理海量数据集的方式，并为其应用程序提供支持，以满足架构和查询性能需求。</block>
  <block id="eae371fd2d593d80849fab02c4e8b90b" category="paragraph">大多数 IT 组织都采用云优先的方法。处于转型阶段的客户会评估其当前的 IT 环境，然后根据评估和发现练习将其数据库工作负载迁移到云。促使客户迁移到云的一些因素包括弹性 / 突发，数据中心退出，数据中心整合，寿命终结情形，合并， 采集等。迁移的原因可能因组织及其各自的业务优先级而异。迁移到云时，要充分发挥 SQL Server 数据库云部署的潜能，选择合适的云存储非常重要。</block>
  <block id="f9468c81b3d59ac0030570c4f58e95f1" category="section-title">用例</block>
  <block id="cf8b0bda1e058c1f8383f434c4da9b71" category="paragraph">将 SQL Server 资产迁移到 Azure ，并将 SQL Server 与 Azure Data Factory ， Azure IoT Hub 和 Azure Machine Learning 等 Azure 的大量平台即服务（ Platform-as-a-Service ， PaaS ）功能相集成，为支持数字化转型创造了巨大的业务价值。与依赖资本支出模式或传统私有云模式相比，采用云还可以使相应的业务部门专注于工作效率并更快地交付新功能和增强功能（ DevTest 用例）。本文档介绍如何利用 Azure 虚拟机在 Azure NetApp Files 上实时部署 SQL Server 始终可用性组（ AOAG ）。</block>
  <block id="239a02aaaf9289a3093f682835f65f88" category="paragraph">Azure NetApp Files 提供具有持续可用文件共享的企业级存储。SMB 文件共享上的 SQL Server 生产数据库需要持续可用的共享，以确保节点始终能够访问数据库存储，包括在控制器升级或故障等中断情形下。持续可用的文件共享不再需要在存储节点之间复制数据。Azure NetApp Files 使用 SMB 3.0 横向扩展，持久句柄和透明故障转移来支持在发生计划内和计划外停机事件（包括许多管理任务）时执行无中断操作（ NDO ）。</block>
  <block id="f47a858d79de9725a0d6881541748e9b" category="paragraph">在规划云迁移时，您应始终评估最佳使用方法。应用程序迁移最常见且最简单的方法是重新托管（也称为提升和移动）。本文档中提供的示例方案使用重新托管方法。使用采用 Azure NetApp Files 的 Azure 虚拟机上的 SQL Server ，您可以在云中使用完整版本的 SQL Server ，而无需管理内部硬件。SQL Server 虚拟机（ VM ）还可以在按需购买的情况下简化许可成本，并为开发，测试和资产更新情形提供弹性和突发功能。</block>
  <block id="64899c745691f41e5b1dc01d3a4487d2" category="summary">本节介绍在云中使用 Azure NetApp Files 和 SQL Server 时应考虑的不同问题。</block>
  <block id="bb4695a70b92668f0a7927d04580db60" category="doc">需要考虑的因素</block>
  <block id="4dd91c7652639dacea041fe6033e2627" category="section-title">虚拟机性能</block>
  <block id="e6ac657ee6eac68b739c5cc437863922" category="inline-link">内存优化</block>
  <block id="68e5d4a238cdfe033afa141123484499" category="paragraph">选择合适的 VM 大小对于公有云中关系数据库的最佳性能非常重要。Microsoft 建议您继续使用适用于内部服务器环境中 SQL Server 的相同数据库性能调整选项。使用 ...<block ref="187f54af8632f4f6696d6052e8b74aec" category="inline-link-rx"></block> VM 大小可实现 SQL Server 工作负载的最佳性能。收集现有部署的性能数据，以确定 RAM 和 CPU 利用率，同时选择合适的实例。大多数部署可选择 D ， E 或 M 系列。</block>
  <block id="8b2db846b8ed65b2919d93a68b819a43" category="list-text">要获得最佳的 SQL Server 工作负载性能，请使用内存优化的 VM 大小。</block>
  <block id="32a3b4d7b7e6cf1ecde48636119e0288" category="list-text">NetApp 和 Microsoft 建议您先确定存储性能要求，然后再选择具有适当内存到 VCORE 比率的实例类型。这还有助于选择具有适当网络带宽的较低实例类型，以克服 VM 的存储吞吐量限制。</block>
  <block id="0abdff1d9e33eca61c14ccafe8012cd5" category="section-title">VM 冗余</block>
  <block id="9fecd525b2d9ad39ac38bbfc4d05ee17" category="inline-link">可用性集</block>
  <block id="26075dbb6cfad683e0d9bd0d29c570b8" category="inline-link">可用性区域</block>
  <block id="e936e004eab3eccfc1e7f46a3187dfd1" category="paragraph">要提高冗余和高可用性， SQL Server VM 应处于同一状态<block ref="47fe032b9b8e985355e53596ae7973ec" category="inline-link-rx"></block> 或其他<block ref="ef39442dc7c0eb954c4472567a9ca1e3" category="inline-link-rx"></block>。创建 Azure VM 时，您必须在配置可用性集与可用性区域之间进行选择； Azure VM 不能同时参与这两者。</block>
  <block id="94eeeae1e60f97a446e8c4f69d6d6f43" category="paragraph">为了实现高可用性，最好配置 SQL Server AOAG 或始终在故障转移集群实例（ FCI ）上。对于 AOAG ，这涉及到一个虚拟网络中 Azure 虚拟机上的多个 SQL Server 实例。如果数据库级别需要高可用性，请考虑配置 SQL Server 可用性组。</block>
  <block id="fa32aac4116ce1980c311f004157a133" category="paragraph">Microsoft SQL Server 可以使用 SMB 文件共享作为存储选项进行部署。从 SQL Server 2012 开始，系统数据库（主数据库，型号数据库， msdb 或 tempdb ）， 用户数据库可以作为存储选项与服务器消息块（ Server Message Block ， SMB ）文件服务器一起安装。此适用场景既适用于 SQL Server 独立服务器，也适用于 SQL Server FCI 。</block>
  <block id="250548ef00796e6a203215b1d550bb0d" category="admonition">SQL Server 数据库的文件共享存储应支持持续可用的属性。这样可以无中断地访问文件共享数据。</block>
  <block id="45a6af9c92529e3da9ccdbeae9d692ac" category="paragraph">Azure NetApp Files 可提供高性能文件存储来满足任何苛刻的工作负载要求，与块存储解决方案相比，它可以降低 SQL Server 的 TCO 。对于块存储， VM 会对磁盘操作的 I/O 和带宽施加限制；仅对 Azure NetApp Files 应用网络带宽限制即可。换言之，不会对 Azure NetApp Files 应用 VM 级别的 I/O 限制。如果没有这些 I/O 限制，在连接到 Azure NetApp Files 的较小 VM 上运行的 SQL Server 以及在较大 VM 上运行的 SQL Server 就可以正常运行。Azure NetApp Files 可降低计算和软件许可成本，从而降低 SQL Server 部署成本。有关使用 Azure NetApp Files for SQL Server 部署的详细成本分析和性能优势，请参见<block ref="458fda910151e8d66385b2aabb6cd60e" category="inline-link-rx"></block>。</block>
  <block id="9d2b7eb8bc76e60b0d9cd237d67a34fb" category="paragraph">使用 Azure NetApp Files for SQL Server 的优势包括：</block>
  <block id="8ee22743237d82e9adc18a596977a138" category="list-text">使用 Azure NetApp Files 可以使用较小的实例，从而降低计算成本。</block>
  <block id="3de639403ea86ae87a5883d359deb4ab" category="list-text">Azure NetApp Files 还可以降低软件许可成本，从而降低总体 TCO 。</block>
  <block id="46790c8fe72176f6262b4b5531482ee5" category="list-text">卷重新调整和动态服务级别功能可针对稳定状态的工作负载进行规模估算并避免过度配置，从而优化成本。</block>
  <block id="860d93b2ef30525111fa6440bf4d5bd7" category="list-text">要提高冗余和高可用性， SQL Server VM 应处于同一状态<block ref="47fe032b9b8e985355e53596ae7973ec" category="inline-link-rx"></block> 或不同的<block ref="ef39442dc7c0eb954c4472567a9ca1e3" category="inline-link-rx"></block>。如果需要用户定义的数据文件，请考虑文件路径要求；在这种情况下，请选择 SQL FCI over SQL AOAG 。</block>
  <block id="c6fbfcd868e29e37e88eaeff82a7f430" category="inline-link">\\ANFSMB-b4ca.anf.test\SQLDB 和 \\ANFSMB-b4ca.anf.test\SQLDB\</block>
  <block id="e2bed4e218692d056237b3ae3d24293c" category="list-text">支持以下 UNC 路径：<block ref="cb8cdd6ee3ebeed12086142f1a66cc3e" category="inline-link-rx"></block>。</block>
  <block id="0b4d3828f5dae91cd27e48bffa786d91" category="list-text">不支持环回 UNC 路径。</block>
  <block id="db3d2f4f54b992af225801eb51ea7387" category="list-text">要进行规模估算，请使用内部环境中的历史数据。对于 OLTP 工作负载，使用平均和高峰时间的工作负载以及磁盘读取 / 秒和磁盘写入 / 秒性能计数器将目标 IOPS 与性能要求进行匹配。对于数据仓库和报告工作负载，请使用工作负载在平均和峰值时间以及磁盘读取字节 / 秒和磁盘写入字节 / 秒匹配目标吞吐量平均值可与卷重新调整功能结合使用。</block>
  <block id="da3259c6aa3dafdc8ca15c687022a5cd" category="section-title">创建持续可用的共享</block>
  <block id="f7ee3eee4fa679986e37911272d13a29" category="inline-link">创建持续可用的共享</block>
  <block id="de7d92d6f4ac1f140ac05886ec017f09" category="paragraph">使用 Azure 门户或 Azure 命令行界面创建持续可用的共享。在门户中，选择启用持续可用性属性选项。对于 Azure 命令行界面，使用 `az netappfiles volume create 并将 smb-continuoused-avl` 选项设置为 ` $True` 来将共享指定为持续可用的共享。要了解有关创建启用了持续可用性的新卷的详细信息，请参见<block ref="86e4b436e8054cc83fccec640f98e218" category="inline-link-rx"></block>。</block>
  <block id="9a3932b7bdfdbb892087fd595ec7acb9" category="list-text">为 SMB 卷启用持续可用性，如下图所示。</block>
  <block id="c012fe8c05a3d9875a4f87cee09d1ca9" category="list-text">如果使用的是非管理员域帐户，请确保已为该帐户分配所需的安全权限。</block>
  <block id="762783478495f0889d01a59db256f92c" category="list-text">在共享级别设置适当的权限，并设置适当的文件级别权限。</block>
  <block id="bfb74db6a55528f52e8ecb83a507a043" category="inline-link">将现有 SMB 卷转换为使用持续可用性</block>
  <block id="3cad4a4fcd378074292bfc2ff45fd4ca" category="list-text">无法在现有 SMB 卷上启用持续可用属性。要将现有卷转换为使用持续可用的共享，请使用 NetApp Snapshot 技术。有关详细信息，请参见<block ref="25dc0603f84029cfd15a97a37903a54c" category="inline-link-rx"></block>。</block>
  <block id="015dd90c833178044ff327aee63f72ec" category="paragraph"><block ref="015dd90c833178044ff327aee63f72ec" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9446a98ad14416153cc4d45ab8b531bf" category="section-title">性能</block>
  <block id="ee38206503545cf54ad072dee7f8ab1a" category="paragraph">Azure NetApp Files 支持三种服务级别：标准（每 TB 16 MBps ），高级（每 TB 64 MBps ）和超级（每 TB 128 MBps ）。配置适当的卷大小对于优化数据库工作负载性能非常重要。使用 Azure NetApp Files 时，卷性能和吞吐量限制取决于以下因素的组合：</block>
  <block id="b87f5218989e854f2889f939a4e2ec06" category="list-text">卷所属容量池的服务级别</block>
  <block id="9320cce40e9ab4d677bfcc78eddc64d5" category="list-text">分配给卷的配额</block>
  <block id="2d98af90367bed299b95066a85be0a17" category="list-text">容量池的服务质量（ QoS ）类型（自动或手动）</block>
  <block id="a6f08c2897faaf4d449d71d87f473ff1" category="inline-link">Azure NetApp Files 的服务级别</block>
  <block id="ac56170d8576092b90989d467f2d383e" category="paragraph">有关详细信息，请参见<block ref="1e8ed0f384e427209ce2e9dfbaed249d" category="inline-link-rx"></block>。</block>
  <block id="79bcc7c0be7625b4b6b95ac8189ec45e" category="paragraph"><block ref="79bcc7c0be7625b4b6b95ac8189ec45e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1eb24bd760e508043a3cfdfe91ba9489" category="section-title">性能验证</block>
  <block id="af3948d0fe6860f3a865cd04abebc009" category="inline-link">SQL Server 存储基准测试（ Storage Benchmark ， SB ）工具</block>
  <block id="01384acc34d886b9383610a7494ca75a" category="paragraph">与任何部署一样，测试虚拟机和存储也至关重要。对于存储验证，可使用 HammerDB ， Apploader ，等工具<block ref="df8d6ca8d2831e94c0812b2b971f8958" category="inline-link-rx"></block>或任何具有适当读 / 写混合的自定义脚本或 FIO 。但请注意，大多数 SQL Server 工作负载，甚至繁忙的 OLTP 工作负载，读取率接近 80% – 90% ，写入率接近 10% – 20% 。</block>
  <block id="10fde396dd4a669ec17689dd7cf8b599" category="paragraph">为了展示性能，我们对使用高级服务级别的卷执行了快速测试。在此测试中，卷大小从 100 GB 实时增加到 2 TB ，而不会中断应用程序访问和零数据迁移。</block>
  <block id="6fab14b7b6a90422e865a3b09497edaa" category="paragraph"><block ref="6fab14b7b6a90422e865a3b09497edaa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="eedfe317eed7692e9d95ba36177a80e9" category="paragraph">下面是使用 HammerDB 对本白皮书所述的部署执行实时性能测试的另一个示例。在此测试中，我们使用了一个小型实例，其中包含八个 vCPU ，一个 500 GB 高级 SSD 和一个 500 GB SMB Azure NetApp Files 卷。HammerDB 配置了 80 个仓库和 8 个用户。</block>
  <block id="c365893719ad3de45f14fa9c19408eca" category="paragraph">下图显示，使用大小相当的卷（ 500 GB ）时， Azure NetApp Files 能够以 4 倍的延迟提供每分钟事务数的 2.6 倍。</block>
  <block id="d50d666921da97fdc14e35f752474e41" category="paragraph">另一项测试是，将大小调整为使用 32 个 vCPU 和 16 TB Azure NetApp Files 卷的较大实例。每分钟事务数显著增加，延迟始终保持在 1 毫秒。在此测试中， HammerDB 配置了 80 个仓库和 64 个用户。</block>
  <block id="3b38e0407e747349840c72259c5da930" category="paragraph"><block ref="3b38e0407e747349840c72259c5da930" category="inline-image-macro-rx" type="image"></block></block>
  <block id="892725223bbd64ebec595545eeaf8c28" category="paragraph">通过 Azure NetApp Files ，可以无中断，透明地调整卷大小，并且可以在不发生停机且不影响应用程序的情况下更改服务级别。这是一项独特的功能，可实现动态成本管理，避免使用峰值指标执行数据库规模估算。而是可以使用稳定状态的工作负载，从而避免前期成本。通过卷重新调整和动态服务级别更改，您可以几乎瞬时按需调整 Azure NetApp Files 卷的带宽和服务级别，而无需暂停 I/O ，同时保留数据访问。</block>
  <block id="44aaafbc17f2a4fcbd6d52e1c8ee0cae" category="paragraph">可以使用 LogicApp 或功能等 Azure PaaS 产品根据特定的 webhook 或警报规则触发器轻松调整卷大小，以满足工作负载需求，同时动态处理成本。</block>
  <block id="d613d5e1ef7a7f52eed191ef1066a08a" category="paragraph">例如，假设数据库需要 250 MBps 才能实现稳定状态操作；但是，它也需要 400 MBps 的峰值吞吐量。在这种情况下，应使用高级服务级别内的 4 TB 卷执行部署，以满足稳定状态的性能要求。要处理高峰工作负载，请在该特定时间段内使用 Azure 功能将卷大小增加到 7 TB ，然后减小卷大小以使部署经济高效。此配置可避免过度配置存储。</block>
  <block id="373f503ebd19225995680383c6e2d54a" category="summary">讨论业务应用程序和企业数据库解决方案功能的系列博客</block>
  <block id="e4f724bc105592da045b6dd008770bbf" category="doc">业务应用程序和企业数据库博客</block>
  <block id="034233dab82dddd28f950b8d4198499e" category="paragraph">重点介绍业务应用程序和企业数据库解决方案特定功能的博客概述。</block>
  <block id="8e90e89b52f60feebe2c0df72ca0f424" category="section-title">业务应用程序博客</block>
  <block id="9149421bcec7ca7e29560cd7fc83c4d0" category="section-title">企业数据库博客</block>
  <block id="506b02d257f89febd090ded6564e8c4f" category="summary">NetApp 解决方案中自动化功能的最新新增功能</block>
  <block id="1c2c68dc77a1fbb891d0819f68a3c0dd" category="doc">解决方案自动化中的新增功能</block>
  <block id="a90193527119bcbd79a1084d94ec3914" category="paragraph">概述 NetApp 解决方案的最新自动化功能。</block>
  <block id="153fbde949ec10e69bae256a4114f480" category="cell">* 开始使用解决方案自动化 *</block>
  <block id="3d45b043c5518eca1e47fb4ba8a813da" category="inline-link-macro">为 RHEL/CentOS 上的 CLI 部署设置 Ansible 控制节点</block>
  <block id="0d4c9e63678641d4ae0e23bd36684722" category="cell"><block ref="0d4c9e63678641d4ae0e23bd36684722" category="inline-link-macro-rx"></block></block>
  <block id="2afb5cc3404c6c8162722fd41895c2de" category="inline-link-macro">为 Ubuntu / Debian 上的 CLI 部署设置 Ansible 控制节点</block>
  <block id="0f752948a660f9bbb5956c86d669a395" category="cell"><block ref="0f752948a660f9bbb5956c86d669a395" category="inline-link-macro-rx"></block></block>
  <block id="6b8c64be0bad88fb867c6576ac777b25" category="inline-link-macro">为塔式 /AWX 部署设置 Ansible 塔式或 AWX</block>
  <block id="b8c65aa5893cb554f17ec9c5b653c9bc" category="cell"><block ref="b8c65aa5893cb554f17ec9c5b653c9bc" category="inline-link-macro-rx"></block></block>
  <block id="e7760fa86ac312b359215e15113fde9b" category="cell">* 在混合云中自动化 Oracle 数据库基础架构 *</block>
  <block id="61133eed21544af8c4988e345e562ce0" category="summary">讨论数据保护和安全解决方案功能的一系列视频和演示</block>
  <block id="80a9ba2a1f85a5cf26d01122fd696973" category="doc">数据保护和安全视频和演示</block>
  <block id="ea233cf80b43de3a730e01b8e376a9bd" category="paragraph">视频和演示概述，重点介绍数据保护和安全解决方案的具体功能。</block>
  <block id="b9332d9812fee56d4f22fd8f245323a9" category="section-title">演示 / 视频</block>
  <block id="b278438874f41a76068d02368e65aa3e" category="doc">关于此存储库</block>
  <block id="404af48e0cb5f84306fbd93fac2ff8be" category="paragraph">NetApp 解决方案存储库简介—从何处查找特定解决方案以及如何使用此存储库。</block>
  <block id="45ac6b09a3b8f5ea07ca656ca8dea987" category="section-title">存储库导航</block>
  <block id="c28e40ef527e43509a0fcd3b114ff824" category="paragraph">存储库的导航由主边栏管理，主边栏显示在页面左侧。解决方案分为更高级别的技术领域，这些技术领域被定义为 NetApp 解决方案的 " 技术塔 " 。</block>
  <block id="e9982e506e30915713c7485a2e77633b" category="section-title">Technology Towers 概述</block>
  <block id="d67372be0bd12a2ddbcf795ccfacc7de" category="cell">* 第节 *</block>
  <block id="f14c276c07197ebef1394a5a219087a1" category="cell">* 问题描述 *</block>
  <block id="7324b08f5dfbdb08191404d3fdacfcbd" category="cell">一组基于 AI 的解决方案。解决方案可细分为以下类别之一： [Navy]#AI Converged infrastructures # [navy]# 数据管道，数据湖和管理 # [navy]# 用例 #</block>
  <block id="f5f0336c80fe8cdd5a51752c1ce61ac3" category="cell">数据分析解决方案集合（例如 Splunk SmartStore ， Apache Spark 等）</block>
  <block id="f27edcc7a209983dc37cbcdb0df49ce7" category="cell">虚拟桌面</block>
  <block id="b3f656e5589b8507fed35a5cde55c7ce" category="cell">一组最终用户计算解决方案。解决方案可细分为以下类别之一： [Navy]#Virtual Desktop Service （ VDS ） # [Navy]#VMware Horizon # [Navy]#Citrix Virtual Apps and Desktops# [Navy]# Virtual Desktop Applications#</block>
  <block id="f4d9ebd0d9f8b0ed1329093e48c11221" category="cell">基于容器的解决方案集合。解决方案可细分为以下类别之一： [Navy]#Red Hat OpenShift# [Navy]#Google Anthos#</block>
  <block id="861a3cbb41e90c0f7d83b50b7522b0bd" category="cell">业务应用程序</block>
  <block id="c343bf84179077b4550742e0222d3349" category="cell">业务应用程序解决方案集合。解决方案可细分为以下类别之一： [Navy]#SAP#</block>
  <block id="8a0b9e6043677d9587a3e02ced9a6dfd" category="cell">数据库解决方案集合。解决方案可细分为以下类别之一： [Navy]#SAP HANA # [Navy]#Oracle# [Navy]#Microsoft SQL Server#</block>
  <block id="d83d094e8e3ce7450bf099061814d148" category="cell">使用 Red Hat Ansible 开始使用解决方案自动化概述。</block>
  <block id="6174d88cc7c0409df3e035a5c9d089cb" category="section-title">更改日志</block>
  <block id="a0067ab2420cbaebc335efc5c2433c45" category="inline-link-macro">更改日志</block>
  <block id="1144ef243d0744e29b8bb83edad3cd0d" category="paragraph">存储库的所有主要更改（新解决方案，主要更新，新视频 / 演示等）都会在中进行跟踪 <block ref="95485865b5d32e0932da8207f23060b5" category="inline-link-macro-rx"></block>。</block>
  <block id="bea4c2c8eb82d05891ddd71584881b56" category="section-title">反馈</block>
  <block id="fb6b632cdd61e02434568081cbbf0fae" category="paragraph">请使用 <block ref="a5f81f398e43efd62a061a201309bfa7" category="inline-link-macro-rx"></block> 请求对内容进行更改或提供有关内容的反馈。请尽可能具体地确保您的反馈得到适当处理。</block>
  <block id="ec9f29e2bd26bf4a641b2964f3e3cf52" category="summary">讨论 NetApp 解决方案中自动化功能的系列博客</block>
  <block id="6d64ee49cfa68e79b6fc189f1f83eef9" category="doc">解决方案自动化博客</block>
  <block id="6380d01fb740985eb6892589e7579224" category="paragraph">重点介绍 NetApp 解决方案中特定自动化功能的博客概述。</block>
  <block id="8893b40d0413bdee0d28539b7201b89c" category="summary">讨论 AI 和现代数据分析解决方案功能的一系列视频和演示</block>
  <block id="d14e8dc770c2ede214d6db5eeb5d5167" category="doc">人工智能和现代数据分析视频和演示</block>
  <block id="4696a661acac2c10910848bfebf30d2d" category="paragraph">视频和演示概述，重点介绍 AI 和现代数据分析解决方案的特定功能。</block>
  <block id="bd86b07883a3c2983a874d3a11359cde" category="section-title">YouTube 上的演示 / 视频</block>
  <block id="145706f4acca44c289ff5ca8cc5b2b86" category="inline-link-macro">NetApp AI 解决方案</block>
  <block id="f4016f882c8544b575d00a8cb6a17809" category="list-text"><block ref="f4016f882c8544b575d00a8cb6a17809" category="inline-link-macro-rx"></block></block>
  <block id="895a85fc0a1a565ac547acc1bc9740f3" category="inline-link-macro">MLOps</block>
  <block id="7cd0e3a75573824e7933841074476cbe" category="list-text"><block ref="7cd0e3a75573824e7933841074476cbe" category="inline-link-macro-rx"></block></block>
  <block id="c8d20ce0b6bb23d912f3368f706d5794" category="summary">NetApp 解决方案是一套战略和技术功能，旨在强调 NetApp 产品和服务组合，以满足客户最关键的业务需求。</block>
  <block id="c6aaad7e04b9605d83a2a2aa661fc1b4" category="summary">借助 NetApp VDS ，管理员可以将任务委派给其他人。他们可以连接到已部署的服务器以进行故障排除，查看日志和运行审核报告。在帮助客户时，帮助台或 3 级技术人员可以根据需要对用户会话进行影子管理，查看进程列表并终止进程。</block>
  <block id="3a1e041969ddc2d8e0e399260d9159a7" category="doc">使用 Login VSI 进行单服务器负载测试</block>
  <block id="12d80b6f529069c8b2bc8d45947a0379" category="paragraph">NetApp 虚拟桌面服务使用 Microsoft 远程桌面协议来访问虚拟桌面会话和应用程序，而 Login VSI 工具可确定可在特定服务器型号上托管的最大用户数。Login VSI 可按特定时间间隔模拟用户登录，并执行用户操作，例如打开文档，阅读和撰写邮件，使用 Excel 和 PowerPoint ，打印文档，压缩文件以及随机中断。然后，它会测量响应时间。如果服务器利用率较低，则用户响应时间较短；如果添加了更多用户会话，则用户响应时间会增加。Login VSI 会根据初始用户登录会话确定基线，当用户响应超过基线 2 秒时，它会报告最大用户会话。</block>
  <block id="4be1d7a9b1a8d85ed7d1cf5c72b23928" category="paragraph">NetApp 虚拟桌面服务利用 Microsoft 远程桌面协议访问虚拟桌面会话和应用程序。为了确定可在特定服务器型号上托管的最大用户数，我们使用了 Login VSI 工具。Login VSI 可按特定时间间隔模拟用户登录，并执行用户操作，例如打开文档，阅读和撰写邮件，使用 Excel 和 PowerPoint ，打印文档，压缩文件，随机中断等。它还可测量响应时间。如果服务器利用率较低，则用户响应时间较短；如果添加了更多用户会话，则用户响应时间会增加。Login VSI 会根据初始用户登录会话确定基线，当用户响应超过基线 2 秒时，它会报告最大用户会话数。</block>
  <block id="481e9968651d6bd0d36d67a776a0f32a" category="paragraph">下表包含用于此验证的硬件。</block>
  <block id="e93f994f01c537c4e2f7d8528c3eb5e9" category="cell">计数</block>
  <block id="8417ade953d75aa6fa3c64813e005e17" category="cell">NetApp HCI H610C</block>
  <block id="ec1d568aa57f1e1231acef5759640fc6" category="cell">一个集群中有三个用于启动程序， AD ， DHCP 等。一台服务器用于负载测试。</block>
  <block id="5b68b81817d64cfa84c65e2e185efe97" category="cell">NetApp HCI H615C</block>
  <block id="c36af9ab64be0b8bd4d5097f58b8a5ba" category="cell">2 个 24C Intel Xeon Gold 6282 @2.1 GHz 。1.5 TB RAM 。</block>
  <block id="825c03a9f78635bec804883dde1bd6bf" category="paragraph">下表包含用于此验证的软件。</block>
  <block id="f5bf48aa40cad7891eb709fcf1fde128" category="cell">产品</block>
  <block id="f80ee94fe4a9c10f8d85e442e7521687" category="cell">NetApp VDS 5.4</block>
  <block id="bb15f84d3b96a9b33719b8a71bc62207" category="cell">VM 模板 Windows 2019 1809</block>
  <block id="f6a3c0d463e2ae697b02a9893e2062a3" category="cell">适用于 RDSH 的服务器操作系统</block>
  <block id="5a264c4e5b7b75d4ead67bf3ff7988bc" category="cell">登录 VSI</block>
  <block id="5227da0541209a94c7dc0a07cf3e0740" category="cell">4.1.32.1</block>
  <block id="123995603a5e237810bf85a8e3c73f2e" category="cell">VMware vSphere 6.7 Update 3</block>
  <block id="2752fcc90cb7cc7439b827d762e89166" category="cell">VMware vCenter 6.7 Update 3f</block>
  <block id="436bc441be68b676a199df5c1ea02263" category="cell">VMware 管理工具</block>
  <block id="9ad541af6dac1be0c6655522128a386c" category="paragraph">Login VSI 测试结果如下：</block>
  <block id="17126aef3e415713552604218f448967" category="cell">VM 配置</block>
  <block id="084abcce930cefa047af15fc0836639a" category="cell">Login VSI 基线</block>
  <block id="8bb9799dff9f679e2305879f7dc1a9f0" category="cell">Login VSI 最大值</block>
  <block id="e49775052ecbe49b489c84d0b09e916e" category="cell">H610C</block>
  <block id="a9cc7da7b66d8162a44a176bb1109440" category="cell">8 个 vCPU ， 48 GB RAM ， 75 GB 磁盘， 8 Q vGPU 配置文件</block>
  <block id="28267ab848bcf807b2ed53c3a8f8fc8a" category="cell">799</block>
  <block id="8f85517967795eeef66c225f7883bdcb" category="cell">178.</block>
  <block id="bd40934d28717a37aa4087f1622d8f0b" category="cell">H615C</block>
  <block id="4052d2c7017812dc33333a4dc7e83dc9" category="cell">12 个 vCPU ， 128 GB RAM ， 75 GB 磁盘</block>
  <block id="eefc9e10ebdc4a2333b42b2dbb8f27b6" category="cell">763</block>
  <block id="7a614fd06c325499f1680b9896beedeb" category="cell">272</block>
  <block id="71c62dd6d64bb960471819c829a777fd" category="paragraph">考虑到子 NUMA 边界和超线程，选择用于 VM 测试和配置的八个 VM 取决于主机上可用的核心。</block>
  <block id="0f57e9c52f3aa2d44da0de48ac87443a" category="paragraph">我们在 H610C 上使用了 10 个启动器 VM ，这些 VM 使用 RDP 协议连接到用户会话。下图显示了 Login VSI 连接信息。</block>
  <block id="ad1351ac01d5fe0ac5546c8a2fd2d170" category="paragraph"><block ref="ad1351ac01d5fe0ac5546c8a2fd2d170" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1dba4e8b5ffc06c0ccce673fd6f48159" category="paragraph">下图显示了 H610C 的 Login VSI 响应时间与活动会话的对比情况。</block>
  <block id="8d58d21e6be9e4be37d3c42935a380b5" category="paragraph"><block ref="8d58d21e6be9e4be37d3c42935a380b5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="65f671ed80b2c6f0cc371ab295230a3a" category="paragraph">下图显示了 H615C 的登录 VSI 响应时间与活动会话的对比情况。</block>
  <block id="72cce33d21386089f9a521f893c14d41" category="paragraph"><block ref="72cce33d21386089f9a521f893c14d41" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5c29ae1e9123280c1975dbc407f3eca3" category="paragraph">下图显示了在对 vSphere 主机和 VM 执行 H615C 登录 VSI 测试期间 Cloud Insights 的性能指标。</block>
  <block id="d64755ae2a4094876fbaf88a161ddec2" category="paragraph"><block ref="d64755ae2a4094876fbaf88a161ddec2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1ab628831ed501803e9da2a64f12dd6e" category="inline-link-macro">下一步：管理门户</block>
  <block id="20fcc4e371ed448b0d5ffee3f4aecb43" category="paragraph"><block ref="20fcc4e371ed448b0d5ffee3f4aecb43" category="inline-link-macro-rx"></block></block>
  <block id="0ccea8702c360d2d159b0e8477fe81d6" category="summary">使用 H610C 或 H615C 时， GPU 的许可证必须从有权转售许可证的 NVIDIA 合作伙伴处购买。</block>
  <block id="1f26c520bd4eba393348dedea38da7b7" category="doc">NVIDIA 许可</block>
  <block id="b548ee560d6fa4ee980d777df0300d09" category="inline-link">配对节点定位器</block>
  <block id="72d760f4e8266e660fa7126e42f63bbe" category="paragraph">使用 H610C 或 H615C 时， GPU 的许可证必须从有权转售许可证的 NVIDIA 合作伙伴处购买。您可以找到 NVIDIA 与的合作伙伴<block ref="32da44153625c96a28e5bf10161bbc42" category="inline-link-rx"></block>。搜索虚拟 GPU （ vGPU ）或 Tesla 等能力。</block>
  <block id="7709fb92e99b3458d440c5212792a0de" category="paragraph">NVIDIA vGPU 软件有四个版本：</block>
  <block id="31473f257c4cfabfcba0c506fefcf4ca" category="list-text">NVIDIA GRID 虚拟 PC （ GRID vPC ）</block>
  <block id="75cc5be2167cc23ca9d32aa78a164907" category="list-text">NVIDIA GRID 虚拟应用程序（ GRID vApp ）</block>
  <block id="53b933a69a5adecaa6c8c8817d2d87a5" category="list-text">NVIDIA Quadro 虚拟数据中心工作站（ Quadro vDWS ）</block>
  <block id="2d655109b3aad5a539482617b4aa3b6b" category="list-text">NVIDIA Virtual ComputeServer （ vComputeServer ）</block>
  <block id="38f26d9fb2d58dd577140e84010a059d" category="section-title">网格虚拟 PC</block>
  <block id="e43876de331b666ca7fd1c7bbb8a844d" category="paragraph">此产品非常适合希望使用虚拟桌面为 Microsoft Windows 应用程序，浏览器，高清视频和多显示器支持提供卓越用户体验的用户。NVIDIA GRID 虚拟 PC 可在虚拟环境中提供原生体验，让您可以以全性能运行所有 PC 应用程序。</block>
  <block id="06a4851adc711a27ef53d0577d69e210" category="section-title">网格虚拟应用程序</block>
  <block id="2c20bf668630521a8f76995b0c04c398" category="paragraph">网格 vApp 适用于部署远程桌面会话主机（ RDSH ）或其他应用程序流式或基于会话的解决方案的组织。网格 vApp 还支持 Windows Server 托管的 RDSH 桌面，旨在以全性能交付 Microsoft Windows 应用程序。</block>
  <block id="5de115addc6579e1d30075a2a92c9ae7" category="section-title">Quadro 虚拟数据中心工作站</block>
  <block id="74fec534073fb87750193748093ada5a" category="paragraph">本版本非常适合使用功能强大的 3D 内容创建应用程序的主流和高端设计人员，例如，达索 CATIA ， SOLIDWORKS ， 3dexcite ， Siemens NX ， PTC 克里奥， Schlumberg器 Petrel 或 Autodesk Maya 。通过 NVIDIA Quadro vDWS ，用户可以在任何设备上访问具有全部功能和性能的专业图形应用程序。</block>
  <block id="fb5cc5533386fd1b00e6b986dec8cba1" category="section-title">NVIDIA Virtual ComputeServer</block>
  <block id="087877c8284ea313c79d65cb22d48329" category="paragraph">许多组织都运行计算密集型服务器工作负载，例如人工智能（ AI ），深度学习（ DL ）和数据科学。对于这些使用情形， NVIDIA vComputeServer 软件可虚拟化 NVIDIA GPU ，从而通过错误更正代码，页面停用，通过 NVLink 对等和多 vGPU 等功能加快计算密集型服务器工作负载的速度。</block>
  <block id="e1f54ed77362f191ac08c4db8d9c44cd" category="admonition">使用 Quadro vDWS 许可证，您可以使用网格 vPC 和 NVIDIA vComputeServer 。</block>
  <block id="d685cba160011e42327272678904bcbc" category="inline-link-macro">下一步：部署</block>
  <block id="fed95bc65003dcb3d5ee273e3926bb25" category="paragraph"><block ref="fed95bc65003dcb3d5ee273e3926bb25" category="inline-link-macro-rx"></block></block>
  <block id="56b4cb3c337694fdafc2164dddad87fa" category="summary">GPU 通常用于通过执行重复性计算实现图形可视化（渲染）。这种重复计算功能通常用于人工智能和深度学习用例。</block>
  <block id="ca32c5a534baaf5f6dc3e6e6fed62450" category="doc">GPU 注意事项</block>
  <block id="ceeb28ce3b9ce753f02856fffb7ba66c" category="paragraph">对于图形密集型应用程序， Microsoft Azure 提供基于 NVIDIA Tesla M60 卡的 NV 系列，每个 VM 具有一到四个 GPU 。每个 NVIDIA Tesla M60 卡都包含两个基于 Maxwell 的 GPU ，每个 GPU 具有 8 GB 的 GDDR5 内存，总共 16 GB 。</block>
  <block id="cb433c3099845f0ac8f3ba53d162db7b" category="admonition">NV 系列附带 NVIDIA 许可证。</block>
  <block id="0f0c98cc175dc7cda319a35afcd199e5" category="paragraph"><block ref="0f0c98cc175dc7cda319a35afcd199e5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ead26a90008a32871b53cb37bbe8431a" category="paragraph">使用 NetApp HCI 时， H615C GPU 包含三个 NVIDIA Tesla T4 卡。每个 NVIDIA Tesla T4 卡都具有一个基于旅行的 GPU ，其中包含 16 GB 的 GDDR6 内存。在 VMware vSphere 环境中使用时，虚拟机可以共享 GPU ，每个 VM 都具有专用的帧缓冲区内存。NetApp HCI H615C 上的 GPU 提供了光线跟踪功能，可以生成逼真的图像，包括光照。请注意，您需要具有一个 NVIDIA 许可证服务器，并获得 GPU 功能的许可证。</block>
  <block id="148811d448421f6a42c549400b7201c0" category="paragraph"><block ref="148811d448421f6a42c549400b7201c0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fc6992cca0b3d14a85c456d0890f3e37" category="paragraph">要使用 GPU ，您必须安装相应的驱动程序，此驱动程序可从 NVIDIA 许可证门户下载。在 Azure 环境中， NVIDIA 驱动程序可作为 GPU 驱动程序扩展使用。接下来，必须更新以下屏幕截图中的组策略，以便将 GPU 硬件用于远程桌面服务会话。您应确定 H.264 图形模式的优先级并启用编码器功能。</block>
  <block id="5b0ff68b017720dd46aa6d1923fdfa95" category="paragraph"><block ref="5b0ff68b017720dd46aa6d1923fdfa95" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d7d3d3d6dd94c69620cd3edfb005691c" category="paragraph">使用任务管理器或在运行 WebGL 示例时使用 nvidia-smi 命令行界面验证 GPU 性能监控。确保 GPU ，内存和编码器资源已被占用。</block>
  <block id="d13ca37d387c1bb473c0343278d0477d" category="paragraph"><block ref="d13ca37d387c1bb473c0343278d0477d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9f2b53ac98ef55a900849ead654ca636" category="paragraph">为了确保虚拟机部署到采用虚拟桌面服务的 NetApp HCI H615C 中，请使用包含 H615C 主机的 vCenter 集群资源定义一个站点。VM 模板必须附加所需的 vGPU 配置文件。</block>
  <block id="818fad61fba48977b2293819f37e950a" category="paragraph">对于共享多会话环境，请考虑分配多个同构 vGPU 配置文件。但是，对于高端专业图形应用程序，最好将每个 VM 专用于一个用户，以使 VM 保持隔离。</block>
  <block id="a2db30df8af33b0e661aaed00ce2c1d3" category="paragraph">GPU 处理器可以通过 QoS 策略进行控制，每个 vGPU 配置文件都可以具有专用的帧缓冲区。但是，每个卡都共享编码器和解码器。vGPU 配置文件在 GPU 卡上的放置由 vSphere 主机 GPU 分配策略控制，该策略可以强调性能（分布式 VM ）或整合（组 VM ）。</block>
  <block id="9411dea29d318927759a55cff454b3dd" category="inline-link-macro">接下来：面向行业的解决方案。</block>
  <block id="ee3f381f10f3f075a22913a348a89edf" category="paragraph"><block ref="ee3f381f10f3f075a22913a348a89edf" category="inline-link-macro-rx"></block></block>
  <block id="53cf9d36e61cc97b118ae4cc9589bac3" category="summary">通过 NetApp VDS Cloud Workspace Management Suite 门户，可以集中管理各种 VDS 部署，包括为内部部署，管理用户，应用程序目录和脚本化事件定义了站点的 VDS 部署。管理用户还可以使用此门户根据需要手动配置应用程序，并连接到任何计算机进行故障排除。</block>
  <block id="e68a6dedaba6faaba6e7afd9197edc4f" category="doc">管理门户</block>
  <block id="76368893e7696218fc60d77f96235f35" category="paragraph">NetApp VDS Cloud Workspace Management Suite 门户现已推出<block ref="1640f4040bca8395064a2ee51cb5f0ae" category="inline-link-rx"></block> 即将推出的版本<block ref="b6375c31f2253ef964d998b5762ba440" category="inline-link-rx"></block>。</block>
  <block id="02655da204b103696191f5d52c33427f" category="paragraph">通过该门户，可以集中管理各种 VDS 部署，包括为内部部署，管理用户，应用程序目录和脚本化事件定义了站点的 VDS 部署。管理用户还可以使用此门户根据需要手动配置应用程序，并连接到任何计算机进行故障排除。</block>
  <block id="0499b0532cd51452b57a028f3973d9fa" category="paragraph">服务提供商可以使用此门户添加自己的渠道合作伙伴，并允许他们管理自己的客户端。</block>
  <block id="8af19d014b76fa90ffc0c0477bd47be5" category="inline-link-macro">下一步：用户管理</block>
  <block id="631d677d75a0b47f9fe24a201cc8cb85" category="paragraph"><block ref="631d677d75a0b47f9fe24a201cc8cb85" category="inline-link-macro-rx"></block></block>
  <block id="aaca2e6fe88c6861582a8d1a20acfd4f" category="summary">适用于虚拟桌面服务的 ONTAP 功能。</block>
  <block id="bc9c47c8423d4537fdbf118b09a80084" category="doc">适用于虚拟桌面服务的 ONTAP 功能</block>
  <block id="472986236003195075a1428fe6103f4c" category="paragraph">以下 ONTAP 功能使其成为与虚拟桌面服务结合使用的极具吸引力的选择。</block>
  <block id="6128a47ce6baa55dbad9293234f2f65c" category="list-text">* 横向扩展文件系统。 * ONTAP FlexGroup 卷的大小可以增长到 20 PB 以上，并且可以在一个命名空间中包含 4000 亿个以上的文件。此集群最多可包含 24 个存储节点，每个节点都具有一个灵活的网络接口卡数量，具体取决于使用的型号。</block>
  <block id="960f11687b64143d44db7f4ffcb33ef2" category="paragraph">用户的虚拟桌面，主文件夹，用户配置文件容器，共享数据等可以按需增长，而无需考虑文件系统限制。</block>
  <block id="ab7ad572d2251b9b27fa0213fde8531f" category="list-text">* 文件系统分析。 * 您可以使用 XCP 工具深入了解共享数据。借助 ONTAP 9.8+ 和 ActiveIQ Unified Manager ，您可以轻松查询和检索文件元数据信息并识别冷数据。</block>
  <block id="885f3e34ca03dc8ff35c0bac51b384f7" category="list-text">* 云分层。 * 您可以将冷数据迁移到云中的对象存储或数据中心中任何与 S3 兼容的存储。</block>
  <block id="fb38ee94b865e67571a08316a3baac38" category="list-text">* 文件版本。 * 用户可以恢复受 NetApp ONTAP Snapshot 副本保护的文件。ONTAP Snapshot 副本非常节省空间，因为它们仅记录更改的块。</block>
  <block id="9b7db1dd6f422e5f07ded1d3b7b04d90" category="list-text">* 全局命名空间。 * ONTAP FlexCache 技术支持文件存储远程缓存，便于在包含 ONTAP 存储系统的各个位置之间管理共享数据。</block>
  <block id="827aa7cb1ad6ddbf99e040efe34725a8" category="list-text">* 安全多租户支持。 * 一个物理存储集群可以呈现为多个虚拟存储阵列，每个阵列都有自己的卷，存储协议，逻辑网络接口，身份和身份验证域，管理用户等。因此，您可以在多个业务单位或环境之间共享存储阵列，例如测试，开发和生产。</block>
  <block id="6c36afe01468d888b334a4432dcac4b2" category="paragraph">为了保证性能，您可以使用自适应 QoS 根据已用空间或已分配空间设置性能级别，并且可以使用配额控制存储容量。</block>
  <block id="b1a678f5f86de8ff8a5b9b1c4b3772b8" category="list-text">* VMware 集成。 * 适用于 VMware vSphere 的 ONTAP 工具提供了一个 vCenter 插件，用于配置数据存储库，实施 vSphere 主机最佳实践以及监控 ONTAP 资源。</block>
  <block id="9b12997ae1d332c9003c444a6ff8918a" category="paragraph">ONTAP 支持 vStorage APIs for Array Integration （ VAAI ）将 SCSI/ 文件操作卸载到存储阵列。ONTAP 还支持用于存储感知的 vStorage API （ VASA ），并支持对块和文件协议使用虚拟卷。</block>
  <block id="025e05e390f2d7ef7708bb42d81e1eeb" category="paragraph">适用于 VMware vSphere 的 SnapCenter 插件可通过存储阵列上的 Snapshot 功能轻松备份和还原虚拟机。</block>
  <block id="3452f822915108b5d640f3288959e7fd" category="paragraph">ActiveIQ Unified Manager 可在 vSphere 环境中提供端到端存储网络可见性。管理员可以轻松识别 ONTAP 上托管的虚拟桌面环境中可能发生的任何延迟问题。</block>
  <block id="c9559fb9abb51cf76cc973d06c7e730c" category="list-text">* 安全合规性。 * 借助 ActiveIQ Unified Manager ，您可以通过警报监控多个 ONTAP 系统，以发现任何策略违规。</block>
  <block id="875c0a88cb08e888c642bbcc19cb33a2" category="list-text">* 多协议支持。 * ONTAP 支持块（ iSCSI ， FC ， FCoE 和 NVMe/FC ），文件（ NFSv3 ， NFSv4.1 ， SMB2.x 和 SMB3.x ）以及对象（ S3 ）存储协议。</block>
  <block id="4ac79aa8e1431a96a08ba58c1e17a104" category="list-text">* 自动化支持。 * ONTAP 提供 REST API ， Ansible 和 PowerShell 模块，可通过 VDS 管理门户自动执行任务。</block>
  <block id="ba5e495048f0fa35302184aa505386a9" category="inline-link-macro">下一步：数据管理</block>
  <block id="51688bc4609022e20e8c1cb051fb4489" category="paragraph"><block ref="51688bc4609022e20e8c1cb051fb4489" category="inline-link-macro-rx"></block></block>
  <block id="b5ed404fa434aeee227f550cddf89892" category="inline-link">NetApp 云</block>
  <block id="d823edbaf98641c5959f3a596de3df66" category="list-text"><block ref="d823edbaf98641c5959f3a596de3df66" category="inline-link-rx"></block></block>
  <block id="b1eb0510d1bc6ffab71faa53637ecde2" category="inline-link">NetApp VDS 产品文档</block>
  <block id="c5b41ed257411dffc1cc80a4c00cf17c" category="list-text"><block ref="c5b41ed257411dffc1cc80a4c00cf17c" category="inline-link-rx"></block></block>
  <block id="272427e7f4e6650df3749f83086acde6" category="inline-link">使用 VPN 网关将内部网络连接到 Azure</block>
  <block id="c460b4e40e6d4709ed15a2e8dba39833" category="list-text"><block ref="c460b4e40e6d4709ed15a2e8dba39833" category="inline-link-rx"></block></block>
  <block id="440e11297e8634c052b1bfd29a90309c" category="inline-link">Azure 门户</block>
  <block id="8284aff5fcde6ba43a0ca21712739cae" category="list-text"><block ref="8284aff5fcde6ba43a0ca21712739cae" category="inline-link-rx"></block></block>
  <block id="8867b143d669949d3948e3816324ec75" category="inline-link">Microsoft Windows 虚拟桌面</block>
  <block id="0db816b3393ed224b26131285b4e3dff" category="list-text"><block ref="0db816b3393ed224b26131285b4e3dff" category="inline-link-rx"></block></block>
  <block id="7c033f9cfba6e06ff2ee6cb852ce10f4" category="inline-link">Azure NetApp Files 注册</block>
  <block id="aff481c4855a001492901fbefcab7d17" category="list-text"><block ref="aff481c4855a001492901fbefcab7d17" category="inline-link-rx"></block></block>
  <block id="4725a4744390b735ea1bb4e3fc99b686" category="section-title">存储节点</block>
  <block id="0f66538edca95cf4d42667cfa5d6a362" category="section-title">计算节点</block>
  <block id="60ece3fee8421729100872ec44f1cda9" category="summary">在部署过程中，您可以选择文件服务方法来托管用户配置文件，共享数据和主驱动器文件夹。可用选项包括文件服务器， Azure 文件或 Azure NetApp Files 。但是，在部署后，您可以使用命令中心工具修改此选项，使其指向任何 SMB 共享。使用 NetApp ONTAP 托管具有多种优势。</block>
  <block id="568483e9bd85504f3c9dcef24ecd3235" category="doc">数据管理</block>
  <block id="1b8c33cc721641b8b0555f2d7b5c2773" category="inline-link-macro">使用 NetApp ONTAP 托管具有多种优势</block>
  <block id="ef9fd867f3eaed93e0806bd027825218" category="inline-link">更改数据层</block>
  <block id="698e77d7e678617a2ae27ca2525bfbf7" category="paragraph">在部署过程中，您可以选择文件服务方法来托管用户配置文件，共享数据和主驱动器文件夹。可用选项包括文件服务器， Azure 文件或 Azure NetApp Files 。但是，在部署后，您可以使用命令中心工具修改此选项，使其指向任何 SMB 共享。 <block ref="50056d02f0a90e2e837160c093f1b22b" category="inline-link-macro-rx"></block>。要了解如何更改 SMB 共享，请参见<block ref="336429df384a16f14c12cbc8dba62525" category="inline-link-rx"></block>。</block>
  <block id="24e6e2f6171b43a847fe194a9a9b5cd0" category="section-title">全局文件缓存</block>
  <block id="ce29b83c61cdf6a56b49dbde9a4d57e0" category="paragraph">如果用户分布在全局命名空间的多个站点上，则全局文件缓存有助于减少频繁访问的数据的延迟。可以使用配置收集和脚本化事件自动部署全局文件缓存。全局文件缓存可在本地处理读写缓存，并在不同位置保持文件锁定。全局文件缓存可用于任何 SMB 文件服务器，包括 Azure NetApp Files 。</block>
  <block id="87db7a122a37ab4a28f2223fa123a5be" category="paragraph"><block ref="87db7a122a37ab4a28f2223fa123a5be" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d726de6a27bb533c6c8c44ea508dffa8" category="paragraph">全局文件缓存需要满足以下要求：</block>
  <block id="2f28046ff208122796d51bafd8d4bc9c" category="list-text">管理服务器（许可证管理服务器）</block>
  <block id="83168e6cb289d732cc78427b51f93153" category="list-text">核心</block>
  <block id="e7704357fe6a312ecafae725be93b8c2" category="list-text">具有足够磁盘容量以缓存数据的边缘</block>
  <block id="d70c88e6a13ca1af40b966d8d7d831c4" category="inline-link">GFC 文档</block>
  <block id="154c48fd725e7207d36baa74bba5fd7a" category="paragraph">要下载软件并计算 Edge 的磁盘缓存容量，请参见<block ref="83d5530c5afeb5a227ac8c2985566e4d" category="inline-link-rx"></block>。</block>
  <block id="1afc494dd7d35016d9524e06b68dbf2a" category="paragraph">为了进行验证，我们在 Azure 的同一个虚拟机上部署了核心资源和管理资源，并在 NetApp HCI 上部署了边缘资源。请注意，核心是需要进行大量数据访问的位置，边缘是核心的一部分。安装软件后，您必须激活已激活的许可证，然后才能使用。为此，请完成以下步骤：</block>
  <block id="70366038f1d44fef6c71f615b677b9cf" category="list-text">在 License Configuration 部分下，使用链接 Click here 完成许可证激活。然后注册核心。</block>
  <block id="a51a182b58a11b12770fbd2bd9643852" category="paragraph"><block ref="a51a182b58a11b12770fbd2bd9643852" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d666527802938c89b9f895300aea220b" category="list-text">提供用于全局文件缓存的服务帐户。有关此帐户所需的权限，请参见<block ref="83d5530c5afeb5a227ac8c2985566e4d" category="inline-link-rx"></block>。</block>
  <block id="ab698dd081619e8f6dc264df6c99b73e" category="paragraph"><block ref="ab698dd081619e8f6dc264df6c99b73e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="12b1486d5cfb9e0c5394a50e2515b53c" category="list-text">添加新的后端文件服务器并提供文件服务器名称或 IP 。</block>
  <block id="ffeac1f6b14ca75f608539cb6c673f37" category="paragraph"><block ref="ffeac1f6b14ca75f608539cb6c673f37" category="inline-image-macro-rx" type="image"></block></block>
  <block id="643c94b6eb5664ed3cca98d31d7dbd39" category="list-text">在边缘上，缓存驱动器必须具有驱动器盘符 D如果不是，请使用 diskpart.exe 选择卷并更改驱动器号。以边缘身份向许可证服务器注册。</block>
  <block id="e9b41aa1ac49113064748a9c6e0f48a9" category="paragraph"><block ref="e9b41aa1ac49113064748a9c6e0f48a9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="156666d997fd17a94bed67fe95334273" category="paragraph">如果启用了核心自动配置，则会自动从许可证管理服务器检索核心信息。</block>
  <block id="891d862f33aaeafcd8ecc43e102febd3" category="paragraph"><block ref="891d862f33aaeafcd8ecc43e102febd3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a2184b1f206fd35eeb448e9937bdabe7" category="paragraph">在任何客户端计算机上，用于访问文件服务器上共享的管理员都可以使用 UNC 路径 ` \\&lt; 边缘服务器名称 &gt;\FASTDATA\&lt; 核心服务器名称 &gt;\&lt; 后端文件服务器名称 &gt;\&lt; 共享名称 &gt;` 使用 GFC 边缘访问该共享。管理员可以将此路径包含在用户登录脚本或 GPO 中，以便在边缘位置映射用户驱动器。</block>
  <block id="a08e5ca253097ac5ad7741e20d9dd090" category="paragraph">为了为全球用户提供透明的访问权限，管理员可以设置 Microsoft 分布式文件系统（ DFS ），使其链接指向文件服务器共享和边缘位置。</block>
  <block id="0c9f570b7b5b34f0fbdab873e122d432" category="paragraph"><block ref="0c9f570b7b5b34f0fbdab873e122d432" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b9e8ad2bf50c8da3a637a8858d3a1391" category="paragraph">当用户根据与站点关联的子网使用 Active Directory 凭据登录时， DFS 客户端将使用相应的链接来访问数据。</block>
  <block id="6a6b2107f2b5daadfd13df04f769a587" category="paragraph"><block ref="6a6b2107f2b5daadfd13df04f769a587" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8aabec6a7d3f54b83478824808357c91" category="paragraph">文件图标会根据文件是否已缓存而变化；未缓存的文件在图标的左下角显示灰色 X 。边缘位置的用户访问某个文件后，该文件将被缓存，并且图标将发生变化。</block>
  <block id="1014b6d5d432758e9041c845e4da7830" category="paragraph"><block ref="1014b6d5d432758e9041c845e4da7830" category="inline-image-macro-rx" type="image"></block></block>
  <block id="610eee89db61eda57b4b6da39d799845" category="paragraph">如果某个文件已打开，而另一个用户正在尝试从边缘位置打开同一文件，则系统会提示用户选择以下内容：</block>
  <block id="5a31b6c180e91d3c3d3c1053bbab642c" category="paragraph"><block ref="5a31b6c180e91d3c3d3c1053bbab642c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1c6f3b21447f91b42ceee404afc53720" category="paragraph">如果用户选择在原始副本可用时接收通知的选项，则系统会按如下所示通知用户：</block>
  <block id="922c6f30fa0f74f32df2fac11a3bf378" category="paragraph"><block ref="922c6f30fa0f74f32df2fac11a3bf378" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4b9bc3a03a8ae9cef2c5a66238e5ab25" category="inline-link">有关 Talon 和 Azure NetApp Files 部署的视频</block>
  <block id="e725329a19c23f541a0bdbead9c9b1e7" category="paragraph">有关详细信息，请参见此<block ref="92818ea025c5b78ace999366164c2c46" category="inline-link-rx"></block>。</block>
  <block id="fc95bd8bc19564339fe05c7bad1b7662" category="section-title">SaaS 备份</block>
  <block id="482cadbeebfa6f9c4f062c1f2724d546" category="paragraph">NetApp VDS 可为 Salesforce 和 Microsoft Office 365 （包括 Exchange ， SharePoint 和 Microsoft OneDrive ）提供数据保护。下图显示了 NetApp VDS 如何为这些数据服务提供 SaaS Backup 。</block>
  <block id="0e3aff181138166393e5e5e698c994d2" category="paragraph"><block ref="0e3aff181138166393e5e5e698c994d2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="201e09e85ad81db8a19ef9f20c05d1a5" category="inline-link">此视频</block>
  <block id="4cde65566156674196c087d89ded5c3b" category="paragraph">有关 Microsoft Office 365 数据保护的演示，请参见<block ref="158107d7e819a2ef8c2e8f24519fc9a9" category="inline-link-rx"></block>。</block>
  <block id="a067b7082c28e7dbf856ab55b29d1acb" category="paragraph">有关 Salesforce 数据保护的演示，请参见<block ref="dd6e5767407887626a36af7b68defda9" category="inline-link-rx"></block>。</block>
  <block id="2cb2b89213bccd89f81cfbb17b2e070b" category="inline-link-macro">下一步：操作管理</block>
  <block id="1f3d3eae36241941c6f7a1eaf3615eac" category="paragraph"><block ref="1f3d3eae36241941c6f7a1eaf3615eac" category="inline-link-macro-rx"></block></block>
  <block id="7b0f97bc4856c6b0645650d13b53acb5" category="summary">如果内部资源与云资源之间存在连接，则可以将 NetApp 虚拟桌面服务扩展到内部环境。企业可以使用 Express Route 或站点间 IPsec VPN 连接建立与 Microsoft Azure 的链接。您也可以使用专用链路或使用 IPsec VPN 通道以类似方式创建指向其他云的链接。</block>
  <block id="995d0ae58fc48c0007c3a45046221736" category="doc">混合云环境</block>
  <block id="610e3513c7222cae8d2a7c450741211a" category="paragraph">在解决方案验证中，我们使用了下图所示的环境。</block>
  <block id="0d9e9a129d4eb3389af12248eb017ef1" category="paragraph"><block ref="0d9e9a129d4eb3389af12248eb017ef1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="60ca94382604fd3deb8a198feed31f1b" category="paragraph">在内部环境中，我们有多个 VLAN 用于管理，远程桌面会话主机等。它们位于 172.21.146-150.0/24 子网中，并使用 Microsoft 远程路由访问服务路由到公司网络。我们还执行了以下任务：</block>
  <block id="b613a58cb27d96b09550b74a616e43d8" category="list-text">我们注意到了 Microsoft 路由和远程访问服务器（ RRAS ；标识为 IPchicken.com ）的公有 IP 。</block>
  <block id="b0aa9d967a62cfeb9427c31c3968fb31" category="list-text">我们在 Azure 订阅上创建了虚拟网络网关资源（基于路由的 VPN ）。</block>
  <block id="2db3e884a3b1d82162c06df081b8e8f0" category="list-text">我们创建了一个连接，用于为 Microsoft RRAS 服务器的公有 IP 提供本地网络网关地址。</block>
  <block id="ac7b5e31749488bdca809cc69e83bcec" category="list-text">我们在 RRAS 上完成了 VPN 配置，以便使用创建 VPN 网关时提供的预共享身份验证创建虚拟接口。如果配置正确，则 VPN 应处于已连接状态。您还可以使用 pfsense 或其他相关工具创建站点到站点的 IPsec VPN 通道，而不是 Microsoft RRAS 。由于此通道基于路由，因此会根据配置的特定子网重定向流量。</block>
  <block id="064b2713bd54ad7c04715d629ea8d77e" category="paragraph">Microsoft Azure Active Directory 基于 OAuth 提供身份身份验证。企业客户端身份验证通常需要 NTLM 或基于 Kerberos 的身份验证。Microsoft Azure Active Directory 域服务使用 ADConnect 在 Azure Active Directory 和内部域控制器之间执行密码哈希同步。</block>
  <block id="c9ced395d02e614104c13dc687b8d960" category="paragraph">对于此混合 VDS 解决方案验证，我们最初会部署到 Microsoft Azure ，并使用 vSphere 添加了一个额外的站点。此方法的优势在于，平台服务已部署到 Microsoft Azure ，然后可以使用该门户随时进行备份。这样，即使站点 - 站点 VPN 链路已关闭，也可以从任意位置轻松访问服务。</block>
  <block id="759e5787427ba679d146727a04400c46" category="paragraph">要添加其他站点，我们使用了一个名为 DCConfig 的工具。该应用程序的快捷方式可在 Cloud Workspace Manager （ CWMgr ） VM 的桌面上找到。启动此应用程序后，导航到 "DataCenter 站点 " 选项卡，添加新的数据中心站点并填写所需信息，如下所示。此 URL 指向 vCenter IP 。在添加配置之前，请确保 CWMgr 虚拟机可以与 vCenter 进行通信。</block>
  <block id="ae5bd963078c278284e2aabaefb99232" category="admonition">确保在 CloudWorkspace Manager 上安装 vSphere PowerCLI 5.1 ，以便能够与 VMware vSphere 环境进行通信。</block>
  <block id="e0072a2f037098ba3ee9ec9e1113f1ee" category="paragraph">下图显示了内部数据中心站点配置。</block>
  <block id="30efb5f8dd999c0f737bf30327346d6f" category="paragraph"><block ref="30efb5f8dd999c0f737bf30327346d6f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f823fddfaa31c0b2b910c651849fe1e0" category="paragraph">请注意，可以根据特定集群，主机名或可用 RAM 空间为计算资源提供筛选选项。存储资源的筛选选项包括数据存储库上的最小可用空间或每个数据存储库的最大 VM 数。可以使用正则表达式排除数据存储库。单击保存按钮以保存配置。</block>
  <block id="40cf95c01dfbdb8adc110507697330bf" category="paragraph">要验证配置，请单击测试按钮或单击加载虚拟机管理程序，然后选中 vSphere 部分下的任何下拉列表。应使用适当的值填充它。对于默认配置站点，最好将主虚拟机管理程序设置为 yes 。</block>
  <block id="b081b97ab471a870119bb85e196c0d63" category="paragraph">在 VMware vSphere 上创建的 VM 模板将用作 VDS 上的配置集合。配置集合有两种形式：共享和 VDI 。共享配置收集类型用于远程桌面服务，对于这些服务，所有服务器都应用一个资源策略。VDI 类型用于单独分配资源策略的 WVD 实例。可以为配置集合中的服务器分配以下三个角色之一：</block>
  <block id="9a0b479d2d7eaed435c14e20818841d9" category="list-text">终端服务和数据服务器角色的 * TSDATA.* 组合。</block>
  <block id="286b69ba39f77189135fbf4c39786e12" category="list-text">* 终端服务 * （会话主机）。</block>
  <block id="0b39ab3df8d28606b4bb8f5891022692" category="list-text">* 数据。 * 文件服务器或数据库服务器。定义服务器角色时，必须选择 VM 模板和存储（数据存储库）。选择的数据存储库可以限制为特定的数据存储库，也可以使用 " 使用最少 " 选项，在该选项中，系统会根据数据使用情况选择数据存储库。</block>
  <block id="fb89cc64fafb0e1626269bc00c07ae73" category="paragraph">每个部署都根据 Active Users ， Fixed ， Server Load 或 User Count 为云资源分配设置了 VM 资源默认值。</block>
  <block id="d00f03f39f8119980cb5240353d345b1" category="inline-link-macro">接下来：使用 Login VSI 进行单服务器负载测试</block>
  <block id="af5c949297d5415f4710bd1af3f1e7a7" category="paragraph"><block ref="af5c949297d5415f4710bd1af3f1e7a7" category="inline-link-macro-rx"></block></block>
  <block id="18dbdef148da0fb68861cf1b6aeeeb40" category="summary">通过采用 NetApp VDS 的混合 VDI ，服务提供商和企业虚拟桌面管理员可以轻松地将资源扩展到其他云环境，而不会影响其用户。在 NetApp HCI 上部署内部资源可以更好地控制 GPU 资源，并允许您根据需要扩展计算或存储节点。</block>
  <block id="0fe8a299bf61a0d1bbca5d975dc94fcc" category="paragraph">通过采用 NetApp VDS 的混合 VDI ，服务提供商和企业虚拟桌面管理员可以轻松地将资源扩展到其他云环境，而不会影响其用户。拥有内部资源可以更好地控制资源，并提供多种选择（计算， GPU ，存储和网络）来满足需求。</block>
  <block id="976894dcc596e37094668684315ccac4" category="paragraph">此解决方案适用场景的使用情形如下：</block>
  <block id="f9bfa55b1c8ab8884a1452fa3c9cb975" category="list-text">突发到云中，以应对对远程桌面和应用程序的需求激增</block>
  <block id="6b53dc409ecc50a533e93345ddf1f2ee" category="list-text">通过在内部使用闪存存储和 GPU 资源托管远程桌面和应用程序，降低长期运行的 TCO</block>
  <block id="f1de7e15d0b0c3caaafa1a47204338c7" category="list-text">跨云环境轻松管理远程桌面和应用程序</block>
  <block id="f9ce5b54f5428c82364a39f17156cc4f" category="list-text">使用软件即服务模式和内部资源体验远程桌面和应用程序</block>
  <block id="675ee473db5bbe3911c19a4e43f8ec3f" category="list-text">希望了解混合 VDS 要求的 EUC /VDI 架构师</block>
  <block id="a7f381741a2ff77b61bc4b7bc2e3d04f" category="list-text">希望帮助客户满足远程桌面和应用程序需求的 NetApp 合作伙伴</block>
  <block id="efa648658230830c2b9ac1a0647002d7" category="list-text">希望满足远程桌面和应用程序需求的现有 NetApp HCI 客户</block>
  <block id="2fa4089eb34d18d2b64eaab8eed9692d" category="inline-link-macro">接下来： NetApp 虚拟桌面服务概述</block>
  <block id="bf817f81e35d1d9f2620def86f22dcc3" category="paragraph"><block ref="bf817f81e35d1d9f2620def86f22dcc3" category="inline-link-macro-rx"></block></block>
  <block id="b4f83b03956523a39e8bbbd0895f0f29" category="section-title">Cloud Insights</block>
  <block id="52f9ec21735243ad9917cda3ca077d32" category="section-title">GPU</block>
  <block id="3d564c1c20cf4265a5094ead9dc937f6" category="paragraph">NetApp 公司 Suresh ThopPay</block>
  <block id="64241e0b33fb869cb12ff8e1ec74f806" category="summary">NetApp VDS 使用 Azure Active Directory 进行身份验证，使用 Azure Active Directory 域服务进行 NTLM/Kerberos 身份验证。ADConnect 工具可用于将内部 Active Directory 域与 Azure Active Directory 同步。</block>
  <block id="92726ab5faeb2cb9208eaac9af0346bd" category="doc">用户管理</block>
  <block id="c758de7e1477d6707c6709441d41a5e9" category="paragraph">可以从门户添加新用户，也可以为现有用户启用云工作空间。工作空间和应用程序服务的权限可以由单个用户或组控制。从管理门户中，可以定义管理用户来控制门户，工作空间等的权限。</block>
  <block id="b1bb3db86aec5efef6f7cc0d0d7c6331" category="paragraph">下图显示了 NetApp VDS 中的用户管理。</block>
  <block id="ed5018356119de97fa1ab09c0eeab65a" category="paragraph"><block ref="ed5018356119de97fa1ab09c0eeab65a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1350c851c78a6cdb31c6fe46ddb499c2" category="paragraph">每个工作空间都位于云工作空间 OU 下自己的 Active Directory 组织单位（ OU ）中，如下图所示。</block>
  <block id="a5484d6de39aa020af1aa382d6d52c5e" category="paragraph"><block ref="a5484d6de39aa020af1aa382d6d52c5e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3fad2f68853fae9ef870ed5535896790" category="paragraph">有关详细信息，请参见<block ref="b5d59c719b42a4e7d2b711482aa2f54d" category="inline-link-rx"></block> 有关 NetApp VDS 中的用户权限和用户管理的信息。</block>
  <block id="48a8649f1ce9d97848d70480ce7fea9c" category="paragraph">如果使用数据中心的 API 调用将 Active Directory 组定义为 CRAUserGroup ，则该组中的所有用户都将导入到 CloudWorkspace 中，以便使用 UI 进行管理。为用户启用云工作空间后， VDS 将创建用户主文件夹，设置权限，用户属性更新等。</block>
  <block id="9e30d1bf5e5278a123ad0ddab43066b7" category="paragraph">如果选中 VDI User Enabled ，则 VDS 将创建一个专用于该用户的单会话 RDS 计算机。它会提示您配置模板和数据存储库。</block>
  <block id="093d2ddf98cacaf853b6f986ca9bd647" category="paragraph"><block ref="093d2ddf98cacaf853b6f986ca9bd647" category="inline-image-macro-rx" type="image"></block></block>
  <block id="46bccf4889fab263d6edc63e631883a7" category="inline-link-macro">下一步：工作空间管理</block>
  <block id="e98fdb0b8697a2cf005527be51872d0d" category="paragraph"><block ref="e98fdb0b8697a2cf005527be51872d0d" category="inline-link-macro-rx"></block></block>
  <block id="57eae0e26c1c0bbaec9110d010f68f7a" category="summary">NetApp HCI 是一种混合云基础架构，由多个存储节点和计算节点组成。根据型号的不同，它可以是双机架单元或单机架单元。部署 VM 所需的安装和配置通过 NetApp 部署引擎（ NDE ）自动完成。计算集群通过 VMware vCenter 进行管理，存储集群通过使用 NDE 部署的 vCenter 插件进行管理。</block>
  <block id="855faa205a8f23993f1a0fe1ac2cde2f" category="doc">NetApp HCI 概述</block>
  <block id="95404d16cb98456e438a61d79a0a31d9" category="paragraph">NetApp HCI 是一种混合云基础架构，由多个存储节点和计算节点组成。根据型号的不同，它可以是双机架单元或单机架单元。部署 VM 所需的安装和配置通过 NetApp 部署引擎（ NDE ）自动完成。计算集群通过 VMware vCenter 进行管理，存储集群通过使用 NDE 部署的 vCenter 插件进行管理。名为 mNode 的管理 VM 会作为 NDE 的一部分进行部署。</block>
  <block id="b6ab683d50d83f639ae697569117a54b" category="paragraph">NetApp HCI 可处理以下功能：</block>
  <block id="d15278d453245d004f8fd55cff421171" category="list-text">版本升级</block>
  <block id="b783caf332f2c3190dcb6ced64290f5a" category="list-text">将事件推送到 vCenter</block>
  <block id="79adeb760f6909dd746e1e7adae6cd58" category="list-text">vCenter 插件管理</block>
  <block id="a45e04274259a13dff2a10641a0fd97f" category="list-text">用于支持的 VPN 通道</block>
  <block id="227590ca6f7ff3f3cc72e49cf277625f" category="list-text">NetApp Active IQ 收集器</block>
  <block id="b0088ee645cccd0951013eb53d0b3816" category="list-text">将 NetApp 云服务扩展到内部环境，实现混合云基础架构。下图显示了 HCI 组件。</block>
  <block id="1a811712e3bea62b6f5bd1851b149fc3" category="paragraph"><block ref="1a811712e3bea62b6f5bd1851b149fc3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="65f0d96af236e344bd739fd20df1fa5d" category="paragraph">存储节点可用作半宽或全宽机架单元。首先至少需要四个存储节点，一个集群最多可扩展到 40 个节点。一个存储集群可以在多个计算集群之间共享。所有存储节点都包含一个缓存控制器，用于提高写入性能。单个节点可提供 50 ， 000 或 100 ， 000 IOPS ，块大小为 4 k 。</block>
  <block id="d31f04e865057f7055f2d8287b92ba2d" category="paragraph">NetApp HCI 存储节点运行 NetApp Element 软件，该软件可提供最小，最大和突发 QoS 限制。存储集群支持混合使用多个存储节点，但一个存储节点不能超过总容量的三分之一。</block>
  <block id="449aaf51a6dfa9c0e17423ae5938d674" category="inline-link">《 VMware 兼容性指南》</block>
  <block id="1046a3e2377d26c40f75eb2cd2f268da" category="admonition">NetApp 支持将其存储连接到中列出的任何计算服务器<block ref="72cc7e3e2b2d7f777e05aa309ef5f733" category="inline-link-rx"></block>。</block>
  <block id="bc1a52314ab38efacf0a83e9df0b01cc" category="paragraph">计算节点提供半宽，全宽和两种机架单元大小。NetApp HCI H410C 和 H610C 基于可扩展的 Intel Skylake 处理器。H615C 基于第二代可扩展 Intel 级联湖处理器。有两种计算型号包含 GPU ： H610C 包含两个 NVIDIA M10 卡， H615C 包含三个 NVIDIA T4 卡。</block>
  <block id="683876986e8fe1045fa768b4a8675ea9" category="paragraph"><block ref="683876986e8fe1045fa768b4a8675ea9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9667ae1b4be7e4c088e175844fd675e6" category="paragraph">NVIDIA T4 具有 40 个 RT 核心，可提供实时光线跟踪所需的计算能力。现在，设计师和工程师使用的相同服务器模式也可供艺术家用来创建照片级的图像，使表面的光像实际生活中的光弹出一样。这种支持 RTX 的 GPU 可实现高达每秒 5 GB 的实时光线跟踪性能。NVIDIA T4 与 Quadro 虚拟数据中心工作站（ Quadro vDWS ）软件相结合，可帮助艺术家从任何位置在任何设备上创建具有准确阴影，镜像和折光效果的照片级设计。</block>
  <block id="bee5034948808ff859affdc8ba03b52c" category="paragraph">利用 Tensor 核心，您可以运行深度学习推理工作负载。在运行这些工作负载时，采用 Quadro vDWS 的 NVIDIA T4 的性能比纯 CPU 服务器驱动的虚拟机快多达 25 倍。NetApp H615C 在一个机架单元中具有三个 NVIDIA T4 卡，是图形和计算密集型工作负载的理想解决方案。</block>
  <block id="1f99f286804bf2f5a91a1cdd1733decf" category="paragraph">下图列出了 NVIDIA GPU 卡并对其功能进行了比较。</block>
  <block id="67c0c3f98979352a9ed10f0de3d551f3" category="paragraph"><block ref="67c0c3f98979352a9ed10f0de3d551f3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b3b4fc2931642829391b479ea5fb1e9d" category="paragraph">对于知识型员工使用情形， M10 GPU 仍然是最佳的 TCO 解决方案。但是，如果要在 GPU 上进行标准化，而 GPU 可用于多种使用情形，例如虚拟工作站，图形性能，实时交互式渲染和推理，则 T4 是一个很好的替代方案。借助 T4 ， IT 可以利用相同的 GPU 资源来运行混合工作负载―例如，在白天运行 VDI ，并将资源重新用于在夜间运行计算工作负载。</block>
  <block id="bdced20c33601e0149aecb44114cfdc5" category="paragraph">H610C 计算节点的大小为两个机架单元； H615C 的大小为一个机架单元，耗电较少。H615C 支持 H.264 和 H.265 （高效视频编码（ High Efficiency Video Coding ， HEVC ） 4 ： 4 ： 4 编码和解码。此外，它还支持越来越主流的 VP9 解码器；即使 YouTube 提供的 Web 容器软件包也会使用 VP9 编解码器来处理视频。</block>
  <block id="fe046fc197d12a64da1ea78423a2a809" category="paragraph">计算集群中的节点数由 VMware 决定；目前，使用 VMware vSphere 7.0 Update 1 时为 96 个。启用增强型 vMotion 兼容性（ EVC ）后，支持在集群中混用不同型号的计算节点。</block>
  <block id="f0bee2b90db3a99440b1a724c49ce1a2" category="inline-link-macro">下一步： NVIDIA 许可</block>
  <block id="e0bca2831f4cccfcaebc75e9555a1719" category="paragraph"><block ref="e0bca2831f4cccfcaebc75e9555a1719" category="inline-link-macro-rx"></block></block>
  <block id="868ab86f19065016e9a2f077c5ec1ede" category="summary">任务工作人员可以从可供其使用的应用程序列表中快速启动应用程序。应用程序服务从远程桌面服务会话主机发布应用程序。借助 WVD ，应用程序组可从多会话 Windows 10 主机池提供类似的功能。</block>
  <block id="aa08bd8b0522ea3a5e9ace598db7162c" category="doc">应用程序管理</block>
  <block id="f83a66a518ff3f3f44725a09d9666710" category="paragraph">对于为用户提供支持的办公室员工，可以使用服务板手动配置所需的应用程序，也可以使用 NetApp VDS 中的脚本化事件功能自动配置这些应用程序。</block>
  <block id="546d3f7d3bb8a664a6ba4a3fb2f68c30" category="inline-link">NetApp 应用程序授权页面</block>
  <block id="175ba74f5b7d0ecd3f531c5fce21a240" category="paragraph">有关详细信息，请参见<block ref="03e02ecfc967e94041a86f599e14ac44" category="inline-link-rx"></block>。</block>
  <block id="fd324b11a163d2dae6bf3f9654381d16" category="inline-link-macro">接下来：适用于虚拟桌面服务的 ONTAP 功能</block>
  <block id="25838148a81bcaa2b7e931ef8cd65a13" category="paragraph"><block ref="25838148a81bcaa2b7e931ef8cd65a13" category="inline-link-macro-rx"></block></block>
  <block id="91af64270656f51ceebeabc4b79ecb07" category="summary">NetApp VDS 可以使用根据所需代码库提供的设置应用程序部署到 Microsoft Azure 。</block>
  <block id="29707848401dd26f02baed07b9a416c1" category="paragraph">NetApp VDS 可以使用根据所需代码库提供的设置应用程序部署到 Microsoft Azure 。当前版本可用<block ref="deb5bc0c1293f06a53a77d04b921abbd" category="inline-link-rx"></block> 即将推出的产品的预览版现已发布<block ref="b5073644bfe6db36c388c6bdbca64b49" category="inline-link-rx"></block>。</block>
  <block id="c4e1987e3c1416cefd772fd61f28dfb4" category="paragraph">请参见<block ref="f8270911b627accef36841f0608bc58d" category="inline-link-rx"></block> 有关部署说明，请参见。</block>
  <block id="4c9affd9b517fc81a601ea0861dc5399" category="inline-link-macro">接下来：混合云环境</block>
  <block id="2045518eb8a77a5284f073d0387f9a58" category="paragraph"><block ref="2045518eb8a77a5284f073d0387f9a58" category="inline-link-macro-rx"></block></block>
  <block id="bf6d8e47240024519d1dbb6f5582ce66" category="summary">图形工作站通常用于制造业，医疗保健，能源，媒体和娱乐，教育， 架构等。对于图形密集型应用程序，移动性往往受到限制。</block>
  <block id="942cd85feff07ce32d619d2f724254a8" category="doc">行业解决方案</block>
  <block id="fb987436787e4263bfee440b93703026" category="paragraph">为了解决移动性问题描述问题，虚拟桌面服务可以使用云中的硬件资源或 NetApp HCI 为从任务员工到专家用户的所有类型的员工提供桌面环境，包括灵活的 GPU 配置选项。VDS 支持用户使用笔记本电脑，平板电脑和其他移动设备从任意位置访问工作环境。</block>
  <block id="68ae3286d2356ff8dd51c2a397ca20eb" category="paragraph">要使用 ANSYS Fluent ， ANSYS MechanIC ， AutoDESCad ， AutoDESCIGAN ， AutoDESCUTE VENIGAN ， AutoDESCKS Max 等软件运行制造工作负载， ｛ \f4 ｝ ｛ \f4 ｝ ｛ \f4 ｝ ｛ \f4 ｝ ｛ Systèmes \f4 ｝ ｛ \f4 ｝ ｛ \f4 ｝ ｛ \f4 ｝ ｛ \f4 ｝ ｛ \f4 ｝ ｛ Systèmes 下表列出了各种云（截至 2021 年 1 月）上可用的 GPU 。</block>
  <block id="f5168df5bb95078acdfb440f5975a601" category="cell">GPU 型号</block>
  <block id="1668ca1bd914c1d847f23b491319ac91" category="cell">Microsoft Azure</block>
  <block id="b314ebdba178173db01ffda8d3a5af67" category="cell">Google 计算（ GCP ）</block>
  <block id="943ca3782b28d89aff2f86a50b332b3c" category="cell">Amazon Web Services （ AWS ）</block>
  <block id="8df8a98ff17d4d77329f5da80da051e8" category="cell">内部部署（ NetApp HCI ）</block>
  <block id="aaba9e920b39aa997c69800a9e589cd4" category="cell">NVIDIA M60</block>
  <block id="e095ad80d900786110d53ecd5cbd3e3e" category="cell">NVIDIA T4</block>
  <block id="c909ed1507c6d5537f0cc0966e83d3f1" category="cell">NVIDIA P100</block>
  <block id="c015c1cc95335d3b867c145c056df10b" category="cell">NVIDIA P4</block>
  <block id="e8130bb14c9382769c22861fb54683b3" category="paragraph">此外，还提供与其他用户的共享桌面会话以及专用个人桌面。虚拟桌面可以具有一到四个 GPU ，也可以在 NetApp HCI 中使用部分 GPU 。NVIDIA T4 是一款多功能 GPU 卡，可满足各种用户工作负载的需求。NetApp HCI H615C 上的每个 GPU 卡都有 16 GB 的帧缓冲区内存，每个服务器有三个卡。可以托管在一个 H615C 服务器上的用户数量取决于用户工作负载。</block>
  <block id="4d8b78a5288c49df59136421211718c9" category="cell">用户 / 服务器</block>
  <block id="704316eb872cbca84a8b30d74c2708a4" category="cell">轻型（ 4 GB ）</block>
  <block id="6f3a945a32dd8eba9f2fae42715f7246" category="cell">中型（ 8 GB ）</block>
  <block id="adb5e5b63d256f3854fc7276b3e8d14a" category="cell">重磅（ 16 GB ）</block>
  <block id="8938ba807f25f2cd88559b9f84bbc3de" category="paragraph">要确定用户类型，请在用户使用执行典型任务的应用程序时运行 GPU 配置程序工具。GPU 配置程序可捕获内存需求，显示数量以及用户所需的分辨率。然后，您可以选择满足您要求的 vGPU 配置文件。</block>
  <block id="1b014a2b6e4c329b9696aae7afac88db" category="paragraph">使用 GPU 的虚拟桌面可支持高达 8K 的显示分辨率，而实用程序 nView 可将一个监控器拆分为多个区域，以便使用不同的数据集。</block>
  <block id="30f1a84c728d67b9606115a1531aa9c3" category="paragraph">借助 ONTAP 文件存储，您可以实现以下优势：</block>
  <block id="826f3d14d0c34cd0f8ced37e07a1537d" category="list-text">一个命名空间，可通过 4000 亿个文件增长到 20 PB 的存储空间，而无需大量管理输入</block>
  <block id="1d7ab3c9a162bc81b216bdc0948094f2" category="list-text">一种可通过全局文件缓存跨越全球的命名空间</block>
  <block id="2d4169e0cb52db60fd11576990b38a54" category="list-text">利用受管 NetApp 存储实现安全多租户</block>
  <block id="a44c13ec320997e84b87b0fef150c39f" category="list-text">使用 NetApp FabricPool 将冷数据迁移到对象存储</block>
  <block id="3749fba0ca78e5e5c70f899da89be2c3" category="list-text">通过文件系统分析快速提供文件统计信息</block>
  <block id="63d0ec819ea12b4e83e0ef4a1cd2bb1c" category="list-text">将存储集群扩展到多达 24 个节点，以提高容量和性能</block>
  <block id="818a13118ddb0908ba00c1b7ca18dc2c" category="list-text">能够使用配额控制存储空间，并具有 QoS 限制的性能保障</block>
  <block id="ef94cd0a62341c72316393b1044582f8" category="list-text">通过加密保护数据安全</block>
  <block id="c1e36bb7dca3b0da98164eb5956e3f0f" category="list-text">满足广泛的数据保护和合规性要求</block>
  <block id="6a632279908ad5d56ab46a826de6c9f2" category="list-text">提供灵活的业务连续性选项</block>
  <block id="3c2622109ae4dc55b73e9bb6516e5616" category="paragraph"><block ref="3c2622109ae4dc55b73e9bb6516e5616" category="inline-link-macro-rx"></block></block>
  <block id="0581202e42d61d6dfe4875c70d00cdac" category="summary">NetApp 虚拟桌面服务可提供一个易于使用的虚拟桌面和应用程序环境，并重点关注业务挑战。通过使用 NetApp HCI 扩展 VDS ，您可以在 VDS 环境中使用强大的 NetApp 功能，包括实时重复数据删除，数据缩减，精简配置和数据压缩。</block>
  <block id="33491606222aecbfbdfa3fc8f13ffded" category="paragraph">NetApp 虚拟桌面服务可提供一个易于使用的虚拟桌面和应用程序环境，并重点关注业务挑战。通过在内部 ONTAP 环境中扩展 VDS ，您可以在 VDS 环境中使用强大的 NetApp 功能，包括快速克隆，实时重复数据删除，数据缩减，精简配置， 和数据压缩。这些功能可以节省存储成本并提高全闪存存储的性能。借助 VMware vSphere 虚拟机管理程序，可通过使用虚拟卷和 vSphere API 实现阵列集成，最大限度地缩短服务器配置时间。利用混合云，客户可以选择适合其苛刻工作负载的环境，并节省资金。内部运行的桌面会话可以根据策略访问云资源。</block>
  <block id="df6f0981c6f92ef3adb9059f5b387e4a" category="paragraph"><block ref="df6f0981c6f92ef3adb9059f5b387e4a" category="inline-link-macro-rx"></block></block>
  <block id="a3af49b9146a6a36e8bea4c525797782" category="summary">此页面将讨论 DCConfig 工具， TestV 直流工具和日志文件。</block>
  <block id="d56ee3058d1c4ab634cd3e1e606f2064" category="doc">工具和日志</block>
  <block id="626b1761e15913fc6f955e1d76a0ac10" category="section-title">DCConfig 工具</block>
  <block id="65bbb1c25836b86f699bd2141a545958" category="paragraph">DCCconfig 工具支持以下虚拟机管理程序选项来添加站点：</block>
  <block id="2c76e52255da65e5fcf88143f91aa431" category="paragraph"><block ref="2c76e52255da65e5fcf88143f91aa431" category="inline-image-macro-rx" type="image"></block></block>
  <block id="da2595b668536baaea606e674ade5181" category="paragraph"><block ref="da2595b668536baaea606e674ade5181" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2eb34c5311117b56d2c8eb33494052a3" category="paragraph">可以使用 GPO 处理共享数据的特定工作空间驱动器号映射。专业服务或支持团队可以使用高级选项卡自定义 Active Directory OU 名称，启用或禁用 FSLogix 部署的选项，各种超时值等设置。</block>
  <block id="8688a5dde644921ea673f5bc2dde55c3" category="paragraph"><block ref="8688a5dde644921ea673f5bc2dde55c3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f6c93f3609bb3be799ed32b6a601d5fc" category="section-title">命令中心（以前称为 TestV 直流工具）</block>
  <block id="46433f623976c5af8ebdc7ab92816a48" category="inline-link-macro">命令中心概述</block>
  <block id="bf69b43c185864d35a461d8f1c3ea56e" category="paragraph">要启动 Command Center 和所需角色，请参见 <block ref="d7ce3bd63a8a34b9b1630abb82acb951" category="inline-link-macro-rx"></block>。</block>
  <block id="b425cca2998cc4a7041a0baf7681e912" category="paragraph">您可以执行以下操作：</block>
  <block id="b462233b13790bce7e4c6449d02cf930" category="list-text">更改工作空间的 SMB 路径。</block>
  <block id="ee347a7998de9774369e6853f1ed7bcc" category="paragraph"><block ref="ee347a7998de9774369e6853f1ed7bcc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c524c01ee30f2f1597bb3e90c721dd8c" category="list-text">更改用于配置收集的站点。</block>
  <block id="ccb9931a262a0b169576103526fa2ab2" category="paragraph"><block ref="ccb9931a262a0b169576103526fa2ab2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="af6ba12de0b8c93d5f768c83143c7d99" category="section-title">日志文件</block>
  <block id="017b9aa293da801da252c728736f02db" category="inline-link-macro">自动化日志</block>
  <block id="580acc766c3f0e464b462d271028dc32" category="paragraph"><block ref="5f6615a18cd0f2f0bcfb7578db5d1c9e" category="inline-image-macro-rx" type="image"></block>检查 <block ref="11597d7347faee3da56e0e01d5ba1de2" category="inline-link-macro-rx"></block> 了解更多信息。</block>
  <block id="881784d32d0ec795e6fd477e7c0fe8f7" category="paragraph"><block ref="881784d32d0ec795e6fd477e7c0fe8f7" category="inline-link-macro-rx"></block></block>
  <block id="21a1e68164f738b8be1dae11d5a694b3" category="section-title">数据保护</block>
  <block id="d1c59e5cbf684efb4f69f300e72a4ac9" category="doc">操作管理</block>
  <block id="787e198d8fa4e242ef62df0a63fc0f5d" category="inline-link">对 VDA 操作失败页面进行故障排除</block>
  <block id="8086a7a818fcf045c7b05845b97629ed" category="paragraph">有关 VDS 日志文件的信息，请参见<block ref="0ecc734e7dc5f9a5685babbaab9faaa5" category="inline-link-rx"></block>。</block>
  <block id="88a80237ffcd0c20f5f4d4e7f9eda875" category="inline-link">VDA 组件和权限页面</block>
  <block id="000ea3efdd5a83f774a0c189fa2dcdc3" category="paragraph">有关所需最低权限的详细信息，请参见<block ref="573c5bde2dc73c6cb4f63bbc5571c0e2" category="inline-link-rx"></block>。</block>
  <block id="81bb80b99b1ba5d80f9ba049cbd0c42f" category="inline-link">克隆虚拟机页面</block>
  <block id="91aa73f3df8edb27ce6b20c984ff5d3e" category="paragraph">如果要手动克隆服务器，请参见<block ref="837d5521d53fff809b7ef3ad6b17ecfa" category="inline-link-rx"></block>。</block>
  <block id="7d71ba8ea6767ea10d7cd61cbd787f89" category="inline-link">自动增加磁盘空间功能页面</block>
  <block id="abf872062b9eb23bdf6d671c27508d96" category="paragraph">要自动增加 VM 磁盘大小，请参见<block ref="627eb07506141f4255cfbedd7fe89646" category="inline-link-rx"></block>。</block>
  <block id="cc6d8546c611bac5ab11fa1a5948ac1d" category="inline-link">最终用户要求页面</block>
  <block id="e148ddcb2ae92c77834ae7f48df04786" category="paragraph">要确定用于手动配置客户端的网关地址，请参见<block ref="3a5e891ac91af8fef1ca1458249fe76e" category="inline-link-rx"></block>。</block>
  <block id="efb9afc2e01262d41bf1fa60ddc36414" category="paragraph">NetApp Cloud Insights 是一款基于 Web 的监控工具，可让您全面了解在 NetApp 和其他第三方基础架构组件上运行的基础架构和应用程序。Cloud Insights 支持私有云和公有云来监控，故障排除和优化资源。</block>
  <block id="4894eb73d4d2ad7eaebb0968e871cb70" category="paragraph">只有采集单元 VM （可以是 Windows 或 Linux ）必须安装在私有云上，才能从数据收集器收集指标，而无需代理。通过基于代理的数据收集器，您可以从 Windows 性能监控器或 Telegraf 支持的任何输入代理中提取自定义指标。</block>
  <block id="32e49e2645f559763ede8e346bbcb816" category="paragraph">下图显示了 Cloud Insights VDS 信息板。</block>
  <block id="cb9ecf4f0010c9ec12b73a00e06a9237" category="paragraph"><block ref="cb9ecf4f0010c9ec12b73a00e06a9237" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3bd1406c323c740b5b2f2a7615ad62ca" category="paragraph">有关 NetApp Cloud Insights 的详细信息，请参见<block ref="5fdb6e8524eb99916602753c65f2f24e" category="inline-link-rx"></block>。</block>
  <block id="8a883bd6e43add9d94d923704bc177a7" category="inline-link-macro">接下来：工具和日志</block>
  <block id="28f1e69837c0c21f4dcb8260d6ab5e97" category="paragraph"><block ref="28f1e69837c0c21f4dcb8260d6ab5e97" category="inline-link-macro-rx"></block></block>
  <block id="48a2bc9c10adbea95074594015793272" category="summary">工作空间由一个桌面环境组成，该环境可以是在内部或任何支持云环境上托管的共享远程桌面会话。借助 Microsoft Azure ，桌面环境可以在 Windows Virtual Desktop 中持久存在。每个工作空间都与特定组织或客户端相关联。</block>
  <block id="1da2374b50f497e208c8dab11e6b2c98" category="doc">工作空间管理</block>
  <block id="fb67e63246489555a7e8929a138ced4c" category="paragraph">工作空间由桌面环境组成；可以是在内部或任何受支持的云环境上托管的共享远程桌面会话。借助 Microsoft Azure ，桌面环境可以在 Windows Virtual Desktop 中持久存在。每个工作空间都与特定组织或客户端相关联。下图显示了创建新工作空间时可用的选项。</block>
  <block id="42a6c6312ce8b92836d9e74d89998e89" category="paragraph"><block ref="42a6c6312ce8b92836d9e74d89998e89" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2d49083c2604eac2881e01b4acea428e" category="admonition">每个工作空间都与特定部署相关联。</block>
  <block id="2a1fdca12b05c0f5292a8670b24cb478" category="paragraph">工作空间包含关联的应用程序和应用程序服务，共享数据文件夹，服务器和 WVD 实例。每个工作空间都可以控制各种安全选项，例如强制实施密码复杂性，多因素身份验证，文件审核等。</block>
  <block id="f29490b04a344e19674ee8d1db337d14" category="paragraph">工作空间可以控制工作负载计划以启动额外的服务器，限制每个服务器的用户数或为给定时间段内可用的资源设置计划（始终打开 / 关闭）。还可以配置资源以按需启动。</block>
  <block id="421b47ffd946ca083b65cd668c6b17e6" category="inline-link">视频</block>
  <block id="5a70681d968007936b9d092ba1a93313" category="paragraph">如果需要，此工作空间可以覆盖部署 VM 资源的默认值。对于 WVD ，也可以从云工作空间管理套件门户管理 WVD 主机池（其中包含会话主机和应用程序组）和 WVD 工作空间。有关 WVD 主机池的详细信息，请参见此部分<block ref="283c24f69dac0d05b60b041138870b19" category="inline-link-rx"></block>。</block>
  <block id="ff13351bb4dc0c877064ec1672d6723f" category="inline-link-macro">下一步：应用程序管理</block>
  <block id="bb974af58c318849f0fce8f7c3ecdf37" category="paragraph"><block ref="bb974af58c318849f0fce8f7c3ecdf37" category="inline-link-macro-rx"></block></block>
  <block id="7d37fde7375502ef1013412159477502" category="summary">NetApp 提供许多云服务，包括使用 WVD 或远程应用程序快速配置虚拟桌面，包括与 Azure NetApp Files 快速集成。</block>
  <block id="28850fd0c108cc5f990fc4b4b52ab60d" category="doc">NetApp 虚拟桌面服务概述</block>
  <block id="c70675dc3857ae45ab2475f60c0f1f85" category="paragraph">NetApp 提供许多云服务，包括使用 WVD 或远程应用程序快速配置虚拟桌面以及与 Azure NetApp Files 快速集成。</block>
  <block id="8b32dee3fc7d9223248420cb828c5527" category="paragraph">传统上，为客户配置和交付远程桌面服务需要数周时间。除了配置之外，管理应用程序，用户配置文件，共享数据和组策略对象以强制实施策略可能会很困难。防火墙规则可能会增加复杂性，并需要单独的技能和工具。</block>
  <block id="0276a1f5f692f2e9635f3733b371cf70" category="paragraph">借助 Microsoft Azure Windows 虚拟桌面服务， Microsoft 负责维护远程桌面服务组件，使客户能够专注于在云中配置工作空间。客户必须配置和管理整个堆栈，这需要具备管理 VDI 环境的特殊技能。</block>
  <block id="51db16f7b26a08952beb43836ad3f31d" category="paragraph">借助 NetApp VDS ，客户可以快速部署虚拟桌面，而无需担心在何处安装架构组件，例如代理，网关，代理等。需要完全控制其环境的客户可以与专业服务团队合作来实现其目标。客户使用 VDS 即服务，因此可以专注于关键业务挑战。</block>
  <block id="139562ef7df2deed82d586ebe297a082" category="paragraph">NetApp VDS 是一款软件即服务产品，用于集中管理 AWS ， Azure ， GCP 或私有云环境中的多个部署。Microsoft Windows 虚拟桌面仅在 Microsoft Azure 上可用。NetApp VDS 可在其他环境中编排 Microsoft 远程桌面服务。</block>
  <block id="fd9a0083b0a0e084ce6fb8d2ca64272f" category="paragraph">Microsoft 在 Windows 10 上提供多会话功能，专用于 Azure 上的 Windows 虚拟桌面环境。身份验证和身份由虚拟桌面技术处理； WVD 要求将 Azure Active Directory （使用 AD Connect ）同步到 Active Directory ，并将会话 VM 加入 Active Directory 。RDS 需要使用 Active Directory 进行用户身份和身份验证以及 VM 域加入和管理。</block>
  <block id="416feb9f77def2ffedaab40a538d47e5" category="paragraph">下图显示了一个部署拓扑示例。</block>
  <block id="e377917f3505cdb9fc72b74164df5928" category="paragraph"><block ref="e377917f3505cdb9fc72b74164df5928" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d271ca257d56879fcc9ed95d82aabaa7" category="paragraph">每个部署都与一个 Active Directory 域关联，并为客户端提供一个访问工作空间和应用程序的入口点。具有多个 Active Directory 域的服务提供商或企业通常部署更多。一个跨多个区域的 Active Directory 域通常具有一个包含多个站点的部署。</block>
  <block id="9ea3c4f34057d91531ae286e3efe62c3" category="paragraph">对于 Azure 中的 WVD ， Microsoft 提供了一种由 NetApp VDS 使用的平台即服务。对于其他环境， NetApp VDS 会协调 Microsoft 远程桌面服务的部署和配置。NetApp VDS 既支持 WVD Classic ，也支持 WVD arm ，并且还可用于升级现有版本。</block>
  <block id="3e8cd47ad0ab71d0b3891f85212ccdbc" category="paragraph">每个部署都有自己的平台服务，其中包括 Cloud Workspace Manager （ REST API 端点）， HTML 5 网关（从 VDS 管理门户连接到 VM ）， RDS 网关（客户端访问点）和域控制器。下图展示了用于 RDS 实施的 VDS 控制平台架构。</block>
  <block id="38606818aeffd06d174e51013afc23a1" category="paragraph"><block ref="38606818aeffd06d174e51013afc23a1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e58cad6a2c8c8ff1a585bf8d6ca94560" category="paragraph">对于 RDS 实施，可以使用客户端软件从 Windows 和浏览器轻松访问 NetApp VDS ，该软件可以进行自定义以包含客户标识和映像。根据用户凭据，用户可以访问已批准的工作空间和应用程序。无需配置网关详细信息。</block>
  <block id="c2dcf4d443be38a737d1e580fb4b86ec" category="paragraph">下图显示了 NetApp VDS 客户端。</block>
  <block id="8e7d56f1d99fdc8080a747bf8b1eda75" category="paragraph"><block ref="8e7d56f1d99fdc8080a747bf8b1eda75" category="inline-image-macro-rx" type="image"></block></block>
  <block id="71110c8ffc8b198bc951f6e587fbcddf" category="paragraph">在 Azure WVD 实施中， Microsoft 负责处理客户端的访问入口点，并可供各种操作系统本机使用的 Microsoft WVD 客户端使用。也可以从基于 Web 的门户访问它。客户端软件的配置必须由组策略对象（ GPO ）或客户首选的其他方式处理。</block>
  <block id="9e4318c1c6ae62544ba67e7c0fe55649" category="paragraph">下图展示了适用于 Azure WVD 实施的 VDS 控制平面架构。</block>
  <block id="ba9e4c82a95db68279bffa8ca8a8803f" category="paragraph"><block ref="ba9e4c82a95db68279bffa8ca8a8803f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1d648a5d4acf66674fb86cc7be05bd5e" category="paragraph">除了部署和配置所需组件之外， NetApp VDS 还负责处理用户管理，应用程序管理，资源扩展和优化。</block>
  <block id="3ea30729e0e7f0d666400ccc1a6f7bc3" category="paragraph">NetApp VDS 可以创建用户或授予现有用户帐户对云工作空间或应用程序服务的访问权限。该门户还可用于重置密码和委派管理部分组件。帮助台管理员或 3 级技术人员可以对用户会话进行影子管理，以便进行故障排除或从门户中连接到服务器。</block>
  <block id="061d5215d4dd8b8e2b7d9f2498a4a8c3" category="paragraph">NetApp VDS 可以使用您创建的映像模板，也可以使用市场上现有的映像模板进行基于云的配置。要减少要管理的映像数量，您可以使用基础映像，并且可以使用提供的框架配置所需的任何其他应用程序，以包括任何命令行工具，例如 chocolatey ， MSIX 应用程序连接， PowerShell 等。即使自定义脚本也可以用作计算机生命周期事件的一部分。</block>
  <block id="91d75bd7e517ef4b563021e6d23d8cb9" category="inline-link-macro">接下来： NetApp HCI 概述</block>
  <block id="3806ab54895f78b6c34b626314f84e6e" category="paragraph"><block ref="3806ab54895f78b6c34b626314f84e6e" category="inline-link-macro-rx"></block></block>
  <block id="2cdacde3c74a59c779ff64324954b86f" category="summary">NetApp 虚拟桌面服务（ Virtual Desktop Service ， VDS ）可在主要公有云以及私有云中编排远程桌面服务（ Remote Desktop Services ， RDS ）。VDS 在 Microsoft Azure 上支持 Windows 虚拟桌面（ WVD ）。VDS 可自动执行许多在部署 WVD 或 RDS 后必须执行的任务，包括设置 SMB 文件共享（用于用户配置文件，共享数据和用户主驱动器），启用 Windows 功能，安装应用程序和代理，防火墙和策略等。</block>
  <block id="acb7add6e3cf0ca01c52e60466c321ca" category="doc">TR-4861 ：《采用虚拟桌面服务的混合云 VDI 》</block>
  <block id="bb6a5b934db24610665e58e743983ae4" category="paragraph">对于专用桌面，共享桌面和远程应用程序，用户会使用 VDS 。VDS 提供了脚本化事件，用于自动管理桌面的应用程序，并减少了要管理的映像数量。</block>
  <block id="38e3c8e108e8e361d0712cdfe23e0b38" category="paragraph">VDS 提供了一个管理门户，用于在公有和私有云环境中处理部署。</block>
  <block id="07d07e20c1ad9bd1a3e99e2303879ff9" category="paragraph">2020 年远程员工人数激增，改变了对业务连续性的要求。IT 部门在快速配置虚拟桌面方面面临着新的挑战，因此需要配置灵活性，远程管理以及混合云的 TCO 优势，以便于轻松配置内部和云资源。他们需要混合云解决方案：</block>
  <block id="44ff202cbab5f506b48c6021b19c4b1c" category="list-text">解决了 COVID 后的工作空间现实，支持具有全局动态的灵活工作模式</block>
  <block id="53f994926861d0a62f2893b66d8b2025" category="list-text">通过简化和加快从任务员工到高级用户的所有员工的工作环境部署，实现工作转型</block>
  <block id="831955bd9eabf6724f4e4b01acbb833c" category="list-text">通过提供丰富，安全的 VDI 资源来调动您的员工，而无论其位于何处</block>
  <block id="ab02aa4712e65c237e92874eeef51ecd" category="list-text">简化混合云部署</block>
  <block id="074890ea8810b95d9b381027ff9baef2" category="list-text">自动化并简化风险降低管理</block>
  <block id="60e1de201d0c183e889577e990975f1a" category="paragraph"><block ref="60e1de201d0c183e889577e990975f1a" category="inline-link-macro-rx"></block></block>
  <block id="49fc376ed35249f3841846ede4dab884" category="inline-link">NetApp Cloud Central</block>
  <block id="b1c770f25b823d4453567c0ff9d7cf67" category="summary">此页面提供了在 VMware vSphere 环境中部署 NetApp ONTAP NFS 版本 3 数据存储库的步骤。</block>
  <block id="168dbfe414d4d4089585360152953a57" category="doc">vSphere NFS 数据存储库—使用 ONTAP 的版本 3</block>
  <block id="bbe48fb854ea022537208eeeff822f91" category="section-title">关于此任务</block>
  <block id="2be27a78c84ba5629cd9f2c22983240a" category="paragraph">使用 ONTAP NAS 存储创建 NFS 版本 3 数据存储库。</block>
  <block id="1563a554e82b055714efd37bc6d1fdd6" category="paragraph">对于自动配置，请使用以下脚本之一： <block ref="a45ba722ee80832fb205d0588df91e01" category="inline-xref-macro-rx"></block>， <block ref="d9559d06f0afa5b213d78afb48b783e7" category="inline-xref-macro-rx"></block>或 <block ref="e5e7d2f44064f3bfeddfdbea251f7835" category="inline-xref-macro-rx"></block>。</block>
  <block id="6ac65708de8f04eeb173ca99f3eb19fa" category="section-title">您需要的内容</block>
  <block id="106a118b8a267220cb2c40a4bb68b684" category="list-text">管理 vSphere 环境和 ONTAP 所需的基本技能。</block>
  <block id="00c46d0ea9cdf9a5a37b8af04896741f" category="list-text">运行 ONTAP 9.8 或更高版本的 ONTAP 存储系统（ FAS/AFF/CVO/ONTAP Select/Cloud Volume Service/Azure NetApp Files ）</block>
  <block id="d5ba6255ccf331629f7b1b4598223d33" category="list-text">ONTAP 凭据（ SVM 名称，用户 ID ，密码）</block>
  <block id="190ba592a6988abfd7566be9b5c8217a" category="list-text">NFS 的 ONTAP 网络端口， SVM 和 LUN 信息</block>
  <block id="d5cb637f6500cfa77d4190ebdfd8cce0" category="inline-link-macro">完整的 NFS 配置工作表</block>
  <block id="915142cb27ebec8265b54739a95840b5" category="list-text"><block ref="915142cb27ebec8265b54739a95840b5" category="inline-link-macro-rx"></block></block>
  <block id="24c066a87410cc7b08ad4b5ca45565d7" category="list-text">vCenter Server 凭据</block>
  <block id="a9ab6317871b5547fc7bf0dd22151f00" category="list-text">vSphere 7.0 或更高版本的 vSphere 主机信息</block>
  <block id="d7850596008b347e3797ad7dcb7252e5" category="list-text">NFS VMKernel 适配器 IP 信息</block>
  <block id="9068992a529de63b07b7c2250be12f87" category="list-text">网络交换机</block>
  <block id="0675fa9a38b420775f29ec7a62d9a8a0" category="list-text">使用 ONTAP 系统网络数据端口并连接 vSphere 主机</block>
  <block id="a7fb6a7233e9c40554334921be362af1" category="list-text">为 NFS 配置的 VLAN</block>
  <block id="44786c36009327ad04469602f3f96832" category="list-text">（可选）为 ONTAP 网络数据端口配置的链路聚合</block>
  <block id="503023bddb3bd1c7803b35b4ace6aa7a" category="list-text">适用于 VMware vSphere 的 ONTAP 工具已部署，配置并可随时使用</block>
  <block id="f3a29486bed19a90f2da6d007818b427" category="section-title">步骤</block>
  <block id="c9dd6bad4c7d561872f2e2d498a990bf" category="inline-link">互操作性表工具（ IMT ）</block>
  <block id="4b18348d39655902cd0e183596a82856" category="list-text">检查与的兼容性<block ref="3028580b30f2b1d483aad9f9a7a65c7a" category="inline-link-rx"></block></block>
  <block id="bc295a5edde99316e021476fd74118c6" category="inline-link-macro">验证是否支持 NFS 配置。</block>
  <block id="564210524eadeca61542a5680bf0afca" category="list-text"><block ref="564210524eadeca61542a5680bf0afca" category="inline-link-macro-rx"></block></block>
  <block id="e103d9cdc55ef0be25a4fd8054bc28bc" category="list-text">完成以下 ONTAP 和 vSphere 任务。</block>
  <block id="cfa5eceb5ac37d5ebd3af6f265d9ce4c" category="section-title">ONTAP 任务</block>
  <block id="c54d1c547e26987b98af73634278c77a" category="inline-link-macro">验证 NFS 的 ONTAP 许可证。</block>
  <block id="8174503ab9e5dc2fe2f74068f651770d" category="list-text"><block ref="8174503ab9e5dc2fe2f74068f651770d" category="inline-link-macro-rx"></block></block>
  <block id="5d3f3e14f3096740cb085fa81836d595" category="list-text">使用 `ssystem license show` 命令检查是否已列出 NFS 。</block>
  <block id="8b3434ec0db76b4d537ae9c645aa913c" category="list-text">使用 `license add -license-code &lt; 许可证代码 &gt;` 添加许可证。</block>
  <block id="135850bb72d05ca77b8b8f846429fe71" category="inline-link-macro">按照 NFS 配置工作流进行操作。</block>
  <block id="01a85c06aae02abe9083e7e02d90661f" category="list-text"><block ref="01a85c06aae02abe9083e7e02d90661f" category="inline-link-macro-rx"></block></block>
  <block id="722a3f8fc9c281f41b6ca7a69ca15ec0" category="section-title">VMware vSphere 任务</block>
  <block id="2281b9d958567868b171298a8df5cdee" category="inline-link-macro">按照适用于 vSphere 的 NFS 客户端配置工作流进行操作。</block>
  <block id="c80c5160cfe2127b3ab167103b20488c" category="paragraph"><block ref="c80c5160cfe2127b3ab167103b20488c" category="inline-link-macro-rx"></block></block>
  <block id="63d5049791d9d79d86e9a108b0a999ca" category="section-title">参考</block>
  <block id="f2a693e1f056b96566c4551fcab418f2" category="paragraph">通过 vSphere ，客户可以使用企业级 NFS 阵列为 ESXi 集群中的所有节点提供对数据存储库的并发访问。如数据存储库一节所述，在将 NFS 与 vSphere 结合使用时，可以获得一些易用性和存储效率可见性优势。</block>
  <block id="743fa5a7bc7d4ba215b096e34779d298" category="paragraph">将 ONTAP NFS 与 vSphere 结合使用时，建议采用以下最佳实践：</block>
  <block id="265e673c00294cf97a90c3b0d4fcb076" category="list-text">为 ONTAP 集群中每个节点上的每个 SVM 使用一个逻辑接口（ LIF ）。不再需要以往为每个数据存储库建议的 LIF 。虽然直接访问（ LIF 和同一节点上的数据存储库）是最佳选择，但不要担心间接访问，因为通常对性能的影响极小（微秒）。</block>
  <block id="83deede0d0158f0f2469080b6208e88a" category="list-text">自 VMware Infrastructure 3 以来， VMware 一直支持 NFSv3 。vSphere 6.0 增加了对 NFSv4.1 的支持，该支持可实现 Kerberos 安全性等一些高级功能。如果 NFSv3 使用客户端锁定，则 NFSv4.1 使用服务器端锁定。虽然 ONTAP 卷可以通过这两种协议导出，但 ESXi 只能通过一种协议挂载。此单协议挂载并不会阻止其他 ESXi 主机通过不同版本挂载同一数据存储库。请务必指定挂载时要使用的协议版本，以便所有主机都使用相同的版本，从而使用相同的锁定模式。请勿在主机之间混用 NFS 版本。如果可能，请使用主机配置文件检查合规性。</block>
  <block id="ae4c5baa79e370d8f601cc7082f8123e" category="list-text">由于 NFSv3 和 NFSv4.1 之间不会自动转换数据存储库，因此请创建一个新的 NFSv4.1 数据存储库，并使用 Storage vMotion 将 VM 迁移到新数据存储库。</block>
  <block id="a9577e779ab70bdd45392b1e0125cc77" category="list-text">在编写本报告时， NetApp 将继续与 VMware 合作，以解决 NFSv4.1 数据存储库和存储故障转移的问题。我们预计很快会解决这些问题。</block>
  <block id="04826f858f8ad9c66b9d805ca9ff88a3" category="list-text">NFS 导出策略用于控制 vSphere 主机的访问。您可以对多个卷（数据存储库）使用一个策略。对于 NFSv3 ， ESXi 使用 sys （ UNIX ）安全模式，并需要根挂载选项来执行 VM 。在 ONTAP 中，此选项称为超级用户，使用超级用户选项时，无需指定匿名用户 ID 。请注意，对于 ` -anon` 和 ` -allow-suid` ，具有不同值的导出策略规则可能会导致 ONTAP SVM 在使用发生原因工具时出现问题。下面是一个策略示例：</block>
  <block id="822366735aef72f1a9429ac86dda7338" category="list-text">访问协议： nfs3.</block>
  <block id="69abbd5c7cd9c1b3828b9aa5a894ff47" category="list-text">客户端匹配规范： 192.168.42.21</block>
  <block id="bd6cc42f9cd65cca72cbd56d2f4bf43d" category="list-text">RO 访问规则： sys</block>
  <block id="581c470a5099548fc9865a4bab8761f8" category="list-text">RW 访问规则： sys</block>
  <block id="0fd74b9f6a61e12b4a204b3489bd05a9" category="list-text">匿名 UID ：</block>
  <block id="59d5d8c898df18115bd4ced36c6bc0de" category="list-text">超级用户： sys</block>
  <block id="c184ce6b86d2e6fbf8681d61637c101b" category="list-text">如果使用适用于 VMware VAAI 的 NetApp NFS 插件，则在创建或修改导出策略规则时，应将协议设置为 `NFS` 。要使 VAAI 副本卸载正常工作，需要使用 NFSv4 协议，将此协议指定为 `NFS` 会自动包括 NFSv3 和 NFSv4 版本。</block>
  <block id="44e8816851b6d24723bf0e06c3b8b40d" category="list-text">NFS 数据存储库卷是从 SVM 的根卷接合的；因此， ESXi 也必须有权访问根卷，才能导航和挂载数据存储库卷。根卷以及嵌套了数据存储库卷接合的任何其他卷的导出策略都必须包含一个或多个规则，这些规则适用于为其授予只读访问权限的 ESXi 服务器。下面是根卷的示例策略，也是使用 VAAI 插件的：</block>
  <block id="88b77eec23ea926d7dac5b6ec36713d2" category="list-text">访问协议。NFS （包括 nfs3 和 nfs4 ）</block>
  <block id="2e5d116b123742b0c1f9b9266e3d45e4" category="list-text">客户端匹配规范192.168.42.21</block>
  <block id="e79bd23a286e2e109f901ac7b9fc1052" category="list-text">RO 访问规则。系统</block>
  <block id="6854a3cd4d70ef13145d55305c745f1c" category="list-text">RW 访问规则。从不（根卷的最佳安全性）</block>
  <block id="629cac79e5ae376b5235b5cb87c8c03d" category="list-text">匿名 UID 。</block>
  <block id="e76eb6f8b3ceafc6b70386efb46a8295" category="list-text">超级用户。sys （对于 VAAI 的根卷也是必需的）</block>
  <block id="4c571520a8128d1692fc709ffbfb2b1e" category="list-text">使用适用于 VMware vSphere 的 ONTAP 工具（最重要的最佳实践）：</block>
  <block id="b8d278c6184cb65727ca5ae729db92d7" category="list-text">使用适用于 VMware vSphere 的 ONTAP 工具配置数据存储库，因为它可以自动简化导出策略的管理。</block>
  <block id="55cf2206291fced620eed577cb8c8a42" category="list-text">使用此插件为 VMware 集群创建数据存储库时，请选择集群，而不是单个 ESX 服务器。选择此选项会将数据存储库自动挂载到集群中的所有主机。</block>
  <block id="e4e62770daaf9887c7868fbc8e248a4b" category="list-text">使用插件挂载功能将现有数据存储库应用于新服务器。</block>
  <block id="928562eb576ed6ae31cb1a149d3e751a" category="list-text">如果不对 VMware vSphere 使用 ONTAP 工具，请对所有服务器或需要额外访问控制的每个服务器集群使用一个导出策略。</block>
  <block id="7bccab0fa4c0864835c645c9fde7ebf6" category="list-text">虽然 ONTAP 提供了一个灵活的卷命名空间结构，可以使用接合在树中排列卷，但这种方法对于 vSphere 来说毫无价值。无论存储的命名空间层次结构如何，它都会在数据存储库的根目录下为每个 VM 创建一个目录。因此，最佳实践是，只需将 vSphere 卷的接合路径挂载到 SVM 的根卷，即适用于 VMware vSphere 的 ONTAP 工具如何配置数据存储库。如果没有嵌套的接合路径，也意味着任何卷都不依赖于根卷以外的任何卷，即使有意使某个卷脱机或销毁该卷，也不会影响指向其他卷的路径。</block>
  <block id="ea6fc1288f1d3b21238d29ff28cb867a" category="list-text">对于 NFS 数据存储库上的 NTFS 分区，块大小为 4k 是可以的。下图显示了从 vSphere 主机到 ONTAP NFS 数据存储库的连接。</block>
  <block id="16c864cb4f3b00c59e1124932e49f342" category="paragraph"><block ref="16c864cb4f3b00c59e1124932e49f342" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e54433644e830ed1503561b778e9ded4" category="paragraph">下表列出了 NFS 版本和支持的功能。</block>
  <block id="9fb9dac7513c7ef8452aade8a52ad40d" category="cell">vSphere 功能</block>
  <block id="64e3cc476958b05086721cd6070004cf" category="cell">VMotion 和 Storage vMotion</block>
  <block id="45a75e44a713fdf94dbf1dbaa0749188" category="cell">容错</block>
  <block id="f1e3446c69e4d87279ff7863482f9dcb" category="cell">DRS</block>
  <block id="6ca09f98e8925b2cb78bbf24eccc0186" category="cell">主机配置文件</block>
  <block id="ec8420797e3b089812499cce4047ded8" category="cell">存储 DRS</block>
  <block id="7c19bf1cbe62a87a42857ef0b4fe22ae" category="cell">存储 I/O 控制</block>
  <block id="56d43ad1a280ada5e16fd2960ae44b32" category="cell">SRM</block>
  <block id="d595c8f30866b71ea121ced5cde66b1d" category="cell">虚拟卷</block>
  <block id="6ad5114acf73f68a85c72f11646920cb" category="cell">硬件加速（ VAAI ）</block>
  <block id="aa32fdb70496d9a7395ef0d3ccb1c986" category="cell">是（ vSphere 6.5 及更高版本， NetApp VAAI 插件 1.1.2 ）</block>
  <block id="ad37ded9046268d8e5ea7cb253bb5dda" category="cell">Kerberos 身份验证</block>
  <block id="45701e6ef9bc09dca07f8f4abe661dc6" category="cell">是（在 vSphere 6.5 及更高版本中进行了增强，可支持 AES ， krb5i ）</block>
  <block id="76969a36155d2f41fc6cc3bd3faff244" category="cell">多路径支持</block>
  <block id="4cdf980fd6cee432c76402bb142269e9" category="cell">否（ ESXi 6.5 及更高版本支持通过会话中继； ONTAP 支持通过 pNFS ）</block>
  <block id="3f297ef15cde0668e93b35f2752fd4fd" category="section-title">下一步是什么？</block>
  <block id="883a5adf98ba177c28c5bc7d95e28763" category="paragraph">完成这些任务后， NFS 数据存储库便可用于配置虚拟机。</block>
  <block id="9bf6b8df29f265cdaf3246f6645ca922" category="inline-link"><block ref="9bf6b8df29f265cdaf3246f6645ca922" category="inline-link-rx"></block></block>
  <block id="bc0f3321a29c580fa0e3cca0c00ee7cd" category="list-text">VMware 产品文档<block ref="3bdcd80def6a1e2849d8b38049a04af9" category="inline-link-rx"></block></block>
  <block id="fa4af55c3fdbce23e96d2cf73261fa5b" category="inline-link"><block ref="fa4af55c3fdbce23e96d2cf73261fa5b" category="inline-link-rx"></block></block>
  <block id="0f185ccd88416daec4eee0a846d110b8" category="list-text">NetApp 产品文档<block ref="2e85fc867cab94d246e0bf6043b361cd" category="inline-link-rx"></block></block>
  <block id="334af7a3f788d83aa889d1ca7bd769f5" category="summary">此页面介绍 ONTAP 存储效率。</block>
  <block id="c13f924c3ceac59a16a8a1ea96d43c91" category="doc">ONTAP 存储效率</block>
  <block id="241a4f0482dfad2f5fc79419b18356c0" category="section-title">关于存储效率</block>
  <block id="185081022bfbcfda8db4798eb4eed8c0" category="paragraph">虽然 NetApp 率先为生产工作负载提供重复数据删除，但这一创新并不是这方面的第一项或最后一项创新。它从 ONTAP Snapshot 副本开始，该副本是一种节省空间的数据保护机制，不会影响性能，同时还采用了 FlexClone 技术，可即时为 VM 创建读 / 写副本，以供生产和备份使用。NetApp 继续提供包括重复数据删除，数据压缩和零块重复数据删除在内的实时功能，以从昂贵的 SSD 中挤出最大的存储空间。最近， ONTAP 增加了数据缩减功能来提高存储效率。</block>
  <block id="d019495551b4899a9019567122f1e076" category="list-text">* 实时零块重复数据删除。 * 消除了全零块浪费的空间。</block>
  <block id="7634d08ecc5702f74271a3313502ec02" category="list-text">* 实时压缩。 * 压缩数据块以减少所需的物理存储量。</block>
  <block id="8b7bb53489bfc2a6808c1d76314fa0d4" category="list-text">* 实时重复数据删除。 * 消除磁盘上现有块的传入块。</block>
  <block id="b762ae2f528b0eca55e7be3f599e909d" category="list-text">* 实时数据缩减。 * 将较小的 I/O 操作和文件打包到每个物理块中。</block>
  <block id="fba6442665875d123719f22baafc619d" category="inline-image-macro">存储效率</block>
  <block id="f468c00b41afc3485647008dcf80cba1" category="paragraph"><block ref="f468c00b41afc3485647008dcf80cba1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8405ea940cfeab85adddf9d3ed915a97" category="paragraph">您可以同时或单独运行重复数据删除，数据压缩和数据缩减，以在 FlexVol 卷上实现最佳空间节省。这些功能相结合，客户发现 VSI 可节省高达 5 ： 1 的空间， VDI 可节省高达 30 ： 1 的空间。</block>
  <block id="b8c11cd315128247329c3d878c2143fe" category="inline-link">使用重复数据删除，数据压缩和数据缩减提高存储效率</block>
  <block id="65bbb718266195d68e8d1accfc443e28" category="admonition">有关 ONTAP 存储效率的详细信息，请参见<block ref="f358a7faf94e9f579d11f8fc4efdbdec" category="inline-link-rx"></block> 在 ONTAP 9 文档中心。</block>
  <block id="6104c8ef7be4222a76596ab6a22bb422" category="doc">建议的 ESXi 主机和其他 ONTAP 设置</block>
  <block id="0416d04b345b434b120840c30ddaf0a1" category="paragraph">NetApp 已根据 NetApp 测试开发出一组 ESXi 主机多路径和 HBA 超时设置，用于正确处理 ONTAP 。可以使用适用于 VMware vSphere 的 ONTAP 工具轻松设置这些设置。在摘要信息板中，单击主机系统 portlet 中的编辑设置，或者右键单击 vCenter 中的主机，然后导航到 ONTAP tools &gt; Set recommended values 。下面是当前在 9.8 版中建议的主机设置。</block>
  <block id="dec4361376291bf7e7976c204f3a6cc8" category="cell">主机设置</block>
  <block id="024c7088f8cb994f40e5d60b87c10cbb" category="cell">NetApp 建议的价值</block>
  <block id="cc2060f93ac4b290d547f621584371d4" category="cell">ESXi 高级配置</block>
  <block id="73663d0d00956f0632e4ae75d811d53f" category="cell">VMFS3.HardwareAcceleratedLocking</block>
  <block id="2eabcf9ece81cd6f8095d869d0ecfdb5" category="cell">保留不变（ VMware 默认值为 1 ）。</block>
  <block id="1b50110aedae4d8d2043a4eb9beb20af" category="cell">VMFS3.EnableBlockDelete</block>
  <block id="0ad18436fcb2157ada78660d215e7796" category="cell">保留为设置值（ VMware 默认值为 0 ，但 VMFS6 不需要此设置）。有关详细信息，请参见 VMware 知识库文章。</block>
  <block id="7925a52b4ff8642c857aab6023d76d90" category="cell">NFS 设置</block>
  <block id="c3b49a515dd0046685e06092642aa139" category="cell">Net.TcpipHeapSize</block>
  <block id="abcf68baf479cae32e490eb770477d84" category="cell">vSphere 6.0 或更高版本，设置为 32 。所有其他 NFS 配置，设置为 30 。</block>
  <block id="504e96cc79e7efe30a8271cea152d9d1" category="cell">Net.TcpipHeapMax</block>
  <block id="5f039752b957a359dac1c1e45051a844" category="cell">对于 vSphere 6.0 及更高版本，设置为 1536 。</block>
  <block id="5f1e7b6431061565550e292d05c73588" category="cell">NFS.MaxVolumes</block>
  <block id="d75533d93e425c0e677c7115b33e8152" category="cell">vSphere 6.0 或更高版本，设置为 256 。所有其他 NFS 配置，设置为 64 。</block>
  <block id="3058676a1cf088aa4a73312ac36f2a58" category="cell">NFS41.MaxVolumes</block>
  <block id="62c07f94c64184ee5d530e4c0917093f" category="cell">vSphere 6.0 或更高版本，设置为 256 。</block>
  <block id="6f4edfb9f3990d73482442c70e5fc2a0" category="cell">NFS.MaxQueueDepth</block>
  <block id="0e61218c55cae3476207bca2c2f35ca7" category="cell">vSphere 6.0 或更高版本，设置为 128 。</block>
  <block id="18e1fb6924459470760771b20ab0c379" category="cell">nfs.HeartbeatMaxFailures</block>
  <block id="8a14ec18b6563675357f1050563de774" category="cell">对于所有 NFS 配置，均设置为 10 。</block>
  <block id="1aa26eb281359ba3b9a9a4b83a09ed46" category="cell">nfs.Heartbeat频率</block>
  <block id="072f9680861841ae9a13008a99667a75" category="cell">对于所有 NFS 配置，均设置为 12 。</block>
  <block id="eb4182715f8cde98563dc59ea36461d3" category="cell">nfs.HeartbeatTimeout</block>
  <block id="45aa5481fa55802a29a96aefd2f5dab1" category="cell">对于所有 NFS 配置，均设置为 5 。</block>
  <block id="54a08b15243d9078d3b5a47f8242da6f" category="cell">SUNRPC.MaxConnPerIP</block>
  <block id="9a9ccbecb3f315797ff8e709d85a0e18" category="cell">vSphere 7.0 或更高版本，设置为 128 。</block>
  <block id="e19159e292541f9e19415475bfdf8f38" category="cell">FC/FCoE 设置</block>
  <block id="2e556ad678160413b32dcca55c7d1f5f" category="cell">路径选择策略</block>
  <block id="1e304108bae216d7b24d43f9bc868298" category="cell">如果使用采用 ALUA 的 FC 路径，则设置为 RR （轮循）。对于所有其他配置，设置为 FIXED 。将此值设置为 RR 有助于在所有主动 / 优化路径之间实现负载平衡。固定值适用于较旧的非 ALUA 配置，有助于防止代理 I/O换言之，它有助于防止 I/O 流向在 7- 模式下运行 Data ONTAP 的环境中高可用性（ HA ）对的另一节点。</block>
  <block id="117704664d6cada78ac3107380f63d23" category="cell">disk.qFullSampSize</block>
  <block id="acaf935911b20ef844daea256f8181b1" category="cell">对于所有配置，均设置为 32 。设置此值有助于防止出现 I/O 错误。</block>
  <block id="f66a3c183f0e736240b77f8b755c880e" category="cell">disk.qFullThreshold</block>
  <block id="ab1224ed1cd7c63073af652a3bd92a35" category="cell">对于所有配置，均设置为 8 。设置此值有助于防止出现 I/O 错误。</block>
  <block id="19c08de7404551288e1274186e039ef4" category="cell">Emulex FC HBA 超时</block>
  <block id="b4dbfc2d52627e923cbb563a31ff756d" category="cell">使用默认值。</block>
  <block id="d46cddda4da7ec11f17472d11df95b68" category="cell">QLogic FC HBA 超时</block>
  <block id="7ecffb067b82aefb73bed04aea9fa562" category="cell">iSCSI 设置</block>
  <block id="d7e64409eb99602fc3b57a9f0b9287d6" category="cell">对于所有 iSCSI 路径，设置为 RR （轮循）。将此值设置为 RR 有助于在所有主动 / 优化路径之间实现负载平衡。</block>
  <block id="fb55ee99c04280ac638757869929785d" category="paragraph">在创建 ONTAP FlexVol 卷和 LUN 时， ONTAP 工具还会指定某些默认设置：</block>
  <block id="b97847dc22c9e1f02417ab38785b34e6" category="cell">ONTAP 工具</block>
  <block id="c003231c67265f34100a284092c0cf1f" category="cell">默认设置</block>
  <block id="5938fe448c8661febcef3f4e779e3adb" category="cell">Snapshot 预留（ -percent-snapshot-space ）</block>
  <block id="cfcd208495d565ef66e7dff9f98764da" category="cell">0</block>
  <block id="7218aec62575561a6de1cae8d5658390" category="cell">预留百分比（ -fractional-reserve ）</block>
  <block id="3a7e09ff0fa38663ffe6d91324ea75d9" category="cell">访问时间更新（ -atime-update ）</block>
  <block id="f8320b26d30ab433c5a54546d21f414c" category="cell">false</block>
  <block id="e93200d5b0d16915bf04236790544b2f" category="cell">最小预读（ -min-readahead ）</block>
  <block id="eee57b9c7d333899f3df6ffd10ec50df" category="cell">计划的 Snapshot 副本</block>
  <block id="00d23a76e43b46dae9ec7aa9dcbebb32" category="cell">enabled</block>
  <block id="f65fd63b63c9e9f25bf6bc141e83de34" category="cell">卷保证</block>
  <block id="c2410aebdf425dabcc65e546e506b03e" category="cell">无（精简配置）</block>
  <block id="f97c03bf3e9580446d70d479f5aad1e0" category="cell">卷自动调整大小</block>
  <block id="d89f4f8b1d7c18847b88b46142f61535" category="cell">grow_shrink</block>
  <block id="ace72ec54e17777d27eb8bdb9d57e782" category="cell">LUN 空间预留</block>
  <block id="b9f5c797ebbf55adccdd8539a65a0241" category="cell">已禁用</block>
  <block id="514aa7792a71ab4ab677eb2385131aae" category="cell">LUN 空间分配</block>
  <block id="0464f851d84d05f0a9db9051354e5581" category="section-title">其他主机多路径配置注意事项</block>
  <block id="5fcb3de72ca1920517439049153d961d" category="paragraph">虽然目前未使用可用的 ONTAP 工具进行配置，但 NetApp 建议考虑以下配置选项：</block>
  <block id="840731ae1cb9e4b23e19f645ab018b6f" category="inline-link">2069356</block>
  <block id="5073fc9da327263a7db04fd449991e6a" category="list-text">在高性能环境中或使用单个 LUN 数据存储库测试性能时，请考虑将轮循（ VMW_PSP_RR ）路径选择策略（ PSP ）的负载平衡设置从默认 IOPS 设置 1000 更改为 1 。请参见 VMware 知识库<block ref="f3f4762788a6845119bdb5b9c9179bda" category="inline-link-rx"></block> 了解更多信息。</block>
  <block id="1ea3eb55b985cf75e100607ee8bd935d" category="inline-link">路径选择插件和策略</block>
  <block id="249afbf456bd04d574e8d362d5bf133c" category="list-text">在 vSphere 6.7 Update 1 中， VMware 为轮循 PSP 引入了一种新的延迟负载平衡机制。新选项会在选择最佳 I/O 路径时考虑 I/O 带宽和路径延迟如果在具有非等效路径连接的环境中使用该工具，则可能会受益，例如，一条路径上的网络跃点多于另一条路径，或者使用 NetApp 全 SAN 阵列系统时。请参见<block ref="f5ecc69f2970e2e9c8638ad278ec38f7" category="inline-link-rx"></block> 有关详细信息 ...</block>
  <block id="7be2e69e5d19c282db8d81c60a51c862" category="summary">本页介绍在 VMware vSphere 环境中实施 NetApp ONTAP Storage 解决方案的最佳实践。</block>
  <block id="d3ba101543fc97ba1dd9272c87bf65da" category="doc">虚拟卷（ VVOL ）和基于存储策略的管理（ SPBM ）</block>
  <block id="25e09c324ad3c89ee3aa01454fce14cd" category="section-title">关于 VVOL 和 SPBM</block>
  <block id="ab3304a5226d57b9bcaf0c7b3f819735" category="paragraph">NetApp 是 VMware 在开发 vSphere 虚拟卷（ VVOL ）方面的早期设计合作伙伴，为 VVOL 和 VMware vSphere 存储感知 API （ VASA ）提供架构输入和早期支持。此方法不仅可以为 VMFS 提供虚拟机粒度存储管理，还支持通过基于存储策略的管理（ Storage Policy-Based Management ， SPBM ）实现存储配置自动化。</block>
  <block id="ce09fc365ce48a9d89c0fdb5222c3909" category="paragraph">SPBM 提供了一个框架，可用作虚拟化环境可用存储服务与通过策略配置的存储元素之间的抽象层。通过这种方法，存储架构师可以设计具有不同功能的存储池， VM 管理员可以轻松地使用这些功能。然后，管理员可以将虚拟机工作负载要求与配置的存储池进行匹配，从而可以在每个 VM 或虚拟磁盘级别精细控制各种设置。</block>
  <block id="2902acda09b9786460c2dd928a2d8f1a" category="paragraph">ONTAP 在 VVOL 规模方面处于存储行业的领先地位，在一个集群中支持数十万个 VVOL ，而企业级阵列和小型闪存阵列供应商支持的每个阵列仅支持数千个 VVOL 。NetApp 还在推动 VM 粒度管理的发展，即将推出支持 VVOL 3.0 的功能。</block>
  <block id="fda9c21a4aefd4a1f42ad0b195e6ef0a" category="inline-link">TR-4400 ：采用 ONTAP 的 VMware vSphere 虚拟卷</block>
  <block id="69173613658292fc2adeb513b12f29ca" category="admonition">有关 VMware vSphere 虚拟卷， SPBM 和 ONTAP 的详细信息，请参见<block ref="354226c2546b1aed39f1c0c484e6a98a" category="inline-link-rx"></block>。</block>
  <block id="01a7d7174ccc6593753679eefec17d49" category="summary">本页介绍在 VMware vSphere 环境中自动执行基本 ONTAP 功能的优势。</block>
  <block id="1406aa071af210d31c6a2951fe66ddcc" category="doc">ONTAP 和 vSphere 自动化简介</block>
  <block id="8e2b0503a0ad76f57c96738d7f0a3b0d" category="section-title">VMware 自动化</block>
  <block id="b5845209cb81dad561de4abe6e4481c4" category="paragraph">自 VMware ESX 推出以来，自动化已成为管理 VMware 环境不可或缺的一部分。能够将基础架构作为代码进行部署，并将实践扩展到私有云操作，有助于缓解对规模，灵活性，自行配置和效率的顾虑。</block>
  <block id="f7c9a2e2ec395a7e4b605bb3df40abf8" category="paragraph">自动化可以分为以下几类：</block>
  <block id="cba6f5a209d4f2ac1839f1c1e0a10051" category="list-text">* 虚拟基础架构部署 *</block>
  <block id="f41d0733c4edc0bf273a3d0587efb21e" category="list-text">* 来宾计算机操作 *</block>
  <block id="7f2a4b0fa787b1f058accb56cc377af8" category="list-text">* 云操作 *</block>
  <block id="290a03d97ea4e48144d20f313e0a0826" category="paragraph">管理员可以选择多种方法来实现基础架构自动化。无论是通过将虚拟机的主机配置文件或自定义规范等原生 vSphere 功能用于 VMware 软件组件，操作系统和 NetApp 存储系统上的可用 API ，均可获得大量文档和指导。</block>
  <block id="217dd73ccc3bd89b5d4e35d0bf50ea6c" category="paragraph">如果 ESX 主机运行的是 ESX 4.1 或更高版本，则 Data ONTAP 8.0.1 及更高版本支持某些 VMware vSphere API for Array Integration （ VAAI ）功能。VAAI 是一组 API ，用于在 VMware vSphere ESXi 主机和存储设备之间进行通信。这些功能有助于将操作从 ESX 主机卸载到存储系统，并提高网络吞吐量。ESX 主机会在正确的环境中自动启用这些功能。您可以通过检查 VAAI 计数器中的统计信息来确定系统使用 VAAI 功能的程度。</block>
  <block id="16123583d64fd438c5d7f5b61a1c1d2f" category="paragraph">自动部署 VMware 环境的最常见起点是配置基于块或文件的数据存储库。在开发相应的自动化之前，必须确定实际任务的要求。</block>
  <block id="a78bd4dd1db96affe0c2889376cccf53" category="paragraph">有关 VMware 环境自动化的详细信息，请参见以下资源：</block>
  <block id="ebd98e15bf07fe37dfdc879f9d0d1f48" category="inline-link">NetApp Pub</block>
  <block id="6123648b7dec055b609781b4d47c1b26" category="list-text"><block ref="6c65ff4f1dfb7aa26df896b1c9c849eb" category="inline-link-rx"></block>。NetApp 配置管理和自动化。</block>
  <block id="7c4272bef0cc405b65fc74e3791664bc" category="inline-link">适用于 VMware 的 Ansible GALAXY 社区</block>
  <block id="59fb42204e71850f7fd7024e5e6a1058" category="list-text"><block ref="c471bcaf7efa6fb129f37edaa7c41a56" category="inline-link-rx"></block>。一组适用于 VMware 的 Ansible 资源。</block>
  <block id="1ec695bd70399ce37180f1d84a33d151" category="inline-link">VMware ｛ code ｝ 资源</block>
  <block id="489c5322cef99651507b070e2240b6a8" category="list-text"><block ref="77e0562f07512a7a248241b7170b6944" category="inline-link-rx"></block>。为软件定义的数据中心设计解决方案所需的资源，包括论坛，设计标准，示例代码和开发人员工具。</block>
  <block id="5a44477fe5ac4beac2dc6574097cf079" category="summary">此页面提供了在 VMware vSphere 环境中部署 NetApp ONTAP 存储 iSCSI VMFS 数据存储库的步骤。</block>
  <block id="6d5f52fb3cf097647a57da8b55e5b08f" category="doc">使用 ONTAP 配置 vSphere 传统块存储</block>
  <block id="7c2d57185437da757ecede58f5a842d4" category="paragraph">VMware vSphere 支持以下 VMFS 数据存储库选项，并指定了 ONTAP SAN 协议支持。</block>
  <block id="c90881491d716de5c0ed7f9f4b09a3ad" category="cell">VMFS 数据存储库选项</block>
  <block id="a9181ef164a32ec0949c2cf63315ca31" category="cell">ONTAP SAN 协议支持</block>
  <block id="5903a917b575023b60264c602c220771" category="inline-link-macro">光纤通道（ FC ）</block>
  <block id="a4bce6d7794ee38a14e6a6d3785039f9" category="cell"><block ref="a4bce6d7794ee38a14e6a6d3785039f9" category="inline-link-macro-rx"></block></block>
  <block id="a6105c0a611b41b08f1209506350279e" category="cell">是的。</block>
  <block id="8da5577a58a95e2ebe9c6dd4f19f6c11" category="inline-link-macro">以太网光纤通道（ FCoE ）</block>
  <block id="40b814244a055d57c1af5fd02e4a8747" category="cell"><block ref="40b814244a055d57c1af5fd02e4a8747" category="inline-link-macro-rx"></block></block>
  <block id="e4e1c13bb0b14f6cb7608cbecea948ef" category="inline-link-macro">iSCSI</block>
  <block id="b26caac6068e09e5f849cfcb3e8c0c90" category="cell"><block ref="b26caac6068e09e5f849cfcb3e8c0c90" category="inline-link-macro-rx"></block></block>
  <block id="c38e870d503879d110dbddd5bf388ab2" category="cell">适用于 RDMA 的 iSCSI 扩展（ iSER ）</block>
  <block id="7fa3b767c460b54a2be4d49030b349c7" category="cell">否</block>
  <block id="de5a656362f0d785d2cc7d3097a507ef" category="inline-link-macro">采用 FC 的基于网络结构的 NVMe （ NVMe/FC ）</block>
  <block id="71a94ffc9bd97f314990ee2cd7a87154" category="cell"><block ref="71a94ffc9bd97f314990ee2cd7a87154" category="inline-link-macro-rx"></block></block>
  <block id="16d2954ba1640e32b21c312695337233" category="cell">采用基于融合以太网的 RDMA 的基于网络结构的 NVMe （ NVMe/RoCE ）</block>
  <block id="344567ba51767dd5805c908c602fb10e" category="admonition">如果需要 iSER 或 NVMe/RoCE VMFS ，请检查基于 SANtricity 的存储系统。</block>
  <block id="1e6584aafa5ae98aebb88d3ddecdaae5" category="doc">适用于 vSphere 管理员的 ONTAP 简介</block>
  <block id="74587fa4ad90f8713c0446529a3670e0" category="section-title">为什么选择适用于 vSphere 的 ONTAP ？</block>
  <block id="135b7f440129fbbacbc948adfb10ccec" category="paragraph">NetApp ONTAP 简化了存储和数据管理操作，并对 VMware 环境进行了显著的补充，无论是在内部部署还是在云端部署。在基于 SAN 和基于 NAS 的 VMware 架构中， NetApp 同类最佳的数据保护，存储效率创新以及卓越的性能都是成千上万客户选择 ONTAP 作为其适用于 vSphere 的存储解决方案部署的原因。</block>
  <block id="f93e431aaf745d4b5e4ecbd6c005b564" category="paragraph">NetApp 为各种 VMware 产品提供了大量 VMware 插件，验证和资格认定，以支持面临管理虚拟化环境的独特挑战的客户。NetApp 在存储和数据管理方面的作用与 VMware 在虚拟化方面的作用一样，使客户能够专注于其核心能力，而不是管理物理存储。VMware 和 NetApp 之间近 20 年的合作关系不断发展，随着 VMware Cloud Foundation 和 Tanzu 等新技术的出现，客户价值不断增加，同时也在继续为 vSphere 的基础提供支持。</block>
  <block id="b4e56252f38c98dde71bd489a93805fc" category="paragraph">客户价值的关键因素包括：</block>
  <block id="d6f750861d7ae27706ca32ed1f4c1ac8" category="list-text">* 统一存储 *</block>
  <block id="04d737333774adefb9817d0115bab79b" category="list-text">* 存储效率 * 。</block>
  <block id="c44a0be5f0db0511994f2f8e76afeb25" category="list-text">* 虚拟卷和基于存储策略的管理 *</block>
  <block id="d78a5fe569360bb327d51dd5060d723c" category="list-text">* 混合云 *</block>
  <block id="45649dc755190fc40be0b7e38ec84851" category="paragraph">有关受支持的 NetApp 和 VMware 解决方案的详细信息，请参见以下资源：</block>
  <block id="ec1bd76731eb238fa601fb03391f78d4" category="inline-link">NetApp 互操作性表工具</block>
  <block id="d46e58d91be6ffba761ab9bd05a46fc5" category="list-text"><block ref="b47ad5992ee82e05d51ff22d87ae20c3" category="inline-link-rx"></block> IMTIMT 定义了可用于构建 FC/FCoE ， iSCSI ， NFS 和 CIFS 配置的合格组件和版本。</block>
  <block id="8034c6a17370dafb5b3f6f5add755c62" category="inline-link">VMware 兼容性指南</block>
  <block id="f0c67c4d38f07e6eb4bead0202260ddb" category="list-text"><block ref="a9846c61dcf62d503a7738adf47f11be" category="inline-link-rx"></block>。VMware 兼容性指南列出了系统， I/O ，存储 /SAN 和备份与 VMware 基础架构和软件产品的兼容性</block>
  <block id="0f0b69f9725d17d0a8d3ceebcf33f72f" category="inline-link">适用于 VMware 的 NetApp ONTAP 工具</block>
  <block id="2be6bbf4ea543b07ab3b9a218eb509cc" category="list-text"><block ref="d1284fbca35bc1b47ead37f18b1c3ba2" category="inline-link-rx"></block>。适用于 VMware vSphere 的 ONTAP 工具是一个 vCenter Server 插件，其中包括 VSC ， VASA Provider 和 Storage Replication Adapter （ SRA ）扩展。</block>
  <block id="8ce83a5c4c3183c4e25f0d8d7b657ffc" category="summary">此页面可在 VMware vSphere 环境中提供 NFS 数据存储库支持。</block>
  <block id="3769193a46f06731838a6d904cf1da37" category="doc">使用 ONTAP 配置 vSphere 传统文件存储</block>
  <block id="8d3005420a2cb4cc915402d9c5604538" category="paragraph">VMware vSphere 支持以下 NFS 协议，这两种协议均支持 ONTAP 。</block>
  <block id="78aa97ac78d1291969b5893edcfe448a" category="inline-link-macro">NFS 版本 3</block>
  <block id="fb110cc4ad992a0846c0eaea7fbf2d94" category="list-text"><block ref="fb110cc4ad992a0846c0eaea7fbf2d94" category="inline-link-macro-rx"></block></block>
  <block id="2d6affbd5ec6eb1f6009383ca5ba9b2b" category="inline-link-macro">NFS 版本 4.1</block>
  <block id="3f65d9416139ab7c1ff75966bccf6f7d" category="list-text"><block ref="3f65d9416139ab7c1ff75966bccf6f7d" category="inline-link-macro-rx"></block></block>
  <block id="fc5929c224818a87a89047d2813dd2c5" category="inline-link-macro">此 NFS 客户端版本比较</block>
  <block id="ce51dd3c15b8a6638d0c212b990ae643" category="paragraph">如果在为 vSphere 选择正确的 NFS 版本时需要帮助，请检查 <block ref="8055fbd4933fc4c8b583fa212ff14ff2" category="inline-link-macro-rx"></block>。</block>
  <block id="3e4627f6667f830baceaaf35890b575a" category="summary">要了解有关本文档中所述信息的更多信息，请查看以下文档和 / 或网站：</block>
  <block id="3f3400e66c93fa2bb6193f2d71db7d65" category="inline-link"><block ref="3f3400e66c93fa2bb6193f2d71db7d65" category="inline-link-rx"></block></block>
  <block id="7d9ee37e3155d571b441d63bcbc54709" category="inline-link"><block ref="7d9ee37e3155d571b441d63bcbc54709" category="inline-link-rx"></block></block>
  <block id="52c629361849219069b336f56f1556d0" category="list-text">TR-4400 ：采用 ONTAP 的 VMware vSphere 虚拟卷<block ref="b7bf139d6051615d8c8e01b6b63dacc3" category="inline-link-rx"></block></block>
  <block id="18df8e05a5400abd9d0980b1c5bc9ef3" category="list-text">TR-4015 《适用于 ONTAP 9 的 SnapMirror 配置最佳实践指南》<block ref="e361bd9d6f7b20da762bc23fcb3d09c2" category="inline-link-rx"></block></block>
  <block id="cbe2f6eb2a73f4a2c871a06264f10dc7" category="inline-link"><block ref="cbe2f6eb2a73f4a2c871a06264f10dc7" category="inline-link-rx"></block></block>
  <block id="249b98331fa56dc46bf6ba51dc6c39d5" category="list-text">适用于 ONTAP 的 RBAC User Creator<block ref="6b15b91279acfce2bbee060bdb17db43" category="inline-link-rx"></block></block>
  <block id="c88037eb28ae3cceb0e32c2cd3c322d7" category="inline-link"><block ref="c88037eb28ae3cceb0e32c2cd3c322d7" category="inline-link-rx"></block></block>
  <block id="1a57e0f74e725c1a5e2d53b4d4b4460d" category="list-text">适用于 VMware vSphere 的 ONTAP 工具资源<block ref="80c496cd9ab75e5683007d8f66ca6fbf" category="inline-link-rx"></block></block>
  <block id="9aa6e8f8fac5c131e5924ee033660d29" category="inline-link"><block ref="9aa6e8f8fac5c131e5924ee033660d29" category="inline-link-rx"></block></block>
  <block id="91a48e1708df22b7464bced79c745ad2" category="list-text">VMware Site Recovery Manager 文档<block ref="92ad802ced4838839b492be6d0bf427d" category="inline-link-rx"></block></block>
  <block id="014a2413d22e5ac39371ac1333e38898" category="paragraph">请参见<block ref="99cfde592e1d7fa7832b186d73ee4002" category="inline-link-rx"></block> 在 NetApp 支持站点上，验证您的特定环境是否支持本文档中所述的确切产品和功能版本。NetApp IMT 定义了可用于构建 NetApp 支持的配置的产品组件和版本。具体结果取决于每个客户是否按照已发布的规格进行安装。</block>
  <block id="e69b470437a857bf2d9517ce4ef8d2c1" category="summary">此页面提供了在 VMware vSphere 环境中部署 NetApp ONTAP 存储 FC VMFS 数据存储库的步骤。</block>
  <block id="91d9498cf61618ef81368a106318efd2" category="doc">vSphere VMFS 数据存储库—采用 ONTAP 的光纤通道存储后端</block>
  <block id="b6e52e53cc59b8620dcdc05f2b812be4" category="paragraph">本节介绍如何使用 ONTAP 光纤通道（ FC ）存储创建 VMFS 数据存储库。</block>
  <block id="6b70d8f91894fa50b3c04af804f090b6" category="list-text">管理 vSphere 环境和 ONTAP 所需的基本技能</block>
  <block id="0335588c7903659bdeaa310c8f7bcdf4" category="list-text">运行 ｛ ontap_version ｝ 的 ONTAP 存储系统（ FAS/AFF/CVO/ONTAP Select/ASA ）</block>
  <block id="fdb8f60c37b623874df816146436f56b" category="list-text">ONTAP 凭据（ SVM 名称，用户 ID 和密码）</block>
  <block id="f2a03b032017931383878c3ef48cdb0a" category="list-text">主机，目标以及 SVM 和 LUN 信息的 ONTAP WWPN</block>
  <block id="d0a36a0dcdef62d026caa08afbaa4a42" category="inline-link-macro">已完成的 FC 配置工作表</block>
  <block id="5c42144bb611ba366591a823d4c2955e" category="list-text"><block ref="5c42144bb611ba366591a823d4c2955e" category="inline-link-macro-rx"></block></block>
  <block id="c7f58b1f94665d7ebf6f107970d1b91b" category="list-text">vSphere 主机信息</block>
  <block id="cdce6351191da46d795898e4570b8da2" category="list-text">｛ vsphere_version ｝</block>
  <block id="63fc76a195a29345d466bc86f293ca14" category="list-text">光纤交换机</block>
  <block id="6c2e28f86b2049d110f0e73e9bb78709" category="list-text">连接了 ONTAP FC 数据端口和 vSphere 主机</block>
  <block id="52dd4b667b031cd80a33b9d176e43827" category="list-text">启用 N_port ID 虚拟化（ NPIV ）功能</block>
  <block id="46fdd1539543376bfbbf2cc6da976539" category="list-text">创建单个启动程序单个目标分区。</block>
  <block id="df7f994fb0c494b66708667a64b2c406" category="list-text">为每个启动程序创建一个分区（单个启动程序分区）。</block>
  <block id="5a1cb943a687396a356750829002d982" category="list-text">对于每个分区，包括一个目标，该目标是 SVM 的 ONTAP FC 逻辑接口（ WWPN ）。每个 SVM 的每个节点至少应有两个逻辑接口。请勿使用物理端口的 WWPN 。</block>
  <block id="acd7065eaa19f6ad949216b6dcca52b6" category="list-text">适用于 VMware vSphere 的 ONTAP 工具已部署，配置并可随时使用。</block>
  <block id="d13dd15101d292f5b2c56e5be828fec8" category="section-title">配置 VMFS 数据存储库</block>
  <block id="95877ca095b0f0a0a981f8a12d234ad5" category="paragraph">要配置 VMFS 数据存储库，请完成以下步骤：</block>
  <block id="94dafc85e46c3bc0d374c052b1075890" category="list-text">使用检查兼容性<block ref="3028580b30f2b1d483aad9f9a7a65c7a" category="inline-link-rx"></block></block>
  <block id="195e1a47999aff0fbaa4eb8d97be6c40" category="inline-link-macro">支持 FCP 配置</block>
  <block id="e1b87801d0d31fd947fb52aa411c2815" category="list-text">验证是否已 <block ref="a0240d867f430aa7cc80ec129fc2bdb1" category="inline-link-macro-rx"></block>。</block>
  <block id="0b3f75b021ef6bdc0a532e2d9b2a9d74" category="inline-link-macro">验证您是否具有 FCP 的 ONTAP 许可证。</block>
  <block id="3c56f50608e95955ed2e1a3fb8b1dad1" category="list-text"><block ref="3c56f50608e95955ed2e1a3fb8b1dad1" category="inline-link-macro-rx"></block></block>
  <block id="e7dc6b39e7e5bd6df8fa93e90a426161" category="list-text">使用 `ssystem license show` 命令检查是否列出了 FCP 。</block>
  <block id="f8aa00b1a94d3290ba6ac653b792dd8a" category="list-text">使用 `liconen se add -license-code &lt; 许可证代码 &gt;` 添加许可证。</block>
  <block id="86a53381cefd41dcca81850274f0203a" category="list-text">确保已在 SVM 上启用 FCP 协议。</block>
  <block id="169e237a691059b9ac1933f0e7be8f56" category="inline-link-macro">验证现有 SVM 上的 FCP 。</block>
  <block id="5bb60b756067a0334c310be1e2260c3b" category="list-text"><block ref="5bb60b756067a0334c310be1e2260c3b" category="inline-link-macro-rx"></block></block>
  <block id="fab6621b43b19a018afc1860a5b85c21" category="inline-link-macro">在现有 SVM 上配置 FCP 。</block>
  <block id="7d4ca3fa89beb77990d305e17ed9ba64" category="list-text"><block ref="7d4ca3fa89beb77990d305e17ed9ba64" category="inline-link-macro-rx"></block></block>
  <block id="0d195904efc6cfb176bbc04e93c2947d" category="inline-link-macro">使用 FCP 创建新的 SVM 。</block>
  <block id="df062a6cafa16aee5f7ea64ea6991776" category="list-text"><block ref="df062a6cafa16aee5f7ea64ea6991776" category="inline-link-macro-rx"></block></block>
  <block id="5aab5d056538757626dd0562a563471a" category="list-text">确保 FCP 逻辑接口在 SVM 上可用。</block>
  <block id="aa01379022dd5b86e18f436c76f651f5" category="list-text">使用 `Network Interface show` 验证 FCP 适配器。</block>
  <block id="f89eac3d097d3dae5c0159f0da84b1c7" category="list-text">使用 GUI 创建 SVM 时，逻辑接口是该过程的一部分。</block>
  <block id="946b60eb8bd4945ad82b28fd9ccd3c63" category="list-text">要重命名网络接口，请使用 `Network Interface modify` 。</block>
  <block id="52fa81ab62bea2599ed516f01925678d" category="inline-link-macro">创建并映射 LUN 。</block>
  <block id="c8ecf540bebb63423545ecd3d02c6ca0" category="list-text"><block ref="a2b18e9ce335dd856363e6613d961c1a" category="inline-link-macro-rx"></block> 如果您使用适用于 VMware vSphere 的 ONTAP 工具，请跳过此步骤。</block>
  <block id="e4f7ebeb9544fb23a73028ab714ca87c" category="section-title">VMware vSphere 任务</block>
  <block id="7407e0a15262132133381a890e36e47a" category="inline-link-macro">存储适配器信息</block>
  <block id="25d85157bcfdbb601bbda056cd3a5bc6" category="list-text">确认已安装 HBA 驱动程序。VMware 支持的 HBA 已开箱即用部署驱动程序，应在中显示这些驱动程序 <block ref="57f7eb139c8bc258309d8e16d3df13fe" category="inline-link-macro-rx"></block>。</block>
  <block id="c57f32bc5ce6f95f5f9bec8260ecdb08" category="inline-link-macro">使用 ONTAP 工具配置 VMFS 数据存储库</block>
  <block id="b3a5f140339b1ca0940c5875b2a76d0b" category="list-text"><block ref="89ebfed741bd060c10a4a1472581f4e2" category="inline-link-macro-rx"></block>。</block>
  <block id="3b2287aeb862e195f44c02694fff89fe" category="summary">使用 SnapCenter ，您可以创建可应用于多个作业的备份策略。这些策略可以定义计划，保留，复制和其他功能。它们仍允许选择虚拟机一致的快照，从而利用虚拟机管理程序在创建 VMware 快照之前暂停 I/O 的功能。</block>
  <block id="b1c93d491ba776d955eb2e3b90908fb9" category="doc">适用于 vSphere 的其他功能</block>
  <block id="7e7397a7b79323762c61941fc0e6b5f9" category="section-title">数据保护</block>
  <block id="343775d7b18c4ca0af9b7fad57690839" category="paragraph">备份虚拟机并快速恢复虚拟机是 ONTAP for vSphere 的一项强大优势，使用适用于 VMware vSphere 的 SnapCenter 插件在 vCenter 中轻松管理此功能。使用 Snapshot 副本在不影响性能的情况下快速创建虚拟机或数据存储库的副本，然后使用 SnapMirror 将其发送到二级系统以实现长期异地数据保护。这种方法只存储更改后的信息，从而最大限度地减少存储空间和网络带宽。</block>
  <block id="0aef2da721f0ab14676f8d6ffb9e7e8c" category="inline-link">建议</block>
  <block id="8cc688149346249b3a92e59282755f3e" category="paragraph">使用 SnapCenter ，您可以创建可应用于多个作业的备份策略。这些策略可以定义计划，保留，复制和其他功能。它们仍允许选择虚拟机一致的快照，从而利用虚拟机管理程序在创建 VMware 快照之前暂停 I/O 的功能。但是，由于 VMware 快照对性能的影响，通常不建议使用这些快照，除非您需要暂停子文件系统。而是使用 ONTAP Snapshot 副本进行一般保护，并使用 SnapCenter 插件等应用程序工具来保护 SQL Server 或 Oracle 等事务数据。这些 Snapshot 副本与 VMware （一致性）快照不同，适用于长期保护。VMware 快照仅为<block ref="75f5ad475d959e2ecb55267e1a9a54f1" category="inline-link-rx"></block> 因性能和其他影响而短期使用。</block>
  <block id="26aae91a7d92b32a60b1fbc86c29ee81" category="paragraph">这些插件提供了扩展功能，可在物理和虚拟环境中保护数据库。借助 vSphere ，您可以使用它们来保护 SQL Server 或 Oracle 数据库，其中的数据存储在 RDM LUN 上，直接连接到子操作系统的 iSCSI LUN 或 VMFS 或 NFS 数据存储库上的 VMDK 文件上。通过这些插件，可以指定不同类型的数据库备份，支持联机或脱机备份，以及保护数据库文件和日志文件。除了备份和恢复之外，这些插件还支持出于开发或测试目的克隆数据库。</block>
  <block id="1556ba0bf6ea4783cda0ff40e96f0265" category="paragraph">下图显示了 SnapCenter 部署的一个示例。</block>
  <block id="54ee9d8cd5db70a761321f3e7d168445" category="paragraph"><block ref="54ee9d8cd5db70a761321f3e7d168445" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6c1bef29e8dc34a00e17b06c221d5efe" category="paragraph">要增强灾难恢复功能，请考虑将适用于 ONTAP 的 NetApp SRA 与 VMware Site Recovery Manager 结合使用。除了支持将数据存储库复制到灾难恢复站点之外，它还可以通过克隆复制的数据存储库在灾难恢复环境中进行无中断测试。通过 SRA 中内置的自动化功能，还可以轻松地从灾难中恢复并在中断解决后重新保护生产。</block>
  <block id="650062685b0df8284f1b87f62fa3f9f3" category="inline-link">TR-4128</block>
  <block id="886a3fd32ec402d87ea2b090f8f701b2" category="paragraph">最后，要获得最高级别的数据保护，请考虑使用 NetApp MetroCluster 的 VMware vSphere 城域存储集群（ VMSC ）配置。VMSC 是一款经过 VMware 认证的解决方案，它将同步复制与基于阵列的集群相结合，可提供与高可用性集群相同的优势，但分布在不同的站点上以防止站点灾难。NetApp MetroCluster 可为同步复制提供经济高效的配置，可从任何单个存储组件故障中透明恢复，并在发生站点灾难时提供单命令恢复。中详细介绍了 VMSC<block ref="737e6eedc4568d5bb72c6a6cf1fe681a" category="inline-link-rx"></block>。</block>
  <block id="752d71c042ef775879f6db705ccf6b31" category="section-title">空间回收</block>
  <block id="d490382851fbc5bd6720046bf9bc0c03" category="paragraph">从数据存储库中删除 VM 时，可以回收空间以用于其他用途。使用 NFS 数据存储库时，删除虚拟机时会立即回收空间（当然，只有在卷已进行精简配置时，即卷保证设置为 none ），此方法才有意义。但是，在 VM 子操作系统中删除文件时，不会使用 NFS 数据存储库自动回收空间。对于基于 LUN 的 VMFS 数据存储库， ESXi 以及子操作系统可以将 VAAI UNMAP 原语问题描述到存储（同样适用于使用精简配置时）以回收空间。根据版本的不同，此支持可以是手动支持，也可以是自动支持。</block>
  <block id="6a2bff0a8d10ca0fc6c782e7978f696a" category="inline-link">2057513</block>
  <block id="8927aab76c49d1deb0b407fd261d5aa6" category="inline-link">存储空间回收</block>
  <block id="0c5a70f66ff77925d7dd7192191ec8f2" category="paragraph">在 vSphere 5.5 及更高版本中， `vmkfstools – y` 命令将替换为 `esxcli storage vmfs unmap` 命令，该命令可指定可用块的数量（请参见 VMware 知识库<block ref="1d61bd4e8925f7d5aac61e083b728439" category="inline-link-rx"></block> 了解更多信息）。在 vSphere 6.5 及更高版本中，如果使用 VMFS 6 ，则应异步自动回收空间（请参见<block ref="a9ae15a1c91a14939aefb313015202e6" category="inline-link-rx"></block> 在 vSphere 文档中），但也可以根据需要手动运行。ONTAP 支持这种自动 UNMAP ，适用于 VMware vSphere 的 ONTAP 工具会将其设置为低优先级。</block>
  <block id="99a66df20e19a8e18fae37a7f714750a" category="section-title">虚拟机和数据存储库克隆</block>
  <block id="d355cf5d1a16095124a54902f7cf49db" category="paragraph">通过克隆存储对象，您可以快速创建副本以供将来使用，例如配置其他 VM ，备份 / 恢复操作等。在 vSphere 中，您可以克隆虚拟机，虚拟磁盘， VVol 或数据存储库。克隆后，通常可以通过自动化过程进一步自定义对象。vSphere 既支持完整副本克隆，也支持链接克隆，在这些克隆中，它可以独立于原始对象跟踪更改。</block>
  <block id="78f8f8d69825dfe8e6085151fa565f28" category="paragraph">链接克隆非常有助于节省空间，但它们会增加 vSphere 为虚拟机处理的 I/O 量，从而影响该虚拟机的性能，甚至整个主机的性能。这就是 NetApp 客户经常使用基于存储系统的克隆来充分利用这两种环境的原因：高效利用存储和提高性能。</block>
  <block id="17e1a153b5d05c5a642c93ba9ce3c6de" category="paragraph">下图显示了 ONTAP 克隆。</block>
  <block id="8ee3cd3dba25fb32f1bc38cb528ac998" category="paragraph"><block ref="8ee3cd3dba25fb32f1bc38cb528ac998" category="inline-image-macro-rx" type="image"></block></block>
  <block id="76ee7355875ad5e9f56186ff7da961f6" category="paragraph">可以通过多种机制将克隆卸载到运行 ONTAP 软件的系统，通常是在 VM ， VVOL 或数据存储库级别。其中包括：</block>
  <block id="3b6d066ffdecb2beb542ef68e773d4ae" category="list-text">使用 NetApp vSphere APIs for Storage Awareness （ VASA ） Provider 的 VVOL 。ONTAP 克隆用于支持由 vCenter 管理的 VVOL Snapshot 副本，这些副本节省空间，并且对创建和删除这些副本的 I/O 影响微乎其微。此外，还可以使用 vCenter 克隆 VM ，这些 VM 也会卸载到 ONTAP ，无论是在单个数据存储库 / 卷中还是在数据存储库 / 卷之间。</block>
  <block id="059e5a6b7f963e9876ba0129dc1b667d" category="list-text">使用 vSphere API —阵列集成（ VAAI ）进行 vSphere 克隆和迁移。在 SAN 和 NAS 环境中， VM 克隆操作均可卸载到 ONTAP （ NetApp 提供了一个 ESXi 插件，用于为 NFS 启用 VAAI ）。vSphere 仅会卸载 NAS 数据存储库中冷（已关闭） VM 上的操作，而热 VM （克隆和存储 vMotion ）上的操作也会卸载到 SAN 上。ONTAP 会根据源，目标和已安装的产品许可证使用最高效的方法。VMware Horizon View 也使用此功能。</block>
  <block id="a603c207c7b5801942ff108502676c12" category="list-text">SRA （与 VMware Site Recovery Manager 结合使用）。此处，克隆用于无中断测试灾难恢复副本的恢复情况。</block>
  <block id="bb300d356d258c084dbe5da2ca367e08" category="list-text">使用 SnapCenter 等 NetApp 工具进行备份和恢复。VM 克隆用于验证备份操作以及挂载 VM 备份，以便可以复制单个文件。</block>
  <block id="524b5b8bc03312baeafbea86df667c4b" category="paragraph">VMware ， NetApp 和第三方工具可以调用 ONTAP 卸载克隆。卸载到 ONTAP 的克隆具有多个优势。在大多数情况下，它们节省空间，只需要存储即可更改对象；读取和写入它们不会产生额外的性能影响，在某些情况下，通过在高速缓存中共享块来提高性能。它们还会从 ESXi 服务器卸载 CPU 周期和网络 I/O 。使用 FlexVol 卷在使用 FlexClone 的传统数据存储库中进行副本卸载速度快，效率高，但 FlexVol 卷之间的副本卸载速度可能较慢。如果您将 VM 模板维护为克隆源，请考虑将其放置在数据存储库卷中（使用文件夹或内容库对其进行组织），以实现节省空间的快速克隆。</block>
  <block id="f3968368501d882b3969da59138db6e2" category="paragraph">您也可以直接在 ONTAP 中克隆卷或 LUN 以克隆数据存储库。使用 NFS 数据存储库时， FlexClone 技术可以克隆整个卷，并且可以从 ONTAP 导出克隆并由 ESXi 作为另一个数据存储库挂载该克隆。对于 VMFS 数据存储库， ONTAP 可以克隆卷或整个卷中的 LUN ，包括其中的一个或多个 LUN 。包含 VMFS 的 LUN 必须映射到 ESXi 启动程序组（ igroup ），然后由 ESXi 重新签名，才能挂载并用作常规数据存储库。对于某些临时使用情形，可以挂载克隆的 VMFS 而无需重新签名。克隆数据存储库后，可以注册，重新配置和自定义数据存储库中的 VM ，就像它们是单独克隆的 VM 一样。</block>
  <block id="1c12a8dd266e356901d22c0b7711369d" category="paragraph">在某些情况下，可以使用其他许可功能来增强克隆功能，例如用于备份的 SnapRestore 或 FlexClone 。这些许可证通常包含在许可证包中，无需额外付费。要执行 VVOL 克隆操作以及支持 VVOL 的受管 Snapshot 副本（这些副本会从虚拟机管理程序卸载到 ONTAP ），需要 FlexClone 许可证。在数据存储库 / 卷中使用 FlexClone 许可证还可以改进某些基于 VAAI 的克隆（创建节省空间的即时副本，而不是块副本）。此外， SRA 还会使用它来测试灾难恢复副本的恢复，并使用 SnapCenter 来执行克隆操作，以及浏览备份副本以还原单个文件。</block>
  <block id="6d30b2619de7fa18e965516b291a1937" category="section-title">存储效率和精简配置</block>
  <block id="616c027f14ee5f1bbc866171c4017141" category="paragraph">NetApp 凭借存储效率创新技术引领行业发展，例如首款针对主工作负载的重复数据删除技术以及实时数据缩减技术，这些技术可增强数据压缩能力并高效存储小文件和 I/O 。ONTAP 支持实时和后台重复数据删除，以及实时和后台数据压缩。</block>
  <block id="8f105eeb6dc3fc4ce0d4758aeab4a256" category="paragraph">下图展示了 ONTAP 存储效率功能的综合影响。</block>
  <block id="4b7a9b58ab55917c054d5a636481a8b8" category="paragraph"><block ref="4b7a9b58ab55917c054d5a636481a8b8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8e89f9787f44321e33f85595321efc66" category="paragraph">以下是在 vSphere 环境中使用 ONTAP 存储效率的建议：</block>
  <block id="c2eea4e122397fa75d749bdbdcd4302d" category="list-text">重复数据删除节省的数据量取决于数据的共性。对于 ONTAP 9.1 及更早版本，重复数据删除在卷级别运行，而对于 ONTAP 9.2 及更高版本中的聚合重复数据删除，则在 AFF 系统上的聚合中的所有卷之间对数据进行重复数据删除。您无需再将类似的操作系统和类似应用程序分组到一个数据存储库中，即可最大程度地节省空间。</block>
  <block id="59eb554aa77d0e4dfdc304b3b914dd76" category="list-text">要在块环境中实现重复数据删除的优势，必须对 LUN 进行精简配置。尽管 VM 管理员仍认为 LUN 占用了已配置的容量，但重复数据删除节省的空间会返回到卷中以用于其他需求。NetApp 建议在同样经过精简配置的 FlexVol 卷中部署这些 LUN （适用于 VMware vSphere 的 ONTAP 工具会将卷大小比 LUN 大 5% 左右）。</block>
  <block id="1e84230a4e75abc233d64344b14fd511" category="list-text">此外，还建议对 NFS FlexVol 卷进行精简配置（这是默认设置）。在 NFS 环境中，使用精简配置卷的存储和 VM 管理员可以立即看到重复数据删除节省的空间。</block>
  <block id="b26ed63d0f1199652537e2c4b6752130" category="list-text">也可以对 VM 进行精简配置适用场景， NetApp 通常建议使用精简配置的 VMDK ，而不是厚 VMDK 。使用精简配置时，请确保使用适用于 VMware vSphere ， ONTAP 的 ONTAP 工具或其他可用工具监控可用空间，以避免出现空间不足问题。</block>
  <block id="041f3a2c9d939c181dbd2a95595455d0" category="list-text">请注意，在 ONTAP 系统中使用精简配置时不会影响性能；数据会写入可用空间，以便最大程度地提高写入性能和读取性能。尽管如此， Microsoft 故障转移集群或其他低延迟应用程序等某些产品可能需要有保障或固定的配置，因此最好遵循这些要求来避免出现支持问题。</block>
  <block id="473c8efc5f9b8640820a9cc1f9c84862" category="list-text">要最大程度地节省重复数据删除的空间，请考虑在基于硬盘的系统上计划后台重复数据删除，或者在 AFF 系统上计划自动后台重复数据删除。但是，计划的进程在运行时会使用系统资源，因此，理想情况下，应将其计划在活动较少的时间（例如周末）或更频繁地运行，以减少要处理的更改后的数据量。AFF 系统上的自动后台重复数据删除对前台活动的影响要小得多。后台数据压缩（对于基于硬盘的系统）也会占用资源，因此，只能考虑对性能要求有限的二级工作负载进行数据压缩。</block>
  <block id="dd76252ea7a50def2a98f218cb1505b4" category="inline-link">知识库文章</block>
  <block id="ac2fab512a521d04e53c7257ef490187" category="list-text">NetApp AFF 系统主要使用实时存储效率功能。使用 7- 模式过渡工具， SnapMirror 或卷移动等使用块复制的 NetApp 工具将数据移动到其中时，运行数据压缩和数据缩减扫描程序可以最大程度地节省效率。查看此 NetApp 支持<block ref="a24ae202a787a3e4695f02339b72bb57" category="inline-link-rx"></block> 了解更多详细信息。</block>
  <block id="af21d2d4e0d0faaa6435e780ed7fbc49" category="list-text">Snapshot 副本可能会锁定可通过数据压缩或重复数据删除来减少的块。使用计划的后台效率扫描程序或一次性扫描程序时，请确保在创建下一个 Snapshot 副本之前运行并完成这些扫描程序。检查 Snapshot 副本和保留情况，确保仅保留所需的 Snapshot 副本，尤其是在运行后台或扫描程序作业之前。</block>
  <block id="8f4468ee9f4f074a9f705cd8240de3d9" category="paragraph">下表为不同类型的 ONTAP 存储上的虚拟化工作负载提供了存储效率准则：</block>
  <block id="68eaabb91b0d1c52be44217a24f27b91" category="cell">工作负载</block>
  <block id="84f3306d313cbbe707b0df3807aa77ef" category="cell">存储效率准则</block>
  <block id="5325da9878854628027602da18e5fc14" category="cell">Flash Pool</block>
  <block id="9aa1187640093122ffdb7e1c18f8586d" category="cell">硬盘驱动器</block>
  <block id="9bbf225892f3ce69fc504d145abe3ded" category="cell">VDI 和 SVI</block>
  <block id="1be6174441cf80d01c59eb7a9c004498" category="paragraph">对于主工作负载和二级工作负载，请使用：</block>
  <block id="738b6df06bc30a1f2fa6d500095bfceb" category="list-text">自适应实时压缩</block>
  <block id="f801303ba7009e27cce2fe9a73dc5ebe" category="list-text">实时重复数据删除</block>
  <block id="f94a70bfe4407315e07db5e64706e531" category="list-text">后台重复数据删除</block>
  <block id="95f3762d2d933ff2c0f6e30ef2c767c9" category="list-text">实时数据缩减</block>
  <block id="22be9b04282591df89574efb0e9d2315" category="paragraph">对于主工作负载，请使用：</block>
  <block id="e37f23785e68eb0a9d5afd7457b0903e" category="paragraph">对于二级工作负载，请使用：</block>
  <block id="7901e1160498e7aff40dc0f858411c54" category="list-text">自适应后台数据压缩</block>
  <block id="be0ec3d9251292dd856ea0924ecc6873" category="section-title">服务质量（ QoS ）</block>
  <block id="f437881fa7e42bf0e4563bbec8176f81" category="paragraph">运行 ONTAP 软件的系统可以使用 ONTAP 存储服务质量功能来限制文件， LUN ，卷或整个 SVM 等不同存储对象的吞吐量（以 MBps 和 / 或每秒 I/O 数（ IOPS ）为单位）。</block>
  <block id="fb4aa9631cd742ae8a88f672b4464b37" category="paragraph">吞吐量限制可用于在部署前控制未知工作负载或测试工作负载，以确保它们不会影响其他工作负载。它们还可用于在确定抢占资源的工作负载后对其进行限制。此外，还支持基于 IOPS 的最低服务级别，以便为 ONTAP 9.2 中的 SAN 对象和 ONTAP 9.3 中的 NAS 对象提供稳定一致的性能。</block>
  <block id="3e4a2dc31acddb628ba286d25b1bd36e" category="paragraph">对于 NFS 数据存储库，可以将 QoS 策略应用于整个 FlexVol 卷或其中的单个 VMDK 文件。对于使用 ONTAP LUN 的 VMFS 数据存储库，可以将 QoS 策略应用于包含 LUN 或单个 LUN 的 FlexVol 卷，但不能应用于单个 VMDK 文件，因为 ONTAP 无法识别 VMFS 文件系统。使用 VVOL 时，可以使用存储功能配置文件和 VM 存储策略在各个 VM 上设置最小和 / 或最大 QoS 。</block>
  <block id="534ecd446aac2f9c809eef9064f44aab" category="paragraph">可以使用 MBps 和 / 或 IOPS 设置对象的 QoS 最大吞吐量限制。如果同时使用这两者，则 ONTAP 会强制实施达到的第一个限制。一个工作负载可以包含多个对象，一个 QoS 策略可以应用于一个或多个工作负载。将一个策略应用于多个工作负载时，这些工作负载将共享此策略的总限制。不支持嵌套对象（例如，卷中的文件不能各自具有自己的策略）。QoS 最小值只能以 IOPS 为单位进行设置。</block>
  <block id="040f184b126879657b253b6d258661d9" category="paragraph">目前，以下工具可用于管理 ONTAP QoS 策略并将其应用于对象：</block>
  <block id="de134183bea5df515a6756a539ce6f18" category="list-text">ONTAP 命令行界面</block>
  <block id="6ad5e0a20f49ad6a370454bb3afc9a9e" category="list-text">ONTAP 系统管理器</block>
  <block id="8e23e05fc0865e950d6a3581e0dd8ce9" category="list-text">OnCommand Workflow Automation</block>
  <block id="5ecb6b24c169667ff1a176768115659e" category="list-text">Active IQ Unified Manager</block>
  <block id="8cc4e713850f67a131e9dbf8b997f61e" category="list-text">适用于 ONTAP 的 NetApp PowerShell 工具包</block>
  <block id="fcdb48d0d22627e4910a8352c80bd87a" category="list-text">适用于 VMware vSphere VASA Provider 的 ONTAP 工具</block>
  <block id="e6defd03e0f49585b6d47614713e97f7" category="paragraph">要将 QoS 策略分配给 NFS 上的 VMDK ，请注意以下准则：</block>
  <block id="10509998e8d4c4d7be30fc1d0b6b2a1e" category="list-text">必须将此策略应用于包含实际虚拟磁盘映像的 `vmname- flat.vmdk` ，而不是 `vmname.vmdk` （虚拟磁盘描述符文件）或 `vmname.vmx` （ VM 描述符文件）。</block>
  <block id="2175e0e29bc4b213fa8b9c7afd591b6b" category="list-text">请勿将策略应用于其他 VM 文件，例如虚拟交换文件（`vmname.vswp` ）。</block>
  <block id="8230e9b5c1e9862fedb2c69f7cc5d3d1" category="list-text">使用 vSphere Web Client 查找文件路径（数据存储库 &gt; 文件）时，请注意，它会将 ` flat.vmdk` 和 ` 的信息结合在一起。vmdk` 和仅显示一个名为 ` 的文件。vmdk` 但 ` 的大小为 flat.vmdk` 。将 ` -flat` 添加到文件名中以获取正确的路径。</block>
  <block id="1d4614aca13104c98d5d8cc2d415b941" category="paragraph">要为 LUN （包括 VMFS 和 RDM ）分配 QoS 策略，可以从适用于 VMware vSphere 的 ONTAP 工具主页上的存储系统菜单获取 ONTAP SVM （显示为 Vserver ）， LUN 路径和序列号。选择存储系统（ SVM ），然后选择相关对象 &gt; SAN 。使用 ONTAP 工具之一指定 QoS 时，请使用此方法。</block>
  <block id="8ce0096ff26ebe0a38466de6a64f461d" category="paragraph">使用适用于 VMware vSphere 的 ONTAP 工具或 Virtual Storage Console 7.1 及更高版本，可以轻松地为基于 VVOL 的虚拟机分配最大和最小 QoS 。在为 VVol 容器创建存储功能配置文件时，请在性能功能下指定最大和 / 或最小 IOPS 值，然后将此 SCP 与虚拟机的存储策略联系起来。在创建虚拟机时使用此策略或将此策略应用于现有虚拟机。</block>
  <block id="421c9efa4ff1b039a5378be7bc1e2e49" category="paragraph">在使用适用于 VMware vSphere 9.8 及更高版本的 ONTAP 工具时， FlexGroup 数据存储库可提供增强的 QoS 功能。您可以轻松地在数据存储库中的所有 VM 或特定 VM 上设置 QoS 。有关详细信息，请参见本报告的 FlexGroup 一节。</block>
  <block id="77bb2ba950959bd3f1c55da523ace0be" category="section-title">ONTAP QoS 和 VMware SIOC</block>
  <block id="b2e21dac6070ea83831ff6521a66a447" category="paragraph">ONTAP QoS 和 VMware vSphere 存储 I/O 控制（ SIOC ）是 vSphere 和存储管理员可以结合使用的补充技术，用于管理运行 ONTAP 软件的系统上托管的 vSphere VM 的性能。每个工具都有自己的优势，如下表所示。由于 VMware vCenter 和 ONTAP 的作用域不同，因此某些对象可以由一个系统查看和管理，而不能由另一个系统查看和管理。</block>
  <block id="5ad234cb2cde4266195252a23ca7d84e" category="cell">属性</block>
  <block id="b8b8d1ba8fa345f03438a90f29af5784" category="cell">ONTAP QoS</block>
  <block id="c2a4cb962db2a4a6782b69864f0e411c" category="cell">VMware SIOC</block>
  <block id="aa628d5a66888444926b4dc042458200" category="cell">处于活动状态时</block>
  <block id="688b10fcfff927dee65634e3b3636064" category="cell">策略始终处于活动状态</block>
  <block id="a981c4aa67c29ff2d36fc614d8b28808" category="cell">存在争用时处于活动状态（数据存储库延迟超过阈值）</block>
  <block id="f46e64a82c96db56f3d6657d4fb53f00" category="cell">单位类型</block>
  <block id="878b4223bb85b95d8caf0429d9406cd5" category="cell">IOPS ， MBps</block>
  <block id="3e189a34f422a141311dad231f9ad5b5" category="cell">IOPS ，共享</block>
  <block id="7367a0ec46339213625cbc77d56a9572" category="cell">vCenter 或应用程序范围</block>
  <block id="1faff19290bb64ce8ff6bc1220496881" category="cell">多个 vCenter 环境，其他虚拟机管理程序和应用程序</block>
  <block id="1e664a3cc0ab109fcabcc81b488cebb1" category="cell">单个 vCenter 服务器</block>
  <block id="ebccc9f5c939841d86e5382988dfcc47" category="cell">是否在虚拟机上设置 QoS ？</block>
  <block id="cddd0980ce99890d2ea90288f6b03117" category="cell">仅限 NFS 上的 VMDK</block>
  <block id="928629d8a2a889f5274cad9940a06da0" category="cell">NFS 或 VMFS 上的 VMDK</block>
  <block id="305e85b992089534091855224f60cf75" category="cell">是否为 LUN 设置 QoS （ RDM ）？</block>
  <block id="e798014243cf5682e7fb3aaf4ee7cecf" category="cell">是否为 LUN （ VMFS ）设置 QoS ？</block>
  <block id="9cd021ea9d3c88de723fe9a2e50a2380" category="cell">是否为卷（ NFS 数据存储库）设置 QoS ？</block>
  <block id="c352b53c32380efcf4436926da6d0414" category="cell">是否在 SVM （租户）上设置 QoS ？</block>
  <block id="86aad9b5d177180a5b9e828a8e05e819" category="cell">基于策略的方法？</block>
  <block id="b31c76176f26196c6379a9bcce212d99" category="cell">是；可以由策略中的所有工作负载共享，也可以将其全部应用于策略中的每个工作负载。</block>
  <block id="1ff33557bad923d68973872cacf2e43a" category="cell">是，在 vSphere 6.5 及更高版本中。</block>
  <block id="d5f1465492190ee9d30a09b36f64f4b7" category="cell">需要许可证</block>
  <block id="4cec76d82991abd453484c23f7e3788a" category="cell">随 ONTAP 提供</block>
  <block id="6bb36803f4670824ff9ebdf665654829" category="cell">Enterprise Plus</block>
  <block id="400cc516a4a40acd605aef2cfd4ba4c0" category="section-title">VMware Storage Distributed Resource Scheduler</block>
  <block id="06604b0172f4ae639ffe8c44fa7c77d8" category="paragraph">VMware Storage Distributed Resource Scheduler （ SDRS ）是一项 vSphere 功能，可根据当前 I/O 延迟和空间使用情况将 VM 放置在存储上。然后，它会在数据存储库集群（也称为 Pod ）中的数据存储库之间无中断地移动虚拟机或 VMDK ，从而选择最佳数据存储库，以便将虚拟机或 VMDK 放置在数据存储库集群中。数据存储库集群是一组类似的数据存储库，从 vSphere 管理员的角度来看，这些数据存储库会聚合为一个使用单位。</block>
  <block id="5735cfd4d72f50fd28717ac30361b503" category="paragraph">在将 SDRS 与适用于 VMware vSphere 的 NetApp ONTAP 工具结合使用时，您必须先使用此插件创建数据存储库，使用 vCenter 创建数据存储库集群，然后将此数据存储库添加到其中。创建数据存储库集群后，可以直接从详细信息页面上的配置向导将其他数据存储库添加到数据存储库集群中。</block>
  <block id="b028cce2007c32457c41f20d2954c0c2" category="paragraph">有关 SDRS 的其他 ONTAP 最佳实践包括：</block>
  <block id="d11eff5be5178b7ba95b06270611ffc8" category="list-text">集群中的所有数据存储库都应使用相同类型的存储（例如 SAS ， SATA 或 SSD ），可以是所有 VMFS 或 NFS 数据存储库，并且具有相同的复制和保护设置。</block>
  <block id="76db7ce67615bbc16da685df79ed0aa9" category="list-text">请考虑在默认（手动）模式下使用 SDRS 。通过此方法，您可以查看建议并决定是否应用这些建议。请注意 VMDK 迁移的以下影响：</block>
  <block id="97f4ed95cb52bb29629002a25cb5039f" category="list-text">在数据存储库之间移动 VMDK 时，通过 ONTAP 克隆或重复数据删除节省的任何空间都将丢失。您可以重新运行重复数据删除以重新获得这些节省。</block>
  <block id="cc1aa351f771fc36d1542fa93e1fac8e" category="list-text">SDRS 移动 VMDK 后， NetApp 建议在源数据存储库中重新创建 Snapshot 副本，因为空间会被移动的虚拟机锁定。</block>
  <block id="09a99cbc4fb85d10c7af970e79032a05" category="list-text">在同一聚合上的数据存储库之间移动 VMDK 没有什么优势， SDRS 无法查看可能共享该聚合的其他工作负载。</block>
  <block id="a30850531baecbfbe4486d4be9e79e30" category="section-title">基于存储策略的管理和 VVOL</block>
  <block id="f2606439d8a3fed353e38254458c0a32" category="paragraph">通过 VMware vSphere 存储感知 API （ VASA ），存储管理员可以轻松地为数据存储库配置定义明确的功能，并允许 VM 管理员在需要时使用这些功能来配置 VM ，而无需彼此交互。值得一看的是，这种方法可以帮助您简化虚拟化存储操作并避免大量琐碎的工作。</block>
  <block id="ad0bd815b4fb6f01acc94f160af3dca7" category="paragraph">在使用 VASA 之前， VM 管理员可以定义 VM 存储策略，但他们必须与存储管理员合作，通常使用文档或命名约定来确定适当的数据存储库。借助 VASA ，存储管理员可以定义一系列存储功能，包括性能，分层，加密和复制。一个卷或一组卷的一组功能称为存储功能配置文件（ Storage Capability Profile ， SCP ）。</block>
  <block id="a3af04d147e48682c8be6bd0c1b66520" category="paragraph">SCP 支持对 VM 的数据 VVol 执行最小和 / 或最大 QoS 。只有 AFF 系统才支持最低 QoS 。适用于 VMware vSphere 的 ONTAP 工具包含一个信息板，用于显示 ONTAP 系统上 VVol 的 VM 粒度性能和逻辑容量。</block>
  <block id="4240fa68f6d9919e6d039c4038175025" category="paragraph">下图显示了适用于 VMware vSphere 9.8 VVol 的 ONTAP 工具信息板。</block>
  <block id="d3fcb217aa8b45eb8a95f8958c1f7746" category="paragraph"><block ref="d3fcb217aa8b45eb8a95f8958c1f7746" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a6257d346f635c1b16a2f39df0830a48" category="paragraph">定义存储功能配置文件后，可以使用该配置文件来使用存储策略来配置 VM ，以确定其要求。通过 VM 存储策略与数据存储库存储功能配置文件之间的映射， vCenter 可以显示一个兼容数据存储库列表以供选择。这种方法称为基于存储策略的管理。</block>
  <block id="ca100a4ba1d4641f17806479f93c8b1a" category="paragraph">VASA 提供了查询存储并将一组存储功能返回到 vCenter 的技术。VASA 供应商提供程序可在存储系统 API 和构造与 vCenter 可识别的 VMware API 之间进行转换。NetApp 的适用于 ONTAP 的 VASA Provider 是作为适用于 VMware vSphere 设备 VM 的 ONTAP 工具的一部分提供的， vCenter 插件提供了用于配置和管理 VVOL 数据存储库的界面，并能够定义存储功能配置文件（ SCP ）。</block>
  <block id="dad160104969c39365dd2cd4c98dd300" category="inline-link">TR-4400</block>
  <block id="79f0d5feb7ec25a16c407f3f585eabb2" category="paragraph">ONTAP 同时支持 VMFS 和 NFS VVol 数据存储库。将 VVOL 与 SAN 数据存储库结合使用可带来 NFS 的一些优势，例如虚拟机级别粒度。下面是一些需要考虑的最佳实践，您可以在中找到追加信息<block ref="4f23d4db151ca74200684ac8aef53fed" category="inline-link-rx"></block>：</block>
  <block id="bd490c925219bcb312338a370589bf70" category="list-text">一个 VVOL 数据存储库可以在多个集群节点上包含多个 FlexVol 卷。最简单的方法是使用一个数据存储库，即使卷具有不同的功能也是如此。SPBM 可确保为 VM 使用兼容的卷。但是，这些卷都必须属于一个 ONTAP SVM ，并使用一个协议进行访问。对于每个协议，每个节点一个 LIF 就足够了。避免在一个 VVOL 数据存储库中使用多个 ONTAP 版本，因为存储功能可能因版本而异。</block>
  <block id="0cc956d6da91fefae9dad9b2c8c9519b" category="list-text">使用适用于 VMware vSphere 的 ONTAP 工具插件创建和管理 VVOL 数据存储库。除了管理数据存储库及其配置文件之外，它还会根据需要自动创建一个协议端点来访问 VVol 。如果使用 LUN ，请注意， LUN PE 会使用 LUN ID 300 及更高版本进行映射。验证 ESXi 主机高级系统设置 `Disk.MaxLUN` 是否允许使用 300 以上的 LUN ID 编号（默认值为 1 ， 024 ）。执行此步骤的方法是，在 vCenter 中选择 ESXi 主机，然后选择配置选项卡，并在高级系统设置列表中找到 `Disk.MaxLUN` 。</block>
  <block id="fac85f355a1eb47127ef1b94e7603924" category="list-text">请勿将适用于 VMware vSphere 的 VASA Provider ， vCenter Server （设备或基于 Windows ）或 ONTAP 工具本身安装或迁移到 VVOL 数据存储库中，因为它们相互依赖，因此会限制您在发生断电或其他数据中心中断时对其进行管理的能力。</block>
  <block id="27bd00c8827fc3d77d1b5650103b676f" category="list-text">定期备份 VASA Provider 虚拟机。至少为包含 VASA Provider 的传统数据存储库创建每小时 Snapshot 副本。有关保护和恢复 VASA Provider 的详细信息，请参见此部分<block ref="9d642870dca1748c69f7aa0b6fb95a89" category="inline-link-rx"></block>。</block>
  <block id="2d2d2e356f9ab117b7d2a58d42cc5988" category="paragraph">下图显示了 VVOL 组件。</block>
  <block id="6aadcb77504dae1dbfed2e4d1c969158" category="paragraph"><block ref="6aadcb77504dae1dbfed2e4d1c969158" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0ce8b0e3e0d7dc7f39c62fb74a28b3bf" category="section-title">云迁移和备份</block>
  <block id="4fe11b4a91ff38ec9933009a15dd5b0b" category="paragraph">ONTAP 的另一个优势是广泛支持混合云，将内部私有云中的系统与公有云功能相结合。以下是可与 vSphere 结合使用的一些 NetApp 云解决方案：</block>
  <block id="67464b4510c09197c8a5e16ba6702435" category="list-text">* 云卷。 * NetApp Cloud Volumes Service for AWS 或 GCP 以及 Azure NetApp Files for ANF 可在领先的公有云环境中提供高性能，多协议托管存储服务。它们可以直接由 VMware Cloud VM 子系统使用。</block>
  <block id="0ac7b95ec26051fb8842ae35427ecc22" category="list-text">* Cloud Volumes ONTAP 。 * NetApp Cloud Volumes ONTAP 数据管理软件可在您选择的云中控制，保护，灵活性和效率您的数据。Cloud Volumes ONTAP 是基于 NetApp ONTAP 存储软件构建的云原生数据管理软件。与 Cloud Manager 结合使用，可与内部 ONTAP 系统一起部署和管理 Cloud Volumes ONTAP 实例。利用高级 NAS 和 iSCSI SAN 功能以及统一数据管理，包括 Snapshot 副本和 SnapMirror 复制。</block>
  <block id="2a11701c0c01affc0ce96eb0d0c16ed9" category="list-text">* 云服务。 * 使用 Cloud Backup Service 或 SnapMirror 云保护数据免受使用公有云存储的内部系统的影响。Cloud Sync 有助于在 NAS ，对象存储和 Cloud Volumes Service 存储之间迁移和保持数据同步。</block>
  <block id="fa9b5353337118a51ced7968bccc02a0" category="inline-link">存储 VM 的更多 Snapshot 副本</block>
  <block id="c79f1f00e1e3c8f100e8604eec888859" category="list-text">* FabricPool 。 * FabricPool 可为 ONTAP 数据快速轻松地分层。Snapshot 副本中的冷块可以迁移到公有云或私有 StorageGRID 对象存储中的对象存储，并在再次访问 ONTAP 数据时自动重新调用。或者，使用对象层作为已由 SnapVault 管理的数据的第三级保护。这种方法可以让您做到<block ref="1d0add9d2d81e2d7e790f727021e53aa" category="inline-link-rx"></block> 在主和 / 或二级 ONTAP 存储系统上。</block>
  <block id="1a7072854c9dd945a98f4314b3f77408" category="list-text">* ONTAP Select 。 * 使用 NetApp 软件定义的存储将您的私有云扩展到 Internet 上的远程设施和办公室，您可以在这些设施和办公室使用 ONTAP Select 支持块和文件服务以及您在企业数据中心拥有的相同 vSphere 数据管理功能。</block>
  <block id="79aec220098057ef8c0e46281a45d6c2" category="paragraph">在设计基于 VM 的应用程序时，请考虑未来的云移动性。例如，与其将应用程序和数据文件放在一起，不如对数据使用单独的 LUN 或 NFS 导出。这样，您就可以将虚拟机和数据单独迁移到云服务。</block>
  <block id="af63597853dc0983258c8f86a12aae0b" category="section-title">vSphere 数据加密</block>
  <block id="eb969673f581d94df982f8e2a6001f30" category="paragraph">如今，通过加密保护空闲数据的需求日益增长。虽然最初的重点是财务和医疗保健信息，但对保护所有信息的兴趣日益增加，无论这些信息存储在文件，数据库还是其他数据类型中。</block>
  <block id="77652ecf0c76f1d4194171dc720320be" category="paragraph">运行 ONTAP 软件的系统可通过空闲加密轻松保护任何数据。NetApp 存储加密（ NetApp Storage Encryption ， NSE ）使用带有 ONTAP 的自加密磁盘驱动器来保护 SAN 和 NAS 数据。NetApp 还提供 NetApp 卷加密和 NetApp 聚合加密，这是一种基于软件的简单方法，用于对任何磁盘驱动器上的卷进行加密。此软件加密不需要特殊的磁盘驱动器或外部密钥管理器， ONTAP 客户无需额外付费即可使用。您可以在不中断客户端或应用程序的情况下升级并开始使用它，并且它们已通过 FIPS 140-2 1 级标准（包括板载密钥管理器）的验证。</block>
  <block id="937a352e0f824ff55e4cd50c8e3b051e" category="paragraph">可以通过多种方法保护在 VMware vSphere 上运行的虚拟化应用程序的数据。一种方法是在子操作系统级别使用虚拟机中的软件保护数据。vSphere 6.5 等较新的虚拟机管理程序现在支持在 VM 级别进行加密，这是另一种替代方案。但是， NetApp 软件加密简单易用，并且具有以下优势：</block>
  <block id="92fbd315c4413db381567a775570b78c" category="list-text">* 对虚拟服务器 CPU 没有影响。 * 某些虚拟服务器环境需要为其应用程序提供每个可用的 CPU 周期，但测试表明，使用虚拟机管理程序级别的加密最多需要 5 倍的 CPU 资源。即使加密软件支持将 Intel 的 AES-NI 指令集用于卸载加密工作负载（就像 NetApp 软件加密一样），由于需要使用与旧版服务器不兼容的新 CPU ，此方法也可能不可行。</block>
  <block id="6abee98aea26f85e6f0fe8d4db70f998" category="list-text">* 包括板载密钥管理器。 * NetApp 软件加密包括板载密钥管理器，无需额外付费，无需购买和使用复杂的高可用性密钥管理服务器即可轻松启动。</block>
  <block id="c216121021de8554d33503ef6616b256" category="list-text">* 对存储效率没有影响。 * 重复数据删除和数据压缩等存储效率技术目前已广泛应用，是经济高效地使用闪存磁盘介质的关键。但是，加密数据通常无法进行重复数据删除或压缩。与其他方法不同， NetApp 硬件和存储加密的运行级别较低，并允许充分利用行业领先的 NetApp 存储效率功能。</block>
  <block id="5f9aa8333f218d1c21e67c8608a48672" category="list-text">* 轻松的数据存储库粒度加密。 * 借助 NetApp 卷加密，每个卷都获得自己的 AES 256 位密钥。如果需要更改，只需使用一个命令即可。如果您有多个租户或需要为不同部门或应用程序证明独立加密，则此方法非常适合。此加密在数据存储库级别进行管理，比管理单个虚拟机要简单得多。</block>
  <block id="088124cfa6d59c647e63177c5a4af318" category="paragraph">开始使用软件加密非常简单。安装许可证后，只需通过指定密码短语来配置板载密钥管理器，然后创建新卷或移动存储端卷以启用加密即可。NetApp 正在努力在其未来版本的 VMware 工具中增加对加密功能的集成支持。</block>
  <block id="c95fa5b56a01e5c1a80c540c1ab1a750" category="paragraph">通过 Active IQ Unified Manager 可以查看虚拟基础架构中的虚拟机，并监控虚拟环境中的存储和性能问题并对其进行故障排除。</block>
  <block id="be75250c2f30870dc1e359b4ade2a767" category="paragraph">ONTAP 上的典型虚拟基础架构部署包含多个组件，这些组件分布在计算层，网络层和存储层上。VM 应用程序中的任何性能滞后都可能是由于各个层的各个组件同时面临的延迟造成的。</block>
  <block id="d1734f6f2e65a1488896f74695db5254" category="paragraph">以下屏幕截图显示了 Active IQ Unified Manager 虚拟机视图。</block>
  <block id="8aa017c9f67ad32dd7301ecf52b61d72" category="paragraph"><block ref="8aa017c9f67ad32dd7301ecf52b61d72" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2118336fa447fcc0f213cb8c40c516af" category="paragraph">Unified Manager 以拓扑视图形式呈现虚拟环境的底层子系统，用于确定计算节点，网络或存储是否发生延迟问题描述。此视图还会突出显示导致执行补救步骤和解决底层问题描述时出现性能滞后的特定对象。</block>
  <block id="d8a78b994fcd4e04901203a2e7bc6414" category="paragraph">以下屏幕截图显示了 AIQUM 扩展拓扑。</block>
  <block id="e9659be2b7d3d69eccdb443ed2acec75" category="paragraph"><block ref="e9659be2b7d3d69eccdb443ed2acec75" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d336a329d910c32fb90337a372f596fc" category="summary">近 20 年来， NetApp ONTAP 软件一直是 VMware vSphere 环境中的领先存储解决方案，并不断增加创新功能来简化管理，同时降低成本。本文档介绍了适用于 vSphere 的 ONTAP 解决方案，其中包括用于简化部署，降低风险和简化管理的最新产品信息和最佳实践。</block>
  <block id="952fd691754e388c7b7ba473cf410aff" category="doc">TR-4597 ：适用于 ONTAP 的 VMware vSphere</block>
  <block id="b4191f5f6b40e39be6030dbbc9052330" category="paragraph">NetApp 公司 Karl Konnerth</block>
  <block id="bfa7e7fc7c6bf4cc4e4c5c74b09763eb" category="paragraph">最佳实践是指南和兼容性列表等其他文档的补充。它们是根据 NetApp 工程师和客户的实验室测试和丰富的现场经验开发的。它们可能并不是在每个环境中都能使用的唯一受支持的实践，但它们通常是最简单的解决方案，可满足大多数客户的需求。</block>
  <block id="737453909be77692f8cfdf08a17cee61" category="inline-link-macro">ONTAP 和 vSphere 版本专用信息</block>
  <block id="18b198d3d2381f05dd78bab3c8cec60c" category="paragraph">本文档重点介绍在 vSphere 6.0 或更高版本上运行的 ONTAP （ 9.x ）的最新版本中的功能。请参见一节 <block ref="4c9a6d8ccb9dfca3b5ae6e43e9663c99" category="inline-link-macro-rx"></block> 有关特定版本的详细信息。</block>
  <block id="4b401b0a40ae220c77961312c8238cdb" category="paragraph">成千上万的客户之所以选择 ONTAP 作为其适用于 vSphere 的存储解决方案，有许多原因，例如支持 SAN 和 NAS 协议的统一存储系统，使用节省空间的 NetApp Snapshot 副本提供强大的数据保护功能， 以及大量工具，可帮助您管理应用程序数据。使用与虚拟机管理程序不同的存储系统，您可以卸载许多功能，并最大程度地提高对 vSphere 主机系统的投资。这种方法不仅可以确保主机资源专注于应用程序工作负载，还可以避免存储操作对应用程序造成随机性能影响。</block>
  <block id="0f50acddbdbb9aa9712a471f2276e655" category="paragraph">将 ONTAP 与 vSphere 结合使用是一个很好的组合，可帮助您降低主机硬件和 VMware 软件支出。您还可以通过稳定一致的高性能以更低的成本保护数据。由于虚拟化工作负载是移动的，因此您可以使用 Storage vMotion 探索不同的方法，以便在 VMFS ， NFS 或 VVOL 数据存储库之间移动 VM ，所有这些都位于同一存储系统上。</block>
  <block id="90977175b761542615a11f2b96cc4cbd" category="paragraph">以下是客户目前重视的关键因素：</block>
  <block id="dc4489aacb3c4d74b8253c49732b73e9" category="list-text">* 统一存储。 * 运行 ONTAP 软件的系统在多个重要方面实现了统一。最初，这种方法既指 NAS 协议，也指 SAN 协议，而 ONTAP 除了在 NAS 中具有最初的优势之外，仍然是 SAN 的领先平台。在 vSphere 环境中，这种方法还可能意味着为虚拟桌面基础架构 (VDI) 和虚拟服务器基础架构（ VSI ）提供一个统一的系统。与传统企业阵列相比，运行 ONTAP 软件的系统的 VSI 成本通常更低，但具有高级存储效率功能，可以在同一系统中处理 VDI 。ONTAP 还统一了从 SSD 到 SATA 的各种存储介质，并可轻松地将其扩展到云。无需购买一个闪存阵列即可提高性能，一个 SATA 阵列可用于归档，以及单独的系统可用于云。ONTAP 将所有这些问题联系在一起。</block>
  <block id="ec8cd066c60323f007135b1f083b64de" category="list-text">* 基于虚拟卷和存储策略的管理。 * NetApp 是 VMware 在 vSphere 虚拟卷（ VVOL ）开发方面的早期设计合作伙伴，为 VVOL 和 VMware vSphere 存储感知 API （ VASA ）提供架构输入和早期支持。这种方法不仅为 VMFS 提供了粒度虚拟机存储管理，还支持通过基于存储策略的管理实现存储配置自动化。通过这种方法，存储架构师可以设计具有不同功能的存储池， VM 管理员可以轻松地使用这些功能。ONTAP 在 VVOL 规模方面处于存储行业的领先地位，在一个集群中支持数十万个 VVOL ，而企业级阵列和小型闪存阵列供应商则支持每个阵列仅支持数千个 VVOL 。此外， NetApp 还在推动细粒度虚拟机管理的发展，即将推出支持 VVOL 3.0 的功能。</block>
  <block id="fd5311fb87e61b58d3c3d278df26af4f" category="list-text">* 存储效率。 * 虽然 NetApp 率先为生产工作负载提供重复数据删除功能，但这一创新并不是这方面的第一项或最后一项创新。它从 ONTAP Snapshot 副本开始，该副本是一种节省空间的数据保护机制，不会影响性能，同时还采用了 FlexClone 技术，可即时为 VM 创建读 / 写副本，以供生产和备份使用。NetApp 继续提供包括重复数据删除，数据压缩和零块重复数据删除在内的实时功能，以从昂贵的 SSD 中挤出最大的存储空间。最近， ONTAP 增加了使用数据缩减将较小的 I/O 操作和文件打包到磁盘块中的功能。这些功能相结合，客户发现 VSI 可节省高达 5 ： 1 的空间， VDI 可节省高达 30 ： 1 的空间。</block>
  <block id="bb73602f3344c326a7b63c94db24362a" category="list-text">* 混合云。 * 无论是用于内部私有云，公有云基础架构还是结合两者优势的混合云， ONTAP 解决方案均可帮助您构建数据网络结构，以简化和优化数据管理。从高性能全闪存系统开始，然后将其与磁盘或云存储系统结合使用，以实现数据保护和云计算。您可以选择 Azure ， AWS ， IBM 或 Google 云来优化成本并避免受制于云。根据需要利用对 OpenStack 和容器技术的高级支持。NetApp 还为 ONTAP 提供基于云的备份（ SnapMirror 云， Cloud Backup Service 和 Cloud Sync ）以及存储分层和归档工具（ FabricPool ），以帮助降低运营支出并利用云的广泛覆盖范围。</block>
  <block id="0c157ce4e4fd6289dbf0b282993c2f80" category="list-text">等等。 * 利用 NetApp AFF A 系列阵列的极致性能，在管理成本的同时加快虚拟化基础架构的运行速度。使用横向扩展 ONTAP 集群享受从维护到升级到完全更换存储系统的无中断运行。利用 NetApp 加密功能保护空闲数据，无需额外付费。通过精细的服务质量功能确保性能满足业务服务级别要求。它们都属于行业领先的企业数据管理软件 ONTAP 所提供的广泛功能。</block>
  <block id="2093983846bbd6cd7e3d486531259f7d" category="summary">此页面介绍了可用于 ONTAP 和 VMware vSphere 的混合云功能。</block>
  <block id="df94231e8c7a2b7372365ba3eb8ad621" category="doc">采用 ONTAP 和 vSphere 的混合云</block>
  <block id="c689fcb3c54ae34ac006a005e03aad07" category="section-title">关于混合云</block>
  <block id="cc81a55aaf5bd2bdf603a2aea92a875a" category="paragraph">无论是用于内部私有云，公共云基础架构还是结合两者优势的混合云， ONTAP 解决方案都可以帮助您构建数据网络结构，以简化和优化数据管理。从高性能全闪存系统开始，然后将其与磁盘或云存储系统结合使用，以实现数据保护和云计算。</block>
  <block id="9afb01441ce427bb3863eaccd46b9b5d" category="paragraph">您可以选择 Azure ， AWS ， IBM 或 Google 云来优化成本并避免受制于云。根据需要利用对 OpenStack 和容器技术的高级支持。</block>
  <block id="8a61dac106bf2a7f3b869c8ff58c4ce5" category="paragraph">数据保护通常是客户开始云之旅时首先尝试的事情。保护可以像密钥数据的异步复制一样简单，也可以像整个热备份站点一样复杂。数据保护主要基于 NetApp SnapMirror 技术。</block>
  <block id="d059ff0a497ad1427248dbb8f770b1d5" category="paragraph">一些客户选择将整个工作负载迁移到云。这可能比仅仅使用云进行数据保护更加复杂，但 ONTAP 让迁移变得更加轻松，因为您不必重新编写应用程序即可使用基于云的存储。云中的 ONTAP 与内部 ONTAP 的工作原理相同。您的内部 ONTAP 系统提供了数据效率功能，可用于在较少的物理空间中存储更多数据，并将很少使用的数据分层到较低的存储成本。无论您是使用混合云配置还是将整个工作负载迁移到云， ONTAP 都可以最大限度地提高存储性能和效率。</block>
  <block id="ad622d292f56f20b32a61fe1b8bd2f56" category="paragraph">NetApp 还为 ONTAP 提供基于云的备份（ SnapMirror 云， Cloud Backup Service 和 Cloud Sync ）以及存储分层和归档工具（ FabricPool ），以帮助降低运营支出并利用云的广泛覆盖范围。</block>
  <block id="49c437176039e1c910728eac1f332689" category="paragraph">下图提供了一个混合云使用情形示例。</block>
  <block id="e61ead4102c89a9758572df81301a1d2" category="inline-image-macro">混合云</block>
  <block id="9188eeccf6b5386d9573cea87cf05102" category="paragraph"><block ref="9188eeccf6b5386d9573cea87cf05102" category="inline-image-macro-rx" type="image"></block></block>
  <block id="293f510d2162f186910d817d97121159" category="inline-link">ONTAP 和云</block>
  <block id="3963100a9d31ca50911a23ac5c87aca1" category="admonition">有关 ONTAP 和混合云的详细信息，请参见<block ref="92883b1d8840f28e1ad4810811bf56b5" category="inline-link-rx"></block> 在 ONTAP 9 文档中心。</block>
  <block id="c5cd657df037c277c37216b73efb0b08" category="summary">如果可能，请始终使用 ONTAP 工具配置数据存储库和卷。这样可以确保卷，接合路径， LUN ， igroup ，导出策略， 以及其他设置均以兼容的方式进行配置。</block>
  <block id="d3b26e9021e83573a3d2a9050400a33a" category="doc">操作最佳实践</block>
  <block id="f02207fb26160d7e47cf5ea35d07df03" category="section-title">数据存储库和协议</block>
  <block id="4d15db58f26b374b36c283df6b5a5fc1" category="paragraph">通过 SRA 使用基于阵列的复制时， SRM 支持在 ONTAP 9 中使用 iSCSI ，光纤通道和 NFS 版本 3 。对于使用传统或 VVol 数据存储库的 NFS 版本 4.1 ， SRM 不支持基于阵列的复制。</block>
  <block id="61f54ceeb0338787a2ee2d801cbc62cd" category="paragraph">要确认连接，请始终验证您是否可以从目标 ONTAP 集群在灾难恢复站点挂载和卸载新的测试数据存储库。测试要用于数据存储库连接的每个协议。最佳做法是使用 ONTAP 工具创建测试数据存储库，因为它正在按照 SRM 的指示执行所有数据存储库自动化。</block>
  <block id="0ac3e8abbf45a28af68d22b0f59a973e" category="paragraph">每个站点的 SAN 协议都应是同构的。您可以混合使用 NFS 和 SAN ，但不应在站点内混合使用 SAN 协议。例如，您可以在站点 A 中使用 FCP ，在站点 B 中使用 iSCSI站点 A 不应同时使用 FCP 和 iSCSI原因是 SRA 不会在恢复站点创建混合 igroup ，并且 SRM 不会筛选为 SRA 提供的启动程序列表。</block>
  <block id="150f8d9d5018ff00285d9aa158451d7b" category="paragraph">先前的指南建议创建 LIF 以实现数据位置化。也就是说，始终使用物理拥有卷的节点上的 LIF 挂载数据存储库。在现代版本的 ONTAP 9 中，不再需要此功能。只要可能，如果给定的是集群范围的凭据， ONTAP 工具仍会选择在数据本地的 LIF 之间进行负载平衡，但对于高可用性或高性能而言，这并不是一项要求。</block>
  <block id="ef6e8713285283721507f92e3c3ec674" category="paragraph">可以将 NetApp ONTAP 9 配置为自动删除 Snapshot 副本，以便在自动调整大小无法提供足够紧急容量时，在空间不足的情况下保持正常运行时间。此功能的默认设置不会自动删除 SnapMirror 创建的 Snapshot 副本。如果删除了 SnapMirror Snapshot 副本，则 NetApp SRA 无法反转并重新同步受影响卷的复制。要防止 ONTAP 删除 SnapMirror Snapshot 副本，请将 Snapshot 自动删除功能配置为 try 。</block>
  <block id="a4f47f677f45e1e7075186d98e4f3ec1" category="paragraph">对于包含 SAN 数据存储库的卷，卷自动大小应设置为 `grow` ；对于 NFS 数据存储库，应设置为 `grow_shrink` 。请参见<block ref="ee2474fa4563985f2f3ebe16d4e1ab3a" category="inline-link-rx"></block> 用于特定语法。</block>
  <block id="e6955db66b8dc4aee170ebdb0b560249" category="section-title">SPBM 和 VVOL</block>
  <block id="3077a08ffed60acebf18d37874130d44" category="paragraph">从 SRM 8.3 开始，支持使用 VVOL 数据存储库保护 VM 。在 ONTAP 工具设置菜单中启用 VVOL 复制后， VASA Provider 会将 SnapMirror 计划公开到 VM 存储策略中，如以下屏幕截图所示。</block>
  <block id="399c1894baf71c0529aa0fba66ea18fb" category="paragraph">以下示例显示了 VVOL 复制的启用情况。</block>
  <block id="b180e7f35111dca8acd6c56cdbcabb3e" category="paragraph"><block ref="b180e7f35111dca8acd6c56cdbcabb3e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="be41c3baf700984021c43e2e6b661b0a" category="paragraph">以下屏幕截图提供了创建 VM 存储策略向导中显示的 SnapMirror 计划示例。</block>
  <block id="43c130b36e9e2b3d61409aa974f89fc7" category="paragraph"><block ref="43c130b36e9e2b3d61409aa974f89fc7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f6292d9eb6ea467a3c3560a65b7f63b5" category="paragraph">ONTAP VASA Provider 支持故障转移到不同的存储。例如，系统可以从边缘位置的 ONTAP Select 故障转移到核心数据中心的 AFF 系统。无论存储相似性如何，您都必须始终为启用了复制的 VM 存储策略配置存储策略映射和反向映射，以确保在恢复站点提供的服务满足预期和要求。以下屏幕截图突出显示了一个示例策略映射。</block>
  <block id="783a951245ce43eb84161804072a38c6" category="paragraph"><block ref="783a951245ce43eb84161804072a38c6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1eb90dc8f7adfd00c74af3b815e2ac15" category="section-title">为 VVOL 数据存储库创建复制的卷</block>
  <block id="18231879821321e0aed7de84fe876766" category="paragraph">与以前的 VVOL 数据存储库不同，复制的 VVOL 数据存储库必须在启用复制的情况下从头开始创建，并且它们必须使用在具有 SnapMirror 关系的 ONTAP 系统上预创建的卷。这需要预先配置集群对等和 SVM 对等。这些活动应由 ONTAP 管理员执行，因为这样可以在跨多个站点管理 ONTAP 系统的人员与主要负责 vSphere 操作的人员之间严格划分职责。</block>
  <block id="0a8c8293003bf411817ef3cedf18a2a9" category="paragraph">这代表 vSphere 管理员提出了一项新要求。由于卷是在 ONTAP 工具的范围之外创建的，因此在定期计划的重新发现期间之前，它不会意识到 ONTAP 管理员所做的更改。因此，最好在创建要用于 VVol 的卷或 SnapMirror 关系时始终运行重新发现。只需右键单击主机或集群，然后选择 NetApp ONTAP tools &gt; Update Host and Storage Data ，如以下屏幕截图所示。</block>
  <block id="dd5e006520a09e3975e52f6fb8991fd2" category="paragraph"><block ref="dd5e006520a09e3975e52f6fb8991fd2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="550d51e15336d4a33bcbb0f26a6810f7" category="paragraph">对于 VVOL 和 SRM ，应注意一个事项。切勿在同一个 VVOL 数据存储库中混用受保护和未受保护的 VM 。原因是，在使用 SRM 故障转移到灾难恢复站点时，灾难恢复中只会使属于保护组的 VM 联机。因此，在重新保护（将 SnapMirror 从灾难恢复反转至生产环境）时，您可能会覆盖未进行故障转移且可能包含有价值数据的 VM 。</block>
  <block id="6d717f70d89096b731dfc63d7a1379e1" category="section-title">关于阵列对</block>
  <block id="6dd3f3008fe81f402905b00c8dca007c" category="paragraph">系统会为每个阵列对创建一个阵列管理器。使用 SRM 和 ONTAP 工具，每个阵列配对都在 SVM 的范围内完成，即使您使用的是集群凭据也是如此。这样，您可以根据租户分配给他们管理的 SVM 在租户之间划分灾难恢复工作流。您可以为给定集群创建多个阵列管理器，这些阵列管理器本身可能不对称。您可以在不同的 ONTAP 9 集群之间扇出或扇入。例如，可以将集群 1 上的 SVMA 和 SVM-B 复制到集群 2 上的 SVM-C ，集群 3 上的 SVM-D ，反之亦然。</block>
  <block id="2219228418c053eb593ce0a1f318da47" category="paragraph">在 SRM 中配置阵列对时，应始终按照将其添加到 ONTAP 工具的方式在 SRM 中添加这些阵列对，也就是说，它们必须使用相同的用户名，密码和管理 LIF 。此要求可确保 SRA 与阵列正确通信。以下屏幕截图说明了集群在 ONTAP 工具中的显示方式以及如何将其添加到阵列管理器中。</block>
  <block id="7ec48584a43ed8a9b1dda55398d97cf4" category="paragraph"><block ref="7ec48584a43ed8a9b1dda55398d97cf4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3b34135c8c4d2b14ceb7ebf595f00193" category="section-title">关于复制组</block>
  <block id="6be59afd3c8bb91501f55a7e77ebe794" category="paragraph">复制组包含同时恢复的虚拟机的逻辑集合。ONTAP 工具 VASA Provider 会自动为您创建复制组。由于 ONTAP SnapMirror 复制是在卷级别进行的，因此卷中的所有 VM 都位于同一个复制组中。</block>
  <block id="b57ec021fce4e5261ba61df6f0c013af" category="paragraph">对于复制组以及如何在 FlexVol 卷之间分布虚拟机，需要考虑几个因素。如果旧版 ONTAP 系统缺少聚合级重复数据删除功能，则在同一个卷中对类似 VM 进行分组可以提高存储效率，但分组会增加卷的大小并减少卷 I/O 并发性。在现代 ONTAP 系统中，可以通过在同一聚合中的 FlexVol 卷之间分布虚拟机来实现性能和存储效率的最佳平衡，从而利用聚合级重复数据删除并在多个卷之间实现更大的 I/O 并行化。您可以同时恢复卷中的 VM ，因为一个保护组（如下所述）可以包含多个复制组。此布局的缺点是，由于卷 SnapMirror 不考虑聚合重复数据删除，因此可能会多次通过线缆传输块。</block>
  <block id="c727c1020d3128dd7495a6e3e6f23736" category="paragraph">对于复制组，最后要考虑的一点是，每个复制组本身都是一个逻辑一致性组（不要与 SRM 一致性组相混淆）。这是因为卷中的所有 VM 都会使用同一个快照一起传输。因此，如果您的虚拟机必须彼此一致，请考虑将其存储在同一个 FlexVol 中。</block>
  <block id="9f8a350a2113ea4be6b4e5e5112514a3" category="section-title">关于保护组</block>
  <block id="df77671ab2743af7f1d1457c200eb12c" category="paragraph">保护组用于定义从受保护站点一起恢复的组中的 VM 和数据存储库。受保护站点是指在正常稳定状态操作期间，在保护组中配置的 VM 所在的站点。请务必注意，即使 SRM 可能会为一个保护组显示多个阵列管理器，一个保护组也不能跨越多个阵列管理器。因此，您不应将 VM 文件跨越不同 SVM 上的数据存储库。</block>
  <block id="b148467d645c3613c1c7a2607764c515" category="section-title">关于恢复计划</block>
  <block id="fd28cd9834ad3aa213c4fec2881064b5" category="paragraph">恢复计划定义了在同一过程中恢复的保护组。可以在同一恢复计划中配置多个保护组。此外，要为执行恢复计划提供更多选项，可以在多个恢复计划中包含一个保护组。</block>
  <block id="77aa84394124509e5e4006dcfd18789f" category="paragraph">通过恢复计划， SRM 管理员可以定义恢复工作流，方法是将 VM 分配给优先级组，优先级组从 1 （最高）到 5 （最低）不等，默认值为 3 （中等）。在优先级组中，可以为 VM 配置依赖关系。</block>
  <block id="6d72567442b1f361e3c0e89cbc7dfd6a" category="paragraph">例如，您的公司可能有一个第 1 层业务关键型应用程序，该应用程序的数据库依赖于 Microsoft SQL 服务器。因此，您决定将 VM 置于优先级组 1 中。在优先级组 1 中，您开始规划订单以启动服务。您可能希望 Microsoft Windows 域控制器在 Microsoft SQL 服务器之前启动，而该服务器需要在应用程序服务器之前联机，依此类推。您应将所有这些 VM 添加到优先级组，然后设置依赖关系，因为依赖关系仅适用于给定优先级组。</block>
  <block id="030d749269f8866de516a551b0286001" category="paragraph">NetApp 强烈建议您与应用程序团队合作，了解故障转移场景中所需的操作顺序，并相应地构建恢复计划。</block>
  <block id="cebb1167d3e78885137c837f0abf8026" category="section-title">测试故障转移</block>
  <block id="2772828493452c4a2ff21f8b2b66a1a7" category="paragraph">作为最佳实践，每当对受保护 VM 存储的配置进行更改时，始终执行测试故障转移。这样可以确保在发生灾难时，您可以相信 Site Recovery Manager 能够在预期 RTO 目标内还原服务。</block>
  <block id="6ae8acfc86f5df3426d525fb95767506" category="paragraph">NetApp 还建议偶尔确认子系统中的应用程序功能，尤其是在重新配置 VM 存储之后。</block>
  <block id="bd47371bcd8b3d08d6b4b15481b08d93" category="paragraph">执行测试恢复操作时，会在 ESXi 主机上为 VM 创建一个专用测试气泡网络。但是，此网络不会自动连接到任何物理网络适配器，因此不会在 ESXi 主机之间提供连接。为了允许在灾难恢复测试期间不同 ESXi 主机上运行的 VM 之间进行通信，在灾难恢复站点的 ESXi 主机之间创建了一个物理专用网络。要验证测试网络是否为专用网络，可以通过物理方式或使用 VLAN 或 VLAN 标记来隔离测试气泡网络。必须将此网络与生产网络隔离，因为在恢复 VM 后，不能将其放置在 IP 地址可能与实际生产系统冲突的生产网络上。在 SRM 中创建恢复计划时，可以选择创建的测试网络作为测试期间 VM 连接到的专用网络。</block>
  <block id="2be58fc410ddf2ba9c350135a617944a" category="paragraph">验证测试并使其不再需要后，请执行清理操作。运行清理会将受保护的 VM 恢复到其初始状态，并将恢复计划重置为就绪状态。</block>
  <block id="6f07b53963ee80903f0f13654de2cc3a" category="section-title">故障转移注意事项</block>
  <block id="9d33d94019b4a595a1ea232926a4da1b" category="paragraph">除了本指南中所述的操作顺序之外，在对站点进行故障转移时还需要考虑其他几个注意事项。</block>
  <block id="74abdd5cb502cd65bcf1d7ca484ab0c2" category="paragraph">您可能需要应对的一个问题描述是站点之间的网络差异。某些环境可能能够在主站点和灾难恢复站点使用相同的网络 IP 地址。此功能称为延伸型虚拟 LAN （ VLAN ）或延伸型网络设置。其他环境可能要求主站点使用与灾难恢复站点相对的不同网络 IP 地址（例如，在不同的 VLAN 中）。</block>
  <block id="1b41638d2115765dc12f82d77ce70138" category="paragraph">VMware 提供了多种方法来解决此问题。例如， VMware NSX-T Data Center 等网络虚拟化技术可从操作环境中将整个网络堆栈从第 2 层抽象为第 7 层，从而提供更便携的解决方案。您可以阅读有关使用 SRM 的 NSX-T 选项的更多信息<block ref="99d78d594865360c3d4b527bf0a2a7f6" category="inline-link-rx"></block>。</block>
  <block id="09a74136e56a63c5aba38b89802d9080" category="paragraph">通过 SRM ，您还可以在虚拟机恢复后更改其网络配置。此重新配置包括 IP 地址，网关地址和 DNS 服务器设置等设置。可以在恢复计划中 VM 的属性设置中指定恢复后应用于各个 VM 的不同网络设置。</block>
  <block id="99f0a91111e8acb2462e8df5ecf0ab8f" category="paragraph">要将 SRM 配置为对多个 VM 应用不同的网络设置，而无需编辑恢复计划中每个 VM 的属性， VMware 提供了一个名为 dr-ip-customizer 的工具。有关如何使用此实用程序的信息，请参见 VMware 的文档<block ref="b959814092e3e6cdc8d22e768887e618" category="inline-link-rx"></block>。</block>
  <block id="3c8c527afa8ce5009c8f707f7fd4fabf" category="section-title">重新保护</block>
  <block id="3b496038cb575fc404f8b0783e570f7a" category="paragraph">恢复后，恢复站点将成为新的生产站点。由于恢复操作中断了 SnapMirror 复制，因此新生产站点不会受到任何未来灾难的影响。最佳实践是，在恢复后立即将新生产站点保护到另一站点。如果原始生产站点正常运行， VMware 管理员可以使用原始生产站点作为新的恢复站点来保护新生产站点，从而有效地反转保护方向。只有在发生非灾难性故障时，才可重新保护。因此，原始 vCenter Server ， ESXi 服务器， SRM 服务器和相应的数据库最终必须可恢复。如果没有可用的保护组和新的恢复计划，则必须创建新的保护组和恢复计划。</block>
  <block id="6d80a3efb80520f47b63dc279e1bea3d" category="section-title">故障恢复</block>
  <block id="2bf236f8aceaaff2b305848df524c42e" category="paragraph">从根本上说，故障恢复操作是指方向与以前不同的故障转移。作为最佳实践，在尝试故障恢复或换句话说，故障转移到原始站点之前，您应验证原始站点是否已恢复到可接受的功能级别。如果原始站点仍然受到影响，您应延迟故障恢复，直到故障得到充分修复为止。</block>
  <block id="cb03753531bad31391d7156433b98ae6" category="paragraph">另一个故障恢复最佳实践是，始终在完成重新保护之后以及执行最终故障恢复之前执行测试故障转移。此操作将验证原始站点上的系统是否可以完成此操作。</block>
  <block id="900a3b65ea54b6dcff72ed0d6ac66fdf" category="section-title">重新保护原始站点</block>
  <block id="2a0c13d7b927063987bf931a141f2662" category="paragraph">故障恢复后，您应先向所有利益相关方确认其服务已恢复正常，然后再重新运行重新保护。</block>
  <block id="12d059a2c7519f2e3497b30a71121503" category="paragraph">在故障恢复后运行重新保护实际上会使环境恢复到最初的状态，同时重新运行从生产站点到恢复站点的 SnapMirror 复制。</block>
  <block id="c67281070c0cff762103636210474c30" category="doc">开始使用 NetApp 和 amp ； VMware</block>
  <block id="bbaff12800505b22a853e8b7f4eb6a22" category="inline-link-macro">联系方式</block>
  <block id="11eb332ab75184a78c40c9174e16f520" category="video-title">NetApp 和 VMware ：携手合作更好</block>
  <block id="d3db539e5d56da6e251021138c5fe53f" category="section-title">了解 NetApp 和 VMware 解决方案</block>
  <block id="09f93ac387258fa68c085baba3c8fc44" category="inline-link-macro">NetApp 和 amp ； VMware ：携手合作更好</block>
  <block id="fb758bbc93c23b25607ef41f302d4eef" category="list-text"><block ref="35ef54e3b8ad8ec505bab4b973f86177" category="inline-link-macro-rx"></block></block>
  <block id="b6741313b8f46ab1018ebd6a361c22a4" category="inline-link-macro">ONTAP 9.8 VMware 的最新功能概述</block>
  <block id="d393be6d50183d7362f0adb8bc92ae08" category="list-text"><block ref="d393be6d50183d7362f0adb8bc92ae08" category="inline-link-macro-rx"></block></block>
  <block id="b25a3522acbb33341ccacac99424fcce" category="inline-link-macro">利用适用于 VMware vSphere 的 SnapCenter 插件</block>
  <block id="a65898b7011ddfb663cdba62f90581c6" category="list-text"><block ref="a65898b7011ddfb663cdba62f90581c6" category="inline-link-macro-rx"></block></block>
  <block id="60b0390f50a5ad13d613d49cfe1bce0b" category="inline-link-macro">使用 NetApp 和 NVMe 重新定义 VMware 性能</block>
  <block id="f6dde7f191b6b8f8351902b139ec8672" category="list-text"><block ref="f6dde7f191b6b8f8351902b139ec8672" category="inline-link-macro-rx"></block></block>
  <block id="c576371db342dc9cb166c73b0e157fb5" category="inline-link-macro">基于 AWS 的 VMware Cloud 的低成本高性能环境</block>
  <block id="89487ceb1ada10e49befbbaed3b714ec" category="list-text"><block ref="89487ceb1ada10e49befbbaed3b714ec" category="inline-link-macro-rx"></block></block>
  <block id="92061b0dd7904e2299ac65ed9bc2d6af" category="inline-link-macro">在 NetApp 中推出 VMware Tanzu</block>
  <block id="ae7c9beb8e4adca6da75607ee83e2403" category="list-text"><block ref="ae7c9beb8e4adca6da75607ee83e2403" category="inline-link-macro-rx"></block></block>
  <block id="a88a91878fb958db59873117d16ad078" category="inline-link-macro">Virtual Desktop Infrastructure (VDI) ：按需提供员工工作站</block>
  <block id="9467ff6388811a059199513a0a484f0b" category="list-text"><block ref="9467ff6388811a059199513a0a484f0b" category="inline-link-macro-rx"></block></block>
  <block id="d5e64137a19403f8c1c89f50546b82c5" category="inline-link-macro">VMware on AWS ：架构和服务选项</block>
  <block id="6cb2c8a80e576f132097e4d28cec24cd" category="list-text"><block ref="6cb2c8a80e576f132097e4d28cec24cd" category="inline-link-macro-rx"></block></block>
  <block id="cd4efd0ada1938b240dd48aa08010f04" category="inline-link-macro">使用 NetApp Cloud Volumes Service API 进行编程以优化 AWS 体验</block>
  <block id="f61369e9428a21eb1090be340ef36f16" category="list-text"><block ref="f61369e9428a21eb1090be340ef36f16" category="inline-link-macro-rx"></block></block>
  <block id="6d14f3ca0f5be54f01fd579906dd80bb" category="inline-link-macro">Kubernetes ：在 vSphere 和 Tanzu 上运行 K8s</block>
  <block id="ef8e103737164442c629df5b5d98769d" category="list-text"><block ref="ef8e103737164442c629df5b5d98769d" category="inline-link-macro-rx"></block></block>
  <block id="7e0caac7f6d493fab662f4f4d65ae213" category="section-title">构建虚拟化 Data Fabric</block>
  <block id="f1f4041236ed90e2a5e65e9a3c858875" category="section-title">查看适用于 VMware 的最新 NetApp 解决方案</block>
  <block id="0e8dd76bc961a90df87833953de6d067" category="inline-link-macro">采用 ONTAP 的 VMware vSphere ： NetApp 解决方案</block>
  <block id="cace63c53b42adc885a9eb4be01dba4d" category="list-text"><block ref="cace63c53b42adc885a9eb4be01dba4d" category="inline-link-macro-rx"></block></block>
  <block id="b761cb4d962320708880627e8e2fe971" category="inline-link-macro">采用 ONTAP 的 VMware vSphere 虚拟卷</block>
  <block id="5b90454e2bf0f381c8f7fc928ef6fb9e" category="list-text"><block ref="5b90454e2bf0f381c8f7fc928ef6fb9e" category="inline-link-macro-rx"></block></block>
  <block id="3390e3575b3e341afa2b7172ff5b33a7" category="inline-link-macro">适用于 VMware vSphere 的 SnapCenter 插件</block>
  <block id="730c2cf92bbe409c31ef1f39cf25377a" category="list-text"><block ref="730c2cf92bbe409c31ef1f39cf25377a" category="inline-link-macro-rx"></block></block>
  <block id="c375e5bb7184da46adef700a9a36d674" category="inline-link-macro">NetApp 现代 NVMeoF VMware vSphere 工作负载设计和放大；验证</block>
  <block id="b54be27467e63a98d65e6b17a914e373" category="list-text"><block ref="902dd483e9192a0b4645b4c8be7acbff" category="inline-link-macro-rx"></block></block>
  <block id="b860a89f6215a92f2320f0afe4e0ee05" category="inline-link-macro">适用于 VMware 和和 SQL Server 的 NetApp 现代 NVmeoF 云连接 Flash 解决方案</block>
  <block id="0ebff16085636352cc1aa1e5b0003bdb" category="list-text"><block ref="ac70b8666634dd9095602966c4c61093" category="inline-link-macro-rx"></block></block>
  <block id="eccda9b55035b56259299545d5781136" category="inline-link-macro">借助 VMware Tanzu 和 amp ； ONTAP 加快 Kubernetes 之旅</block>
  <block id="bb79e474557eb86fc30118354eef0039" category="list-text"><block ref="5dd92e330c2d45255a2025ee1eedd52d" category="inline-link-macro-rx"></block></block>
  <block id="7f8cf1c43494d40e935f5e99e38ce659" category="inline-link-macro">降低在 AWS 上运行 VMware Cloud 的成本</block>
  <block id="f0d8a1b084d604c4db4319a2c5bbd522" category="list-text"><block ref="f0d8a1b084d604c4db4319a2c5bbd522" category="inline-link-macro-rx"></block></block>
  <block id="5ab6c918ee903c74a7d7c97b2432ebaf" category="section-title">观看最新 VMware 解决方案的视频演示</block>
  <block id="7128c22bfdae1fe8be75c9a9ee56eca9" category="inline-link-macro">VMware vSphere 和 NetApp ONTAP 的最佳实践</block>
  <block id="04e008204e728ef166ffc8c85db580ed" category="list-text"><block ref="04e008204e728ef166ffc8c85db580ed" category="inline-link-macro-rx"></block></block>
  <block id="d2fa143a4aaef3477f2edb0d92676341" category="inline-link-macro">您的 VMware 环境—让我们使用 ONTAP 在 NVMe-oF 上运行它</block>
  <block id="207681662de4971035cc8d5c9347c986" category="list-text"><block ref="207681662de4971035cc8d5c9347c986" category="inline-link-macro-rx"></block></block>
  <block id="e9c2b8b8a9962013c07f83742ca35f0e" category="inline-link-macro">使用 ONTAP 工具和 VMware SRM 进行 VVOL 灾难恢复</block>
  <block id="8ca7386c3cb63b01ffc6387ba41427ae" category="list-text"><block ref="8ca7386c3cb63b01ffc6387ba41427ae" category="inline-link-macro-rx"></block></block>
  <block id="f156fde75de09cf5f045522cf738b2c7" category="inline-link-macro">使用 ONTAP 工具配置和管理 FlexGroup 数据存储库</block>
  <block id="c2a201ca982ecfefdcfec43a8df28397" category="list-text"><block ref="c2a201ca982ecfefdcfec43a8df28397" category="inline-link-macro-rx"></block></block>
  <block id="977a548ba3853fdac6d708915a1b752a" category="inline-link-macro">NetApp NFS VAAI 插件更新</block>
  <block id="a8e3bfc2dc840604c0168dd5f89aacec" category="list-text"><block ref="a8e3bfc2dc840604c0168dd5f89aacec" category="inline-link-macro-rx"></block></block>
  <block id="233398cd850d9903958583fd85621f6d" category="inline-link-macro">借助 NetApp ONTAP FlexGroup 横向扩展虚拟桌面</block>
  <block id="6ef66ca131701cfdb70302d3099b7550" category="list-text"><block ref="6ef66ca131701cfdb70302d3099b7550" category="inline-link-macro-rx"></block></block>
  <block id="e308c2a1dacddb5bc6ffa093081111e4" category="inline-link-macro">适用于 Data Fabric 的 VMware 备份和恢复</block>
  <block id="9934e59457fa5f31d39a58f1d55ac5d5" category="list-text"><block ref="9934e59457fa5f31d39a58f1d55ac5d5" category="inline-link-macro-rx"></block></block>
  <block id="a81738572d94bce863615a7d94a84051" category="inline-link-macro">借助适用于 VMware vSphere 的 SnapCenter 插件简化数据保护</block>
  <block id="f09e9fdda59d2e9d9172bd89b5dc9369" category="list-text"><block ref="f09e9fdda59d2e9d9172bd89b5dc9369" category="inline-link-macro-rx"></block></block>
  <block id="c10a86f3b9530baf3bed3b02aaaf873f" category="section-title">为 VMware 部署灵活的混合云和现代化应用程序基础架构</block>
  <block id="554cfab3938e21d9270bd6b75931f96f" category="section-title">视频</block>
  <block id="f20368920280b50131814db2f83fda66" category="inline-link-macro">基于 NetApp 全闪存 FAS 构建 VMware 数据存储库</block>
  <block id="8ff6498eeabd53b4271d75f543dc3bc4" category="list-text"><block ref="8ff6498eeabd53b4271d75f543dc3bc4" category="inline-link-macro-rx"></block></block>
  <block id="841a1e2733baa662db1207d5075a798f" category="inline-link-macro">让我们来自动化—利用 ONTAP 构建您的 VMware 云</block>
  <block id="4d0f73eb280cb12c373e099d1c320690" category="list-text"><block ref="4d0f73eb280cb12c373e099d1c320690" category="inline-link-macro-rx"></block></block>
  <block id="f1c2408ffc6e67ac6b34eb8da2b3039c" category="list-text"><block ref="f1c2408ffc6e67ac6b34eb8da2b3039c" category="inline-link-macro-rx"></block></block>
  <block id="253d309203cf1f2c1bb57255bd0a5bdc" category="inline-link-macro">将 VMware VM 迁移到 Google Cloud</block>
  <block id="baa1898009cc7495f8c4e7732ce7433a" category="list-text"><block ref="baa1898009cc7495f8c4e7732ce7433a" category="inline-link-macro-rx"></block></block>
  <block id="7518aab5e189037f632ee46ea9e3cf07" category="video-title">《部署适用于 VMware Tanzu 的动态持久 NetApp 存储》，第 1 部分</block>
  <block id="f86bf601d6e42c44cf076ea1772ae13c" category="video-title">《部署适用于 VMware Tanzu 的动态持久 NetApp 存储》，第 2 部分</block>
  <block id="bf5c12d4eed319d2dc2b2b7279944f71" category="video-title">《部署适用于 VMware Tanzu 的动态持久 NetApp 存储》，第 3 部分</block>
  <block id="d6b9ea32b921a9f56de32062ba4b94f3" category="section-title">博客</block>
  <block id="a398d57165e21c951dd9c9def41598a9" category="inline-link-macro">VMware Cloud on AWS ： Fujitsu 如何使用 CVO 节省数百万美元</block>
  <block id="d750d47d5e87a6c526e7b40e12eab95b" category="list-text"><block ref="d750d47d5e87a6c526e7b40e12eab95b" category="inline-link-macro-rx"></block></block>
  <block id="3ca2b14e719d79aed66780282e879db4" category="section-title">请联系 NetApp 和 VMware 专家</block>
  <block id="20475522c77401af1c203f23942ffda5" category="inline-link-macro">加入 VMware 解决方案论坛</block>
  <block id="1dccc60a61431b3ef3f48709a0f68de7" category="list-text"><block ref="1dccc60a61431b3ef3f48709a0f68de7" category="inline-link-macro-rx"></block></block>
  <block id="a5810200dda7a3f37fc7eae5378cc8f3" category="inline-link-macro">请联系 NetApp 全球服务团队开始使用</block>
  <block id="efb954cbfdbe0c54f04c904a2719b98a" category="list-text"><block ref="efb954cbfdbe0c54f04c904a2719b98a" category="inline-link-macro-rx"></block></block>
  <block id="1f82b18dcba5f32a085bc502cdd0c6b7" category="summary">借助 ONTAP ， Storage Virtual Machine （ SVM ）的概念可在安全多租户环境中提供严格的分段。</block>
  <block id="7520e12a140ccf3de279fe2fd48889e4" category="doc">部署最佳实践</block>
  <block id="1b4574c516231b685bb37b013b789b06" category="section-title">SMT 的 SVM 布局和分段</block>
  <block id="446e04546ec0567eeeeef8e07368ab40" category="paragraph">借助 ONTAP ， Storage Virtual Machine （ SVM ）的概念可在安全多租户环境中提供严格的分段。一个 SVM 上的 SVM 用户无法从另一个 SVM 访问或管理资源。这样，您就可以利用 ONTAP 技术，为在同一集群上管理自己 SRM 工作流的不同业务单位创建单独的 SVM ，从而提高整体存储效率。</block>
  <block id="f98c1d223f34b2fdaf90eab1a3bc6a25" category="paragraph">请考虑使用 SVM 范围的帐户和 SVM 管理 LIF 管理 ONTAP ，这样不仅可以改进安全控制，还可以提高性能。使用 SVM 范围的连接时，性能本身就会更高，因为处理整个集群中的所有资源（包括物理资源）并不需要 SRA 。相反，它只需要了解抽象到特定 SVM 的逻辑资产。</block>
  <block id="849d4d5e8a5d5b2747d8375d2ec03b29" category="paragraph">仅使用 NAS 协议（无 SAN 访问）时，您甚至可以通过设置以下参数来利用新的 NAS 优化模式（请注意，此名称是如此，因为 SRA 和 VASA 在设备中使用相同的后端服务）：</block>
  <block id="05f551a655f40911851a53ba0c721997" category="list-text">登录到控制面板，网址为 ` \https://&lt;IP address&gt; ： 9083` ，然后单击基于 Web 的命令行界面。</block>
  <block id="b0cc185c73ca964d1429a601551c68f5" category="list-text">运行命令 `vp updateconfig -key=enable.qtree.discovery -value=true` 。</block>
  <block id="5f7e35f90689bef91afe9f01257c61ac" category="list-text">运行命令 `vp updateconfig -key=enable.optimed.sra-value=true` 。</block>
  <block id="ba2a1e4d95dc56709260e82cca20a789" category="list-text">运行命令 `vp reloadconfig` 。</block>
  <block id="2d14ca751c8ce5a724606e4f75f02c50" category="section-title">部署适用于 VVOL 的 ONTAP 工具和注意事项</block>
  <block id="fa3a193f1892cf0f45f4a95a35aa3c4b" category="paragraph">如果要将 SRM 与 VVol 结合使用，则必须使用集群范围的凭据和集群管理 LIF 来管理存储。这是因为 VASA Provider 必须了解底层物理架构，才能满足 VM 存储策略的策略要求。例如，如果您的策略需要全闪存存储，则 VASA Provider 必须能够查看哪些系统全闪存。</block>
  <block id="31d279d1cc3bc5a4281567ba697f678d" category="paragraph">另一个部署最佳实践是，切勿将 ONTAP 工具设备存储在其管理的 VVOL 数据存储库上。这可能导致无法启动 VASA Provider ，因为您无法为设备创建交换 VVol ，因为设备已脱机。</block>
  <block id="97399fb37deca0d463aa5c7dc8d064a6" category="section-title">管理 ONTAP 9 系统的最佳实践</block>
  <block id="b4cbecf196108ad163c73c4e4194dde2" category="paragraph">如前所述，您可以使用集群或 SVM 范围的凭据和管理 LIF 来管理 ONTAP 集群。为了获得最佳性能，您可能需要考虑在不使用 VVOL 的情况下使用 SVM 范围的凭据。但是，在执行此操作时，您应了解一些要求，并且确实会丢失某些功能。</block>
  <block id="fec05e53ca7d96aaf3e4c1a1b2502bea" category="list-text">默认 vsadmin SVM 帐户没有执行 ONTAP 工具任务所需的访问级别。因此，您需要创建新的 SVM 帐户。</block>
  <block id="8557644859e03f54860c95ffb0bcfd53" category="list-text">如果您使用的是 ONTAP 9.8 或更高版本， NetApp 建议使用 ONTAP 系统管理器的用户菜单以及 ONTAP 工具设备上提供的 JSON 文件创建一个权限最低的 RBAC 用户帐户，网址为 ` \https://&lt;IP address&gt; ： 9083/VSC/config/` 。使用您的管理员密码下载 JSON 文件。这可以用于 SVM 或集群范围的帐户。</block>
  <block id="a7a83b5e4f375c0585588b9c7ff92219" category="inline-link">NetApp 支持站点工具箱</block>
  <block id="fdfe9ba9104df6a32fff0f859291ea3c" category="paragraph">如果您使用的是 ONTAP 9.6 或更早版本，则应使用中提供的 RBAC User Creator （ RUC ）工具<block ref="bdbf96c18cf8ac76d01fba7057b81b87" category="inline-link-rx"></block>。</block>
  <block id="ea7a3d08d55dc3e8ecf89d2a5d5e302d" category="list-text">由于 vCenter UI 插件， VASA Provider 和 SRA 服务器都是完全集成的服务，因此您必须按照在 vCenter UI for ONTAP Tools 中添加存储的方式在 SRM 中向 SRA 适配器添加存储。否则， SRA 服务器可能无法识别通过 SRA 适配器从 SRM 发送的请求。</block>
  <block id="b473de4177eeaa79a66448798a446db3" category="list-text">使用 SVM 范围的凭据时，不会执行 NFS 路径检查。这是因为物理位置从 SVM 中进行了逻辑抽象。不过，这并不是一个值得关注的发生原因，因为现代 ONTAP 系统在使用间接路径时不再出现任何明显的性能下降。</block>
  <block id="6e62430b92a7c5a0b8512436b163a10d" category="list-text">可能不会报告因存储效率而节省的聚合空间。</block>
  <block id="93d86aa51e0909549d1b1210f887aef3" category="list-text">如果支持，则无法更新负载共享镜像。</block>
  <block id="647d380b52e259fe7ed2e2582bc54b27" category="list-text">可能不会在使用 SVM 范围的凭据管理的 ONTAP 系统上执行 EMS 日志记录。</block>
  <block id="6fe85aae6e8fa231a1f417edfeef3759" category="doc">vSphere VMFS 数据存储库—具有 ONTAP 的 iSCSI 存储后端</block>
  <block id="4f6f7882fc7b858bc0eb3e3a41991494" category="paragraph">本节介绍如何使用 ONTAP iSCSI 存储创建 VMFS 数据存储库。</block>
  <block id="383b1f30f341cb0eff11db96d70e9f50" category="list-text">管理 vSphere 环境和 ONTAP 所需的基本技能。</block>
  <block id="47c341511ad626bfba98caeaa0762774" category="list-text">iSCSI 的 ONTAP 网络端口， SVM 和 LUN 信息</block>
  <block id="f76f5dc5c6861d7938aa8d60b08976c8" category="inline-link-macro">一份完整的 iSCSI 配置工作表</block>
  <block id="275e54409e966e03b62ee630e4856daa" category="list-text"><block ref="275e54409e966e03b62ee630e4856daa" category="inline-link-macro-rx"></block></block>
  <block id="c7e4d06c6b5e45fbb711be2b15976173" category="list-text">iSCSI VMKernel 适配器 IP 信息</block>
  <block id="980e76f4fd03b06bfe740133284e92a9" category="list-text">使用 ONTAP 系统网络数据端口并连接 vSphere 主机</block>
  <block id="3a6f48cf422509b67592ce2a0b4dd558" category="list-text">为 iSCSI 配置的 VLAN</block>
  <block id="a9df884192a193f56d8208439b4d1fca" category="list-text">检查与的兼容性<block ref="3028580b30f2b1d483aad9f9a7a65c7a" category="inline-link-rx"></block>。</block>
  <block id="881de4e9f9e9dba55f3d9f09d3fc8eac" category="inline-link-macro">验证是否支持 iSCSI 配置。</block>
  <block id="6a2fb6d042919f5807315156f926ab10" category="list-text"><block ref="6a2fb6d042919f5807315156f926ab10" category="inline-link-macro-rx"></block></block>
  <block id="f04a1b9690234d25ff072d6719666947" category="inline-link-macro">验证 iSCSI 的 ONTAP 许可证</block>
  <block id="41bf6980693d9ba9f5e7a797fe2f4417" category="list-text"><block ref="0767ceac1f7ac130ade75fb7fae3fc53" category="inline-link-macro-rx"></block>。</block>
  <block id="3ffc628bd3f213f0998146fb5262f366" category="list-text">使用 `ssystem license show` 命令检查是否列出了 iSCSI 。</block>
  <block id="d1b0a5732b3cb229ef0f788fbb095f05" category="list-text">使用 `license add -license-code &lt; 许可证代码 &gt;` 添加许可证。</block>
  <block id="97035bc2443de65f877c3fddd838c6ae" category="inline-link-macro">验证是否已在 SVM 上启用 iSCSI 协议。</block>
  <block id="3807dbdaab3b890b6a293c99c7b46f63" category="list-text"><block ref="3807dbdaab3b890b6a293c99c7b46f63" category="inline-link-macro-rx"></block></block>
  <block id="cb66a92bc9fa6195f8b2914bcf868664" category="list-text">验证 iSCSI 网络逻辑接口在 SVM 上是否可用。</block>
  <block id="da91d0d17d1f671a0af23e7ebb96ec92" category="admonition">使用 GUI 创建 SVM 时，还会创建 iSCSI 网络接口。</block>
  <block id="da6a83da2309e8dbd81bb5b55c7c9602" category="list-text">使用 `Network interface` 命令查看或更改网络接口。</block>
  <block id="53fd22677faa2085c1fc51f1d116faff" category="admonition">建议每个节点使用两个 iSCSI 网络接口。</block>
  <block id="69fea75e454b43e67ba176dddb604159" category="inline-link-macro">创建 iSCSI 网络接口。</block>
  <block id="1bc0e04873be7c6291aef492ff2785cc" category="list-text"><block ref="d503e168b9096ac416caa1c8f13ab28a" category="inline-link-macro-rx"></block> 您可以使用 default-data-blocks 服务策略。</block>
  <block id="bd494b2c15d88a1dfa29c308b39e8f6e" category="inline-link-macro">验证 data-iscsi 服务是否包含在服务策略中。</block>
  <block id="c436a9a899f5e1cfacf8828c90931ca9" category="list-text"><block ref="24788d985e181b3194881517c2ec7650" category="inline-link-macro-rx"></block> 您可以使用 `network interface service-policy show` 进行验证。</block>
  <block id="c0e1d066d0482fc5cc1554edaa3f36b2" category="inline-link-macro">验证是否已启用巨型帧。</block>
  <block id="a355e4512cfabb746ee4c05a87a61107" category="list-text"><block ref="a355e4512cfabb746ee4c05a87a61107" category="inline-link-macro-rx"></block></block>
  <block id="5ccd820a879b8d1daef5e44125431184" category="inline-link-macro">创建并映射 LUN 。</block>
  <block id="c49b54ab60508b16176724eeb8118049" category="list-text"><block ref="3a73ce9b9237c3e09863bf7b049ce423" category="inline-link-macro-rx"></block> 如果您使用适用于 VMware vSphere 的 ONTAP 工具，请跳过此步骤。对每个 LUN 重复此步骤。</block>
  <block id="5c9b297b088335a8562568dc59549c7d" category="list-text">验证 iSCSI VLAN 是否至少有一个可用 NIC 。为了提高性能和容错能力，最好使用两个 NIC 。</block>
  <block id="fe9e58c95c20042a4032ef737d6e8400" category="inline-link-macro">确定 vSphere 主机上可用的物理 NIC 的数量。</block>
  <block id="96cf3cacac94299a7630f48f5cf5b7e3" category="list-text"><block ref="96cf3cacac94299a7630f48f5cf5b7e3" category="inline-link-macro-rx"></block></block>
  <block id="87d3329dab6e8f24601b6f45d40614ea" category="inline-link-macro">配置 iSCSI 启动程序。</block>
  <block id="536d7ac288972152b209e6f004917285" category="list-text"><block ref="95a6e2e5fae04247474cdc6a729342fc" category="inline-link-macro-rx"></block> 典型的使用情形是软件 iSCSI 启动程序。</block>
  <block id="fd823eb37045485458bb3d5d52ddc46f" category="inline-link-macro">验证 iSCSI 的 TCPIP 堆栈是否可用</block>
  <block id="875d65383afa504aad11a619d920adc7" category="list-text"><block ref="025b4ff12eca60b6c5b5be76597b5e95" category="inline-link-macro-rx"></block>。</block>
  <block id="e45f6655250b094b5a8370ff511869c3" category="inline-link-macro">验证 iSCSI 端口组是否可用</block>
  <block id="4c93429599cf15be2af5aa0f59131c17" category="list-text"><block ref="5e67546a702454fa060946b3e582d0e9" category="inline-link-macro-rx"></block>。</block>
  <block id="b7b554d373b5992838a126134a03ba0d" category="list-text">我们通常使用具有多个上行链路端口的单个虚拟交换机。</block>
  <block id="879d70f2184599f483fd94f0f274163f" category="list-text">使用 1 ： 1 适配器映射。</block>
  <block id="9f60e3586ab900b8f879404be003b539" category="list-text">验证是否已启用 iSCSI VMKernel 适配器以匹配 NIC 数量，以及是否已分配 IP 。</block>
  <block id="3e6e09b1cda3200c7407173a3473a103" category="inline-link-macro">将 iSCSI 软件适配器绑定到 iSCSI VMKernel 适配器。</block>
  <block id="70d687ef257c5d00e0d85844c0101c77" category="list-text"><block ref="70d687ef257c5d00e0d85844c0101c77" category="inline-link-macro-rx"></block></block>
  <block id="187fbd973609969af8f47e857f8579c4" category="inline-link-macro">使用 ONTAP 工具配置 VMFS 数据存储库</block>
  <block id="1e9df60603ff2a9fe2495b189aecc647" category="list-text"><block ref="efecd5d76f6fc92c9c9a8111cf809724" category="inline-link-macro-rx"></block>。对所有数据存储库重复此步骤。</block>
  <block id="5f4723c28ea2b13a27b86c1116720a8a" category="inline-link-macro">验证硬件加速支持。</block>
  <block id="aa0cfa24dd578f0629299a21b453583c" category="list-text"><block ref="aa0cfa24dd578f0629299a21b453583c" category="inline-link-macro-rx"></block></block>
  <block id="1d3fa7ee382266d716ba7a360f30f188" category="paragraph">完成这些任务后， VMFS 数据存储库便可用于配置虚拟机。</block>
  <block id="53001b412ce4896686a413a19f6dcc5f" category="listing-title">Ansible 攻略手册</block>
  <block id="963739e9818c0bf4d8959b5cdf6a7956" category="summary">使用 VVOL 复制时， SRM 中的工作流与使用 SRA 和传统数据存储库时的工作流有明显不同。</block>
  <block id="56687c1a324f03f5d1429500efea710e" category="doc">对使用 VVol 复制的 SRM 进行故障排除</block>
  <block id="14acf40cbe69d8682b4c844ac7fbf7f6" category="paragraph">使用 VVOL 复制时， SRM 中的工作流与使用 SRA 和传统数据存储库时的工作流有明显不同。例如，没有阵列管理器概念。因此，永远看不到 `discoverarrays` 和 `discoverdevices` 命令。</block>
  <block id="ef74d715544e3b067a6bec3218ac5044" category="paragraph">在进行故障排除时，了解下面列出的新工作流非常有用：</block>
  <block id="47f0942d341ee10381b2eff35089d75d" category="list-text">queryReplicationPeer ：发现两个故障域之间的复制协议。</block>
  <block id="136a299aae29998a147852cb0cba5b4a" category="list-text">queryFaultDomain ：发现故障域层次结构。</block>
  <block id="c071098c5df923c31f6245e4db2f3861" category="list-text">queryReplicationGroup ：发现源域或目标域中的复制组。</block>
  <block id="792cfe9ad3a3dc8528080a262e92989a" category="list-text">syncReplicationGroup ：同步源和目标之间的数据。</block>
  <block id="39afb1e1e3b180a6230e07bb8571667e" category="list-text">queryPointInTimeReplica ：发现目标上的时间点副本。</block>
  <block id="9fb25fe2ff084dc9ccfb99eaccba7212" category="list-text">testFailoverReplicationGroupStart ：开始测试故障转移。</block>
  <block id="bd4e1dacaca4c37a53b5286b6ae0239d" category="list-text">testFailoverReplicationGroupStop ：结束测试故障转移。</block>
  <block id="887f376a43cf9de1d6e14a8d69e588f6" category="list-text">promoteReplicationGroup ：将当前正在测试的组提升为生产组。</block>
  <block id="17ab16c5c0786ff381e6a085318bad9b" category="list-text">prepareFailoverReplicationGroup ：准备灾难恢复。</block>
  <block id="665dd64ebcc4016bda94e0e8020d8c8e" category="list-text">failoverReplicationGroup ：执行灾难恢复。</block>
  <block id="6936cf00e30b7cd4421225113a023c3e" category="list-text">reverseReplicateGroup ：启动反向复制。</block>
  <block id="61ac8950a043e6998b458d4f8171154c" category="list-text">queryMatchingContainer ：查找可能使用给定策略满足配置请求的容器（以及主机或复制组）。</block>
  <block id="05c9efdc056d2af4640bc441ab61b53a" category="list-text">queryResourceMetadata ：从 VASA 提供程序中发现所有资源的元数据，资源利用率可以作为问题解答返回给 queryMatchingContainer 函数。</block>
  <block id="01fa56986f885c588b1be8c206623de8" category="paragraph">配置 VVOL 复制时，最常见的错误是无法发现 SnapMirror 关系。之所以出现这种情况，是因为卷和 SnapMirror 关系是在 ONTAP 工具的权限范围之外创建的。因此，最佳做法是，在尝试创建复制的 VVOL 数据存储库之前，始终确保 SnapMirror 关系已完全初始化，并且您已在两个站点的 ONTAP 工具中运行重新发现。</block>
  <block id="ff53ee8001042abcefe5c912d0b5012f" category="section-title">vSphere 数据存储库和协议功能</block>
  <block id="7a787d6880ccfe1032af2f4288ce3901" category="paragraph">在运行 ONTAP 软件的系统上，使用五种协议将 VMware vSphere 连接到数据存储库：</block>
  <block id="6b8f0029ce30f9b4d5fe0def33875511" category="list-text">FC</block>
  <block id="14eae6ee278098bfad4f8a10fd6c1195" category="list-text">FCoE</block>
  <block id="26bcb9f1cb6f391f4b2c18e676bb458d" category="list-text">NVMe/FC</block>
  <block id="cbc9a42283809f1edcb32b4a495813f9" category="paragraph">FC ， FCoE ， NVMe/FC 和 iSCSI 是块协议，它们使用 vSphere 虚拟机文件系统（ VMFS ）将 VM 存储在 ONTAP LUN 或 ONTAP 卷中包含的命名空间中。请注意，从 vSphere 7.0 开始， VMware 不再支持在生产环境中使用软件 FCoE 。NFS 是一种文件协议，无需使用 VMFS 即可将虚拟机放置到数据存储库（即 ONTAP 卷）中。SMB ， iSCSI 或 NFS 也可以直接从子操作系统到 ONTAP 使用。</block>
  <block id="0f2f72ef3f176b98134caf100a06cf5f" category="inline-link">VMware 配置最大值</block>
  <block id="6a6d2374b838393f6805b58d97c2c490" category="paragraph">下表显示了 ONTAP 支持的 vSphere 传统数据存储库功能。此信息不适用于 VVOL 数据存储库，但它通常适用于使用受支持的 ONTAP 版本的适用场景 vSphere 6.x 和 7.x 版本。您也可以参考<block ref="26c5407c98ec413c85131fd8c0d178b4" category="inline-link-rx"></block> 用于确认特定限制的特定 vSphere 版本。</block>
  <block id="9da73946f1bc3be4a41898d06c9d2e8b" category="cell">功能 / 功能</block>
  <block id="c982f804d02e2d7e937f125d2cac1024" category="cell">FC/FCoE</block>
  <block id="520d0db389f362bf79ef56ca0af3dcab" category="cell">格式。</block>
  <block id="99a3142584ca8ad0a3afadeaa6f2ef69" category="cell">VMFS 或原始设备映射（ RDM ）</block>
  <block id="26aae26f61844ac20ab7b04ba6f5c515" category="cell">VMFS 或 RDM</block>
  <block id="8dc6d0c66219ddb809322c0d248e55e6" category="cell">数据存储库或 LUN 的最大数量</block>
  <block id="468abcddfc22ae5cb2288b9937b300fb" category="cell">256 个目标 /HBA</block>
  <block id="72097e262592a146da0e4e856068965b" category="cell">256 个目标</block>
  <block id="2774ddb6f193789c5d9a480b9e53a38d" category="cell">256 个挂载默认 NFS 。最大卷数为 8 。使用适用于 VMware vSphere 的 ONTAP 工具将其增加到 256 。</block>
  <block id="51c0dc217976e27de06e262947947a62" category="cell">最大数据存储库大小</block>
  <block id="856c997f909830b8249756c07dc9452b" category="cell">64 TB</block>
  <block id="8e5d3a4b085389c59a1a7af7c4067a9b" category="cell">使用 FlexGroup 卷时为 100 TB 或更高的 FlexVol 卷</block>
  <block id="a4b27c6cd629522064dc48306e2bf8bb" category="cell">最大数据存储库文件大小（对于使用 vSphere 5.5 和 VMFS 5 或更高版本的 VMDK ）</block>
  <block id="d10549beb2f7bd1e91e5ef8965edd84a" category="cell">62 TB</block>
  <block id="ddf38e51732c3f7da57dc13c31a5483b" category="cell">vSphere 支持的最大大小为 16 TB 62 TB 。</block>
  <block id="9aa56a79640231adaec83bc53e59c929" category="cell">每个 LUN 或文件系统的最佳队列深度</block>
  <block id="ea5d2f1c4608232e07d3aa3d998e5135" category="cell">64</block>
  <block id="edc5121cb9b42a76b718b8ece9d67437" category="paragraph">下表列出了支持的 VMware 存储相关功能。</block>
  <block id="130b78bfd6c9b050a912fec77e285e3f" category="cell">容量 / 功能</block>
  <block id="6c1a84b789b54fd42511ce582be94d21" category="cell">VMotion</block>
  <block id="e95b58d02782c970bb339c6cc587ff39" category="cell">存储 vMotion</block>
  <block id="0486e0e3dc3e86859f43b6d8e32b8071" category="cell">VMware HA</block>
  <block id="8be6bd7f20474cbefdd496cb9fd495ca" category="cell">存储分布式资源计划程序（ Storage Distributed Resource Scheduler ， SDRS ）</block>
  <block id="4244919a64848265426dfd82a14f8248" category="cell">支持 VMware vStorage APIs for Data Protection （ VADP ）的备份软件</block>
  <block id="28c2f8ab9cdbf296aa4261bc3c58ba0d" category="cell">虚拟机中的 Microsoft 集群服务（ MSCS ）或故障转移集群</block>
  <block id="01a9a3b8d0fcae3055dc91935e8ec6c6" category="cell">是 *</block>
  <block id="aa7f77e663b832d5b0e544c5511e680c" category="cell">不支持</block>
  <block id="aa18abedec09bd4f85e612c307e2eaa6" category="cell">容错</block>
  <block id="bfd52522de4ac6efd6f680e0e754eeb5" category="cell">Site Recovery Manager</block>
  <block id="17d495427086fa21259b9df40b27e00a" category="cell">精简配置的 VM （虚拟磁盘）</block>
  <block id="4ee7af004efef335d6a14c60ee758f5e" category="cell">是。如果不使用 VAAI ，则此设置是 NFS 上所有 VM 的默认设置。</block>
  <block id="13bc264ff420559de4156ec40980a4b9" category="cell">VMware 原生多路径</block>
  <block id="8339c514e73f5cced3b83d504d60441b" category="inline-link">Windows Server 故障转移集群设置</block>
  <block id="547211ca8a6b93fee863925a03cd341b" category="paragraph">* NetApp 建议在 VMFS 数据存储库中对 Microsoft 集群使用来宾 iSCSI ，而不是使用启用了多写入程序的 VMDK 。Microsoft 和 VMware 完全支持这种方法，并可通过 ONTAP （ SnapMirror 到内部或云中的 ONTAP 系统）提供极大的灵活性，易于配置和自动化，并可通过 SnapCenter 进行保护。vSphere 7 添加了一个新的集群模式 VMDK 选项。这与启用了多写入程序的 VMDK 不同，但需要通过 FC 协议提供数据存储库，该协议已启用集群模式 VMDK 支持。其他限制适用。请参见 VMware 的<block ref="b158594c147457b5b6417413cb30f800" category="inline-link-rx"></block> 配置准则文档。</block>
  <block id="a06819d91a165d0491c5816c54b41234" category="paragraph">下表列出了支持的 ONTAP 存储管理功能。</block>
  <block id="f8d61013f1a3bbf1342f4ced3279c7cf" category="cell">重复数据删除</block>
  <block id="72167540968147afed9deb59f0e9fe00" category="cell">阵列中的节省量</block>
  <block id="9a5473a6abaea16b736f096913a749be" category="cell">数据存储库中的节省量</block>
  <block id="6cd880eabbec3488232c6cba3fbcf998" category="cell">精简配置</block>
  <block id="5caeb11c4ed379b808d7f7cdca7cfbf0" category="cell">数据存储库或 RDM</block>
  <block id="8a5227cc82d14862956938caffc1acf2" category="cell">数据存储库</block>
  <block id="b71ba22dcd42deceac87150206f7bd12" category="cell">调整数据存储库大小</block>
  <block id="c6b792bfd7aac8067d36337e67d11545" category="cell">仅增长</block>
  <block id="29e23534878bb63341e0b689426b7fb0" category="cell">增长，自动增长和缩减</block>
  <block id="76021405cc62a4b8c542e7f65e3d24ed" category="cell">适用于 Windows 和 Linux 应用程序的 SnapCenter 插件（在子系统中）</block>
  <block id="c0b3c629432c82a9e8500242abb35eaf" category="cell">使用适用于 VMware vSphere 的 ONTAP 工具监控和主机配置</block>
  <block id="5a915a8215e9a66bcff0f034e8adff18" category="cell">使用适用于 VMware vSphere 的 ONTAP 工具进行配置</block>
  <block id="6495c7cda42bf1b80bc1c2af6166ef58" category="paragraph">下表列出了支持的备份功能。</block>
  <block id="1208a2df45bea7d2edea13f0b0cbc686" category="cell">ONTAP Snapshot 副本</block>
  <block id="bf22a1b5bc2b72a75825094826a942de" category="cell">复制的备份支持 SRM</block>
  <block id="60d3f7d9f265eb34e826da352cb545be" category="cell">卷 SnapMirror</block>
  <block id="fabf31a57c142c986c5d88cb089b3d7b" category="cell">VMDK 映像访问</block>
  <block id="40b655e79545b3922b8095be28d59428" category="cell">支持 VADP 的备份软件</block>
  <block id="8215e73d220182794dfbd75ad494c727" category="cell">启用了 VADP 的备份软件， vSphere Client 和 vSphere Web Client 数据存储库浏览器</block>
  <block id="d7605580ecad0fcb4528789d74cdcad5" category="cell">vmdk 文件级访问</block>
  <block id="906ece32da286d6c4b323bc0d6443b7c" category="cell">启用了 VADP 的备份软件，仅限 Windows</block>
  <block id="d17e2fa63a62622f88bf170612132383" category="cell">支持 VADP 的备份软件和第三方应用程序</block>
  <block id="4e3d259d82a536e12c5c9c948b62e26a" category="cell">NDMP 粒度</block>
  <block id="90d45e02e50c81603c36a4e4ad3649d9" category="cell">数据存储库或 VM</block>
  <block id="54b3e11ce37eaaa9884f4086e72dd2be" category="section-title">选择存储协议</block>
  <block id="4bbd62e7748dbf2416c644698342b5f9" category="paragraph">运行 ONTAP 软件的系统支持所有主要存储协议，因此客户可以根据现有和计划的网络基础架构以及员工技能选择最适合其环境的存储协议。NetApp 测试通常表明，以相似的线路速度运行的协议之间差别不大，因此，与原始协议性能相比，最好重点关注您的网络基础架构和员工能力。</block>
  <block id="0212b4e8bc965dcd8a7ff771dd96bf21" category="paragraph">在考虑选择协议时，以下因素可能会很有用：</block>
  <block id="c0ab9c6170165211885267a562d057a2" category="list-text">* 当前的客户环境。 * 尽管 IT 团队通常擅长管理以太网 IP 基础架构，但并非所有团队都擅长管理 FC SAN 网络结构。但是，使用非存储流量专用的通用 IP 网络可能无法正常工作。请考虑您已有的网络基础架构，任何计划内的改进，以及管理这些改进的人员的技能和可用性。</block>
  <block id="774f1348caf3e145710073eb634c4fa1" category="list-text">* 易于设置。 * 除了 FC 网络结构的初始配置（额外的交换机以及 HBA 和固件的布线，分区以及互操作性验证）之外，块协议还需要创建和映射 LUN 以及通过子操作系统进行发现和格式化。创建并导出 NFS 卷后，它们将由 ESXi 主机挂载并准备好使用。NFS 没有特殊的硬件资格认定或固件可供管理。</block>
  <block id="bf5169ce5bb544313eaf17435f756da2" category="list-text">* 易于管理。 * 使用 SAN 协议时，如果需要更多空间，则需要执行几个步骤，包括增加 LUN ，重新扫描以发现新大小，然后增加文件系统大小。虽然可以增加 LUN 的大小，但不能减小 LUN 的大小，因此恢复未使用的空间可能需要额外的工作。NFS 可以轻松地进行大小调整，存储系统可以自动调整大小。SAN 可通过子操作系统剪切 /UNMAP 命令提供空间回收，从而允许将已删除文件中的空间返回到阵列。使用 NFS 数据存储库时，这种类型的空间回收会更加困难。</block>
  <block id="530c759326761c6ac026b313985b255f" category="list-text">* 存储空间透明度。 * 在 NFS 环境中，存储利用率通常更容易查看，因为精简配置可以立即实现节省。同样，重复数据删除和克隆节省的空间可立即用于同一数据存储库中的其他虚拟机或其他存储系统卷。NFS 数据存储库中的虚拟机密度通常也会更高，这样可以减少要管理的数据存储库数量，从而节省重复数据删除的空间，并降低管理成本。</block>
  <block id="16ee928b12bc598bf52b0f312879ec95" category="section-title">数据存储库布局</block>
  <block id="066ed1c180617b2f9028c1f789078de4" category="paragraph">ONTAP 存储系统可以非常灵活地为 VM 和虚拟磁盘创建数据存储库。尽管在使用 VSC 为 vSphere 配置数据存储库时会应用许多 ONTAP 最佳实践（在一节中列出） <block ref="311a0f5ed21de3c81d57d9c08f2ace49" category="inline-link-macro-rx"></block>），下面是需要考虑的其他一些准则：</block>
  <block id="73ab3808ccb313675f9b890edf67fd09" category="list-text">使用 ONTAP NFS 数据存储库部署 vSphere 可实现高性能，易于管理的实施，从而提供基于块的存储协议无法实现的虚拟机与数据存储库比率。此架构可将数据存储库密度提高十倍，并相应地减少数据存储库数量。虽然较大的数据存储库可以提高存储效率并提供运营优势，但请考虑至少使用四个数据存储库（ FlexVol 卷）将虚拟机存储在一个 ONTAP 控制器上，以便从硬件资源中获得最大性能。通过这种方法，您还可以使用不同的恢复策略建立数据存储库。根据业务需求，某些备份或复制比其他备份或复制频率更高。FlexGroup 卷不需要多个数据存储库来提高性能，因为它可以根据设计进行扩展。</block>
  <block id="68281e9d236ee27e21f68ce5838462f1" category="list-text">NetApp 建议使用 FlexVol 卷，并且从 ONTAP 9.8 FlexGroup 卷开始，使用 NFS 数据存储库。通常不建议使用其他 ONTAP 存储容器，例如 qtree ，因为适用于 VMware vSphere 的 ONTAP 工具目前不支持这些容器。在一个卷中将数据存储库部署为多个 qtree 对于高度自动化的环境可能很有用，这些环境可以从数据存储库级别的配额或 VM 文件克隆中受益。</block>
  <block id="dc4d78be836807b32c7ef7f42028b1ef" category="list-text">对于 FlexVol 卷数据存储库，大小合适的数据存储库大约为 4 TB 到 8 TB 。这种大小可以很好地平衡性能，易管理性和数据保护。从小规模入手（例如 4 TB ），然后根据需要扩展数据存储库（最大 100 TB ）。较小的数据存储库可以更快地从备份中或发生灾难后进行恢复，并可在集群中快速移动。请考虑使用 ONTAP 自动调整大小功能在已用空间发生变化时自动增长和缩减卷。默认情况下，适用于 VMware vSphere 数据存储库配置向导的 ONTAP 工具会对新数据存储库使用自动调整大小。可以使用 System Manager 或命令行对增长和缩减阈值以及大小上限和下限进行其他自定义。</block>
  <block id="12346208f1923ebe162c32f3c4ccf23a" category="list-text">或者，也可以为 VMFS 数据存储库配置由 FC ， iSCSI 或 FCoE 访问的 LUN 。VMFS 允许集群中的每个 ESX 服务器同时访问传统 LUN 。VMFS 数据存储库的大小最多可达 64 TB ，并且最多可包含 32 个 2 TB LUN （ VMFS 3 ）或一个 64 TB LUN （ VMFS 5 ）。大多数系统上的 ONTAP 最大 LUN 大小为 16 TB ，所有 SAN 阵列系统上的最大 LUN 大小为 128 TB 。因此，可以使用四个 16 TB LUN 在大多数 ONTAP 系统上创建最大大小的 VMFS 5 数据存储库。尽管使用多个 LUN （使用高端 FAS 或 AFF 系统）的高 I/O 工作负载可获得性能优势，但创建，管理和保护数据存储库 LUN 的管理复杂性增加以及可用性风险增加，抵消了这一优势。NetApp 通常建议为每个数据存储库使用一个大型 LUN ，并且只有在特殊需要超过 16 TB 数据存储库时才会跨越。与 NFS 一样，请考虑使用多个数据存储库（卷），以便在一个 ONTAP 控制器上最大限度地提高性能。</block>
  <block id="c74cab014e402128efd8102b941c0b0c" category="list-text">较旧的子操作系统（ OS ）需要与存储系统对齐，以获得最佳性能和存储效率。但是， Microsoft 和 Linux 分销商（例如 Red Hat ）提供的现代供应商支持的操作系统不再需要进行调整，以便在虚拟环境中将文件系统分区与底层存储系统的块对齐。如果您使用的旧操作系统可能需要对齐，请使用 "VM 对齐 " 在 NetApp 支持知识库中搜索文章，或者向 NetApp 销售人员或合作伙伴联系人请求 TR-3747 的副本。</block>
  <block id="3c8b400142a84af9ebe6262bce512ccb" category="list-text">避免在子操作系统中使用碎片整理实用程序，因为这不会提高性能，并会影响存储效率和 Snapshot 副本空间使用量。此外，还应考虑在子操作系统中关闭虚拟桌面的搜索索引。</block>
  <block id="14abb814748566a24367c4459a54840b" category="list-text">ONTAP 凭借创新的存储效率功能引领行业发展，帮助您充分利用可用磁盘空间。AFF 系统通过默认实时重复数据删除和数据压缩进一步提高了这种效率。数据会在聚合中的所有卷之间进行重复数据删除，因此您无需再将相似的操作系统和类似应用程序分组到一个数据存储库中，即可最大程度地节省空间。</block>
  <block id="154cd001dd3ef8eabdf209f4faf2ddde" category="inline-link">TR-3633 ： Data ONTAP 上的 Oracle 数据库</block>
  <block id="8f2f733fd8f32e7aaa1ee62e48a55117" category="list-text">在某些情况下，您甚至可能不需要数据存储库。为了获得最佳性能和易管理性，请避免对数据库和某些应用程序等高 I/O 应用程序使用数据存储库。而是考虑由子系统拥有的文件系统，例如由子系统管理或使用 RDM 管理的 NFS 或 iSCSI 文件系统。有关具体的应用指南，请参见适用于您的应用程序的 NetApp 技术报告。例如：<block ref="8cb1dd6561aaa08584e14e742f429a3e" category="inline-link-rx"></block> 包含一个有关虚拟化的章节，其中包含有用的详细信息。</block>
  <block id="6cda576d2fd323c1a728b7ac67d6034f" category="list-text">一级磁盘（或经过改进的虚拟磁盘）支持独立于运行 vSphere 6.5 及更高版本的 VM 的 vCenter 管理磁盘。虽然它们主要由 API 管理，但对于 VVOL 很有用，尤其是在由 OpenStack 或 Kubernetes 工具管理时。ONTAP 以及适用于 VMware vSphere 的 ONTAP 工具均支持这些功能。</block>
  <block id="71318121439b39fdf872bb0bd57494f2" category="section-title">数据存储库和 VM 迁移</block>
  <block id="e8824ce2062c6d1fc536163f7b8940bd" category="paragraph">将 VM 从另一个存储系统上的现有数据存储库迁移到 ONTAP 时，请记住以下一些实践：</block>
  <block id="73b729fbc964c7d78dd90b64aaaeb785" category="list-text">使用 Storage vMotion 将虚拟机的批量移动到 ONTAP 。这种方法不仅不会对正在运行的 VM 造成中断，而且还可以通过实时重复数据删除和数据压缩等 ONTAP 存储效率功能在数据迁移时对其进行处理。请考虑使用 vCenter 功能从清单列表中选择多个 VM ，然后在适当的时间计划迁移（单击操作时使用 Ctrl 键）。</block>
  <block id="008116a0d875d0de070d1a10314abbaa" category="list-text">虽然您可以仔细规划迁移到适当的目标数据存储库，但批量迁移之后再根据需要进行组织往往会更简单。如果您有特定的数据保护需求，例如不同的 Snapshot 计划，则可能需要使用此方法来指导您迁移到不同的数据存储库。</block>
  <block id="616b2180a0659911fed5aa758dba722c" category="list-text">大多数 VM 及其存储可以在运行时进行迁移（热迁移），但从另一个存储系统迁移连接的存储（不在数据存储库中），例如 ISO ， LUN 或 NFS 卷可能需要冷迁移。</block>
  <block id="fbb88da5639930a05f510729e473a216" category="inline-link">TR-4534</block>
  <block id="282806c282d96fdf15b71278587f2bfe" category="list-text">需要更仔细迁移的虚拟机包括使用连接存储的数据库和应用程序。通常，请考虑使用应用程序的工具来管理迁移。对于 Oracle ，请考虑使用 RMAN 或 ASM 等 Oracle 工具迁移数据库文件。请参见<block ref="6b3f565e7a7ce633fa62f4114c295216" category="inline-link-rx"></block> 有关详细信息 ...同样，对于 SQL Server ，请考虑使用 SQL Server Management Studio 或 NetApp 工具，例如适用于 SQL Server 的 SnapManager 或 SnapCenter 。</block>
  <block id="ed9018b2e8611a3d2c03bb6a205b9715" category="section-title">适用于 VMware vSphere 的 ONTAP 工具</block>
  <block id="00f47a68ebd81ba943b17dbc30d78db6" category="paragraph">将 vSphere 与运行 ONTAP 软件的系统结合使用时，最重要的最佳实践是安装和使用适用于 VMware vSphere 的 ONTAP 工具插件（以前称为虚拟存储控制台）。无论使用 SAN 还是 NAS ，此 vCenter 插件均可简化存储管理，提高可用性并降低存储成本和运营开销。它使用最佳实践来配置数据存储库，并针对多路径和 HBA 超时优化 ESXi 主机设置（这些内容在附录 B 中进行了介绍）。由于它是一个 vCenter 插件，因此可供连接到 vCenter 服务器的所有 vSphere Web 客户端使用。</block>
  <block id="21eddd0bd26d119e0602b3ceb65aff45" category="paragraph">此插件还可帮助您在 vSphere 环境中使用其他 ONTAP 工具。它允许您安装适用于 VMware VAAI 的 NFS 插件，该插件支持将副本卸载到 ONTAP 以执行 VM 克隆操作，为厚虚拟磁盘文件预留空间以及执行 ONTAP Snapshot 副本卸载。</block>
  <block id="80303385ad0f7147caa1af6d2162852b" category="paragraph">该插件也是适用于 ONTAP 的 VASA Provider 的许多功能的管理界面，支持使用 VVOL 进行基于存储策略的管理。注册适用于 VMware vSphere 的 ONTAP 工具后，可使用它创建存储功能配置文件，将其映射到存储，并确保数据存储库随时间的推移符合这些配置文件。VASA Provider 还提供了一个用于创建和管理 VVol 数据存储库的界面。</block>
  <block id="9baea886f208a41896164d4ade5b3fde" category="paragraph">一般来说， NetApp 建议在 vCenter 中使用适用于 VMware vSphere 的 ONTAP 工具来配置传统数据存储库和 VVOL 数据存储库，以确保遵循最佳实践。</block>
  <block id="6161d374e9022f89382fd63b4be15aa1" category="section-title">常规网络连接</block>
  <block id="f0cd6847f2a7a0773ad0b58d0f9dc67d" category="paragraph">在将 vSphere 与运行 ONTAP 软件的系统结合使用时，配置网络设置非常简单，与其他网络配置类似。需要考虑以下几点：</block>
  <block id="9600865cce7d923667012211ddac46de" category="list-text">将存储网络流量与其他网络分开。可以通过使用专用 VLAN 或单独的存储交换机来实现单独的网络。如果存储网络共享上行链路等物理路径，您可能需要 QoS 或其他上行链路端口来确保带宽充足。不要将主机直接连接到存储；使用交换机具有冗余路径，并允许 VMware HA 在不干预的情况下运行。</block>
  <block id="7c4904daaa282388097ad83bf382e1a5" category="list-text">如果您的网络需要并支持巨型帧，则可以使用巨型帧，尤其是在使用 iSCSI 时。如果使用这些协议，请确保在存储和 ESXi 主机之间的路径中的所有网络设备， VLAN 等上对其进行相同的配置。否则，您可能会看到性能或连接问题。此外，还必须在 ESXi 虚拟交换机， VMkernel 端口以及每个 ONTAP 节点的物理端口或接口组上以相同的方式设置 MTU 。</block>
  <block id="8b6e7f43d1d697e8f99164f0aa2ab1b6" category="inline-link">TR-4182</block>
  <block id="3745abd352adaa2cdec42c798060eef6" category="list-text">NetApp 仅建议在 ONTAP 集群中的集群网络端口上禁用网络流量控制。对于用于数据流量的其余网络端口， NetApp 不提供其他最佳实践建议。您应根据需要启用或禁用。请参见<block ref="bdfb81665a0ef86d871a52c0e6ebc591" category="inline-link-rx"></block> 了解有关流量控制的更多背景信息。</block>
  <block id="730a8287f758961d602b1b050bbe2751" category="list-text">当 ESXi 和 ONTAP 存储阵列连接到以太网存储网络时， NetApp 建议将这些系统连接到的以太网端口配置为快速生成树协议（ RSTP ）边缘端口或使用 Cisco PortFast 功能。NetApp 建议在使用 Cisco PortFast 功能且为 ESXi 服务器或 ONTAP 存储阵列启用了 802.1Q VLAN 中继的环境中启用生成树 PortFast 中继功能。</block>
  <block id="ac4976538e1fc8726f77afc202561afc" category="list-text">NetApp 建议采用以下链路聚合最佳实践：</block>
  <block id="102e4f88579e89519d8c614561d5e302" category="list-text">使用支持在两个独立交换机机箱上进行端口链路聚合的交换机，采用多机箱链路聚合组方法，例如 Cisco 的虚拟端口通道（ Virtual PortChannel ， vPC ）。</block>
  <block id="f331781b955fd46506835e783c953ed4" category="list-text">对连接到 ESXi 的交换机端口禁用 LACP ，除非使用配置了 LACP 的 dvSwitches 5.1 或更高版本。</block>
  <block id="eb8cf3a79d16ed9f0e2c1de65c379bc5" category="list-text">使用 LACP 为 ONTAP 存储系统创建链路聚合，并使用具有 IP 哈希的动态多模式接口组。</block>
  <block id="8ebcba6104088fb46f64395277d21edd" category="list-text">在 ESXi 上使用 IP 哈希绑定策略。</block>
  <block id="2432030fc6183a1a6c52cf5e93f3e9ae" category="paragraph">下表汇总了网络配置项，并指出了这些设置的应用位置。</block>
  <block id="7d74f3b92b19da5e606d737d339a9679" category="cell">项目</block>
  <block id="1aa66ef3a8e34a7a538960a80d2e1e31" category="cell">ESXi</block>
  <block id="bbc155fb2b111bf61c4f5ff892915e6b" category="cell">交换机</block>
  <block id="6c3a6944a808a7c0bbb6788dbec54a9f" category="cell">Node</block>
  <block id="0b7e67b6cdcf0432b624d53588d520fb" category="cell">SVM</block>
  <block id="75ba8d70e3692ba200f0e0df37b4d2ae" category="cell">IP 地址</block>
  <block id="ee6c0f25c2881cc69947a2ef23be5b8c" category="cell">VMkernel</block>
  <block id="e11f298a5bd5344d2d975b5157c27b69" category="cell">否</block>
  <block id="d6f0876f76c273b8962b749c36153157" category="cell">链路聚合</block>
  <block id="fabd320b3b2249377e53e93099e27657" category="cell">虚拟交换机</block>
  <block id="b1b40427c8eb8d0a083ddb16e250325b" category="cell">否 *</block>
  <block id="9881f82f0dd89588831f9d1682bd5492" category="cell">VLAN</block>
  <block id="5fc0d231160fa9650ea5c877f146bbe6" category="cell">VMkernel 和 VM 端口组</block>
  <block id="39a3e05f380e583ae2887c79c7443f11" category="cell">流量控制</block>
  <block id="220071ab44b426f80ef21f1c552c363c" category="cell">NIC</block>
  <block id="6f2c08412f489e52a17a30217f50b3c1" category="cell">生成树</block>
  <block id="4b1c0df98ba3f3d1681c3c3dbdc97746" category="cell">MTU （适用于巨型帧）</block>
  <block id="7d6feaf896df4a937157d4ee5b91f4e1" category="cell">虚拟交换机和 VMkernel 端口（ 9000 ）</block>
  <block id="0110e50bd8629573701e73a4ba8b056f" category="cell">是（设置为最大值）</block>
  <block id="061ff5255adf00e4ae68469f43a7bf55" category="cell">是（ 9000 ）</block>
  <block id="bcc0e5a3e08cd34e80692195d056b06d" category="cell">故障转移组</block>
  <block id="a4d1a66a448e327c12d3e287098a31d5" category="cell">是（创建）</block>
  <block id="465d5674eb6808b997037470f4dace73" category="cell">是（选择）</block>
  <block id="93e04df6f821105fd0ab88e95eaee167" category="paragraph">* SVM LIF 连接到具有 VLAN ， MTU 和其他设置的端口，接口组或 VLAN 接口，但这些设置不在 SVM 级别进行管理。</block>
  <block id="50ecdab93bf5a2f1bfb4cd8f81b9bd3d" category="paragraph">这些设备具有自己的 IP 地址进行管理，但这些地址不会在 ESXi 存储网络环境中使用。</block>
  <block id="efd0bde36323238fec688b9cdf0c75a3" category="section-title">SAN （ FC ， FCoE ， NVMe/FC ， iSCSI ）， RDM</block>
  <block id="29cdd488736a6111699f7348320bbed7" category="paragraph">在 vSphere 中，可以通过三种方式使用块存储 LUN ：</block>
  <block id="8982d243303f9d1a8c2470b7d55278e6" category="list-text">使用 VMFS 数据存储库</block>
  <block id="9a0098c8c1be287e8d1da1aaf3bd2e59" category="list-text">使用原始设备映射（ RDM ）</block>
  <block id="93e209176746ac6f25c618631a02643b" category="list-text">作为 LUN ，由软件启动程序从 VM 子操作系统访问和控制</block>
  <block id="c25dc676ca39a05ee6067ac9a50dbce0" category="paragraph">VMFS 是一种高性能集群文件系统，可提供共享存储池中的数据存储库。可以为 VMFS 数据存储库配置 LUN ，这些 LUN 可通过 NVMe/FC 协议访问的 FC ， iSCSI ， FCoE 或 NVMe 命名空间进行访问。VMFS 允许集群中的每个 ESX 服务器同时访问传统 LUN 。ONTAP 最大 LUN 大小通常为 16 TB ；因此，使用四个 16 TB LUN （所有 SAN 阵列系统均支持最大 VMFS LUN 大小为 64 TB ）来创建最大 64 TB 的 VMFS 5 数据存储库（请参见本节中的第一个表）。由于 ONTAP LUN 架构不具有较小的单个队列深度，因此 ONTAP 中的 VMFS 数据存储库可以以相对简单的方式扩展到比传统阵列架构更大的程度。</block>
  <block id="43f67f108e50dab0978a343603cbfec9" category="paragraph">vSphere 内置了对存储设备的多条路径的支持，称为原生多路径（ NMP ）。NMP 可以检测受支持存储系统的存储类型，并自动配置 NMP 堆栈以支持正在使用的存储系统的功能。</block>
  <block id="6bf646772584de04f877d166e564b5ff" category="paragraph">NMP 和 NetApp ONTAP 均支持非对称逻辑单元访问（ Asymmetric Logical Unit Access ， ALUA ）来协商优化和非优化路径。在 ONTAP 中，经过 ALUA 优化的路径遵循直接数据路径，并使用托管所访问 LUN 的节点上的目标端口。默认情况下，在 vSphere 和 ONTAP 中均已启用 ALUA 。NMP 会将 ONTAP 集群识别为 ALUA ，并使用 ALUA 存储阵列类型插件（`VMW_SATAP_ALUA` ），然后选择轮循路径选择插件（`VMW_PSP_RR` ）。</block>
  <block id="b284ee628d89c3e804c4def2a90f0520" category="paragraph">ESXi 6 最多支持 256 个 LUN 以及 1 ， 024 个 LUN 的总路径。ESXi 无法识别超出这些限制的任何 LUN 或路径。假设 LUN 数量达到最大值，则路径限制允许每个 LUN 使用四个路径。在较大的 ONTAP 集群中，可以在达到 LUN 限制之前达到路径限制。为了解决此限制， ONTAP 在 8.3 及更高版本中支持选择性 LUN 映射（ SLM ）。</block>
  <block id="8466b1e5abb4751e931c5feb1af4e469" category="inline-link">TR-4080</block>
  <block id="a1319b3463fde689889152797a3cf966" category="paragraph">SLM 会限制向给定 LUN 公布路径的节点。NetApp 最佳实践是，每个 SVM 的每个节点至少具有一个 LIF ，并使用 SLM 限制向托管 LUN 的节点及其 HA 配对节点公布的路径。尽管存在其他路径，但默认情况下不会公布这些路径。可以使用 SLM 中的添加和删除报告节点参数修改公布的路径。请注意，在 8.3 之前的版本中创建的 LUN 会公布所有路径，需要进行修改，以便仅向托管 HA 对公布这些路径。有关 SLM 的详细信息，请查看的第 5.9 节<block ref="c6b12416d518b4689065ffe16afe88db" category="inline-link-rx"></block>。也可以使用先前的端口集方法进一步减少 LUN 的可用路径。端口集有助于减少 igroup 中启动程序可通过的可见路径数。</block>
  <block id="4157f0c23fc104508f492dc846f187f3" category="list-text">默认情况下， SLM 处于启用状态。除非使用端口集，否则不需要进行其他配置。</block>
  <block id="597f1433ad810b3b86c7ae0f8f95afa8" category="list-text">对于在 Data ONTAP 8.3 之前创建的 LUN ，请手动应用 SLM ，方法是运行 `lun mapping remove-reporting-nodes` 命令删除 LUN 报告节点并将 LUN 访问限制为 LUN 所属节点及其 HA 配对节点。</block>
  <block id="43919b4d4d6d446ed498e26bff62db84" category="paragraph">块协议（ iSCSI ， FC 和 FCoE ）使用 LUN ID 和序列号以及唯一名称来访问 LUN 。FC 和 FCoE 使用全球通用名称（ WWPN 和 WWPN ）， iSCSI 使用 iSCSI 限定名称（ IQN ）。存储中 LUN 的路径对于块协议没有意义，并且不会显示在协议的任何位置。因此，只包含 LUN 的卷根本无需在内部挂载，而包含数据存储库中使用的 LUN 的卷则不需要接合路径。ONTAP 中的 NVMe 子系统的工作原理类似。</block>
  <block id="ed0e76ed86e852bd7317a09d856ec4e8" category="paragraph">要考虑的其他最佳实践：</block>
  <block id="93586ad57931e0f16fff61cdba9d77df" category="list-text">确保为 ONTAP 集群中每个节点上的每个 SVM 创建一个逻辑接口（ LIF ），以最大程度地提高可用性和移动性。ONTAP SAN 最佳实践是，每个节点使用两个物理端口和 LIF ，每个网络结构使用一个。ALUA 用于解析路径并识别活动优化（直接）路径与活动非优化路径。ALUA 用于 FC ， FCoE 和 iSCSI 。</block>
  <block id="b3cebb7381bddbabb1e950a46d264190" category="list-text">对于 iSCSI 网络，如果存在多个虚拟交换机，请在采用 NIC 绑定的不同网络子网上使用多个 VMkernel 网络接口。您还可以使用连接到多个物理交换机的多个物理 NIC 来提供 HA 并提高吞吐量。下图提供了多路径连接的示例。在 ONTAP 中，使用连接到两个或更多交换机的两个或更多链路配置一个单模式接口组以进行故障转移，或者使用 LACP 或其他具有多模式接口组的链路聚合技术来提供 HA 和链路聚合的优势。</block>
  <block id="2968b9f3c141bf23bc73d0e6e15a174a" category="list-text">如果在 ESXi 中使用质询握手身份验证协议（ Challenge-Handshake Authentication Protocol ， CHAP ）进行目标身份验证，则还必须使用命令行界面（`vserver iscsi security create` ）或 System Manager （在 "Storage"&gt;"SVM"&gt;"SVM 设置 "&gt;" 协议 "&gt;"iSCSI" 下编辑 "Initiator Security" ）在 ONTAP 中进行配置。</block>
  <block id="d31f2e075df4ca75ca0874fa08f74b12" category="list-text">使用适用于 VMware vSphere 的 ONTAP 工具创建和管理 LUN 和 igroup 。此插件会自动确定服务器的 WWPN 并创建适当的 igroup 。它还会根据最佳实践配置 LUN 并将其映射到正确的 igroup 。</block>
  <block id="de78559e8aed2cd62fbf852f73dc58c2" category="inline-link">物理和虚拟兼容模式</block>
  <block id="905221150fdd103b5241870a0a1f2c42" category="list-text">请小心使用 RDM ，因为它们可能更难管理，并且它们也使用路径，这些路径会受到前面所述的限制。ONTAP LUN 支持这两者<block ref="27e1f8e5a88cfbb2836b083145b004c9" category="inline-link-rx"></block> RDM 。</block>
  <block id="636da39a2033c6179a718983c5ce1222" category="inline-link">《 ONTAP NVMe/FC 主机配置指南》</block>
  <block id="81ef6507a13da5635951bc5b533deb59" category="inline-link">TR-4684</block>
  <block id="15483b0826bb9a4b11d1c89af2029c5c" category="list-text">有关将 NVMe/FC 与 vSphere 7.0 结合使用的详细信息，请参见此部分<block ref="6b4ed262d14e47ef641cd57b65c32c38" category="inline-link-rx"></block> 和<block ref="7a29b2f31035a451d5b068728d2b79a7" category="inline-link-rx"></block>下图显示了从 vSphere 主机到 ONTAP LUN 的多路径连接。</block>
  <block id="f9fd9ea22ea7a2e8ec9e95254a449831" category="paragraph"><block ref="f9fd9ea22ea7a2e8ec9e95254a449831" category="inline-image-macro-rx" type="image"></block></block>
  <block id="54452390cac5f65f3bcec580ba079531" category="section-title">FlexGroup</block>
  <block id="f203949f2e35204098b66b9c1519b66e" category="paragraph">ONTAP 9.8 增加了对 vSphere 中 FlexGroup 数据存储库的支持，并增加了适用于 VMware vSphere 9.8 版本的 ONTAP 工具。FlexGroup 简化了大型数据存储库的创建，并自动创建了大量成分卷，以便从 ONTAP 系统中获得最大性能。将 FlexGroup 与 vSphere 结合使用，可用于一个具有完整 ONTAP 集群功能的可扩展 vSphere 数据存储库。</block>
  <block id="6829bc8d3038be0130fd2b409ad5e560" category="paragraph">除了对 vSphere 工作负载进行大量系统测试之外， ONTAP 9.8 还为 FlexGroup 数据存储库添加了一种新的副本卸载机制。这样可以使用经过改进的复制引擎在后台的成分卷之间复制文件，同时允许在源和目标上进行访问。如果需要，多个副本会根据规模在成分卷中使用可立即使用且节省空间的文件克隆。</block>
  <block id="760383437e8e5cbe4a2560753da783fb" category="paragraph">ONTAP 9.8 还为 FlexGroup 文件添加了基于文件的新性能指标（ IOPS ，吞吐量和延迟），这些指标可在适用于 VMware vSphere 的 ONTAP 工具信息板和 VM 报告中查看。适用于 VMware vSphere 的 ONTAP 工具插件还允许您结合使用最大和 / 或最小 IOPS 来设置服务质量（ QoS ）规则。可以在数据存储库中的所有 VM 之间设置这些值，也可以为特定 VM 单独设置这些值。</block>
  <block id="50783a97403d748762dff691da2d3723" category="paragraph">以下是 NetApp 开发的其他一些最佳实践：</block>
  <block id="d190c5fcdf8146c1dd7aad1140be4e64" category="list-text">使用 FlexGroup 配置默认值。虽然建议使用适用于 VMware vSphere 的 ONTAP 工具，因为它可以在 vSphere 中创建和挂载 FlexGroup ，但也可以使用 ONTAP System Manager 或命令行来满足特殊需求。即使如此，也可以使用默认值，例如每个节点的成分卷成员数，因为这是已通过 vSphere 测试的结果。</block>
  <block id="9f3fa65c2cc36eabd2228b984c30c5e1" category="list-text">在估算 FlexGroup 数据存储库的规模时，请记住， FlexGroup 由多个较小的 FlexVol 卷组成，这些卷会创建一个较大的命名空间。因此，请将数据存储库的大小至少设置为最大虚拟机的 8 倍。例如，如果您的环境中有一个 6 TB 的 VM ，请将 FlexGroup 数据存储库的大小调整为不小于 48 TB 。</block>
  <block id="5fbee6b763967c822bb1e4a31665b11d" category="list-text">允许 FlexGroup 管理数据存储库空间。已使用 vSphere 数据存储库测试自动调整大小和弹性调整。如果数据存储库容量接近全满，请使用适用于 VMware vSphere 的 ONTAP 工具或其他工具调整 FlexGroup 卷的大小。FlexGroup 可在成分卷之间保持容量和索引节点的平衡，并在容量允许的情况下优先将文件夹（ VM ）中的文件分配给同一成分卷。</block>
  <block id="c4528ad57baf62254d165d4e907e6f59" category="list-text">VMware 和 NetApp 目前不支持通用的多路径网络连接方法。对于 NFSv4.1 ， NetApp 支持 pNFS ，而 VMware 支持会话中继。NFSv3 不支持通过多个物理路径访问一个卷。对于采用 ONTAP 9.8 的 FlexGroup ，我们建议的最佳实践是让适用于 VMware vSphere 的 ONTAP 工具进行一次挂载，因为间接访问的影响通常很小（微秒）。可以使用轮循 DNS 在 FlexGroup 中不同节点上的 LIF 之间分布 ESXi 主机，但这需要在不使用适用于 VMware vSphere 的 ONTAP 工具的情况下创建和挂载 FlexGroup 。然后，性能管理功能将不可用。</block>
  <block id="f5f11bb6aa98d02453eca36d5d1d2e19" category="list-text">在 9.8 版中，最多已对 1500 个 VM 的 FlexGroup vSphere 数据存储库支持进行了测试。</block>
  <block id="f48591b3ae898f29a551a2995a7dcfe8" category="list-text">使用适用于 VMware VAAI 的 NFS 插件执行副本卸载。请注意，在 FlexGroup 数据存储库中增强了克隆功能，但在 FlexVol 和 / 或 FlexGroup 卷之间复制虚拟机时，与 ESXi 主机副本相比， ONTAP 不会提供显著的性能优势。</block>
  <block id="57a0d1deb8da99d321814990d26d21ed" category="list-text">使用适用于 VMware vSphere 9.8 的 ONTAP 工具使用 ONTAP 指标（信息板和 VM 报告）监控 FlexGroup VM 的性能，并管理各个 VM 上的 QoS 。目前无法通过 ONTAP 命令或 API 获得这些指标。</block>
  <block id="ad971da24ec0a38449ebf31e4e2c9332" category="list-text">此时，可以在数据存储库中的各个 VM 或所有 VM 上设置 QoS （最大 / 最小 IOPS ）。在所有 VM 上设置 QoS 将取代任何单独的每 VM 设置。将来，设置不会扩展到新的或迁移的虚拟机；可以在新虚拟机上设置 QoS ，也可以将 QoS 重新应用于数据存储库中的所有虚拟机。</block>
  <block id="3c9d41390700cbdfb2c273f00df0d6fd" category="list-text">适用于 VMware vSphere 的 SnapCenter 插件 4.4 版支持在主存储系统上的 FlexGroup 数据存储库中备份和恢复 VM 。虽然可以手动使用 SnapMirror 将 FlexGroup 复制到二级系统，但 4 号选择控制器不管理二级副本。</block>
  <block id="f5852a230bef6cf666f848c5a2137db2" category="doc">ONTAP 统一存储</block>
  <block id="0dc14c0a294efec0c8cab98ebffa39f0" category="section-title">关于统一存储</block>
  <block id="d00516b816f266ee64e7b1de5af59ff2" category="paragraph">运行 ONTAP 软件的系统在多个重要方面实现了统一。最初，这种方法是指在一个存储系统上同时支持 NAS 和 SAN 协议，而 ONTAP 仍然是 SAN 的领先平台，同时也是其在 NAS 中的原始优势。Storage Virtual Machine （ SVM ）是一种逻辑构造，允许客户端访问运行 ONTAP 软件的系统。SVM 可以通过多个数据访问协议通过逻辑接口（ Logical Interface ， LIF ）同时提供数据。SVM 可通过 CIFS 和 NFS 等 NAS 协议提供文件级数据访问，并通过 iSCSI ， FC/FCoE 和 NVMe 等 SAN 协议提供块级数据访问。SVM 可以同时单独为 SAN 和 NAS 客户端提供数据。</block>
  <block id="92515b597b8c0784d6000b89ee47c5fd" category="inline-image-macro">统一存储</block>
  <block id="d6154a0901f9ca6bb5d8fb15c113581e" category="paragraph"><block ref="d6154a0901f9ca6bb5d8fb15c113581e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c3d59082aeee25c59b01266eaef6cb14" category="paragraph">在 vSphere 环境中，这种方法还可能意味着为虚拟桌面基础架构 (VDI) 和虚拟服务器基础架构（ VSI ）提供一个统一的系统。与传统企业阵列相比，运行 ONTAP 软件的系统的 VSI 成本通常更低，但具有高级存储效率功能，可以在同一系统中处理 VDI 。ONTAP 还统一了从 SSD 到 SATA 的各种存储介质，并可轻松地将其扩展到云。无需购买一个闪存阵列即可提高性能，一个 SATA 阵列可用于归档，以及单独的系统可用于云。ONTAP 将所有这些问题联系在一起。</block>
  <block id="e9e0f5f2c513c7138ea70b4c929d6fef" category="inline-link">存储虚拟化</block>
  <block id="54c9439ad8fb4842a5a86c34d2401e36" category="admonition">有关 SVM ，统一存储和客户端访问的详细信息，请参见<block ref="2843f934dec816d79f9c394ad0533c28" category="inline-link-rx"></block> 在 ONTAP 9 文档中心。</block>
  <block id="c0ddbacfe0f703e62904558059e40001" category="summary">本节提供了有关特定版本的 ONTAP 和 vSphere 支持的功能的指导。NetApp 建议使用 NetApp 互操作性表确认版本的特定组合。</block>
  <block id="bc8be72fdc9d6054f356bb2b7f80fd12" category="inline-link">NetApp 互操作性表</block>
  <block id="2f6ae9fa35fbcb0ec3205505ee027642" category="paragraph">本节提供了有关特定版本的 ONTAP 和 vSphere 支持的功能的指导。NetApp 建议确认版本与的特定组合<block ref="50c84d2622d2bc5cc86e7d8724309075" category="inline-link-rx"></block>。</block>
  <block id="7912c2100fd9b3b96b0b03e7a068fc9a" category="section-title">ONTAP 版本</block>
  <block id="8ee2892e0fb10cc58205a3d682abdb58" category="paragraph">在本报告发布时， NetApp 为以下版本系列提供了全面支持：</block>
  <block id="0fcf2ee62acd9eae83b609a0e7ecaa72" category="list-text">ONTAP 9.5</block>
  <block id="7dd2a92fd3f41a5334edf46f95d77e71" category="list-text">ONTAP 9.6</block>
  <block id="3447b91e516e4fc6b5dba827fcb68bee" category="list-text">ONTAP 9.7</block>
  <block id="2abfff2974f589f7a217325f304e0ec5" category="list-text">ONTAP 9.8</block>
  <block id="ee4651b72d795faf25a1382eb1315a95" category="section-title">vSphere 和 ESXi 支持</block>
  <block id="c3123497dcfdcdf46908ad18a51928ca" category="paragraph">NetApp ONTAP 广泛支持 vSphere ESXi 主机。上述四个主要版本系列（ 9.5 ， 9.6 ， 9.7 和 9.8 ）完全支持用作最新 vSphere 版本的数据存储平台，包括 6.0 ， 6.5 和 7.0 （包括这些版本的更新）。NFS v3 的互操作性已得到广泛定义， NetApp 支持任何符合 NFS v3 标准的客户端，包括虚拟机管理程序。NFSv4.1 支持仅限于 vSphere 6.0 到 7.0 。</block>
  <block id="8276b4666ec9fee7d71b01f6ee2b9955" category="paragraph">对于 SAN 环境， NetApp 会对 SAN 组件进行广泛的测试。一般来说， NetApp 支持标准 x86-64 机架式服务器和 Cisco UCS 服务器以及标准以太网适配器进行 iSCSI 连接。由于需要 HBA 固件和驱动程序， FC ， FCoE 和 NVMe/FC 环境具有更明确的支持定义。</block>
  <block id="a9854fb3ed44e3b8e9236c5b70405101" category="paragraph">请始终检查<block ref="50c84d2622d2bc5cc86e7d8724309075" category="inline-link-rx"></block> 确认支持特定硬件和软件配置。</block>
  <block id="dd55e255500b9ec15305dc69dfa0e15b" category="section-title">适用于 VMware VAAI 的 NFS 插件</block>
  <block id="eb3ac5aa51c1cacfa31cee70ac6586f0" category="paragraph">此适用于 ESXi 主机的插件有助于使用 VAAI 将操作卸载到 ONTAP 。最新版本 1.1.2 支持 NFSv4.1 数据存储库，包括 Kerberos （ krb5 和 krb5i ）支持。ESXi 6.0 ， 6.5 和 7.0 以及 ONTAP 9.5- 9.8 均支持此功能。</block>
  <block id="b2dd36bd4918e00f8b2e15e6d62a4b94" category="section-title">VASA 提供程序</block>
  <block id="15c15a65e1486d45a44c6f61927ef836" category="paragraph">NetApp 的 VASA Provider 支持 VVOL 配置和管理（请参见第 3.7 节）。最新的 VASA Provider 版本支持 ESXi 6.0 ， 6.5 和 7.0 以及 ONTAP 9.5- 9.8 。</block>
  <block id="c13550c8bc0f9b77e92bd2533221de9d" category="paragraph">适用于 VMware vSphere 的 ONTAP 工具是与 vSphere 一起管理 ONTAP 存储的关键（最佳做法是使用它）。vSphere 6.5 和 7.0 以及 ONTAP 9.5- 9.8 均支持最新版本 9.8 。</block>
  <block id="fa7b524ea902bff51145e4279b653d84" category="summary">此页面提供了视频和教程的简介。</block>
  <block id="246bb366fee5c7eda4fcd280728ec465" category="doc">混合云，桌面虚拟化和容器视频和演示</block>
  <block id="d04d1afcb2d01179846658f678623306" category="paragraph">请参见以下视频和演示，其中重点介绍了混合云，桌面虚拟化和容器解决方案的特定功能。</block>
  <block id="4267881eb271396086a3cc1387da9a3a" category="section-title">NetApp 与 VMware Tanzu</block>
  <block id="2dd739333b022cfeccd93e19c8c39d83" category="paragraph">借助 VMware Tanzu ，客户可以通过 vSphere 或 VMware Cloud Foundation 部署，管理和管理 Kubernetes 环境。通过 VMware 的这一产品组合，客户可以选择最适合其需求的 VMware Tanzu 版本，从一个控制平台管理所有相关的 Kubernetes 集群。</block>
  <block id="f8d0723a562ed498a977795477b75cb0" category="inline-link">VMware Tanzu 概述</block>
  <block id="2d3e9ef8ae693e8ff80c4d6e70f0a876" category="paragraph">有关 VMware Tanzu 的详细信息，请参见<block ref="1951d4038519ab642a1c0f8898cecfe0" category="inline-link-rx"></block>。此审核涵盖使用情形，可用添加内容以及有关 VMware Tanzu 的更多信息。</block>
  <block id="f90851c66bcfaa6ba091b34fe8a7428b" category="section-title">NetApp 与 VMware Tanzu 视频系列</block>
  <block id="31c49b154032d3d6039542b651e0f3d4" category="list-text"><block ref="31c49b154032d3d6039542b651e0f3d4" category="inline-link-rx"></block></block>
  <block id="fcf1189eaf4e4e32d27ee5174d63ae3c" category="list-text"><block ref="fcf1189eaf4e4e32d27ee5174d63ae3c" category="inline-link-rx"></block></block>
  <block id="5963b1ea39cb7cc8a0a4f5ce7c5ef816" category="list-text"><block ref="5963b1ea39cb7cc8a0a4f5ce7c5ef816" category="inline-link-rx"></block></block>
  <block id="20cf4402cce1622d010e58ef54b0c753" category="section-title">采用 Red Hat OpenShift 的 NetApp</block>
  <block id="0454c59b86dfb678c92c2c7480958d1c" category="paragraph">Red Hat OpenShift 是一款企业级 Kubernetes 平台，可用于运行采用开放式混合云策略的基于容器的应用程序。Red Hat OpenShift 作为领先公有云上的云服务或自助管理软件提供，可为客户提供设计基于容器的解决方案所需的灵活性。</block>
  <block id="2426b725f5be26f50931584ae804c2eb" category="inline-link">Red Hat OpenShift 概述</block>
  <block id="ad973740d0b3378d367abba8a74a610e" category="paragraph">有关 Red Hat OpenShift 的详细信息，请参见此部分<block ref="dc6de73076240cafa99651f2d6acfef4" category="inline-link-rx"></block>。您还可以查看产品文档和部署选项，了解有关 Red Hat OpenShift 的更多信息。</block>
  <block id="282b81467c1dda139fb97c67a904cdcb" category="section-title">NetApp 与 Red Hat OpenShift 视频</block>
  <block id="ade88b04ec62ed28eb857e48bc32cef5" category="list-text"><block ref="ade88b04ec62ed28eb857e48bc32cef5" category="inline-link-rx"></block></block>
  <block id="a2f2cd3053597e34724347a57620122b" category="list-text"><block ref="a2f2cd3053597e34724347a57620122b" category="inline-link-rx"></block></block>
  <block id="ca424b2aec79a90f676772e544578e54" category="doc">《适用于 VMware 虚拟化的 ONTAP 的新增功能》</block>
  <block id="e1ad6e34a69720808e091316ea5e105f" category="inline-link-macro">行数 =21..38</block>
  <block id="24988a51cebf36bd40a4e4df7f9199a1" category="paragraph"><block ref="24988a51cebf36bd40a4e4df7f9199a1" category="inline-link-macro-rx"></block></block>
  <block id="02d4482d332e1aef3437cd61c9bcc624" category="doc">请联系我们</block>
  <block id="3dd3a0a8eebc543e239dc4af5d76b322" category="paragraph">您对本技术报告有何意见？</block>
  <block id="3c48757505a122bf371d1bf0105b6871" category="paragraph">请发送电子邮件至 doccomments@netapp.com ，并在主题行中注明 TR-4597 。</block>
  <block id="dcaf091737df278b1b4bdd2e37c10a75" category="summary">NetApp ONTAP 自 2002 年引入现代数据中心以来，一直是 VMware vSphere 环境中的领先存储解决方案，它不断增加创新功能来简化管理，同时降低成本。</block>
  <block id="1fdf67ffe178876efb8b8cacfb0f052b" category="doc">TR-4900 ：采用 NetApp ONTAP 9 的 VMware Site Recovery Manager</block>
  <block id="cc6ab3d11d2dc330a573866f7c9f67aa" category="paragraph">NetApp 的 Chance Bingen</block>
  <block id="60398bdc931fc67a9b6d781434c3a15a" category="section-title">适用于 vSphere 的 ONTAP</block>
  <block id="09d6c6a1868cc36795c7a0f8f84e50c9" category="paragraph">NetApp ONTAP 自 2002 年引入现代数据中心以来，一直是 VMware vSphere 环境中的领先存储解决方案，它不断增加创新功能来简化管理，同时降低成本。本文档介绍了 VMware 行业领先的灾难恢复（ Disaster Recovery ， DR ）软件 ONTAP 解决方案 for VMware Site Recovery Manager （ SRM ），其中包括最新的产品信息和最佳实践，可简化部署，降低风险和简化日常管理。</block>
  <block id="e3445c3aa798f5ad98665e33d34dd952" category="paragraph">最佳实践是指南和兼容性工具等其他文档的补充。它们是根据 NetApp 工程师和客户的实验室测试和丰富的现场经验开发的。在某些情况下，建议的最佳实践可能不适合您的环境；但是，它们通常是最简单的解决方案，可满足大多数客户的需求。</block>
  <block id="c3edc14dbc5862176444f521372d1744" category="paragraph">本文档重点介绍 ONTAP 9 的最新版本与适用于 VMware vSphere 的受支持 ONTAP 工具版本（包括 NetApp 存储复制适配器（ SRA ）和 VASA Provider （ VP ））以及 VMware Site Recovery Manager 8 结合使用时的功能。4.</block>
  <block id="c40f8c2af56356193284f6b46865d954" category="section-title">为什么要将 ONTAP 与 SRM 结合使用？</block>
  <block id="3c41d5be62c97a13079e9c7abf078292" category="paragraph">由 ONTAP 软件提供支持的 NetApp 数据管理平台是 SRM 采用最广泛的一些存储解决方案。原因很多：一个安全，高性能，统一协议（ NAS 和 SAN 结合使用）的数据管理平台，可提供行业定义的存储效率，多租户，服务质量控制，使用节省空间的 Snapshot 副本保护数据以及使用 SnapMirror 进行复制。利用原生混合多云集成来保护 VMware 工作负载，以及触手可及的大量自动化和流程编排工具。</block>
  <block id="0d573b6a27c08499fee406e3db49812f" category="paragraph">使用 SnapMirror 进行基于阵列的复制时，您可以利用 ONTAP 最成熟，经验证的技术之一。SnapMirror 可以让您获得安全高效的数据传输优势，只复制更改过的文件系统块，而不是复制整个 VM 或数据存储库。即使这些块也可以利用重复数据删除，数据压缩和数据缩减等空间节省。现代 ONTAP 系统现在使用与版本无关的 SnapMirror ，让您可以灵活地选择源集群和目标集群。SnapMirror 确实已成为灾难恢复可用的最强大工具之一。</block>
  <block id="36b04390d6103d8075862e4b825a485e" category="paragraph">无论您使用的是传统 NFS ， iSCSI 还是光纤通道连接的数据存储库（现在支持 VVol 数据存储库）， SRM 都可以提供强大的第一方产品，充分利用 ONTAP 的最佳功能进行灾难恢复或数据中心迁移规划和编排。</block>
  <block id="5d111e8a6885460b43ecf1f7abb6377e" category="section-title">SRM 如何利用 ONTAP 9</block>
  <block id="16d4ec242c9f020f3a1fade311c776ed" category="paragraph">SRM 可通过与适用于 VMware vSphere 的 ONTAP 工具集成来利用 ONTAP 系统的高级数据管理技术， VMware vSphere 是一种虚拟设备，其中包括三个主要组件：</block>
  <block id="d54038ba1f2a04a5b5f26c96627ae3e7" category="list-text">无论您使用的是 SAN 还是 NAS ， vCenter 插件（以前称为 Virtual Storage Console （ VSC ））均可简化存储管理和效率功能，提高可用性并降低存储成本和运营开销。它使用最佳实践配置数据存储库，并为 NFS 和块存储环境优化 ESXi 主机设置。为了获得所有这些优势， NetApp 建议在将 vSphere 与运行 ONTAP 软件的系统结合使用时使用此插件。</block>
  <block id="a106bb15d6dc2b11535ed4fefc81fbf4" category="list-text">适用于 ONTAP 的 VASA Provider 支持 VMware vStorage APIs for Storage Awareness （ VASA ）框架。VASA Provider 可将 vCenter Server 与 ONTAP 连接起来，以帮助配置和监控 VM 存储。它支持 VMware 虚拟卷（ VVOL ），并可管理存储功能配置文件（包括 VVOL 复制功能）和单个 VM VVOL 性能。此外，它还提供警报，用于监控容量以及配置文件合规性。与 SRM 结合使用时，适用于 ONTAP 的 VASA Provider 支持基于 VVOL 的虚拟机，而无需在 SRM 服务器上安装 SRA 适配器。</block>
  <block id="f2007951062862f5f0d593acbb23bcb4" category="list-text">SRA 与 SRM 结合使用，用于管理传统 VMFS 和 NFS 数据存储库的生产站点和灾难恢复站点之间的 VM 数据复制，并用于无中断测试灾难恢复副本。它有助于自动执行发现，恢复和重新保护任务。它包括适用于 Windows SRM 服务器和 SRM 设备的 SRA 服务器设备和 SRA 适配器。</block>
  <block id="8ccaa60ee78ecc93c4870b3b2ad15284" category="paragraph">在 SRM 服务器上安装并配置 SRA 适配器以保护非 VVOL 数据存储库和 / 或在 VASA Provider 设置中启用 VVOL 复制后，您可以开始配置 vSphere 环境以实现灾难恢复的任务。</block>
  <block id="0a1e25166326359cd5f50d0ab83e6a37" category="paragraph">SRA 和 VASA Provider 为 SRM 服务器提供了一个命令和控制界面，用于管理包含 VMware 虚拟机（ VM ）的 ONTAP FlexVol 以及保护它们的 SnapMirror 复制。</block>
  <block id="38db855935949f86c5db7bfe7d49873e" category="paragraph">从 SRM 8.3 开始， SRM 服务器引入了一个新的 SRM VVol Provider 控制路径，使其可以与 vCenter 服务器进行通信，并通过该服务器与 VASA Provider 进行通信，而无需 SRA 。这样， SRM 服务器就可以比以前更深入地控制 ONTAP 集群，因为 VASA 可提供一个完整的 API 来实现紧密耦合的集成。</block>
  <block id="53e971f0dfb3ef96ca359dcb648176b9" category="paragraph">SRM 可以使用 NetApp 的专有 FlexClone 技术无中断地测试灾难恢复计划，以便在灾难恢复站点上为受保护的数据存储库创建近乎即时的克隆。SRM 会创建一个沙盒来进行安全测试，以便在发生真正灾难时保护您的组织和客户，从而让您对组织在发生灾难时执行故障转移的能力充满信心。</block>
  <block id="04a8f82007ed4bec45053912a49b6f85" category="paragraph">如果发生真正的灾难甚至是计划内迁移， SRM 允许您通过最终 SnapMirror 更新（如果您选择这样做）向数据集发送任何最后一分钟的更改。然后，它会中断镜像并将数据存储库挂载到灾难恢复主机。此时，您可以根据预先规划的策略按任意顺序自动启动 VM 。</block>
  <block id="b2560426a08ae6ceb167dad2bfb5e8ae" category="section-title">采用 ONTAP 的 SRM 以及其他使用情形：混合云和迁移</block>
  <block id="ed4c730bd8636c27d3eaa876c63b3d45" category="inline-link">Equinix 中的 NetApp 私有存储</block>
  <block id="b422e05bc5c6f52208b66ff51d718b9d" category="paragraph">与本地存储选项相比，将 SRM 部署与 ONTAP 高级数据管理功能相集成，可以显著提高扩展能力和性能。除此之外，它还带来了混合云的灵活性。通过混合云，您可以使用 FabricPool 将未使用的数据块从高性能阵列分层到首选超大规模存储器，从而节省资金。 StorageGRID 可以是 NetApp 等内部 S3 存储。您还可以使用 Cloud Volumes ONTAP （ CVO ）或对基于边缘的系统使用 SnapMirror ，并使用软件定义的 ONTAP Select 或基于云的灾难恢复<block ref="37a666d3a37f1c4a8c4c8dba379664a4" category="inline-link-rx"></block> 适用于 Amazon Web Services （ AWS ）， Microsoft Azure 和 Google Cloud Platform （ GCP ），可在云中创建完全集成的存储，网络和计算服务堆栈。</block>
  <block id="10ae334f731d3c4fabafa8017f7a3ab2" category="paragraph">然后，借助 FlexClone ，您可以在存储占用空间接近零的云服务提供商数据中心内执行测试故障转移。现在，保护您的组织的成本比以往任何时候都低。</block>
  <block id="12d0cbcf61df7df30bf9b020f6fbb051" category="paragraph">SRM 还可用于执行计划内迁移，方法是利用 SnapMirror 将 VM 从一个数据中心高效地传输到另一个数据中心，甚至在同一个数据中心内高效地传输 VM ，无论您自己还是通过任意数量的 NetApp 合作伙伴服务提供商。</block>
  <block id="93ac3f76e97265952e309b2cbb980030" category="summary">此页面提供了在 VMware vSphere 环境中部署 NetApp ONTAP NFS 版本 4 数据存储库的步骤。</block>
  <block id="11bbb95c80fd3935828f1472bade3ae4" category="doc">vSphere NFS 数据存储库—使用 ONTAP 的 4.1 版</block>
  <block id="0a339846bb9d45c2252cf84f27f8390e" category="paragraph">本节介绍如何使用 ONTAP NAS 存储创建 NFS 4.1 版数据存储库。</block>
  <block id="d5ffdd3b223c5bb3d1d66e5756977564" category="list-text">管理 vSphere 环境和 ONTAP 所需的基本技能</block>
  <block id="a65c730562f6a5feffebe8a600829c71" category="list-text">运行 ｛ ontap_version ｝ 的 ONTAP 存储系统（ FAS/AFF/CVO/ONTAP Select/Cloud Volume Service/Azure NetApp Files ）</block>
  <block id="8e7f2b8f8c015d7ce248683387c1daf5" category="list-text">vSphere 主机信息 ｛ vsphere_version ｝</block>
  <block id="7d0a7cdd836d94b19d4ecbce81ba2c1e" category="list-text">连接了 ONTAP 系统网络数据端口， vSphere 主机和</block>
  <block id="d4e890b3139e840bac898dc24d2330a3" category="list-text">适用于 VMware vSphere 的 ONTAP 工具已部署，配置并可随时使用</block>
  <block id="f2f6f93a63f235f63bf8a14ad398ddd0" category="inline-link">互操作性表工具（ IMT ）</block>
  <block id="2c364f266e330209041f2cf854afab91" category="list-text">使用检查兼容性<block ref="975c7893d48b02c6727b59b0582d74bc" category="inline-link-rx"></block></block>
  <block id="863feef43abaa752e441459bd37722c3" category="list-text">完成下面提供的 ONTAP 和 vSphere 任务。</block>
  <block id="1b2d2406823c016e35ebeddf0ec29c66" category="inline-link-macro">验证 NFS 的 ONTAP 许可证</block>
  <block id="7209cd833425a764d216b4e565ac65c6" category="list-text"><block ref="7209cd833425a764d216b4e565ac65c6" category="inline-link-macro-rx"></block></block>
  <block id="55d2948d4abb6ad9ea1e2b6a5b73460b" category="list-text">使用 `ssystem license show` 命令检查是否列出了 NFS 。</block>
  <block id="0a5e80a3066e5036387d5026a58fe582" category="inline-link-macro">按照 NFS 配置工作流进行操作</block>
  <block id="4b9e38c0f910614d9be47f85cf0f07bc" category="list-text"><block ref="4b9e38c0f910614d9be47f85cf0f07bc" category="inline-link-macro-rx"></block></block>
  <block id="4344c7f5d714fb1797033b7d9cca43fd" category="inline-link-macro">按照适用于 vSphere 的 NFS 客户端配置工作流进行操作。</block>
  <block id="c9fb47d82da1089992044972b4b65103" category="paragraph"><block ref="c9fb47d82da1089992044972b4b65103" category="inline-link-macro-rx"></block></block>
  <block id="a9b73ebef33c98ef5a1044177d2b49f3" category="summary">VMware vCenter Site Recovery Manager 是一款灾难恢复产品，可为集中式恢复计划提供自动化流程编排和无中断测试，从而简化所有虚拟化应用程序的灾难恢复管理。</block>
  <block id="06f589670c0d0455912cc8bb70b78701" category="paragraph">通过在 NetApp ONTAP 系统上部署 Site Recovery Manager ，您可以显著降低灾难恢复的成本和复杂性。凭借高性能，易于管理和可扩展的存储设备以及强大的软件产品， NetApp 可提供灵活的存储和数据管理解决方案来支持 vSphere 环境。</block>
  <block id="00549aec33ddcae6a708ed7368a7bcd0" category="paragraph">本指南中提供的最佳实践和建议并非 " 一刀切 " 的解决方案。本文档包含一系列最佳实践和建议，这些最佳实践和建议提供了规划，部署和管理 SRM 灾难恢复计划的准则。在 NetApp 存储上规划和部署 VMware vCenter Site Recovery 环境时，请咨询当地的 NetApp VMware 专家。NetApp VMware 专家可以快速确定任何 vSphere 环境的需求，并相应地调整存储解决方案。</block>
  <block id="a7ba4bd9aa10b0456b8f13ef40a2d1d5" category="summary">此页面提供了在 VMware vSphere 环境中部署 NetApp ONTAP 存储 FCoE VMFS 数据存储库的步骤。</block>
  <block id="1937a4bfde18bb02682d378132d0b6a9" category="doc">vSphere VMFS 数据存储库—采用 ONTAP 的以太网光纤通道存储协议</block>
  <block id="66439ac6171413528646918952bff23e" category="paragraph">本节介绍如何使用以太网光纤通道（ FCoE ）传输协议创建与 ONTAP 存储的 VMFS 数据存储库。</block>
  <block id="b087c7e1213b84e69de1a6e5214cd942" category="list-text">运行 ｛ ontap_version ｝ 的 ONTAP 存储系统（ FAS/AFF/CVO/ONTAP Select ）</block>
  <block id="d9da372e69584852a9808bfa9fcc99a9" category="inline-link-macro">支持的 FCoE 组合</block>
  <block id="b61947ecee08267d1f6930ccbd646d52" category="list-text"><block ref="b61947ecee08267d1f6930ccbd646d52" category="inline-link-macro-rx"></block></block>
  <block id="08b42ec45ef1147093b9161cc743b0a0" category="inline-link-macro">完成的配置工作表</block>
  <block id="bcf78e9148ebbc12ed4a54d2149cc2bc" category="list-text"><block ref="bcf78e9148ebbc12ed4a54d2149cc2bc" category="inline-link-macro-rx"></block></block>
  <block id="80ba2a0b5b5ae31742a18c682e724b6e" category="list-text">连接了 ONTAP FC 数据端口或 vSphere 主机</block>
  <block id="d7b3fbe677a7bffd7e387a3578d6b481" category="inline-link-macro">已配置 FC/FCoE 分区</block>
  <block id="434da439fcd2a7729ac67cef537d6651" category="list-text"><block ref="434da439fcd2a7729ac67cef537d6651" category="inline-link-macro-rx"></block></block>
  <block id="5d914ccaef7b5404838cb47cff27fa11" category="list-text">支持 FCoE</block>
  <block id="b74438cda33fca6618da9e30ef5fee5d" category="list-text">支持 DCB</block>
  <block id="69b788fe29f78e1fb439efd1bec08ab6" category="inline-link-macro">FCoE 的巨型帧</block>
  <block id="e92f4c11834e879e94fa441894d8e9c9" category="list-text"><block ref="e92f4c11834e879e94fa441894d8e9c9" category="inline-link-macro-rx"></block></block>
  <block id="42cdbee955a0e208306a321b74a948b1" category="section-title">配置 VMFS 数据存储库</block>
  <block id="f067d14dc86c5c0ec984803b3485a7a6" category="inline-link-macro">验证是否支持 FCoE 配置</block>
  <block id="79d164739c1e0aaf7f56e13c2a4c66ac" category="list-text"><block ref="4201ef99768aac8f72883e5cb6ec656f" category="inline-link-macro-rx"></block>。</block>
  <block id="1a04100ec801e5e2d1708d89eb1159b6" category="inline-link-macro">验证 FCP 的 ONTAP 许可证。</block>
  <block id="7fcd357d480b8eaa4a38cdbbddfd6c97" category="list-text"><block ref="7fcd357d480b8eaa4a38cdbbddfd6c97" category="inline-link-macro-rx"></block></block>
  <block id="f2a0a9000f5ff3910235e570c0ac5e44" category="list-text">使用 `ssystem license show` 命令验证是否已列出 FCP 。</block>
  <block id="e5b8ca3e9ff580bcc9315fabcb34312e" category="list-text">验证是否已在 SVM 上启用 FCP 协议。</block>
  <block id="015c565181667d59b83b7761e35682d1" category="inline-link-macro">使用 FCP 创建新的 SVM 。</block>
  <block id="de4606f963140e2d2d0a3df251ffd646" category="list-text"><block ref="de4606f963140e2d2d0a3df251ffd646" category="inline-link-macro-rx"></block></block>
  <block id="2d6fd01ea0767b50e214a74ff1fcfae0" category="list-text">验证 SVM 上的 FCP 逻辑接口是否可用。</block>
  <block id="46f04290f169589dff914e050d1a987b" category="list-text">使用图形用户界面创建 SVM 时，逻辑接口就是该过程的一部分。</block>
  <block id="ee7f4720a3fc60686c4a9f7429a60cbc" category="list-text">要重命名网络接口，请使用 `Network Interface modify` 。</block>
  <block id="6e67c7d604ae439f60ceb51480fdbb1c" category="inline-link-macro">创建并映射 LUN</block>
  <block id="e4eeb9421963195597743339d2f38ff6" category="list-text"><block ref="96e32c32f267ac1d65d603f36f017a41" category="inline-link-macro-rx"></block>；如果您使用适用于 VMware vSphere 的 ONTAP 工具，请跳过此步骤。</block>
  <block id="f6c0391a150cfd40a68682285c56e835" category="inline-link-macro">存储适配器信息</block>
  <block id="60f05805eb8189d665c19856d5388e3c" category="list-text">验证是否已安装 HBA 驱动程序。VMware 支持的 HBA 已开箱即用部署驱动程序，应在中显示这些驱动程序 <block ref="c5f1cce809af8cfecf09908d33f4c097" category="inline-link-macro-rx"></block>。</block>
  <block id="ce4df831657d2621e80bbef9271c33cd" category="summary">从传统虚拟设备过渡后， ONTAP 工具可提供大量新功能，更高的限制以及新的 VVOL 支持。</block>
  <block id="45b1565c472fff4046d0f7ddbe1342f2" category="doc">SRM 和 ONTAP 工具的新增功能</block>
  <block id="116d20fc387d73c8e4a86e7998913947" category="section-title">最新版本的 vSphere 和 Site Recovery Manager</block>
  <block id="aa73b07f008975ca9fcabf87bfafb167" category="paragraph">随着 SRM 8.3 及更高版本以及 ONTAP 工具 9.7.1 及更高版本的发布，您现在可以保护在 VMware vSphere 7 上运行的 VM 。</block>
  <block id="96ca6fcc2ffdab3c06d0875be8d4fe29" category="paragraph">近二十年来， NetApp 与 VMware 建立了深厚的合作关系，并努力尽快为最新版本提供支持。请始终查看 NetApp 互操作性表工具（ IMT ）以了解最新的合格软件组合。</block>
  <block id="63fe9875fcf8108a4dca29a0795d8674" category="paragraph">可以找到 NetApp IMT<block ref="dd81e3609a71c92c2a90d9165ca7bb00" category="inline-link-rx"></block>。</block>
  <block id="23a6222620917211381cf4455d9e0a83" category="section-title">VVOL 支持（以及 SPBM 为何如此重要，即使使用 SRM 也是如此）</block>
  <block id="a36269071ceeb480e636654c4620f7fb" category="paragraph">从 8.3 版开始， SRM 现在支持利用 VVOL 和基于阵列的复制进行基于存储策略的复制管理（ SPBM ）。为此， SRM 服务器进行了更新，加入了一项新的 SRM VVol 提供程序服务，该服务可与 vCenter 服务器的 SMS 服务通信以执行与 VASA 相关的任务。</block>
  <block id="4567f5576b4577c63b126cac3f6aa5fa" category="paragraph">此架构的一个优势是不再需要 SRA ，因为所有内容都使用 VASA 进行处理。</block>
  <block id="e04031e1cecdb6732f91d44b204dbcf3" category="paragraph">SPBM 是 vSphere 工具箱中的一款功能强大的工具，可提供简化，可预测且一致的存储服务，供私有云和混合云环境中的自动化框架使用。从根本上说， SPBM 允许您定义满足不同客户群需求的服务级别。现在，您可以通过 SRM 向客户展示复制功能，以处理需要强大的行业标准灾难恢复流程编排和自动化功能的关键工作负载。</block>
  <block id="6f1ad7cac2af0e3b92a3936efc393a0e" category="paragraph"><block ref="6f1ad7cac2af0e3b92a3936efc393a0e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="48e2854d95fac45929940abc72062193" category="section-title">VVOL 架构 2.3 支持基于设备的 SRM 服务器</block>
  <block id="925c477f139cce0692e13946a7f75eac" category="paragraph">除了基于 Windows 的传统平台之外，现在还支持基于 Photon OS 的 SRM 服务器。</block>
  <block id="62c2c4203aebe081ddbc6cdd489f8ad7" category="paragraph">现在，无论首选 SRM 服务器类型如何，您都可以安装 SRA 适配器。</block>
  <block id="7cb1700928c008eb817bc79250cc9002" category="section-title">支持 IPv6</block>
  <block id="ea9aacd1495949730de8eeab11e66459" category="paragraph">现在支持 IPv6 ，但有以下限制：</block>
  <block id="d6d7f3d43de975c07655ebba1936867a" category="list-text">vCenter 6.7 或更高版本</block>
  <block id="eb26ee1a20fe3dbde98204ec8b3ab838" category="list-text">SRM 8.2 （ 8.1 ， 8.3 和 8 ）不支持。支持 4 个）</block>
  <block id="918d32b75f0ab883abba3a8dc0c3ae8d" category="inline-link">互操作性表工具</block>
  <block id="02e7e71042609d3158020ab7befe45c6" category="list-text">检查<block ref="218f4ad7153f69cdc5467065434cd2f0" category="inline-link-rx"></block> 适用于最新的合格版本。</block>
  <block id="e887aed8f9c3dbecd37e8896d96b6637" category="section-title">提高了性能</block>
  <block id="3efd4ca8de094abf49f004186cd70fff" category="paragraph">运行性能是执行 SRM 任务的关键要求。为满足现代 RTO 和 RPO 的要求，采用 ONTAP 工具的 SRA 增加了两项新改进。</block>
  <block id="bd403c539a0c414afacd7477bf3d311f" category="list-text">* 支持并发重新保护操作。 * SRA 9.1.1 首次推出此功能，通过启用此功能，您可以同时对两个或多个恢复计划运行重新保护，从而缩短故障转移或迁移后重新保护数据存储库所需的时间，并使其保持在 RTO 和 RPO 参数范围内。</block>
  <block id="f63b947f655a5aee2cf69d4f30d7f96b" category="list-text">ONTAP 工具 9.8 新增了一种仅限 NAS 的新优化模式。 * 如果使用 SVM 范围的帐户并连接到仅包含基于 NFS 的数据存储库的 ONTAP 集群，则可以在支持的环境中启用仅 NAS 优化模式以实现峰值性能。</block>
  <block id="4a4842d7448ef71eb69b013e560b18bb" category="section-title">扩展性更强</block>
  <block id="26738e8d40ae8035805f13bdbf185c30" category="paragraph">现在，在与 SRM 8.3 及更高版本结合使用时， ONTAP 工具 SRA 最多可支持 500 个保护组（ PG ）。</block>
  <block id="b56265ceb6311e42003e668438136a59" category="section-title">同步复制</block>
  <block id="96cb4d41ca97bd9d3d446984d3170a57" category="paragraph">期待已久的一项新功能是采用 ONTAP 9.5 及更高版本的 SnapMirror 同步（ SM-S ），该功能可为任务关键型应用程序提供卷粒度零 RPO 数据复制解决方案。SM-S 需要使用 ONTAP 工具 9.8 或更高版本。</block>
  <block id="b9832b10a87d0c3793ed3b413ee1d839" category="section-title">REST API 支持</block>
  <block id="0065ce57adc813187a8e9c640ba6223a" category="paragraph">现在， SRA 服务器配置可通过 REST API 进行管理。Swagger UI 可帮助您构建自动化工作流，您可以在 ONTAP 工具设备上找到，网址为 `https://&lt;appliance&gt;:8143/api/rest/swagger-ui.html#/` 。</block>
  <block id="160f88ca0bed5b24e94c809f4e22f1e7" category="summary">在 ONTAP 9 中，集群管理员可以看到集群的物理组件，但使用集群的应用程序和主机无法直接看到这些物理组件。</block>
  <block id="89fafdb11a7e8cd8abebb1d4df053dad" category="doc">复制拓扑</block>
  <block id="be01acd2f018d38f9446f06b99ee4a2a" category="paragraph">在 ONTAP 9 中，集群管理员可以看到集群的物理组件，但使用集群的应用程序和主机无法直接看到这些物理组件。物理组件提供了一个共享资源池，用于构建逻辑集群资源。应用程序和主机仅通过包含卷和 LIF 的 SVM 访问数据。</block>
  <block id="7758fc02779ee5917b0a09ee22b52221" category="paragraph">在 VMware vCenter Site Recovery Manager 中，每个 NetApp SVM 都被视为一个阵列。SRM 支持某些阵列到阵列（或 SVM 到 SVM ）复制布局。</block>
  <block id="58c0b55a67f4331cc49b073a7183e06c" category="paragraph">一个虚拟机不能在多个 SRM 阵列上拥有虚拟机磁盘（ Virtual Machine Disk ， VMDK ）或 RDM 数据，原因如下：</block>
  <block id="880aeda0b58c0b30120b6319ae5f3beb" category="list-text">SRM 只能识别 SVM ，而不能识别单个物理控制器。</block>
  <block id="6f55124e085dbeb640e4cb8ad2c97905" category="list-text">SVM 可以控制跨越集群中多个节点的 LUN 和卷。</block>
  <block id="39d9903201320a83d45d3b36d512f051" category="cell">最佳实践</block>
  <block id="d86019fe4ba86b184ac71cf24a22f0c6" category="cell">要确定可支持性，请牢记以下规则：要使用 SRM 和 NetApp SRA 保护 VM ， VM 的所有部分都必须仅位于一个 SVM 上。此规则适用于受保护站点和恢复站点。</block>
  <block id="2e4472d35f80aa8b7eca52ae3dd43dc6" category="section-title">支持的 SnapMirror 布局</block>
  <block id="d070ad9d8397892aa7f317cbb9046661" category="paragraph">下图显示了 SRM 和 SRA 支持的 SnapMirror 关系布局方案。复制卷中的每个 VM 在每个站点上仅拥有一个 SRM 阵列（ SVM ）上的数据。</block>
  <block id="39d3085abe6ccb914d8535de8a5f3e37" category="paragraph"><block ref="39d3085abe6ccb914d8535de8a5f3e37" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1ae7670cf947a397bdf6a882fbcc912a" category="paragraph"><block ref="1ae7670cf947a397bdf6a882fbcc912a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="111d3212464dba203cbd675a0338dcbc" category="paragraph"><block ref="111d3212464dba203cbd675a0338dcbc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c5dc3a606b05b41db22793ed3c1a72db" category="paragraph"><block ref="c5dc3a606b05b41db22793ed3c1a72db" category="inline-image-macro-rx" type="image"></block></block>
  <block id="86cf5bd2bdb1b1d67f8f907f41099509" category="section-title">支持的阵列管理器布局</block>
  <block id="aacc8f18d659f75715d91a983e872233" category="paragraph">在 SRM 中使用基于阵列的复制（ ABR ）时，保护组会隔离到一个阵列对中，如以下屏幕截图所示。在这种情况下，恢复站点上的 `SVM1` 和 `SVM2` 与 `SVM3` 和 `SVM4` 建立对等关系。但是，在创建保护组时，您只能选择两个阵列对中的一个。</block>
  <block id="68a1b289711a591ed50627014cd01ce9" category="paragraph"><block ref="68a1b289711a591ed50627014cd01ce9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1ceb46f3e1c6c7995de4ec5f05601227" category="section-title">不支持的布局</block>
  <block id="611b9b35ac984f20e6594baec9181dbf" category="paragraph">不受支持的配置会在单个虚拟机所拥有的多个 SVM 上包含数据（ VMDK 或 RDM ）。在下图所示的示例中，无法为 `VM1` 配置 SRM 保护，因为 `VM1` 的数据位于两个 SVM 上。</block>
  <block id="5c251a65e8394fbeaf104ba1a1cad2e1" category="paragraph"><block ref="5c251a65e8394fbeaf104ba1a1cad2e1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f5f5fe64e0e9d0ae7ce2a0777d0ccf62" category="paragraph"><block ref="f5f5fe64e0e9d0ae7ce2a0777d0ccf62" category="inline-image-macro-rx" type="image"></block></block>
  <block id="69851ac8c2fa81b32799efc8522798d5" category="paragraph">如果任何复制关系将单个 NetApp 卷从一个源 SVM 复制到同一 SVM 或不同 SVM 中的多个目标，则称为 SnapMirror 扇出。SRM 不支持扇出。在下图所示的示例中，无法在 SRM 中配置 `VM1` 以进行保护，因为它通过 SnapMirror 复制到两个不同的位置。</block>
  <block id="688890bdbdfd2d73a05a09883f3c4b40" category="paragraph"><block ref="688890bdbdfd2d73a05a09883f3c4b40" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3f88384b0d5cdcdc25895c644126c1b0" category="section-title">SnapMirror 级联</block>
  <block id="7ebde774ad43c45667d5544308a6d688" category="paragraph">SRM 不支持 SnapMirror 关系的级联，即，将源卷复制到目标卷，同时使用 SnapMirror 将目标卷复制到另一个目标卷。在下图所示的情形中，不能使用 SRM 在任何站点之间进行故障转移。</block>
  <block id="2990fc44e9ba827a397e96e1c278a02a" category="paragraph"><block ref="2990fc44e9ba827a397e96e1c278a02a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8bd15e818d377a0a5cf6ebc429555f79" category="section-title">SnapMirror 和 SnapVault</block>
  <block id="d440734d1f5d9c6e59aa97f7cbbcd525" category="paragraph">NetApp SnapVault 软件支持在 NetApp 存储系统之间对企业数据进行基于磁盘的备份。SnapVault 和 SnapMirror 可以同时位于同一环境中；但是， SRM 仅支持 SnapMirror 关系的故障转移。</block>
  <block id="7878dfbf4b6ad3bc60d095cf89d79202" category="admonition">NetApp SRA 支持 `mirror-vault` 策略类型。</block>
  <block id="883e69a285ae2d5fd23c80cd29285804" category="paragraph">SnapVault 是为 ONTAP 8.2 从头开始重建的。虽然以前的 Data ONTAP 7- 模式用户应该发现相似之处，但此版本的 SnapVault 已进行了重大改进。其中一项重大进步是，能够在 SnapVault 传输期间保持主数据的存储效率。</block>
  <block id="9bc21373e0e299579a7ac86dcd4f513d" category="paragraph">一个重要的架构变化是， ONTAP 9 中的 SnapVault 在卷级别进行复制，而不是像 7- 模式 SnapVault 那样在 qtree 级别进行复制。此设置意味着 SnapVault 关系的源必须为卷，并且该卷必须复制到 SnapVault 二级系统上其自身的卷。</block>
  <block id="f7b20cbc14027c7711d53d03a84f31af" category="paragraph">在使用 SnapVault 的环境中，将在主存储系统上创建专门命名的 Snapshot 副本。根据所实施的配置，可以通过 SnapVault 计划或 NetApp Active IQ Unified Manager 等应用程序在主系统上创建命名的 Snapshot 副本。然后，在主系统上创建的命名 Snapshot 副本会复制到 SnapMirror 目标，并从该位置存储到 SnapVault 目标。</block>
  <block id="5dd37b7cd36f7d38ba2e6a63c603be4c" category="paragraph">可以在级联配置中创建源卷，在级联配置中，卷会复制到灾难恢复站点中的 SnapMirror 目标，然后从该位置存储到 SnapVault 目标。也可以在扇出关系中创建源卷，其中一个目标是 SnapMirror 目标，另一个目标是 SnapVault 目标。但是，在发生 SRM 故障转移或复制反转时， SRA 不会自动重新配置 SnapVault 关系以使用 SnapMirror 目标卷作为存储源。</block>
  <block id="5bc66b9c84b3f7cc0b375e729376b68d" category="inline-link">TR-4015 《适用于 ONTAP 9 的 SnapMirror 配置最佳实践指南》。</block>
  <block id="0d510e96259254d285c6aaeb8458f45d" category="paragraph">有关适用于 ONTAP 9 的 SnapMirror 和 SnapVault 的最新信息，请参见<block ref="32e7c991f675bf983c547a2a174c2caf" category="inline-link-rx"></block></block>
  <block id="75f8a2d99eea9f336120aec69d8c1010" category="cell">如果在同一环境中使用 SnapVault 和 SRM ， NetApp 建议使用 SnapMirror 到 SnapVault 级联配置，其中通常会从灾难恢复站点的 SnapMirror 目标执行 SnapVault 备份。发生灾难时，此配置会使主站点无法访问。通过将 SnapVault 目标保留在恢复站点上，可以在故障转移后重新配置 SnapVault 备份，以便在恢复站点上运行时可以继续执行 SnapVault 备份。</block>
  <block id="e082a67e3ddd7f4f92096536440cbb34" category="paragraph">在 VMware 环境中，每个数据存储库都有一个通用唯一标识符（ UUID ），每个 VM 都有一个唯一的受管对象 ID （ MOID ）。在故障转移或故障恢复期间， SRM 不会维护这些 ID 。由于 SRM 在故障转移期间不会维护数据存储库 UUID 和 VM MOID ，因此，在 SRM 故障转移后，必须重新配置依赖这些 ID 的所有应用程序。例如， NetApp Active IQ Unified Manager 可将 SnapVault 复制与 vSphere 环境进行协调。</block>
  <block id="657a41cce55646ab17754ac1427970af" category="paragraph">下图显示了 SnapMirror 到 SnapVault 的级联配置。如果 SnapVault 目标位于灾难恢复站点或不受主站点中断影响的三级站点上，则可以重新配置环境，以便在故障转移后继续备份。</block>
  <block id="b56afb9a43332c671116b9fa3d597867" category="paragraph"><block ref="b56afb9a43332c671116b9fa3d597867" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e068178460f103498576eac8ddb7fb82" category="paragraph">下图显示了使用 SRM 将 SnapMirror 复制反转回主站点后的配置。此外，还对环境进行了重新配置，使 SnapVault 备份从现在的 SnapMirror 源进行。此设置为 SnapMirror SnapVault 扇出配置。</block>
  <block id="0ffa07ffd89b136d0ed8f2ac5ebcabb8" category="paragraph"><block ref="0ffa07ffd89b136d0ed8f2ac5ebcabb8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b4607a4ee7e1830ab6ba0007df206956" category="paragraph">在 SRM 执行故障恢复并再次反转 SnapMirror 关系后，生产数据将返回到主站点。现在，此数据将通过 SnapMirror 和 SnapVault 备份获得与故障转移到灾难恢复站点之前相同的保护方式。</block>
  <block id="63fd1f18d5d53fa97fd05a7fd96090b4" category="section-title">在 Site Recovery Manager 环境中使用 qtree</block>
  <block id="2d88570ceb2de0d8699a068b0140454b" category="paragraph">qtree 是一种特殊目录，可用于为 NAS 应用文件系统配额。ONTAP 9 允许创建 qtree ，而 qtree 可以存在于使用 SnapMirror 复制的卷中。但是， SnapMirror 不允许复制单个 qtree 或 qtree 级复制。所有 SnapMirror 复制仅在卷级别进行。因此， NetApp 不建议在 SRM 中使用 qtree 。</block>
  <block id="345cb3f040f9f7f3f1a4261ed260aa79" category="section-title">FC 和 iSCSI 混合环境</block>
  <block id="a60b166c2b69b4fdfbb733dc2193668a" category="paragraph">借助支持的 SAN 协议（ FC ， FCoE 和 iSCSI ）， ONTAP 9 可提供 LUN 服务，即创建 LUN 并将其映射到连接的主机。由于集群由多个控制器组成，因此，多路径 I/O 可管理多个逻辑路径，并将其连接到任何单个 LUN 。主机上使用非对称逻辑单元访问（ ALUA ），以便选择 LUN 的优化路径并使其处于活动状态以进行数据传输。如果指向任何 LUN 的优化路径发生变化（例如，由于移动了包含 LUN 的卷）， ONTAP 9 会自动识别此更改并无中断地进行调整。如果优化路径不可用， ONTAP 可以无中断地切换到任何其他可用路径。</block>
  <block id="b9921ac732e72656bc2836f83bb09522" category="paragraph">VMware SRM 和 NetApp SRA 支持在一个站点使用 FC 协议，而在另一个站点使用 iSCSI 协议。但是，不支持在同一 ESXi 主机或同一集群中的不同主机中混合使用 FC 连接的数据存储库和 iSCSI 连接的数据存储库。SRM 不支持此配置，因为在 SRM 故障转移或测试故障转移期间， SRM 会在请求中包括 ESXi 主机中的所有 FC 和 iSCSI 启动程序。</block>
  <block id="fccd44a96243e459128798803dca70aa" category="cell">SRM 和 SRA 支持在受保护站点和恢复站点之间混合使用 FC 和 iSCSI 协议。但是，每个站点只能配置一个 FC 或 iSCSI 协议，而不能在同一站点上同时配置这两个协议。如果要求在同一站点同时配置 FC 和 iSCSI 协议， NetApp 建议某些主机使用 iSCSI ，而其他主机使用 FC 。在这种情况下， NetApp 还建议设置 SRM 资源映射，以便将 VM 配置为故障转移到一组主机或另一组主机。</block>
  <block id="d4f43ea12f3f521c93fb3dd4d93c428d" category="summary">此页面介绍了在 VMware vSphere 环境中为 VMFS 数据存储库部署 NetApp ONTAP NVMe/FC 存储的步骤。</block>
  <block id="9e433440cdaf3b61716784200e8abf6d" category="doc">vSphere VMFS 数据存储库—采用 ONTAP 的 NVMe/FC</block>
  <block id="9367f3df6c8d54eba1da3cd9c5fa2776" category="paragraph">本节介绍如何使用 NVMe/FC 使用 ONTAP 存储创建 VMFS 数据存储库。</block>
  <block id="6af0e7a38739ed6e2658342101a7b51e" category="list-text">管理 vSphere 环境和 ONTAP 所需的基本技能。</block>
  <block id="7890464cdce93f078097395e27132775" category="inline-link-macro">基本了解 NVMe/FC</block>
  <block id="c6e7cd589502f52a9398e779ede56d14" category="list-text"><block ref="62a43aa3bd2eb01e27a6091d3017311c" category="inline-link-macro-rx"></block>。</block>
  <block id="5422bc00db54a341b2c538f4cea614c0" category="list-text">运行 ｛ ontap_version ｝ 的 ONTAP 存储系统（ FAS/AFF/CVO/ONTAP Select/ASA ）</block>
  <block id="2ec64af43682ffa45eeaf33a86950347" category="list-text">主机，目标和 SVM 以及 LUN 信息的 ONTAP WWPN</block>
  <block id="62eadfe081f86e1f9a72988a4feb7bfc" category="inline-link-macro">填写完整的 FC 配置工作表</block>
  <block id="f186921a73873df63dc496b515bc2099" category="list-text"><block ref="f186921a73873df63dc496b515bc2099" category="inline-link-macro-rx"></block></block>
  <block id="c4436d4a190778b7ec1e9461f6454bdd" category="list-text">vCenter Server</block>
  <block id="5fd6c6da49bc906cc217c5aff2041a52" category="list-text">vSphere 主机信息（ ｛ vsphere_version ｝ ）</block>
  <block id="60ce38e4967c52c316eff771b7a3c4ec" category="list-text">连接了 ONTAP FC 数据端口和 vSphere 主机。</block>
  <block id="32086766e64ae646fcadddc3e16b203b" category="list-text">启用 N_port ID 虚拟化（ NPIV ）功能。</block>
  <block id="b6e0bd021536c90aa87cfea18d73d453" category="list-text">创建一个启动程序目标分区。</block>
  <block id="f386e9f209710f55d41a97e9502d1c7c" category="list-text">对于每个分区，包括一个目标，该目标是 SVM 的 ONTAP FC 逻辑接口（ WWPN ）。每个 SVM 的每个节点至少应有两个逻辑接口。请勿使用物理端口的 WWPN 。</block>
  <block id="71d4977f0fd6be92644e1ff9f8096637" category="section-title">配置 VMFS 数据存储库</block>
  <block id="f42c50210dcc0a3a69c8258256e75e4b" category="inline-link-macro">验证是否支持 NVMe/FC 配置。</block>
  <block id="5312bcc81ee6d7bce6549b2089c9d1ac" category="list-text"><block ref="5312bcc81ee6d7bce6549b2089c9d1ac" category="inline-link-macro-rx"></block></block>
  <block id="9d17f91ad987b7e7cf2fa7249cd97343" category="list-text"><block ref="7fcd357d480b8eaa4a38cdbbddfd6c97" category="inline-link-macro-rx"></block>使用 `ssystem license show` 命令检查是否列出了 NVMe_oF 。使用 `license add -license-code &lt; 许可证代码 &gt;` 添加许可证。</block>
  <block id="7193bed15c5b4f7c80f1f19630b57e1e" category="list-text">验证是否已在 SVM 上启用 NVMe 协议。</block>
  <block id="5eabd2d7390fc49cb61f882324bdcac0" category="inline-link-macro">为 NVMe 配置 SVM 。</block>
  <block id="3838b8ad26ea53cc8ddea76f2a58b20a" category="list-text"><block ref="3838b8ad26ea53cc8ddea76f2a58b20a" category="inline-link-macro-rx"></block></block>
  <block id="f2fd2de931ce484e947c89ae8207346a" category="list-text">验证 NVMe/FC 逻辑接口在 SVM 上是否可用。</block>
  <block id="978583cfbb47e2700c599c43b7949a53" category="list-text">使用图形用户界面创建 SVM 时，逻辑接口将作为该过程的一部分。</block>
  <block id="3866119a70b69102c1584c0baa386190" category="list-text">要重命名网络接口，请使用命令 `Network Interface modify` 。</block>
  <block id="6ad7e9002145710745843d16314895e3" category="inline-link-macro">创建 NVMe 命名空间和子系统</block>
  <block id="06badf30aa173febc3374aceef25c5ce" category="list-text"><block ref="06badf30aa173febc3374aceef25c5ce" category="inline-link-macro-rx"></block></block>
  <block id="c6613394adcc7526a48f6e92b61ee067" category="list-text">验证是否已安装 HBA 驱动程序。VMware 支持的 HBA 已开箱即用部署驱动程序，应可从查看这些驱动程序 <block ref="57f7eb139c8bc258309d8e16d3df13fe" category="inline-link-macro-rx"></block></block>
  <block id="9761a89a99469e468e71b7a0087be29d" category="inline-link-macro">执行 vSphere 主机 NVMe 驱动程序安装和验证任务</block>
  <block id="926e4d89379d3dde2510965ca53771af" category="list-text"><block ref="926e4d89379d3dde2510965ca53771af" category="inline-link-macro-rx"></block></block>
  <block id="e229fd9b7b8948ddebf276bda8a9145e" category="inline-link-macro">创建 VMFS 数据存储库</block>
  <block id="3dbbea9263919f89335d7ba053f09a39" category="list-text"><block ref="3dbbea9263919f89335d7ba053f09a39" category="inline-link-macro-rx"></block></block>
  <block id="19610155b973358e47466063b4b079a4" category="summary">ONTAP 支持用于虚拟化的所有主要存储协议，例如 iSCSI ，光纤通道（ FC ），以太网光纤通道（ FCoE ）或适用于 SAN 环境的非易失性光纤通道快速内存（ NVMe/FC ），以及 NFS （ v3 和 v4.1 ）和 SMB 或 S3 （用于子系统连接）。客户可以自由选择最适合其环境的协议，并可以根据需要在一个系统上组合协议。</block>
  <block id="93b698fac9d8f378474fb0765494c4e6" category="doc">适用于 vSphere 的 ONTAP 功能</block>
  <block id="9985b4390c40137573e6da05caf85874" category="section-title">协议</block>
  <block id="561327c79c453379a7f11cb38aabf666" category="paragraph">ONTAP 支持用于虚拟化的所有主要存储协议，例如 iSCSI ，光纤通道（ FC ），以太网光纤通道（ FCoE ）或适用于 SAN 环境的非易失性光纤通道快速内存（ NVMe/FC ），以及 NFS （ v3 和 v4.1 ）和 SMB 或 S3 （用于子系统连接）。客户可以自由选择最适合其环境的协议，并可以根据需要在一个系统上组合使用协议（例如，使用几个 iSCSI LUN 或子系统共享来扩大 NFS 数据存储库的常规使用）。</block>
  <block id="99dd82c3472eab7ec4ea64a848fe032d" category="paragraph">许多 ONTAP 功能可用于管理虚拟化工作负载。下一节将介绍一些需要附加产品许可证的软件。之后将介绍其他打包为独立工具的工具，其中一些用于 ONTAP ，另一些用于整个 NetApp 产品组合。</block>
  <block id="671534601eb09388581f095632f815b2" category="paragraph">下面是有关基本 ONTAP 功能的更多详细信息：</block>
  <block id="ef97088865d8960cc5a3a20f3c10f469" category="list-text">* NetApp Snapshot 副本。 * 创建或使用 Snapshot 副本时， ONTAP 可为 VM 或数据存储库提供即时 Snapshot 副本，而不会影响性能。它们可用于在修补之前为 VM 创建还原点，或者用于简单的数据保护。请注意，这些快照与 VMware （一致性）快照不同。创建 ONTAP Snapshot 副本的最简单方法是使用适用于 VMware vSphere 的 SnapCenter 插件备份 VM 和数据存储库。</block>
  <block id="dbef3659822e80f91a3a561ed6d0b0cd" category="list-text">* 存储效率。 * ONTAP 支持实时和后台重复数据删除和数据压缩，零块重复数据删除和数据缩减。</block>
  <block id="287c4830bc87771bdf2b3ae9880ab67e" category="list-text">* 卷和 LUN 移动。 * 允许在 ONTAP 集群中无中断移动支持 vSphere 数据存储库和 VVol 的卷和 LUN ，以平衡性能和容量，或支持无中断维护和升级。</block>
  <block id="ba96d4d48c1ff15e2732b37e2e7a435c" category="list-text">通过 * QoS 。 * QoS ，可以管理单个 LUN ，卷或文件的性能。此功能可用于限制未知或抢占资源的 VM ，或者确保重要的 VM 获得足够的性能资源。</block>
  <block id="a946b6511f13dc2fbdaf1581d804d5b4" category="list-text">* NetApp 卷加密， NetApp 聚合加密。 * NetApp 加密选项提供基于软件的简单加密，可保护空闲数据。</block>
  <block id="28f638810590337576cbbe9979329c21" category="list-text">* FabricPool 。 * 此功能可在块级别自动将较冷的数据分层到单独的对象存储中，从而腾出昂贵的闪存存储。</block>
  <block id="ff8a0108cd7cd5019bfee6b6be672b17" category="inline-link">ONTAP REST API</block>
  <block id="9455a10ec937dafee664ae1e0e4fd98c" category="inline-link">Ansible 模块</block>
  <block id="4fe65be709b755cfdf83cf3ff5534e52" category="list-text">* REST ， Ansible 。 * 使用<block ref="71191ff17e34498b2463e6167736896a" category="inline-link-rx"></block> 自动执行存储和数据管理，以及<block ref="d4fc0de110866702e0b8608590b39b64" category="inline-link-rx"></block> 用于 ONTAP 系统的配置管理。请注意，某些 ONTAP 功能不适合 vSphere 工作负载。例如， ONTAP 9.8 之前的 FlexGroup 不支持完全克隆，也未在 vSphere 中进行测试（请参见 FlexGroup 一节，了解有关将其与 vSphere 结合使用的最新信息）。FlexCache 也不是 vSphere 的最佳选择，因为它专为大多数读取工作负载而设计。如果缓存与原始数据存储库断开连接，则写入可能会出现问题，从而导致两端出现 NFS 数据存储库错误。</block>
  <block id="85402a535d923d0511a02d404893d1ba" category="section-title">ONTAP 许可</block>
  <block id="4a9fdcb14826a67d38a7b84170c54ea9" category="paragraph">对于管理虚拟化工作负载而言，某些 ONTAP 功能非常重要，因此需要额外的许可证，无论是以免费方式提供，还是以许可证包形式提供，还是按单点提供。对于许多客户来说，最经济高效的方法是使用许可证包。以下是与 vSphere 相关的关键许可证及其使用方式：</block>
  <block id="c598be4d4f9f8c476e7f51d6ef5ff139" category="list-text">* FlexClone 。 * FlexClone 支持对 ONTAP 卷和文件进行节省空间的即时克隆。如果 VMware vSphere 存储 API —阵列集成（ VAAI ）将操作卸载到存储系统，用于备份验证和恢复（ SnapCenter 软件）以及 VVOL 克隆和 Snapshot 副本，则会使用此克隆。以下是如何使用它们：</block>
  <block id="25d6e9f6ac28ecf0d97aaf9f6609f4d4" category="list-text">ONTAP 支持使用 VAAI 卸载副本，以支持 vSphere 克隆和迁移（ Storage vMotion ）操作。FlexClone 许可证允许在 NetApp FlexVol 卷中快速克隆，但如果未获得许可，它仍允许使用较慢的块副本进行克隆。</block>
  <block id="6f9f0acae1b8d33078f1c061dcc662a3" category="list-text">VVOL 功能需要 FlexClone 许可证。它支持在单个数据存储库中或数据存储库之间克隆 VVOL ，并支持 vSphere 管理的 VVOL Snapshot 副本，这些副本会卸载到存储系统中。</block>
  <block id="4370ed35c8063100f2a5b8da39b82668" category="list-text">存储复制适配器（ SRA ）与 VMware Site Recovery Manager 结合使用，要在 NAS 和 SAN 环境中测试恢复，需要 FlexClone 许可证。在没有 FlexClone 的情况下，可以使用 SRA 执行发现，恢复和重新保护工作流。</block>
  <block id="3117cf0d132cfe6180ee3db3d5250f7f" category="list-text">* SnapRestore 。 * SnapRestore 技术支持即时恢复卷，而无需复制数据。NetApp 备份和恢复工具（例如 SnapCenter ）需要使用该工具挂载数据存储库以执行验证和还原操作。</block>
  <block id="a30ea87a20e5dd5b267ec41f29219a1d" category="list-text">* SnapMirror 。 * SnapMirror 技术支持在内部和云中的 ONTAP 系统之间轻松快速地复制数据。SnapMirror 支持逻辑复制的版本灵活性以及块复制的性能，只会将更改后的数据发送到二级系统。可以使用镜像和 / 或存储策略保护数据，从而实现灾难恢复以及长期保留数据以进行备份。SnapMirror 支持异步和同步关系， ONTAP 9.8 引入了具有 SnapMirror 业务连续性的透明应用程序故障转移功能。</block>
  <block id="23862d7fc14d71369b9feaeb8d7f98b9" category="paragraph">使用 Site Recovery Manager 进行 SRA 复制需要 SnapMirror 。此外， SnapCenter 还需要将 Snapshot 副本复制到二级存储系统。</block>
  <block id="0fdef6775eeade832499deceb497e1d8" category="list-text">* SnapCenter 。 * SnapCenter 软件可提供一个统一的可扩展平台和插件套件，用于实现应用程序一致的数据保护和克隆管理。AFF 许可证随 FAS 和 SnapCenter 系统的数据保护许可证包一起提供。如果您使用的是以下存储系统： FAS ， AFF ， Cloud Volumes ONTAP 或 ONTAP Select ，则适用于 VMware vSphere 的 SnapCenter 插件是一款免费产品。但是，需要 SnapRestore 和 FlexClone 许可证。</block>
  <block id="a20c69bb9262b2ab09ca5248996e7d63" category="list-text">* MetroCluster 。 * NetApp MetroCluster 是一种同步复制解决方案，可将园区或城域的高可用性和灾难恢复相结合，以防止发生站点灾难和硬件中断。它提供的解决方案可以从故障中透明地恢复，实现零数据丢失（ 0 RPO ）和快速恢复（几分钟内即可完成 RTO ）。它在 vSphere 环境中用作 vSphere Metro Storage Cluster 配置的一部分。</block>
  <block id="ee8cc65cae83009c275cd4748f4c58ae" category="section-title">适用于 ONTAP 的虚拟化工具</block>
  <block id="7b0abbba24b3ff594f013e524b352ef1" category="paragraph">NetApp 提供了多种独立软件工具，可与 ONTAP 和 vSphere 结合使用来管理虚拟化环境。ONTAP 许可证附带了以下工具，无需额外付费。有关这些工具在 vSphere 环境中如何协同工作的说明，请参见图 1 。</block>
  <block id="abdbcbccf079982daa8ac87124199525" category="paragraph">适用于 VMware vSphere 的 ONTAP 工具是一组用于将 ONTAP 存储与 vSphere 结合使用的工具。无论您使用的是 SAN 还是 NAS ， vCenter 插件（以前称为 Virtual Storage Console （ VSC ））均可简化存储管理和效率功能，提高可用性并降低存储成本和运营开销。它使用最佳实践配置数据存储库，并为 NFS 和块存储环境优化 ESXi 主机设置。为了获得所有这些优势， NetApp 建议在将 vSphere 与运行 ONTAP 软件的系统结合使用时，最佳做法是使用这些 ONTAP 工具。它包括 vCenter 的服务器设备和用户界面扩展。</block>
  <block id="72c2a2003ef348468d72454dc1a4e214" category="paragraph">适用于 VMware 的 NetApp NFS 插件是 ESXi 主机的一个插件，可用于在 ONTAP 上对 NFS 数据存储库使用 VAAI 功能。它支持克隆操作的副本卸载，厚虚拟磁盘文件的空间预留以及 Snapshot 副本卸载。将副本操作卸载到存储不一定会更快完成，但它确实会卸载 CPU 周期，缓冲区和队列等主机资源。您可以使用适用于 VMware vSphere 的 ONTAP 工具在 ESXi 主机上安装此插件。</block>
  <block id="e3454e6928ae7a5f9e8a89f5999b80ad" category="section-title">适用于 ONTAP 的 VASA Provider</block>
  <block id="708dacf32313dbab741753dcc3ea39fd" category="paragraph">适用于 ONTAP 的 VASA Provider 支持 VMware vStorage APIs for Storage Awareness （ VASA ）框架。它作为适用于 VMware vSphere 的 ONTAP 工具的一部分提供，作为一个虚拟设备，易于部署。VASA Provider 可将 vCenter Server 与 ONTAP 连接起来，以帮助配置和监控 VM 存储。它支持 VMware 虚拟卷（ VVOL ）支持，管理存储功能配置文件和单个 VM VVOL 性能，并提供警报以监控容量和配置文件合规性。</block>
  <block id="0d05ff779ab06152e20062d098f7eb4a" category="section-title">Storage Replication Adapter</block>
  <block id="33aa22e838a3c843929f5b6b75f6c56c" category="paragraph">SRA 与 VMware Site Recovery Manager （ SRM ）结合使用，用于管理生产站点和灾难恢复站点之间的数据复制，并无中断地测试灾难恢复副本。它有助于自动执行发现，恢复和重新保护任务。它包括适用于 Windows SRM 服务器和 SRM 设备的 SRA 服务器设备和 SRA 适配器。SRA 作为适用于 VMware vSphere 的 ONTAP 工具的一部分提供。</block>
  <block id="a1c13ec555198266776a3a7b904810dd" category="paragraph">下图显示了适用于 vSphere 的 ONTAP 工具。</block>
  <block id="f7e876d450acee7c9ed7b18438440fb2" category="paragraph"><block ref="f7e876d450acee7c9ed7b18438440fb2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d9a06854085afcd104157eb7f0b66c3a" category="summary">NetApp 解决方案自动化利用 RedHat Ansible 进行配置和管理。</block>
  <block id="a123daaac5749e4d0965aca160f0adfd" category="doc">NetApp 解决方案自动化</block>
  <block id="8c4271e6faf2cea4cfc8e5b7108d8ee9" category="section-title">操作步骤</block>
  <block id="d1029167179320d8b6d70b11c3d01bd3" category="list-text">Ansible 控制节点的要求，：</block>
  <block id="9ced761647f5d80fe615526ffff63937" category="list-text">安装了以下软件包的 Ubuntu 或 Debian 计算机：</block>
  <block id="ca60b3698dd3d27a5f91e4dc0a1a2546" category="list-text">Python3.</block>
  <block id="4ce3ea126bb844d4f8c4ce1a65cbe3ae" category="list-text">Pip3.</block>
  <block id="881cbd1ce3fdb52f73a82f8674a2a364" category="list-text">Ansible （版本高于 2.10.0 ）</block>
  <block id="0bcc70105ad279503e31fe7b3f47b665" category="list-text">Git</block>
  <block id="6e3d8a0ff7934b777031953fe936bac8" category="paragraph">如果您的新 Ubuntu 或 Debian 计算机未安装上述要求，请按照以下步骤将该计算机设置为 Ansible 控制节点：</block>
  <block id="532d3723890df934cc5c2c39477405a2" category="list-text">创建 .sh 文件</block>
  <block id="e95a2c08843a70246648b7107a26cec4" category="list-text">将以下内容粘贴到文件中</block>
  <block id="86c8310d98a974adb7ac7c4025dd8b5c" category="list-text">使文件可执行</block>
  <block id="22db3e24628482683b9bf06c38e497ee" category="list-text">以 root 用户身份运行脚本</block>
  <block id="d82dd9b3245382b365106db0568113e8" category="summary">借助 NetApp 解决方案自动化，客户可以自动部署，配置和执行许多常见的基础架构和应用程序任务。</block>
  <block id="3a4a7ee7a634fc42372d6601867f823b" category="paragraph">要通过命令行界面使用 Ansible 攻略手册配置 Mellanox 交换机，请遵循以下操作步骤：</block>
  <block id="79a78778ec74f6df31c269176e191684" category="list-text">下载 Mellanox Onyx Ansible 资料集</block>
  <block id="0683792c4baa09a201f802cc69019f56" category="list-text">下载配置 Mellanox 交换机所需的 Ansible 内容</block>
  <block id="f66ab36e28c2c6596efcfb05cd259e98" category="list-text">将目录更改为所需的解决方案</block>
  <block id="90836ed3d621851397e3c2c972da4408" category="list-text">根据提供的建议 / 建议填充以下变量。根据要求填充所有变量后，单击顶部的 " 复制 " 按钮复制内容。</block>
  <block id="2215f9dffda399b7920ce8d09198668a" category="list-text">在当前目录（与攻略手册目录相同的目录）中创建一个新的变量文件（ yml 文件），然后将复制的变量粘贴到该文件中并保存。</block>
  <block id="8157b13d4a5832aba2c45730d1b1db60" category="list-text">填写下面 Mellanox 交换机的 IP 地址 / 主机名并复制内容。打开 hosts 文件，清除现有的所有信息并将复制的内容粘贴到其中。</block>
  <block id="e245e21fae9b0617e20295e709d2eed3" category="list-text">通过传递变量文件和 Mellanox 交换机用户名来运行攻略手册。出现提示时，填写 Mellanox 交换机的密码。</block>
  <block id="5287ad47faa9ddb98ee2c477d7df683c" category="admonition">在使用上述命令运行攻略手册之前，请将 Mellanox_switch_username 替换为用于登录 Mellanox 交换机的相应用户名。</block>
  <block id="90305bb6fba97091f683e8b82f9bf805" category="summary">借助 NetApp 解决方案自动化，客户可以自动部署，配置和执行许多常见基础架构和应用程序任务。</block>
  <block id="544c3a861d86ce6658187399d91aaa44" category="paragraph">验证和构建解决方案的目标之一是使解决方案易于使用。因此，通过自动化来简化通过我们的解决方案交付的基础架构和 / 或应用程序的部署和配置至关重要。NetApp 致力于通过使用 RedHat Ansible 实现自动化来简化解决方案使用。</block>
  <block id="9043d5bb11e7b216a7308f7a9761d9fd" category="paragraph">Ansible 是一款开源自动化引擎，可帮助 IT 团队自动执行应用程序部署，云配置，配置管理和许多其他 IT 需求。Ansible 无代理，不需要自定义安全基础架构。您可以通过 SSH 远程管理控制系统中多个系统的自动化，使其成为 IT 团队的强大解决方案，帮助他们自动处理繁琐而重复的 IT 需求。</block>
  <block id="8d9887ce2700536b12e7847e2163026e" category="paragraph">如果您不熟悉 NetApp 解决方案自动化，可以使用以下各节设置 Ansible 控制器。</block>
  <block id="6061668c9cb1cddb071099d0e9da5444" category="paragraph">有关 RedHat Ansible 的详细信息，请参见相关文档<block ref="228582a93333b3e21d695cbcfe7060d2" category="inline-link-rx"></block>。</block>
  <block id="d78228187c1a83d3bb4d8e97cd657807" category="paragraph">自动化简化了 NetApp 解决方案的使用。</block>
  <block id="88b11dbb43daa1023e1e0eac175e0e04" category="section-title">设置 Ansible Control 节点</block>
  <block id="cc720ba6fbd83dd2b0c222e5b1d4419c" category="paragraph">Ansible 是一款无代理自动化工具，因此您只需要将其安装在一台计算机（ Ansible 控制节点）上。通过控制节点，您可以管理整个远程计算机车队，而无需对其进行任何额外配置。</block>
  <block id="1fd37248272971c6b09693c66e545794" category="inline-link-macro">RHEL8/CentOS8.</block>
  <block id="62cb08c48fa7398e2b2fbf365a240e90" category="inline-link-macro">RHEL7/CentOS7.</block>
  <block id="7eaf289636bc8d4f8b29b333a0f32dc2" category="inline-link-macro">Ubuntu 或 Debian</block>
  <block id="e10dea45c0463fb061f253f8deef6de6" category="paragraph">根据您要安装 Ansible 的操作系统类型，单击以下链接之一，了解设置控制节点的详细步骤：。 <block ref="7dc121073254da4302fc5dcbe0722747" category="inline-link-macro-rx"></block>。 <block ref="965292dac53abeffbcc140f60ed9445a" category="inline-link-macro-rx"></block>。 <block ref="9c83d13c300fc83e32dbf47b4d277c36" category="inline-link-macro-rx"></block></block>
  <block id="c155d814eba0c89f7e4d7dde346e7ff8" category="paragraph">要通过 AWX/Ansible 塔使用 Ansible 攻略手册配置 Mellanox 交换机，请遵循以下操作步骤：</block>
  <block id="59ea0dd3e785a6eff57ce16a49e0721b" category="list-text">按照指南配置 AWX/ 塔式参数 <block ref="6dc8a9c13444a748151c0dc2cdfaf9ed" category="inline-link-macro-rx"></block></block>
  <block id="7007f95e98fc7408e8a7209ff06ba5d7" category="list-text">登录到 AWX/Tower ，转至 "Resources" -&gt; "Templates" ，然后单击相应 Mellanox 作业模板的 "Launch" 按钮。</block>
  <block id="1855f1f392261a9199b1e7394d52641b" category="list-text">将复制的内容粘贴到系统提示的变量字段中，单击 " 下一步 " ，然后单击 " 启动 " 以运行作业模板。</block>
  <block id="5c263f30899f93ff7ccd457ad3eb956f" category="list-text">安装了以下软件包的 RHEL/CentOS 计算机：</block>
  <block id="7b643b0eef9cf1199195fa05b77fc3c8" category="paragraph">如果您的新 RHEL/CentOS 计算机未安装上述要求，请按照以下步骤将该计算机设置为 Ansible 控制节点：</block>
  <block id="d2052f202108defaf6afc7831ba59362" category="list-text">为 RHEL/8/RHEL/7 启用 Ansible 存储库</block>
  <block id="61fbc2f21db84f17551fda6893429d16" category="list-text">对于 RHEL/8 （以 root 用户身份运行以下命令）</block>
  <block id="77cd42f765e6b40764459a64a979f90c" category="list-text">对于 RHEL/7 （以 root 用户身份运行以下命令）</block>
  <block id="4d3d20acde2dac77a5502c201323aa01" category="doc">NetApp 解决方案自动化</block>
  <block id="2aa17d37bd2483f97468ab7653396786" category="paragraph">本节介绍在 AWX/Ansible 塔中配置参数所需的步骤，这些参数可为使用 NetApp 自动化解决方案的环境做好准备。</block>
  <block id="0fb1db9928d7fc107d96c13f1918b639" category="list-text">导航到资源→清单→添加，然后单击添加清单。</block>
  <block id="2623b8eb8fcaecc009c3b78cc6e7d391" category="list-text">提供名称和组织详细信息，然后单击保存。</block>
  <block id="cc243ac3e015aef331656a4bff40241c" category="list-text">在清单页面中，单击刚刚创建的清单资源。</block>
  <block id="b0ddb214e9aa4a84bc80e6af8c6b2adf" category="list-text">如果存在任何清单变量，请将其粘贴到变量字段中。</block>
  <block id="5d7863780eab69b6b968cfc9dc6e66bc" category="list-text">转到组子菜单，然后单击添加。</block>
  <block id="ec51931bb91bc912d609f2099974dfd9" category="list-text">提供组的名称，复制组变量（如果需要），然后单击保存。</block>
  <block id="8f9cbdc13fdcb31ff345f10ba333ac59" category="list-text">单击创建的组，转到主机子菜单，然后单击添加新主机。</block>
  <block id="98e7a99b463b825a87899d25486e46ea" category="list-text">提供主机的主机名和 IP 地址，粘贴到主机变量中（如有必要），然后单击保存。</block>
  <block id="3caf9a56384a30eb8dee819e3abc14d6" category="list-text">创建凭据类型。对于涉及 ONTAP ， Element ， VMware 或任何其他基于 HTTPS 的传输连接的解决方案，您必须将凭据类型配置为与用户名和密码条目匹配。</block>
  <block id="615b6214c17105ae4915a8c8a632025b" category="list-text">导航到 Administration → Credential types ，然后单击 Add 。</block>
  <block id="846bb9303e5cc4395e96eba0d4c7d50a" category="list-text">将以下内容粘贴到输入配置中：</block>
  <block id="333a40c5632e0507a83f6a191f0b69b3" category="list-text">将以下内容粘贴到注射器配置中：</block>
  <block id="e31908e83a96aee8550446309c4ef7e0" category="list-text">配置凭据。</block>
  <block id="de06c7b54d4158f81a8c4d4a02b61eb0" category="list-text">导航到资源→凭据，然后单击添加。</block>
  <block id="e5b5f57b6910910a3f9a486e88088608" category="list-text">选择正确的凭据类型；如果要使用标准 SSH 登录，请选择类型 Machine 或选择您创建的自定义凭据类型。</block>
  <block id="9256ee926473942ba849050ef0450b7f" category="list-text">输入其他相应的详细信息，然后单击保存。</block>
  <block id="29d192f714134f2e257058cfcf763722" category="list-text">配置项目。</block>
  <block id="1b892b7661c6a3ae2b57cbf4233c3af5" category="list-text">导航到资源→项目，然后单击添加。</block>
  <block id="936784ca62c93ca666e77fd10733247c" category="list-text">为源控制凭据类型选择 Git 。</block>
  <block id="9f4fd9b4a4c75c02d1b469e8dd75d9fb" category="list-text">粘贴与特定解决方案对应的源控制 URL （或 git 克隆 URL ）。</block>
  <block id="95acbbc0424478165cdbe3a62849cbc3" category="list-text">或者，如果 Git URL 受访问控制，请在源控制凭据中创建并附加相应的凭据。</block>
  <block id="a934d780fa0cb0e8495a0a1cabd0f501" category="list-text">配置作业模板。</block>
  <block id="10c610c9225adcc92ca1b284b5bbb04b" category="list-text">输入名称和问题描述。</block>
  <block id="e33edf61d02fc69c2087dcc3c42177e1" category="list-text">选择作业类型； Run 会根据攻略手册配置系统， Check 会在不实际配置系统的情况下执行攻略手册的试运行。</block>
  <block id="57cf64ce7890d12e5a41d18b83979ffd" category="list-text">为攻略手册选择相应的清单，项目和凭据。</block>
  <block id="fc6b15b1dd73bb25477aed453b9a02f2" category="list-text">选择要在作业模板中运行的攻略手册。</block>
  <block id="9a7d90740af07bcdd2c628a6f6ae966c" category="list-text">通常，变量会在运行时粘贴。因此，要在运行时提示填充变量，请确保选中与 Variable 字段对应的 Launch 上的复选框提示。</block>
  <block id="3454f07e6f81a48099e0d144ca38ec7a" category="list-text">根据需要提供任何其他详细信息，然后单击保存。</block>
  <block id="0b55c84dbc04b54418b0d507f7b8f669" category="list-text">如果在启动时出现提示，请填写任何变量，然后再次单击启动。</block>
  <block id="dca91c3343cc0ad062506cdd14eb7d41" category="summary">混合云，桌面虚拟化和容器解决方案宣传材料的最新补充内容</block>
  <block id="76fbc12c25930d37ebcccaab8f656eda" category="doc">混合云，桌面虚拟化和容器解决方案的新增功能</block>
  <block id="07e257430bade6bc5bce1c2170c6fc0d" category="paragraph">概述最新的混合云，桌面虚拟化和容器解决方案和解决方案宣传材料。</block>
  <block id="c1e392a90896851b3319d6075402fd4d" category="cell">* 混合云 / 私有云 *</block>
  <block id="8ef4e9c7260e8d314760329e07c618ae" category="cell">* 虚拟化 *</block>
  <block id="2bdc87f51d413e6d2fa23dd26238501f" category="inline-link-macro">适用于 ONTAP 的 VMware vSphere</block>
  <block id="236122c6ab4c764632437a76fa95e5c0" category="cell">* 桌面虚拟化 *</block>
  <block id="4b47c65474ab7fae9b08ddf38d598971" category="inline-link-macro">采用 NetApp 虚拟桌面服务（ Virtual Desktop Service ， VDS ）的混合云 VDI</block>
  <block id="dea91bec9e85387a496bb2c228fc7dc3" category="cell"><block ref="dea91bec9e85387a496bb2c228fc7dc3" category="inline-link-macro-rx"></block></block>
  <block id="1ebfe0d8e53e3f7f2c37e8b3835c2adf" category="cell">* 容器 *</block>
  <block id="119ad672b0d69ab3f968877b6ec83dd3" category="cell"><block ref="119ad672b0d69ab3f968877b6ec83dd3" category="inline-link-macro-rx"></block></block>
  <block id="ad1cf94aab71c9962e22037ed60d41e9" category="cell"><block ref="ad1cf94aab71c9962e22037ed60d41e9" category="inline-link-macro-rx"></block></block>
  <block id="e6ba927c9d14295015e39be05cf54040" category="inline-link-macro">使用 NetApp ONTAP 在 Red Hat OpenShift 上使用多租户</block>
  <block id="ab439bcac737f2565970fe2612976b75" category="cell"><block ref="ab439bcac737f2565970fe2612976b75" category="inline-link-macro-rx"></block></block>
  <block id="ad95c47343e102dc30ec33fa6f1ccc55" category="inline-link-macro">NVA-1160 —采用 NetApp 技术的 Red Hat OpenShift</block>
  <block id="1043b5153afff839b84d714aa9127913" category="cell"><block ref="1043b5153afff839b84d714aa9127913" category="inline-link-macro-rx"></block></block>
  <block id="0fd00a19fb12bb899dfe7cefbcbbcb79" category="inline-link-macro">在 Red Hat OpenShift 上安装 NetApp Trident —如何解决 Docker 的 ‘所有请求 ' 问题描述！</block>
  <block id="43e5d9153d1fc4a35be5f57189605919" category="cell"><block ref="43e5d9153d1fc4a35be5f57189605919" category="inline-link-macro-rx"></block></block>
  <block id="da38226e07ff21f147182bb08be38f6f" category="inline-link-macro">采用 NetApp 技术的裸机 Anthos</block>
  <block id="ac1da2af455fc001ba8b58af0e62d151" category="cell"><block ref="ac1da2af455fc001ba8b58af0e62d151" category="inline-link-macro-rx"></block></block>
  <block id="bfd22ae6cd60e663ed70e43729a64b1a" category="summary">讨论混合云，桌面虚拟化和容器解决方案功能的系列博客</block>
  <block id="0ffff76bcc7d5f89f6a352694b916dbd" category="doc">混合云，桌面虚拟化和容器博客</block>
  <block id="0aef0d80b80eebee0590e019fffb3715" category="paragraph">重点介绍混合云，桌面虚拟化和容器解决方案特定功能的博客概述。</block>
  <block id="ec7f98a3714557d87968dc6a898f7912" category="inline-link-macro">将 VMware Tanzu 与 ONTAP 结合使用，加快 Kubernetes 之旅</block>
  <block id="32e124b0349f41e06bf1e03f11950665" category="list-text"><block ref="32e124b0349f41e06bf1e03f11950665" category="inline-link-macro-rx"></block></block>
  <block id="b4a5303e0fac342c604f2250a077e3be" category="summary">AI 和现代数据分析解决方案资料的最新补充内容</block>
  <block id="7cc6f9b96a60dc9ecee3f8af38876ac2" category="doc">AI 和现代数据分析的新增功能</block>
  <block id="6c359c33f91503466661c814919afe18" category="paragraph">概述最新的 AI 和现代数据分析解决方案和解决方案宣传材料。</block>
  <block id="b16e2e1566ba0fc14f6e0eb77d99cf93" category="cell">* 采用 NVIDIA DGX A100 系统的 NetApp ONTAP AI *</block>
  <block id="e7f098b026755d10f2c3f16d0ff0b1db" category="inline-link-macro">设计指南</block>
  <block id="1027b152cc3e8165ce099ede9548be95" category="cell"><block ref="1027b152cc3e8165ce099ede9548be95" category="inline-link-macro-rx"></block></block>
  <block id="dfb1e9c5f4c5835e6e1a4173130a49c9" category="inline-link-macro">部署指南</block>
  <block id="983044e3ba861493c43c08b9285c3125" category="cell"><block ref="983044e3ba861493c43c08b9285c3125" category="inline-link-macro-rx"></block></block>
  <block id="70163cee23a15a309e4f1ec48b6928a8" category="cell">* 采用 NVIDIA DGX A100 系统和 Mellanox 系列以太网交换机的 NetApp ONTAP AI *</block>
  <block id="d91f70a15d40fe5795af6ded9555e095" category="cell"><block ref="d91f70a15d40fe5795af6ded9555e095" category="inline-link-macro-rx"></block></block>
  <block id="8e9465b5d4318c8ef9039dfe684619d5" category="cell"><block ref="8e9465b5d4318c8ef9039dfe684619d5" category="inline-link-macro-rx"></block></block>
  <block id="2d7bdfd6f5569b6403315db85da8b4d3" category="cell">* 采用 NetApp 的 AI Orchestration 和 Run ： AI*</block>
  <block id="a573d92b77d430af7e424879baf78e94" category="inline-link-macro">内容提要</block>
  <block id="e49c15d1800d8269c52f7d037ace494b" category="cell"><block ref="e49c15d1800d8269c52f7d037ace494b" category="inline-link-macro-rx"></block></block>
  <block id="0c70e09b2805fac4fb509aee9132fa97" category="cell">* NetApp DataOps 工具包 *</block>
  <block id="9004ee13f10e4aa331cdbb0e05878d3f" category="inline-link-macro">访问 GitHub 上的工具包</block>
  <block id="604c2d197444e12a03e7c1ba2830e768" category="cell"><block ref="604c2d197444e12a03e7c1ba2830e768" category="inline-link-macro-rx"></block></block>
  <block id="4810ca62a9687605d0a9c7471e75ec69" category="cell">* 数据分析解决方案简介 *</block>
  <block id="7cc3c71ee2fdbff1fd2efbfcded89f90" category="inline-link-macro">适用于不同分析策略的不同解决方案</block>
  <block id="478906eb475a111b93606dc484113cdc" category="cell"><block ref="478906eb475a111b93606dc484113cdc" category="inline-link-macro-rx"></block></block>
  <block id="0f984f9309c692c61a7fc7cc418f3aaf" category="summary">BData 保护和安全解决方案资料的最新补充内容</block>
  <block id="c492395cd6a4b5279c981c29057d42b9" category="doc">《数据保护和安全解决方案新增功能》</block>
  <block id="d6aa2099009bf5a43f1d5210308a91de" category="paragraph">最新数据保护和安全解决方案及解决方案宣传材料概述。</block>
  <block id="1e1fe2d30ed5bb9c5276dddb65f4ce65" category="cell">* 安全性 *</block>
  <block id="44516140f9860119a65bb3fc45b9ff39" category="inline-link-macro">经过 NetApp HCI 验证的 PCI-DSS 架构</block>
  <block id="5b03dcf0205060a9490f1d572aee619e" category="cell"><block ref="5b03dcf0205060a9490f1d572aee619e" category="inline-link-macro-rx"></block></block>
  <block id="4725a75839c620bb95363c5f7f2ee9bc" category="cell">VMware Horizon</block>
  <block id="c6f59500cff9fc154e284a0b9b18bb83" category="summary">讨论 NetApp 解决方案中的自动化功能的系列视频和演示</block>
  <block id="cff1a9d42f081481f7d374df8bcbb26b" category="doc">解决方案自动化视频和演示</block>
  <block id="4e59e2d3d9f78c4e87a82b3cbcc7e1a3" category="paragraph">视频和演示概述，重点介绍 NetApp 解决方案自动化功能的具体功能。</block>
  <block id="9efcc0ad3c93b238cc0495e3c87b715f" category="inline-link-macro">借助 Ansible 在 FlexPod 上自动部署 Oracle 19c RAC</block>
  <block id="9c4ada146a28af07eecc939b540c3541" category="list-text"><block ref="9c4ada146a28af07eecc939b540c3541" category="inline-link-macro-rx"></block></block>
  <block id="6a0ecfbed3f66ec0b5d8989880431ad7" category="summary">讨论数据保护和安全解决方案功能的系列博客</block>
  <block id="16be77be7dcecad552bca4efda1efcb1" category="doc">数据保护和安全博客</block>
  <block id="fdaef51553bfad628d1d8ee4cd314d79" category="paragraph">重点介绍数据保护和安全解决方案特定功能的博客概述。</block>
  <block id="f3c961b3fcb2ae7229add932837c205a" category="summary">讨论业务应用程序和企业数据库解决方案功能的一系列视频和演示</block>
  <block id="f7164629c6d69e9fc50c2435382e23c8" category="doc">业务应用程序和企业数据库视频和演示</block>
  <block id="9c8f0f2cea03121d5372f653983bb29b" category="paragraph">视频和演示概述，重点介绍业务应用程序和企业数据库解决方案的特定功能。</block>
  <block id="a0d2b6fe9ab0a7e386c4c21f70331226" category="section-title">案例研究</block>
  <block id="33be49f7ebc56eb7d336a201f7ac0df6" category="inline-link-macro">基于 Azure NetApp Files 的 SAP</block>
  <block id="626865aeb52c00e03e8f0df7695c5a5c" category="list-text"><block ref="626865aeb52c00e03e8f0df7695c5a5c" category="inline-link-macro-rx"></block></block>
  <block id="e131204502a58630f2f72937238604c8" category="section-title">视频 / 演示</block>
  <block id="e9194e819cadddfb8f6c5e69d11e366b" category="inline-link-macro">适用于 Oracle 数据库的 NetApp 解决方案</block>
  <block id="2c389096a43e749160e32214cb4a3b89" category="list-text"><block ref="2c389096a43e749160e32214cb4a3b89" category="inline-link-macro-rx"></block></block>
  <block id="2b1dd692c0da980c4ec2ad9fd523c47d" category="inline-link-macro">Azure NetApp Files 上的 SQL 高可用性集群</block>
  <block id="99945a626f3fb01dbeac75f40a6c2c8e" category="list-text"><block ref="99945a626f3fb01dbeac75f40a6c2c8e" category="inline-link-macro-rx"></block></block>
  <block id="cf04feec36847ba9c9671b28661cd1fc" category="sidebar">NetApp 解决方案文档</block>
  <block id="38d9ffc674675d65fbb8aabd7e47acd3" category="sidebar">FlexPod 解决方案</block>
  <block id="3523ec156cfc8217bb64d1273e5663fa" category="sidebar">关于 NetApp 解决方案</block>
  <block id="e799e148c709b216080d260919cc9b9f" category="sidebar">AI 现代数据分析</block>
  <block id="91770f038cd944a1d3b9b347edeb2b10" category="sidebar">新增功能</block>
  <block id="74bef786b12cb9d03a6c04df1f605181" category="sidebar">NetApp DataOps 工具包</block>
  <block id="17c3771ed0b6c1ae15740eff715e9922" category="sidebar">视频和演示</block>
  <block id="25a72d771c3846ba4da8732220f7a588" category="sidebar">企业应用程序数据库</block>
  <block id="0333ddced253ee1c6929eda5612dea92" category="sidebar">请求自动化</block>
  <block id="9e2c62f406d88ad1ee253efd74f593df" category="sidebar">建议新的解决方案</block>
  <block id="7fd861566be88364067d817b54a44688" category="sidebar">提供解决方案反馈</block>
  <block id="df6654a22cda1b94cf0f51d6ae94bb69" category="sidebar">适用于不同分析策略的不同解决方案解决方案简介</block>
  <block id="8e2406d586d4192dc66b85722da1c3b9" category="sidebar">采用 Splunk SmartStore 的 NetApp StorageGRID</block>
  <block id="5e3dc34b61f6a21ffd6549ee40d4631b" category="sidebar">NetApp E 系列 E5700 和 Splunk Enterprise</block>
  <block id="427d072a2c1690c6d9ece23bef05477b" category="sidebar">《使用 NetApp Storage 解决方案的 Apache Spark 工作负载》（部署指南）</block>
  <block id="cdc53c90644739ab9cb455ad8b663d7b" category="sidebar">Red Hat OpenShift 概述</block>
  <block id="d48e549b4fdcc889e0243c53bbb4dda0" category="sidebar">解决方案验证和使用情形</block>
  <block id="f99e4eb05e28c150680cb72ca8410d93" category="sidebar">使用 NetApp ONTAP 在 Red Hat OpenShift 上配置多租户</block>
  <block id="51a25aff8c490f11d9be543c7af23a0d" category="sidebar">集群管理员任务</block>
  <block id="244e9cd91466ef1240c125511568880a" category="sidebar">存储管理员任务</block>
  <block id="bc967dc2d57e6eff184a821bf7577a80" category="sidebar">扩展</block>
  <block id="d6bf2b10101446c7afd28ff94926fc44" category="sidebar">通过操作员部署</block>
  <block id="e6b088db24ebe67ed0e9567d309387ec" category="sidebar">工作流</block>
  <block id="88c506562ebadd679bb16d76a4558619" category="sidebar">VM 克隆</block>
  <block id="d313887d8fa4b2493a50d1e00bad440e" category="sidebar">应用程序生命周期管理</block>
  <block id="f55899cffbf639043209795d5a1af970" category="sidebar">创建资源</block>
  <block id="1c4dff0a00340691e103ef63154df371" category="sidebar">Google Anthos</block>
  <block id="9a9891facf2fa1c878c0fc18c6638005" category="sidebar">AI 融合基础架构</block>
  <block id="12797522e94d75727dd0a05a4ed9f5ff" category="sidebar">采用 NVIDIA 的 ONTAP AI</block>
  <block id="687350c847aefbf978e16be26609d101" category="sidebar">采用 NVIDIA DGX A100 的 ONTAP AI 系统设计指南</block>
  <block id="4c7a8c5b878fcdf733694f638b393b6b" category="sidebar">采用 NVIDIA DGX A100 的 ONTAP AI 系统部署指南</block>
  <block id="74c684b866e5fcffcc9c5165a491d5b2" category="sidebar">采用 NVIDIA DGX A100 系统和 Mellanox 频谱以太网交换机的 ONTAP AI 设计指南</block>
  <block id="f8363659ae3ab117a0afa4163ca69fc7" category="sidebar">《采用 NVIDIA DGX A100 系统和 Mellanox 频谱以太网交换机的 ONTAP AI 部署指南》</block>
  <block id="cc5c734c59f3ce23c9a86fd145bfb4ea" category="sidebar">采用 NVIDA 的 EF 系列 AI</block>
  <block id="0c3efd7c1aae12456ab9935ae5fd15e0" category="sidebar">采用 NVIDIA DGX A100 系统和 BeeGFS 的 EF 系列 AI</block>
  <block id="c70e778edabe427cd2db90132a56e456" category="sidebar">采用 NVIDIA DGX A100 系统和 BeeGFS 设计的 EF 系列 AI</block>
  <block id="06aa576b3e3e95c5df800228d146af65" category="sidebar">采用 NVIDIA DGX A100 系统和 BeeGFS 部署的 EF 系列 AI</block>
  <block id="2967ab4748573d0cb6f2c4084c4fd70f" category="sidebar">采用 NetApp E 系列参考架构的 BeeGFS</block>
  <block id="1db760587a86f5c1b9ab39aa8cf8cf3d" category="sidebar">使用 NetApp E 系列存储部署 IBM Spectrum Scale</block>
  <block id="08479c0355c887a02e772206b0d5d7f5" category="sidebar">适用于 AI 和 ML 模型培训工作负载的 NetApp ONTAP 和联想 ThinkSystem SR670</block>
  <block id="e648dd2d4df65a903e9c1204d81abaed" category="sidebar">适用于 AI 和 ML 模型培训工作负载的 NetApp AFF A800 和 Fujitsu 服务器 PRIMERGY GX2570 M5</block>
  <block id="6a571fb799acb43b64f874729f838e2a" category="sidebar">数据管道，数据湖和管理</block>
  <block id="c79bd5ac7ebc0eae5588b9ad529a380f" category="sidebar">适用于自主驾驶工作负载的 NetApp StorageGRID 数据湖</block>
  <block id="fad62e8b886e655813cc4ce635152f62" category="sidebar">Trident 部署</block>
  <block id="be443b15b920fdeff14efc2c6db69a7c" category="sidebar">MLRun 管道</block>
  <block id="70be05b3500f28affc2d048f81c4f7ab" category="sidebar">分布式 Azure 培训—通道检测</block>
  <block id="7767872606b9c99eb656c9568c1fdd83" category="sidebar">车道检测—使用 Run AI 进行分布式培训</block>
  <block id="ce3b746194cb1fb7d96dfe14187115e0" category="sidebar">采用数据缓存的混合云 AI 操作系统</block>
  <block id="549d044fec039c71abf82f76a0d7969c" category="sidebar">将数据从大数据环境迁移到 AI 环境</block>
  <block id="f1e7c981dec3bcee348bda96c55363c4" category="sidebar">使用 NVIDIA 的对话 AI</block>
  <block id="d5c1931461d1e204a84a486796df2cca" category="sidebar">NetApp Orchestration 解决方案与 Run ： AI</block>
  <block id="c0a0f5bbb431dea70000d73b29e50249" category="sidebar">使用 Run AI 优化集群和 GPU 利用率</block>
  <block id="09c995632f33d1ee4a581eb951793f35" category="sidebar">运行 AI 安装</block>
  <block id="5c9e37e6d7e6f5e3a76854d8343d626b" category="sidebar">运行 AI 信息板和视图</block>
  <block id="29ebede332931243e314d8a3f333c1a7" category="sidebar">在 Run AI CLI 中提交作业</block>
  <block id="2943702718c42a5063e0c70598cebdc6" category="sidebar">适用于自主驱动工作负载的 NetApp ONTAP AI 解决方案设计</block>
  <block id="d11813566a7c636e892d384601baf2c3" category="sidebar">适用于医疗保健的 NetApp ONTAP AI 参考架构：诊断成像</block>
  <block id="ab8526a90cc9cc979ddd23c87fff57bd" category="sidebar">适用于金融服务工作负载的 NetApp ONTAP AI 参考架构</block>
  <block id="6efd886c994d37b6577e22359be2310e" category="sidebar">使用 NetApp E 系列和 BeeGFS 进行 AI 部署</block>
  <block id="3863e8a73e226ce0c0a6ad02b90ee75b" category="sidebar">《采用 NetApp E 系列系统的 Quantum StorNext 设计指南》</block>
  <block id="7891972f4586e6ee183ea541991ebe9f" category="sidebar">《采用 NetApp E 系列系统的 Quantum StorNext 部署指南》</block>
  <block id="6ff1dafebf930a9c5fef12bf43046987" category="sidebar">企业级应用程序和数据库</block>
  <block id="e340bc103d02ce2b8e016eb60705029c" category="sidebar">SAP 和 SAP HANA</block>
  <block id="89447eb7454239e11376250fa04a88f7" category="sidebar">SAP 与使用集群模式 Data ONTAP 的 Windows 上的 Microsoft SQL Server</block>
  <block id="eb1df2bd32ac3157117c264421853a5a" category="sidebar">SAP 与基于 UNIX 的 Oracle 以及 NFS 与 NetApp 集群模式 Data ONTAP </block>
  <block id="54d2cdd3035ca1cdff5803c30f2ed2e1" category="sidebar">部署 Oracle 数据库</block>
  <block id="c880b35e02dbb5854452c86028138e2a" category="sidebar">在 NetApp ONTAP 上部署 Oracle 数据库</block>
  <block id="699700175d80778f1738d906ee9540d5" category="sidebar">入门和要求</block>
  <block id="210fdbe41d80b2e8690a970de86a7ffb" category="sidebar">自动部署 Oracle 19c AWX/ 塔式服务器</block>
  <block id="13cf6478a61a7904a3062d587248fb75" category="sidebar">自动部署 Oracle 19c CLI</block>
  <block id="bc113eb23aa0579a5e1d93e97ca13635" category="sidebar">基于 NetApp EF 系列的 Oracle 数据库</block>
  <block id="78898e52fcbdc5337204a384f2456d4f" category="sidebar">Microsoft SQL Server</block>
  <block id="61def2ac347af2f10fd60cd67052a311" category="sidebar">参考设计（实时高级别设计）</block>
  <block id="7c02456b91ace7501ea6f18d1657dcf7" category="sidebar">打造现代化的 Microsoft SQL Server</block>
  <block id="5c008a8422e884d74da1d4b50a7ada55" category="sidebar">《采用 NetApp EF 系列的 Microsoft SQL Server 最佳实践指南》</block>
  <block id="a87e5ca19422686ef96f1e6799e9111d" category="sidebar">虚拟桌面服务（ Virtual Desktop Services ， VDS ）</block>
  <block id="dede82866780d163734b443c5f4d484e" category="sidebar">采用 NetApp 虚拟桌面服务的混合云 VDI</block>
  <block id="b89c617ff394cc85df3935994baa194b" category="sidebar">使用 Login VSI 进行单服务器负载测试</block>
  <block id="6abbceca4793ffe4b329045f63b4d219" category="sidebar">操作管理</block>
  <block id="1b31ca8ddb749644af37aa10b42e6930" category="sidebar">GPU 注意事项</block>
  <block id="a1da2a2d050a6b61256020afd015a056" category="sidebar">行业解决方案</block>
  <block id="739169d2451850e6df7246db70c28cc7" category="sidebar">ESG 技术验证：借助 NetApp 虚拟桌面服务实现企业级 VDI</block>
  <block id="3acc5e85d752378c6f1b9154f379b475" category="sidebar">VMware 最终用户计算（设计指南）</block>
  <block id="87e25a8d0e462ac8d7158e587f376605" category="sidebar">采用 VMware 和 NVIDIA GPU 的最终用户计算（设计指南）</block>
  <block id="d840a196af6c9e07c3ac3b20b15fb724" category="sidebar">使用 VMware 和 NVIDIA GPU 的最终用户计算（部署指南）</block>
  <block id="f93781578174ca3309bd3ac126884af4" category="sidebar">借助 VMware 实现 3D 图形的最终用户计算</block>
  <block id="ebf53884ddd18d15090d564ab3097375" category="sidebar">Citrix 虚拟应用程序和桌面</block>
  <block id="e2a1b52ebd707739003f77464bbcaa80" category="sidebar">FlexPod 桌面虚拟化解决方案</block>
  <block id="2a643eb4634917213492cef085506d45" category="sidebar">开始使用 NetApp 和 VMware</block>
  <block id="6c30682e8603121e14abe8bab7bd88f3" category="sidebar">适用于 ONTAP 的 VMware 虚拟化</block>
  <block id="9ad0e51adb2a8a0d8dca6035769d9384" category="sidebar">适用于 VMware vSphere 管理员的 NetApp ONTAP</block>
  <block id="cadc483b04d069f993431e3ac64341bf" category="sidebar">基于虚拟卷和存储策略的管理</block>
  <block id="c0bf5949fe87e1e5caf42e4746cd0080" category="sidebar">采用 ONTAP 的 VMware vSphere 最佳实践</block>
  <block id="1918f1bc0ea91d0e5d8e37878d5ab562" category="sidebar">采用 NetApp ONTAP 9 的 VMware Site Recovery Manager</block>
  <block id="c4f0254bef611d7217287539f6e00feb" category="sidebar">VMware vSphere 自动化</block>
  <block id="86fbb5b9292be9b680987addfa410586" category="sidebar">传统块存储配置</block>
  <block id="805a0828a65bce146a58e3556113b017" category="sidebar">VMFS —光纤通道</block>
  <block id="26e113624e0cc32cbe2a26e1cde1da24" category="sidebar">VMFS —以太网光纤通道</block>
  <block id="8237af9088e8905784b1cb373e3a080d" category="sidebar">VMFS — iSCSI</block>
  <block id="94cab344ef7124917167bd5415b137cf" category="sidebar">VMFS —基于网络结构的 NVMe</block>
  <block id="348ee034e8868e5211a6501c09d4b0f0" category="sidebar">传统文件存储配置</block>
  <block id="614b997c0fb5abcd68fda0ab9ca05d69" category="sidebar">NFS — v3</block>
  <block id="912655e9dd57ab01b86691021957e61e" category="sidebar">NFS — v4.1</block>
  <block id="eaf99c5ef6885367fbd51d3ed4d278a9" category="sidebar">适用于 VMware vSphere 的 ONTAP 的新增功能</block>
  <block id="ce006038ddc2a04747fe5a2c9c43b8f5" category="sidebar">演示和教程</block>
  <block id="645198fb2e03205a7f761aeaff8ef26f" category="sidebar">NetApp 解决方案自动化和 Ansible 入门</block>
  <block id="8619770bb94b4ac2d3ef4a8639dac91f" category="sidebar">设置 Ansible 控制节点（适用于基于 CLI 的部署）</block>
  <block id="47ac29a4a2e3c3e4581e035d792ee4ac" category="sidebar">适用于 RHEL/ CentOS 计算机</block>
  <block id="d74c216bc36310fb7cb045522918e606" category="sidebar">适用于 Ubuntu / Debian 计算机</block>
  <block id="073616205ad0e6bcb86754e5a151281a" category="sidebar">设置 AWX/Ansible 塔（适用于基于 AWX/ 塔式部署）</block>
  <block id="22d04ecae9fae88d0b8d4548a46a545b" category="sidebar">请求自动化</block>
  <block id="bdca592f24222e5064192bb9e2f9af6e" category="sidebar">FlexPod — NetApp Cisco 解决方案</block>
  <block id="0da8a1ebf94a3a1e650dbfbd01c69dd9" category="sidebar">FlexPod 解决方案技术内容</block>
  <block id="32591d046a055939af0d128133dc8606" category="sidebar">FlexPod 销售页面</block>
  <block id="9e5a59ca9aef030e74a725dab3fb6dcf" category="paragraph">借助 Astra Trident 和 Red Hat OpenShift ，用户可以在所配置的存储类上创建永久性卷的快照。通过此功能，用户可以创建卷的时间点副本，并使用该副本创建新卷或将同一卷还原到先前的状态。这样可以启用或支持从回滚到克隆再到数据还原等各种使用情形。</block>
  <block id="05cd0cf0962d29806df78d956f772deb" category="summary">Astra Trident 是一款开源且完全受支持的存储编排程序，适用于容器和 Kubernetes 分发版，包括 Red Hat OpenShift 。</block>
  <block id="0626021388a8dcc9b1e26b1209550b8d" category="paragraph">Astra Trident 具有快速的开发周期，就像 Kubernetes 一样，每年发布四次。</block>
  <block id="4281e618126caa3d322e78eafddba1b2" category="section-title">下载 Astra Trident</block>
  <block id="f71051465199267cbb540658a51e2957" category="paragraph">完成 Astra Trident 操作员安装后，您必须为所使用的特定 NetApp 存储平台配置后端。请访问以下链接继续设置和配置 Astra Trident 。</block>
  <block id="7eba670f1ea5a6e2fba9cff6b6399064" category="summary">此页面详细介绍了 MetalLB 负载平衡器的安装和配置说明。</block>
  <block id="79a2d2fa50d2b47d02c0e9dbdfadc07f" category="doc">安装 MetalLB 负载平衡器： Red Hat OpenShift 与 NetApp</block>
  <block id="0b2da9b5fe81e13e88c9a05981a95a9e" category="paragraph">此页面列出了 MetalLB 负载平衡器的安装和配置说明。</block>
  <block id="28a4ce0a0514d0f6a6596fc7a9c5e725" category="section-title">MetalLB 配置选项</block>
  <block id="04c22d763ca95631f9c8789eb2c6e68f" category="paragraph">根据 MetalLB 如何公布分配给 OpenShift 集群以外的负载平衡器服务的 IP 地址，它可在两种模式下运行：</block>
  <block id="92f98c10e5e0c86bcae2e9cb58b700e3" category="list-text">* 第 2 层模式。 * 在此模式下， OpenShift 集群中的一个节点将接管此服务的所有权，并对该 IP 的 ARP 请求做出响应，使其可在 OpenShift 集群之外访问。由于只有节点才公布 IP ，因此存在带宽瓶颈和较慢的故障转移限制。有关详细信息，请参见文档 <block ref="4a1d14cac7ed68a2326a050e0f1fed80" category="inline-link-macro-rx"></block>。</block>
  <block id="32333b5f74abf17bffedb6e7abeb7b5f" category="section-title">安装 MetalLB 负载平衡器</block>
  <block id="70bd399edc6825961c98dc29c2a49299" category="list-text">下载 MetalLB 资源。</block>
  <block id="d95ae9e4bae10f240e5577110ccbd7e6" category="list-text">编辑文件 `metallb.yaml` 并从控制器部署和主讲人 DemonSet 中删除 `spec.template.spec.securityContext` 。</block>
  <block id="39bb715a16a6f4c1ab16bc3ad3654f0b" category="paragraph">* 要删除的行： *</block>
  <block id="803519c541b237245faa09039c50dcaa" category="list-text">创建 `metallb-system` 命名空间。</block>
  <block id="980aff973ca30f65ec180530f40def06" category="list-text">创建 MetalLB CR 。</block>
  <block id="f87be5542b64a7f94a807699fd549479" category="list-text">在配置 MetalLB 扬声器之前，请授予扬声器 DemonSet 提升权限，使其能够执行使负载平衡器正常工作所需的网络配置。</block>
  <block id="53747915d8e79873876b08edb1ce3671" category="list-text">通过在 `metallb-system` 命名空间中创建 `ConfigMap` 来配置 MetalLB 。</block>
  <block id="2b1e829362de1a86eeb131cdc4619908" category="list-text">现在，在创建负载平衡器服务时， MetalLB 会为这些服务分配一个外部 IP ，并通过响应 ARP 请求来公布 IP 地址。</block>
  <block id="234ce2b9b198f2acf2193cbd06120ff2" category="admonition">如果要在 BGP 模式下配置 MetalLB ，请跳过上述步骤 6 并按照 MetalLB 文档中的操作步骤进行操作 <block ref="fed7545a9b4a70bb7835cc8b07492cba" category="inline-link-macro-rx"></block>。</block>
  <block id="0f07e63979900ab2abf6d2d578850a47" category="inline-link-macro">接下来：解决方案验证 / 使用情形：采用 NetApp 的 Red Hat OpenShift 。</block>
  <block id="3a29a96f08f4066b544db012326464ed" category="paragraph"><block ref="3a29a96f08f4066b544db012326464ed" category="inline-link-macro-rx"></block></block>
  <block id="dc7ec0964c3d39892e26bbe1593a79e2" category="list-text">安装在 OpenShift 集群上的 Astra Trident</block>
  <block id="e909486a42368b2659780687c3b4a31b" category="list-text">一种在 OpenShift 集群上配置的存储类，其中使用 Astra Trident 作为配置程序</block>
  <block id="a5369d9ec76321542413da21642ecc74" category="inline-link-macro">接下来： NetApp 存储集成概述</block>
  <block id="1a9b0bf11ebe49684776b9ffad6b4022" category="paragraph"><block ref="1a9b0bf11ebe49684776b9ffad6b4022" category="inline-link-macro-rx"></block></block>
  <block id="7df52e0f8b2cb2af1e107fde51d06945" category="paragraph">实时迁移是指在不停机的情况下将 VM 实例从 OpenShift 集群中的一个节点迁移到另一个节点的过程。要在 OpenShift 集群中执行实时迁移， VM 必须绑定到具有共享 ReadWriteMany 访问模式的 PVC 。在启用了 NFS 协议的 NetApp ONTAP 集群上配置了 SVM 的 Astra Trident 后端支持对 PVC 的共享 ReadWriteMany 访问。因此，对于从启用了 NFS 的 SVM 中由 Trident 配置的 StorageClasses 请求具有 PVC 的 VM ，可以在不停机的情况下进行迁移。</block>
  <block id="a0c55f3c40b8bb2d3e26f8d11ca73cbc" category="summary">本参考文档对通过安装程序配置的基础架构（ IPI ）在 NetApp 验证的多种不同数据中心环境中部署的 Red Hat OpenShift 解决方案进行了部署验证。同时，还详细介绍了如何利用 Astra Trident 存储编排程序来管理永久性存储，从而与 NetApp 存储系统实现存储集成。最后，我们还探讨并记录了许多解决方案验证和实际使用情形。</block>
  <block id="a2ac5b8f3de7c17418af38c828121a15" category="list-text">与 NetApp 存储和适用于 Kubernetes 的开源存储编排程序 Astra Trident 结合使用时，重点介绍 Red Hat OpenShift 的功能的实际配置和使用情形。</block>
  <block id="d3d8eb53a347d6ffc9fb157d9ac8398b" category="paragraph">采用 NetApp 解决方案的 Red Hat OpenShift 由以下主要组件组成：</block>
  <block id="2b8932b35916e8cecb6216546111322e" category="paragraph">Red Hat OpenShift 容器平台是一个完全受支持的企业 Kubernetes 平台。Red Hat 对开源 Kubernetes 进行了多项增强，可提供一个应用程序平台，其中包含所有组件，这些组件均已完全集成，可用于构建，部署和管理容器化应用程序。</block>
  <block id="9480fd8950471a46e6b29b165ba7ae41" category="paragraph">NetApp Astra 控制中心为有状态 Kubernetes 工作负载提供了一组丰富的存储和应用程序感知型数据管理服务，这些服务部署在内部环境中，并采用 NetApp 值得信赖的数据保护技术。</block>
  <block id="12c17259bf3f3b36e970c9e3abbc6b43" category="cell">NetApp Astra 控制中心</block>
  <block id="8d96276332b02a2ef892828c1d4fbab4" category="cell">应用程序感知型数据管理</block>
  <block id="8de59ec369b10820d0dd336b9765c79b" category="cell">NetApp Astra Trident</block>
  <block id="824bd84e05db30b27e73f839dae3b8e5" category="list-text">Astra Trident 文档</block>
  <block id="fe549ebd8a3f0fea1803cbaa947ef198" category="list-text">NetApp Astra 控制中心文档</block>
  <block id="ad837604b59ea6a89754d8e75f595c7b" category="inline-link"><block ref="ad837604b59ea6a89754d8e75f595c7b" category="inline-link-rx"></block></block>
  <block id="4af69e66dd3d513168080d177919dd21" category="paragraph"><block ref="4af69e66dd3d513168080d177919dd21" category="inline-link-rx"></block></block>
  <block id="68dc46cb39cdfc93e4593bbdd5c218cf" category="paragraph">大多数情况下， IPI 安装方法是首选方法，因为它可以为开发，测试和生产环境快速部署 OCP 集群。</block>
  <block id="3dbb1adfd571e8b44af1259f287d723f" category="paragraph">NetApp 拥有多个存储平台，这些平台符合我们的 Astra Trident Storage Orchestrator 标准，可为在 Red Hat OpenShift 上部署的应用程序配置存储。</block>
  <block id="0d1d64b47559f0c28c883e7e790b8363" category="summary">本节专门介绍实际用户在将此解决方案部署到生产环境中时可能需要执行的自定义设置，例如创建专用映像注册表或部署自定义负载平衡器实例。</block>
  <block id="2642cf401e87de575eae139953f87134" category="admonition">在本节中，我们介绍了一些高级配置选项，例如，使用第三方负载平衡器或创建专用注册表来托管自定义容器映像，这两个选项都是安装 NetApp Astra 控制中心的前提条件。</block>
  <block id="02b655f637212514780af2795fd74fc4" category="paragraph">以下页面介绍了有关在 Red Hat OpenShift with NetApp 解决方案中验证的高级配置选项的追加信息：</block>
  <block id="becc5334b7f3d2f4f57fc42cd287fd54" category="inline-link-macro">了解负载平衡器选项</block>
  <block id="22651dd64b4cd4c6d2742d1f8b126ae6" category="list-text"><block ref="22651dd64b4cd4c6d2742d1f8b126ae6" category="inline-link-macro-rx"></block></block>
  <block id="261bdcc1d2c24d15c43c5947e69ea9e6" category="inline-link-macro">配置私有映像注册表</block>
  <block id="c8db11b008075455562a8b598b31753c" category="list-text"><block ref="c8db11b008075455562a8b598b31753c" category="inline-link-macro-rx"></block></block>
  <block id="c4a7756da710a87248298a14bd0c21e6" category="paragraph"><block ref="c4a7756da710a87248298a14bd0c21e6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e7a6c3c568d213db46836511343c4965" category="list-text">运行 ONTAP 9.5 或更高版本的一个或多个 NetApp ONTAP 存储系统。</block>
  <block id="c927c560df09d5ca001f99cd07b14700" category="list-text">必须在每个 OpenShift 集群上配置一个 Trident 存储后端，其中包含一个由 ONTAP 集群提供支持的 SVM 。</block>
  <block id="67a56d728807272d2a01df50c6548f4f" category="list-text">在每个 OpenShift 集群上配置的默认 StorageClass ，其中使用 Astra Trident 作为存储配置程序。</block>
  <block id="dda5c1363ac68168c83f72fc2645f51f" category="list-text">必须在每个 OpenShift 集群上安装和配置负载平衡器，以实现负载平衡并公开 OpenShift 服务。</block>
  <block id="7dbcc72cc3a693b8f89b064e38ed7a23" category="list-text">必须配置私有映像注册表以托管 NetApp Astra Control Center 映像。</block>
  <block id="537f97bbcef0e2e67d6840aa5845aa65" category="list-text">您必须对 NetApp ONTAP 集群具有管理员访问权限。</block>
  <block id="0507b40de1fbd59b7a77b9054689e92b" category="list-text">一个管理工作站，其中安装了 Docker 或 podman ， tridentctl 以及 oc 或 kubectl 工具，并将其添加到 $path 中。</block>
  <block id="8c7c70cb991e0295e289054b79308c5d" category="section-title">安装 Astra 控制中心</block>
  <block id="ccab5cf8842d06d8d4e2f7f778657c4b" category="list-text">打开 tar ball 的包装并将工作目录更改为生成的文件夹。</block>
  <block id="abe31bcfb59f2265c2fb97dde407366c" category="open-title">podman</block>
  <block id="e83d8437c3befea11906e730883605bf" category="list-text">将 ‘re名称为组织 / 命名空间 / 项目的注册表 FQDN 导出为环境变量 "gregistry" 。</block>
  <block id="9acf317cba8637e151b8daae04e3e998" category="list-text">登录到注册表。</block>
  <block id="326c4e96ff06709dede5c03038f00e78" category="list-text">使文件可执行</block>
  <block id="ed85c18933b4b240788294af279f8624" category="list-text">执行 shell 脚本。</block>
  <block id="05b6053c41a2130afd6fc3b158bda4e6" category="open-title">Docker</block>
  <block id="a27cc132b2f3001f3e9df9c40dad4bfb" category="list-text">运行以下命令创建运算符。</block>
  <block id="685fe82295261a8902e709081b6c9599" category="list-text">创建一个专用命名空间以安装所有 Astra 控制中心资源。</block>
  <block id="d689979a6af0f5660231db187d212950" category="list-text">在为其创建的命名空间中创建 Astra 控制中心 CRD 。</block>
  <block id="9904a774f242f31a5ae37c8f75bda92b" category="list-text">检查 `Acc-operator-controller-manager` 日志以确保安装已完成。</block>
  <block id="cc2ba6bb5620162b64bafdca9f089718" category="inline-image-macro">Astra 控制中心登录</block>
  <block id="9af9ac4a3dd2ab221c2c5e2bf2aaee2a" category="paragraph"><block ref="9af9ac4a3dd2ab221c2c5e2bf2aaee2a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="90fbead2d113af1a2680805778908d98" category="inline-image-macro">Astra 控制中心强制更改密码</block>
  <block id="247e9fd0170ec4d9550de59ebd54787b" category="paragraph"><block ref="247e9fd0170ec4d9550de59ebd54787b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0dd5915bd7ca0f5d34df18bf7a183d50" category="inline-image-macro">Astra 控制中心创建用户</block>
  <block id="0ea309ed2f56bdc52dd6184b9043e683" category="paragraph"><block ref="0ea309ed2f56bdc52dd6184b9043e683" category="inline-image-macro-rx" type="image"></block></block>
  <block id="54936e9fda3da1e56a25c0056f054bce" category="inline-image-macro">Astra Control Center 添加许可证</block>
  <block id="02fd0244de299d20dfbaf9113b883030" category="paragraph"><block ref="02fd0244de299d20dfbaf9113b883030" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2044ecf5033cd4a7b9530b83075af99e" category="admonition">如果您在安装或配置 NetApp Astra 控制中心时遇到问题，可以参考已知问题的知识库<block ref="d775d2705bd260971e4d33c3d1094402" category="inline-link-rx"></block>。</block>
  <block id="9204faa817ce36107d052d3cd7c886c7" category="inline-link-macro">接下来：向 NetApp 注册 Red Hat OpenShift 集群： Red Hat OpenShift 。</block>
  <block id="8d167505bef11e381036abf56e79f457" category="paragraph"><block ref="8d167505bef11e381036abf56e79f457" category="inline-link-macro-rx"></block></block>
  <block id="8b14fb34f5313442bf2fdc4d80edc389" category="summary">本节专门介绍要使用 NetApp 自定义 Red Hat OpenShift 部署的用户的负载平衡器选项。</block>
  <block id="87beaa6eff6159cd7270b2a4e71c10a4" category="doc">了解负载平衡器选项： Red Hat OpenShift 与 NetApp</block>
  <block id="0aa971b4d33bdc82c500a35166e588c8" category="paragraph">但是，在某些情况下，应用程序需要部署和配置自定义负载平衡器才能公开相应的服务。其中一个示例是 NetApp Astra 控制中心。为了满足这一需求，我们评估了许多自定义负载平衡器选项。本节将介绍其安装和配置。</block>
  <block id="6914d9014ff3e2cb99cabff26b55a0bc" category="paragraph">以下页面提供了有关负载平衡器选项的追加信息，这些选项已在 Red Hat OpenShift with NetApp 解决方案中进行验证：</block>
  <block id="2b545f7c547a71eaeda9dcb451aea0c5" category="inline-link-macro">元 LB</block>
  <block id="eaefba36e93c0d0177c3de1143bd08dd" category="list-text"><block ref="eaefba36e93c0d0177c3de1143bd08dd" category="inline-link-macro-rx"></block></block>
  <block id="16dcf1808fc3c9a6f8342f97305d2ad6" category="doc">保护您的应用程序</block>
  <block id="58c0d00b6ee4c263f1fbe431b41eebf4" category="paragraph">在由 Astra 控制中心管理应用程序工作负载之后，您可以为这些工作负载配置保护设置。</block>
  <block id="59af79c7ab060b4cca322301a4729f0c" category="section-title">创建应用程序快照</block>
  <block id="c0cf3c0162d106c6ee24b7afa9b79575" category="paragraph">应用程序的快照会创建一个 ONTAP Snapshot 副本，该副本可用于根据该 Snapshot 副本将应用程序还原或克隆到特定时间点。</block>
  <block id="9101281f33d55e682b1a47a44251fa0e" category="list-text">要为应用程序创建快照，请导航到 "Apps" &gt; "Managed " 选项卡，然后单击要为其创建 Snapshot 副本的应用程序。单击应用程序名称旁边的下拉菜单，然后单击 Snapshot 。</block>
  <block id="c01290a8a623e36f9bcae85b910a3410" category="inline-image-macro">Astra 控制中心快照按钮</block>
  <block id="22434659793c78f48c7d1c7b4737d3e6" category="paragraph"><block ref="22434659793c78f48c7d1c7b4737d3e6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c5cb0ac31cda5107720fe3d594334e47" category="list-text">输入快照详细信息，单击 Review ，然后单击 Snapshot 。创建快照大约需要一分钟，在成功创建快照后，状态将变为可用。</block>
  <block id="f40e241f10f15eb6887acbc81fec81b0" category="inline-image-macro">Astra 控制中心创建快照</block>
  <block id="9e3f10f093546e36308573917ec43329" category="paragraph"><block ref="9e3f10f093546e36308573917ec43329" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1853746a915bea325b8b576237c24427" category="section-title">创建应用程序备份</block>
  <block id="91796648d42dbd448c6cbb2044cb92ba" category="paragraph">应用程序的备份可捕获应用程序的活动状态及其资源的配置，将其覆盖到文件中，并将其存储在远程对象存储分段中。</block>
  <block id="72e328bb06195897c7a644970c61d3a2" category="paragraph">要在 Astra 控制中心备份和还原受管应用程序，必须先为支持的 ONTAP 系统配置超级用户设置。为此，请输入以下命令。</block>
  <block id="6db82a24b17137378420e9fc7961d961" category="list-text">要在 Astra 控制中心创建受管应用程序的备份，请导航到应用程序 &gt; 受管选项卡，然后单击要备份的应用程序。单击应用程序名称旁边的下拉菜单，然后单击备份。</block>
  <block id="bc230776554b8a63af328cf9f01124e1" category="inline-image-macro">Astra 控制中心备份按钮</block>
  <block id="61b27a816b60763bb526e19339074f61" category="paragraph"><block ref="61b27a816b60763bb526e19339074f61" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dfade2835046a4412806486584077a75" category="list-text">输入备份详细信息，选择用于保存备份文件的对象存储分段，单击查看，然后在查看详细信息后，单击备份。根据应用程序和数据的大小，备份可能需要几分钟的时间，备份成功完成后，备份状态将变为可用。</block>
  <block id="e10781941ccd98298d2856b437b3fb4b" category="inline-image-macro">Astra 控制中心创建备份</block>
  <block id="b79feabe45fa973dbfc3b196e9a0b7ad" category="paragraph"><block ref="b79feabe45fa973dbfc3b196e9a0b7ad" category="inline-image-macro-rx" type="image"></block></block>
  <block id="39c5ec1870f7031498c4fa4634f5ca0a" category="section-title">还原或克隆应用程序</block>
  <block id="2939764b1667f58cd22dc123966f5634" category="paragraph">只需按一个按钮，即可将应用程序还原到发起集群或将其克隆到远程集群，以用于开发 / 测试或应用程序保护和灾难恢复。</block>
  <block id="2c2697937c7f0c07693378f58d4110c3" category="list-text">要还原或克隆应用程序，请导航到应用程序 &gt; 受管选项卡，然后单击相关应用程序。单击应用程序名称旁边的下拉菜单，然后单击克隆。</block>
  <block id="92955527b375720b2a586155a776c0ac" category="inline-image-macro">Astra Control Center 克隆按钮</block>
  <block id="4d69833fef921717aba648acb1677c81" category="paragraph"><block ref="4d69833fef921717aba648acb1677c81" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3055b7009a82841904eb36fa27fb7b31" category="list-text">输入新命名空间的详细信息，选择要将其还原或克隆到的集群，然后选择是要从现有快照还是从应用程序当前状态的备份还原或克隆此命名空间。查看详细信息后，单击 Review ，然后单击 Clone 。</block>
  <block id="c4293ef1955d52694e7d2288b637df1a" category="inline-image-macro">Astra 控制中心还原</block>
  <block id="9ad1cd254dba2b1c13c810078d947a3e" category="paragraph"><block ref="9ad1cd254dba2b1c13c810078d947a3e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c501040965cb5ca97cc675347e9ebfdf" category="list-text">当 Astra 控制中心在选定集群上创建应用程序时，新应用程序将进入 " 正在发现 " 状态。在 Astra 安装并检测到应用程序的所有资源后，该应用程序将进入可用状态。</block>
  <block id="9ff3c5458e4a8facc6e7c25656a3baf7" category="inline-image-macro">发现 Astra Control Center 新应用程序</block>
  <block id="32fc08fbd285649fbc9f888756113f95" category="paragraph"><block ref="32fc08fbd285649fbc9f888756113f95" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d19de154f02438c6d6918a4e016c7c62" category="doc">选择要保护的应用程序</block>
  <block id="501195b19cb60bfec4c2e4899a2a460c" category="paragraph">注册 Red Hat OpenShift 集群后，您可以通过 Astra 控制中心发现已部署的应用程序并对其进行管理。</block>
  <block id="a022d74e2b8b62dd9f1caa37a51aa3f3" category="section-title">管理应用程序</block>
  <block id="d8c780951f3271e7d72b116e5f41d46b" category="list-text">在将 OpenShift 集群和 ONTAP 后端注册到 Astra 控制中心后，控制中心将自动开始发现所有命名空间中使用使用使用指定 ONTAP 后端配置的 storageclass 的应用程序。</block>
  <block id="3b5963749d054f288f27dfb2f20d0370" category="inline-image-macro">发现 Astra 控制中心应用程序</block>
  <block id="a78e618a70881e5c5dda311aaa61c250" category="paragraph"><block ref="a78e618a70881e5c5dda311aaa61c250" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0c46442de8c982973aeee99a9441b746" category="list-text">导航到应用程序 &gt; 已发现，然后单击要使用 Astra 管理的应用程序旁边的下拉菜单。然后单击管理。</block>
  <block id="22d84cdf10d4c1059d68b1ab7da5b375" category="inline-image-macro">Astra 控制中心管理应用程序</block>
  <block id="4afca1ab36db499d54b08ff38dff8a5c" category="paragraph"><block ref="4afca1ab36db499d54b08ff38dff8a5c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2d694cfe5907a4790ea939388a8cfd25" category="list-text">此应用程序将进入可用状态，并可在 "Apps" 部分的 "Managed " 选项卡下查看。</block>
  <block id="dc496d6799e0c6ab3bdfdbdc6a086b48" category="inline-image-macro">提供 Astra 控制中心应用程序</block>
  <block id="872adedc4ac847cec0aa8fb9299d32e5" category="paragraph"><block ref="872adedc4ac847cec0aa8fb9299d32e5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="472d13eb415cd6107aeef3a1ae6cd705" category="summary">NetApp 提供了许多产品，可帮助客户在基于容器的环境中编排和管理持久数据，例如 Red Hat OpenShift 。</block>
  <block id="ebfc0e639726a366f8eb5ac86bb7cc43" category="paragraph"><block ref="ebfc0e639726a366f8eb5ac86bb7cc43" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cd351007d4a671a321b6881f730d0dc3" category="paragraph">以下页面介绍了有关已在 Red Hat OpenShift with NetApp 解决方案中针对应用程序和永久性存储管理进行验证的 NetApp 产品的追加信息：</block>
  <block id="77665e15c3691d78f1b4eebb6fff579a" category="list-text"><block ref="77665e15c3691d78f1b4eebb6fff579a" category="inline-link-macro-rx"></block></block>
  <block id="19ebd5ffa30d784aa0f379af66f810e9" category="list-text"><block ref="19ebd5ffa30d784aa0f379af66f810e9" category="inline-link-macro-rx"></block></block>
  <block id="afa49872fb8ae001174e4c8f2cc47208" category="inline-link-macro">接下来： NetApp Astra 控制中心概述</block>
  <block id="22fd530ae76b4bbe50669b9a4d5b72d7" category="paragraph"><block ref="22fd530ae76b4bbe50669b9a4d5b72d7" category="inline-link-macro-rx"></block></block>
  <block id="810a039d1a8524388b75a0fe8d837afc" category="summary">要使 Astra 控制中心能够管理您的工作负载，您必须先注册 Red Hat OpenShift 集群。</block>
  <block id="3557f7a93216446476c40d54e0426c40" category="doc">将 Red Hat OpenShift 集群注册到 Astra 控制中心</block>
  <block id="349c99fe6f384da92e5b8289b828791c" category="section-title">注册 Red Hat OpenShift 集群</block>
  <block id="c179429ab818c9d0cca3d1db55f788bf" category="list-text">第一步是将 OpenShift 集群添加到 Astra 控制中心并对其进行管理。转至集群并单击添加集群，上传 OpenShift 集群的 kubeconfig 文件，然后单击选择存储。</block>
  <block id="8dfc7d6b819f8c17b51391e3b3159add" category="inline-image-macro">Astra 控制中心创建集群</block>
  <block id="7470624615914e8e3d5fdf4ea1aa31de" category="paragraph"><block ref="7470624615914e8e3d5fdf4ea1aa31de" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c7d9a690231a2d896f69e9b45c9ff4a1" category="admonition">可以生成 kubeconfig 文件，以便使用用户名和密码或令牌进行身份验证。令牌将在一段有限的时间后过期，并且可能会使注册的集群无法访问。NetApp 建议使用具有用户名和密码的 kubeconfig 文件将 OpenShift 集群注册到 Astra 控制中心。</block>
  <block id="cab7d2cb072914c0a5a89baab41d38e8" category="inline-image-macro">Astra 控制中心创建集群选择存储</block>
  <block id="68ac91074dd3b4e5514e5f56a6c9c756" category="paragraph"><block ref="68ac91074dd3b4e5514e5f56a6c9c756" category="inline-image-macro-rx" type="image"></block></block>
  <block id="420b9c40f78cc4825914319af51801b9" category="inline-image-macro">提供 Astra 控制中心集群</block>
  <block id="1b017a62213661e1ed3c5c581fcf74a2" category="paragraph"><block ref="1b017a62213661e1ed3c5c581fcf74a2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8d01de34ef9b9b934d18009a1e3273a9" category="list-text">将 ONTAP 集群作为存储资源导入，以便由 Astra 控制中心作为后端进行管理。将 OpenShift 集群添加到 Astra 并配置了 storageclass 后，它会自动发现并检查支持该 storageclass 的 ONTAP 集群，但不会将其导入到要管理的 Astra 控制中心中。</block>
  <block id="781ffd1df517a65b302412f53de974da" category="inline-image-macro">Astra 控制中心后端发现</block>
  <block id="1fcc7977dffdc8fd8fc53582c67da895" category="paragraph"><block ref="1fcc7977dffdc8fd8fc53582c67da895" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4da0c23c38cf0da34e1e6660ff74542b" category="inline-image-macro">Astra 控制中心创建后端</block>
  <block id="69dbaffc2661024ee0b5095bc3674f60" category="paragraph"><block ref="69dbaffc2661024ee0b5095bc3674f60" category="inline-image-macro-rx" type="image"></block></block>
  <block id="edb4425c04926a17b6ff9a4a2ecdc669" category="list-text">添加后端后，状态将更改为 Available 。现在，这些后端可提供有关 OpenShift 集群中的永久性卷以及 ONTAP 系统上的相应卷的信息。</block>
  <block id="92c130f9be24925c7dee36f7580ea347" category="inline-image-macro">提供 Astra 控制中心后端</block>
  <block id="e9f487b0aad6779edbf50c6092477bd5" category="paragraph"><block ref="e9f487b0aad6779edbf50c6092477bd5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f2d10d92dc9d83e3cf3514e8e883e5cb" category="list-text">要使用 Astra 控制中心在 OpenShift 集群之间进行备份和还原，您必须配置支持 S3 协议的对象存储分段。目前支持的选项包括 ONTAP S3 ， StorageGRID 和 AWS S3 。为此，我们将配置一个 AWS S3 存储分段。转到 " 分段 " ，单击 " 添加分段 " ，然后选择 " 通用 S3" 。输入有关 S3 存储分段和凭据的详细信息以访问它，单击复选框 " 将此存储分段设置为云的默认存储分段 " ，然后单击添加。</block>
  <block id="6910cb9051734be0129cb1e7dd84ce5c" category="inline-image-macro">Astra 控制中心创建存储分段</block>
  <block id="2786d0b632389f7cbd6c4e67fba0061f" category="paragraph"><block ref="2786d0b632389f7cbd6c4e67fba0061f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2ed5156911e542a4d3d64a6e160f6446" category="image-alt">Red Hat OpenShift 集群上的多租户，采用由 NetApp ONTAP 提供支持的 Astra Trident</block>
  <block id="086e6c16e3fe8e13c336612ef636aa02" category="list-text">Astra Trident</block>
  <block id="bf4e72937ad57bd2f780561c81d25d53" category="paragraph">在由 NetApp ONTAP 提供支持的 Astra Trident 的协助下， OpenShift 虚拟化还支持某些功能，例如实时 VM 迁移， VM 磁盘克隆， VM 快照等。这些工作流的示例将在本文档后面的相应章节中进行讨论。</block>
  <block id="d55adbfc40b7bcdb0606eb0bd4d88cae" category="summary">本节专门介绍如何创建和配置由 Astra Trident 提供的永久性存储提供支持的私有映像注册表。</block>
  <block id="9c864113b9e4202e111b818a53d4f506" category="inline-link">Quay.io</block>
  <block id="4b4141875f954447d204e6f73d93e2a0" category="inline-link">DockerHub</block>
  <block id="508888fd9f92f35e5edd97bd8083e289" category="paragraph">对于大多数 Red Hat OpenShift 部署，请使用等公有注册表<block ref="b9eeebbe4a68a648d570ea2173e5ef99" category="inline-link-rx"></block> 或<block ref="0252a6b70cc5017fa1445a78532155b6" category="inline-link-rx"></block> 满足大多数客户的需求。但是，有时客户可能希望托管自己的私有或自定义映像。</block>
  <block id="00a3f196d7f27a1f41f5d6a7f48759d0" category="paragraph">本操作步骤介绍了如何创建私有映像注册表，该注册表由 Astra Trident 和 NetApp ONTAP 提供的永久性卷提供支持。</block>
  <block id="d9d5e29b1b83dd9c215f5ea158ca2475" category="admonition">Astra 控制中心需要注册表来托管 Astra 容器所需的映像。以下部分介绍了在 Red Hat OpenShift 集群上设置专用注册表以及推送支持安装 Astra 控制中心所需的映像的步骤。</block>
  <block id="86e93d266c168d718105c402f43fc91e" category="list-text">然后，可以将此提取密钥修补到服务帐户或在相应的 POD 定义中引用。</block>
  <block id="18f8bf05a7a278e63d921de74d2a5966" category="list-text">将 TLS 证书添加到 Docker 客户端。</block>
  <block id="fe70522102670f75ed2fff361701d056" category="paragraph">本参考文档对通过安装程序配置的基础架构（ IPI ）在 NetApp 验证的多种不同数据中心环境中部署的 Red Hat OpenShift 解决方案进行了部署验证。同时，还详细介绍了如何利用 Astra Trident 存储编排程序管理永久性存储，以及利用 NetApp Astra 控制中心管理和保护有状态应用程序，从而实现与 NetApp 存储系统的存储集成。最后，我们还探讨并记录了许多解决方案验证和实际使用情形。</block>
  <block id="4a56de086437c8a56c22bccd4e7ed9ba" category="paragraph">通过支持 Astra Trident 的卷 CSI 克隆功能，可以在 OpenShift 中克隆现有虚拟机。通过 CSI 卷克隆，可以使用现有 PVC 作为数据源并通过复制其 PV 来创建新的 PVC 。创建新的 PVC 后，它将作为一个单独的实体运行，并且不会与源 PVC 建立任何链接或依赖关系。</block>
  <block id="9057e692817874e4c563dec1fa8c1700" category="paragraph">通过关闭虚拟机克隆现有虚拟机是一项原生 OpenShift 功能，该功能在 Astra Trident 的支持下实施。要克隆虚拟机，请完成以下步骤。</block>
  <block id="306a916d056a0d0a4b898b9dca9692ee" category="inline-link-macro">基于 Red Hat OpenShift 的 NetApp Astra 控制中心</block>
  <block id="20c49a9a4d903fa259d4f8820b3755d2" category="cell"><block ref="20c49a9a4d903fa259d4f8820b3755d2" category="inline-link-macro-rx"></block></block>
  <block id="82ebdc178ed6bd9adb7b66c2edfb70d0" category="sidebar">NetApp 存储系统概述</block>
  <block id="aef2d8db139dd41c9ae6c878ab92ae75" category="sidebar">NetApp 存储集成概述</block>
  <block id="5f6fc3deb668cb75e9e6c8932620df6a" category="sidebar">NetApp Astra 控制中心概述</block>
  <block id="846665f4ec19bffa9d9a8c3937c2f9fd" category="sidebar">注册 Red Hat OpenShift 集群</block>
  <block id="b1dbcb80c89b000949ef64c6d6d6c42b" category="sidebar">选择要保护的应用程序</block>
  <block id="2913361a2ab3fddb4242f1761d4a6e38" category="sidebar">保护您的应用程序</block>
  <block id="b066abadb76f5e6776aa1e7cfdf56b38" category="sidebar">NetApp Astra Trident 概述</block>
  <block id="938033783443233af5517c828deb6d1e" category="sidebar">OpenShift 的高级配置选项</block>
  <block id="8252479af4b1df9b77ceaf67fa8cd07d" category="sidebar">创建私有映像注册表</block>
  <block id="e9c44bbfd795a5d63d74c6a77afee70d" category="summary">法律声明提供对版权声明、商标、专利等的访问。</block>
  <block id="30d965eef5ba25c6b9998ae38270b43e" category="doc">法律声明</block>
  <block id="6016a2b341113bf496b719905398ecd2" category="section-title">版权</block>
  <block id="09e95b77ffe81fe465a83ba99efad5c8" category="paragraph"><block ref="09e95b77ffe81fe465a83ba99efad5c8" category="inline-link-rx"></block></block>
  <block id="126a02652da6de02962cf1b654fd6376" category="section-title">商标</block>
  <block id="c4ce4761e466527d26b3e3d5ed1006fd" category="paragraph">NetApp 、 NetApp 徽标和 NetApp 商标页面上列出的标记是 NetApp 、 Inc. 的商标。其他公司和产品名称可能是其各自所有者的商标。</block>
  <block id="7aa531e9acfe2b98e34d2c92fe9846ff" category="paragraph"><block ref="7aa531e9acfe2b98e34d2c92fe9846ff" category="inline-link-rx"></block></block>
  <block id="be89498d2f8a22ce47c02ba9795fe2af" category="section-title">专利</block>
  <block id="d0b19d36be2c5f16e9aef46c8a452d3d" category="paragraph">有关 NetApp 拥有的专利的最新列表，请访问：</block>
  <block id="d7f1fbcf9ce4e42f705add574d262b2c" category="paragraph"><block ref="d7f1fbcf9ce4e42f705add574d262b2c" category="inline-link-rx"></block></block>
  <block id="56c34c6410dd45c5cec44149ad0ce037" category="section-title">隐私政策</block>
  <block id="fc248f74f5e36542f7f5627b8610e9a3" category="paragraph"><block ref="fc248f74f5e36542f7f5627b8610e9a3" category="inline-link-rx"></block></block>
  <block id="c0227cef6f07a8cd2ac72f2945b031aa" category="section-title">开放源代码</block>
  <block id="9b73989307c1975dfa4d5e1581e4afe8" category="paragraph">通知文件提供有关 NetApp 软件中使用的第三方版权和许可证的信息。</block>
  <block id="d648f2a68a54fd1b3329efc3cf24d29c" category="sidebar">法律声明</block>
  <block id="5328ed3b5c6e4726166e04c16c2e5581" category="summary">本节介绍如何在熊猫中加载 Criteo Click Logs Day 15 以及如何训练一个 sc科学 学习随机林模型。在此示例中，我们使用 dask cuDF 执行了 DataFrame 加载，并在 dask cuML 中训练了一个随机林模型。</block>
  <block id="a0432b74d7d4d2ad68e93e947654c865" category="doc">在 dask 中加载第 15 天，训练一个 dask cuML 随机林模型</block>
  <block id="7c784438423fe1bee9ab4f91a8fd7559" category="inline-link-macro">Previous ： Load Criteo click Logs Day 15 in 熊猫并训练一个 sc科学 学习随机林模型。</block>
  <block id="5d5b75a952d74a7d4520c521956b9d7e" category="paragraph"><block ref="5d5b75a952d74a7d4520c521956b9d7e" category="inline-link-macro-rx"></block></block>
  <block id="78dc33cd9d496e2466a0c1e2ba09ab3f" category="inline-link-macro">" 培训时间比较。 "</block>
  <block id="4a2764258721dd882c9ec28454963797" category="paragraph">按照与上一节类似的方式，在熊猫中加载 Criteo 单击 Logs Day 15 ，然后训练一个 cscit-Learn 随机林模型。在此示例中，我们使用 dask cuDF 执行了 DataFrame 加载，并在 dask cuML 中训练了一个随机林模型。我们比较了本节中培训时间和规模的差异 <block ref="8d6c01ed5b9db5301efeb6183c858b76" category="inline-link-macro-rx"></block></block>
  <block id="356d8553da3749641cb731d318c85b0c" category="section-title">Criteo_dask_rf.ipynb</block>
  <block id="2f4f1a139be92d2b17647025ff8630ab" category="paragraph">此笔记本电脑将导入 `NumPy` ， `累积` 和必要的 `dask` 库，如以下示例所示：</block>
  <block id="7b871613dade772ae668d694698383bf" category="paragraph">启动 dask 客户端（）。</block>
  <block id="3e9277d3d0f0519292426b933e52f232" category="paragraph">如果集群配置正确，您可以查看工作节点的状态。</block>
  <block id="d6b257c355ced1525e4967c96b62b83e" category="paragraph">在我们的 AKS 集群中，将显示以下状态：</block>
  <block id="d94a77691c281e8bf418635fea6ca580" category="paragraph"><block ref="d94a77691c281e8bf418635fea6ca580" category="inline-image-macro-rx" type="image"></block></block>
  <block id="073b2194006d8da73b5f74f3d7224d76" category="paragraph">请注意， dask 采用了延迟执行模式： dask 不是即时执行处理代码，而是构建定向的环状图（ DAG ）执行。DAG 包含一组任务及其互动，每位员工都需要执行这些任务。此布局意味着，只有在用户指示 dask 以某种方式执行任务后，这些任务才会运行。使用 dask ，您有三个主要选项：</block>
  <block id="a40049c3d7270ce955d2023f8e2015dc" category="list-text">在 DataFrame 上调用 compute （）。 * 此调用将处理所有分区，然后将结果返回给计划程序，以便最终聚合和转换为 cuDF DataFrame 。除非计划程序节点内存不足，否则应谨慎使用此选项，并且仅在结果大幅减少时使用。</block>
  <block id="30e170dbe1dd223491e1a822605da52d" category="list-text">* 在 DataFrame 上调用 persiste（ ）。 * 此调用执行图形，但它不会将结果返回到计划程序节点，而是在整个集群的内存中保留这些结果，以便用户可以在管道中重复使用这些中间结果，而无需重新运行相同的处理。</block>
  <block id="ca013764f3f6faeab137d2d529dba598" category="list-text">* 在 DataFrame 上调用 head （）。 * 与 cuDF 一样，此调用会将 10 条记录返回到计划程序节点。此选项可用于快速检查 DataFrame 是否包含所需的输出格式，或者记录本身是否合理，具体取决于您的处理和计算结果。</block>
  <block id="7ac60f98a199ceae63010c7802a9aefa" category="paragraph">因此，除非用户调用其中任一操作，否则员工将处于闲置状态，等待计划程序启动处理。这种延迟执行模式在现代并行和分布式计算框架（如 Apache Spark ）中很常见。</block>
  <block id="d887d6a29f39f14cec0f83c5b02c42f8" category="paragraph">下一段使用 dask cuML 进行分布式 GPU 加速计算，以此训练随机林模型，并计算模型预测准确性。</block>
  <block id="de76ff3258bd3001f89804efae30da38" category="inline-link-macro">下一步：使用原生任务流信息板监控 dask 。</block>
  <block id="5db30f2a693de098d03dec622875beec" category="paragraph"><block ref="5db30f2a693de098d03dec622875beec" category="inline-link-macro-rx"></block></block>
  <block id="2e240897109c5037e05afe0bf035d177" category="inline-link-macro">上一篇：结论。</block>
  <block id="d3202b7eec66185e032fcad76b4c2aa3" category="paragraph"><block ref="d3202b7eec66185e032fcad76b4c2aa3" category="inline-link-macro-rx"></block></block>
  <block id="27a5a0a02525fbb66788e119b829fe28" category="list-text">Azure NetApp Files</block>
  <block id="45bd81d391ee3bd9831a237bff32b2c1" category="list-text">Azure NetApp Files 的解决方案架构页面</block>
  <block id="57b815cb2da0c842a09d5ef586792c0a" category="inline-link"><block ref="57b815cb2da0c842a09d5ef586792c0a" category="inline-link-rx"></block></block>
  <block id="02508d077a7c6fbe1035568c37610d22" category="paragraph"><block ref="02508d077a7c6fbe1035568c37610d22" category="inline-link-rx"></block></block>
  <block id="f42fced7b7a9bfef49a209632add6f80" category="list-text">适用于容器的 Trident 持久存储：</block>
  <block id="158e66cfa121c58b072656402170ca60" category="list-text">Azure NetApp Files 和 Trident</block>
  <block id="d9fe72ef646d82c8372b45ff009726a2" category="inline-link"><block ref="d9fe72ef646d82c8372b45ff009726a2" category="inline-link-rx"></block></block>
  <block id="e3c781df174a80c19c70a938b96db93a" category="paragraph"><block ref="e3c781df174a80c19c70a938b96db93a" category="inline-link-rx"></block></block>
  <block id="145f2a04d99fdbd7a450ef83e82d471b" category="list-text">dask 和 rapids ：</block>
  <block id="df5eb1591e808e358e02221e1e0111e6" category="list-text">dask</block>
  <block id="7db6639777894f081a3d7c055b97900a" category="inline-link"><block ref="7db6639777894f081a3d7c055b97900a" category="inline-link-rx"></block></block>
  <block id="4846c68fb34aec3b1b7b7de96d27e71f" category="paragraph"><block ref="4846c68fb34aec3b1b7b7de96d27e71f" category="inline-link-rx"></block></block>
  <block id="41563f9620e92fbfd1e105e32ac297e4" category="list-text">安装 dask</block>
  <block id="8659b02378fc9b47aac4428f69411abc" category="inline-link"><block ref="8659b02378fc9b47aac4428f69411abc" category="inline-link-rx"></block></block>
  <block id="972dffc891589785367dd3581a5abcef" category="paragraph"><block ref="972dffc891589785367dd3581a5abcef" category="inline-link-rx"></block></block>
  <block id="3ba7abeba4fd0f5d5ca9072155319afd" category="list-text">Dask API</block>
  <block id="f7673aa4f6b36ba9952cef7c98115776" category="inline-link"><block ref="f7673aa4f6b36ba9952cef7c98115776" category="inline-link-rx"></block></block>
  <block id="d43a23bd530cae7ba37a2e0ed6513bad" category="paragraph"><block ref="d43a23bd530cae7ba37a2e0ed6513bad" category="inline-link-rx"></block></block>
  <block id="1bfabf7fb7bf05567331dfc3d20c4921" category="list-text">DASK 机器学习</block>
  <block id="9e480c1539fe5b14bbbcefb9676dc031" category="inline-link"><block ref="9e480c1539fe5b14bbbcefb9676dc031" category="inline-link-rx"></block></block>
  <block id="d05f63d77306100c615132f350f3fafe" category="paragraph"><block ref="d05f63d77306100c615132f350f3fafe" category="inline-link-rx"></block></block>
  <block id="90223e93e145939c9954970520e1767a" category="list-text">Dask 分布式诊断</block>
  <block id="e7252fe9d67234e05be7dc251c48cf74" category="inline-link"><block ref="e7252fe9d67234e05be7dc251c48cf74" category="inline-link-rx"></block></block>
  <block id="925c8b588cf5ae5fc486494a21fba8ac" category="paragraph"><block ref="925c8b588cf5ae5fc486494a21fba8ac" category="inline-link-rx"></block></block>
  <block id="d97adf46c9b097cad5eff54e3b65a21f" category="paragraph"><block ref="d97adf46c9b097cad5eff54e3b65a21f" category="inline-link-rx"></block></block>
  <block id="528d52adf23d34a248f0b9bf684c1832" category="paragraph"><block ref="528d52adf23d34a248f0b9bf684c1832" category="inline-link-rx"></block></block>
  <block id="a43c7ca8f7e6a4a034f6a940ec7566f5" category="inline-link-macro">下一步：版本历史记录。</block>
  <block id="5f751f93279ebf35ea83b9aa80ef02df" category="paragraph"><block ref="5f751f93279ebf35ea83b9aa80ef02df" category="inline-link-macro-rx"></block></block>
  <block id="7580f940c2b73a449943bf14cfdb743e" category="summary">此页面介绍了 Azure NetApp Files 云资源的配置。</block>
  <block id="9ab9ef31301ca94d2090a6ac7e5141f0" category="doc">云资源要求</block>
  <block id="1cee510209f529b7ddd8911bbc6e3ee2" category="inline-link-macro">先前版本：软件要求。</block>
  <block id="abab2b04b3822b72d0eeb7b61dd84730" category="paragraph"><block ref="abab2b04b3822b72d0eeb7b61dd84730" category="inline-link-macro-rx"></block></block>
  <block id="00130c4c20e30be7264c0ff0d085261b" category="section-title">配置 Azure NetApp Files</block>
  <block id="d696f60435e09b1c41d1db77b458999b" category="inline-link">快速入门：设置 Azure NetApp Files 并创建 NFS 卷</block>
  <block id="b955f251da04c8c868b22cbe7663a4f5" category="paragraph">按照中所述配置 Azure NetApp Files<block ref="f8525997ced72f3cfd70e1aecf287af9" category="inline-link-rx"></block>。</block>
  <block id="4ee734214d7dd4e522f2aab3d8e3d349" category="paragraph">您可以继续阅读 " 为 Azure NetApp Files 创建 NFS 卷 " 一节，因为您要通过 Trident 创建卷。在继续之前，请完成以下步骤：</block>
  <block id="2a304a1348456ccd2234cd71a81bd338" category="inline-link">链接。</block>
  <block id="b1d13ce152415787185b9f596f9635e1" category="list-text">注册 Azure NetApp Files 和 NetApp 资源提供商（通过 Azure Shell ）（<block ref="7a85c4f09a460b2978e2b516b5474576" category="inline-link-rx"></block>）。</block>
  <block id="4c21364a09ae3c9dab758e383fcae62d" category="list-text">在 Azure NetApp Files 中创建帐户（<block ref="27e1abf4e17aeb1c0d418f5fee2f2b5f" category="inline-link-rx"></block>）。</block>
  <block id="97f203356061531d1acaf022df0d4c3c" category="list-text">设置容量池（至少 4 TB 标准版或高级版，具体取决于您的需要）（<block ref="16f1daa909eef5f1fe1f552d6b28d086" category="inline-link-rx"></block>）。下表列出了在云中设置的网络配置要求。dask 集群和 Azure NetApp Files 必须位于同一个 Azure 虚拟网络（ vNet ）或对等 vNet 中。</block>
  <block id="ddcf50c29294d4414f3f7c1bbc892cb5" category="cell">Resources</block>
  <block id="3e19b1ddc4033d0c6c439dad720f730d" category="cell">类型 / 版本</block>
  <block id="21b6b0c072968b7235d21d8ec72be5dc" category="cell">代理节点</block>
  <block id="e5262abb96ddec17ecbca3557e70ea26" category="cell">3 个 Standard_DS2_v2</block>
  <block id="c64f4eaffc33134095fd3105b3d63832" category="cell">GPU 节点</block>
  <block id="11fed615c3da90add7abe544e965fa14" category="cell">3 个 Standard_NC6s_v3</block>
  <block id="238f4027146f2469c7d1209e594471e4" category="cell">标准容量池</block>
  <block id="9163995275052e5abd777ae389b15dfd" category="cell">容量（以 TB 为单位）</block>
  <block id="a6a0cae93cb8ecdef629c6de5f05989c" category="inline-link-macro">下一步：点击速率预测用例摘要。</block>
  <block id="a5efee0d52d97830d344cded6ac0bf5c" category="paragraph"><block ref="a5efee0d52d97830d344cded6ac0bf5c" category="inline-link-macro-rx"></block></block>
  <block id="53ffd6a9e0049c8cbf7f940c2b8bc793" category="inline-link-macro">先前版本：使用 NetApp DataOps 工具包的数据集和型号版本控制。</block>
  <block id="01643859d7e5dff013d2acd6a02af35e" category="paragraph"><block ref="01643859d7e5dff013d2acd6a02af35e" category="inline-link-macro-rx"></block></block>
  <block id="eee817389517c17ec810d52f22a8222d" category="paragraph"><block ref="eee817389517c17ec810d52f22a8222d" category="inline-link-macro-rx"></block></block>
  <block id="4b022a47bb6a38cb1b05a5cbec618ccd" category="inline-link-macro">先前版本：对等 AKS vNet 和 Azure NetApp Files vNet 。</block>
  <block id="fec5fee1adce318e5e2f9ce6a66ccc02" category="paragraph"><block ref="fec5fee1adce318e5e2f9ce6a66ccc02" category="inline-link-macro-rx"></block></block>
  <block id="999aa3cd55c654beafcfa7653b65d339" category="paragraph">要使用 Helm 安装 Trident ，请完成以下步骤：</block>
  <block id="36cd38f49b9afa08222c0dc9ebfe35eb" category="inline-link">source</block>
  <block id="9c5f8711af47a869d4ef82db9e55eda5" category="list-text">安装 Helm （有关安装说明，请访问<block ref="adf15389dc6d5fe4bd9024075437080f" category="inline-link-rx"></block>）。</block>
  <block id="f7c078ec85c617d77dfa95c309e4df1b" category="list-text">下载并解压缩 Trident 20.01.1 安装程序。</block>
  <block id="5729bb69ffc852a2e2757d743b7cb833" category="list-text">将 `tridentctl` 复制到系统中的目录 ` $path` 。</block>
  <block id="d7fc4d1537e4623fdcebe9b8ba333cbb" category="list-text">使用 Helm （<block ref="cbc920955683fc4acb62f9ea7099333f" category="inline-link-rx"></block>）：</block>
  <block id="f515d7de4d597c284ba8042f699a0eab" category="list-text">将目录更改为 `helm` 目录。</block>
  <block id="6ee4094e2c3617e3e298ec79f9dc2898" category="list-text">检查 Trident Pod 的状态。</block>
  <block id="30f93734da9765d3bc7d49ca89932736" category="paragraph">如果所有 Pod 均已启动且正在运行，则会安装 Trident ，您可以继续操作。</block>
  <block id="cde865911fa15995bc83db30d852300b" category="list-text">为 AKS 设置 Azure NetApp Files 后端和存储类。</block>
  <block id="476fdb61358f28988640245a33bd9199" category="list-text">创建 Azure 服务原则。</block>
  <block id="5cdfb88cd634d9d0eb47237e3251d4bd" category="paragraph">服务主体是 Trident 如何与 Azure 通信以操作 Azure NetApp Files 资源。</block>
  <block id="253a9ccb0f0696ed79c174b388867829" category="list-text">创建 Trident 后端 json 文件，示例名称 `anf-backend.json` 。</block>
  <block id="c17b83e07524acc467ac01e42fa0ebdb" category="list-text">使用首选文本编辑器，完成 `anf-backend.json` 文件中的以下字段：</block>
  <block id="1197f8dc56b70115d87008dd2ecd3fca" category="list-text">替换以下字段：</block>
  <block id="b0b2134849d44712e969d6872e7245e5" category="list-text">`ssubscriptionID` 。您的 Azure 订阅 ID</block>
  <block id="7b42dbe86adeab0d66f36221b33bb0f4" category="list-text">`租户 ID` 。上一步中 `az ad sp` 输出中的 Azure 租户 ID 。</block>
  <block id="5a8bb8e509b4a424a1df50ef0bb41d89" category="list-text">`客户端 ID` 。上一步中 `az ad sp` 输出中的 appID 。</block>
  <block id="6334b606a5807346a083767eaab3934f" category="list-text">`clientSecret` 。上一步中 `az ad sp` 输出中的密码。</block>
  <block id="12104fe8975b3ce95324ec3cab160ffc" category="list-text">指示 Trident 在 `trident` 命名空间中使用 `anf-backend.json` 作为配置文件创建 Azure NetApp Files 后端：</block>
  <block id="d6d34c355bcd6b2efe2795a2aeedd247" category="paragraph"><block ref="d6d34c355bcd6b2efe2795a2aeedd247" category="inline-image-macro-rx" type="image"></block></block>
  <block id="004530c3d3b3f442f56243625372db1d" category="list-text">创建存储类。Kubernetes 用户使用按名称指定存储类的 PVC 配置卷。指示 K8s 创建一个` azurenetappfiles `，该存储类引用上一步创建的 Trident 后端。</block>
  <block id="e777b114d6f12bc1190a60eaf8498e37" category="list-text">为存储类和副本创建 YAML （`anf-storage-class.yaml` ）文件。</block>
  <block id="01d45e8c6af153b1a477537e02466b5c" category="list-text">验证是否已创建存储类。</block>
  <block id="445895be8456b7de5e864fc09994551a" category="paragraph"><block ref="445895be8456b7de5e864fc09994551a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2d3fec4cfe088bc80c2c2930f051b60b" category="inline-link-macro">下一步：使用 Helm 在 AKS 上设置带快速部署的 dask 。</block>
  <block id="f2d1f2f412dd744c26a147e39bfa708f" category="paragraph"><block ref="f2d1f2f412dd744c26a147e39bfa708f" category="inline-link-macro-rx"></block></block>
  <block id="4b737f96f31f513a87adcf43b83ec3a1" category="summary">此页面介绍设置 AKS 集群所需的步骤。</block>
  <block id="a81532d943508d42466c22d8d87bb4b8" category="doc">安装和设置 AKS 集群</block>
  <block id="ce3e1770b7ff86cfbc3a30a3e3ea87da" category="inline-link-macro">上一页：点击率预测用例摘要。</block>
  <block id="80bf56f9bff31f7459309b983fbf8116" category="paragraph"><block ref="80bf56f9bff31f7459309b983fbf8116" category="inline-link-macro-rx"></block></block>
  <block id="40e1cc9f8d9321cbe9c1ef090f926a2b" category="paragraph">要安装和设置 AKS 集群，请参见网页<block ref="77c1c334ebc4c997080bda32aa569d69" category="inline-link-rx"></block> 然后完成以下步骤：</block>
  <block id="ad4af0825dd4979b7f48ae5ba031b23a" category="list-text">选择节点类型（系统 CPU 或辅助 GPU 节点）时，请选择以下选项：</block>
  <block id="5a244a81080ee9fc08696fcbd45284e5" category="list-text">主系统节点应为标准 DS2v2 （`agentpool` 默认三个节点）。</block>
  <block id="f3449ebebbf547282aa0562015bd360d" category="list-text">然后，为名为 `gpupool` 的用户组（对于 GPU 节点）添加工作节点 Standard_Nc6s_v3 Pool （至少三个节点）。</block>
  <block id="d3d648c68589ef99efb6ad3ec15d1beb" category="paragraph"><block ref="d3d648c68589ef99efb6ad3ec15d1beb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d2efc2b95642d4bcc76c710a3826225c" category="list-text">部署需要 5 到 10 分钟。完成后，单击 Connect to Cluster 。</block>
  <block id="31797d7013400422e5d589ae3d91c79a" category="list-text">要连接到新创建的 AKS 集群，请从本地环境（笔记本电脑 /PC ）安装以下内容：</block>
  <block id="87e009e80a344ecb598be4c4bbe01c79" category="inline-link">针对您的特定操作系统提供的说明</block>
  <block id="13a6d4f4230d0a1569b719c15884d447" category="list-text">使用的 Kubernetes 命令行工具<block ref="ad2337a31b7d16867fc954b03de661bd" category="inline-link-rx"></block></block>
  <block id="24a109d7bba4f8808eeb0bcf64d4357b" category="inline-link">安装 Azure 命令行界面</block>
  <block id="7feed8a8a6c680e7beeca052b9fc9ed0" category="list-text">文档中所述的 Azure 命令行界面，<block ref="8e2043d81b680dba324c5a2abbee7b3f" category="inline-link-rx"></block></block>
  <block id="d33a4b8acf4001a4b35a2186fd020432" category="list-text">要从终端访问 AKS 集群，请输入 `az login` 并输入凭据。</block>
  <block id="402ff6cff3671c1f49dc4af765835c14" category="list-text">输入 `Azure CLI ： kubectl get nodes` 。</block>
  <block id="4e5d89028ffbf65df6693ef1affd6573" category="list-text">如果所有六个节点均已启动且正在运行，如以下示例所示，则 AKS 集群已准备就绪并连接到本地环境</block>
  <block id="6b935f22371497abfe5378d4446df0da" category="paragraph"><block ref="6b935f22371497abfe5378d4446df0da" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e57b7e32f49f0297d6c7524d1da1b3c0" category="inline-link-macro">接下来：为 Azure NetApp Files 创建一个委派子网。</block>
  <block id="46b5942a33ef6a130ca5fee3f6017bec" category="paragraph"><block ref="46b5942a33ef6a130ca5fee3f6017bec" category="inline-link-macro-rx"></block></block>
  <block id="e1490a61359279998443f8eab1c0483e" category="summary">本页总结了 Azure NetApp Files 在分布式或大规模培训方面的优势。</block>
  <block id="b0de8e85db65da6381bb71646929daa6" category="doc">点击率预测用例摘要</block>
  <block id="d7550d336c660c27c3f1aa9ffdbc1e08" category="inline-link-macro">先前版本：云资源要求。</block>
  <block id="6a4fb77bb2a725598588e7db128b749b" category="paragraph"><block ref="6a4fb77bb2a725598588e7db128b749b" category="inline-link-macro-rx"></block></block>
  <block id="3f504d5ee520c44b83e5875afd3f2831" category="inline-link">TB 单击 Logs</block>
  <block id="ce2803fd5e9b90b62d0792d13e715d11" category="inline-link">Criteo AI 实验室</block>
  <block id="67ccf3c7c1e67c90000dfee83bab38ec" category="list-text">Azure NetApp Files 在分布式或大规模培训方面的优势</block>
  <block id="e15bc9f9b7a013d672cb689660ab9f9f" category="list-text">支持 CUDA 的数据处理（ cuDF ， cuPy 等）和 ML 算法（ cuML ）</block>
  <block id="3876b7e4b6a608a0b9001ae2e65c91b1" category="inline-link-macro">接下来：安装和设置 AK 集群。</block>
  <block id="2f0a1a89887d5c4f057724084bfdb718" category="paragraph"><block ref="2f0a1a89887d5c4f057724084bfdb718" category="inline-link-macro-rx"></block></block>
  <block id="17a9b27c376a8a5f5e184b2ebce41164" category="summary">部署完所有内容后，对新数据运行推断。这些模型可根据浏览活动预测用户是否单击某个广告。预测结果存储在 dask cuDF 中。您可以使用 Prometheus 监控结果，并在 Grafana 信息板中直观显示结果。</block>
  <block id="af4d0cbb3c6dcf4f3a5e831b08e40ace" category="doc">使用 Prometheus 和 Grafana 监控 dask 和快速流</block>
  <block id="a5d741c60ca9280a87382bcc2667207c" category="inline-link-macro">上一步：训练时间比较。</block>
  <block id="8162cd02e2793715a1b14265f2bfb54b" category="paragraph"><block ref="8162cd02e2793715a1b14265f2bfb54b" category="inline-link-macro-rx"></block></block>
  <block id="23c1612202d19b502b3701f893fb2557" category="inline-link">RAPID AI 中型 POST</block>
  <block id="9fed5c9f0dab5b88ba96d45cf450079f" category="paragraph">有关详细信息，请参见此<block ref="47200b727ab2088d205d11a973529202" category="inline-link-rx"></block>。</block>
  <block id="a5705f3e27851573a7eafd2a00a523b5" category="inline-link-macro">接下来：使用 NetApp DataOps 工具包进行数据集和型号版本控制。</block>
  <block id="db75fb5c1fef47405a8df61e726e3c66" category="paragraph"><block ref="db75fb5c1fef47405a8df61e726e3c66" category="inline-link-macro-rx"></block></block>
  <block id="adb2100439d02c2978c4a5670cda87b8" category="summary">此页面列出了用于构建此任务的库和框架。所有这些组件均已与 Azure 基于角色的访问和安全控制完全集成。</block>
  <block id="235ff38f40d20846e27b4c64e964ce28" category="doc">用于数据处理和模型培训的库</block>
  <block id="542e61809d35e9c83a99b29c87aa40fb" category="inline-link-macro">先前版本： Azure NetApp Files 性能层。</block>
  <block id="b7fe935ab4f924b870ae1983e3f3a271" category="paragraph"><block ref="b7fe935ab4f924b870ae1983e3f3a271" category="inline-link-macro-rx"></block></block>
  <block id="c4e831049faaa8b89e89eebd0a105dab" category="paragraph">下表列出了用于构建此任务的库和框架。所有这些组件均已与 Azure 基于角色的访问和安全控制完全集成。</block>
  <block id="faeae27c134f5193efb923d2492daa47" category="cell">库 / 框架</block>
  <block id="b540cdb28de9a6c72ef1a92504e69423" category="cell">dask cuML</block>
  <block id="1fc1b4b6567949aab2cb7e6fecb1e68f" category="inline-link">cuML 库</block>
  <block id="efe85bbaa5690074ea98a2bfef62d930" category="cell">要使 ML 在 GPU 上运行，请使用<block ref="514c908f6fc3f426a00e1dabdf37831f" category="inline-link-rx"></block> 可通过 dask 访问快速通道 cML 软件包。与基于 CPU 的方法相比，强强联合可以通过基于 GPU 的高性能实施实施常见的 ML 算法，包括集群，维度缩减和回归方法，提供高达 100 倍的速度。</block>
  <block id="ede0db3d6c9043439d0762ee99543654" category="cell">dask cudf</block>
  <block id="a9c380d6e09cc11f858b53d56cf69da4" category="inline-link">dask-cudf 库</block>
  <block id="13a7d0199f9797a3533ff335da46b446" category="cell">CUDF 包括支持 GPU 加速提取，转换，加载（ ETL ）的各种其他功能，例如数据子设置，转换，单热编码等。快速发展团队会维护<block ref="836818db4e43067816d31d2b73198787" category="inline-link-rx"></block> 其中包括使用 dask 和 cuDF 的帮助程序方法。</block>
  <block id="0c9c2e873df681f1ab5b13053be78af7" category="cell">Scikit 学习</block>
  <block id="cd1235fc9b090edba051d73dbc6f66bf" category="inline-link">估算器</block>
  <block id="1977c9daa1d67de51a4651abdb160c09" category="inline-link">适合</block>
  <block id="4f54da5a2c4a796e8215f20eb95fddcc" category="cell">Scikit Learning 提供了数十种内置机器学习算法和模型，称为评估器。每个<block ref="855747fa3f470c1754852d09071dd101" category="inline-link-rx"></block> 可以使用将其安装到某些数据中<block ref="e52e604a9dbe357e0fb9bc58f4b62add" category="inline-link-rx"></block> 方法</block>
  <block id="0dd4d530afb3c99ab869350770d7bebd" category="paragraph">我们使用两台笔记本电脑构建 ML 管道进行比较；一台是传统的熊猫科学学习方法，另一台是使用快速和快速的分布式培训。每台笔记本电脑均可单独进行测试，以查看时间和规模方面的性能。我们会分别介绍每台笔记本电脑，以展示使用快速流和 dask 进行分布式培训的优势。</block>
  <block id="7dd297826f91c438fab12307224d2c40" category="inline-link-macro">接下来：在熊猫中加载 Criteo 单击 Logs Day 15 ，然后训练一个 sc科学 学习随机林模型。</block>
  <block id="ade9906123700a8bf734457510b6b3c8" category="paragraph"><block ref="ade9906123700a8bf734457510b6b3c8" category="inline-link-macro-rx"></block></block>
  <block id="f6a738f75f76f62a241636eca02cd87d" category="doc">版本历史记录</block>
  <block id="3993b517d983222c5b766976180367f0" category="inline-link-macro">上一步：从何处查找追加信息。</block>
  <block id="7d5fc90090e6ef28f1b090f458e3bb91" category="paragraph"><block ref="7d5fc90090e6ef28f1b090f458e3bb91" category="inline-link-macro-rx"></block></block>
  <block id="44749712dbec183e983dcd78a7736c41" category="cell">Date</block>
  <block id="8002bc13927c65b5f265b031079ce1d4" category="cell">文档版本历史记录</block>
  <block id="3798985ee5e15c84c4263815d5a4d0b7" category="cell">版本 1.0</block>
  <block id="248f830b158797f9c038ea35ea266b89" category="cell">2021年8月</block>
  <block id="ea9349a37bfee247df0f87cbcacca796" category="cell">初始版本。</block>
  <block id="dfcb1d1644aa3be367d0ca7761be62ad" category="summary">此页面介绍为 Azure NetApp Files 创建委派子网所需的步骤。</block>
  <block id="d991c79e9311d59d4e38f3115d9c5b24" category="inline-link-macro">先前版本：安装和设置 AKS 集群。</block>
  <block id="5dd65debe44935eb5866a15b9a62237e" category="paragraph"><block ref="5dd65debe44935eb5866a15b9a62237e" category="inline-link-macro-rx"></block></block>
  <block id="8bffe528b31ee595be868b5a4af3d25a" category="paragraph">要为 Azure NetApp Files 创建委派子网，请完成以下步骤：</block>
  <block id="1aa0034de6393efa24703b8a479a5aa6" category="list-text">导航到 Azure 门户中的虚拟网络。查找新创建的虚拟网络。它应具有 `AK -vnet` 等前缀。</block>
  <block id="f1621549bc319674bb9e859babb2a671" category="list-text">单击 vNet 的名称。</block>
  <block id="c536871a8fac3a4390226f6e485cf662" category="paragraph"><block ref="c536871a8fac3a4390226f6e485cf662" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d5025fbb3995af8640cab85f4f91126b" category="list-text">单击子网，然后单击顶部工具栏中的 +Subnet 。</block>
  <block id="22307856839205c5209cc8ce1f4ed0df" category="paragraph"><block ref="22307856839205c5209cc8ce1f4ed0df" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e45b350630c9a3b31bf0c1a1f03dffb0" category="list-text">为子网提供名称，例如 `ANF.SN` ，然后在 Subnet delegation 标题下选择 `Microsoft.Netapp/volumes` 。请勿更改任何其他内容。单击确定。</block>
  <block id="3621b1bf0075cb659f152966504dfc0d" category="paragraph"><block ref="3621b1bf0075cb659f152966504dfc0d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e8034fc216ae23edc69bb75430f3de2f" category="paragraph">Azure NetApp Files 卷将分配给应用程序集群，并在 Kubernetes 中用作永久性卷声明（ Persistent Volume Claim ， PVC ）。反过来，通过此过程，您可以灵活地将其映射到不同的服务，例如 Jupyter 笔记本电脑，无服务器功能等。</block>
  <block id="ac3654eb11c3b0cfc94c6c1abdc6767a" category="paragraph">服务用户可以通过多种方式使用平台中的存储。在本技术报告讨论 NFS 时， Azure NetApp Files 的主要优势包括：</block>
  <block id="42ba8b77b788a422a7e4ba2d8bb2d45e" category="list-text">为用户提供使用 Snapshot 副本的功能。</block>
  <block id="a51448debe1bbe5bb229b849d4057e09" category="list-text">允许用户在 Azure NetApp Files 卷上存储大量数据。</block>
  <block id="b7c10d399d058ef3538882e444459ba5" category="list-text">在大型文件集上运行 Azure NetApp Files 卷的型号时，可以利用这些卷的性能优势。</block>
  <block id="4b15c9979e20dd7eb0c0263e9d5ab1db" category="inline-link-macro">下一步：对等 AKS vnet 和 Azure NetApp Files vnet 。</block>
  <block id="a9f725be439e4752193d45f7e7f41851" category="paragraph"><block ref="a9f725be439e4752193d45f7e7f41851" category="inline-link-macro-rx"></block></block>
  <block id="74b3e84bf9817092a6f26ddf10a2f3f8" category="summary">此页面概述了此解决方案中使用的技术。</block>
  <block id="a1f13b9a0674cc0beb81e208dfb68d05" category="doc">技术概述</block>
  <block id="5231f9fa4d08024f4620b759f83d0e97" category="inline-link-macro">上一页：简介。</block>
  <block id="dd5a70c15c985f455edb59eebf8d3eaa" category="paragraph"><block ref="dd5a70c15c985f455edb59eebf8d3eaa" category="inline-link-macro-rx"></block></block>
  <block id="4b2eedb67d8fb9da01af759e6e722a13" category="section-title">Microsoft 和 NetApp</block>
  <block id="09e4ef7b38fea4a7bdf4341b588176d6" category="paragraph">自 2019 年 5 月起， Microsoft 推出了 Azure 原生，这是基于 NetApp ONTAP 技术的第一方门户服务，适用于企业级 NFS 和 SMB 文件服务。这一发展由 Microsoft 和 NetApp 之间的战略合作伙伴关系推动，进一步将世界级 ONTAP 数据服务的覆盖范围扩展到 Azure 。</block>
  <block id="851e5baafa3bd23201e65e29f2fdf06a" category="paragraph">Azure NetApp Files 服务是一种企业级高性能计量文件存储服务。Azure NetApp Files 支持任何工作负载类型，默认情况下具有高可用性。您可以选择服务和性能级别，并通过服务设置 Snapshot 副本。Azure NetApp Files 是一项 Azure 第一方服务，用于在云中迁移和运行要求最严苛的企业文件工作负载，包括数据库， SAP 和高性能计算应用程序，并且不会更改代码。</block>
  <block id="f014a6e06480ef33e3f1ab027f7065ca" category="paragraph">此参考架构为 IT 组织提供了以下优势：</block>
  <block id="5e6e9a1ee378cf26b50e61d8bd46d54d" category="list-text">为各种性能和成本点提供一系列存储层</block>
  <block id="295f4f6daaf50c87d2639d407c47f357" category="section-title">Dask 和 NVIDIA 快速流概述</block>
  <block id="a9dcf931a9aad845de3c5b908d562955" category="paragraph">Dask 是一款开源并行计算工具，可在多台计算机上扩展 Python 库，并加快处理大量数据的速度。它提供的 API 类似于单线程传统 Python 库，例如熊猫， Numpy 和 sciKit 学习。因此，原生 Python 用户不必对其现有代码进行大量更改，即可在整个集群中使用资源。</block>
  <block id="955647f3573b932f8596ba04ed80b7b6" category="paragraph">NVIDIA RAID 是一套开源库，可以完全在 GPU 上运行端到端 ML 和数据分析工作流。通过与 dask 结合使用，您可以轻松地从 GPU 工作站（纵向扩展）扩展到多节点，多 GPU 集群（横向扩展）。</block>
  <block id="7a9ece70a2d60d73203e927718fd8454" category="paragraph">要在集群上部署 dask ，您可以使用 Kubernetes 进行资源编排。您还可以根据进程要求纵向或横向扩展工作节点，进而有助于优化集群资源消耗，如下图所示。</block>
  <block id="b3951b803e4010ed575c9238d2803949" category="paragraph"><block ref="b3951b803e4010ed575c9238d2803949" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c2e194dd3ce5b4d001a02991ef567211" category="inline-link-macro">接下来：软件要求</block>
  <block id="23704e1baeed350311b18c3583ad89e9" category="paragraph"><block ref="23704e1baeed350311b18c3583ad89e9" category="inline-link-macro-rx"></block></block>
  <block id="0dff6955889d5634f0212efb574ef815" category="doc">单击查看速率预测数据处理和模型训练</block>
  <block id="19075a93ccd90f3ea7019f0572778b2a" category="summary">此页面列出了此解决方案所需的软件要求。</block>
  <block id="b0167c15bc26c48af07aea36aba706fa" category="inline-link-macro">上一页：技术概述。</block>
  <block id="440b940924209e1d417ef7c4ef9bce34" category="paragraph"><block ref="440b940924209e1d417ef7c4ef9bce34" category="inline-link-macro-rx"></block></block>
  <block id="793d18702a236e0e3b768917638f0ba2" category="paragraph">下表列出了此解决方案所需的软件要求。</block>
  <block id="8ab697a4168b5fb33603a98d6bc9a436" category="cell">流和 dask 容器映像</block>
  <block id="9ab6289633c326d69a377cbb29bd81a3" category="cell">存储库： "rapidsai/rapidsai" 标记： 0.17-cuda11.0-runtime-ubuntu18.04</block>
  <block id="6e1b77cc3b83d87aaee751e2eaed5044" category="inline-link-macro">接下来：云资源要求。</block>
  <block id="58bc7690a5a3a5a1aa5dc70739fd0b53" category="paragraph"><block ref="58bc7690a5a3a5a1aa5dc70739fd0b53" category="inline-link-macro-rx"></block></block>
  <block id="9e59f01034d2c132fac901b9c14a5d88" category="summary">适用于 Kubernetes 的 NetApp DataOps 工具包可将存储资源和 Kubernetes 工作负载抽象到数据科学工作空间级别。这些功能打包在一个简单易用的界面中，专为数据科学家和数据工程师设计。</block>
  <block id="7aee811c7e891ab94bb5be40b333faaf" category="doc">使用 NetApp DataOps 工具包对数据集和模型进行版本控制</block>
  <block id="f7136197d3b16131979b9319c4acce63" category="inline-link-macro">上一页：使用 Prometheus 和 Grafana 监控 dask 和 rapids 。</block>
  <block id="402dae1972461d7e7ba986ab6728df6c" category="paragraph"><block ref="402dae1972461d7e7ba986ab6728df6c" category="inline-link-macro-rx"></block></block>
  <block id="fd2d048a9ec0f96d89493b98f72cbe34" category="paragraph">适用于 Kubernetes 的 NetApp DataOps 工具包可将存储资源和 Kubernetes 工作负载抽象到数据科学工作空间级别。这些功能打包在一个简单易用的界面中，专为数据科学家和数据工程师设计。该工具包采用熟悉的 Python 计划形式，可帮助数据科学家和工程师在几秒钟内配置和销毁 JupyterLab 工作空间。这些工作空间可以包含数 TB 甚至数 PB 的存储容量，从而使数据科学家能够将其所有培训数据集直接存储在其项目工作空间中。单独管理工作空间和数据卷的时代已经一去不返。</block>
  <block id="4a6c7893abd7ef92fb09d3359e17324d" category="inline-link">GitHub 存储库</block>
  <block id="eb0d40310a9cc0432fac66dc97652c39" category="paragraph">有关详细信息，请访问工具包<block ref="64134ca6239d4056f34489b42f2baeed" category="inline-link-rx"></block>。</block>
  <block id="1d1983037d4fd7beac963697b84f82bd" category="paragraph"><block ref="1d1983037d4fd7beac963697b84f82bd" category="inline-link-macro-rx"></block></block>
  <block id="cff4cbb413623685c446a2632974cf62" category="summary">此页面将使用传统熊猫的模型训练时间与 dask 进行比较。对于熊猫，由于处理时间较慢，我们加载的数据较少，以避免内存溢出。因此，我们对结果进行了插值计算，以便进行合理的比较。</block>
  <block id="014020acc8f97c1da58961d44b6301eb" category="doc">培训时间比较</block>
  <block id="76c5145913d13d6c3105c4265a78047e" category="inline-link-macro">上一步：使用原生任务流信息板监控 dask 。</block>
  <block id="a871e4d194e2df9c65b061a5fc7cb154" category="paragraph"><block ref="a871e4d194e2df9c65b061a5fc7cb154" category="inline-link-macro-rx"></block></block>
  <block id="c8ed0bb49061765f5f30ba006ea7c5c0" category="paragraph">本节将使用传统熊猫的模型训练时间与 dask 进行比较。对于熊猫，由于处理时间较慢，我们加载的数据较少，以避免内存溢出。因此，我们对结果进行了插值计算，以便进行合理的比较。</block>
  <block id="5b5214524edbd74fb721da08e61c8a41" category="paragraph">下表显示了当熊猫随机林模型（数据集每天 200 亿行中的 5000 万行）所使用的数据明显减少时的原始训练时间比较。 15此示例仅使用所有可用数据的 0.25% 以下。而对于 dask-cuML ，我们在所有 200 亿行可用的行上训练了随机林模型。这两种方法的训练时间相当。</block>
  <block id="40a68b5da4b9b224764558bb02ecd028" category="cell">方法</block>
  <block id="0e90ab0d7d04d2a878961f8d40071c83" category="cell">培训时间</block>
  <block id="24cc88af022e13431f8005b38f74e0fd" category="cell">Scikit 学习：在 15 天仅使用 50 米行作为训练数据</block>
  <block id="26e394f0b8009246698f4844db682015" category="cell">47 分 21 秒</block>
  <block id="ed536b2798ed9f16a79fb8f772601548" category="cell">rapids-dask ：使用第 15 天的所有 20 B 行作为训练数据</block>
  <block id="8809f6d1a4b5cbd872b52f83e378e527" category="cell">1 小时， 12 分钟和 11 秒</block>
  <block id="57093fade268287629c2720356ecac57" category="paragraph">如果我们按线性方式插值训练时间结果，如下表所示，则使用分布式训练和 dask 具有显著优势。传统的熊猫科学学习方法需要 13 天来处理和训练 45 GB 的数据，只需一天的单击日志，而使用快速 dask 方法处理相同数量的数据则要快 262.39 倍。</block>
  <block id="36ebc33745cb5ac06238c615c8aaebdc" category="cell">Scikit 学习：使用第 15 天的所有 20 B 行作为训练数据</block>
  <block id="b2ab615236e8c7812b0ab7dff59c552f" category="cell">13 天， 3 小时， 40 分钟和 11 秒</block>
  <block id="0d7cda3e89555f27bf26cf0c0c4f4fed" category="paragraph">在上表中，您可以看到，通过使用带和 dask 的快速处理功能在多个 GPU 实例之间分布数据处理和模型训练，与使用 scide-Learn 模型训练的传统熊猫 DataFrame 处理相比，运行时间要短得多。此框架支持在云端以及多节点多 GPU 集群内部进行纵向和横向扩展。</block>
  <block id="fbd52cffa97d6ec5e0230516fc61f14c" category="inline-link-macro">接下来：使用 Prometheus 和 Grafana 监控 dask 和快速流。</block>
  <block id="78117011d88a8971f2eadbeee6ac6474" category="paragraph"><block ref="78117011d88a8971f2eadbeee6ac6474" category="inline-link-macro-rx"></block></block>
  <block id="57a499fcdd85136edfd1ee55dedd9675" category="summary">此解决方案遵循 AI/ML 应用程序的生命周期。我们从数据科学家的工作入手，确定准备数据和训练模型所需的不同步骤。通过利用 dask 上的快速访问功能，我们可以在 Azure Kubernetes Service （ AKS ）集群中执行分布式培训，与传统的 Python 科学学习方法相比，可以大幅缩短培训时间。为了完成整个周期，我们将管道与 Azure NetApp Files 集成在一起。</block>
  <block id="e6fab630e7da86a500e1e3c51fa61a00" category="paragraph">Rick Huang ， Verron Martina ， Muncher ， NetApp</block>
  <block id="4c3816ce69205bc811aa89dbe9d09a1a" category="paragraph">数据科学家的工作重点应放在机器学习（ ML ）和人工智能（ AI ）模型的培训和调整上。但是，根据 Google 的研究，数据科学家花费大约 80% 的时间来研究如何使其模型能够与企业应用程序结合使用并大规模运行。</block>
  <block id="a1451f6988178ae140f8da836d63a157" category="paragraph">要管理端到端 AI/ML 项目，需要更广泛地了解企业组件。虽然 DevOps 已接管了这些类型的组件的定义，集成和部署，但 ML 操作的目标是类似的流程，其中包括 AI/ML 项目。要了解端到端 AI/ML 管道在企业中涉及的内容，请参见以下所需组件列表：</block>
  <block id="24bea3d677b34d6aea9ff01417fd9d06" category="list-text">集成开发环境（ IDE ）</block>
  <block id="e6a53478c3fc5682c6f851672b3e7bc9" category="paragraph">数据科学领域涉及 IT 和业务领域的多个领域：</block>
  <block id="9ca78187997ba2a23a73c094256ae63f" category="list-text">云管理员和架构师需要能够设置和管理 Azure 资源。</block>
  <block id="060bc2911862b1ab8f6b4b77542434a2" category="paragraph">在本技术报告中，我们将介绍 Azure NetApp Files ，快速 AI ， dask 和 Azure 如何帮助这些角色为业务带来价值。</block>
  <block id="ed8b6e047f5d4e844fe3e870c3fda4a3" category="paragraph">Azure NetApp Files 提供各种性能层。客户可以从标准层开始，无需移动任何数据即可无中断地横向扩展和纵向扩展到高性能层。数据科学家可以利用此功能大规模训练模型，而不会出现任何性能问题，从而避免集群中出现任何数据孤岛，如下图所示。</block>
  <block id="d4dc9019b6000fd12d9dc6b091fe3e26" category="paragraph"><block ref="d4dc9019b6000fd12d9dc6b091fe3e26" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b320345f652aacf7148c76dff24e2f68" category="inline-link-macro">接下来：技术概述</block>
  <block id="a20978df09e58f39953eb81f9368c2f2" category="paragraph"><block ref="a20978df09e58f39953eb81f9368c2f2" category="inline-link-macro-rx"></block></block>
  <block id="d577549f9b3a229c338e203a433489f6" category="summary">本节介绍如何将 AKS vNet 与 Azure NetApp Files vNet 建立对等关系。</block>
  <block id="e61e6d340ad05dc2e1ad0982f6857d7d" category="doc">对等 AKS vNet 和 Azure NetApp Files vNet</block>
  <block id="1c45d541f316a23589217be5991b1545" category="inline-link-macro">先前：为 Azure NetApp Files 创建委派子网。</block>
  <block id="786730f8769009abf0bf6400157dd16b" category="paragraph"><block ref="786730f8769009abf0bf6400157dd16b" category="inline-link-macro-rx"></block></block>
  <block id="e6ef5f0946a89d073a8f360de1038061" category="paragraph">要将 AKS vNet 与 Azure NetApp Files vNet 建立对等关系，请完成以下步骤：</block>
  <block id="87c2d6c506d0bf65d2c5d773474f9c0f" category="list-text">在搜索字段中输入虚拟网络。</block>
  <block id="7680f3bc49a836c67a8b0e7d2d9ccb44" category="list-text">选择 `vnet AK -vnet-name 。` 单击它并在搜索字段中输入 "Peels" 。</block>
  <block id="fc3bb6a018a8f599cab21678959f92b0" category="list-text">单击 +Add 。</block>
  <block id="1991ef5bd8e165e42c56ccaefa2f640f" category="list-text">输入以下描述符：</block>
  <block id="51e5b9c0a583a9afbc2f998e622fd30d" category="list-text">对等链路名称是 `aps-vnet-name_to_anf` 。</block>
  <block id="14ac6521e2758ba95fe7be9ca6a82cd1" category="list-text">subscriptionID 和 Azure NetApp Files vNet 作为 vNet 对等配对节点。</block>
  <block id="70b58cb057d859d4da9f17e43ffd238c" category="list-text">保留所有非星号部分的默认值。</block>
  <block id="1bb250fbf1946dd1bd7ad228032f8803" category="list-text">单击添加。</block>
  <block id="50e3209c871e4867931ef51a9344a921" category="paragraph">有关详细信息，请参见<block ref="f81943721c88f7efe9b8252470f9ea43" category="inline-link-rx"></block>。</block>
  <block id="fd3c95528aa9718948de8d4e38b2fa2c" category="inline-link-macro">下一步：安装 Trident 。</block>
  <block id="18337fe57049583a9c04a79f64a2088f" category="paragraph"><block ref="18337fe57049583a9c04a79f64a2088f" category="inline-link-macro-rx"></block></block>
  <block id="dcfa517bb68d187d11e580baf2ecf588" category="summary">此页面介绍如何使用 Helm 在 AKS 上设置带快速部署的 dask 。</block>
  <block id="fd22fb1626b987fa7b72743fa9698ec6" category="doc">使用 Helm 在 AKS 上设置带快速部署的 dask</block>
  <block id="d74bb88aa6e4b1c540be703fda33923e" category="inline-link-macro">先前版本：安装 Trident 。</block>
  <block id="6020c64d2124fc0caa426123bfc5ba38" category="paragraph"><block ref="6020c64d2124fc0caa426123bfc5ba38" category="inline-link-macro-rx"></block></block>
  <block id="d81f517b6ad0d9702be81a8199a2246f" category="paragraph">要使用 Helm 在 AKS 上设置带快速部署的 dask ，请完成以下步骤：</block>
  <block id="549c839f491ec7099a895dd1cfea7534" category="list-text">创建一个命名空间以安装带有快速流的 dask 。</block>
  <block id="74d041e68ac2a21a636ab14ae78f279d" category="list-text">创建一个 PVC 以存储点击率数据集：</block>
  <block id="f5008aa6b27cdcaadbe27960383c8ff6" category="list-text">将以下 YAML 内容保存到文件中以创建 PVC 。</block>
  <block id="67d464c36bcc48173c964a780459dbfd" category="list-text">将 YAML 文件应用于 Kubernetes 集群。</block>
  <block id="be0ca76aafd92c18792693b8f05d01ce" category="inline-link"><block ref="be0ca76aafd92c18792693b8f05d01ce" category="inline-link-rx"></block></block>
  <block id="dc7ba914646428512334728c1f0ebd7d" category="list-text">克隆 `apidsai git` repository （<block ref="4f08c7c28c19e75f4d8607fc65d40067" category="inline-link-rx"></block>）。</block>
  <block id="50aef45ee39d958bc589f422bfb6d1bf" category="list-text">修改 `values.yaml` 并包括先前为员工和 Jupyter 工作空间创建的 PVC 。</block>
  <block id="06867e85b141bb9d17f8ed6b4b685c46" category="list-text">转至存储库的 `rapidsai` 目录。</block>
  <block id="1a985ac965074fab9cfcee28ef954755" category="list-text">更新 `values.yaml` 文件并使用 PVC 挂载卷。</block>
  <block id="52076eb1fec3929530258335052328b3" category="list-text">转到存储库的主目录，然后使用 Helm 在 AKS 上为三个辅助节点部署 dask 。</block>
  <block id="bd4e74749939dd3c9f80ff138c18af53" category="inline-link-macro">接下来： Azure NetApp Files 性能层。</block>
  <block id="52d5e0adb69809963ce4f94104a75b5e" category="paragraph"><block ref="52d5e0adb69809963ce4f94104a75b5e" category="inline-link-macro-rx"></block></block>
  <block id="1a17b23dd49d997677e18c9b9fe29935" category="summary">此页面介绍如何使用原生任务流信息板监控 dask 。</block>
  <block id="3268570ddd540695f3e92ff79d8f4684" category="doc">使用原生任务流信息板监控 dask</block>
  <block id="1e80a6d70a902d1dae25d26917a5b490" category="inline-link-macro">上一步：在 dask 中加载 Day 15 并训练 dask cuML 随机林模型。</block>
  <block id="3898f5ae37dfd830af10cdc128236b50" category="paragraph"><block ref="3898f5ae37dfd830af10cdc128236b50" category="inline-link-macro-rx"></block></block>
  <block id="9eeb55820f49a600fa229f23cfe9e5b5" category="inline-link">dask 分布式计划程序</block>
  <block id="99b248c7005783fe2682ad82217e9a24" category="paragraph">。<block ref="7df0d90bf997a373bfe85bbe10a2d2c8" category="inline-link-rx"></block> 以两种形式提供实时反馈：</block>
  <block id="d8516bf5d94a38a1fa1d7a8c3b92dee7" category="list-text">一个交互式信息板，其中包含许多图表和包含实时信息的表</block>
  <block id="d22ebe91c5dc1499387785da997fbe7d" category="list-text">一个适合在控制台或笔记本电脑中交互使用的进度条</block>
  <block id="6e35e4c1cc9332ebc8028df451bc4f06" category="paragraph">在我们的案例中，下图显示了如何监控任务进度，包括存储的字节数，详细细分流数量的任务流以及执行关联功能的任务名称的进度。在我们的案例中，由于我们有三个辅助节点，因此流有三个主要区块，而颜色代码表示每个流中的不同任务。</block>
  <block id="5743e70224503025dacaa77fae253c4f" category="paragraph"><block ref="5743e70224503025dacaa77fae253c4f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7a5c7a858f05434bf6637c3995959f49" category="paragraph">您可以选择分析单个任务并以毫秒为单位检查执行时间，或者确定任何障碍或障碍。例如，下图显示了随机林模型安装阶段的任务流。要执行的功能要多得多，包括用于 DataFrame 处理的唯一区块，用于安装随机林的 _construct_rf 等。由于 Criteo Click Logs 中一天的数据非常大（ 45 GB ），因此大部分时间都花在了 DataFrame 操作上。</block>
  <block id="816ff133aaa3d2f46ca0c7842f5fdaab" category="paragraph"><block ref="816ff133aaa3d2f46ca0c7842f5fdaab" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f5eca1492a19a4c24071ed91262666cf" category="inline-link-macro">下一步：比较训练时间。</block>
  <block id="d5d929f175d4a2062c661e45b9656f32" category="paragraph"><block ref="d5d929f175d4a2062c661e45b9656f32" category="inline-link-macro-rx"></block></block>
  <block id="d68d11ee3f69a45d681f78c744cae498" category="summary">您可以通过将现有卷移动到使用所需卷服务级别的另一个容量池来更改此卷的服务级别。借助此解决方案，客户可以从标准层中的小型数据集和少量 GPU 入手，并随着数据量和 GPU 的增加而横向扩展或纵向扩展到高级层。</block>
  <block id="2fe5665064f07acc8afc830f911c09a5" category="doc">Azure NetApp Files 性能层</block>
  <block id="d84e339c1d1265f11e2f217f8d04354a" category="inline-link-macro">上一步：使用 Helm 在 AKS 上设置带快速部署的 dask 。</block>
  <block id="1be55e0d10ba600a3d66b1f73f978b9f" category="paragraph"><block ref="1be55e0d10ba600a3d66b1f73f978b9f" category="inline-link-macro-rx"></block></block>
  <block id="de524ca3fc83ef426bc329e1a8b712ea" category="paragraph">您可以通过将现有卷移动到使用所需卷服务级别的另一个容量池来更改此卷的服务级别。借助此解决方案，客户可以从标准层中的小型数据集和少量 GPU 入手，并随着数据量和 GPU 的增加而横向扩展或纵向扩展到高级层。高级层提供的每 TB 吞吐量是标准层的四倍，并且可以执行纵向扩展，而无需移动任何数据即可更改卷的服务级别。</block>
  <block id="5f92df8a2ac38644ed8ba20e16791602" category="paragraph">要动态更改卷的服务级别，请完成以下步骤：</block>
  <block id="8c83c4957baac2f6fea18f9d77767e3a" category="paragraph"><block ref="8c83c4957baac2f6fea18f9d77767e3a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="21ec2eabbe87e02cad1b0d4279ea00a7" category="list-text">在更改池窗口中，选择要将卷移动到的容量池。</block>
  <block id="ef3a0105bad35ad4c385d92daf6496a6" category="paragraph"><block ref="ef3a0105bad35ad4c385d92daf6496a6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="18d0ad44a1e563aaf9f5871e32535a6c" category="list-text">单击确定。</block>
  <block id="32ae33eea9c6b04002778d814c344fb5" category="section-title">自动执行性能层更改</block>
  <block id="1c9506694c5a6fe83d1a0389d1d24564" category="paragraph">以下选项可用于自动执行性能层更改：</block>
  <block id="54a3bcd89041e8f96766dcb598b15511" category="list-text">动态服务级别更改目前仍在公有预览中，默认情况下不会启用。要在 Azure 订阅上启用此功能，请参见本文档了解如何操作<block ref="773d4c9e90e7325c5fcf35857900af6e" category="inline-link-rx"></block>。</block>
  <block id="0b01c5f61940e864222c5b29615a7eeb" category="inline-link">卷池更改文档</block>
  <block id="265eed4df59633a830c9da49505786fc" category="list-text">中提供了 Azure CLI 卷池更改命令<block ref="db78b725076ccf0203288c6620e52eb9" category="inline-link-rx"></block> 在以下示例中：</block>
  <block id="4455e376dc005ca0a99be0491b917ce7" category="inline-link">Set-AzNetAppFilesVolumePool cmdlet</block>
  <block id="a5bce2f378011f6036711869a5e8073b" category="list-text">PowerShell ：<block ref="45dc9ea5ce8eabd60a14674d792889e0" category="inline-link-rx"></block> 更改 Azure NetApp Files 卷的池，如以下示例所示：</block>
  <block id="b79b50d5bff47e3a668f266c7b9dbc7b" category="inline-link-macro">接下来：用于数据处理和模型培训的库。</block>
  <block id="edd770dcbb857ec8f0871955fb2f7d5d" category="paragraph"><block ref="edd770dcbb857ec8f0871955fb2f7d5d" category="inline-link-macro-rx"></block></block>
  <block id="60f89129c6220bfb3de5a84b4f6471ca" category="summary">此页面介绍了我们如何使用熊猫和 dask DataFrames 从 Criteo TB 数据集中加载 Click Logs 数据。在广告交换的数字广告中，使用情形与此相关，它可以预测是否会点击广告，或者如果交换在自动管道中使用的模型不准确，从而构建用户的个人资料。</block>
  <block id="efdbc2f24f0a87c559175250c645b26b" category="doc">在熊猫中加载 Criteo 单击 Logs Day 15 ，然后训练一个 sc科学 学习随机林模型</block>
  <block id="2979440f06f7cfcab78b9a92ca964f28" category="inline-link-macro">上一页：数据处理和模型培训库。</block>
  <block id="f2982e3861753bd206faa379a769d904" category="paragraph"><block ref="f2982e3861753bd206faa379a769d904" category="inline-link-macro-rx"></block></block>
  <block id="f82859e215621220b9aae984f796ef24" category="paragraph">本节介绍如何使用熊猫和 dask DataFrames 从 Criteo TB 数据集中加载 Click Logs 数据。在广告交换的数字广告中，使用情形与此相关，它可以预测是否会点击广告，或者如果交换在自动管道中使用的模型不准确，从而构建用户的个人资料。</block>
  <block id="f08833dbbe310e84a1ba564838776db2" category="paragraph">我们从 Click Logs 数据集加载了第 15 天的数据，总计 45 GB 。在 Jupyter 笔记本电脑中运行以下单元 `CT-PandasRF-colled.ipynb` 创建一个包含前 5 ， 000 万行的熊猫 DataFrame ，并生成一个 scide-Learn 随机林模型。</block>
  <block id="f9964b2f8f54a1422ac46bab70fd1216" category="inline-link">官方科学知识工具包学习文档</block>
  <block id="5646953e1414498e1ddf2eb3ab488e27" category="paragraph">要使用经过培训的随机林模型执行预测，请在此笔记本电脑中运行以下段落。为了避免重复，我们采用了自第 15 天起的最后 100 万行作为测试集。该单元格还会计算预测准确性，其定义为模型准确预测用户是否单击 AD 。要查看此笔记本中任何不熟悉的组件，请参见<block ref="27e4d9ca2442a6439517a3ec2c7a4e73" category="inline-link-rx"></block>。</block>
  <block id="4e5653c75e720212b79703e8083de2a8" category="inline-link-macro">接下来：在 dask 中加载第 15 天，训练一个 dask cuML 随机林模型。</block>
  <block id="8c9976282cff1b15934d937349911c30" category="paragraph"><block ref="8c9976282cff1b15934d937349911c30" category="inline-link-macro-rx"></block></block>
  <block id="7f39827ac712fa5b76b27ff0b267373c" category="sidebar">使用 NetApp DataOps 工具包进行数据集和型号版本控制</block>
  <block id="efbc668592bf2cf9e84b95ff4a9de44c" category="cell">21.08.65</block>
  <block id="6589da0279dd02b9b1d177e0ff5f457b" category="list-text">创建一个命名空间 `NetApp-Acc-operator` 以安装 Astra 控制中心操作员。</block>
  <block id="e3990b0b892faaf03261a0a1bcd00b9b" category="list-text">使用凭据创建一个密钥，以登录到 `NetApp-Acc-operator` 命名空间中的映像注册表。</block>
  <block id="8b6327b93d10679b1f412976af9d3bba" category="summary">Azure NetApp Files ，速写和 dask 可加快和简化大规模 ML 处理和培训的部署，并与 Docker 和 Kubernetes 等业务流程工具集成。通过统一端到端数据管道，此解决方案可降低许多高级计算工作负载固有的延迟和复杂性，从而有效地弥补开发和运营之间的差距。</block>
  <block id="5dc14d36063086387d2eb7cf012544aa" category="list-text">创建 VolumeSnapshotClass ，然后使用该类创建 VolumeSnapshot 。导航到 "Storage"&gt;"VolumeSnapshotClasss" ，然后单击 "Create VolumeSnapshotClass" 。</block>
  <block id="3ffbaa72c8e63f0ec3ced08d8ebf9f72" category="list-text">首先，将 Snapshot 还原到新的 PVC 中。导航到存储 &gt; 卷快照，单击要还原的快照旁边的省略号，然后单击还原为新 PVC 。</block>
  <block id="8a4d1acf8df9931b5c42b3253f943d79" category="list-text">接下来，使用此 PVC 创建一个新虚拟机。导航到工作负载 &gt; 虚拟化 &gt; 虚拟机，然后单击创建 &gt; 使用 YAML 。</block>
  <block id="91b9a57ab88a6942f692f9f393549f6e" category="list-text">在规范 &gt; 模板 &gt; 规范 &gt; 卷部分中，指定从 Snapshot 创建的新 PVC ，而不是从容器磁盘创建的新 PVC 。根据您的要求提供新虚拟机的所有其他详细信息。</block>
  <block id="78c43863df60a7808264e8659cfa6b54" category="paragraph">Astra Trident 是一款开源且完全受支持的存储编排程序，适用于容器和 Kubernetes 分发版，包括 Red Hat OpenShift 。Trident 可与包括 NetApp ONTAP 和 Element 存储系统在内的整个 NetApp 存储产品组合配合使用，并且还支持 NFS 和 iSCSI 连接。Trident 允许最终用户从其 NetApp 存储系统配置和管理存储，而无需存储管理员干预，从而加快了 DevOps 工作流的速度。</block>
  <block id="d719c733d0cd8753c048c8c3a025fd51" category="paragraph">MetalLB 是一种安装在 OpenShift 集群上的自托管网络负载平衡器，可用于在未在云提供程序上运行的集群中创建类型为负载平衡器的 OpenShift 服务。MetalLB 可协同工作以支持负载平衡器服务的两个主要功能是地址分配和外部公告。</block>
  <block id="13f78a1c753a58b3786e5664e7b01344" category="list-text">* BGP 模式。 * 在此模式下， OpenShift 集群中的所有节点都与路由器建立 BGP 对等会话，并公布路由以将流量转发到服务 IP 。前提条件是将 MetalLB 与该网络中的路由器集成在一起。由于 BGP 中采用哈希机制，因此在服务的 IP 到节点映射发生更改时，它具有一定的限制。有关详细信息，请参见文档 <block ref="fed7545a9b4a70bb7835cc8b07492cba" category="inline-link-macro-rx"></block>。</block>
  <block id="5fe238de20fea7c5ec86dde0a98c5841" category="admonition">在本文档中，我们将在第 2 层模式下配置 MetalLB 。</block>
  <block id="0ef06ef8df800cf71fb95c66e0e08f1a" category="list-text">首先导航到 " 自动化基础架构 "&gt;" 集群 " 。</block>
  <block id="e056bb6efa17796fc810edad8410280d" category="list-text">创建提供程序连接：导航到 " 提供程序连接 " 并单击 " 添加连接 " ，提供与选定提供程序类型对应的所有详细信息，然后单击 " 添加 " 。</block>
  <block id="401b252566122602a82ff66bc7ed3e6c" category="list-text">要创建新集群，请导航到集群，然后单击添加集群 &gt; 创建集群。提供集群和相应提供程序的详细信息，然后单击创建。</block>
  <block id="2da6eeb34cf16de43ab8fa2f939d81c7" category="list-text">创建集群后，该集群将显示在集群列表中，状态为 Ready 。</block>
  <block id="f52ae06380cfd00cae7839562f550e87" category="list-text">导航到集群，然后单击添加集群 &gt; 导入现有集群。</block>
  <block id="63b7276dd1b569babc28304e786e2041" category="list-text">输入集群的名称，然后单击保存导入并生成代码。此时将显示一个用于添加现有集群的命令。</block>
  <block id="be87809a27ab2944f89ccaebd89b7596" category="list-text">单击 Copy Command ，然后对要添加到集线器集群的集群运行命令。此操作将在集群上启动所需代理的安装，完成此过程后，集群将显示在集群列表中，并显示状态为 Ready 。</block>
  <block id="627fd2c5e0310dc7409ea377e5d13045" category="section-title">验证在分配的项目中创建 PVC 或 Pod 的访问权限</block>
  <block id="8c9885c86a67cc4c47a30d7e8d14badb" category="section-title">验证在其他项目中创建 PVC 或 Pod 的访问权限，或者使用专用于另一项目的资源</block>
  <block id="83aa0a39007c30e71adde6fbf8180d9f" category="section-title">验证对查看和编辑项目， ResourceQuotas 和 StorageClasses 的访问权限</block>
  <block id="53c583e55a36ad49234df678a2dbcf45" category="paragraph">NetApp Element 软件可提供模块化的可扩展性能，每个存储节点均可为环境提供有保障的容量和吞吐量。NetApp Element 系统可以在一个集群中从 4 个节点扩展到 100 个节点，并提供多种高级存储管理功能。</block>
  <block id="28bbba0205a8bfd9f8f2da8b73522dc7" category="inline-link-macro">接下来： NetApp 存储集成概述</block>
  <block id="d61c98dcb4bec6f3e1213776ebb1e6c3" category="paragraph"><block ref="d61c98dcb4bec6f3e1213776ebb1e6c3" category="inline-link-macro-rx"></block></block>
  <block id="1c01b62cc887329b006a88e9f959b5d4" category="list-text">确保已在 IdP 上为 project-3 创建用户组并与 OpenShift 集群同步。</block>
  <block id="e98511d60f9850de86f096614f447322" category="paragraph">适用于 Kubernetes 的高级集群管理提供了一种监控所有集群中的节点， Pod 以及应用程序和工作负载的方法。</block>
  <block id="36aff44ed429ca86d182dc7ee3dfdbb1" category="list-text">导航到 " 观察环境 "&gt;" 概述 " 。</block>
  <block id="c9904a9276a489fc238c999d2ddd633f" category="list-text">所有集群中的所有 Pod 和工作负载都会根据各种筛选器进行监控和排序。单击 Pod 以查看相应数据。</block>
  <block id="7cd1c61051d3647bc47d839e0efee222" category="list-text">集群中的所有节点都会根据各种数据点进行监控和分析。单击节点可更深入地了解相应的详细信息。</block>
  <block id="4e7f54a0ebc5cd69209a17181d477e4c" category="list-text">系统会根据不同的集群资源和参数监控和组织所有集群。单击集群可查看集群详细信息。</block>
  <block id="842f7d4793f116332f5b12b648dfd539" category="list-text">导航到工作负载 &gt; 虚拟化 &gt; 虚拟机，然后单击创建 &gt; 使用向导。</block>
  <block id="ae024d48dbfaaf4badad7bf9c812a98f" category="list-text">单击 rootdisk 旁边的省略号，并确保已选择使用 Trident 配置的 storageclass 。展开高级，然后为访问模式选择共享访问（ rwx ）。然后单击保存。</block>
  <block id="289f346dbeb0185de2648a24955ca887" category="list-text">导航到工作负载 &gt; 虚拟化 &gt; 虚拟机。</block>
  <block id="a542faac65568ba146d392d835d7fb33" category="list-text">* VMware vCenter Server* 。 VMware vCenter Server 可通过一个控制台统一管理所有主机和 VM ，并聚合对集群，主机和 VM 的性能监控。</block>
  <block id="413563ec6c2672beb7df15f465cb4a48" category="list-text">通过 * VMware vSphere vMotion* VMware vCenter ，您可以根据请求在集群中的节点之间热迁移虚拟机，而不会造成中断。</block>
  <block id="e6583703b8777be27f8db85d741711b4" category="list-text">* vSphere 高可用性。 * 为避免主机发生故障时发生中断， VMware vSphere 允许将主机集群化并配置为高可用性。由于主机故障而中断的 VM 不久将在集群中的其他主机上重新启动，从而还原服务。</block>
  <block id="46b35ead34118cb2c50327c71e4aa640" category="list-text">* 分布式资源计划程序（ DRS ）。 * 可以配置 VMware vSphere 集群，以便对其托管的 VM 的资源需求进行负载平衡。具有资源管理的 VM 可以热迁移到集群中的其他节点，以确保有足够的可用资源。</block>
  <block id="5c6371faa8d72dee8337811921707a4b" category="paragraph">NetApp 解决方案上的 Red Hat OpenShift 使用两个数据交换机提供 25 Gbps 的主数据连接。它还使用两个额外的管理交换机，这些交换机以 1 Gbps 的速度提供连接，用于存储节点的带内管理以及 IPMI 功能的带外管理。OCP 使用 VMware vSphere 上的 VM 逻辑网络进行集群管理。本节介绍解决方案中使用的每个虚拟网段的布局和用途，并概述了部署解决方案的前提条件。</block>
  <block id="f33bd5bca507f2b59fc0a43383ade71b" category="cell">虚拟子系统网络访问</block>
  <block id="3500f2194985ef1b586c649fbe519d8d" category="paragraph">本文档中介绍的经验证的架构介绍了适用于 HA 操作的最低硬件部署，具体方法是部署两个 ESXi 虚拟机管理程序节点，并通过启用 VMware vSphere HA 和 VMware vMotion 来确保容错配置。此配置允许部署的 VM 在两个虚拟机管理程序之间迁移，并在一个主机不可用时重新启动。</block>
  <block id="e79fa01ec6b411cfda4f8baad9f95cb0" category="paragraph">由于 Red Hat OpenShift 最初部署有三个主节点，因此在某些情况下，双节点配置中至少有两个主节点可以占用同一个节点，如果该特定节点不可用，可能会导致 OpenShift 中断。因此， Red Hat 的最佳实践是，必须至少部署三个 ESXi 虚拟机管理程序节点，以便可以均匀分布 OpenShift 主节点，从而提高容错能力。</block>
  <block id="f5428382aa8b44d7ef6ca71195afc8ca" category="paragraph">通过启用 VM 和主机关联性，可确保在多个虚拟机管理程序节点之间分布 OpenShift 主节点。</block>
  <block id="c23c2371397ad3490af42526283948a4" category="paragraph">关联性或反关联性是一种为一组 VM 和 / 或主机定义规则的方法，用于确定这些 VM 是在同一主机上运行还是在组中的主机上运行，还是在不同主机上运行。它通过创建由具有一组相同参数和条件的 VM 和 / 或主机组成的关联组来应用于 VM 。根据关联组中的 VM 是在组中的同一主机上运行，还是在不同主机上单独运行，此关联组的参数可以定义正关联性或负关联性。</block>
  <block id="5e059b05dcf86db414d6b8cdd66bcf0f" category="paragraph">IPI 可通过本文档前面讨论的交互式向导轻松部署 OpenShift 集群。但是，在集群部署过程中，您可能需要更改某些默认值。</block>
  <block id="6e7315bf45cda77f0a1477ed6f712eb6" category="paragraph">在这些情况下，您无需立即部署集群即可运行和执行向导任务，但向导会创建一个配置文件，以便稍后可以从中部署集群。如果您需要更改任何 IPI 默认值，或者要在环境中部署多个相同的集群以用于多租户等其他用途，则此功能非常有用。有关为 OpenShift 创建自定义安装配置的详细信息，请参见<block ref="fc4239653f75b84dd3ca03fe8b28dd64" category="inline-link-rx"></block>。</block>
  <block id="2a3b399798aa16ecfbc1425cc560bfad" category="section-title">用例</block>
  <block id="f08561bbd831bfa1923e6acf045ef13a" category="section-title">业务价值</block>
  <block id="81f74b2a02db97d708bd7cbf08d2463a" category="section-title">NetApp 存储系统</block>
  <block id="660d073f0987fac312dc40bd5dc868bd" category="paragraph">NetApp 拥有多个存储系统，非常适合企业数据中心和混合云部署。NetApp 产品组合包括 NetApp ONTAP ， NetApp Element 和 NetApp E 系列存储系统，所有这些系统均可为容器化应用程序提供永久性存储。</block>
  <block id="069b087e8e1e69cc928f18a85f683523" category="section-title">NetApp 存储集成</block>
  <block id="b4186621511a622be24ad982b0a8ec32" category="paragraph">NetApp Astra 控制中心为有状态 Kubernetes 工作负载提供了一组丰富的存储和应用程序感知型数据管理服务，这些服务部署在内部环境中，并采用值得信赖的 NetApp 数据保护技术。</block>
  <block id="947496ade2e4a2c8e929d9aa9f00be04" category="paragraph">有关详细信息，请访问 NetApp Astra 网站<block ref="508f471fa59796a53754f031c40091c1" category="inline-link-rx"></block>。</block>
  <block id="0bc570c518e7c4f356ebceb14fa8372f" category="section-title">高级配置选项</block>
  <block id="aa44798f04a58b33c3699abd02a59c57" category="paragraph">本节专门介绍实际用户在将此解决方案部署到生产环境中时可能需要执行的自定义设置，例如创建专用私有映像注册表或部署自定义负载平衡器实例。</block>
  <block id="382742bb5fff6a719c144a0a01cd17e3" category="section-title">已验证版本的当前支持列表</block>
  <block id="40ddf58fef213ff0d6433ef322edfe2e" category="cell">软件版本</block>
  <block id="e3024b13494086daa1b9813a799ba41a" category="cell">数据中心虚拟化</block>
  <block id="35be109b995061abd3392d1b01fd0e9a" category="summary">Red Hat OpenStack 平台为创建，部署和扩展安全可靠的私有 OpenStack 云提供了一个集成基础。</block>
  <block id="dc34aa9761794ceabad79dc29944976e" category="paragraph">OpenStack 项目是一个快速开发的社区项目，每六个月提供更新版本。最初， Red Hat OpenStack Platform 通过发布新版本以及每个上游版本并为每个第三个版本提供长期支持，跟上了此版本周期的步伐。最近，在 OSP 16.0 版（基于 OpenStack 训练）中， Red Hat 选择不跟上版本号的步伐，而是将新功能支持到子版本中。最新版本是 Red Hat OpenStack Platform 16.1 ，其中包括上游 Ussuri 和维多利亚版本的后台高级功能。</block>
  <block id="ffd7a6889e6ea6965969472250235082" category="paragraph">OpenStack 平台服务以容器的形式部署，可将服务彼此隔离，并可轻松进行升级。OpenStack 平台使用一组使用 Kolla 构建和管理的容器。可通过从 Red Hat 自定义门户中提取容器映像来部署服务。这些服务容器可使用 Podman 命令进行管理，并可使用 Red Hat OpenStack Director 进行部署，配置和维护。</block>
  <block id="7adea0d9c77aabccd8bb67ae0a832d59" category="cell">项目名称</block>
  <block id="e7a39f4cb0dd0ffaaffe8fb0319dec67" category="cell">OpenStack 网络</block>
  <block id="4f0550f066ae72bb8c24fc3f59c323bf" category="cell">块存储</block>
  <block id="670aaecb1a526fbed439dad3ec353a96" category="cell">对象存储</block>
  <block id="b81a67bf2ab52e16a62a9c71454c90ee" category="paragraph">Red Hat OpenStack Director 需要 IPMI 功能才能使用具有讽刺意味的裸机配置服务部署 Red Hat OpenStack Platform 。</block>
  <block id="567f5ee3e60ecdd5338b39cab0006510" category="cell">存储基础架构</block>
  <block id="ea414c629935302b115bf3dabf5f827c" category="cell">中子通过 VXLAN 的通道为每个租户提供自己的网络。网络流量在每个租户网络中隔离。每个租户网络都有一个关联的 IP 子网，而网络命名空间意味着多个租户网络可以使用相同的地址范围而不会导致冲突</block>
  <block id="f2feccaa3f5d086f0b16010ff463e369" category="cell">公共网络，用于托管用于图形管理的 OpenStack 信息板（ Horizon ），并允许公有 API 调用来管理 OpenStack 服务。</block>
  <block id="493fd05bc58266bcd8394072cbe81748" category="paragraph">本文档中介绍的经验证的架构通过部署三个 OSP 控制器节点和两个 OSP 计算节点提供了最适合 HA 操作的硬件部署。此架构可确保容错配置，其中两个计算节点均可启动虚拟实例，而已部署的 VM 则可在两个虚拟机管理程序之间迁移。</block>
  <block id="ebe803a768c48af52bca59e6ab7df9bf" category="paragraph">由于 Red Hat OpenShift 最初使用三个主节点进行部署，因此双节点配置可能会发生原因至少两个主节点占用同一节点，从而可能导致 OpenShift 在特定节点不可用时发生中断。因此， Red Hat 的最佳实践是至少部署三个 OSP 计算节点，以便 OpenShift 主节点可以均匀分布，并且解决方案可以获得更多的容错能力。</block>
  <block id="bbfdc160550acbcdb4791a961a165d5d" category="paragraph">通过启用虚拟机 / 主机关联性，可以在多个虚拟机管理程序节点之间分布 OpenShift 主节点。</block>
  <block id="cb346122cae28dfb1fcf0811f46296a2" category="paragraph">关联性是一种为一组 VM 和 / 或主机定义规则的方法，用于确定这些 VM 是在组中的同一主机上运行还是在不同主机上运行。它通过创建由具有一组相同参数和条件的 VM 和 / 或主机组成的关联组来应用于 VM 。根据关联组中的 VM 是在组中的同一主机上运行，还是在不同主机上单独运行，此关联组的参数可以定义正关联性或负关联性。在 Red Hat OpenStack 平台中，可以通过创建服务器组和配置筛选器来创建和实施主机关联性和反关联性规则，以便 Nova 在服务器组中部署的实例部署在不同的计算节点上。</block>
  <block id="de5bd213c3df23736df75636241f96de" category="admonition">OSP 服务器组具有特定的硬关联性 / 反关联性限制；如果没有足够的资源可在不同的节点上部署，或者没有足够的资源可用于共享节点，则 VM 将无法启动。</block>
  <block id="42bb5e38e5b1c611bdce679410b24d67" category="paragraph">在这些情况下，无需立即部署集群，即可运行并执行向导任务；而是创建一个配置文件，以便稍后可以从中部署集群。如果您需要更改任何 IPI 默认值，或者要在环境中部署多个相同的集群以用于多租户等其他用途，则此功能非常有用。有关为 OpenShift 创建自定义安装配置的详细信息，请参见<block ref="05810b34cd92ddfe8fd049160cb24f72" category="inline-link-rx"></block>。</block>
  <block id="dc5fa659e0452a77d6006f5b72f8b334" category="paragraph">要启用 Trident 与 NetApp Element 存储系统的集成，您必须创建一个后端，以便使用 iSCSI 协议与存储系统进行通信。</block>
  <block id="05ca7295321cb9b417a251e75557c6c5" category="list-text">下载的安装归档中提供了 `sample-input` folder 层次结构中的示例后端文件。对于提供 iSCSI 服务的 NetApp Element 系统，将 `backend-solidfire.json` 文件复制到您的工作目录中，然后编辑该文件。</block>
  <block id="b73d05719d0ea2964c963f6f83a34d3d" category="admonition">此文件中定义了一个名为 `FSType` 的可选字段。在 iSCSI 后端，可以将此值设置为特定的 Linux 文件系统类型（ XFS ， ext4 等），也可以将其删除以允许 OpenShift 决定要使用的文件系统。</block>
  <block id="90dc29cb8c225faef816aefeaad3027d" category="inline-link-macro">接下来：解决方案验证 / 使用情形。</block>
  <block id="99632a9c8a0d8380e77d9d11f96edfdc" category="paragraph"><block ref="99632a9c8a0d8380e77d9d11f96edfdc" category="inline-link-macro-rx"></block></block>
  <block id="920db239cf01c8ded4b7f364194ab540" category="list-text">从边栏导航到管理应用程序，然后单击创建应用程序。提供要创建的应用程序的详细信息，然后单击保存。</block>
  <block id="f4fc33973424c12639f93790b1c6f370" category="paragraph">NetApp 提供强大的全闪存（ AFF ）和横向扩展混合（ FAS ）存储平台，这些平台专为低延迟性能，集成数据保护和多协议支持量身定制。</block>
  <block id="c48db988cd283c11f89d4dd85803ec0a" category="doc">在使用 NetApp 的 Red Hat OpenShift 上配置多租户</block>
  <block id="6d72da55d82cdd434045ba5df1a959b6" category="paragraph">许多在容器上运行多个应用程序或工作负载的组织往往会为每个应用程序或工作负载部署一个 Red Hat OpenShift 集群。这样，他们就可以对应用程序或工作负载实施严格的隔离，优化性能并减少安全漏洞。但是，为每个应用程序部署一个单独的 Red Hat OpenShift 集群会产生自己的一系列问题。它增加了单独监控和管理每个集群所需的运营开销，由于为不同应用程序配置了专用资源而增加了成本，并妨碍了高效的可扩展性。</block>
  <block id="332dcd535fa9ce865f462efb80829a35" category="paragraph">要解决这些问题，可以考虑在一个 Red Hat OpenShift 集群中运行所有应用程序或工作负载。但是，在这种架构中，资源隔离和应用程序安全漏洞是主要挑战之一。一个工作负载中的任何安全漏洞都可能自然溢出到另一个工作负载，从而增加影响区域。此外，一个应用程序的任何突然不受控制的资源利用率都会影响另一个应用程序的性能，因为默认情况下没有资源分配策略。</block>
  <block id="73c1b26ace2fc5fca6e6e78c00a61837" category="paragraph">其中一个有效的解决方案是在 Red Hat OpenShift 上配置多租户。多租户是一种架构，允许多个租户在同一集群上共存，并正确隔离资源，安全性等。在这种情况下，可以将租户视为集群资源的一部分，这些资源配置为供特定用户组专用使用。在 Red Hat OpenShift 集群上配置多租户具有以下优势：</block>
  <block id="f3ff3f5b3c67fb47bb8ec0f2f688b97d" category="paragraph">对于完全实现的多租户 OpenShift 集群，必须为属于不同资源分段的集群资源配置配额和限制：计算，存储，网络连接，安全性等。虽然我们会介绍此解决方案中所有资源分段的某些方面， 我们重点介绍最佳实践，通过在由 NetApp ONTAP 提供支持的 Astra Trident 动态分配的存储资源上配置多租户，隔离并保护同一 Red Hat OpenShift 集群上多个工作负载提供或使用的数据。</block>
  <block id="1cf7b9db4d7fe091bd1bbb685e5beea8" category="paragraph">使用 Red Hat Advanced Cluster Management for Kubernetes 可以执行以下任务：</block>
  <block id="808c579683377aa7bd89b8e4d76ba220" category="list-text">跨数据中心和公有云创建，导入和管理多个集群。</block>
  <block id="7fe0555145a586e3fb769f86902ccc72" category="list-text">从一个控制台在多个集群上部署和管理应用程序或工作负载。</block>
  <block id="416434625b0f2158d99a4af37f233805" category="list-text">监控和分析不同集群资源的运行状况和状态</block>
  <block id="fed6fdd49a1e6adda0ea12a93e74ea2d" category="list-text">监控并强制实施多个集群的安全合规性。</block>
  <block id="1630dbfdd4887ce201ea82c71cde3d11" category="doc">部署适用于 Kubernetes 的高级集群管理</block>
  <block id="bc2ab7a7550cebeb52a08cf830b5ecf6" category="list-text">导航到 Operators &gt; Operators Hub ，然后搜索适用于 Kubernetes 的高级集群管理。</block>
  <block id="c4ab802b80978ba1c5de3922d546bdb7" category="list-text">选择适用于 Kubernetes 的高级集群管理，然后单击安装。</block>
  <block id="c972585d6241c4f2ed2604bcc8706358" category="list-text">在 Install Operator 屏幕上，提供必要的详细信息（ NetApp 建议保留默认参数），然后单击 Install 。</block>
  <block id="7bf3d0678c48be5730f20005e6f88aa1" category="list-text">安装操作员后，单击创建多集群中心。</block>
  <block id="95f29f27e373a9759cf065e1fde23e28" category="list-text">在 "Create MultiClusterHub " 屏幕上，在提供详细信息后单击 "Create 。此操作将启动多集群集线器的安装。</block>
  <block id="a50aa5e8249109d6f4902945e968ad7d" category="list-text">在打开集群管理命名空间中的所有 Pod 均移至运行状态且操作员移至成功状态后，将安装适用于 Kubernetes 的高级集群管理。</block>
  <block id="391dd52c88201d377f1572062e22c43e" category="list-text">完成集线器安装需要一些时间，完成后，多集群集线器将变为运行状态。</block>
  <block id="eef36825efd5d2d40e4f833635cd19da" category="list-text">它会在开放式集群管理命名空间中创建路由。连接到路由中的 URL 以访问高级集群管理控制台。</block>
  <block id="f122078c68f20c36897fec8a7c4a23e8" category="doc">OpenShift 概述</block>
  <block id="8c2b388bd42b0b6bae19890633c98a8d" category="list-text">* 安全性和容器目录。 * OpenShift 可提供多租户功能，并通过使用安全性增强型 Linux （ SELinux ）， CGroups 和安全计算模式（ seccomp ）中已建立的安全性隔离和保护容器，保护用户免受有害代码执行的影响。此外，它还通过 TLS 证书为各种子系统提供加密，并可访问经过 Red Hat 认证的容器（ access.redhat.com/containers ），这些容器经过扫描和评级，并特别强调安全性，以便为最终用户提供经过认证的，可信的安全应用程序容器。</block>
  <block id="9c2dd02f13d452b4422ac6c864933f01" category="paragraph">从 Red Hat OpenShift 4 开始， OpenShift 的部署方法包括使用用户配置基础架构（ User Provisioned Infrastructure ， UPI ）手动部署高度自定义的部署，或者使用安装程序配置的基础架构（ IPI ）完全自动化部署。</block>
  <block id="66f8ff89bd2c9146cb3273d416c60fd2" category="list-text">选择要将 Red Hat OpenShift 部署到的环境。</block>
  <block id="f5806bcee67fc8f13f0255068a186e42" category="list-text">在下一屏幕中，下载安装程序，唯一的拉取密钥以及用于管理的 CLI 工具。</block>
  <block id="d711fd24836980dd490f3c01dd3ee8de" category="paragraph">NetApp 已使用安装程序配置基础架构（ IPI ）部署方法在以下每个数据中心环境中测试和验证了 Red Hat OpenShift 在其实验室中的部署：</block>
  <block id="77caa49b32b4fc8ce3276158f57f9229" category="doc">NetApp 存储概述</block>
  <block id="50bc4bb14f0d89a22c593112574d0fb3" category="list-text">AFF 和 FAS 系统运行 NetApp ONTAP ，并为基于文件（ NFS ）和基于块（ iSCSI ）的使用情形提供存储。</block>
  <block id="bf3bfadca5040d5a50a8703c7dbb7ef1" category="list-text">Cloud Volumes ONTAP 和 ONTAP Select 在云和虚拟空间方面的优势各不相同。</block>
  <block id="cb050b8fb8c2102a0ab337119eb19f0f" category="admonition">NetApp 产品组合中的每个存储系统都可以简化内部站点和云之间的数据管理和移动，从而确保数据位于应用程序所在位置。</block>
  <block id="b432301f7ba469598e6ea2eb86e4859a" category="paragraph">通常，最易于部署的解决方案是最佳选择，但在某些情况下，需要进行高级自定义，以满足特定应用程序或要部署解决方案的环境的要求或规范。为此，采用 NetApp 解决方案的 Red Hat OpenShift 允许进行以下自定义以满足这些需求。</block>
  <block id="d31d340fd6b135cac2cfac7b04a34c10" category="list-text">在左上角，将角色从管理员更改为开发人员。单击 +Add ，然后从目录中选择。在 Filter by Keyword 栏中，搜索 Jenkins 。选择 Jenkins Service with Persistent Storage 。</block>
  <block id="fb86f2dea9912af1bb1677c9cf33e619" category="list-text">Jenkins Pod 大约需要 10 到 12 分钟才能进入就绪状态。</block>
  <block id="d59d1324dea050a2c0ffc376de411aa0" category="list-text">由于在创建 Jenkins 应用程序时使用了 OpenShift OAuth ，因此请单击使用 OpenShift 登录。</block>
  <block id="70a742210f3e3599821b3a11b682144c" category="list-text">授权 Jenkins 服务帐户访问 OpenShift 用户。</block>
  <block id="b07934b6023389a7e3e183b45e3b7448" category="list-text">此时将显示 Jenkins 欢迎页面。由于我们使用的是 Maven 内部版本，因此请先完成 Maven 安装。导航到 Manage Jenkins &gt; Global Tool Configuration ，然后在 Maven 子标题中单击 Add Maven 。输入您选择的名称，并确保已选中自动安装选项。单击保存。</block>
  <block id="8fd32305bf380bf893ef2407eae75f5d" category="list-text">现在，您可以创建一个管道来演示 CI/CD 工作流。在主页上，单击左侧菜单中的创建新作业或新建项目。</block>
  <block id="cd55d787cacfb25983e0a24b58ba6d48" category="list-text">选择管道选项卡。从试用样本管道下拉菜单中，选择 Github + Maven 。代码将自动填充。单击保存。</block>
  <block id="eaeef52618dbbd29ca52633c93abcbb4" category="list-text">选择所需的操作系统，然后单击下一步。</block>
  <block id="6befc3ce0d5cbd575434f0d5e1ec1125" category="list-text">如果选定操作系统未配置启动源，则必须对其进行配置。对于启动源，选择是要从 URL 还是从注册表导入操作系统映像，并提供相应的详细信息。展开高级并选择 Trident 支持的 StorageClass 。然后单击下一步。</block>
  <block id="3d210170d7f07fe3c907e8ac619f003a" category="doc">NetApp Astra 控制中心概述</block>
  <block id="9b0d9ae1197ded2c7d52147e5056475d" category="paragraph">NetApp Astra 控制中心为部署在内部环境中并采用 NetApp 数据保护技术的有状态 Kubernetes 工作负载提供丰富的存储和应用程序感知型数据管理服务。</block>
  <block id="f0358bd53d50b55aa0509189dd381ca9" category="paragraph">NetApp Astra 控制中心可以安装在 Red Hat OpenShift 集群上，该集群已部署 Astra Trident 存储编排程序并为其配置存储类和存储后端到 NetApp ONTAP 存储系统。</block>
  <block id="8cc4d72a7129322eb1f39ea9b9cfb2f6" category="inline-link-macro">本文档在此处提供</block>
  <block id="1c2ddd920580e1a7860afb96d7ac352e" category="paragraph">有关安装和配置 Astra Trident 以支持 Astra 控制中心的信息，请参见 <block ref="a581b27b235a239b8b186164c4dbebd1" category="inline-link-macro-rx"></block>。</block>
  <block id="876ae62d75901b9ef80277fd884aa5e9" category="paragraph">在云互联环境中， Astra 控制中心使用 Cloud Insights 提供高级监控和遥测功能。在没有 Cloud Insights 连接的情况下，可以使用有限的监控和遥测（ 7 天的指标），并通过开放式指标端点导出到 Kubernetes 原生监控工具（ Prometheus 和 Grafana ）。</block>
  <block id="54a5ba4de846d3c3ba8c0322f5139893" category="paragraph">Astra 控制中心完全集成到 NetApp AutoSupport 和 Active IQ 生态系统中，可为用户提供支持，协助进行故障排除以及显示使用情况统计信息。</block>
  <block id="34610c3089a79a0b0e58bcc24da4c16c" category="paragraph">除了已付费版本的 Astra 控制中心之外，还提供 90 天评估许可证。评估版可通过电子邮件和社区（ Slack 通道）获得支持。客户可以访问这些以及其他知识库文章以及产品支持信息板上提供的文档。</block>
  <block id="b3d5fa878980b3f5b771ced3fa94111a" category="inline-link-macro">Astra 网站</block>
  <block id="83d307afe7b187cee5d096f65402182f" category="paragraph">要开始使用 NetApp Astra 控制中心，请访问 <block ref="230f9d60eb4e7cc8be41a0e702c37eff" category="inline-link-macro-rx"></block>。</block>
  <block id="7f9648de128837be473a3b24e53ff823" category="section-title">安装 Astra 控制中心的前提条件</block>
  <block id="8ffc0d45ec909884b280603fd2556021" category="list-text">一个或多个 Red Hat OpenShift 集群。目前支持版本 4.6 EUS 和 4.7 。</block>
  <block id="526a5a0f546838d61791ded926113f71" category="list-text">必须已在每个 Red Hat OpenShift 集群上安装和配置 Astra Trident 。</block>
  <block id="7433dd0f15704f71764248a0ca105fad" category="admonition">最佳做法是，在站点上安装的每个 OpenShift 都要有一个专用的 SVM 来用于永久性存储。多站点部署需要额外的存储系统。</block>
  <block id="e32d2cb3312c2c7797ca52bd8d6ff26f" category="admonition">请参见链接 <block ref="0065297854ca0573913043e80b99a2d1" category="inline-link-macro-rx"></block> 有关已为此目的验证的负载平衡器的信息。</block>
  <block id="aa32c16385a1b749687956188e4f0d9a" category="admonition">请参见链接 <block ref="9d2000c3bba4885fe5f36ed192264583" category="inline-link-macro-rx"></block> 为此安装和配置 OpenShift 专用注册表。</block>
  <block id="8efc7e44bb98c81afc71990bff28c8ea" category="list-text">登录到 NetApp 支持站点并下载最新版本的 NetApp Astra 控制中心。为此，您需要在 NetApp 帐户中附加许可证。下载完 tarball 后，将其传输到管理工作站。</block>
  <block id="121c2592ea226f655d357a8ecd8caf2e" category="inline-link">Astra 注册站点</block>
  <block id="ba6df9237a2774d7ca28cdf134cf9314" category="admonition">要开始获取 Astra Control 的试用许可证，请访问<block ref="dd61f8f3fbfa8ca8b0a268b985d55b0e" category="inline-link-rx"></block>。</block>
  <block id="29fc4f6574f437e623e4eb9d47136931" category="list-text">开始安装之前，请将 Astra Control Center 映像推送到映像注册表。</block>
  <block id="25b4e951c048e2ae39554f36af8824b9" category="admonition">您可以选择使用 Docker 或 Podman 执行此操作，此步骤将提供这两者的说明。</block>
  <block id="a53846d7be2355a59af69a47e2cf4637" category="list-text">创建 Shell 脚本文件并将以下内容粘贴到其中。</block>
  <block id="ad3318a786149147666e961c291c6875" category="admonition">如果您的注册表使用的是不可信的证书，请编辑 shell 脚本并对` podman 推送命令 ` `podman 推送 $registry/$ （ echo $astraImage^ s/^ ……………………………………………………………………………………………………………………………………………` …</block>
  <block id="f39d61476380fc033f45c2d744596b00" category="list-text">接下来，将映像注册表 TLS 证书上传到 OpenShift 节点。为此，请使用 TLS 证书在 OpenShift-config 命名空间中创建一个配置映射，并将其修补到集群映像配置中以使此证书可信。</block>
  <block id="508ca0ca5ae419c052d9a8487bb0b2d0" category="admonition">如果您使用的是包含传入操作员的默认 TLS 证书的 OpenShift 内部注册表和路由，则仍需要按照上一步将这些证书修补到路由主机名。要从 `运算符提取证书，您可以使用命令` oc extract secret/router -ca -keys=tls.crt -n OpenShift-Inuse-operator 。</block>
  <block id="6d71c41a686bcfc0b0866044afd43f2b" category="list-text">创建用于访问该命名空间中的映像注册表的密钥。</block>
  <block id="25eb68598d15a49d385089020950412c" category="list-text">编辑 Astra 控制中心 CRD 文件 `Astra_control_center_min.yaml` 并输入 FQDN ，映像注册表详细信息，管理员电子邮件地址和其他详细信息。</block>
  <block id="42b9bde28896d6478a324770641ac301" category="admonition">先前的文件 `Astra_control_center_min.yaml` 是 Astra 控制中心 CRD 的最低版本。如果要创建具有更多控制权的 CRD ，例如定义非默认创建 PVC 的 storageclass 或为邮件通知提供 SMTP 详细信息，则可以编辑文件 `Astra_control_center.YAML` ，输入所需详细信息，然后使用它创建 CRD 。</block>
  <block id="68a6fcf9c2943281db013ef2ebb142f2" category="section-title">安装验证</block>
  <block id="e3cd33ca69b8e508c973939783f528db" category="list-text">完成安装可能需要几分钟时间。验证 `NetApp-Astra-cc` 命名空间中的所有 Pod 和服务是否均已启动且正在运行。</block>
  <block id="c27deb19babf146e6377dce25b1e70e7" category="list-text">用于登录到 Astra 控制中心的用户名是 CRD 文件中提供的管理员电子邮件地址，密码是附加到 Astra 控制中心 UUID 的字符串 `Acc-` 。运行以下命令：</block>
  <block id="57a7aa2eaf00ddaa73ef6b49299ade6e" category="admonition">在此示例中，密码为 `Acc-345c55a5-bf2e-21f0-84b8-b6f2bce5e95f` 。</block>
  <block id="19bae630567610f1955167595b8daae3" category="list-text">首次使用 CRD 中提供的管理员电子邮件地址登录到 Astra 控制中心图形用户界面时，您需要更改密码。</block>
  <block id="0c62383e1115b208212b5a634214ae37" category="list-text">如果要将用户添加到 Astra 控制中心，请导航到 Account &gt; Users ，单击 Add ，输入用户的详细信息，然后单击 Add 。</block>
  <block id="60423d24e49c8db4836be0abd09fb78d" category="doc">NetApp ONTAP iSCSI 配置</block>
  <block id="cbaa3aa588b8aa5c85dca443c15a0195" category="doc">NetApp ONTAP NFS 配置</block>
  <block id="f897eefba2c59919d6493db4825e2db2" category="admonition">最佳做法是，将自定义 backendName 值定义为 storageDriverName 和为 NFS 提供服务的 dataLIF 的组合，以便于识别。</block>
  <block id="a802e9436bb9bcbfa2b88bb549e28503" category="paragraph">在大多数情况下， Red Hat OpenShift 会通过路由向外部世界提供应用程序。通过为服务提供一个可从外部访问的主机名来公开该服务。OpenShift 路由器可以使用定义的路由及其服务标识的端点，以便为外部客户端提供此命名连接。</block>
  <block id="abd6754aa5a185ca83b3f00c5da68534" category="inline-link-macro">接下来：解决方案验证 / 使用情形。</block>
  <block id="8bfe62be82a77570753936203ee020ca" category="paragraph"><block ref="8bfe62be82a77570753936203ee020ca" category="inline-link-macro-rx"></block></block>
  <block id="445b72f2cbecd97022bb6636eda3cbc7" category="cell">为不同的应用程序或工作负载创建项目</block>
  <block id="bfc5fb8ef5464441bc8b3ca7eda2892d" category="cell">验证对已分配项目中的 PVC 或 Pod 的创建或修补访问权限</block>
  <block id="9e95c94350b2b7b51176ad958deb1388" category="cell">验证对在其他项目中创建或修补 PVC 或 Pod 的访问权限</block>
  <block id="8c0b7954d326b4bcf2f42a57ef00eead" category="cell">验证对查看或编辑项目， ResourceQuotas 和 StorageClasses 的访问权限</block>
  <block id="c2c2a82496277a88b32b0e8d27249d3d" category="inline-link-macro">下一步：保护应用程序。</block>
  <block id="d5be948b8a7fea6618eb171c64927be2" category="paragraph"><block ref="d5be948b8a7fea6618eb171c64927be2" category="inline-link-macro-rx"></block></block>
  <block id="bbb49986c10d9b599ce8b72ea09d5261" category="list-text">导航到 Operators &gt; OperatorHub 并搜索 OpenShift 虚拟化。</block>
  <block id="2515fbef39d57544723402c683215c64" category="doc">NetApp 存储集成概述</block>
  <block id="689ca76b61ed9331405d36eb5ded709d" category="paragraph">NetApp 提供了许多产品，可帮助您在基于容器的环境中编排和管理永久性数据，例如 Red Hat OpenShift 。</block>
  <block id="bc2397695676d1a63e489d4c80c8cd91" category="paragraph">通过适用于 Kubernetes 的高级集群管理功能，用户可以从控制台同时在一个或多个受管集群上创建资源。例如，如果您的 OpenShift 集群位于不同站点，并由不同的 NetApp ONTAP 集群提供支持，并且希望在两个站点上配置 PVC ，则可以单击顶部栏上的（ + ）符号。然后，选择要创建 PVC 的集群，粘贴资源 YAML ，然后单击创建。</block>
  <block id="2fb91f8695d5dc9db4bf5a7ef710ec73" category="list-text">Astra 控制中心会检测符合条件的存储类。现在，选择使用 NetApp ONTAP 上由 SVM 支持的 Trident 配置卷的 storageclass 方式，然后单击查看。在下一个窗格中，验证详细信息，然后单击 Add Cluster 。</block>
  <block id="3edb3c83eb1bede6778cc1960a651973" category="list-text">按照步骤 1 中所述注册两个 OpenShift 集群。添加后，集群将变为 " 正在发现 " 状态，而 Astra 控制中心将对其进行检查并安装必要的代理。成功注册后，集群状态将更改为 " 正在运行 " 。</block>
  <block id="ed5c1a60b8165b8bc691cbdf1b0d122c" category="admonition">在受管集群上安装的代理从该注册表中提取映像时，由 Astra 控制中心管理的所有 Red Hat OpenShift 集群都应有权访问用于安装的映像注册表。</block>
  <block id="feab1371530d1ef069d928e811bcb08b" category="list-text">要导入 ONTAP 集群，请转到后端，单击下拉列表，然后选择要管理的 ONTAP 集群旁边的管理。输入 ONTAP 集群凭据，单击查看信息，然后单击导入存储后端。</block>
  <block id="d5a9f831c51dc05a9b40eae2850329fc" category="inline-link-macro">接下来：选择要保护的应用程序。</block>
  <block id="74dd157086250792afa856d5a6c32777" category="paragraph"><block ref="74dd157086250792afa856d5a6c32777" category="inline-link-macro-rx"></block></block>
  <block id="a62e902f0d244d960eddf2f14d3afa6f" category="paragraph">基于裸机的 OpenShift 可在商用服务器上自动部署 OpenShift 容器平台。</block>
  <block id="0e05c6235b67ae8e5b743c9ca77358fa" category="paragraph">基于裸机的 OpenShift 类似于 OpenShift 的虚拟部署，它可以轻松部署，快速配置和扩展 OpenShift 集群，同时还可以为尚未准备好进行容器化的应用程序提供虚拟化工作负载支持。通过在裸机上部署，除了 OpenShift 环境之外，您无需额外的开销即可管理主机虚拟机管理程序环境。通过直接在裸机服务器上部署，您还可以减少主机和 OpenShift 环境之间共享资源的物理开销限制。</block>
  <block id="9a3c3034787ddbd4af974d73f795c75a" category="list-text">* IPI 或辅助安装程序部署。 * 借助由安装程序配置基础架构（ IPI ）在裸机服务器上部署的 OpenShift 集群，客户可以直接在商用服务器上部署高度通用且易于扩展的 OpenShift 环境，而无需管理虚拟机管理程序层。</block>
  <block id="bf995f5252e568d22b265ec62c16914c" category="list-text">* 紧凑型集群设计。 * 为了最大限度地降低硬件要求，在裸机上使用 OpenShift ，用户只需部署包含 3 个节点的集群，它还允许 OpenShift 控制面板节点充当辅助节点和主机容器。</block>
  <block id="13442dfd439ae0a377b0a2d2d9df1709" category="list-text">* OpenShift 虚拟化。 * OpenShift 可以使用 OpenShift 虚拟化在容器中运行虚拟机。此容器本机虚拟化可在容器内运行 KVM 虚拟机管理程序，并为 VM 存储附加永久性卷。</block>
  <block id="6e6a5272d3c6f8eceb96e3c19f0faaf6" category="list-text">* 由 AI/ML 优化的基础架构。 * 通过将基于 GPU 的员工节点整合到 OpenShift 环境中并利用 OpenShift 高级计划，为机器学习应用程序部署 Kubeflow 等应用程序。</block>
  <block id="6bc136fcf409560a1029f6f323619bbf" category="paragraph">NetApp 解决方案上的 Red Hat OpenShift 使用两个数据交换机提供 25 Gbps 的主数据连接。它还使用两个管理交换机，这些交换机以 1 Gbps 的速度提供连接，用于存储节点的带内管理以及 IPMI 功能的带外管理。</block>
  <block id="17fea9675576fc9c72deb9501a5fd16a" category="paragraph">对于 OpenShift 裸机 IPI 部署，您必须创建一个配置程序节点，即必须将网络接口连接到不同网络的 Red Hat Enterprise Linux 8 计算机。</block>
  <block id="2f42f99315e0171a6e5c61957ae4689c" category="list-text">* 配置网络。 * 此网络用于启动裸机节点并安装部署 OpenShift 集群所需的映像和软件包。</block>
  <block id="aba727a2dc3dd836a33a2022bb2a9c3f" category="list-text">* 裸机网络。 * 此网络用于在部署集群后进行面向公共的通信。</block>
  <block id="7633522f66aaba6bc4bb2c25d299d287" category="paragraph">在设置配置程序节点时，客户会创建网桥接口，以便在节点本身以及为部署目的配置的 Bootstrap 虚拟机上正确路由流量。部署集群后， API 和传入 VIP 地址将从启动节点迁移到新部署的集群。</block>
  <block id="963d7d04e1f1692a7fc49ae899123dbd" category="paragraph">以下图像显示了 IPI 部署期间和部署完成后的环境。</block>
  <block id="f53272342c85041784b2d5136e6eaa7d" category="cell">裸机网络</block>
  <block id="11405696f0e53417a3847f430a7b8ed0" category="cell">配置网络</block>
  <block id="eb5f501445f81cb1f7f4cf290565f9c8" category="admonition">尽管这些网络中的每个网络实际上都由 VLAN 分隔，但必须在访问模式下设置每个物理端口并分配主 VLAN ，因为在 PXE 启动序列期间无法传递 VLAN 标记。</block>
  <block id="3ab0ae61b5256f874297403903fd5afc" category="paragraph">在部署 OpenShift 容器平台之前，应具备以下基础架构：</block>
  <block id="06a9d12a76441fd395abeba7bf0d7b91" category="list-text">至少一个 DNS 服务器，该服务器可提供可从带内管理网络和 VM 网络访问的完整主机名解析。</block>
  <block id="b611590ed189a9cbc27648402168f00a" category="inline-link-macro">接下来： NetApp 存储概述。</block>
  <block id="2be0276ec05c9b03a47573ad9795095a" category="paragraph"><block ref="2be0276ec05c9b03a47573ad9795095a" category="inline-link-macro-rx"></block></block>
  <block id="932e95da8a59703292a426466e703c7a" category="paragraph">Red Hat 虚拟化（ RHV ）是一个企业级虚拟数据中心平台，运行在 Red Hat Enterprise Linux （ RHEL ）上，并使用 KVM 虚拟机管理程序。</block>
  <block id="c29d3f9be705e3dcf947c6d2464cb090" category="list-text">* 自托管引擎。 * 为最大程度地降低硬件要求， RHV 允许将 RHV Manager （ RHV-M ）部署为运行子虚拟机的主机上的 VM 。</block>
  <block id="e2545c34b3a35dbcd93423b539eae91a" category="list-text">* 高可用性。 * 为避免在主机发生故障时发生中断，可以通过 RHV 配置虚拟机以实现高可用性。高可用性 VM 可通过故障恢复策略在集群级别进行控制。</block>
  <block id="8f91b3a5c6d176cad584bb5f06c53684" category="list-text">* 高可扩展性。 * 一个 RHV 集群最多可以包含 200 个虚拟机管理程序主机，从而支持大型 VM 的需求，从而托管资源耗用的企业级工作负载。</block>
  <block id="a175fea9b8830c0cdbe1b268cb114738" category="list-text">* 增强的安全性。 * RHV 继承了 RHV 的功能，安全虚拟化（ sVirt ）和安全增强型 Linux （ SELinux ）技术被 RHV 用于提高主机和 VM 的安全性和增强性能。这些功能的主要优势是对虚拟机及其相关资源进行逻辑隔离。</block>
  <block id="cd4c83df745cf56330120fb3ac308da2" category="paragraph">NetApp 解决方案上的 Red Hat OpenShift 使用两个数据交换机提供 25 Gbps 的主数据连接。它还使用两个额外的管理交换机，这些交换机以 1 Gbps 的速度提供连接，用于存储节点的带内管理以及 IPMI 功能的带外管理。OCP 使用 RHV 上的虚拟机逻辑网络进行集群管理。本节介绍解决方案中使用的每个虚拟网段的布局和用途，并概述部署解决方案的前提条件。</block>
  <block id="c347686b0750301dfca053b321126bcc" category="cell">对 RHP-H 节点， RHP-Manager 和 ovirtmgmt 网络进行管理</block>
  <block id="4a3fe6077a529bcbe033bbb7d13027d6" category="paragraph">由于 Red Hat OpenShift 最初使用三个主节点进行部署，因此在双节点配置中，可以确保至少有两个主节点将占用同一节点，如果特定节点不可用，可能会导致 OpenShift 中断。因此， Red Hat 的最佳实践是，在解决方案中至少部署三个 RHV-H 虚拟机管理程序节点，以便 OpenShift 主节点可以均匀分布，并且解决方案可以获得更多的容错能力。</block>
  <block id="02d7502b2b132a675665088322fde9b0" category="paragraph">为参数定义的条件可以是强制实施，也可以是软强制实施。强制实施可确保关联组中的 VM 始终严格遵循正负关联性，而不考虑外部条件。软强制实施可确保在可行的情况下为关联组中的 VM 设置更高的首选项，以遵循正或负关联性。在本文档所述的两个或三个虚拟机管理程序配置中，建议使用软关联性设置。在大型集群中，硬关联可以正确分布 OpenShift 节点。</block>
  <block id="2b083bcbbb2d2208e64c13cb183af44f" category="paragraph">IPI 可通过本文档前面讨论的交互式向导轻松部署 OpenShift 集群。但是，在集群部署过程中，可能需要更改某些默认值。</block>
  <block id="a5867d73fa54e5b850ff2642c45ade52" category="paragraph">在这些情况下，您无需立即部署集群即可运行和执行向导任务。而是会创建一个配置文件，以便稍后从该文件部署集群。如果要更改任何 IPI 默认值，或者要在环境中部署多个相同的集群以用于多租户等其他用途，则此功能非常有用。有关为 OpenShift 创建自定义安装配置的详细信息，请参见<block ref="15427a9f842d7a49b872cf64115f33bc" category="inline-link-rx"></block>。</block>
  <block id="1d45b25ba986072287aaf72b6cf94130" category="paragraph">虽然默认情况下，由 NetApp ONTAP 提供支持的 Red Hat OpenShift 和 Astra Trident 不会在工作负载之间提供隔离，但它们提供了广泛的功能，可用于配置多租户。为了更好地了解如何在采用 NetApp ONTAP 支持的 Astra Trident 的 Red Hat OpenShift 集群上设计多租户解决方案，让我们考虑一个包含一系列要求的示例，并概述其配置。</block>
  <block id="385df0e95c28430fb792ec836529f371" category="paragraph">假设一个组织在一个 Red Hat OpenShift 集群上运行两个工作负载，作为两个不同团队正在处理的两个项目的一部分。这些工作负载的数据驻留在由 NetApp ONTAP NAS 后端的 Astra Trident 动态配置的 PVC 上。该组织需要为这两个工作负载设计多租户解决方案，并隔离用于这些项目的资源，以确保保持安全性和性能，主要侧重于为这些应用程序提供服务的数据。</block>
  <block id="9c965c0beb472bc9265925ebbc55507e" category="paragraph">下图展示了由 NetApp ONTAP 提供支持的带有 Astra Trident 的 Red Hat OpenShift 集群上的多租户解决方案。</block>
  <block id="72710b926f57dad99b29203c63f4e3fd" category="paragraph">从 Red Hat OpenShift 集群的角度来看，要开始使用的顶级资源是项目。OpenShift 项目可以视为将整个 OpenShift 集群划分为多个虚拟集群的集群资源。因此，项目级别的隔离为配置多租户提供了基础。</block>
  <block id="20e1834bb9396599a6dcf7d743aa1b36" category="paragraph">下一步是在集群中配置 RBAC 。最佳做法是，将处理单个项目或工作负载的所有开发人员配置到身份提供程序（ IdP ）中的单个用户组中。Red Hat OpenShift 允许 IdP 集成和用户组同步，从而允许将 IdP 中的用户和组导入到集群中。这样可以帮助集群管理员将项目专用集群资源的访问权限隔离给一个或多个处理该项目的用户组，从而限制对任何集群资源的未授权访问。要了解有关 IdP 与 Red Hat OpenShift 集成的详细信息，请参见相关文档<block ref="213cff8958909b80a9514e0c8321d8ef" category="inline-link-rx"></block>。</block>
  <block id="6d4e96186b1f4267def393ec42bf2d9e" category="paragraph">必须隔离用作 Red Hat OpenShift 集群永久性存储提供程序的共享存储，以确保在存储上为每个项目创建的卷在主机上显示为它们，就像在单独的存储上创建一样。为此，请在 NetApp ONTAP 上创建与项目或工作负载数量相同的 SVM （ Storage Virtual Machine ），并将每个 SVM 专用于一个工作负载。</block>
  <block id="14b7e6063ba0fc293205b5f063ff5951" category="paragraph">在 NetApp ONTAP 上为不同项目创建不同的 SVM 之后，必须将每个 SVM 映射到不同的 Trident 后端。Trident 上的后端配置会将永久性存储分配给 OpenShift 集群资源，并且需要将 SVM 的详细信息映射到。此驱动程序至少应为后端的协议驱动程序。或者，您也可以通过它定义如何在存储上配置卷，并设置卷大小或聚合使用量等限制。有关 NetApp ONTAP 的 Trident 后端定义的详细信息，请参见<block ref="d13b7d5e649388dcbd372dea81ac2cd7" category="inline-link-rx"></block>。</block>
  <block id="666ef279afb3e53e20493813e1d5ba72" category="paragraph">配置 Trident 后端后，下一步是配置 StorageClasses 。配置与后端相同数量的存储类，为每个存储类提供访问权限，以便仅在一个后端启动卷。在定义存储类时，我们可以使用 storagePools 参数将 StorageClass 映射到特定的 Trident 后端。可以找到用于定义存储类的详细信息<block ref="fea785e27a2821a3ea27566d55a5d6cd" category="inline-link-rx"></block>。因此，从 StorageClass 到 Trident 后端存在一对一映射，这种映射可指向一个 SVM 。这样可以确保通过分配给该项目的 StorageClass 处理的所有存储请求仅由专用于该项目的 SVM 处理。</block>
  <block id="76245f392269db8492c3610e325b1963" category="paragraph">由于存储类不是命名空间资源，我们如何确保拒绝另一命名空间或项目中的 Pod 向一个项目的存储类声明？问题解答将使用 ResourceQuotas 。ResourceQuotas 是控制每个项目资源总使用量的对象。它可以限制项目中的对象可以使用的资源数量以及总资源量。使用 ResourceQuotas 几乎可以限制项目中的所有资源，而高效地使用此功能可以帮助组织降低因过度配置或过度消耗资源而导致的成本和中断。请参见文档<block ref="9b2bb9683c8f6144876bed616f252527" category="inline-link-rx"></block> 有关详细信息 ...</block>
  <block id="5402bb91006fe391aea122e11c3607db" category="paragraph">对于这种使用情形，我们需要限制特定项目中的 Pod 从非专用于其项目的存储类中申请存储。为此，我们需要通过将 ` &lt;storage-class-name&gt;.storageclass.storage.k8s.io/persistentvolumeclaims` 设置为 0 来限制其他存储类的永久性卷请求。此外，集群管理员必须确保项目中的开发人员不应有权修改 ResourceQuotas 。</block>
  <block id="b1a934cbded2602c4186fb43d7c8a986" category="paragraph">根据具体使用情形，容器和虚拟机（ VM ）均可用作不同类型应用程序的最佳平台。因此，许多组织在容器上运行部分工作负载，而在 VM 上运行部分工作负载。通常，这会导致企业面临额外的挑战，需要管理不同的平台：虚拟机管理程序和应用程序容器编排程序。</block>
  <block id="14bd8c5f1032dd20f94d4434365c6530" category="admonition">本节中提供的角色定义只是一个示例。必须根据最终用户要求定义开发人员角色。</block>
  <block id="cf17c458ea3abaad557d7cfc69886dbe" category="list-text">在集群中的所有项目中创建一个用于管理 ResourceQuotas 的角色，以将其连接到存储管理员：</block>
  <block id="db99ab183aa8f56c951cf20e25e7465c" category="list-text">确保集群与组织的身份提供程序集成，并且用户组与集群组同步。以下示例显示身份提供程序已与集群集成并与用户组同步。</block>
  <block id="38f22acd9ae9c74099644738d613baaa" category="admonition">对于存储管理员，必须绑定两个角色： Trident 操作员和资源配额。</block>
  <block id="3434f6853d017037506e47f83a18c3eb" category="section-title">创建私有映像注册表</block>
  <block id="9b1c6f527a1a481b925397807f319e71" category="list-text">在 `sPec` 部分中输入以下存储参数，以编辑 imageeregistry 运算符。</block>
  <block id="9ef71cd5ccaeb28206cd64b1d184019c" category="list-text">在 `sPec` 部分中输入以下参数，以便使用自定义主机名创建 OpenShift 路由。保存并退出。</block>
  <block id="e0b23bc469102cf89472e5734da92a23" category="admonition">如果要为路由设置自定义主机名，则会使用上述路由配置。如果您希望 OpenShift 使用默认主机名创建路由，可以将以下参数添加到 `sPec` 部分： `defaultRoute ： true` 。</block>
  <block id="625bd6ae5e3ac822b187b90d50edb553" category="sidebar-title">自定义 TLS 证书</block>
  <block id="08e414328e39f86009287c06a5f23d23" category="paragraph">默认情况下，当您为路由使用自定义主机名时，它会使用 OpenShift 入口操作员的默认 TLS 配置。但是，您可以向路由添加自定义 TLS 配置。为此，请完成以下步骤：</block>
  <block id="60d14675c3111738a4ed19528764a7b1" category="list-text">使用路由的 TLS 证书和密钥创建密钥。</block>
  <block id="47f7f890b5c1bcb52ae163771dbf35b0" category="list-text">编辑 imageeregistry 运算符，并将以下参数添加到 `sPec` 部分。</block>
  <block id="9199ff34349c38138ad0275e447e6588" category="list-text">再次编辑 imageeregistry 运算符，并将该运算符的管理状态更改为 `Maned` state 。保存并退出。</block>
  <block id="2bc42a1a9a963d9a3ff2118466e5db07" category="list-text">如果满足所有前提条件，则会为专用映像注册表创建 PVC ， Pod 和服务。几分钟后，注册表就会启动。</block>
  <block id="1f3713e339193dd15865ca74785eaa2c" category="list-text">如果您对传入操作员 OpenShift 注册表路由使用默认 TLS 证书，则可以使用以下命令提取 TLS 证书。</block>
  <block id="295132dd97e1047a7c09e6a48054c469" category="list-text">要允许 OpenShift 节点访问并从注册表中提取映像，请将证书添加到 OpenShift 节点上的 Docker 客户端。使用 TLS 证书在 `OpenShift-config` 命名空间中创建一个配置映射，并将其修补到集群映像配置中以使此证书可信。</block>
  <block id="98f3e484001465a59149c551e8d88cf0" category="list-text">OpenShift 内部注册表由身份验证控制。所有 OpenShift 用户都可以访问 OpenShift 注册表，但登录用户可以执行的操作取决于用户权限。</block>
  <block id="561d4c8140016564eee98ecbc20f9add" category="list-text">要允许用户或用户组从注册表中提取映像，必须为用户分配注册表查看器角色。</block>
  <block id="88167e36ea0f872788407d0e01fc1382" category="list-text">要允许用户或用户组写入或推送映像，必须为用户分配注册表编辑器角色。</block>
  <block id="5ba9e8f3c64be4c82249856cac87a071" category="list-text">要使 OpenShift 节点能够访问注册表并推送或拉取映像，您需要配置拉取密钥。</block>
  <block id="fe2033a9e377624583baa802ffd9ce6d" category="list-text">要将其修补到服务帐户，请运行以下命令。</block>
  <block id="59bd1dbdd3278e23e67bcabffbc4d55a" category="list-text">要在 Pod 定义中引用 Pull secret ，请将以下参数添加到 `sPec` 部分。</block>
  <block id="c0c3b4069e9a2e249507f67a6a2a3b07" category="list-text">要从 OpenShift 节点以外的工作站推送或拉取映像，请完成以下步骤。</block>
  <block id="312eaa3acf94b813cfe857f63a602724" category="list-text">使用 oc login 命令登录到 OpenShift 。</block>
  <block id="cb4744e00672fbf6eba33b1b86d23ae0" category="list-text">使用 podman/Docker 命令使用 OpenShift 用户凭据登录到注册表。</block>
  <block id="aa20d170f1ff336ec9079cf6dd1ccee3" category="list-text">推送或拉图像。</block>
  <block id="85ca996063b5ec233e56a20ba93c5f44" category="list-text">导航到存储 &gt; Storage VM ，然后单击添加。通过提供所需的详细信息，创建两个 SVM ，一个用于 project-1 ，另一个用于 project-2 。此外，还可以创建 vsadmin 帐户来管理 SVM 及其资源。</block>
  <block id="b436e7799d01413277e05983e509574a" category="list-text">以存储管理员身份登录到 Red Hat OpenShift 集群。</block>
  <block id="f934b433773b966e5ebe0c7172decda4" category="admonition">在此示例中，我们使用的是 ontap-NAS 驱动程序。根据使用情形创建后端时，请使用相应的驱动程序。</block>
  <block id="4e92dab2ab2bbe684f09a2aca58c9e44" category="list-text">NetApp ONTAP 集群。</block>
  <block id="f675b3d5e1e137870f481a742a3ec0af" category="list-text">集群上安装的 Trident 。</block>
  <block id="1db1a9d97c708824712706fc4267ec25" category="list-text">安装了 tridentctl 和 oc 工具并将其添加到 $path 中的管理工作站。</block>
  <block id="7cf4175762acfbabf9178d34f2504b28" category="list-text">对 ONTAP 的管理员访问权限。</block>
  <block id="10a540d0ed57154e8676c5725af53935" category="list-text">对 OpenShift 集群的集群管理员访问。</block>
  <block id="6340f6ab1111f349228595ebceb8f6db" category="list-text">集群已与身份提供程序集成。</block>
  <block id="9e110c19bb79322a0b76199795550dea" category="list-text">身份提供程序经过配置，可以有效区分不同团队中的用户。</block>
  <block id="39d08ecbb9add7bd87659df206457a73" category="list-text">用于集线器集群的 Red Hat OpenShift 集群（版本 4.5 以上）</block>
  <block id="d60c66eb778a488709534045787b6a26" category="list-text">对 Red Hat OpenShift 集群的集群管理员访问</block>
  <block id="3fc5f6755312b7edeef9542bd55ef639" category="section-title">监管和风险</block>
  <block id="87f4e127e0ecf99187b35830ca7e78aa" category="list-text">从边栏导航到监管和风险。</block>
  <block id="0ecc505d3375f8bb3bd959aaaf7e710a" category="list-text">要创建合规性策略，请单击创建策略，输入策略标准的详细信息，然后选择应遵循此策略的集群。如果要自动修复此策略的违规，请选中 " 如果支持，则强制 " 复选框，然后单击 " 创建 " 。</block>
  <block id="ea1abad541ee7994705555d53c0281c3" category="list-text">导航到工作负载 &gt; 虚拟化 &gt; 虚拟机，然后单击要克隆的虚拟机旁边的省略号。</block>
  <block id="81ab8abf2317781c0eb6f4deeaeea5a5" category="list-text">导航到 "Storage"&gt;"PersistentVolumeClass" ，然后单击附加到源 VM 的 PVC 旁边的省略号。</block>
  <block id="5ba8ff3c009683ee423b0884c25360d0" category="list-text">导航到工作负载 &gt; 虚拟化 &gt; 虚拟机，然后单击创建 &gt; 使用 YAML 。</block>
  <block id="cd32f6b0aebb29494cbc9cc21a10c926" category="list-text">在规范 &gt; 模板 &gt; 规范 &gt; 卷部分中，附加克隆的 PVC ，而不是容器磁盘。根据您的要求提供新虚拟机的所有其他详细信息。</block>
  <block id="f79c612e785ac74789a25e8dda9e8731" category="doc">Astra Trident 概述</block>
  <block id="d5cbeca32d73011c04935c16b2354a8d" category="paragraph">最新版本的 Astra Trident 是 2021 年 7 月发布的 21.07 版。已测试的 Trident 版本的支持列表，可在该支持列表中找到 Kubernetes 分发版本<block ref="dce7c52b3f1670b02b7a6d06eda6f8c5" category="inline-link-rx"></block>。</block>
  <block id="66397e1304e063a18fcee18c6e14aefb" category="list-text">将安装归档下载到管理工作站并提取内容。Trident 的当前版本为 21.07 ，可以下载<block ref="76ce6083b506b9f441ed0547bf1a84fd" category="inline-link-rx"></block>。</block>
  <block id="195fb7289db872221837de2f96721e05" category="paragraph">有关详细信息，请访问 Astra Trident 网站<block ref="727f15aa2af8bdae071f864617bcc142" category="inline-link-rx"></block>。</block>
  <block id="bd4a2d19c5168aa8c2b89b4affba2402" category="cell">9.8 ， 9.9.1</block>
  <block id="c1332fafdb8a2b2f43a59cf9254b881a" category="cell">21.07.1</block>
  <block id="a38c24ba09284f027e0cf4b9de820cca" category="inline-link"><block ref="a38c24ba09284f027e0cf4b9de820cca" category="inline-link-rx"></block></block>
  <block id="744e3fb2872b46d360c61869c864b352" category="paragraph"><block ref="744e3fb2872b46d360c61869c864b352" category="inline-link-rx"></block></block>
  <block id="4af39dbe40f8a0467bbdd739a971f0ea" category="admonition">以下消息指示 Astra 控制中心已成功安装。</block>
  <block id="5946314197ad84982efa6561d9da8302" category="list-text">获取 traefik 服务负载平衡器 IP 。</block>
  <block id="298a1e8781e536e60684ab1700c60962" category="list-text">在 DNS 服务器中添加一个条目，将 Astra 控制中心 CRD 文件中提供的 FQDN 指向 traefik 服务的 `external-IP` 。</block>
  <block id="0c64767e085896708adcbcc1c32c55fe" category="inline-image-macro">为 Accc 图形用户界面添加 DNS 条目</block>
  <block id="1c278e58c0255ae1f09fc4fa520160b6" category="paragraph"><block ref="1c278e58c0255ae1f09fc4fa520160b6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a37ba7c36c036650f5e1e7ded5232245" category="list-text">要使 Astra 控制中心的所有功能正常运行，需要获得许可证。要添加许可证，请导航到 " 帐户 "&gt;" 许可证 " ，单击 " 添加许可证 " ，然后上传许可证文件。</block>
  <block id="a003986254b5a6c136733113505348da" category="doc">安装 F5 BIG-IP 负载平衡器</block>
  <block id="048600e045fd4c5afe58ec9d65aa4b19" category="paragraph">F5 BIG-IP 是一款应用程序交付控制器（ Application Delivery Controller ， AD ），可提供一系列高级生产级流量管理和安全服务，例如 L4-L7 负载平衡， SSL/TLS 卸载， DNS ，防火墙等。这些服务可显著提高应用程序的可用性，安全性和性能。</block>
  <block id="5c47e8322efb7f77c0aa515fec29477e" category="paragraph">F5 BIG-IP 可以在专用硬件上，云中或内部虚拟设备上以各种方式进行部署和使用。请参见此处的文档，了解如何根据需要部署 F5 BIG-IP 。</block>
  <block id="16a275a8b38f9c5211732c331edb7135" category="paragraph">为了将 F5 BIG-IP 服务与 Red Hat OpenShift 高效集成， F5 提供了 BIG-IP 容器传入服务（ BIG-IP Container Ingress Service ， CIS ）。CI 作为控制器 POD 进行安装，用于监控 OpenShift API 以获取某些自定义资源定义（ Custom Resource Definitions ， CRD ），并管理 F5 BIG-IP 系统配置。可以配置 F5 BIG-IP CIS ，以控制 OpenShift 中的服务类型 LoadBalbalers" 和 " 路由 " 。</block>
  <block id="e3ce824a7aff01576faaac58df9e0b18" category="paragraph">此外，要自动分配 IP 地址以服务类型负载平衡器，您可以使用 F5 IPAM 控制器。F5 IPAM 控制器作为控制器 POD 进行安装，该控制器 POD 会通过 ipamLabel 标注监视 OpenShift API 以获取负载平衡器服务，以便从预配置的池分配 IP 地址。</block>
  <block id="3b08b142099d42d5280d7b493288bf63" category="paragraph">此页面列出了 F5 BIG-IP CIS 和 IPAM 控制器的安装和配置说明。作为前提条件，您必须已部署并获得 F5 BIG-IP 系统的许可。此外，它还必须获得 SDN 服务的许可，这些服务默认包含在 BIG-IP VE 基础许可证中。</block>
  <block id="5fb7b483d0c9fa099945579d826691b8" category="admonition">F5 BIG-IP 可以在独立模式或集群模式下部署。出于此验证的目的， F5 BIG-IP 部署在独立模式下，但出于生产目的，最好使用由大型 IP 组成的集群来避免单点故障。</block>
  <block id="0d3e8be481c0c23fd0a68da9a9340ef7" category="admonition">F5 BIG-IP 系统可以部署在专用硬件上，云中或内部部署的虚拟设备中，其版本高于 12.x ，以便与 F5 CIS 集成。在本文档中，我们已将 F5 BIG-IP 系统验证为虚拟设备，例如使用 BIG-IP VE 版本。</block>
  <block id="39bc153685f2a0c6d56db4227295a3b0" category="section-title">经过验证的版本</block>
  <block id="00d0a06cc7c922b3bc62b22524723ff8" category="cell">F5 BIG-IP VE 版本</block>
  <block id="5bd03f916d1e7b0410d0d3b2d12c6366" category="cell">16.1.0</block>
  <block id="c6f7874f49f685ffdf1b5a8aad8875c4" category="cell">F5 容器传入服务</block>
  <block id="21f47a5b35d016c2f0f8f57704079407" category="cell">2.5.1</block>
  <block id="9635118f932e26e24f0ca315d3843379" category="cell">F5 IPAM 控制器</block>
  <block id="5256eb2d6e3cf80e003a290e63843800" category="cell">0.1.4</block>
  <block id="088afeececf092d5a406e0f5022a9638" category="cell">F5 AS3</block>
  <block id="425b0ca2d1d9d5c75555116fcd1614bf" category="cell">3.30.0</block>
  <block id="7cd8fb6e31cc946c078d2740c76a9899" category="section-title">安装</block>
  <block id="b9a4064fa117596b59fb18df84df74df" category="inline-link">F5 AS3 GitHub 存储库</block>
  <block id="6463cf716c052865ec9f4716ff0b5d3f" category="list-text">安装 F5 Application Services 3 扩展，以允许 BIG-IP 系统接受 JSON 中的配置，而不是强制命令。转至<block ref="0d4e47593b830323684cdec40cb60c71" category="inline-link-rx"></block>，并下载最新的 RPM 文件。</block>
  <block id="4c0802ebd79a8c6e5ea4aed829f023c9" category="list-text">登录到 F5 BIG-IP 系统，导航到 "iApps" &gt; "Package Management LX" ，然后单击 "Import" 。</block>
  <block id="3536ed517a711f49cfe64071db031cf5" category="list-text">单击选择文件并选择已下载的 AS3 RPM 文件，单击确定，然后单击上传。</block>
  <block id="2a90f793207a5a0c028d8ccc45e943fd" category="inline-image-macro">上传 iApps</block>
  <block id="7a3eaac0605c201c339e116a475c0bf6" category="paragraph"><block ref="7a3eaac0605c201c339e116a475c0bf6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="caedd771b59d267eda8f88d329e8784f" category="list-text">确认 AS3 扩展已成功安装。</block>
  <block id="c434efeb83b6dc500ea7893f1ad4236b" category="inline-image-macro">AS3 安装验证</block>
  <block id="eb52ccb2be126d28d17e4383ae6ea6cf" category="paragraph"><block ref="eb52ccb2be126d28d17e4383ae6ea6cf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="97e9e05bfde432cfa7291b1e55a52ba7" category="list-text">接下来，配置 OpenShift 和 BIG-IP 系统之间通信所需的资源。首先，通过在 OpenShift SDN 的 BIG-IP 系统上创建 VXLAN 通道接口，在 OpenShift 和 BIG-IP 服务器之间创建通道。导航到 " 网络 "&gt;" 通道 "&gt;" 配置文件 " ，单击 " 创建 " ，然后将父配置文件设置为 VXLAN ，并将 " 洪水类型 " 设置为 " 多播 " 。输入配置文件的名称，然后单击完成。</block>
  <block id="faaca798da0468a250bf3c3bffc26681" category="inline-image-macro">创建 VXLAN 配置文件</block>
  <block id="bddf6bed69a1a2234f15cefc27853c50" category="paragraph"><block ref="bddf6bed69a1a2234f15cefc27853c50" category="inline-image-macro-rx" type="image"></block></block>
  <block id="45ae0c96657fdc5a20e83839c2386c1e" category="list-text">导航到 " 网络 "&gt;" 通道 "&gt;" 通道列表 " ，单击 " 创建 " ，然后输入通道的名称和本地 IP 地址。选择在上一步中创建的通道配置文件，然后单击完成。</block>
  <block id="1497a4f92d416d6c80392ec3467ff140" category="inline-image-macro">创建 VXLAN 通道</block>
  <block id="53ce9cdf8cf7f6cb09991e817df94959" category="paragraph"><block ref="53ce9cdf8cf7f6cb09991e817df94959" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cc5e5bc480b39177b8cb8c9c3a2266ae" category="list-text">使用 cluster-admin 权限登录到 Red Hat OpenShift 集群。</block>
  <block id="986e63a308b4bebd3f531e38fa5a06c7" category="list-text">在 OpenShift 上为 F5 BIG-IP 服务器创建一个子网，从而将子网从 OpenShift 集群扩展到 F5 BIG-IP 服务器。下载主机子网 YAML 定义。</block>
  <block id="fd4475e12938f5f51ba3f312b42cdd39" category="list-text">编辑主机子网文件并为 OpenShift SDN 添加 BIG-IP VTEP （ VXLAN 通道） IP 。</block>
  <block id="2e6d8a8db3c4d4a2227ffa0571be2a86" category="admonition">根据您的环境情况更改主机提示和其他详细信息。</block>
  <block id="7f9916ee1bc520d892dfbbb1e06e2732" category="list-text">创建 HostSubnet 资源。</block>
  <block id="7a46b2d02d466dda0cc67b215cb80bff" category="list-text">获取为 F5 BIG-IP 服务器创建的主机子网的集群 IP 子网范围。</block>
  <block id="4f6c1fea3654c07f1606c0c76509d0b0" category="list-text">在 OpenShift VXLAN 上使用与 F5 BIG-IP 服务器对应的 OpenShift 主机子网范围中的 IP 创建自 IP 。登录到 F5 BIG-IP 系统，导航到 " 网络 "&gt;" 自 IP " ，然后单击 " 创建 " 。输入为 F5 BIG-IP 主机子网创建的集群 IP 子网中的 IP ，选择 VXLAN 通道，然后输入其他详细信息。然后单击完成。</block>
  <block id="5c241806c0dd5ebb7030904151cb78ef" category="inline-image-macro">为 VXLAN 创建自 IP</block>
  <block id="ffad9e123d8b7013e7d4553570644879" category="paragraph"><block ref="ffad9e123d8b7013e7d4553570644879" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4d094b7d82871afb601d2f30d416ba8d" category="list-text">在 F5 BIG-IP 系统中创建一个分区，以便在 CIS 中配置和使用。导航到系统 &gt; 用户 &gt; 分区列表，单击创建，然后输入详细信息。然后单击完成。</block>
  <block id="4d81871723233ec21ed69ab80e638779" category="inline-image-macro">创建 BIG-IP 分区</block>
  <block id="b83428617c6ed29213f89e68f142bd18" category="paragraph"><block ref="b83428617c6ed29213f89e68f142bd18" category="inline-image-macro-rx" type="image"></block></block>
  <block id="37397397fa66431e2fa681b97126c399" category="admonition">F5 建议不要对由 CIS 管理的分区进行手动配置。</block>
  <block id="81e4a49e9dbe0b55256fe5abf1b94fa4" category="list-text">使用 OperatorHub 中的运算符安装 F5 BIG-IP CIS 。使用集群管理员权限登录到 Red Hat OpenShift 集群，并使用 F5 BIG-IP 系统登录凭据创建一个密钥，这是操作员的前提条件。</block>
  <block id="5de4ac005898cabf55523098c40c549b" category="list-text">安装 F5 CIS CRD 。</block>
  <block id="0eddace1b16ed738fe1be181481c71b6" category="list-text">导航到 Operators &gt; OperatorHub ，搜索关键字 F5 ，然后单击 F5 Container In出口 服务磁贴。</block>
  <block id="07543409cb05595e273df71050b9a9c0" category="inline-image-macro">OperatorHub 中的 F5 CIS</block>
  <block id="334a7bbf4711d93b48b93c2b81d84a71" category="paragraph"><block ref="334a7bbf4711d93b48b93c2b81d84a71" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c25b2a3d320d6d02584fde4190d05d91" category="list-text">阅读操作员信息，然后单击安装。</block>
  <block id="60d3353ed1910ad5c7bd352d0c1bea85" category="inline-image-macro">OperatorHub 中的 F5 CIS Info 图块</block>
  <block id="1aa79507d413f19135716c8006afa423" category="paragraph"><block ref="1aa79507d413f19135716c8006afa423" category="inline-image-macro-rx" type="image"></block></block>
  <block id="637a1bc658defc200d903b27828aa8fb" category="list-text">在 Install Operator 屏幕上，保留所有默认参数，然后单击 Install 。</block>
  <block id="ccf254d7c8b666c9c127ec12fe14804b" category="inline-image-macro">安装 F5 CIS 运算符</block>
  <block id="56e9cc6f2f7ece6c23fa6faa7f320d5d" category="paragraph"><block ref="56e9cc6f2f7ece6c23fa6faa7f320d5d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="636d8318702bc67a1613ceadf7ce9d00" category="list-text">安装操作员需要一段时间。</block>
  <block id="dffa3077bcff43536afd75bd61b11c0c" category="inline-image-macro">F5 CIS 操作员安装进度</block>
  <block id="b1be0ed9469d2ced1f6283b49735f5c1" category="paragraph"><block ref="b1be0ed9469d2ced1f6283b49735f5c1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="197a0a4cc4a45ec9a62fe2b7335d8dfc" category="list-text">安装操作员后，将显示安装成功消息。</block>
  <block id="5bf83e99bfa132430d0b690181334933" category="list-text">导航到 Operators &gt; Installed Operators ，单击 F5 Container In出口 服务，然后单击 F5BigIpCtrl+Alt+Del 图块下的 Create Instance 。</block>
  <block id="a5f584f06c59c2cf4a4a4e8b42d495a2" category="inline-image-macro">创建 F5BigIpCtlr</block>
  <block id="a2574a02e64888de32a5a277ed05f668" category="paragraph"><block ref="a2574a02e64888de32a5a277ed05f668" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c5ce9a4ef68c16a3ab5d0dd555305872" category="list-text">单击 YAML View ，并在更新必要参数后粘贴以下内容。</block>
  <block id="2e2beb899f89156ed06287fe6f78e6cf" category="admonition">在复制内容之前，更新以下参数 `bigip_partition` ， ` OpenShift_SDN_name` ， `bigip_url` 和 `bigip_login_secret` ，以反映您的设置值。</block>
  <block id="50a17348dc3f981a95001edcc80a428f" category="list-text">粘贴此内容后，单击创建。此操作将在 Kube-system 命名空间中安装 CIS Pod 。</block>
  <block id="72003ce6faa67d172e943ddd74fab63b" category="inline-image-macro">验证 F5 CIS Pod</block>
  <block id="ef76b6b9f85ff0ec00e48f565e13eff9" category="paragraph"><block ref="ef76b6b9f85ff0ec00e48f565e13eff9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fc8632c05e82ccafb395157ccae4f5c3" category="admonition">默认情况下， Red Hat OpenShift 提供了一种通过路由公开服务以实现 L7 负载平衡的方法。内置的 OpenShift 路由器负责公布和处理这些路由的流量。但是，您也可以将 F5 CIS 配置为支持通过外部 F5 BIG-IP 系统的路由，该系统可以作为辅助路由器运行，也可以替代自托管 OpenShift 路由器运行。CIS 在 BIG-IP 系统中创建一个虚拟服务器，充当 OpenShift 路由的路由器， BIG-IP 负责处理公告和流量路由。有关启用此功能的参数的信息，请参见此处的文档。请注意，这些参数是在 APPS/v1 API 中为 OpenShift 部署资源定义的。因此，在将这些参数与 F5BigIpartl 资源 cis.f5.com/v1 API 结合使用时，请将参数名称的连字符（ - ）替换为下划线（ _ ）。</block>
  <block id="a6e55fc1fe932b26a294a0f2880478aa" category="list-text">传递给创建 CIS 资源的参数包括 `ipam ： true` 和 `custom_resource_mode ： true` 。要启用与 IPAM 控制器的 CIS 集成，需要使用这些参数。通过创建 F5 IPAM 资源验证 CIS 是否已启用 IPAM 集成。</block>
  <block id="84ac0b78989fa6595723d5541b8ec470" category="list-text">创建 F5 IPAM 控制器所需的服务帐户，角色和角色绑定。创建 YAML 文件并粘贴以下内容。</block>
  <block id="670c1074ae74616731a63f6b9462b94e" category="list-text">创建资源。</block>
  <block id="b7802bea6dc04d06b63232b6301621bb" category="list-text">创建一个 YAML 文件并粘贴下面提供的 F5 IPAM 部署定义。</block>
  <block id="6a1491ddca525bea3293eca6ea8019d0" category="admonition">更新以下 spec.template.spec.containers[0].args 中的 ip-range 参数，以反映与您的设置对应的 ipamLabel 和 IP 地址范围。</block>
  <block id="642252b62fe47e95caa77e3b06a7dbaf" category="admonition">要使 IPAM 控制器能够从定义的范围检测和分配 IP 地址，需要为类型为 loadbalancer 的服务标注 ipamLabels （`range1` 和` range2 `in below example] ）。</block>
  <block id="8f253132259909c28624117b3476a672" category="list-text">创建 F5 IPAM 控制器部署。</block>
  <block id="43946dccec13f46420eb559911e4c526" category="list-text">验证 F5 IPAM 控制器 Pod 是否正在运行。</block>
  <block id="1362b3e7985b4f24d6c2ef4438ee1f0e" category="list-text">创建 F5 IPAM 模式。</block>
  <block id="52b8ffce119fe77b28034f2fdd35eb5f" category="section-title">验证</block>
  <block id="32172ccfad6e7060b8f5e091e296f09c" category="list-text">创建类型为 loadbalancer 的服务</block>
  <block id="0847be44e618094bc81c848c7d131399" category="list-text">检查 IPAM 控制器是否为其分配了外部 IP 。</block>
  <block id="0e51a0606ba7833099aa57bd61c62ba6" category="list-text">创建部署并使用已创建的负载平衡器服务。</block>
  <block id="5f905cb56a4d1b364cab7fc57f4de4e5" category="list-text">检查 Pod 是否正在运行。</block>
  <block id="51b4d723f0434284233dab97982b185d" category="list-text">检查是否在 OpenShift 中为 loadbalancing 类型的服务在 BIG-IP 系统中创建了相应的虚拟服务器。导航到 " 本地流量 "&gt;" 虚拟服务器 "&gt;" 虚拟服务器列表 " 。</block>
  <block id="91193cea3335c4666b7dc31ca767030c" category="inline-image-macro">验证是否为相应的服务类型负载平衡器创建了 BIG-IP 虚拟服务器</block>
  <block id="879dfaa1de924ed5e9ccb98da9ac95cd" category="paragraph"><block ref="879dfaa1de924ed5e9ccb98da9ac95cd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="10a93051f49f4080568cecc5ec30cd99" category="inline-link-macro">F5 BIG-IP</block>
  <block id="886218e92c071e06819887a13189b4e6" category="list-text"><block ref="886218e92c071e06819887a13189b4e6" category="inline-link-macro-rx"></block></block>
  <block id="0c3fd18fbca2ec11aa1ef250cf79f2e5" category="paragraph">NetApp Astra Control 采用 NetApp 数据保护技术，为有状态 Kubernetes 工作负载提供丰富的存储和应用程序感知型数据管理服务。Astra 控制服务可用于在云原生 Kubernetes 部署中支持有状态工作负载。Astra 控制中心可支持内部部署中的有状态工作负载，例如 Red Hat OpenShift 。有关详细信息，请访问 NetApp Astra Control 网站<block ref="508f471fa59796a53754f031c40091c1" category="inline-link-rx"></block>。</block>
  <block id="1bd63bf18edcc59af656e76ee09dd403" category="paragraph">NetApp Astra Trident 是一款开源且完全受支持的存储编排程序，适用于容器和 Kubernetes 分发版，包括 Red Hat OpenShift 。有关详细信息，请访问 Astra Trident 网站<block ref="727f15aa2af8bdae071f864617bcc142" category="inline-link-rx"></block>。</block>
  <block id="e6d792539f0b0370e43d76a3e05a211a" category="cell">一组虚拟化核心解决方案。解决方案可细分为以下类别之一： [ 海军 ]#VMware 虚拟化 # [ 海军 ]# 演示和教程 #</block>
  <block id="1f23e5de73e650f12cbafec55d8a98cd" category="cell"><block ref="1f23e5de73e650f12cbafec55d8a98cd" category="inline-link-macro-rx"></block></block>
  <block id="71504964e61456166baf63edd1fd32a1" category="paragraph">在 &lt;stdin&gt; 中未解析的指令 - 包括： hybrid-cloud /vsphere_ontap_best ； practices.adoc[lines=315..390]</block>
  <block id="92e62bb291a9fcec263b03f84a3f0603" category="list-text">TR-4597 ：适用于 ONTAP 的 VMware vSphere<block ref="069f205d7965d7d49a2c0f85080929db" category="inline-link-rx"></block></block>
  <block id="69f55c7d7266874ad1ed57caf459c979" category="summary">此用例基于我们所做的最大的财务客户概念验证（ CPOC ）。过去，我们使用 NetApp 原位分析模块（ NIPAM ）将分析数据迁移到 NetApp ONTAP AI 。但是，由于 NetApp XCP 的最新增强功能和性能的提高，以及 NetApp 独特的数据移动工具解决方案方法，我们使用 NetApp XCP 重新注册数据迁移。</block>
  <block id="5084e1c3bd53b6115df08f4c40aadbe6" category="doc">数据湖到 ONTAP NFS</block>
  <block id="ae8dcf06c5337995ca840fbd543188fc" category="inline-link-macro">先前：客户场景。</block>
  <block id="82f418da831bb7ca7897e30f8bc5525a" category="paragraph"><block ref="82f418da831bb7ca7897e30f8bc5525a" category="inline-link-macro-rx"></block></block>
  <block id="b1a11a01b3bdf3150e0240a1f037cdf5" category="section-title">客户面临的挑战和要求</block>
  <block id="9ed16d5ac47c336caaf9ca2b75930d78" category="paragraph">值得注意的客户挑战和要求包括：</block>
  <block id="b6976e1a47e217f1a7c746e8f57e327c" category="list-text">客户拥有不同类型的数据，包括结构化数据，非结构化数据和半结构化数据，日志， 以及数据湖中的机器到机器数据。AI 系统需要处理所有这些类型的数据，才能执行预测操作。如果数据位于数据湖本机文件系统中，则很难处理。</block>
  <block id="d85cb5080a9e99841f0ff6c36abdadad" category="list-text">客户的 AI 架构无法从 Hadoop 分布式文件系统（ Hadoop Distributed File System ， HDFS ）和 Hadoop 兼容文件系统（ Hadoop Compatible File System ， HCFS ）访问数据，因此 AI 操作无法使用这些数据。AI 要求数据采用可理解的文件系统格式，例如 NFS 。</block>
  <block id="982b6c87ace8f5b95c0523bd0557f4e2" category="list-text">由于数据量大，吞吐量大，因此需要采用一些特殊的流程从数据湖中移动数据，并且需要采用经济高效的方法将数据移动到 AI 系统。</block>
  <block id="d73e7d11401e9256a0dea0d1e174e1de" category="section-title">数据移动者解决方案</block>
  <block id="b0a9a6f2387f2a23e13931f68fc509c1" category="paragraph">在此解决方案中， MapR 文件系统（ MapR-FS ）是从 MapR 集群中的本地磁盘创建的。MapR NFS 网关在每个数据节点上使用虚拟 IP 进行配置。文件服务器服务用于存储和管理 MapR-FS 数据。NFS 网关使 Map-FS 数据可通过虚拟 IP 从 NFS 客户端访问。每个 MapR 数据节点上都运行一个 XCP 实例，用于将数据从映射 NFS 网关传输到 NetApp ONTAP NFS 。每个 XCP 实例都会将一组特定的源文件夹传输到目标位置。</block>
  <block id="01e1c2900284f91d77ea71ffd32c6d18" category="paragraph">下图显示了使用 XCP 的 MapR 集群的 NetApp 数据移动工具解决方案。</block>
  <block id="a7dcdfa2099e01480afb3c060c679f10" category="paragraph"><block ref="a7dcdfa2099e01480afb3c060c679f10" category="inline-image-macro-rx" type="image"></block></block>
  <block id="409f476aa8c516a92f8d6a42e21db5a0" category="inline-link">使用 XCP 将数据从数据湖和高性能计算迁移到 ONTAP NFS</block>
  <block id="4084b5f9c9bab8db38eb6e04a3b3a4cc" category="paragraph">有关详细的客户使用情形，录制的演示以及测试结果，请参见<block ref="c5fcc47a7dd315afaa32fcdac46ffd7d" category="inline-link-rx"></block> 博客</block>
  <block id="6cef4abedb8153458ee404a47b193489" category="inline-link">TR-4732 ：从大数据分析数据到人工智能</block>
  <block id="520ef13ea64298a652262e37756b6bd4" category="paragraph">有关使用 NetApp XCP 将 MapR-FS 数据移动到 ONTAP NFS 中的详细步骤，请参见中的附录 B<block ref="c952a09d2ff4403056a594c41db26c8d" category="inline-link-rx"></block>。</block>
  <block id="b4dd66db226c58dbbcc8455a7576d491" category="inline-link-macro">接下来：将高性能计算迁移到 ONTAP NFS 。</block>
  <block id="9ebf542ce4a3a8a997eb85e5b6e086ed" category="paragraph"><block ref="9ebf542ce4a3a8a997eb85e5b6e086ed" category="inline-link-macro-rx"></block></block>
  <block id="89185de94c95d958df7a1d1f328c5d3d" category="summary">要更好地规划和完成迁移，需要遵循不同的迁移阶段。要使用 NetApp XCP 从第三方 NAS 存储或直连 NAS 导出存储迁移数据，请遵循本节中提供的迁移准则。</block>
  <block id="ee5b035493cdde88f6472904ffe00677" category="doc">迁移工作流</block>
  <block id="33af37ca0d75bc0783cc87782a94cb6e" category="inline-link-macro">先前版本： NetApp XCP 。</block>
  <block id="c6f303d52bc03c848b2dde21f1b31f9d" category="paragraph"><block ref="c6f303d52bc03c848b2dde21f1b31f9d" category="inline-link-macro-rx"></block></block>
  <block id="5b312b66520bbb17746eeb5c9959e4ef" category="paragraph">下图显示了从任何 NAS 到 NetApp NAS 的迁移工作流。</block>
  <block id="228d4a26c37192668bb7f7bf0d81ce40" category="paragraph"><block ref="228d4a26c37192668bb7f7bf0d81ce40" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f0e69ccbb7ad96f546f7924206944bfa" category="section-title">内部部署</block>
  <block id="8df17c51ab4a9817f3fe7cea57052110" category="paragraph">从任何 NAS 到 NetApp NAS 的迁移工作流包括以下步骤：</block>
  <block id="3bd3dda9341b512ee536cc6e48d51a69" category="list-text">发现 NAS 共享和数据。</block>
  <block id="7800ed0aa4aebf1d63fd7120c2bcf538" category="list-text">扫描数据并生成报告以查找数据布局。</block>
  <block id="8e9880476ad79e202d93a0a7d0bb5f5b" category="list-text">运行 XCP Copy 命令创建基线。要加快迁移速度，请选择更多 XCP 实例并在子文件夹级别拆分工作负载，以启动并行迁移作业。</block>
  <block id="57324e972ea87c8e788d9831e510bc6d" category="list-text">对于增量更新，请使用 XCP sync ，直到转换窗口的更改率较低为止。</block>
  <block id="3812202d715addac73d7122672d3c8d0" category="list-text">运行 XCP sync 命令以完成迁移，将源标记为只读以执行最终同步。</block>
  <block id="2c1d8a91f274a7723f6ad2ffefc81b62" category="list-text">要验证数据传输是否正确，请运行 `XCP verify` 命令来比较源和目标。</block>
  <block id="8f4cde54f5af74d15d142ad98344aab6" category="paragraph">下图显示了从内部迁移到云的工作流。</block>
  <block id="9d1b3862e72bece8266c1c8b1098c696" category="paragraph"><block ref="9d1b3862e72bece8266c1c8b1098c696" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6e2fef7fa18bd688132425321b9188bb" category="paragraph">如果内部与云之间没有直接互联网连接，您必须通过叉车等脱机数据传输方法将数据从内部传输到云。每个云服务提供商都有一种不同的方法，使用不同的术语将数据移动到其数据中心。</block>
  <block id="9e76bcaf48df4797c2e546f778fd72f8" category="paragraph">下图展示了在不使用 ExpressRoute 的情况下从内部部署到 Azure 的数据移动程序解决方案。</block>
  <block id="e13bab0261f71ca4765f8b68cea20a43" category="paragraph"><block ref="e13bab0261f71ca4765f8b68cea20a43" category="inline-image-macro-rx" type="image"></block></block>
  <block id="423066080659363cc444ec5dee611f48" category="paragraph">您可以对不同云服务提供商提供的相应组件使用类似的架构。</block>
  <block id="050572d01f21dded8086b49419066add" category="inline-link-macro">接下来：文件分析。</block>
  <block id="ae292ee37a105844872f831698fb440f" category="paragraph"><block ref="ae292ee37a105844872f831698fb440f" category="inline-link-macro-rx"></block></block>
  <block id="c4e9391c8d60f1f326246cd6b6705492" category="summary">NetApp 收到了查找单个卷或多个卷中重复文件的请求。NetApp 提供了以下解决方案。</block>
  <block id="2e4e5fbe1f8f460b943ac3ed031c9dcf" category="doc">重复文件</block>
  <block id="f89d6874c6cf2c5de0dae9564728c7cf" category="inline-link-macro">先前版本：使用 XCP 数据移动器迁移大型文件。</block>
  <block id="6c8f161effcb72b9425f626e8733146b" category="paragraph"><block ref="6c8f161effcb72b9425f626e8733146b" category="inline-link-macro-rx"></block></block>
  <block id="dc4b36d55f5f1f0af63ed899a010c8f1" category="paragraph">对于单个卷，运行以下命令：</block>
  <block id="2d2f31777cf3433071b9bcd33f39279a" category="paragraph">对于多个卷，请运行以下命令：</block>
  <block id="fdefb3eaaab41fef36db24700d399ef2" category="inline-link-macro">下一步：基于日期的特定数据扫描和复制。</block>
  <block id="769f411db097d478d8d10a821946e501" category="paragraph"><block ref="769f411db097d478d8d10a821946e501" category="inline-link-macro-rx"></block></block>
  <block id="b25f76deff236f93a3afa73c8a5b2a2c" category="summary">此用例基于 NetApp 旅游行业中最大的客户将数百万个小型内部文件迁移到云。</block>
  <block id="4b1739353c6d18cea69ed6a274b7135f" category="doc">使用 XCP 数据移动器将数百万个小文件迁移到灵活存储</block>
  <block id="2b2142a0bf2476846ad59f7952380ca1" category="inline-link-macro">上一篇：高性能计算到 ONTAP NFS 。</block>
  <block id="c81efa558deea51a126490ba8d09b59a" category="paragraph"><block ref="c81efa558deea51a126490ba8d09b59a" category="inline-link-macro-rx"></block></block>
  <block id="bb29cc4e9e4447f7bad1e81c1c5a9a1f" category="paragraph">此用例基于 NetApp 旅游行业中最大的内部到云数据迁移客户。由于 COVID-19 降低了旅游行业的需求，因此客户希望在其内部环境中为需求定价应用程序节省高端存储的资本支出。该客户的 SLA 非常严格，需要将数百万个小文件迁移到云。</block>
  <block id="81ec900a5387f7a686d1451adaddf399" category="paragraph">下图展示了小型文件的数据从内部迁移到 Azure NetApp Files 。</block>
  <block id="214c5e9894032cde0e65b576e32294b9" category="paragraph"><block ref="214c5e9894032cde0e65b576e32294b9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="099a60093e7de3795f557974125ce82b" category="inline-link">NetApp XCP Data Mover 解决方案：从内部部署到云</block>
  <block id="50d4edabefc40ad9614b567197696a2e" category="paragraph">有关详细信息，请参见<block ref="2c0eb3741003532ef113837d4b882a9a" category="inline-link-rx"></block> 博客</block>
  <block id="3242fe890cd89c89373a1bd576cef03a" category="inline-link-macro">接下来：使用 XCP 数据移动器迁移大型文件。</block>
  <block id="c32441c7755c153b58450a597193448b" category="paragraph"><block ref="c32441c7755c153b58450a597193448b" category="inline-link-macro-rx"></block></block>
  <block id="485f9678c52b78d051ddff564d873eb9" category="summary">本节中的命令以 CSV 格式转储数据。您可以对 " 大小 " 列求和以获取数据的总大小。</block>
  <block id="92f6d6878e37105d20e75151b95d4e6a" category="doc">从 SMB/CIFS 共享创建 CSV 文件</block>
  <block id="bab825782f37e3f0cd908b20bc8aa74c" category="inline-link-macro">Previous ：基于日期的特定数据扫描和复制。</block>
  <block id="ad80673543d1d2744f55966060c4579b" category="paragraph"><block ref="ad80673543d1d2744f55966060c4579b" category="inline-link-macro-rx"></block></block>
  <block id="d122031c67144a65ca4721f8324ae0b3" category="paragraph">以下命令将以 CSV 格式转储数据。您可以对 " 大小 " 列求和以获取数据的总大小。</block>
  <block id="1bed902c0754e4abc7598b7f1a0450e0" category="paragraph">输出应类似于以下示例：</block>
  <block id="f7c322db5a6c805aed8a38858c7ba770" category="paragraph">要扫描三个子目录的深度并按排序顺序提供结果，请运行 `XCP -du` 命令，并将每个目录级别的大小转储到三个子目录的深度。</block>
  <block id="7c12bd6fa64456eb3a61460a4bbb98e6" category="paragraph">要进行排序，请将信息转储到 CSV 文件并对信息进行排序。</block>
  <block id="c2e9a8d6d376247b10a1ab4624bd2610" category="inline-link-macro">接下来：将数据从 7- 模式迁移到 ONTAP 。</block>
  <block id="7155e60f207d105fa4db5d15efdce133" category="paragraph"><block ref="7155e60f207d105fa4db5d15efdce133" category="inline-link-macro-rx"></block></block>
  <block id="2246a929033f1d77a86efa97dda42849" category="inline-link-macro">上一步：故障排除。</block>
  <block id="49c4600bab96ae4bda03f252b43985b4" category="paragraph"><block ref="49c4600bab96ae4bda03f252b43985b4" category="inline-link-macro-rx"></block></block>
  <block id="345245c83d2b2c4c2a5eb9f2887da627" category="paragraph">要了解有关本文档中所述信息的更多信息，请参见以下文档和 / 或网站：</block>
  <block id="464fbe5e9ea5b377de3943b7d1e73632" category="inline-link"><block ref="464fbe5e9ea5b377de3943b7d1e73632" category="inline-link-rx"></block></block>
  <block id="eba010943793fb5b647ad292a452b3ff" category="list-text">NetApp XCP 博客<block ref="2639c38af267ba997fc1d85740cfc9a6" category="inline-link-rx"></block></block>
  <block id="6ae1587e2fb0d146cd960f45d3f1fc13" category="inline-link"><block ref="6ae1587e2fb0d146cd960f45d3f1fc13" category="inline-link-rx"></block></block>
  <block id="fb8d9f206204f9562c2a67c6b37a7d1b" category="list-text">NetApp XCP 用户指南<block ref="05f41a166d52148335e3a0df2eafec23" category="inline-link-rx"></block></block>
  <block id="e2c2bd378a3ae3740034d637754af7e2" category="inline-link"><block ref="e2c2bd378a3ae3740034d637754af7e2" category="inline-link-rx"></block></block>
  <block id="79b44e54a5eac82beac2de86249cd862" category="list-text">将大数据分析数据转换为人工智能—适用于 AI 的数据移动工具解决方案<block ref="79ced727b5c9638c0385a25671803fba" category="inline-link-rx"></block></block>
  <block id="9ebf058ce7a44ad4517e7033db8a90a7" category="paragraph"><block ref="9ebf058ce7a44ad4517e7033db8a90a7" category="inline-link-macro-rx"></block></block>
  <block id="0706a8a70e2892183b45c55ef1394714" category="summary">本节介绍使用不同文件大小（即 100 万个 NFS 文件）执行 XCP 复制和 XCP 同步操作的大致时间。</block>
  <block id="137e4d3e0bc5586af6fc7ca9441511e1" category="doc">规模估算准则</block>
  <block id="f688414f56f567909ca9a570f161016e" category="inline-link-macro">上一步：部署步骤。</block>
  <block id="fb58e731328976afe8beac53cbe55ee7" category="paragraph"><block ref="fb58e731328976afe8beac53cbe55ee7" category="inline-link-macro-rx"></block></block>
  <block id="5224a4cb1d59edb5630ae27e640409e9" category="section-title">根据测试估计时间</block>
  <block id="1112334374c9149cc8ad8e80a76f2e56" category="paragraph">下图显示了 XCP 复制操作的结果。</block>
  <block id="d6852faef2642951731c8d64e3009dbe" category="paragraph"><block ref="d6852faef2642951731c8d64e3009dbe" category="inline-image-macro-rx" type="image"></block></block>
  <block id="58fe8c2d511caf443cb23313cb89181b" category="paragraph">下图显示了 XCP 同步重命名和链接操作的结果。</block>
  <block id="319b9e8dee4108359b7ef17af2fb492d" category="paragraph"><block ref="319b9e8dee4108359b7ef17af2fb492d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2186640ac8cac7be2b0f3940d871bf04" category="paragraph">文件大小与传输重命名的源文件所需的 `XCP 同步` 完成时间不符；图形为线性图形。</block>
  <block id="de54b82b6e27abb7d6f924e14d40a351" category="paragraph">链路类型包括软链路，硬链路和多链路。软链接被视为普通文件。文件大小与完成 XCP 同步操作的时间无关。</block>
  <block id="db3eb29ec347d79a716c6235063b1955" category="paragraph">下图显示了 XCP 同步附加和删除操作的结果。</block>
  <block id="feeff6134484088b1b404089dc5f92d9" category="paragraph"><block ref="feeff6134484088b1b404089dc5f92d9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f64c7d081568c95905b16364c19e1be1" category="paragraph">对于附加和删除操作，与较小的文件大小相比，较大的文件需要更多的时间。完成此操作所需的时间与附加和删除更改的百分比呈线性增长。</block>
  <block id="ecc8d4faf16ec3b08a8badd1d71421d3" category="section-title">将 XCP 1.6.1 与 XCP 1.5 进行比较</block>
  <block id="ded6c17dda87ca50a7ecde2418543075" category="paragraph"><block ref="ded6c17dda87ca50a7ecde2418543075" category="inline-image-macro-rx" type="image"></block></block>
  <block id="09a0804a78587affdd9192afd0f8c80c" category="paragraph">下图显示了 XCP 1.6.1 与 1.5 （ 16K 大小为 100 万个文件）的 XCP 同步性能结果。</block>
  <block id="b2733f54373c0149b19c3b37afbcb7da" category="paragraph"><block ref="b2733f54373c0149b19c3b37afbcb7da" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e7770abf0d9a0789407ea0a0e81cc5a6" category="paragraph"><block ref="e7770abf0d9a0789407ea0a0e81cc5a6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="71c6a3c1c59fc41b371a18011d1d5c9b" category="paragraph">平均而言，对于大小为 1 MB 的文件，在执行 `XCP sync` 差异增量更新 - 重命名，附加，链接和删除操作时， XCP 1.7 的性能会在 XCP 1.6.3 上提高或类似于 XCP 1.6.3 。</block>
  <block id="dd6275237d7504aabd0c206384365206" category="inline-link-macro">接下来：性能调整。</block>
  <block id="cb619c90f7b537d24a1473acda746a47" category="paragraph"><block ref="cb619c90f7b537d24a1473acda746a47" category="inline-link-macro-rx"></block></block>
  <block id="a01ed8ff3f6e9e3ac0c0068a083281f2" category="summary">本节提供使用 NetApp XCP 进行数据迁移的故障排除指导。</block>
  <block id="231cf4c70d866b616c21baddaeed0696" category="doc">故障排除</block>
  <block id="ae638a1049211e9956348a48a85bd359" category="inline-link-macro">先前版本：最佳实践准则和建议。</block>
  <block id="e19cdddb31b62a88048cfee77eb96e9d" category="paragraph"><block ref="e19cdddb31b62a88048cfee77eb96e9d" category="inline-link-macro-rx"></block></block>
  <block id="95109c432d89e67182659615993ba75d" category="section-title">错误 1 ： XCP 失败， nfs3 错误 70 ： xcp.log 中的文件句柄陈旧错误</block>
  <block id="99b1b0e3547443c29793187326a64dbc" category="paragraph">* 原因和指导。 *</block>
  <block id="0774d3e8b775fcc34e680b302e85f3c1" category="paragraph">挂载源文件夹并验证此文件夹是否存在。如果该错误不存在或已删除，您将收到 `stale filehandle` 错误，在这种情况下，您可以忽略该错误。</block>
  <block id="8fefb715a66a069c9e9318a58ecfdaee" category="section-title">错误 2 ： NetApp NFS 目标卷有空间，但 XCP 失败，并显示 nfs3 错误 28 ：设备上没有剩余空间</block>
  <block id="bba52daa861e8093e201c3939f43057f" category="list-text">运行 `df` 命令检查 NFS 目标卷的空间或检查存储。</block>
  <block id="20183145becc54cc822a80107f92f13d" category="list-text">检查存储控制器中的索引节点。</block>
  <block id="fe3a96130e3ec3092026a84e4dd12e50" category="list-text">如果使用索引节点，请运行以下命令以增加索引节点数：</block>
  <block id="00f1ec7e4f2acc8a9e2c5a06b2d62607" category="paragraph"><block ref="00f1ec7e4f2acc8a9e2c5a06b2d62607" category="inline-link-macro-rx"></block></block>
  <block id="3d5c39f585b0e679dbfe0855d556f0af" category="summary">NetApp XCP 使用多线程和可自定义的功能传输数据。它专为三种主要使用情形而设计—数据移动或迁移，文件系统分析和快速目录树删除。</block>
  <block id="6416bf9c9c9445fbe2e15f69fa8371d2" category="paragraph">NetApp XCP 使用多线程和可自定义的功能传输数据。它专为三大用例而设计：数据移动或迁移，文件系统分析和快速目录树删除。</block>
  <block id="7817bd783e8db0557909483f54288eae" category="section-title">数据移动或迁移</block>
  <block id="a7786f240f16aadfd675c46be438f64e" category="paragraph">NetApp XCP 可将数据从任何 NAS 传输到 NetApp NAS 。此过程包括四个主要操作：扫描，复制，同步和验证。此外，还有一些有助于数据监控和传输的其他功能：</block>
  <block id="59e4194e1b171063beeb99722a68e7af" category="list-text">* 复制。 * 执行基线数据传输。</block>
  <block id="a75ddee1308f2f19e478595122434544" category="list-text">* 同步 * 执行增量数据传输。</block>
  <block id="ae4ab572ec7de44b385c01df54f00d17" category="list-text">* 验证。 * 对目标执行全面验证。</block>
  <block id="8ddbaa98ade9dcd56d4960b7abd22525" category="list-text">* 显示（可选）。 * 发现 NAS 共享。</block>
  <block id="4f4544fb0f8ed8f32e27a8b8651a46e6" category="paragraph">下图显示了 XCP 数据迁移和复制操作。</block>
  <block id="6d97d3e510fc0fba449ece8ddd3f3d10" category="paragraph"><block ref="6d97d3e510fc0fba449ece8ddd3f3d10" category="inline-image-macro-rx" type="image"></block></block>
  <block id="657bad21acd4ceb926477ced53a4ec55" category="section-title">文件系统分析</block>
  <block id="65424b0dc0515cfa3b67e71712012db0" category="paragraph">NetApp XCP 本机支持您识别，检查和分析非结构化数据以提高洞察力，这是企业客户的一项重要要求，他们需要利用这些洞察力更好地进行规划，实施高价值数字资产，并通过报告和评估实现数据监管。</block>
  <block id="03c5a03e8b03794f5fa193e72245496c" category="paragraph">处理敏感数据的客户可以使用 NetApp XCP 问题解答解决典型的操作问题，例如：</block>
  <block id="6ad28c778baa08cff585599e160c12c8" category="list-text">我的数据在哪里？</block>
  <block id="5eccfafcfad0fb3dcd5f4f1036fed9f9" category="list-text">我们拥有多少数据和哪些类型的文件？</block>
  <block id="b1c54971a6211d7b7e3d074bff16b4c9" category="list-text">哪些数据正在使用中，有多少数据处于休眠状态？</block>
  <block id="81ff19b428c80049b09f8e1e6e55cfde" category="paragraph"><block ref="81ff19b428c80049b09f8e1e6e55cfde" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f2a6c498fb90ee345d997f888fce3b18" category="section-title">删除</block>
  <block id="4125c56415a1c3b98b49ee7f8c2ebfc3" category="paragraph">存储团队和电子设计自动化（ Electronic Design Automation ， EDA ）工作负载清理大型目录可能非常困难，无论是陈旧的数据还是需要清理以恢复存储空间的测试数据。XCP 提供了快速删除功能，可以删除完整的目录树。NetApp XCP 删除功能可从给定 NAS 路径中删除文件和文件夹。您可以利用匹配筛选器删除一组特定的文件和文件夹。对于大量文件和文件夹，您可以使用强制选项，该选项不需要确认即可删除。</block>
  <block id="ecfd5328aaeaeb8ab72037598049a32c" category="section-title">支持实时源迁移</block>
  <block id="286a0f56c729672b0709605c558d0008" category="paragraph">此功能支持源上的更改，但不支持目标上的更改。在迁移期间，目标不应处于活动状态。只有 NFS 迁移才支持实时源迁移。</block>
  <block id="2c346a482fcf83bd03d1d51f65d58b8d" category="admonition">实时源迁移不需要特殊设置。</block>
  <block id="ba41152bc4991a294ab26fbe691d52e3" category="section-title">XCP 的前提条件</block>
  <block id="010e3e2a3d44100784dac368cdb601c0" category="paragraph">在部署 NetApp XCP 之前，必须满足以下前提条件：</block>
  <block id="b76760dcfae800f7180ec4e8c57a8e2f" category="list-text">运行以下命令，验证 NFS 服务器使用的 NFS 端口：</block>
  <block id="a9a9fca38da059af5a55e2fc58ef3851" category="list-text">要访问执行 XCP 操作的位置，例如内部或云实例（例如 Azure ， AWS 或 Google 虚拟机虚拟机虚拟机虚拟机虚拟机虚拟机虚拟机虚拟机虚拟机虚拟机实例），请打开 NFS 端口的防火墙端口。</block>
  <block id="b22a57ce186f512ec584f5aac1d3de34" category="list-text">使用 telnet 命令 ` &lt;on-prem nfs data LIF IP 或 NAS IP &gt; 2049` 确认 NFS 端口可从 XCP 服务器访问。默认端口为 2049. 。如果您的环境具有其他端口，请使用该 IP 。</block>
  <block id="e54a7adb3b7e28ed3d693d972fc48fd0" category="list-text">对于 NFS ，使用 `showmount -e &lt; NAS IP &gt;` 命令验证共享是否可从 XCP 服务器访问。</block>
  <block id="da7f6a983e12f3b14b965ea651990ca9" category="list-text">将目标卷上的索引节点数增加到源文件上的文件数（文件数）以上。</block>
  <block id="71858e85f290ec0f6955841bab9f3aef" category="inline-link">NetApp XCP 许可证门户</block>
  <block id="14324adbfb79ad4b6832f6a02a1275db" category="list-text">从下载 XCP 许可证<block ref="eab886d42d2df7a710066e6d9bf6f5f5" category="inline-link-rx"></block>。</block>
  <block id="7481213bd7173438d06de418474e428b" category="list-text">您必须在 mysupport.netapp.com 上拥有 NetApp 帐户，或者可以免费注册。</block>
  <block id="d25e9f08475ddf6a2701e7cfbd67ff06" category="list-text">下载许可证并准备好。</block>
  <block id="3d19c697861d11cce0f1d78d41cfea64" category="list-text">创建 NAS 卷并为数据目标配置共享。</block>
  <block id="4f2a304b9680876edc7cb61b5c4c7134" category="list-text">对于多个 XCP 实例，您必须有一个或多个服务器或云实例才能将数据从多个源文件夹或文件传输到目标。</block>
  <block id="adc4e34febc2f5919cfa03870630c2fc" category="list-text">maxdir size （默认值为 308MB ）用于定义单个文件夹中的最大文件数（大约 100 万个）。增加 maxdir size 值以增加文件数。增加此值会影响额外的 CPU 周期。</block>
  <block id="a1552408599f6e2171495d55ae375802" category="list-text">在云环境中， NetApp 建议您在内部环境和云环境之间设置 ExpressRoute （ Azure ）， Direct Connect （ AWS ）或 Cloud Interconnect （ GCP ）。</block>
  <block id="fb41b0ab70237465636fc4267d1c00dd" category="inline-link-macro">下一步：迁移工作流。</block>
  <block id="7ed4381f9a10813d06ebeaf5c947c2c1" category="summary">NetApp XCP 文件分析 GUI 可通过在后端使用 XCP 并可视化任何 NAS （ NFS ， SMB ）文件系统的统计信息（如图形和视图）来帮助运行文件系统扫描。</block>
  <block id="250a5d043009990eb69a399d7c630462" category="doc">文件分析</block>
  <block id="47461303c8b8cbeb3e7558e2a9a1ca70" category="inline-link-macro">上一步：迁移工作流。</block>
  <block id="685a7e894721315c196897b76f95b8ce" category="paragraph"><block ref="685a7e894721315c196897b76f95b8ce" category="inline-link-macro-rx"></block></block>
  <block id="0f2604fbc18e6e91ba050460e6557361" category="paragraph">NetApp XCP 文件分析 GUI 可通过在后端使用 XCP 并可视化任何 NAS （ NFS ， SMB ）文件系统的统计信息（如图形和视图）来帮助运行文件系统扫描。从 1.6 开始， XCP 可通过使用 Configure 和 systemctl 选项通过简单的部署步骤作为服务运行。XCP 配置选项可指导您安装和配置 Postgres 和 Web 服务器以及收集凭据。systemctl 选项将 XCP 作为服务从图形用户界面运行 REST API 通信。</block>
  <block id="914cb171c700c273306e8265b56f4973" category="paragraph">下图显示了 XCP 文件分析流。</block>
  <block id="538e51b99e800ab65e133b5d57b2dc7f" category="paragraph"><block ref="538e51b99e800ab65e133b5d57b2dc7f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9bcdbf2b32a87f7efd13f706d43954d5" category="inline-link">NetApp XCP 1.6 改进了开放式文件分析和基础架构</block>
  <block id="168c81694a3b19988d829a9baeda23fd" category="list-text">使用 `XCP scan` 和 ` -match` 筛选器生成一年后修改的文件列表，其中包含占用的空间。</block>
  <block id="de615506a73ca5960be54d36ba7fcd5b" category="list-text">查找一年以上的文件所使用的空间。</block>
  <block id="d2d1f03d5f19a1229103a85cc9224a61" category="list-text">查找一年多前修改的数据的总大小和图形视图。</block>
  <block id="d706f3d28ee3e74f9a6829c882169af8" category="paragraph">以下报告是对一年多前修改过的文件的自定义扫描示例。</block>
  <block id="4d614048a495643d1c641a86e53b78d3" category="paragraph"><block ref="4d614048a495643d1c641a86e53b78d3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="54e4262e01c029cac8932a431c7e3d3f" category="paragraph"><block ref="54e4262e01c029cac8932a431c7e3d3f" category="inline-link-macro-rx"></block></block>
  <block id="035fe4f74f99e66d6525774bf40236f9" category="summary">本节介绍使用 NetApp XCP 迁移数据的最佳实践，准则和建议。</block>
  <block id="52f7ac44cac2d8d1a3f005648d7521e3" category="doc">最佳实践准则和建议</block>
  <block id="b5a13e4f32bf69c6814808ff6a11eb9b" category="inline-link-macro">先前版本：使用 ACL 将 CIFS 数据从源存储箱迁移到 ONTAP 。</block>
  <block id="a930ea4d6e07241178b9fe2f3c054fd2" category="paragraph"><block ref="a930ea4d6e07241178b9fe2f3c054fd2" category="inline-link-macro-rx"></block></block>
  <block id="1cce79308861dd86d5e56af13afefaf2" category="list-text">使用支持 IMT 的 XCP 客户端操作系统。IMT 支持的客户端已通过 NetApp 认证。</block>
  <block id="ec653488c4b3b9bb00702a4fb937f5b4" category="list-text">在 Linux 操作系统中以 root 用户身份运行 XCP 以执行迁移。您可以以 sudo 用户身份运行 XCP 命令，但 XCP 不支持此命令。</block>
  <block id="8c8f6415908fe0a235f0850d80a398a4" category="list-text">每个客户端仅运行一个 XCP 实例。从技术上讲，您可以从不同的位置在同一主机上运行多个 XCP 实例，但这不是受支持的做法。确实，运行许多实例可能会导致失败。</block>
  <block id="cac486281cae3e805e89a64673c47eb3" category="list-text">在当前 XCP 版本中，不支持实时源。如果源 NetApp 卷处于活动状态，并由应用程序和用户持续更改，则应创建源卷的快照以执行迁移。</block>
  <block id="c1f9797ffa66b762cf07348c6bc4a005" category="list-text">最佳做法是，为每个增量同步创建一个名称不同的新快照，以便在发生故障时根据快照名称轻松创建增量迁移路径。</block>
  <block id="1309895bb5c78406c77a6cc2800160eb" category="list-text">如果要执行基于快照的迁移，最佳做法是继续执行基于快照的迁移，直到转换为止。</block>
  <block id="cc9954d8dc3e80c40af9d0a7ca3de005" category="list-text">如果您的文件数超过 1000 万个，并且增量数据更改率超过 50% ，则最佳做法是使用比安装和管理指南中的最低建议更高的核心数和更多的内存。</block>
  <block id="f6cb936ed9c08627956daed52c6c3323" category="inline-link-macro">下一步：故障排除。</block>
  <block id="58c815a6f6adf3657aa40f96cb5f2d08" category="paragraph"><block ref="58c815a6f6adf3657aa40f96cb5f2d08" category="inline-link-macro-rx"></block></block>
  <block id="7776aec966d5a0c71bd4e8230f9470b8" category="summary">此用例基于电视网络客户。客户希望将 Oracle Recovery Manager （ RMAN ）备份文件迁移到云，并使用 Azure NetApp Files 和 Pacemaker 软件运行 Oracle E-Business Suite （ EBS ）应用程序。客户还希望将其数据库备份文件迁移到按需云存储，并将大型文件（每个文件的大小介于 25 GB 到 50 GB 之间）传输到 Azure 。</block>
  <block id="8108bac490ceb375198c578e8a439026" category="doc">使用 XCP Data Mover 迁移大型文件</block>
  <block id="adec666d077f4afe1b4f2b8720ed1247" category="inline-link-macro">先前版本：使用 XCP 数据移动器将数百万个小文件迁移到灵活存储。</block>
  <block id="d6be3aed77745a993a24266eaf05084d" category="paragraph"><block ref="d6be3aed77745a993a24266eaf05084d" category="inline-link-macro-rx"></block></block>
  <block id="06470d7a09a56d555bad98bdf38a6cad" category="paragraph">下图说明了将大型文件的数据从内部迁移到 Azure NetApp Files 的过程。</block>
  <block id="1b95efe3eae02043da6528de3cf9caf8" category="inline-link-macro">下一步：重复文件。</block>
  <block id="76fdb34470826293aaf52b30bf98fce0" category="paragraph"><block ref="76fdb34470826293aaf52b30bf98fce0" category="inline-link-macro-rx"></block></block>
  <block id="ddf97b6ffb913bd772848e3ebecfc8c1" category="summary">本节介绍 NetApp XCP 的数据传输部署步骤。</block>
  <block id="8388066510b59c8d3387373b6969a7af" category="doc">部署步骤</block>
  <block id="c6310b144c1666a29ec7cacf1c0dceab" category="inline-link-macro">上一篇：文件分析。</block>
  <block id="57c4917a0617c8b675e6cc1dbad5c7fe" category="paragraph"><block ref="57c4917a0617c8b675e6cc1dbad5c7fe" category="inline-link-macro-rx"></block></block>
  <block id="8449c94058b7c2e686c3e19f7e772a65" category="section-title">测试台详细信息</block>
  <block id="94cb70bde9d89f0b10ffdca34b0bec22" category="paragraph">下表提供了用于此部署和性能验证的测试台的详细信息。</block>
  <block id="57419d904381619fcf00bc94e4ce26f1" category="cell">XCP 1.7 版</block>
  <block id="0bf2dca8ce9b94406660e58b59a3dbbd" category="list-text">一台 Linux 服务器— Linux （ RHEL 7.9 或 RHEL 8 ）</block>
  <block id="d85d793ce9fe1772209fa5e17fb29449" category="list-text">一台 Windows 服务器— Windows Server 2019 标准版</block>
  <block id="91ea491db15b6d672d79b23fb98eb089" category="cell">源卷的 NetApp AFF 存储阵列 HA 对</block>
  <block id="23ec9249d03285a513eaaf182a7bcd49" category="list-text">AFF8080</block>
  <block id="a2a817ee9a8e05389f7b11bd8ce4bbdb" category="list-text">NFS 协议</block>
  <block id="80fdc6d88149270be735269f2ff65645" category="cell">用于目标卷的 NetApp AFF 存储阵列 HA 对</block>
  <block id="203165a49e3a391bdbc44e3a05d54279" category="list-text">ONTAP 9.</block>
  <block id="28712ee052ea500eba0cdbb1d847277f" category="cell">Fujitsu PRIMERGY RX2540 服务器</block>
  <block id="539c5af1c2682685cd076697aaa6c700" category="cell">每个均配备： * 48 个 CPU * Intel Xeon * 256 GB 物理内存 * 10GbE 双端口</block>
  <block id="0cc5c79089d6ca0752529568758efc4c" category="cell">10GbE</block>
  <block id="2879e817640f94636340918850eb6903" category="inline-link">《 NetApp XCP 用户指南》</block>
  <block id="f2dd54ec57ec5464ee3aa191a48a8a43" category="paragraph">要部署 NetApp XCP 以进行数据传输，请先在目标位置安装并激活 XCP 软件。您可以在中查看详细信息<block ref="ae77d8ba86ab9e3027c314c6b4922595" category="inline-link-rx"></block>。为此，请完成以下步骤：</block>
  <block id="c58c8903e33903d2e630277aa3a78795" category="inline-link">NetApp XCP （下载）页面</block>
  <block id="2d1acef34bb45f2c1878c6b576f3b400" category="list-text">从下载 XCP 软件<block ref="13844fc5dba1627d28169d2acfff11e2" category="inline-link-rx"></block>。</block>
  <block id="8319752fe43598ddb329e536217c1cb5" category="list-text">将下载的 XCP tar 文件复制到 XCP 服务器。</block>
  <block id="c9b8e059d1597eaead43d286e91c91e3" category="list-text">取消压缩 tarball 。</block>
  <block id="9f2a2420f596ae9cccb1b900cd8ee187" category="inline-link"><block ref="9f2a2420f596ae9cccb1b900cd8ee187" category="inline-link-rx"></block></block>
  <block id="19f1deecf23a78878eb01c772b9233e0" category="list-text">从下载许可证<block ref="4da39fde529d1b69f60873c302229eed" category="inline-link-rx"></block> 并复制到 XCP 服务器。</block>
  <block id="3df11515e644382207c1430c36ea48bb" category="list-text">激活许可证。</block>
  <block id="ad7984249c2054b4da5fd3b57b1b91ef" category="list-text">找到源 NFS 端口和目标 NFS 服务器。默认端口为 2049. 。</block>
  <block id="79fe861b8c719b1a534bdbcace1444a2" category="list-text">检查 NFS 连接。使用 telnet 访问 NFS 服务器端口，检查 NFS 服务器（源和目标）。</block>
  <block id="5e471de79dbe02105770bcf04bc501d5" category="list-text">配置目录。</block>
  <block id="67005679d502da10622f2104421e894b" category="list-text">为 XCP 目录创建 NFS 卷并导出 NFS 。您还可以利用操作系统 NFS 导出来导出 XCP 目录。</block>
  <block id="d6f2a18783592d1858e3e5bdcabd4567" category="list-text">检查 NFS 导出。</block>
  <block id="39b638480b201a7448774e8186012e4e" category="list-text">更新 `xcp.ini` 。</block>
  <block id="9d44d1309af47903754b16c403f68774" category="list-text">使用 `XCP show` 查找源 NAS 导出。查找：</block>
  <block id="fbff9a42f0ba33571594cb39da93ef4b" category="list-text">（可选）扫描源 NAS 数据。</block>
  <block id="82d1938e7390e37babdea8d6fd359156" category="paragraph">扫描源 NAS 数据有助于您了解数据布局并发现任何可能的迁移问题。XCP 扫描操作时间与文件数量和目录深度成比例。如果您熟悉 NAS 数据，可以跳过此步骤。</block>
  <block id="c6e94e11da5ba5bce0f27b8c782e4110" category="list-text">检查 `XCP scan` 创建的报告。主要搜索无法读取的文件夹和无法读取的文件。</block>
  <block id="6a6a10773cfc849f638ac0137a5f08d6" category="list-text">（可选）更改索引节点。查看索引节点数，并根据目录卷和目标卷要迁移或复制的文件数（如果需要）修改索引节点数。</block>
  <block id="342779baf0b15fdf377f142c987e896a" category="list-text">扫描目标卷。</block>
  <block id="a88831977a2b62e982b722f6fa6662b5" category="list-text">检查源卷和目标卷空间。</block>
  <block id="4b14d92fd07932987cf7416eb7f604ca" category="list-text">使用 `XCP copy` 将数据从源复制到目标并检查摘要。</block>
  <block id="506aae448569ed08125f41ed940eb00b" category="admonition">默认情况下， XCP 会创建七个并行进程来复制数据。可以对此进行调整。</block>
  <block id="5c46a2da3e6e0423829946fe877c50b8" category="admonition">NetApp 建议源卷为只读卷。源卷是实时活动文件系统。`XCP 副本` 操作可能会失败，因为 NetApp XCP 不支持由应用程序持续更改的实时源。</block>
  <block id="0f7dbc07af0b5c3ba51ff604b81ebe8a" category="paragraph">对于 Linux ， XCP 需要索引 ID ，因为 XCP Linux 会执行目录编制。</block>
  <block id="764363dd147880ab6aca242a0417562e" category="list-text">（可选）检查目标 NetApp 卷上的索引节点。</block>
  <block id="ab3ba5fb62db279b7d07bac650a6c2d2" category="list-text">使用 `XCP sync` 执行增量更新。</block>
  <block id="6cdfbe571ba2209e0a76f3bcabfee9f6" category="paragraph">在本文档中，为了模拟实时，对源数据中的 100 万个文件进行了重命名，然后使用 `XCP sync` 将更新后的文件复制到目标。对于 Windows ， XCP 既需要源路径，也需要目标路径。</block>
  <block id="13475b4ca9a916769b9d63f4fddfa18d" category="list-text">验证数据传输。您可以使用 `XCP verify` 来验证源和目标是否具有相同的数据。</block>
  <block id="1cd06f171a5a99926a67bd673014f765" category="paragraph">XCP 文档为 `scan` ， `copy` ， `sync` 和 `verify` 操作提供了多个选项（包括示例）。有关详细信息，请参见<block ref="ae77d8ba86ab9e3027c314c6b4922595" category="inline-link-rx"></block>。</block>
  <block id="efa146517859e051c07fabac4c88d3e7" category="admonition">Windows 客户应使用访问控制列表（ ACL ）复制数据。NetApp 建议使用命令 `XCP copy -acl -fallbackuser\&lt;username&gt; -fallbackgroup\&lt;username or groupname&gt; &lt;source&gt; &lt;destination&gt;` 。考虑到包含使用 ACL 的 SMB 数据的源卷以及 NFS 和 SMB 均可访问的数据，目标卷必须为 NTFS 卷，以获得最佳性能。使用 XCP （ NFS 版本）从 Linux 服务器复制数据，并使用 Windows 服务器中的 ` -acl` 和 ` -noddata` 选项执行 XCP （ SMB 版本） sync ，以便将 ACL 从源数据复制到目标 SMB 数据。</block>
  <block id="85760de676a9f74f28f26115c39c9a0b" category="inline-link">正在配置 " 管理审核和安全日志 " 策略</block>
  <block id="a0251b301ad566d86ffa3916c5510295" category="paragraph">有关详细步骤，请参见<block ref="06fdba77988da3047baf401e4fdefca5" category="inline-link-rx"></block>。</block>
  <block id="d2bac014bbd39f6954893239102c5678" category="inline-link-macro">接下来：规模估算准则。</block>
  <block id="b49cd7fb5a227da1698c527804f31bbb" category="paragraph"><block ref="b49cd7fb5a227da1698c527804f31bbb" category="inline-link-macro-rx"></block></block>
  <block id="24992328317a5b7b3c00507eb27776df" category="paragraph"><block ref="24992328317a5b7b3c00507eb27776df" category="inline-link-macro-rx"></block></block>
  <block id="d4f4c40bd169a262676284f5da7a191a" category="cell">2020年10月</block>
  <block id="945407c0c602d0c34ead1ebb5427a84b" category="summary">我们使用 NetApp XCP 将数据从 GPFS 迁移到 NFS ，以便 GPU 可以处理数据。AI 通常处理来自网络文件系统的数据。</block>
  <block id="1f797a3a419cdffd442fc4b662974908" category="doc">从高性能计算到 ONTAP NFS</block>
  <block id="95160fc4cfa09139af600f92561c7ef9" category="inline-link-macro">上一步：数据湖到 ONTAP NFS 。</block>
  <block id="9d82d327cabd66bd4cccb55cb5ed28ec" category="paragraph"><block ref="9d82d327cabd66bd4cccb55cb5ed28ec" category="inline-link-macro-rx"></block></block>
  <block id="a4a4d9553ba807d3f28f8f25ea56cfec" category="paragraph">此用例是根据现场组织的请求创建的。一些 NetApp 客户的数据位于高性能计算环境中，该环境可为培训模型提供数据分析，并使研究组织能够深入了解和了解大量数字数据。NetApp 现场工程师需要一个详细的操作步骤才能将数据从 IBM 的 GPFS 提取到 NFS 。我们使用 NetApp XCP 将数据从 GPFS 迁移到 NFS ，以便 GPU 可以处理数据。AI 通常处理来自网络文件系统的数据。</block>
  <block id="0ce008ed1a75e69e9f21d1ad29ed23dd" category="paragraph">有关高性能计算到 ONTAP NFS 使用情形，录制的演示和测试结果的详细信息，请参见<block ref="c5fcc47a7dd315afaa32fcdac46ffd7d" category="inline-link-rx"></block> 博客</block>
  <block id="fb64727a5df67d0ceff6f0a11b531ab5" category="paragraph">有关使用 NetApp XCP 将 MapR-FS 数据移动到 ONTAP NFS 中的详细步骤，请参见中的附录 A ： gpfs 到 NFS―详细步骤<block ref="e760c508aca9c545c45aba81e95e5593" category="inline-link-rx"></block>。</block>
  <block id="1b5c563b4edac6a7e8566fac62f90b34" category="inline-link-macro">接下来：使用 XCP 数据移动器将数百万个小文件迁移到灵活存储。</block>
  <block id="0461d449643091f3bbb27cfbb215c6f2" category="paragraph"><block ref="0461d449643091f3bbb27cfbb215c6f2" category="inline-link-macro-rx"></block></block>
  <block id="1357196e1dc18c4ad43fe26a6c1b30ad" category="inline-link-macro">上一步：性能调整。</block>
  <block id="33672b776ede62bd1269689ea61e45aa" category="paragraph"><block ref="33672b776ede62bd1269689ea61e45aa" category="inline-link-macro-rx"></block></block>
  <block id="1ebf7a1cb4f3826913a58c19018c694e" category="paragraph">本节介绍客户场景及其架构。</block>
  <block id="b58464d62b5399c457b8a1fcf6bbcd27" category="inline-link-macro">接下来：数据湖到 ONTAP NFS 。</block>
  <block id="a24139c6a89df9b0694c3ea695639ace" category="paragraph"><block ref="a24139c6a89df9b0694c3ea695639ace" category="inline-link-macro-rx"></block></block>
  <block id="322bc614a8031f8c334d233f8221a4ab" category="summary">本节详细介绍了将数据从 7- 模式 NetApp Data ONTAP 迁移到 ONTAP 的步骤。</block>
  <block id="30ee25b2188724428e827e97bab504fe" category="doc">将数据从 7- 模式迁移到 ONTAP</block>
  <block id="aecfc9b89f609bfde217a6cf8fc0b00a" category="inline-link-macro">先前：从 SMB/CIFS 共享创建 CSV 文件。</block>
  <block id="6da13b2cdb445320dc3e29759119f4e8" category="paragraph"><block ref="6da13b2cdb445320dc3e29759119f4e8" category="inline-link-macro-rx"></block></block>
  <block id="3ec8186e1900b95154cccf8ccea38023" category="section-title">将 7- 模式 NFSv3 存储过渡到 ONTAP 以获取 NFS 数据</block>
  <block id="e70a6b3d23d1e0da94c71a9ea26747d1" category="paragraph">本节介绍下表中的分步操作步骤，用于将源 7- 模式 NFSv3 导出过渡到 ONTAP 系统。</block>
  <block id="cad365d13740342c8f6199feb7229137" category="paragraph">NetApp 假定源 7- 模式 NFSv3 卷已导出并挂载在客户端系统上，并且 XCP 已安装在 Linux 系统上。</block>
  <block id="b40dbfa52a308abff927380b983cd868" category="list-text">验证目标 ONTAP 系统是否运行正常。</block>
  <block id="39745ae9472f91abcd9e844389157858" category="list-text">验证目标系统上是否至少存在一个非根聚合。聚合正常。</block>
  <block id="47e01226b4fdf549d938eb5c6196970d" category="paragraph">如果没有数据聚合，请使用 `storage aggr create` 命令创建一个新聚合。</block>
  <block id="5c52d0e31e44663ee633be681387faa1" category="list-text">在目标集群系统上创建 Storage Virtual Machine （ SVM ）。</block>
  <block id="426b5839edbb7a7772be396e7eaceace" category="list-text">从目标 SVM 中删除 FCP ， iSCSI ， NDMP 和 CIDS 协议。</block>
  <block id="d03930721e424cdac105ccd0172f7dbe" category="paragraph">验证此 SVM 是否支持 NFS 协议。</block>
  <block id="4d6b5eb9160c3c34e9ff5535c403cea9" category="list-text">在目标 SVM 上创建新的读写数据卷。验证安全模式，语言设置和容量要求是否与源卷匹配。</block>
  <block id="a2cebf1e91b2a266a58458873c8980fd" category="list-text">创建数据 LIF 以处理 NFS 客户端请求。</block>
  <block id="6817d90b89495074e679248b56128378" category="paragraph">验证是否已成功创建 LIF 。</block>
  <block id="3a014fae7f5d70cc01c593a8401140ee" category="list-text">如果需要，使用 SVM 创建静态路由。</block>
  <block id="84bb87c2987a4b39ea23430f38570808" category="paragraph">验证是否已成功创建路由。</block>
  <block id="54b19b8b3b6de7bce018de598a1645ea" category="list-text">在 SVM 命名空间中挂载目标 NFS 数据卷。</block>
  <block id="6365adb4324221d944bc90c4663dfe5a" category="paragraph">验证是否已成功挂载此卷。</block>
  <block id="991398c32a43bcf95d7fa14129a6fcb0" category="paragraph">您也可以使用 `volume create` 命令指定卷挂载选项（接合路径）。</block>
  <block id="6c02d24a81dd4d9b1ad7a15079b4f122" category="list-text">在目标 SVM 上启动 NFS 服务。</block>
  <block id="e210fe657c5d46e3e11ca263d1a18af7" category="paragraph">验证此服务是否已启动并正在运行。</block>
  <block id="304683b37151feda067e3acfde300057" category="list-text">验证默认 NFS 导出策略是否已应用于目标 SVM 。</block>
  <block id="353fde8a37910716dc00dec81475c0d5" category="list-text">如果需要，为目标 SVM 创建新的自定义导出策略。</block>
  <block id="174608facfdad6448222d6d46c87fba5" category="paragraph">验证是否已成功创建新的自定义导出策略。</block>
  <block id="4007cf260b496d35ba0e925f1e7a183d" category="list-text">修改导出策略规则以允许访问 NFS 客户端。</block>
  <block id="5f249df749512e129505d18fd47d7010" category="list-text">验证是否允许客户端访问卷。</block>
  <block id="94a80f56f92334f07fd30337692ca889" category="list-text">连接到 Linux NFS 服务器。为 NFS 导出的卷创建挂载点。</block>
  <block id="725ae014e8d8f66f0f2d477fa656ba32" category="list-text">在此挂载点挂载目标 NFSv3 导出的卷。</block>
  <block id="a345b19bdd483ecd745a2e643b756bc6" category="admonition">NFSv3 卷应导出，但不一定由 NFS 服务器挂载。如果可以挂载这些卷，则 XCP Linux 主机客户端会挂载这些卷。</block>
  <block id="b5b2af7fb88c03cfd258cdd77fc6fbe1" category="paragraph">验证是否已成功创建挂载点。</block>
  <block id="8d3ac4d5ea9c5d5c45d7322512d7b778" category="list-text">在 NFS 导出的挂载点上创建一个测试文件，以启用读写访问。</block>
  <block id="07e483b5917b8a9e91a22b2ebc20961a" category="admonition">读写测试完成后，从目标 NFS 挂载点删除该文件。</block>
  <block id="09280cd628b820e696b87163b3fe0fde" category="list-text">连接到安装了 XCP 的 Linux 客户端系统。浏览到 XCP 安装路径。</block>
  <block id="86de6eeea329a50737c7056637f43e49" category="list-text">在 XCP Linux 客户端主机系统上运行 `XCP show` 命令，查询源 7- 模式 NFSv3 导出。</block>
  <block id="080173849f5fec049b214897a2882295" category="list-text">扫描源 NFSv3 导出的路径并打印其文件结构的统计信息。</block>
  <block id="df86b239e412ba3ba7192b581381b444" category="paragraph">NetApp 建议在 XCP `scan` ， `copy` 和 `sync` 操作期间将源 NFSv3 导出置于只读模式。</block>
  <block id="695efe20ffcfc7c261e44cbb1b62cc78" category="list-text">将源 7- 模式 NFSv3 导出复制到目标 ONTAP 系统上的 NFSv3 导出。</block>
  <block id="50515e001679292835a498c6bd3f3c31" category="list-text">复制完成后，验证源和目标 NFSv3 导出是否具有相同的数据。运行 `XCP verify` 命令。</block>
  <block id="70d6a53ca7c3c592cb4099e2988c226c" category="paragraph">如果 `XCP verify` 发现源数据与目标数据之间存在差异，则摘要中会报告错误 `no such file or directory` 。要修复此问题描述，请运行 `XCP sync` 命令将源更改复制到目标。</block>
  <block id="505d73172f49d62bd99779ab53aa5eeb" category="list-text">在转换之前和期间，再次运行 `verify` 。如果源包含新数据或更新的数据，请执行增量更新。运行 `XCP sync` 命令。</block>
  <block id="887abb0b5917a0a6b0c47f5ef3eca1ce" category="list-text">要恢复先前中断的复制操作，请运行 `XCP resume` 命令。</block>
  <block id="f807709818ec3fbc508863a00ea17044" category="paragraph">在 `re恢复` 完成复制文件后，再次运行 `ve执行` 以使源存储和目标存储具有相同的数据。</block>
  <block id="d78900410b9203071958256c3d6a7701" category="list-text">NFSv3 客户端主机需要卸载从 7- 模式存储配置的源 NFSv3 导出，并从 ONTAP 挂载目标 NFSv3 导出。转换需要中断。</block>
  <block id="6bd42ffcfd349b793e9f6c6f00c18cd8" category="section-title">将 7- 模式卷 Snapshot 副本过渡到 ONTAP</block>
  <block id="fefac3d628a2abc2d1677e073a0688e7" category="paragraph">本节介绍用于将源 7- 模式卷 NetApp Snapshot 副本过渡到 ONTAP 的操作步骤。</block>
  <block id="721e28a3edb434ca3d7f37307126504c" category="admonition">NetApp 假定源 7- 模式卷已导出并挂载在客户端系统上，并且 XCP 已安装在 Linux 系统上。Snapshot 副本是卷的时间点映像，用于记录自上次 Snapshot 副本以来的增量更改。使用 ` -snap` 选项并将 7- 模式系统作为源。</block>
  <block id="e18566c8fe02de3e35e48df30daa5189" category="paragraph">* 警告： * 保留基本 Snapshot 副本。基线副本完成后，请勿删除基线 Snapshot 副本。要执行进一步的同步操作，需要使用基本 Snapshot 副本。</block>
  <block id="50bdf0eaa7b3716343ae0345a98e1a5f" category="list-text">在目标集群系统上创建 SVM 。</block>
  <block id="2e4b636c74015de6d92a2eb874c15a88" category="list-text">从目标 SVM 中删除 FCP ， iSCSI ， NDMP 和 CIFS 协议。</block>
  <block id="c45e0bc468a9249c2954fa84c21f833e" category="list-text">如果需要，使用 SVM 创建静态路由。</block>
  <block id="f35ea333881cef53fcd944d5a052be9d" category="paragraph">验证是否已成功挂载此卷。</block>
  <block id="71c0d546c4569fd9a5798bdbc9729ab6" category="paragraph">您也可以使用 `volume create` 命令指定卷挂载选项（接合路径）。</block>
  <block id="7ec3f8d8dd165416936305e1ca1530f0" category="list-text">验证默认 NFS 导出策略是否应用于目标 SVM 。</block>
  <block id="f69801ea46df8aed1b26399a9330f459" category="list-text">修改导出策略规则以允许访问目标系统上的 NFS 客户端。</block>
  <block id="9fee35c8bded36b1931a6addb7635a81" category="list-text">验证客户端是否有权访问目标卷。</block>
  <block id="7633c6765c7399ce0f1ecbca891fb11c" category="paragraph">NetApp 建议在 `XCP scan` ， `copy` 和 `sync` 操作期间将源 NFSv3 导出置于只读模式。在 `sync` 操作中，您必须使用相应的值传递 ` -snap` 选项。</block>
  <block id="486e9eb5a73ed3d87e070761d3ceeefe" category="list-text">将源 7- 模式 NFSv3 快照（基本）复制到目标 ONTAP 系统上的 NFSv3 导出。</block>
  <block id="160bb3a75d27ad175143123df09bce76" category="admonition">保留此基本快照以执行进一步的同步操作。</block>
  <block id="97ba1a5f7ee8f9243390e46469b6e8f3" category="list-text">复制完成后，验证源和目标 NFSv3 导出是否具有相同的数据。运行 `XCP verify` 命令。</block>
  <block id="44842ca325a3ba46b3b4703a79fab171" category="paragraph">如果 `verify` 发现源数据与目标数据之间的差异，则摘要中会报告错误 `no such file or directory `。要修复此问题描述，请运行 `XCP sync` 命令将源更改复制到目标。</block>
  <block id="030bc6fe403e876e1c932987ece73d61" category="list-text">在转换之前和期间，再次运行 `verify` 。如果源包含新数据或更新的数据，请执行增量更新。如果存在增量更改，请为这些更改创建一个新的 Snapshot 副本，并使用 ` -snap` 选项传递该快照路径以执行同步操作。</block>
  <block id="b29cfae254be5e3cfc339ed594ea9378" category="paragraph">使用 ` -snap` 选项和快照路径运行 `XCP sync` 命令。</block>
  <block id="2885d0e1370007423656773743ce189b" category="admonition">对于此操作，需要使用基本快照。</block>
  <block id="121dba07a28112a093b812991271c895" category="list-text">NFSv3 客户端主机必须卸载从 7- 模式存储配置的源 NFSv3 导出，并从 ONTAP 挂载目标 NFSv3 导出。此转换需要中断。</block>
  <block id="6db55966f4a2b44c31ed7672f14d023e" category="section-title">将 ACLv4 从 NetApp 7- 模式迁移到 NetApp 存储系统</block>
  <block id="8f81754856c547fbd3e5295b9da06cc7" category="paragraph">本节介绍将源 NFSv4 导出过渡到 ONTAP 系统的分步操作步骤。</block>
  <block id="fd58e84bd534e0ff49a00942e9ee2002" category="admonition">NetApp 假定源 NFSv4 卷已导出并挂载在客户端系统上，并且 XCP 已安装在 Linux 系统上。源系统应为支持 ACL 的 NetApp 7- 模式系统。ACL 迁移仅支持从 NetApp 迁移到 NetApp 。要复制名称中包含特殊字符的文件，请确保源和目标支持 UTF-8 编码语言。</block>
  <block id="88464fae780b488ca9d39f305a3b3777" category="section-title">将源 NFSv4 导出迁移到 ONTAP 的前提条件</block>
  <block id="078b760bc7ad8cae447a095cc53029af" category="paragraph">在将源 NFSv4 导出迁移到 ONTAP 之前，必须满足以下前提条件：</block>
  <block id="abb629da0d811e197b383d473d19f265" category="list-text">目标系统必须配置 NFSv4 。</block>
  <block id="09e4d7a665b5df121af76a08951028cf" category="list-text">NFSv4 源和目标必须挂载在 XCP 主机上。选择 NFS v4.0 以匹配源存储和目标存储，并验证源系统和目标系统上是否已启用 ACL 。</block>
  <block id="c36e1764174e8e6a7791e7afd73f3294" category="list-text">XCP 要求在 XCP 主机上挂载源 / 目标路径以进行 ACL 处理。在以下示例中， `vol1 （ 10.63.5.56 ： /vol1 ）` 已挂载在 ` /mnt/vol1` 路径上：</block>
  <block id="baa4716341f52ff4d0642ca1398e16f1" category="section-title">子目录选项</block>
  <block id="66f63b7de79aaf05b47a1b63467b2a84" category="paragraph">使用子目录的两个选项如下：</block>
  <block id="5d1498ef6a2ee01cb9031bbf8a8dadc4" category="list-text">要使 XCP 在子目录 ` （ /vol1/dir1/DIR11` ）上运行，请在 XCP 主机上挂载完整路径（`10.63.5.56 ： /vol1/dir1/DIR11` ）。</block>
  <block id="39b3225d42725e9616ca3fee7aa7cbb6" category="paragraph">如果未挂载完整路径， XCP 将报告以下错误：</block>
  <block id="84274fa575b6d9b0177512a818215d91" category="list-text">使用子目录语法（ `mount ：子目录 /qtree/.snapshot` ），如以下示例所示：</block>
  <block id="8dd9bb3f47ac0b27a42761c265b0c720" category="paragraph">要将 ACLv4 从 NetApp 7- 模式迁移到 NetApp 存储系统，请完成以下步骤。</block>
  <block id="b2f12804e995a318c2272527efb05774" category="paragraph">验证是否已成功创建 SVM 。</block>
  <block id="b887d08ec971525ffbfec7f19d01d72d" category="list-text">检查默认 NFS 导出策略是否应用于目标 SVM 。</block>
  <block id="1c94e1638450716cd57f55bafd07e60f" category="paragraph">验证是否已修改策略规则。</block>
  <block id="132fa7c123291d5007311a22ff8f5654" category="list-text">在此挂载点挂载目标 NFSv4 导出的卷。</block>
  <block id="c686c09824f51c6e681d87d1deb44c71" category="admonition">NFSv4 卷应导出，但不一定由 NFS 服务器挂载。如果可以挂载这些卷，则 XCP Linux 主机客户端会挂载这些卷。</block>
  <block id="e943b6ad310412b689f42adec28acf3a" category="paragraph">验证是否已创建文件。</block>
  <block id="35ce5d99ee6b9bb871da972e459e7259" category="list-text">在 XCP Linux 客户端主机系统上运行 `XCP show` 命令，查询源 NFSv4 导出。</block>
  <block id="97cc35dcdaf8c5c5fa0e936cd31e9907" category="list-text">扫描源 NFSv4 导出的路径并打印其文件结构的统计信息。</block>
  <block id="5073080976611febfcee79295d42232e" category="paragraph">NetApp 建议在 `XCP scan` ， `copy` 和 `sync` 操作期间将源 NFSv4 导出置于只读模式。</block>
  <block id="f120bcab91519def54b7b66ee0fbecfe" category="list-text">将源 NFSv4 导出复制到目标 ONTAP 系统上的 NFSv4 导出。</block>
  <block id="39ff9cab7c62e62bf182a632271eb700" category="list-text">完成 `copy` 后，验证源和目标 NFSv4 导出是否具有相同的数据。运行 `XCP verify` 命令。</block>
  <block id="977c8a5f0f7f70041a1c6359c72cb1cd" category="paragraph">如果 `verify` 发现源数据与目标数据之间的差异，则摘要中会报告错误 `no such file or directory` 。要修复此问题描述，请运行 `XCP sync` 命令将源更改复制到目标。</block>
  <block id="29aee025cf0bcad3c355bd0aad4516e6" category="admonition">对于此操作，需要使用先前的副本索引名称或编号。</block>
  <block id="ee0fd4f8758695ad7502bee81363478a" category="list-text">要恢复先前中断的 `copy` 操作，请运行 `XCP resume` 命令。</block>
  <block id="cdc35fb8de987dae3f48c142ffcb0686" category="section-title">将 7- 模式 SMB 存储过渡到 ONTAP 以获取 CIFS 数据</block>
  <block id="74efc43b80fa7a84f709780789176e0d" category="paragraph">本节介绍将源 7- 模式 SMB 共享过渡到 ONTAP 系统的分步操作步骤。</block>
  <block id="f6f758220d5d00061aaa03b99e14785b" category="admonition">NetApp 假定 7- 模式和 ONTAP 系统已获得 SMB 许可。此时将创建目标 SVM ，导出源和目标 SMB 共享，并安装 XCP 并获得许可。</block>
  <block id="281c766457d5499048f9440f61957421" category="list-text">扫描 SMB 共享中的文件和目录。</block>
  <block id="95c490ed8cb5d13c961fc2c50c372940" category="list-text">将文件（带或不带 ACL ）从源 SMB 共享复制到目标 SMB 共享。以下示例显示了一个具有 ACL 的副本。</block>
  <block id="dc056263ce0a29568cee559ae8ec35dc" category="admonition">如果没有数据聚合，请使用 storage `aggr create` 命令创建一个新聚合。</block>
  <block id="7c34f7c35c71ba790649c5563408e77e" category="list-text">同步源和目标上的文件。</block>
  <block id="974c1ef10ec8fef5b3ff19989555d061" category="list-text">验证是否已正确复制这些文件。</block>
  <block id="8ae319b52e88ea41e78a01efdaab2143" category="inline-link-macro">接下来：使用 ACL 将 CIFS 数据从源存储箱迁移到 ONTAP 。</block>
  <block id="b6ea874ca7f1192a99c58fa3ff1199ba" category="paragraph"><block ref="b6ea874ca7f1192a99c58fa3ff1199ba" category="inline-link-macro-rx"></block></block>
  <block id="5dc302565fd7f552e134618ee18d2be2" category="summary">此解决方案基于需要根据特定日期复制数据的客户。</block>
  <block id="07f04efd2f421076b9aa06c4fee83be5" category="doc">基于日期的特定数据扫描和复制</block>
  <block id="7af90e46070dd59c121e31e1525d4af2" category="inline-link-macro">上一步：重复文件。</block>
  <block id="7f58802ce1d6245244bb449cd961f0f3" category="paragraph"><block ref="7f58802ce1d6245244bb449cd961f0f3" category="inline-link-macro-rx"></block></block>
  <block id="e0b5216bc931e3e5fd7efb74ad10b1d3" category="paragraph">此解决方案基于需要根据特定日期复制数据的客户。验证以下详细信息：</block>
  <block id="c277b447e2e86b92f26c7dbcf8fecdf2" category="inline-link-macro">下一步：从 SMB/CIFS 共享创建 CSV 文件。</block>
  <block id="7a9653d25343b8ddab24257e57b5be7a" category="paragraph"><block ref="7a9653d25343b8ddab24257e57b5be7a" category="inline-link-macro-rx"></block></block>
  <block id="89bddd14a9f02aeace6d5ffadf25e4f3" category="summary">本文档提供了 NetApp XCP 最佳实践准则和基于测试场景的解决方案。这些最佳实践涵盖了内部以及云，文件系统分析，故障排除和 XCP 性能调整的迁移工作流。</block>
  <block id="e7b1326bcbbf0b5513213b2373b5721a" category="doc">TR-4863 ：《 NetApp XCP 最佳实践指南—数据移动，文件迁移和分析》</block>
  <block id="439be0f3df9ab229e224aa3c8dbeca77" category="paragraph">NetApp 公司 Karthikeyan Nagalingam</block>
  <block id="88d20f11fbf1788b5271fcc5d5297a41" category="paragraph">本文档提供了 NetApp XCP 最佳实践准则和基于测试场景的解决方案。这些最佳实践涵盖内部以及云，文件系统分析，故障排除和 XCP 性能调整的迁移工作流。测试场景部分介绍了客户使用情形及其要求，使用 XCP 的 NetApp 解决方案以及为客户带来的优势。</block>
  <block id="842b5068483a5cd5b058644a5d000f1c" category="inline-link-macro">下一步： NetApp XCP 。</block>
  <block id="10dbc4bbbec11552354dca73bcd59c78" category="paragraph"><block ref="10dbc4bbbec11552354dca73bcd59c78" category="inline-link-macro-rx"></block></block>
  <block id="7e0710b4cb48030b7a4c065128b88194" category="summary">本节介绍将包含安全信息的 CIFS 数据从源系统迁移到目标 ONTAP 系统的分步操作步骤。</block>
  <block id="82f0875c37eacadc40a7a7fb2a6b6313" category="doc">使用 ACL 将 CIFS 数据从源存储箱迁移到 ONTAP</block>
  <block id="0f17f55a868185c28a66d0817a780f53" category="inline-link-macro">先前版本：将数据从 7- 模式迁移到 ONTAP 。</block>
  <block id="99b2c0d3f328317650f8748e47c7bedb" category="paragraph"><block ref="99b2c0d3f328317650f8748e47c7bedb" category="inline-link-macro-rx"></block></block>
  <block id="c55bb6c3381ca2d8a4016e387cc62883" category="list-text">创建数据 LIF 以处理 SMB 客户端请求。</block>
  <block id="5368b7f480b92b4a2a9b475e6e9cf953" category="list-text">在 SVM 命名空间中挂载目标数据卷。</block>
  <block id="18f8848c17d02fd34b293885d5d3a215" category="list-text">在目标 SVM 上启动 CIFS 服务。</block>
  <block id="cf1269d629dc2110f2ae65edf8662b79" category="list-text">验证默认导出策略是否应用于目标 SVM 。</block>
  <block id="74e1ca9e0b551a7349207f3d546b9f51" category="list-text">修改导出策略规则以允许访问 CIFS 客户端。</block>
  <block id="3c19a2ac394a25f9ace05db18ad86c8b" category="paragraph">验证是否已修改策略规则。</block>
  <block id="876afc73f4771f46cfc9dba7fb687744" category="list-text">连接到安装了 XCP 的 Windows 客户端系统。浏览到 XCP 安装路径。</block>
  <block id="e73a44af938fa16a4816d3639d2f3b69" category="list-text">在 XCP Windows 客户端主机系统上运行 `XCP show` 命令，以查询源节点 SMB 导出。</block>
  <block id="7132ef955ec5e0151ccd0790da2551d7" category="list-text">运行 `help` 命令进行复制。</block>
  <block id="268b71a144890a49d97f8ca062fd48f9" category="list-text">在目标 ONTAP 系统上，获取需要作为 `backfall-user` 和 `backfall-group` 参数路径的值提供的本地用户和本地组名称列表。</block>
  <block id="ac9ad1198db0fb6f730a1f3aa97c35ab" category="list-text">要将使用 ACL 的 CIFS 数据从源迁移到目标，请使用 ` -acl` 和 ` – backft-user/group` 选项运行 `XCP copy` 命令。</block>
  <block id="a53e836d6264ad1778a4e1a7ae34f58c" category="paragraph">对于 `backfall-user/group` 选项，指定 Active Directory 中的任何用户或组，或者将本地用户 / 组分配给目标系统。</block>
  <block id="9aa080e55cad2c9968cc50de60a3f88e" category="list-text">如果 `XCP copy` 导致错误消息 `error failed to Obtain fallbackt security principal` ，请在 hosts 文件（`C ： \Windows\System32\drivers\etc\hosts` ）中添加目标框。</block>
  <block id="b7ceaa0e08e9de5bf76572a50529f752" category="paragraph">对 NetApp 存储目标框条目使用以下格式。</block>
  <block id="569ccf25ad533b79cf2f639f0326d943" category="list-text">在 hosts 文件中添加目标框条目后，如果仍收到错误消息 `error failed to get backfalling security principal` ，则表示目标系统中不存在用户 / 组。</block>
  <block id="4a909d1b3a171fdcddc8da070e839ecc" category="list-text">使用 `XCP copy` 迁移使用 ACL （包含或不包含根文件夹）的 CIFS 数据。</block>
  <block id="a4ebb620bc1fbff4f93249967cd47f4b" category="paragraph">如果没有根文件夹，请运行以下命令：</block>
  <block id="f6c1a65a9150853333bf43b4a6dc9e5b" category="paragraph">使用根文件夹运行以下命令：</block>
  <block id="154ef40d43f003733406aef6be0ada62" category="inline-link-macro">接下来：最佳实践准则和建议。</block>
  <block id="7fd167e59284838d9e36c5c99e4d2943" category="paragraph"><block ref="7fd167e59284838d9e36c5c99e4d2943" category="inline-link-macro-rx"></block></block>
  <block id="dc0b758a04bbb9e380300887d831e4e1" category="summary">本节提供了一些调整参数，这些参数有助于提高 XCP 操作的性能。</block>
  <block id="9db3ca538820d0cfb7b44ef80f16ca98" category="doc">性能调整</block>
  <block id="7931b9aae255139b42cb605b3b62a6db" category="inline-link-macro">上一页：规模估算准则。</block>
  <block id="0ff4824165c6661bc016402e35d2a9fe" category="paragraph"><block ref="0ff4824165c6661bc016402e35d2a9fe" category="inline-link-macro-rx"></block></block>
  <block id="ec6136417c258c9b7f95c39765c5ca51" category="paragraph">本节提供了一些有助于提高 XCP 操作性能的调整参数：</block>
  <block id="dd10b781bf6dd686a8631401ce0fba96" category="list-text">为了更好地扩展工作负载并将其分布在多个 XCP 实例之间，请拆分每个 XCP 实例的子文件夹以进行迁移和数据传输。</block>
  <block id="37e9b10f81fe31cb6b80609f724b34f8" category="list-text">XCP 可以使用最大的 CPU 资源— CPU 核越多，性能就越好。因此， XCP 服务器中应具有更多 CPU 。我们在实验室中测试了 128 GB RAM 和 48 个核心 CPU ，与 8 个 CPU 和 8 GB RAM 相比，性能更好。</block>
  <block id="437d7ec5d90f0fafc57a79e213e22708" category="list-text">使用 ` 并行` 选项的 XCP 副本基于 CPU 数量。默认的并行线程数（ 7 个）足以执行大多数 XCP 数据传输和迁移操作。默认情况下，对于 XCP Windows ，并行进程数等于 CPU 数。</block>
  <block id="3d01016b65c5e356c34758cb1e80518c" category="list-text">10GbE 是数据传输的良好开端。但是，我们使用 25GbE 和 100GbE 进行了测试，这两种配置可提供更好的数据传输，并建议用于大型文件大小的数据传输。</block>
  <block id="a174d00dcd4849e0653429de84c71cde" category="list-text">对于 Azure NetApp Files ，性能因服务级别而异。有关详细信息，请参见下表，其中显示了 Azure NetApp Files 服务级别和性能详细信息。</block>
  <block id="6d59be48f566a73e053e12167b279be5" category="cell">服务级别</block>
  <block id="eb6d8ae6f20283755b339c0dc273988b" category="cell">标准</block>
  <block id="8d5e7e72f12067991186cdf3cb7d5d9d" category="cell">高级版</block>
  <block id="7057376a419b3334cc7b8b7a9f064abb" category="cell">超级</block>
  <block id="0b85467ebafa7ca3c47e82dc38184484" category="cell">吞吐量</block>
  <block id="adcda45ec4de9aeb48e1893272b078d1" category="cell">16 Mbps/ TB （ TB ）</block>
  <block id="93209d2e9d1ed8d87a279cef886b5021" category="cell">64 MBps/TB</block>
  <block id="f646efbbd60d091e92b32611965c4f1c" category="cell">128 MBPS/TB</block>
  <block id="4a9cc851fc41c5762618832386fa4937" category="cell">工作负载类型</block>
  <block id="11969136028e1ffaeed70de5e59bde33" category="cell">通用文件共享，电子邮件和 Web</block>
  <block id="76ab8c335a6bb24396ea1953bac75705" category="cell">BMS ，数据库和应用程序</block>
  <block id="9dab8e594b90062c0612cbb1676234ba" category="cell">延迟敏感型应用程序</block>
  <block id="0a568304277380e4cfb0f2d2abbd99b4" category="cell">性能说明</block>
  <block id="c55268b956eecd1d58f60723a410c808" category="cell">标准性能：每 TB 1 ， 000 次 IOPS （ 16 K I/O ）和 16 Mbps/TB</block>
  <block id="536d2154a9035458ae8efd38b24f3ea7" category="cell">卓越的性能—每 TB 4 ， 000 次 IOPS （ 16 K I/O ）和 64 MBPS/TB</block>
  <block id="91ff77656b0dc231fcbe8f488a15a253" category="cell">极致性能：每 TB 8 ， 000 次 IOPS （ 16 K I/O ）和 128 MBPS/TB</block>
  <block id="121bc30e927e8a3d918fc90c0ec18fee" category="paragraph">您必须根据吞吐量和工作负载类型选择合适的服务级别。大多数客户都从高级级别开始，并根据工作负载更改服务级别。</block>
  <block id="f44706d8f59ec82b48b083fb246a4fc7" category="inline-link-macro">接下来：客户场景。</block>
  <block id="bb0eaaf9fa62e9175efd3145f00946ea" category="paragraph"><block ref="bb0eaaf9fa62e9175efd3145f00946ea" category="inline-link-macro-rx"></block></block>
  <block id="4b1c76979225b75a8e5f476356ed17e8" category="paragraph">基于 NetApp 的 VMware ：您的旅程从这里开始！</block>
  <block id="d7b056332bb039010d62c71ede534471" category="paragraph">如果您已准备好开始对 VMware 环境进行转型，请浏览最新的解决方案概述，查看我们最新的技术解决方案和产品演示。如果您已准备好下一步行动，请与 NetApp 和 VMware 专家社区接洽，帮助您规划和执行数据中心现代化，混合云或容器化应用程序计划。</block>
  <block id="be52ccc9c4dbcee449a6257062c0bcda" category="paragraph">不确定从何处开始？ <block ref="dcd7ec98fb935d9a5fd8ade723a47456" category="inline-link-macro-rx"></block> NetApp 的 VMware 专家成员。</block>
  <block id="27b7a196b8196df4eeee9d21ade20a45" category="inline-link-macro">PDF 格式</block>
  <block id="e2fd99d21fbe7a1b2ed6388c40d48b0f" category="admonition">此页面上显示的内容也可从中下载 <block ref="a182addaadbc8a97de909268c8dc9bf0" category="inline-link-macro-rx"></block>。</block>
  <block id="9d0be07780aeb437025d4b3420d12540" category="sidebar">NetApp XCP 数据迁移</block>
  <block id="68dfe5056c735db544868f482f9f1d6f" category="sidebar">NetApp XCP 最佳实践指南</block>
  <block id="acf055fa7efae33ce06471f448ae1267" category="sidebar">客户情形</block>
  <block id="c5071cdf8081474104ef1eee5ec6d784" category="sidebar">使用 ACL 将 CIFS 数据从源存储箱迁移到 ONTAP</block>
  <block id="211c181ce8e8cb0472af3095c66dc5eb" category="paragraph"><block ref="211c181ce8e8cb0472af3095c66dc5eb" category="inline-link-macro-rx"></block></block>
  <block id="7480aca6b5f94dc27cc94b015284d5e9" category="paragraph"><block ref="7480aca6b5f94dc27cc94b015284d5e9" category="inline-link-macro-rx"></block></block>
  <block id="6be5bc354916244292cf704d8a451541" category="inline-link-macro">视频：使用 Astra 控制中心迁移工作负载—采用 NetApp 的 Red Hat OpenShift</block>
  <block id="b0fd8947f538fb2988e86d35bac6d6fa" category="list-text"><block ref="b0fd8947f538fb2988e86d35bac6d6fa" category="inline-link-macro-rx"></block></block>
  <block id="c0a8420c339dd9d57d40448c30a749df" category="inline-link-macro">视频：使用 Astra Trident 和 SnapMirror 迁移工作负载—采用 NetApp 的 Red Hat OpenShift</block>
  <block id="a43d8fe0429e313d082e6919f1fd2b75" category="list-text"><block ref="a43d8fe0429e313d082e6919f1fd2b75" category="inline-link-macro-rx"></block></block>
  <block id="344aeea955e7674b99b8e8db2354133d" category="doc">使用 Astra 控制中心迁移工作负载：采用 NetApp 的 Red Hat OpenShift</block>
  <block id="7527b11aa1f9aa169a9d6103e9c4c417" category="paragraph">Azure NetApp Files ，速写和 dask 可通过与 Docker 和 Kubernetes 等业务流程工具集成来加快和简化大规模 ML 处理和培训的部署。通过统一端到端数据管道，此解决方案可降低许多高级计算工作负载固有的延迟和复杂性，从而有效地弥补开发和运营之间的差距。在培训阶段，数据科学家可以对大型数据集运行查询，并与其他用户安全地共享数据和算法模型。</block>
  <block id="a93fc9ba708498e20819f22e22ecfa5c" category="paragraph">通过在云中构建端到端分布式培训模型和数据管道，我们展示了与不利用 GPU 加速数据处理和计算框架的传统开源方法相比，工作流总完成时间有两个显著的提升。</block>
  <block id="fcceee9f9e65e4b0d089c6c433f6c191" category="paragraph">NetApp ， Microsoft ，开源业务流程框架和 NVIDIA 的结合，将最新技术作为托管服务集于一身，并具有极大的灵活性，可加快技术采用速度，加快新 AI/ML 应用程序的上市速度。这些高级服务在云原生环境中提供，可以轻松地移植到内部部署和混合部署架构中。</block>
  <block id="b622f3d3bde9c5202a2be0c23982e0b2" category="paragraph">此用例基于公开发布的<block ref="f00b4c49198828625540594bcd2c0e57" category="inline-link-rx"></block> 数据集来自<block ref="3ba217c046bd683ab55f300076736b4a" category="inline-link-rx"></block>。随着 ML 平台和应用程序的最新发展，我们现在非常关注大规模学习。点击率（ CTR ）是指每 100 次在线广告曝光的平均点击次数（以百分比表示）。它已广泛用作各种行业垂直市场和用例的关键指标，包括数字营销，零售，电子商务和服务提供商。使用 CTR 作为潜在客户流量的重要指标的示例包括：</block>
  <block id="d86cf69a8b82547a94ca3f6a307cf9a6" category="inline-link">Google 分析</block>
  <block id="fe123d76ac9bec74ba2056b6a34fbf5d" category="inline-link">AD 排名</block>
  <block id="747d705222dc64c89cfadd75a9792b30" category="list-text">* 数字营销： * 在中<block ref="6c9e2e85af2f8f35c64de5000ebda91e" category="inline-link-rx"></block>，可以使用 CTR 来衡量广告商或商家的关键字，广告和免费列表的表现。如果 CTR 较高，则表明用户发现您的广告和列表很有用且相关。CTR 还有助于实现关键字的预期 CTR ，它是的组成部分<block ref="428c3403a03510f9dc338448b285e764" category="inline-link-rx"></block>。</block>
  <block id="8a2e97f5a0cefdd4b76863bdd3773fb2" category="list-text">* 电子商务： * 除利用外<block ref="8785133d6074d4ab5f5345c36bc35a21" category="inline-link-rx"></block>，电子商务后端至少有一些访客统计信息。虽然这些统计信息乍看起来可能并不有用，但通常很容易阅读，并且可能比其他信息更准确。由此类统计信息组成的第一方数据集属于专有数据集，因此与电子商务销售商，买家和平台最相关。这些数据集可用于设置基准，并通过构建时间序列来与去年和昨天的结果进行比较，以供进一步分析。</block>
  <block id="5737cd832bf93fd33459cf0a04787441" category="list-text">* 零售： * Brick-and-mortar 零售商可以将访客数量和客户数量与 CTR 相关联。客户数量可从其销售点历史记录中查看。零售商网站或广告流量的 CTR 可能会导致上述销售。忠诚度计划是另一个用例，因为从在线广告或其他网站转出的客户可能会加入该计划以获得奖励。零售商可以通过忠诚度计划赢得客户，并记录销售历史记录中的行为，从而构建一个建议系统，该系统不仅可以预测不同类别的消费者购买行为，还可以对优惠券进行个性化设置并减少流失。</block>
  <block id="32c14bcab423a033bf540425e236d3e6" category="list-text">* 服务提供商： * 电信公司和互联网服务提供商拥有大量第一方用户遥测数据，可用于富有洞察力的 AI ， ML 和分析用例。例如，电信可以利用其移动用户每天的 Web 浏览顶级域历史日志来微调现有模型，以生成最新的受众细分，预测客户行为，并与广告商协作发布实时广告，从而获得更好的在线体验。在这种数据驱动型营销工作流中， CTR 是反映转换的一个重要指标。</block>
  <block id="78ae79f63f58a3ac75e77e3a075fd19e" category="inline-link">Trigeo Terabyte 单击 Logs</block>
  <block id="deb698cbe7918324e2e1564708266732" category="paragraph">在数字化营销背景下，<block ref="cc065865c19a3af4babfdf02c1c6b55d" category="inline-link-rx"></block> 现在是评估 ML 平台和算法可扩展性的参考数据集。通过预测点击率，广告宣传者可以选择最有可能对广告做出响应的访客，分析浏览历史记录，并根据用户兴趣显示最相关的广告。</block>
  <block id="5f326be91a09bc93ca87444e834df2a6" category="paragraph">本技术报告中提供的解决方案重点介绍了以下优势：</block>
  <block id="e150c8d445e71cda899957943e39b75f" category="list-text">分布式培训的 dask 并行计算框架</block>
  <block id="ec61531814ab09c5338813eecc764692" category="paragraph">基于快速 AI 和 Azure NetApp Files 构建的端到端工作流展示了随机林模型训练时间大幅缩短两个数量级。与传统的熊猫方法相比，每天处理实际点击日志时，这种改进非常重要，其中每天包含 45 GB 的结构化表格数据（平均）。这相当于一个包含大约 200 亿行的 DataFrame 。我们将在本技术报告中演示集群环境设置，框架和库安装，数据加载和处理，传统培训与分布式培训，可视化和监控，并比较关键的端到端运行时结果。</block>
  <block id="0359d40b3d1a900a1841f1e8bd783cd5" category="doc">TR-4904 ： Azure 中的分布式培训—点击率预测</block>
  <block id="1863627f5be51826024a24014fce26ff" category="sidebar">Azure 中的分布式培训—点击率预测</block>
  <block id="458df51beb3b33cfa61bdc8725403f5b" category="sidebar">Jupyter 笔记本电脑供参考</block>
  <block id="8d7efa937e97b1a8187ff8f122d9732a" category="sidebar">针对基于云的 VMware 部署优化存储</block>
  <block id="5a6bd3a9e0048284caf2b5f521d90959" category="list-text"><block ref="5a6bd3a9e0048284caf2b5f521d90959" category="inline-link-macro-rx"></block></block>
  <block id="2625fb6375d503af481868caf90606c9" category="summary">本节链接到与本技术报告相关的两台 Jupyter 笔记本电脑。</block>
  <block id="91409fc3ebd20becb4eb816cbcceb02e" category="doc">Jupyter 笔记本电脑作为参考</block>
  <block id="cdd5560e07964d04d88721f16446a3b6" category="paragraph">本技术报告涉及两款 Jupyter 笔记本电脑：</block>
  <block id="1490d9a5ddbc6bcbe6cedaa01eb50f99" category="inline-link-macro">* ct-andasrf-colled.ipynb.*</block>
  <block id="562c7333f0fea5590cfeb818a55e6557" category="list-text"><block ref="6f686a9606ae64621340ea0a5e72dfde" category="inline-link-macro-rx"></block> 此笔记本电脑可从 Criteo TB Click Logs 数据集加载第 15 天的数据，将数据处理并格式化到一个熊猫 DataFrame 中，训练一个 Scikit 学习随机林模型，执行预测并计算准确性。</block>
  <block id="c0cb1f1199ae4e4bdfa626e26a5a25cd" category="inline-link-macro">* Criteo_dask_rf.ipynb.*</block>
  <block id="fa93cb17bf7778768ccae778487bf90d" category="list-text"><block ref="01d86d8522c2722466fcbda71181d3ff" category="inline-link-macro-rx"></block> 此笔记本电脑可从 Criteo Terabyte Click Logs 数据集加载第 15 天数据，将数据处理并格式化为 dask cuDF ，训练 dask cuML 随机林模型，执行预测并计算准确性。这种分布式数据和模型处理和培训方法通过利用多个具有 GPU 的员工节点来实现高效率。与传统的 ML 方法相比，处理的数据越多，节省的时间就越多。您可以将此笔记本电脑部署在云，内部或混合环境中，其中 Kubernetes 集群包含不同位置的计算和存储，前提是您的网络设置可以自由移动数据和分发型号。</block>
  <block id="95e5ff389c2796a171f904ad5b9322f6" category="list-text">NetApp 和 VMware Cloud Foundation （ VCF ）</block>
  <block id="81cd1d42ffdb75544144e24cf0f8dc54" category="inline-link-macro">第 1 部分：入门</block>
  <block id="837bbffc16dc6e344470df1114a13c87" category="list-text"><block ref="837bbffc16dc6e344470df1114a13c87" category="inline-link-macro-rx"></block></block>
  <block id="0437c596200f9be8466a3200f5cf2438" category="inline-link-macro">第 2 部分： vcf 和 ONTAP 主存储</block>
  <block id="e361fc9a6477c5857207bca25b3d797f" category="list-text"><block ref="e361fc9a6477c5857207bca25b3d797f" category="inline-link-macro-rx"></block></block>
  <block id="14c9e898417d6b3caceb9c60335c4bb3" category="inline-link-macro">第 3 部分： vcf 和 Element 主体存储</block>
  <block id="aa37de763ea804c1fb3fe637fb6ee5ef" category="list-text"><block ref="aa37de763ea804c1fb3fe637fb6ee5ef" category="inline-link-macro-rx"></block></block>
  <block id="fbbcbe8b70235742e3e6aa656c7815d9" category="inline-link-macro">第 4 部分：适用于 VMware 的 ONTAP 工具和补充存储</block>
  <block id="de8f12d6d2f85119918d1bbb774d43c8" category="list-text"><block ref="de8f12d6d2f85119918d1bbb774d43c8" category="inline-link-macro-rx"></block></block>
  <block id="00d07ce14f227693b9dabba2f52b53a5" category="inline-link-macro">使用基于 NetApp 的云产品开始使用 Azure VMware 解决方案</block>
  <block id="ac66988ead29ba5f4ed32ec3894527e7" category="list-text"><block ref="ac66988ead29ba5f4ed32ec3894527e7" category="inline-link-macro-rx"></block></block>
  <block id="3123a26626e19f387157faf3a8e35e86" category="list-text">您必须对 Red Hat OpenShift 集群具有集群管理员访问权限。</block>
  <block id="abfe00e88b26a267771078e0295b1573" category="admonition">Docker 安装的 Docker 版本必须大于 20.10 ，而 Podman 安装的 Podman 版本必须大于 3.0 。</block>
  <block id="e2f745ac603721ed9903b0acea00d059" category="admonition">如果使用 `kubeadmin` user 登录到专用注册表，请使用 token 代替 password - `podman login -u Ocp-user -p token -tls-verify=false astra-registry.apps.ocp-vmw.cie.netapp.com` 。</block>
  <block id="e4b91f5b748fa6ef8813d2871257b134" category="admonition">或者，您也可以创建服务帐户，分配注册表编辑器和 / 或注册表查看器角色（取决于您是否需要推 / 拉访问），并使用服务帐户的令牌登录到注册表。</block>
  <block id="ad533c54cadd80fbf8f60e58b7d3abd6" category="admonition">如果使用 `kubeadmin` user 登录到专用注册表，请使用 token 代替 password - `docker login -u Ocp-user -p token astra-registry.apps.ocp-vmw.cie.netapp.com` 。</block>
  <block id="4324c8f0a70a221bdde33868774e5a76" category="list-text">编辑 Astra 控制中心操作员 CR `Astra_control_center_operator_deploy.YAML` 这是 Astra 控制中心部署的一组所有资源。在操作员 CR 中，找到 `Acc-operator-controller-manager` 的部署定义，并输入注册表的 FQDN 以及将映像推送到注册表时提供的组织名称（在此示例中为 `astra-registry.apps.ocp-vmw.cie.netapp.com/netapp-astra` ） 替换文本 `ASTRA_image_regRegistry` 并提供我们刚刚在 `imagePullSecret` 部分中创建的密钥名称。验证操作员的其他详细信息，保存并关闭。</block>
  <block id="0f436b7e192eae471d7abf1265bb4c02" category="list-text">通过浏览 Astra 控制中心的 FQDN 登录到该 GUI 。</block>
  <block id="8b2aacc194c3dc4c36ce93a57e31685c" category="list-text">从当前默认存储类中删除默认标注，并将支持 Trident 的存储类标注为 OpenShift 集群的默认值。</block>
  <block id="53557215e4d209eda16495dbe5f7c505" category="paragraph">+ 注意：如果您使用 `kubeadmin` user 登录到专用注册表，请使用 token 代替密码。</block>
  <block id="6c2749dd86f49cdb85fde6976a317e4b" category="summary">本节介绍此 AI 解决方案的技术基础。</block>
  <block id="42b507999e258502c07acce91c03de9f" category="paragraph"><block ref="42b507999e258502c07acce91c03de9f" category="inline-link-macro-rx"></block></block>
  <block id="b7bec75e06d57a8576b1ec632131ea53" category="paragraph">一流的 NetApp AFF 存储系统支持在边缘进行 AI 推理部署，通过行业领先的性能，卓越的灵活性，云集成和一流的数据管理满足企业级存储需求。NetApp AFF 系统专为闪存设计，可帮助加速，管理和保护业务关键型数据。</block>
  <block id="45f242ad7738d4805c03311378260bbf" category="list-text">入门级 NetApp AFF 存储系统基于 FAS2750 硬件和 SSD 闪存介质</block>
  <block id="d308392edcd4d2f839897b51e24cf6f6" category="list-text">HA 配置中的两个控制器</block>
  <block id="7df12cd193e8452ed6fc45ca8bcd3771" category="paragraph"><block ref="7df12cd193e8452ed6fc45ca8bcd3771" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a6b0a1e5585dc8095dd546c5930f1a6c" category="paragraph">NetApp 入门级 AFF C190 存储系统支持以下功能：</block>
  <block id="42087aa1683ece2ea30ab7fa45862cd6" category="list-text">最大驱动器数为 24 个 960 GB SSD</block>
  <block id="d7123d8583ed65e3090da25ea5aee965" category="list-text">两种可能的配置：</block>
  <block id="35b9fc01c3820062d5969f142bdc5ce5" category="list-text">以太网（ 10GbE ）： 4 个 10GBASE-T （ RJ-45 ）端口</block>
  <block id="f5e2ae88aead451be011eb9f8abfdd6e" category="list-text">统一（ 16 Gb FC 或 10GbE ）： 4 个统一目标适配器 2 （ UTA2 ）端口</block>
  <block id="1e927fd215e516034d85785b393b0efb" category="list-text">最大有效容量为 50.5 TB</block>
  <block id="aa9cba7f7b6d2ff8fb2251620a584dcd" category="admonition">对于 NAS 工作负载，一个入门级 AFF C190 系统支持连续读取吞吐量为 4.4 GBps ，延迟为 1 毫秒或更短的小型随机读取吞吐量为 230 K IOPS 。</block>
  <block id="ac7bdd389786fda32ee572c48eef4838" category="paragraph">NetApp 还提供了其他入门级存储系统，可为大规模部署提供更高的性能和可扩展性。对于 NAS 工作负载，一个入门级 AFF A220 系统支持：</block>
  <block id="732568c5581337c7341011c38721e2db" category="list-text">顺序读取的吞吐量为 6.2 GBps</block>
  <block id="4900f6d90a4169888690f2c04f3c6603" category="list-text">在延迟不超过 1 毫秒的情况下进行小型随机读取时，可实现 375000 IOPS</block>
  <block id="fbcd9d84b2d7be8631cbf7226884f17a" category="list-text">最大驱动器数为 144 个 960 GB ， 3.8 TB 或 7.6 TB SSD</block>
  <block id="db527e605a2eacc627448a70b8a745db" category="list-text">AFF A220 可扩展到 1 PB 以上的有效容量</block>
  <block id="25297dbc8df2aecff2fa2e9e47638d35" category="section-title">NetApp AFF A250</block>
  <block id="cac36335022421f12e1c8e999ffeb1af" category="list-text">最大有效容量为 35 PB ，最大横向扩展为 2-24 个节点（ 12 个 HA 对）</block>
  <block id="62a23a7791227c5f5e3d068e70759128" category="list-text">与 AFF A220 相比，性能提高≥ 45%</block>
  <block id="dc7ac33362f108fc7f4b7d8eb0e2cf4e" category="list-text">440 ， 000 次 IOPS 随机读取 @1 毫秒</block>
  <block id="0f4615fb8d6105bcb2cbce504f8f091c" category="list-text">基于最新的 NetApp ONTAP 版本 ONTAP 9.8 构建</block>
  <block id="440a976974d702d027543e058c1fffc0" category="list-text">利用两个 25 Gb 以太网实现 HA 和集群互连</block>
  <block id="4dc1c0d5a0f0257d8d9e183bc226ab45" category="section-title">NetApp E 系列 EF 系统</block>
  <block id="f5e23a285b378cde99c2d7fb43586c1b" category="paragraph">EF 系列是一组入门级和中端全闪存 SAN 存储阵列，可通过 NetApp SANtricity 软件加快数据访问速度，并帮助您更快地从中获得价值。这些系统提供 SAS 和 NVMe 闪存存储，并为您提供经济实惠的至极高 IOPS ， 100 微秒以下的响应时间以及高达 44 GBps 的带宽，使其成为混合工作负载以及 AI 推理和高性能计算（ HPC ）等要求苛刻的应用程序的理想之选。</block>
  <block id="51ffc2dfd09bb521be00106f197d1009" category="paragraph"><block ref="51ffc2dfd09bb521be00106f197d1009" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e6f17b7c2ad64f8977585fc43d702abf" category="section-title">NetApp EF280</block>
  <block id="2d6477e98cb834485323c97da975c640" category="list-text">支持 32 Gb/16 Gb FC ， 25 Gb/10 Gb iSCSI 和 12 Gb SAS</block>
  <block id="d637a0904677ae775d98b9ce0beda3d6" category="list-text">最大有效容量为 96 个驱动器，总容量为 1.5 PB</block>
  <block id="6f409cb54d8cb27deac8a918fe03f3cc" category="list-text">10 Gbps 吞吐量（顺序读取）</block>
  <block id="7c61b8793dbe5a66cbf144bdabcf76cd" category="list-text">30 万次 IOPS （随机读取）</block>
  <block id="4c5a963973ae3026e92baab2ef522c6c" category="list-text">NetApp EF280 是 NetApp 产品组合中成本最低的全闪存阵列（ AFA ）</block>
  <block id="44114b1635cead15f56735bad0467251" category="section-title">NetApp EF300</block>
  <block id="f1330bea5ad6aa446aa17d0a324bb579" category="list-text">24 个 NVMe SSD 驱动器，总容量为 367 TB</block>
  <block id="6768e0b9e957297070e3822e98a4b8f9" category="list-text">扩展选项，总容量为 240 个 NL-SAS HDD ， 96 个 SAS SSD 或两者的组合</block>
  <block id="0fa40de31cbd933cc9a954d82204feb9" category="list-text">100 GB NVMe/IB ， NVMe/RoCE ， iSE/IB 和 SRP/IB</block>
  <block id="aee7a4e3788dbbff7166952ed0e2d2c9" category="list-text">32 GB NVMe/FC ， FCP</block>
  <block id="c4b9deb88d9cf1b1a2160cb28a2c41ca" category="list-text">25 GB iSCSI</block>
  <block id="03597240f9b0b4a23f3ffdf6e159d6ca" category="list-text">20 Gbps （顺序读取）</block>
  <block id="ffe3b3adfe232ee25f1914e7e7d266c4" category="list-text">670K IOPS （随机读取）</block>
  <block id="7105ea3513c2bdae1a0d63a9f0703579" category="inline-link">NetApp EF 系列 NetApp EF 系列全闪存阵列 EF600 ， F300 ， EF570 和 EF280 产品规格</block>
  <block id="6e69804b180359b12a32a56c17c0641e" category="admonition">有关详细信息，请参见<block ref="5f5484869dc0c271e2b062d172d38bee" category="inline-link-rx"></block>。</block>
  <block id="f1586460cef11d0abaaf5270f37f18d7" category="section-title">简化数据管理</block>
  <block id="2e2b24551fd50942c6da57d4f8efdfae" category="paragraph">数据管理对于企业 IT 运营至关重要，以便将适当的资源用于应用程序和数据集。ONTAP 具有以下功能，可简化操作并降低总运营成本：</block>
  <block id="4934cd09a8e487be128d2b6321ee3279" category="list-text">* 实时数据缩减和扩展的重复数据删除。 * 数据缩减可减少存储块中浪费的空间，重复数据删除可显著提高有效容量。此适用场景数据存储在本地，并分层到云。</block>
  <block id="0ddc097c124782f16e8a0a1b014fc2bb" category="list-text">* 最低，最高和自适应服务质量（ AQoS ）。 * 细粒度服务质量（ QoS ）控制有助于在高度共享的环境中保持关键应用程序的性能水平。</block>
  <block id="0c720f269a89477f24f77f6f027719cc" category="inline-link-macro">TR-4598</block>
  <block id="7920a2957aeb5c70e8ee2fa43c94e741" category="list-text">* NetApp FabricPool 。 * 此功能可将冷数据自动分层到公有和私有云存储选项，包括 Amazon Web Services （ AWS ）， Azure 和 NetApp StorageGRID Storage 解决方案。有关 FabricPool 的详细信息，请参见 <block ref="38e4393e170a142db2e52760317ecb7f" category="inline-link-macro-rx"></block>。</block>
  <block id="28e23b5888c04e1859e75c594c6cec26" category="section-title">加速和保护数据</block>
  <block id="85e643b872d0d98ec2251220de803a1f" category="paragraph">ONTAP 9 可提供卓越的性能和数据保护，并通过以下方式扩展这些功能：</block>
  <block id="bfb9fa643243eb975ccd9d158cf97800" category="list-text">* 性能和低延迟。 * ONTAP 可提供尽可能高的吞吐量，并尽可能降低延迟。</block>
  <block id="86a12b3dbbf039b371f714a515919535" category="list-text">* NetApp 卷加密（ NVE ）。 * ONTAP 提供原生卷级加密，并支持板载和外部密钥管理。</block>
  <block id="b3023c0a4db125fc22f0d6056c6e379d" category="list-text">* 多租户和多因素身份验证。 * ONTAP 支持以最高的安全性级别共享基础架构资源。</block>
  <block id="685f280ead44650493627d9ac47818e1" category="section-title">Future-Proof 基础架构</block>
  <block id="f9eaef0b2cf89b234c431c18aec36bf3" category="paragraph">ONTAP 9 具有以下功能，可满足不断变化的苛刻业务需求：</block>
  <block id="9e98379ad83b5c60933a3437c7fb61c7" category="list-text">* 无缝扩展和无中断运行。 * ONTAP 支持向现有控制器和横向扩展集群无中断添加容量。客户可以升级到 NVMe 和 32 Gb FC 等最新技术，而无需进行成本高昂的数据迁移或中断。</block>
  <block id="0cee26e8172666a9085f957269fc4b64" category="list-text">* 云连接。 * ONTAP 是云连接最广泛的存储管理软件，可在所有公有云中选择软件定义的存储（ ONTAP Select ）和云原生实例（ NetApp Cloud Volumes Service ）。</block>
  <block id="b5dc6026803056308b6bf7007af32a2b" category="list-text">* 与新兴应用程序集成。 * ONTAP 使用支持现有企业级应用程序的相同基础架构，为下一代平台和应用程序（例如自动驾驶汽车，智能城市和行业 4.0 ）提供企业级数据服务。</block>
  <block id="e4872d9c30e978d9408425f0e08882c5" category="section-title">NetApp SANtricity</block>
  <block id="965539211ad2d7bc981e7e954db08850" category="inline-link">NetApp E 系列 SANtricity 软件产品规格</block>
  <block id="568549d316f6f749a07012e522e0bca3" category="paragraph">NetApp SANtricity 旨在为 E 系列混合闪存和 EF 系列全闪存阵列提供行业领先的性能，可靠性和精简性。为繁重工作负载应用程序（包括数据分析，视频监控以及备份和恢复）实现 E 系列混合闪存和 EF 系列全闪存阵列的最高性能和利用率。借助 SANtricity ，可以在存储保持联机状态的同时完成配置调整，维护，容量扩展和其他任务。SANtricity 还提供卓越的数据保护，主动监控和认证安全性—所有这些功能均可通过易于使用的机载 System Manager 界面进行访问。要了解更多信息，请参见<block ref="64769f0652e98a060ba5d2cd17320298" category="inline-link-rx"></block>。</block>
  <block id="c4cf91172f1e96366d0dfa38c1167df9" category="section-title">性能优化</block>
  <block id="3d615c3559b8d33749ea23cf3a34b759" category="paragraph">经过性能优化的 SANtricity 软件可为您的所有数据分析，视频监控和备份应用程序提供具有高 IOPS ，高吞吐量和低延迟的数据。提高高 IOPS ，低延迟应用程序和高带宽，高吞吐量应用程序的性能。</block>
  <block id="8238dd9365065265be82d79d4dd38a98" category="section-title">最大限度地延长正常运行时间</block>
  <block id="28ed557ae8b4ff60f83da71465cbcb9b" category="paragraph">在存储保持联机的情况下完成所有管理任务。在不中断 I/O 的情况下调整配置，执行维护或扩展容量借助自动化功能，联机配置，最先进的动态磁盘池（ Dynamic Disk Pool ， DPP ）技术等实现同类最佳的可靠性。</block>
  <block id="2b34e4806834294a7dd611ad1d7d0308" category="section-title">请轻松休息</block>
  <block id="7847b3892c0f355acdb3fe824654e209" category="paragraph">SANtricity 软件可通过易于使用的机载 System Manager 界面提供卓越的数据保护，主动监控和认证安全性。简化存储管理任务。获得对所有 E 系列存储系统进行高级调整所需的灵活性。随时随地管理您的 NetApp E 系列系统。我们基于 Web 的盒装界面简化了您的管理工作流。</block>
  <block id="2758085534b10a85f702f6a61737eefb" category="paragraph"><block ref="d14308042ff124582c531f74c03d90f3" category="inline-link-rx"></block> NetApp 是适用于 Docker 和 Kubernetes 的开源动态存储编排程序，可简化永久性存储的创建，管理和使用。Trident 是 Kubernetes 原生应用程序，直接在 Kubernetes 集群中运行。借助 Trident ，客户可以将 DL 容器映像无缝部署到 NetApp 存储上，并为 AI 容器部署提供企业级体验。Kubernetes 用户（例如 ML 开发人员和数据科学家）可以创建，管理和自动化流程编排和克隆，从而充分利用 NetApp 技术提供的 NetApp 高级数据管理功能。</block>
  <block id="e367efbc26bd12c0d6ae37dd6a55ef9b" category="inline-link">Cloud Sync</block>
  <block id="2d76806bea2175a1c575d37015a3621b" category="paragraph"><block ref="f0ec1a9d50acb3759e364a1cdfa9961d" category="inline-link-rx"></block> 是一项 NetApp 服务，用于快速安全地同步数据。无论您是需要在内部 NFS 还是 SMB 文件共享， NetApp StorageGRID ， NetApp ONTAP S3 ， NetApp Cloud Volumes Service ， Azure NetApp Files ， Amazon Simple Storage Service （ Amazon S3 ）， Amazon Elastic File System （ Amazon EFS ）， Azure Blob ， Google Cloud Storage 之间传输文件， 或者 IBM 云对象存储， Cloud Sync 可以将文件快速安全地移动到您需要的位置。数据传输完成后，即可在源和目标上完全使用。Cloud Sync 会根据您预定义的计划持续同步数据，并仅移动增量，从而最大限度地减少在数据复制上花费的时间和金钱。Cloud Sync 是一款软件即服务（ SaaS ）工具，设置和使用极其简单。由 Cloud Sync 触发的数据传输由数据代理执行。您可以在 AWS ， Azure ， Google 云平台或内部部署 Cloud Sync 数据代理。</block>
  <block id="d552f08a6baeb9bee58f2ca6ff5090d2" category="section-title">联想 ThinkSystem 服务器</block>
  <block id="e76fa728781968dd4a707e2d3b1d8108" category="paragraph">联想 ThinkSystem 服务器采用创新的硬件，软件和服务，可解决客户当前面临的挑战，并提供一种循序渐进的模块化设计方法来应对未来的挑战。这些服务器利用同类最佳的行业标准技术以及联想的差异化创新技术，为 x86 服务器提供最大的灵活性。</block>
  <block id="493e1540ce727fb5f465fff015aa4733" category="paragraph">部署联想 ThinkSystem 服务器的主要优势包括：</block>
  <block id="b7c6c5eb82b90f69eddd06060626e5e3" category="list-text">高度可扩展的模块化设计，可随业务发展而扩展</block>
  <block id="c2599c559a0be54b242b8aa3c67325c8" category="list-text">行业领先的弹性，可节省数小时的成本高昂的计划外停机时间</block>
  <block id="c57cb88fcbeb47afa8496b8fc32cbf03" category="list-text">快速闪存技术可实现更低的延迟，更快的响应速度以及更智能的实时数据管理</block>
  <block id="6d72d9a0181555ca86c9562861e47058" category="paragraph">在 AI 领域，联想正在采取切实可行的方法帮助企业了解 ML 和 AI 的优势并将其用于工作负载。联想客户可以在联想 AI 创新中心探索和评估联想 AI 产品，以充分了解其特定用例的价值。为了缩短实现价值的时间，这种以客户为中心的方法可以为客户提供解决方案开发平台的概念验证，这些平台已准备就绪，可供 AI 使用并进行优化。</block>
  <block id="13f9a963bd60406520ccdc128d44b54a" category="section-title">联想 ThinkSystem SE350 边缘服务器</block>
  <block id="6bf0f92a7340921305982a91f7277085" category="paragraph">通过边缘计算，可以在将 IoT 设备中的数据发送到数据中心或云之前在网络边缘对其进行分析。如下图所示，联想 ThinkSystem SE350 专为满足边缘部署的独特要求而设计，采用紧凑的加固型环境加固外形，重点关注灵活性，连接性，安全性和远程易管理性。</block>
  <block id="72dd0df190a1bdc8d3043fafdba7122b" category="paragraph">SE350 采用 Intel Xeon D 处理器，可以灵活地支持边缘 AI 工作负载的加速，专为应对数据中心以外各种环境中服务器部署的挑战而构建。</block>
  <block id="b739a166d96ffd72ac4d456012bfbe21" category="paragraph"><block ref="b739a166d96ffd72ac4d456012bfbe21" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1e8dc5b3fbe4fe568bf4cc78b4a053fd" category="paragraph"><block ref="1e8dc5b3fbe4fe568bf4cc78b4a053fd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6bd5e585bc974f029ff9c7cc8a2b68dd" category="section-title">MLPerf</block>
  <block id="45c08b3aee1d5fb5dc3447ec1271a853" category="inline-link">MLPerf 推理 v0.7</block>
  <block id="f6922096e43c9e99d2be9d521357ff1c" category="paragraph">MLPerf 是用于评估 AI 性能的行业领先基准套件。它涵盖应用 AI 的许多方面，包括图像分类，对象检测，医学影像和自然语言处理（ NLP ）。在此验证中，我们使用了推理 v0.7 工作负载，这是此验证完成时 MLPerf 推理的最新迭代。。<block ref="1303efdddf9d8dbc0de31c402aa4ef22" category="inline-link-rx"></block> 套件包括四个适用于数据中心和边缘系统的新基准：</block>
  <block id="c781a146774780843a929b97004ba720" category="list-text">Transformers （ Bert ）提供的 * 双向编码器表示法经过微调，可使用 squad 数据集回答问题。</block>
  <block id="cb93b50c2b2216543a9eee4d9a38b38c" category="list-text">* 深度学习建议模式（ DLRM ）是一种个性化和建议模式，经过培训可优化点击率（ CTR ）。</block>
  <block id="16139bb6e8da8fe8f8aaf1e5fb8bde0d" category="list-text">* 3D U-Net.* 3D U-Net 架构接受过有关脑肿瘤分段（ Bras ）数据集的培训。</block>
  <block id="5691eec0e5e0ea401478ea67b8168d64" category="list-text">* RNN-T.* 经常性神经网络传感器（ RNNP-T ）是一种自动语音识别（ Automatic Speech Recognition ， ASR ）模型，该模型经过部分 LibriSpeech 的训练。MLPerf 推理结果和代码已公开发布，并已获得 Apache 许可证。MLPerf 推理具有一个 Edge 分支，可支持以下情形：</block>
  <block id="e772865569495cb43ba25be1d6eed756" category="list-text">* 单一流。 * 此场景模拟响应能力是关键因素的系统，例如在智能手机上执行脱机 AI 查询。各个查询将发送到系统并记录响应时间。结果将报告所有响应的 90 百分位延迟。</block>
  <block id="f9cf7025c2d80af397a9b960974631e2" category="list-text">* 多流。 * 此基准测试适用于处理来自多个传感器的输入的系统。在测试期间，系统会按固定的时间间隔发送查询。会施加 QoS 限制（允许的最大延迟）。此测试将报告系统在满足 QoS 限制的情况下可以处理的流数量。</block>
  <block id="78a9abbe3c771a5882830fc8e2a73a8f" category="list-text">* 脱机。 * 这是涉及批处理应用程序的最简单情形，指标是每秒样本吞吐量。系统可以使用所有数据，基准测试可测量处理所有样本所需的时间。</block>
  <block id="cc8cc2653d3a795d17b5d90b14d00e19" category="inline-link"><block ref="cc8cc2653d3a795d17b5d90b14d00e19" category="inline-link-rx"></block></block>
  <block id="c953c121914b99f83398f20ab2160ed1" category="paragraph">联想已发布了本文档中使用的服务器 SE350 与 T4 的 MLPerf 推理得分。有关结果，请参见<block ref="8efc95b379113ebfb6f66010213223ce" category="inline-link-rx"></block> 在条目 #0.7-145 的 " 边缘，封闭分区 " 一节中。</block>
  <block id="26cb2cd90a9e0e03f63323eab13f117d" category="inline-link-macro">下一步：测试计划。</block>
  <block id="91666b8460dc62d134fe80c31f05d28b" category="paragraph"><block ref="91666b8460dc62d134fe80c31f05d28b" category="inline-link-macro-rx"></block></block>
  <block id="58415f353579ec62f4e5d8047761a3cc" category="summary">AI 驱动的自动化和边缘计算是帮助业务组织实现数字化转型并最大限度地提高运营效率和安全性的领先方法。借助边缘计算，数据处理速度更快，因为它不必往返于数据中心。因此，将数据来回发送到数据中心或云的相关成本会降低。</block>
  <block id="1490b4526090ba1052ae7d989d2f44df" category="inline-link-macro">上一页：架构规模估算选项。</block>
  <block id="9d58af74dd11a7bf0a907e66af94ae03" category="paragraph"><block ref="9d58af74dd11a7bf0a907e66af94ae03" category="inline-link-macro-rx"></block></block>
  <block id="7d7c5045abef00692470c8d5ed1aeebd" category="paragraph">AI 驱动的自动化和边缘计算是帮助业务组织实现数字化转型并最大限度地提高运营效率和安全性的领先方法。借助边缘计算，数据处理速度更快，因为它不必往返于数据中心。因此，将数据来回发送到数据中心或云的相关成本会降低。如果企业必须使用部署在边缘的人工智能推理模型近乎实时地做出决策，则降低延迟和提高速度将非常有用。</block>
  <block id="691e8c5d8b13259848ef2e5515d14ca9" category="paragraph">NetApp 存储系统可提供与本地 SSD 存储相同或更好的性能，并为数据科学家，数据工程师， AI/ML 开发人员以及业务或 IT 决策者带来以下优势：</block>
  <block id="59ceee4c2b9743d6e9aae43f1e9ee547" category="list-text">在 AI 系统，分析和其他关键业务系统之间轻松共享数据。这种数据共享可减少基础架构开销，提高性能并简化整个企业的数据管理。</block>
  <block id="b9f30f0e1030c74a0db7ca1a1e82a22f" category="list-text">可独立扩展的计算和存储，最大限度地降低成本并提高资源利用率。</block>
  <block id="40454c2a63608aacf0433b6a47f388f4" category="list-text">利用集成的 Snapshot 副本和克隆简化开发和部署工作流，实现瞬时且节省空间的用户工作空间，集成版本控制和自动化部署。</block>
  <block id="0543f71645ff9108a860d92965cc1383" category="list-text">企业级数据保护，可实现灾难恢复和业务连续性。本文档中介绍的 NetApp 和联想解决方案是一种灵活的横向扩展架构，非常适合在边缘进行企业级 AI 推理部署。</block>
  <block id="68c8080de8c25b2c95e86546db2c34f4" category="list-text">J.Falkanger ，高级联想 HPC &amp; AI 解决方案经理</block>
  <block id="a1be3af64bad65325413de79cbdd38ec" category="list-text">NetApp 技术营销工程师 Dave Arnette</block>
  <block id="ab7eb4cf2e6900db95523411e2e2d968" category="list-text">NetApp E 系列 AI 解决方案技术主管 Joey Parnell</block>
  <block id="7506341ffff969b3db4120a09a3cd873" category="list-text">NetApp QA 工程师 Cody Harryman</block>
  <block id="16d9e623379df2a050a5042b643bf4fc" category="list-text">NetApp AFF A 系列阵列产品页面</block>
  <block id="2eea2276b1fb61cd770f311f77c0f440" category="inline-link"><block ref="2eea2276b1fb61cd770f311f77c0f440" category="inline-link-rx"></block></block>
  <block id="3ac5561d8de2087fdd9ac49ace880bff" category="paragraph"><block ref="3ac5561d8de2087fdd9ac49ace880bff" category="inline-link-rx"></block></block>
  <block id="ac2e4973250b614c4ffed16837be9bda" category="list-text">NetApp ONTAP 数据管理软件— ONTAP 9 信息库</block>
  <block id="8ac8a4cdf844ed67e9ec6ddc4b3e95ad" category="paragraph"><block ref="8ac8a4cdf844ed67e9ec6ddc4b3e95ad" category="inline-link-rx"></block></block>
  <block id="5dbac8b4dac620b04fd11b54388ac506" category="list-text">TR-4727 ：《 NetApp EF 系列简介》</block>
  <block id="3df74183de4e18a002d0a9dadd2b4b41" category="inline-link"><block ref="3df74183de4e18a002d0a9dadd2b4b41" category="inline-link-rx"></block></block>
  <block id="5e60359f54f57375f6417990b408bc8d" category="paragraph"><block ref="5e60359f54f57375f6417990b408bc8d" category="inline-link-rx"></block></block>
  <block id="bf8eb67f3476640d74487d7395b166a8" category="list-text">NetApp E 系列 SANtricity 软件产品规格</block>
  <block id="01e4cb0e0f13f033fd419d3abf905d34" category="inline-link"><block ref="01e4cb0e0f13f033fd419d3abf905d34" category="inline-link-rx"></block></block>
  <block id="62cabab367af4d0d4f74456d673e91e7" category="paragraph"><block ref="62cabab367af4d0d4f74456d673e91e7" category="inline-link-rx"></block></block>
  <block id="f11b61c13d771c4795415471f8362f8c" category="list-text">适用于容器的 NetApp 持久存储— NetApp Trident</block>
  <block id="856500f909a4984692886f9549398b67" category="inline-link"><block ref="856500f909a4984692886f9549398b67" category="inline-link-rx"></block></block>
  <block id="fe6e33e3be237f2a488d04432ad4b35f" category="list-text"><block ref="fe6e33e3be237f2a488d04432ad4b35f" category="inline-link-rx"></block></block>
  <block id="9083657cbd1d0fb49ada01ab2e2cc193" category="inline-link"><block ref="9083657cbd1d0fb49ada01ab2e2cc193" category="inline-link-rx"></block></block>
  <block id="3de4b3f21621e41c0738a82d4e694114" category="list-text"><block ref="3de4b3f21621e41c0738a82d4e694114" category="inline-link-rx"></block></block>
  <block id="1f07318e5a4df96a96fc92d83bbe5d70" category="inline-link"><block ref="1f07318e5a4df96a96fc92d83bbe5d70" category="inline-link-rx"></block></block>
  <block id="25b3dca46bdabc4612ba4ba5dac0f9db" category="list-text"><block ref="25b3dca46bdabc4612ba4ba5dac0f9db" category="inline-link-rx"></block></block>
  <block id="b658c024dad07cbf1d8523e4c3ba8d21" category="inline-link"><block ref="b658c024dad07cbf1d8523e4c3ba8d21" category="inline-link-rx"></block></block>
  <block id="fdad8301fde8271edff994d643d18865" category="paragraph"><block ref="fdad8301fde8271edff994d643d18865" category="inline-link-rx"></block></block>
  <block id="7749687216549469e9a78db087fbb44b" category="list-text">TensorFlow 基准测试</block>
  <block id="7c8f9b5afa9dfab5f8f375d1b977b046" category="inline-link"><block ref="7c8f9b5afa9dfab5f8f375d1b977b046" category="inline-link-rx"></block></block>
  <block id="be1b7087c9993d320070b1e676c832f9" category="paragraph"><block ref="be1b7087c9993d320070b1e676c832f9" category="inline-link-rx"></block></block>
  <block id="e15fea5c6bb7e2f7d8e055fbb773fc11" category="inline-link"><block ref="e15fea5c6bb7e2f7d8e055fbb773fc11" category="inline-link-rx"></block></block>
  <block id="b1a88588a48ee9492506277f8561b392" category="paragraph"><block ref="b1a88588a48ee9492506277f8561b392" category="inline-link-rx"></block></block>
  <block id="f9732caa47051768fc11729f5535891b" category="list-text">联想 ThinkSystem DM5100F 统一闪存存储阵列</block>
  <block id="a031d2e6ff4219cf38830b0db9d366b1" category="inline-link"><block ref="a031d2e6ff4219cf38830b0db9d366b1" category="inline-link-rx"></block></block>
  <block id="f8287e56c1a5982e49b792d1116aa372" category="paragraph"><block ref="f8287e56c1a5982e49b792d1116aa372" category="inline-link-rx"></block></block>
  <block id="5e79a20254a28ffdb604f6cba5216c75" category="cell">2021年3月</block>
  <block id="dfd02aef9802f4824ead7c08b8f81f1f" category="cell">初始版本。</block>
  <block id="304f30474edd152dc34aef7dbb123607" category="cell">版本 2.0</block>
  <block id="a5f3f63c2f6e1d6d4605650633b9ce8a" category="cell">2021年10月</block>
  <block id="71b3f2dc39aa770e58cd3fad98b76c37" category="cell">更新了 EF 和 MLPerf 推理 v1.1</block>
  <block id="354967c7509f48d7d8a6d2845803bfbc" category="summary">您可以调整用于验证的设置，以适合其他使用情形。</block>
  <block id="c4236be1a211aab0c15476d08b3e7e0c" category="doc">架构规模估算选项</block>
  <block id="ac0ec60d36dfa69ed9c33bff90080b23" category="inline-link-macro">上一步：测试结果。</block>
  <block id="389a3124af7d4b9dc7165b05fd96a378" category="paragraph"><block ref="389a3124af7d4b9dc7165b05fd96a378" category="inline-link-macro-rx"></block></block>
  <block id="9d8c4ebebb4b789e6ec48dda7ac54406" category="section-title">计算服务器</block>
  <block id="1b3bfec82c01730e4379631c5f74db2d" category="paragraph">我们使用的是 Intel Xeon D-2123IT CPU ，这是 SE350 支持的最低 CPU 级别，具有四个物理核心和 60 瓦 TDP 。虽然服务器不支持更换 CPU ，但可以订购功能更强大的 CPU 。支持的最大 CPU 是 Intel Xeon D-2183IT ， 16 核， 100 瓦，运行频率为 2.20 GHz 。这样可以显著提高 CPU 计算能力。虽然 CPU 本身并不是运行推理工作负载的瓶颈，但它有助于处理数据以及执行与推理相关的其他任务。目前， NVIDIA T4 是唯一可用于边缘使用情形的 GPU ；因此，目前无法升级或降级 GPU 。</block>
  <block id="928fe421f0c735b90f3b3ec353741235" category="section-title">共享存储</block>
  <block id="ba49c21e7aa335a8ea452042c02f306a" category="paragraph">在测试和验证中，我们在本文档中使用了 NetApp AFF C190 系统，该系统的最大存储容量为 50.5 TB ，连续读取的吞吐量为 4.4 GBps ，小型随机读取的 IOPS 为 230k ，经证实非常适合边缘推理工作负载。</block>
  <block id="bb33c803e43b816786d862bbbbf2c824" category="paragraph">但是，如果您需要更多存储容量或更快的网络速度，则应使用 NetApp AFF A220 或<block ref="03f94a30ec5c979321fdd9a1ba99a1c6" category="inline-link-rx"></block> 存储系统此外， NetApp EF280 系统的最大容量为 1.5 PB ，带宽为 10 Gbps ，也用于此解决方案验证。如果您希望使用更高带宽获得更多存储容量，<block ref="ab4f2e0c1e56faa457a7a1f93253a647" category="inline-link-rx"></block> 可以使用。</block>
  <block id="fdd5191dcc2e7fa6e2ec4d0618cf2a40" category="paragraph"><block ref="fdd5191dcc2e7fa6e2ec4d0618cf2a40" category="inline-link-macro-rx"></block></block>
  <block id="b481424c052310e67a9b67a931165509" category="summary">本节介绍用于验证此解决方案的测试过程。</block>
  <block id="3562305aa864cd56d3e2840eb5071caa" category="doc">测试操作步骤</block>
  <block id="e46c1f341c1cea1321f4c00d15e90b0d" category="inline-link-macro">先前：测试配置。</block>
  <block id="ed760d2dffd7d011a7870619f7884005" category="paragraph"><block ref="ed760d2dffd7d011a7870619f7884005" category="inline-link-macro-rx"></block></block>
  <block id="bff816e8e8ddbe2a3b705d92abba6627" category="paragraph">在此验证中，我们使用了以下测试操作步骤。</block>
  <block id="1b0981f820949c10d68daad3fdf03976" category="section-title">操作系统和 AI 推理设置</block>
  <block id="c13367945d5d4c91047b3b50234aa7ab" category="inline-link">code</block>
  <block id="fe03e7fb4a8d3a1afb24c94c4c88d32f" category="paragraph">对于 AFF C190 ，我们使用支持 NVIDIA GPU 的 Ubuntu 18.04 和 Docker ，并使用 MLPerf<block ref="72ea1359ddbf7a99cdb0a438fda3e022" category="inline-link-rx"></block> 在联想提交到 MLPerf 推理 v0.7 的过程中提供。</block>
  <block id="504812acf44740b8f536a0d166375734" category="paragraph">对于 EF280 ，我们将 Ubuntu 20.04 与 NVIDIA 驱动程序结合使用，并将 Docker 与 NVIDIA GPU 和 MLPerf 结合使用<block ref="7dc141edfa21f33dbd4b0757be1ad69f" category="inline-link-rx"></block> 在联想提交到 MLPerf 推理 v1.1 的过程中提供。</block>
  <block id="fbd2228a821a8ab1948d4a8c3121fb0e" category="paragraph">要设置 AI 推理，请执行以下步骤：</block>
  <block id="342ecacc441a9548b60eae46065039f8" category="paragraph">在使用本地数据进行测试时，您应在共享存储上共享此目录以供网络存储使用情形使用，或者在本地磁盘上共享此目录。</block>
  <block id="9cfc451dfe052c5c3835b0355375b1b7" category="admonition">以下命令全部从正在运行的 Docker 容器中执行：</block>
  <block id="4efea18a74f8c5a6fa0f4b239ff2d734" category="list-text">要运行推理工作负载，请运行以下命令（一个命令）：</block>
  <block id="9ce2624cb32bec75a2ad4e276fa594f6" category="section-title">AI 推理运行</block>
  <block id="2a71d3fa50a14f6fa9c62d9fe3935d5d" category="paragraph">执行了三种类型的运行：</block>
  <block id="3a4a320ee019614122e99baebf056b86" category="list-text">使用本地存储的单服务器 AI 推理</block>
  <block id="adf25fe660bba733a104887732393fdd" category="list-text">使用网络存储的单服务器 AI 推理</block>
  <block id="34e4c32e4097a70208139be85d5dc892" category="list-text">使用网络存储的多服务器 AI 推理</block>
  <block id="7dc96590f7bab3379a7a79986056d22a" category="inline-link-macro">接下来：测试结果。</block>
  <block id="697d202c2969580ba0434be04d39a929" category="paragraph"><block ref="697d202c2969580ba0434be04d39a929" category="inline-link-macro-rx"></block></block>
  <block id="207e9f2f3c6b5a3e8c9228ceadc806b2" category="summary">本节介绍测试的配置，网络基础架构， SE350 服务器以及存储配置详细信息。</block>
  <block id="32d798df7254f6703ed2262024e0e174" category="doc">测试配置</block>
  <block id="b1ee26c1917a17c30b17d7cd6b01e2cd" category="inline-link-macro">上一步：测试计划。</block>
  <block id="7dffe110836fe412eac19d0f63cf5b5b" category="paragraph"><block ref="7dffe110836fe412eac19d0f63cf5b5b" category="inline-link-macro-rx"></block></block>
  <block id="a55faacbe457d923ebd296421a71b898" category="paragraph">下图显示了测试配置。我们使用了 NetApp AFF C190 存储系统和两个联想 ThinkSystem SE350 服务器（每个服务器都有一个 NVIDIA T4 加速器）。这些组件通过 10GbE 网络交换机进行连接。网络存储包含验证 / 测试数据集和经过预先培训的模型。这些服务器可提供计算功能，并可通过 NFS 协议访问存储。</block>
  <block id="d8c97013f1e301478b23530ad6ed1ef6" category="paragraph">本节介绍测试的配置，网络基础架构， SE350 服务器以及存储配置详细信息。下表列出了解决方案架构的基本组件。</block>
  <block id="fe8ab8cb391be4f8cf88a9b64c3ce3cd" category="list-text">2 个 SE350 服务器，每个服务器具有一个 NVIDIA T4 GPU 卡</block>
  <block id="acd4671bd4d78c7fc0ac8cbc66a01483" category="list-text">每个服务器都包含一个 Intel Xeon D-2123IT CPU ，其中四个物理核心运行速度为 2.20GHz ，并具有 128 GB RAM</block>
  <block id="d7d02fd9ab069a2d95dee248370100f9" category="cell">入门级 NetApp AFF 存储系统（ HA 对）</block>
  <block id="1d680806b37a387e8d84b0c21be4d816" category="list-text">NetApp ONTAP 9 软件</block>
  <block id="0c1dcc458c4dd96728e0b0998cba7305" category="list-text">24 个 960 GB SSD</block>
  <block id="d8e87bd5878266cd4137e82d919799eb" category="list-text">每个控制器一个接口组，挂载点有四个逻辑 IP 地址</block>
  <block id="1a538c197da3186f1eba50d82572dc34" category="paragraph"><block ref="1a538c197da3186f1eba50d82572dc34" category="inline-image-macro-rx" type="image"></block></block>
  <block id="208eac927f1261c6e6eaa3135a529cf3" category="paragraph">下表列出了存储配置：具有 2RU 的 AFF C190 ， 24 个驱动器插槽。</block>
  <block id="9bbf373797bf7cf7ba62c80023682e25" category="cell">控制器</block>
  <block id="2ee34178bb8415b7d7234cd27b83aed6" category="cell">聚合</block>
  <block id="e9db3004828d9514fafc57881dfbdbd2" category="cell">FlexGroup 卷</block>
  <block id="2e0fb97d51b96b1635dcc3ca51f74fee" category="cell">聚合大小</block>
  <block id="b94c9ec583603e13b5c32d83199c7376" category="cell">卷大小</block>
  <block id="53a35f8b51acc9748a3e172a76f542a7" category="cell">操作系统挂载点</block>
  <block id="6a1ab89ed912a96429c83ff1ba0f48d0" category="cell">控制器 1</block>
  <block id="4d80d82716f0b771738e7fad121e059a" category="cell">aggr1.</block>
  <block id="e39298390e27007517a0cb199728188a" category="cell">/netapplenovo_AI_fg</block>
  <block id="4923ec171d721fba1d4547deefc98e8c" category="cell">8.42 TiB</block>
  <block id="f13cb116755b4e8fa1af1b201025f377" category="cell">15 TB</block>
  <block id="3fe74875837b518b23813988af1e39d9" category="cell">/NetApp_Lenovo ， fg</block>
  <block id="3877384a92be771d61972d07648b799f" category="cell">控制器 2.</block>
  <block id="f3913037ef38679d334aa0cf30e2b6fd" category="cell">Aggr2.</block>
  <block id="6b02e3a677be18a8be3641bb43e8b220" category="paragraph">/netappLenovo AI_fg 文件夹包含用于模型验证的数据集。</block>
  <block id="e4239f67d8e47773c69a7cb4be34d949" category="paragraph">下图显示了测试配置。我们使用了 NetApp EF280 存储系统和两个联想 ThinkSystem SE350 服务器（每个服务器都有一个 NVIDIA T4 加速器）。这些组件通过 10GbE 网络交换机进行连接。网络存储包含验证 / 测试数据集和经过预先培训的模型。这些服务器可提供计算功能，并可通过 NFS 协议访问存储。</block>
  <block id="efb90877bc42cc445eb6e1b59c0e1b16" category="paragraph">下表列出了 EF280 的存储配置。</block>
  <block id="0951a6690e5dc87411346792c9f941c7" category="cell">卷组</block>
  <block id="bd7a9717d29c5ddcab1bc175eda1e298" category="cell">Volume</block>
  <block id="6c88d21af6046f64871457b825dcf1c8" category="cell">DDP 大小</block>
  <block id="59b02558285aa326c0e9018324ed0c4f" category="cell">连接方法</block>
  <block id="db320b0194c895c7ac56fedae7928e63" category="cell">DDP1</block>
  <block id="fc452c26db3c4aa6f6213b9c5d9e3abc" category="cell">卷 1</block>
  <block id="fe066d0b9d36398d5f525d6ac7f8e8c5" category="cell">16 TB</block>
  <block id="e0d2b052ec3dbd102ff7a7f2b356ea41" category="cell">SE350-1 到 iSCSI LUN 0</block>
  <block id="ef0e038a9f9b0db74b504d5521e7a0fc" category="cell">第 2 卷</block>
  <block id="5b846730a13fc5ea0a76a6b7b9a69d5a" category="cell">SE350-2 到 iSCSI LUN 1</block>
  <block id="43fa57e4031b0f759153c9c9fa49e6ed" category="paragraph"><block ref="43fa57e4031b0f759153c9c9fa49e6ed" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0fccd40a3886a1e5dc539059407586a0" category="inline-link-macro">下一步：测试操作步骤。</block>
  <block id="3bee5237e36a9a0dc60fd351ce904544" category="paragraph"><block ref="3bee5237e36a9a0dc60fd351ce904544" category="inline-link-macro-rx"></block></block>
  <block id="290612199861c31d1036b185b4e69b75" category="doc">摘要</block>
  <block id="ee0e2e290e4e02a3860382ef2cc42ca0" category="paragraph">高级驾驶辅助系统（ ADAS ），行业 4.0 ，智能城市和物联网（ IoT ）等多种新兴应用场景需要在近乎零的延迟下处理持续数据流。本文档介绍了一种计算和存储架构，用于在边缘环境中为 NetApp 存储控制器和联想 ThinkSystem 服务器部署基于 GPU 的人工智能（ AI ）推理。本文档还提供了行业标准 MLPerf 推理基准测试的性能数据，用于评估配备 NVIDIA T4 GPU 的边缘服务器上的各种推理任务。我们对脱机，单流和多流推理情形的性能进行了调查，并显示具有经济高效的共享网络存储系统的架构具有高性能，为多个边缘服务器的数据和模型管理提供了一个中心。</block>
  <block id="8708911de20cfce9bafb315fd0cde0a2" category="summary">我们会运行大量测试来评估建议的架构的性能。有六种不同的工作负载（图像分类，对象检测（小），对象检测（大），医学影像，语音到文本， 和自然语言处理（ NLP ），您可以在三种不同的情形下运行：脱机，单流和多流。</block>
  <block id="3274a50ba9f0d3c0adefdfa11c5094be" category="doc">测试结果</block>
  <block id="5e2777e1d5ba6adfeabc55064de508f5" category="inline-link-macro">先前版本： Test 操作步骤。</block>
  <block id="3ee9fa6b3e5baa3db7a7d6587d8d590b" category="paragraph"><block ref="3ee9fa6b3e5baa3db7a7d6587d8d590b" category="inline-link-macro-rx"></block></block>
  <block id="507b481f4f0fb36b82f97222c73fb91d" category="section-title">AFF 的测试结果</block>
  <block id="817fbb6103e6cb6855c19a5c1b25f817" category="paragraph">我们会运行大量测试来评估建议的架构的性能。有六种不同的工作负载（图像分类，对象检测（小），对象检测（大），医学影像，语音到文本， 和自然语言处理（ NLP ），您可以在三种不同的情形下运行：脱机，单流和多流。</block>
  <block id="aaabb57453387e4d8fdae92cdf5d558b" category="admonition">最后一种情形仅适用于映像分类和对象检测。</block>
  <block id="e7b8f9d880e5e20f44e5277ba99d101b" category="paragraph">这样可以提供 15 个可能的工作负载，这些工作负载都在三种不同的设置下进行了测试：</block>
  <block id="6beb824a1e58582d2c0c733600244087" category="list-text">单个服务器 / 本地存储</block>
  <block id="0ce03975d1039901bae5d17f67b2ac39" category="list-text">单个服务器 / 网络存储</block>
  <block id="ffac1c611ceb8a0bd6268359872e3e68" category="list-text">多服务器 / 网络存储</block>
  <block id="f5b98cda08f17c4b221c6ef2fbf7217f" category="paragraph">以下各节将介绍这些结果。</block>
  <block id="18d566b8a783b6684a78fc2924714180" category="section-title">AFF 脱机情形中的 AI 推理</block>
  <block id="0aee493b887954641c1ba2e779adcf85" category="paragraph">在这种情况下，服务器可以使用所有数据，并测量了处理所有样本所需的时间。我们会将带宽报告为每秒样本数作为测试结果。如果使用了多个计算服务器，则会报告所有服务器的总带宽总和。下图显示了所有这三种使用情形的结果。对于双服务器情形，我们会报告两个服务器的总带宽。</block>
  <block id="d39bc80b598327ae50c15f64c44bb6ea" category="paragraph"><block ref="d39bc80b598327ae50c15f64c44bb6ea" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a0d89c8c627ec0463d3f82a6cbbc04bd" category="paragraph">结果显示，网络存储不会对性能产生负面影响，更改极少，对于某些任务，未找到任何结果。添加第二台服务器时，总带宽恰好是两倍，或者最差情况下，更改率小于 1% 。</block>
  <block id="d0be2e7e62dc4b0bdbb35ded9b6d842e" category="section-title">在 AFF 的单个流方案中进行 AI 推理</block>
  <block id="fbbf5a4ee90b9175f00f7c8cab5a0670" category="paragraph">此基准测试可测量延迟。对于多个计算服务器案例，我们会报告平均延迟。下图显示了这组任务的结果。对于双服务器案例，我们会报告两个服务器的平均延迟。</block>
  <block id="01f3906715186988e276bc34ebc661c0" category="paragraph"><block ref="01f3906715186988e276bc34ebc661c0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9ef9ced66e0746938556409b4c473052" category="paragraph">结果再次表明，网络存储足以处理这些任务。在一台服务器的情况下，本地存储与网络存储之间的差别很小或没有差别。同样，当两个服务器使用相同的存储时，两个服务器上的延迟保持不变或变化量非常小。</block>
  <block id="64a84459b695510c92164965941ad8f1" category="section-title">在 AFF 的多流方案中进行 AI 推理</block>
  <block id="22ca0fa830d8fd46fe137f6748374c21" category="paragraph">在这种情况下，结果是系统在满足 QoS 限制的情况下可以处理的流数量。因此，结果始终为整数。对于多个服务器，我们会报告所有服务器上的流总数。并非所有工作负载都支持此方案，但我们已执行了这些工作负载。下图总结了我们的测试结果。对于双服务器案例，我们会报告两个服务器的流总数。</block>
  <block id="758b60f43cbc650fded1dcf9be428fa5" category="paragraph"><block ref="758b60f43cbc650fded1dcf9be428fa5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f3eefb9cc4232b7df67a3c63566ae707" category="paragraph">结果显示了设置的完美性能—本地存储和网络存储的结果相同，添加第二个服务器会使建议设置可以处理的流数量增加一倍。</block>
  <block id="4ecb5ff41d7f3bd6f1c92bc183f1cb32" category="section-title">EF 的测试结果</block>
  <block id="ee7c693721c881b091fdb1adf8a37707" category="paragraph">我们会运行大量测试来评估建议的架构的性能。有六种不同的工作负载（图像分类，对象检测（小），对象检测（大），医学影像，语音到文本， 和自然语言处理（ NLP ）），这两种情况下运行：脱机和单流。以下各节将介绍这些结果。</block>
  <block id="010bb9776a194ae73e567f4812c8be99" category="section-title">EF 脱机情形中的 AI 推理</block>
  <block id="f4fc0d2711e472dedfd5d2952191989c" category="paragraph">在这种情况下，服务器可以使用所有数据，并测量了处理所有样本所需的时间。我们会将带宽报告为每秒样本数作为测试结果。对于单节点运行，我们会报告两个服务器的平均值，而对于两个服务器运行，我们会报告所有服务器的总带宽总和。下图显示了使用情形的结果。</block>
  <block id="8e793f971410e2b57df427d1305ee0a2" category="paragraph"><block ref="8e793f971410e2b57df427d1305ee0a2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fb71ae4a7513a21f0771b9aa65aeef9c" category="section-title">在一个流场景中对 EF 进行 AI 推理</block>
  <block id="5656e3a262dfb3d6e1cba96551717de0" category="paragraph"><block ref="5656e3a262dfb3d6e1cba96551717de0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="516a608926718d1a912cf9404f1a63ac" category="inline-link-macro">接下来：架构规模估算选项。</block>
  <block id="9cedf0fb8faddf365d88f523ae482015" category="paragraph"><block ref="9cedf0fb8faddf365d88f523ae482015" category="inline-link-macro-rx"></block></block>
  <block id="00760d3595ff19f6db2da5213b1fdd58" category="summary">本文档介绍了一种计算和存储架构，用于在边缘环境中针对新兴应用程序场景在 NetApp 存储控制器和联想 ThinkSystem 服务器上部署基于 GPU 的人工智能（ AI ）推理。</block>
  <block id="09f4ae28e2596e14a7568f3e12a77834" category="doc">TR-4886 ：《前沿人工智能推理—采用联想 ThinkSystem 的 NetApp —解决方案设计》</block>
  <block id="6671938f046112e34e990cb75cc642dd" category="paragraph">NetApp 公司 Sathish Thyagarajan ，联想公司 Mirosav Hodak</block>
  <block id="a27de0758c1fc778a0fb19ebcb6a8aff" category="paragraph">企业越来越多地在网络边缘生成海量数据。为了从智能传感器和物联网数据中获得最大价值，企业正在寻找支持边缘计算的实时事件流式解决方案。因此，在数据中心以外的边缘执行计算要求苛刻的作业的情况越来越多。AI 推理是这一趋势的推动因素之一。边缘服务器可以为这些工作负载提供足够的计算能力，尤其是在使用加速器时，但有限的存储通常是问题描述，尤其是在多服务器环境中。在本文档中，我们将介绍如何在边缘环境中部署共享存储系统，以及该系统如何在不影响性能的情况下为 AI 推理工作负载带来优势。</block>
  <block id="c22ef83c0446b759f6cd8835206adaae" category="paragraph">本文档介绍了边缘 AI 推理的参考架构。它将多个联想 ThinkSystem 边缘服务器与一个 NetApp 存储系统相结合，创建了一个易于部署和管理的解决方案。本指南旨在为各种情形下的实际部署提供一个基线指南，例如，在工厂车间安装多个摄像头和工业传感器，零售交易中的销售点（ POS ）系统或用于识别自动驾驶车辆中的视觉异常的完全自驾（ FSD ）系统。</block>
  <block id="36d77288dbd3663ec436c43b32682300" category="paragraph">本文档介绍了对由联想 ThinkSystem SE350 边缘服务器和入门级 NetApp AFF 和 EF 系列存储系统组成的计算和存储配置的测试和验证。这些参考架构可为 AI 部署提供高效且经济高效的解决方案，同时还可通过 NetApp ONTAP 和 NetApp SANtricity 数据管理软件提供全面的数据服务，集成数据保护，无缝可扩展性以及云连接数据存储。</block>
  <block id="5dd536dd8122d7ba5df3ce642e603305" category="paragraph">本文档面向以下受众：</block>
  <block id="ebb25f3a3991f2ad744d7ec643c950fe" category="list-text">希望在边缘将 AI 产品化的业务主管和企业架构师。</block>
  <block id="c19c4b63370004c67b540d52ae4d0ba3" category="list-text">数据科学家，数据工程师，人工智能 / 机器学习（ AI / 机器学习， ML ）研究人员和人工智能系统开发人员。</block>
  <block id="d64b2d5963d22d2d9c15222cbbe4a41c" category="list-text">设计用于开发 AI/ML 模型和应用程序的解决方案的企业架构师。</block>
  <block id="563f47ae807a7a985313a5186e239a5d" category="list-text">数据科学家和 AI 工程师正在寻找部署深度学习（ DL ）和 ML 模型的高效方法。</block>
  <block id="c1df171c3c219ea01c2724d28fa03f93" category="list-text">边缘设备管理器和边缘服务器管理员，负责部署和管理边缘推理模型。</block>
  <block id="a40893fa754ed62d5268702b023fea91" category="section-title">解决方案架构</block>
  <block id="f2e5640bc98f623bd0a257e3088ead2c" category="list-text">边缘计算设备对从摄像机，传感器等接收的数据执行推理。</block>
  <block id="ba8dee772ce5a627767af000b8bbb826" category="list-text">一种可用于多种用途的共享存储元素：</block>
  <block id="8a1d15a179258733a83884fac2d16e38" category="list-text">为推理模型和执行推理所需的其他数据提供一个中央位置。计算服务器可以直接访问存储，并在网络中使用推理模型，而无需将其复制到本地。</block>
  <block id="6c20432374a9a40cfb818250edf55367" category="list-text">此处推送更新的型号。</block>
  <block id="4a32229da6d6fceda48d909ad92a952a" category="list-text">对边缘服务器接收的输入数据进行归档，以供日后分析。例如，如果边缘设备连接到摄像机，则存储元素会保留摄像机捕获的视频。</block>
  <block id="45d9a14c8d568ce70d22acbde8373657" category="paragraph"><block ref="45d9a14c8d568ce70d22acbde8373657" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bda9643ac6601722a28f238714274da4" category="cell">红色</block>
  <block id="48d6215903dff56238e52e8891380c8f" category="cell">蓝色</block>
  <block id="95e6ac9e87f07caf580a7b83adb1526b" category="cell">联想计算系统</block>
  <block id="81a15d59c420e43b55830213cc8c16b9" category="cell">NetApp AFF 存储系统</block>
  <block id="f46e4977aa2e9918471e011cafc5cbe1" category="cell">边缘设备对来自摄像机，传感器等的输入执行推理。</block>
  <block id="edb1af4b83edf30ec5e56e3f4a6352f3" category="cell">共享存储，用于存放边缘设备的推理模型和数据，以供日后分析。</block>
  <block id="6fa1f5494d341a20c6c746a33cbb31b3" category="paragraph">NetApp 和联想解决方案具有以下主要优势：</block>
  <block id="f1bd3fc2711f634964362fb2a96445bf" category="list-text">GPU 加快了边缘计算速度。</block>
  <block id="a644cc245485a603217667e7cbdb7ef9" category="list-text">部署从共享存储提供支持和管理的多个边缘服务器。</block>
  <block id="d649f2b00c65fe4953b1a7e7469c9431" category="list-text">强大的数据保护功能，可满足低恢复点目标（ RPO ）和恢复时间目标（ RTO ）的要求，而不会丢失任何数据。</block>
  <block id="2d0fcf5abf2f152f10ecfbf80a62e9db" category="list-text">利用 NetApp Snapshot 副本和克隆优化数据管理，以简化开发工作流。</block>
  <block id="94d9a1cd726b8a3fed2b6beb07904959" category="section-title">如何使用此架构</block>
  <block id="9a22eb3c4ef782aa04a39e5ad3ffc8b5" category="paragraph">本文档将验证建议架构的设计和性能。但是，我们尚未测试某些软件级别的组件，例如容器，工作负载或模型管理以及与内部云或数据中心的数据同步，因为它们是特定于部署情形的。此处有多种选择。</block>
  <block id="1a667cf8dc2ace931f29baf9aeed69d9" category="section-title">解决方案区域</block>
  <block id="560d585bccd63f1ccf34b07b325adbcd" category="paragraph">AI 推理和边缘计算的主要优势是设备能够在无延迟的情况下以高质量计算，处理和分析数据。本文档中需要介绍的边缘计算用例太多，但下面是几个突出的示例：</block>
  <block id="8106f228c3a2b774c2e47d0d2ca766eb" category="section-title">汽车：自动驾驶汽车</block>
  <block id="49f3cb6fe79fc77d0b151dcc2f7d7109" category="paragraph">典型的边缘计算图示位于自动驾驶汽车（ AV ）中的高级驾驶辅助系统（ ADAS ）中。无人驾驶汽车中的 AI 必须快速处理来自摄像机和传感器的大量数据，才能成为成功的安全驱动器。在对象和人类之间进行解释所花费的时间过长可能意味着生命或死亡，因此能够尽可能接近车辆处理数据至关重要。在这种情况下，一个或多个边缘计算服务器处理来自摄像机，雷达， LIDAR 和其他传感器的输入，而共享存储则保存推理模型并存储来自传感器的输入数据。</block>
  <block id="e5e51dcd521792cb797e6e3c53736987" category="section-title">医疗保健：患者监控</block>
  <block id="a5031cd8ea18cb91370c532194ecd58e" category="paragraph">AI 和边缘计算的最大影响之一是，它能够在家庭护理和集中护理部门（ ICU ）中增强对慢性病患者的持续监控。监控 Insulin 级别，呼吸，神经活动，心率和消化系统功能的边缘设备中的数据需要即时分析数据，必须立即对这些数据执行操作，因为拯救生命的行动时间有限。</block>
  <block id="7e4b8a4224f71143d7bd188ceeea4acd" category="section-title">零售：无收银员付款</block>
  <block id="a8712e81fee7af830aa2cd6466cfb339" category="paragraph">边缘计算可以为 AI 和 ML 提供支持，帮助零售商缩短结账时间并增加流量。无收银员系统支持各种组件，例如：</block>
  <block id="dbc0817910529140e6894b79ec51b412" category="list-text">身份验证和访问。将物理购物者连接到经过验证的帐户并允许访问零售空间。</block>
  <block id="349a2650c71706ec201ef08d57dc58e7" category="list-text">清单监控。使用传感器， RFID 标签和计算机视觉系统帮助确认买家选择或取消选择商品。</block>
  <block id="86f5df5b4d7496a74d1d41bed2929983" category="paragraph">此处，每个边缘服务器都会处理每个签出计数器，而共享存储系统则充当一个中央同步点。</block>
  <block id="498375fc1d2fd41616385f8abfd37893" category="section-title">金融服务：信息亭的人员安全和防止欺诈</block>
  <block id="1dd0f8c70693faa846f69d76af9ffbf7" category="paragraph">银行组织正在使用 AI 和边缘计算来创新和打造个性化的银行体验。利用实时数据分析和人工智能推理的交互式信息亭现在不仅可以帮助客户提取资金，还可以通过从摄像机捕获的图像主动监控信息亭，以识别对人类安全或欺诈行为的风险。在这种情况下，边缘计算服务器和共享存储系统连接到交互式信息亭和摄像机，以帮助银行使用 AI 推理模型收集和处理数据。</block>
  <block id="0014200d8a9f4fe7a8b65ae923557be6" category="section-title">制造业：行业 4.0</block>
  <block id="18bfb27ab22a9db6eb932a3bfe5f51a4" category="paragraph">第四次工业革命（工业 4.0 ）已经开始，同时也出现了 Smart Factory 和 3D 打印等新兴趋势。为迎接数据主导的未来，大规模机器到机器（ M2M ）通信和物联网已集成在一起，可提高自动化程度，无需人工干预。制造业已经高度自动化，增加 AI 功能是长期趋势的自然延续。AI 可实现自动化操作，借助计算机视觉和其他 AI 功能，可以实现自动化操作。您可以自动执行质量控制或依赖于人类远见或决策的任务，以便更快地分析工厂车间内装配线上的材料，从而帮助制造工厂满足所需的 ISO 安全和质量管理标准。此处，每个计算边缘服务器都连接到一组传感器，用于监控制造过程，更新的推理模型会根据需要推送到共享存储。</block>
  <block id="a2df8c6c694bb6d9b42851d95a6d7814" category="section-title">电信：防锈检测，塔式检查和网络优化</block>
  <block id="d562d0e475687af21d44b6ea803c10a8" category="paragraph">电信行业使用计算机视觉和人工智能技术来处理图像，这些图像可自动检测到是否存在防腐问题，并识别含有防腐问题的单元塔，因此需要进一步检查。近年来，使用无人机图像和 AI 模型来识别塔中不同的区域，以分析防腐，表面裂纹和防腐的情况有所增加。对 AI 技术的需求继续增长，这些技术可以高效地检查电信基础架构和单元塔，定期评估其降级情况，并在需要时及时修复。</block>
  <block id="50dba7db75064ae2e0beea487226ed46" category="paragraph">此外，电信领域另一个新兴的使用情形是，使用 AI 和 ML 算法预测数据流量模式，检测支持 5G 的设备，以及自动化和增强多输入和多输出（ MIMG ）能源管理。在无线电塔上使用了 MIMO 硬件来增加网络容量，但这会带来额外的能源成本。在单元站点上部署的 ML 型号的 "MIMO 休眠模式 " 可以预测是否高效使用了无线电，并有助于降低移动网络运营商（ MNO ）的能耗成本。AI 推理和边缘计算解决方案可帮助 MNO 减少来回传输到数据中心的数据量，降低 TCO ，优化网络运营并提高最终用户的整体性能。</block>
  <block id="f45c430b02aac052aef8d958c80ff351" category="paragraph"><block ref="f45c430b02aac052aef8d958c80ff351" category="inline-link-macro-rx"></block></block>
  <block id="228af426af79aabaa0b969d8cee05002" category="summary">本文档遵循 MLPerf 推理 v0.7 代码， MLPerf 推理 v1.1 代码和规则。我们运行的基准测试是为在边缘进行推理而设计的，如本节所示的表中所定义。</block>
  <block id="b3e6ac4f3c523ea5a90f4f79ca3e585d" category="doc">测试计划</block>
  <block id="35e08a3e7b357a4284ef29b287063ae5" category="paragraph"><block ref="35e08a3e7b357a4284ef29b287063ae5" category="inline-link-macro-rx"></block></block>
  <block id="a4f86f7bfc24194b276c22e0ef158197" category="inline-link">rules</block>
  <block id="deec4ff19974f12ed781cb9a59064214" category="cell">区域</block>
  <block id="eaeb30f9f18e0c50b178676f3eaef45f" category="cell">任务</block>
  <block id="e110cde47b67924ec0ef64500e8cb067" category="cell">QSL 大小</block>
  <block id="571094bb27864b600d8e6b561a137a55" category="cell">质量</block>
  <block id="77f086368f7402e03b21bb823cda2eb3" category="cell">多流延迟限制</block>
  <block id="99a0628d9f7179c032e0cf59efbc0fad" category="cell">愿景</block>
  <block id="c84e3388f5bc3e4ce028dc81625bf819" category="cell">映像分类</block>
  <block id="4cf67db3abdf54de6064fce40cf27398" category="cell">Resnet50v1.5</block>
  <block id="05e96e35d2778a07f18ff8b414821ee8" category="cell">ImageNet （ 224x224 ）</block>
  <block id="021bbc7ee20b71134d53e20206bd6feb" category="cell">1024</block>
  <block id="79267804a18aa7217c234994e26bb5c7" category="cell">FP32 的 99%</block>
  <block id="c2010c9d1312ce345a2313d3acb5c6d5" category="cell">50 毫秒</block>
  <block id="5d9387d7bf46f8c6854a5caafd6cfbf3" category="cell">对象检测（大型）</block>
  <block id="7dd82182395c2720676a1e82b781ef04" category="cell">SSD - ResNet34</block>
  <block id="0505dc2363120e454308e12e47f6d354" category="cell">可可可（ 1200 x 1200 ）</block>
  <block id="f336aeb0ea3de7c70100c292338460e3" category="cell">66 毫秒</block>
  <block id="a3e1c35debe58b3684abba30911eb0f9" category="cell">对象检测（小型）</block>
  <block id="d05a0b1a6c857a559314f24c10825416" category="cell">SSD — MobileNetsv1</block>
  <block id="f471fd17e298022a58bcbd05aa25a819" category="cell">可可可（ 300 x 300 ）</block>
  <block id="f718499c1c8cef6730f9fd03c8125cab" category="cell">256</block>
  <block id="ed076605284997250d9cc771eedbfc61" category="cell">医学影像分段</block>
  <block id="b8ffefa5ddac895023e8ab6fe1b55b45" category="cell">3D UNET</block>
  <block id="5ea5e4840c21271f42762e8b9271527a" category="cell">Brats 2019 （ 224x224x160 ）</block>
  <block id="8322d3768dee2653e9cc15c955ee60a8" category="cell">FP32 的 99% 和 99.9%</block>
  <block id="274b68192b056e268f128ff63bfcd4a4" category="cell">不适用</block>
  <block id="04a83927cfa1af6ae14f94e90aab9ebb" category="cell">语音</block>
  <block id="ade9e8d743e7e78d87c5c5603b0aa4ae" category="cell">语音到文本</block>
  <block id="69ee0ff6f427bb2dfd286a55bbc181ea" category="cell">RNNT</block>
  <block id="d3c7d61f6e8ea0b76fd8b65e5115b28b" category="cell">Libraispeech 开发清理</block>
  <block id="84b20b1f5a0d103f5710bb67a043cd78" category="cell">2513</block>
  <block id="4994a8ffeba4ac3140beb89e8d41f174" category="cell">language</block>
  <block id="f8672b43ad1f9d3531557d69b6da380c" category="cell">语言处理</block>
  <block id="221c3eff38f8ab54d359694f9da63c6e" category="cell">Bert</block>
  <block id="f50c0cca078c7426bed1eb196911c809" category="cell">Sad v1.1</block>
  <block id="d56da061d55e2175bd67901d5f0948be" category="cell">10833</block>
  <block id="85051346c766b4444af7bfaaa0c189f5" category="cell">场景</block>
  <block id="4bb9c2b62dbc9558da74af948130693b" category="cell">映像分类</block>
  <block id="d5348bf8d0ff8e72043bdbb08aef9767" category="cell">单流，脱机，多流</block>
  <block id="468acb809a41b49bb7fcdf7425dcd7ee" category="cell">单个流，脱机</block>
  <block id="3d1aa46be43bf2f29633e829d42082af" category="cell">语音到文本</block>
  <block id="7966e67de4ba20fb5412257b4023f4d1" category="paragraph">我们使用在此验证中开发的网络存储架构执行了这些基准测试，并将结果与先前提交给 MLPerf 的边缘服务器上本地运行的结果进行了比较。比较结果是，确定共享存储对推理性能有多大影响。</block>
  <block id="a53c037982ff4e0cd4a61ba90c4c21d3" category="inline-link-macro">下一步：测试配置。</block>
  <block id="50cbf9a915ce97c432035077add8a92f" category="paragraph"><block ref="50cbf9a915ce97c432035077add8a92f" category="inline-link-macro-rx"></block></block>
  <block id="012b603d852affe4779f095a5c59f0c5" category="summary">公有云的灵活性，实现价值的时间和成本节省都是企业采用公有云进行数据库应用程序开发和测试的有意义的价值主张。SnapCenter 是快速实现这一目标的最佳工具。SnapCenter 不仅可以在内部保护您的生产数据库，还可以在公有云中快速克隆副本以进行应用程序开发或代码测试，同时只需极少的额外存储。下面详细介绍了使用该工具的分步过程。</block>
  <block id="38da6679588aeb2754e14dd58994685e" category="doc">用于将开发 / 测试容量激增到云的工作流</block>
  <block id="5b9681a3caf5db6230c17718122074d3" category="inline-link-macro">先前版本： AWS 公有云入门。</block>
  <block id="e9e59a2a982f81f5f964248f351b2446" category="paragraph"><block ref="e9e59a2a982f81f5f964248f351b2446" category="inline-link-macro-rx"></block></block>
  <block id="4d8a5b6bc9c43ab79e376d1aa4d83217" category="paragraph">对于采用公有云进行数据库应用程序开发和测试的企业而言，公有云的灵活性，价值实现时间和成本节省都是有意义的价值主张。SnapCenter 是实现这一目标的最佳工具。SnapCenter 不仅可以在内部保护生产数据库，而且还可以在公有云中快速克隆副本以进行应用程序开发或代码测试，同时只需极少的额外存储。下面详细介绍了使用此工具的分步过程。</block>
  <block id="b47b42841be2e173707ab5884714970b" category="section-title">从复制的 Snapshot 备份克隆 Oracle 数据库以进行开发 / 测试</block>
  <block id="8d90529d1117b8d3781bd6781acf4e91" category="list-text">使用适用于 Oracle 的数据库管理用户 ID 登录到 SnapCenter 。导航到资源选项卡，其中显示了受 SnapCenter 保护的 Oracle 数据库。</block>
  <block id="a95ff2a2ae2905b0bb3bd0efa211a040" category="paragraph"><block ref="a95ff2a2ae2905b0bb3bd0efa211a040" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8d539d2e9659870aa79747206fac4769" category="list-text">单击备份拓扑和详细视图的预期内部数据库名称。如果启用了二级复制位置，则会显示链接镜像备份。</block>
  <block id="20111f4a74a9c065157aa13379000a73" category="paragraph"><block ref="20111f4a74a9c065157aa13379000a73" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d4a9c1f33e524696d6f3adebf89947bb" category="list-text">通过单击镜像备份切换到镜像备份视图。然后显示二级镜像备份。</block>
  <block id="e1cbaea95bcc154ccf9e8aece7fc73b3" category="paragraph"><block ref="e1cbaea95bcc154ccf9e8aece7fc73b3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4726a244c3941457e8f62b49c83d35d1" category="list-text">选择要克隆的镜像二级数据库备份副本，并按时间和系统更改编号或 SCN 确定恢复点。通常，恢复点应是完整数据库备份时间的末尾，或者要克隆的 SCN 。确定恢复点后，必须挂载所需的日志文件备份以进行恢复。日志文件备份应挂载到要托管克隆数据库的目标数据库服务器。</block>
  <block id="81d132cd1ae26e007bb608e5f8609288" category="paragraph"><block ref="81d132cd1ae26e007bb608e5f8609288" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b2dc441031605bf54d78fde13b3efc3c" category="paragraph"><block ref="b2dc441031605bf54d78fde13b3efc3c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="22a17e5abcfc4b5e70ebdea098cd1891" category="admonition">如果启用了日志修剪，并且恢复点扩展到上次日志修剪之后，则可能需要挂载多个归档日志备份。</block>
  <block id="e9606676533bbe916f4b4b6824eac195" category="list-text">突出显示要克隆的完整数据库备份副本，然后单击克隆按钮以启动数据库克隆工作流。</block>
  <block id="48493c19ee97a291cd320501daf5c721" category="paragraph"><block ref="48493c19ee97a291cd320501daf5c721" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6c06d82b497809fcc0fd06d00c6d91a5" category="list-text">为完整的容器数据库或 CDB 克隆选择正确的克隆数据库 SID 。</block>
  <block id="f6ee6a459784097119ec1eee6224152e" category="paragraph"><block ref="f6ee6a459784097119ec1eee6224152e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e2c50a030b1c5313fca09568edf8c0f9" category="list-text">选择云中的目标克隆主机，数据文件，控制文件和重做日志目录将通过克隆工作流创建。</block>
  <block id="323554a005f5e77dfaa765ea81e645be" category="paragraph"><block ref="323554a005f5e77dfaa765ea81e645be" category="inline-image-macro-rx" type="image"></block></block>
  <block id="701f017aeafb71656cf2bc3a9bd34862" category="list-text">无凭据名称用于基于操作系统的身份验证，这会使数据库端口变得不相关。按照目标克隆数据库服务器中的配置填写正确的 Oracle 主目录， Oracle 操作系统用户和 Oracle 操作系统组。</block>
  <block id="c5237b674d4a9cd38d44c5e546cc51d4" category="paragraph"><block ref="c5237b674d4a9cd38d44c5e546cc51d4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="26a911f3c85fc3c73d79253e65bf30e3" category="list-text">指定克隆操作前要运行的脚本。更重要的是，可以在此处调整或定义数据库实例参数。</block>
  <block id="56774e452bc62021e52de3e3fea844a2" category="paragraph"><block ref="56774e452bc62021e52de3e3fea844a2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="09d7240367714707474d63a3a574222b" category="list-text">按日期和时间或 SCN 指定恢复点。直到 " 取消 " 将数据库恢复到可用的归档日志为止。从挂载归档日志卷的目标主机指定外部归档日志位置。如果目标服务器 Oracle 所有者与内部生产服务器不同，请验证目标服务器 Oracle 所有者是否可以读取归档日志目录。</block>
  <block id="6cb86841376102e5b8924f9909b8f570" category="paragraph"><block ref="6cb86841376102e5b8924f9909b8f570" category="inline-image-macro-rx" type="image"></block></block>
  <block id="70b171a9c984de6358afb3557fe84586" category="paragraph"><block ref="70b171a9c984de6358afb3557fe84586" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a752afaf144d06159ca3eec8bb23455f" category="list-text">如果需要，配置 SMTP 服务器以发送电子邮件通知。</block>
  <block id="b30b70196320d22207ea0d5d95d2c841" category="paragraph"><block ref="b30b70196320d22207ea0d5d95d2c841" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0421be6f676ac1ddace9e39eeeb54f0f" category="list-text">克隆摘要。</block>
  <block id="a930a442bf914f516109fbb28bf2fbd1" category="paragraph"><block ref="a930a442bf914f516109fbb28bf2fbd1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="69d929881b22cd699e243e2343bd707d" category="list-text">您应在克隆后进行验证，以确保克隆的数据库正常运行。可以在开发 / 测试数据库上执行一些附加任务，例如启动侦听器或关闭数据库日志归档模式。</block>
  <block id="9991775de6f914e5a41601ba523e3193" category="paragraph"><block ref="9991775de6f914e5a41601ba523e3193" category="inline-image-macro-rx" type="image"></block></block>
  <block id="58732c8d9b1293bb6666ef2284840fd3" category="section-title">克隆 SQL 数据库，以便从复制的 Snapshot 备份进行开发 / 测试</block>
  <block id="605f2bb9d099f78e26260848db117df7" category="list-text">使用 SQL Server 的数据库管理用户 ID 登录到 SnapCenter 。导航到 " 资源 " 选项卡，其中显示了受 SnapCenter 保护的 SQL Sever 用户数据库以及公有云中的目标备用 SQL 实例。</block>
  <block id="d238acd8e02d4df70c9b55828a4b8801" category="paragraph"><block ref="d238acd8e02d4df70c9b55828a4b8801" category="inline-image-macro-rx" type="image"></block></block>
  <block id="39c34a717e197c67b1fc8d678db5815b" category="list-text">单击备份拓扑和详细视图的预期内部 SQL Server 用户数据库名称。如果启用了二级复制位置，则会显示链接镜像备份。</block>
  <block id="8c57a9d29ca9640330e03e6edca2b6e5" category="paragraph"><block ref="8c57a9d29ca9640330e03e6edca2b6e5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a5910fa5df5b6482c00b15ae683eef0f" category="list-text">通过单击镜像备份切换到镜像备份视图。然后显示二级镜像备份。由于 SnapCenter 会将 SQL Server 事务日志备份到专用驱动器进行恢复，因此此处仅显示完整的数据库备份。</block>
  <block id="f8d3ed6786c765a87cec8464a574076a" category="paragraph"><block ref="f8d3ed6786c765a87cec8464a574076a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="368014bae8201ab49d2207a53c907069" category="list-text">选择备份副本，然后单击克隆按钮以启动从备份克隆工作流。</block>
  <block id="87dbbaf733c71b9d4e0027ad4a85e709" category="paragraph"><block ref="87dbbaf733c71b9d4e0027ad4a85e709" category="inline-image-macro-rx" type="image"></block></block>
  <block id="75c22c861d423e3f3450da18d56f0599" category="paragraph"><block ref="75c22c861d423e3f3450da18d56f0599" category="inline-image-macro-rx" type="image"></block></block>
  <block id="44258030a87117191bde6d62511ddb9a" category="list-text">选择一个云服务器作为目标克隆服务器，克隆实例名称和克隆数据库名称。选择自动分配挂载点或用户定义的挂载点路径。</block>
  <block id="7841eed97c9a860bcb6a46b08ea08c11" category="paragraph"><block ref="7841eed97c9a860bcb6a46b08ea08c11" category="inline-image-macro-rx" type="image"></block></block>
  <block id="18145dc97ae06034ae9aafa8b98cb36e" category="list-text">按日志备份时间或特定日期和时间确定恢复点。</block>
  <block id="b2798123b4d42e447362355b510a424c" category="paragraph"><block ref="b2798123b4d42e447362355b510a424c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0b9becceddf802cada91d9e2aa84ac5a" category="list-text">指定在克隆操作前后运行的可选脚本。</block>
  <block id="adee0219db450497bd0f545df8d862c7" category="paragraph"><block ref="adee0219db450497bd0f545df8d862c7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e41b01ffd717fd3d0b5788e608e50b52" category="list-text">如果需要电子邮件通知，请配置 SMTP 服务器。</block>
  <block id="9b758c550d5da3ecb44f04ae804293d4" category="paragraph"><block ref="9b758c550d5da3ecb44f04ae804293d4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fc89ae2ec0203249b8e60785a63ca258" category="list-text">克隆摘要。</block>
  <block id="ab74d2d908acf5c3e01544cd4b871b73" category="paragraph"><block ref="ab74d2d908acf5c3e01544cd4b871b73" category="inline-image-macro-rx" type="image"></block></block>
  <block id="28725828580a55d904e8b2a39f377eb9" category="list-text">监控作业状态并验证目标用户数据库是否已连接到云克隆服务器中的目标 SQL 实例。</block>
  <block id="766259946fc034002a24d5f23655c73e" category="paragraph"><block ref="766259946fc034002a24d5f23655c73e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d512bf68b17268adfe539f9722d869b4" category="section-title">克隆后配置</block>
  <block id="50d9180ea26c89fbe6506d71d81d3fb1" category="list-text">内部 Oracle 生产数据库通常以日志归档模式运行。开发或测试数据库不需要此模式。要关闭日志归档模式，请以 sysdba 身份登录到 Oracle 数据库，执行 log mode change 命令并启动数据库以进行访问。</block>
  <block id="b205237d51ff9525496f4b2252942213" category="list-text">配置 Oracle 侦听器，或者向现有侦听器注册新克隆的数据库以供用户访问。</block>
  <block id="800699a04cdaa75b2219988799b0a048" category="list-text">对于 SQL Server ，将日志模式从 Full 更改为 Easy ，以便 SQL Server 开发 / 测试日志文件在填满日志卷时可以随时缩减。</block>
  <block id="89e018d207fd292a4926870904035c18" category="section-title">刷新克隆数据库</block>
  <block id="d84550ba9a340ebf4fa6698dff5ba344" category="list-text">丢弃克隆的数据库并清理云数据库服务器环境。然后，按照上述过程使用新数据克隆新数据库。克隆新数据库只需几分钟。</block>
  <block id="1170d6f09309cb8dc382034a34680937" category="inline-link-macro">刷新克隆</block>
  <block id="fef062eeb7771b01e620bb2460b1bf9a" category="list-text">关闭克隆数据库，使用命令行界面运行克隆刷新命令。有关详细信息，请参见以下 SnapCenter 文档： <block ref="1e4035dee07650c706f8f0714c384872" category="inline-link-macro-rx"></block>。</block>
  <block id="2d6962c20ba37b34437afc30e6838e0d" category="inline-link-macro">NetApp 解决方案自动化社区支持 Slack 通道</block>
  <block id="7b88d7d11804db6b079e226a6f043ea7" category="paragraph">如果您需要有关此解决方案和用例的帮助，请加入 <block ref="f9456f3b54a140d5d3858823c684363f" category="inline-link-macro-rx"></block> 并寻找解决方案自动化渠道来发布您的问题或询问。</block>
  <block id="e2a76301a4117f21d6192304aa650018" category="inline-link-macro">接下来：灾难恢复工作流。</block>
  <block id="28a87ee64d4675e6c24cd960fe71d9bf" category="paragraph"><block ref="28a87ee64d4675e6c24cd960fe71d9bf" category="inline-link-macro-rx"></block></block>
  <block id="d83342bb55cac062a4841a3b7a62a7fd" category="summary">本节概述了为满足上一节所述的前提条件要求而必须完成的任务。下一节提供了内部部署和公有云操作的高级任务列表。可以通过单击相关链接访问详细的流程和过程。</block>
  <block id="21475c5fe4cf73cfbf7756ed71e43375" category="doc">入门概述</block>
  <block id="fa952e93a2f3bc19270cbedd1510f523" category="inline-link-macro">先前版本：公有云的前提条件。</block>
  <block id="f50eb88fd106752cf99e25d4a7259bb7" category="paragraph"><block ref="f50eb88fd106752cf99e25d4a7259bb7" category="inline-link-macro-rx"></block></block>
  <block id="b2e7ae8381268c9d97dc3576aa67da04" category="list-text">在 SnapCenter 中设置数据库管理员用户</block>
  <block id="e1c4efcd7b5b155c8a6e57d348b6c071" category="list-text">SnapCenter 插件安装前提条件</block>
  <block id="cf69df8da81eda7b468d606f3e9aff06" category="list-text">SnapCenter 主机插件安装</block>
  <block id="2a6faa57bc6cc0f7a4c90cebd5e63344" category="list-text">数据库资源发现</block>
  <block id="2a36af746a3cc41f6964edac717b5206" category="list-text">设置存储集群对等和数据库卷复制</block>
  <block id="a227a5da83d0a04e6e8e7e76a89eba09" category="list-text">将 CVO 数据库存储 SVM 添加到 SnapCenter</block>
  <block id="c615eed91e2ab578525394d0ff0138d9" category="list-text">在 SnapCenter 中设置数据库备份策略</block>
  <block id="8ecb914dad4186dafb38268be6fc8a1f" category="list-text">实施备份策略以保护数据库</block>
  <block id="3041fe5faf49efefd030e278790b4faf" category="list-text">验证备份</block>
  <block id="8a3f037eef48de78bfe13d14e3d7cdfa" category="section-title">AWS 公有云</block>
  <block id="0bcf61b20ebca1ef90cb7982284867a6" category="list-text">飞行前检查</block>
  <block id="c27b238e54d27696cafed4684c6f1335" category="list-text">在 AWS 中部署 Cloud Manager 和 Cloud Volumes ONTAP 的步骤</block>
  <block id="2bb50575568fc6429e2c1cef751d40f4" category="list-text">为数据库工作负载部署 EC2 计算实例</block>
  <block id="bc2dcb446bec0ecd131a2e612dbd1ecd" category="paragraph">有关详细信息，请单击以下链接：</block>
  <block id="7146594a919f2b006b1b0911c7b6d7da" category="inline-link-macro">内部部署</block>
  <block id="21aa279d0a145dcaab5feaa02df2c02a" category="inline-link-macro">公有云— AWS</block>
  <block id="fd0476c0c92270df2d75402a67cfe0f4" category="paragraph"><block ref="8f0e2d08c6bad9ef491c2061921b9d90" category="inline-link-macro-rx"></block>， <block ref="11145243f1982fd305768240bff5daad" category="inline-link-macro-rx"></block></block>
  <block id="ff9d8653752bd48bb6b73cf97f207af1" category="summary">采用 SnapCenter 灾难恢复工作流的混合云数据库解决方案</block>
  <block id="ac2e8778240cb518ee14b1defbf55765" category="doc">灾难恢复工作流</block>
  <block id="461887ca64f2d60da58c130a00656a96" category="inline-link-macro">上一页：开发 / 测试向云突发的工作流。</block>
  <block id="b8499237e1a42a05b5306219f80b35ba" category="paragraph"><block ref="b8499237e1a42a05b5306219f80b35ba" category="inline-link-macro-rx"></block></block>
  <block id="8e84608bd62584b2f262d60fd734714f" category="paragraph">企业已将公有云作为灾难恢复的可行资源和目标。SnapCenter 可以尽可能无缝地执行此过程。此灾难恢复工作流与克隆工作流非常相似，但数据库恢复会通过复制到云的最后一个可用日志运行，以恢复所有可能的业务事务。但是，对于灾难恢复，还需要执行其他预配置和后配置步骤。</block>
  <block id="e230d95c57c5534b3e90b93fddbcb1c9" category="section-title">将内部 Oracle 生产数据库克隆到云中进行灾难恢复</block>
  <block id="db9517755259859dbae095126c803544" category="list-text">为了验证克隆恢复是否通过最后一个可用日志运行，我们创建了一个小测试表并插入了一行。测试数据将在完全恢复到最后一个可用日志后进行恢复。</block>
  <block id="39f00f2f1a95739a075844dcffac1441" category="paragraph"><block ref="39f00f2f1a95739a075844dcffac1441" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4fd1337293be82f7472d90bc35f51e90" category="list-text">以 Oracle 的数据库管理用户 ID 登录到 SnapCenter 。导航到资源选项卡，其中显示了受 SnapCenter 保护的 Oracle 数据库。</block>
  <block id="1ddb1f7854ac534473544de627fc5289" category="paragraph"><block ref="1ddb1f7854ac534473544de627fc5289" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e795ef17ab8e08159909afe558c32a1c" category="list-text">选择 Oracle 日志资源组，然后单击立即备份以手动运行 Oracle 日志备份，以便将最新事务刷新到云中的目标。在实际灾难恢复场景中，最后一个可恢复的事务取决于向云复制数据库日志卷的频率，而这反过来又取决于公司的 RTO 或 RPO 策略。</block>
  <block id="e3ea77c81b6559a6984aee62074951ec" category="paragraph"><block ref="e3ea77c81b6559a6984aee62074951ec" category="inline-image-macro-rx" type="image"></block></block>
  <block id="44d1c907c1d5302eb896d76cae9b5e7f" category="paragraph"><block ref="44d1c907c1d5302eb896d76cae9b5e7f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d77575716b9cd49ab1453e367c405abe" category="admonition">在灾难恢复情形下，异步 SnapMirror 会在数据库日志备份间隔内丢失未将其备份到云目标的数据。为了最大限度地减少数据丢失，可以计划更频繁的日志备份。但是，在技术上可以实现的日志备份频率有一定限制。</block>
  <block id="c684c2587fa959f3df40953faab1c1a1" category="list-text">选择二级镜像备份上的最后一个日志备份，然后挂载日志备份。</block>
  <block id="4d27921136b62a393650eec8f38c5a39" category="paragraph"><block ref="4d27921136b62a393650eec8f38c5a39" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6784de36878125b88feb4c3192d2aa3d" category="paragraph"><block ref="6784de36878125b88feb4c3192d2aa3d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fbfa0a2a63c1090863dedb14664d443c" category="list-text">选择上次完整数据库备份，然后单击克隆以启动克隆工作流。</block>
  <block id="ecafa568fe2f36fee38130d0f80eeafc" category="paragraph"><block ref="ecafa568fe2f36fee38130d0f80eeafc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3aa765536eeb5bd55823afbb43c9efdc" category="list-text">在主机上选择一个唯一的克隆数据库 ID 。</block>
  <block id="6d4d1ea488e25d46cd7824491f3f98fb" category="paragraph"><block ref="6d4d1ea488e25d46cd7824491f3f98fb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d57d235b31b66e982ae6d433fa33948e" category="list-text">为 Oracle 闪存恢复区域和联机日志配置日志卷并将其挂载到目标灾难恢复服务器。</block>
  <block id="4ef6ef644cc7510226d8d150ce9cfe73" category="paragraph"><block ref="4ef6ef644cc7510226d8d150ce9cfe73" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4d5730b3167534121e5ac4fcdf84cf1f" category="paragraph"><block ref="4d5730b3167534121e5ac4fcdf84cf1f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6142419cbd2b279a240db52011ea3cab" category="admonition">Oracle 克隆操作步骤不会创建日志卷，而是需要在克隆之前在灾难恢复服务器上配置日志卷。</block>
  <block id="b20da77a777ef0a84d95f447b254387c" category="list-text">选择目标克隆主机和位置以放置数据文件，控制文件和重做日志。</block>
  <block id="326062662ffdb461c61b5ddfc54974bc" category="paragraph"><block ref="326062662ffdb461c61b5ddfc54974bc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6b126b14adfdc04f12e6a00531155f4a" category="list-text">选择克隆的凭据。填写目标服务器上 Oracle 主配置的详细信息。</block>
  <block id="ee4a9d80953ee6db29e5577ef13327ba" category="paragraph"><block ref="ee4a9d80953ee6db29e5577ef13327ba" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c76f59dc52686a71eb5917bbcabfa212" category="list-text">指定克隆前要运行的脚本。可以根据需要调整数据库参数。</block>
  <block id="31b131b08153ae34a96d1e17fa891e1f" category="paragraph"><block ref="31b131b08153ae34a96d1e17fa891e1f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7018f70f78c5e3154b2620e31167c12e" category="list-text">选择直到取消作为恢复选项，以便恢复通过所有可用的归档日志运行，以重新输出复制到二级云位置的最后一个事务。</block>
  <block id="57fa7fef5a8266470204775391a701d3" category="paragraph"><block ref="57fa7fef5a8266470204775391a701d3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6233d74c8f9820a1029624d60ab66049" category="list-text">如果需要，配置 SMTP 服务器以发送电子邮件通知。</block>
  <block id="a563132424d4d3d255697521a0446bc9" category="paragraph"><block ref="a563132424d4d3d255697521a0446bc9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="99a0cd00abfa258b121d480ce7d27e63" category="list-text">灾难恢复克隆摘要。</block>
  <block id="0f66818ccf8a8dd3d6491b9bcf74c02e" category="paragraph"><block ref="0f66818ccf8a8dd3d6491b9bcf74c02e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b4ff014e6bff5ee06349d607c14fcf9e" category="list-text">克隆的数据库会在克隆完成后立即注册到 SnapCenter 中，然后可用于备份保护。</block>
  <block id="18eac7477ab0c6038ec443444677a1eb" category="paragraph"><block ref="18eac7477ab0c6038ec443444677a1eb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="22d74aee547ad10d104f875521cfa6d7" category="section-title">对 Oracle 进行灾难恢复克隆后验证和配置</block>
  <block id="9d58cce71d4c85948ccecfea105367ed" category="list-text">验证在云中的灾难恢复位置上刷新，复制和恢复的最后一个测试事务。</block>
  <block id="1db3ba1f62cbb82a66232de851bad3ce" category="paragraph"><block ref="1db3ba1f62cbb82a66232de851bad3ce" category="inline-image-macro-rx" type="image"></block></block>
  <block id="61b3573abc722a493f53ed27503f7eff" category="list-text">配置闪存恢复区域。</block>
  <block id="71ca9fe67f8c3826e171fb227af4f666" category="paragraph"><block ref="71ca9fe67f8c3826e171fb227af4f666" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4005d553f013abc53c6a1a65aed1d65f" category="list-text">配置用于用户访问的 Oracle 侦听器。</block>
  <block id="0c79c2a9e4fd1ea908a63d58f1f44917" category="list-text">将克隆的卷拆离复制的源卷。</block>
  <block id="42e82bb35283d9f2e2b444419f518667" category="list-text">将复制从云反向复制到内部，并重建发生故障的内部数据库服务器。</block>
  <block id="4ce2420dd00dd0b543e2e51bf7c1c135" category="admonition">克隆拆分可能会产生比正常操作高得多的临时存储空间利用率。但是，在重建内部数据库服务器后，可以释放额外的空间。</block>
  <block id="0e70133bb418f4025b82a6a35301e209" category="section-title">将内部 SQL 生产数据库克隆到云中进行灾难恢复</block>
  <block id="32bfa00a92b9f85d791a43f6d70a35cd" category="list-text">同样，为了验证 SQL 克隆恢复是否经过了最后一个可用日志，我们创建了一个小测试表并插入了一行。测试数据将在完全恢复到最后一个可用日志后进行恢复。</block>
  <block id="321bd96e83b00fcd04bfcc72ec4564ff" category="paragraph"><block ref="321bd96e83b00fcd04bfcc72ec4564ff" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a3b7f1fcf93afdd055ec19e230b54347" category="list-text">使用 SQL Server 的数据库管理用户 ID 登录到 SnapCenter 。导航到资源选项卡，其中显示了 SQL Server 保护资源组。</block>
  <block id="c9673e38d22c239c3b46259620b7b190" category="paragraph"><block ref="c9673e38d22c239c3b46259620b7b190" category="inline-image-macro-rx" type="image"></block></block>
  <block id="608bfa3334f97023b71f6b7a04742bd6" category="list-text">手动运行日志备份以将最后一个事务刷新到公有云中的二级存储。</block>
  <block id="94ca8d0daf1445cae1bbc5a13d7b0c42" category="paragraph"><block ref="94ca8d0daf1445cae1bbc5a13d7b0c42" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a9b9ced1d8d8e91eb2606cb7d0932fa4" category="list-text">为克隆选择最后一个完整的 SQL Server 备份。</block>
  <block id="f93fa51d605a26ef233b6fb9c5489266" category="paragraph"><block ref="f93fa51d605a26ef233b6fb9c5489266" category="inline-image-macro-rx" type="image"></block></block>
  <block id="82efcc579f2220a65dbe5cdd64f47253" category="list-text">设置克隆设置，例如克隆服务器，克隆实例，克隆名称和挂载选项。执行克隆的二级存储位置会自动填充。</block>
  <block id="bb5bdefa03845f9483d1e3fcf8d3b40f" category="paragraph"><block ref="bb5bdefa03845f9483d1e3fcf8d3b40f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9d84ecf0ed314694d6e3ad9b2a96a198" category="list-text">选择要应用的所有日志备份。</block>
  <block id="79284af3915a1bc3e4d4d3993acd9042" category="paragraph"><block ref="79284af3915a1bc3e4d4d3993acd9042" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6f68fbd76be71ebe267aa207f7bef25f" category="list-text">指定克隆前后要运行的任何可选脚本。</block>
  <block id="1f29cf99c49ef1910181e451424c3796" category="paragraph"><block ref="1f29cf99c49ef1910181e451424c3796" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0ac43ede08a0b7154673a619b979f17d" category="list-text">如果需要电子邮件通知，请指定 SMTP 服务器。</block>
  <block id="e8aa5b543b67c22f0a2a205562794787" category="paragraph"><block ref="e8aa5b543b67c22f0a2a205562794787" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f7338d3af995c4a281de85493129cc18" category="list-text">灾难恢复克隆摘要。克隆的数据库会立即注册到 SnapCenter 中，并可用于备份保护。</block>
  <block id="332fb27e1cc349fc79252fbfc5de6ad0" category="paragraph"><block ref="332fb27e1cc349fc79252fbfc5de6ad0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8be7490bb89f986a83768e6a71d78ee8" category="paragraph"><block ref="8be7490bb89f986a83768e6a71d78ee8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5f01a56e31a650c5bb83408b5238270e" category="section-title">SQL 的灾难恢复克隆后验证和配置</block>
  <block id="029640b7bf09578f05703e407e99b8d7" category="list-text">监控克隆作业状态。</block>
  <block id="d5f350d5580b71105a1718557ce88137" category="paragraph"><block ref="d5f350d5580b71105a1718557ce88137" category="inline-image-macro-rx" type="image"></block></block>
  <block id="68236fcee9bee8dbdc1c54b7b2d84b34" category="list-text">验证是否已使用所有日志文件克隆和恢复来复制和恢复最后一个事务。</block>
  <block id="3ebb58ab28579acf2742808bf95fc07e" category="paragraph"><block ref="3ebb58ab28579acf2742808bf95fc07e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="50159c53d6f87eb33c314abd9f0bd28f" category="list-text">在灾难恢复服务器上配置一个新的 SnapCenter 日志目录以进行 SQL Server 日志备份。</block>
  <block id="50f8c30e062c542679b96127a844db6a" category="paragraph">如果您需要有关此解决方案和用例的帮助，请加入 <block ref="f9456f3b54a140d5d3858823c684363f" category="inline-link-macro-rx"></block> 并寻找解决方案自动化渠道来发布您的问题或询问。</block>
  <block id="467bda78c0e1adcc5ed650843fbfbdf5" category="summary">本节介绍在 AWS 中部署 Cloud Manager 和 Cloud Volumes ONTAP 的过程。</block>
  <block id="298a4809d5445df75b6c4a9fb94074a4" category="doc">AWS 公有云入门</block>
  <block id="b8f5ff8c1ae69fa5befe459d3f34b68a" category="inline-link-macro">先前版本：内部部署入门。</block>
  <block id="19f84106226ff97c314f55dd621bbd98" category="paragraph"><block ref="19f84106226ff97c314f55dd621bbd98" category="inline-link-macro-rx"></block></block>
  <block id="87aa698992e009d04733c9906225592c" category="admonition">为了便于操作，我们根据 AWS 中的部署创建了本文档。但是， Azure 和 GCP 的过程非常相似。</block>
  <block id="39845311263ccad04c0d4f0b9aa9d4c6" category="section-title">1 ，飞行前检查</block>
  <block id="12ed93944854c12caa37886d620f16db" category="paragraph">在部署之前，请确保基础架构已准备就绪，以便在下一阶段进行部署。其中包括：</block>
  <block id="c6368ae044df0f7bb26ed60afda5c591" category="list-text">AWS 帐户</block>
  <block id="4019c185756035c18c03fabfccd7d4b2" category="list-text">您选择的地区的 VPC</block>
  <block id="fca5d2fece6e360f78dff4573ba04a20" category="list-text">可访问公有 Internet 的子网</block>
  <block id="e3e5c3dadc3e70d536645a3be9744f79" category="list-text">向 AWS 帐户添加 IAM 角色的权限</block>
  <block id="bd5c82fb0e0371a168f609848b11e92a" category="list-text">AWS 用户的机密密钥和访问密钥</block>
  <block id="c3d1ff3c88148b2246bb0972916da82a" category="section-title">在 AWS 中部署 Cloud Manager 和 Cloud Volumes ONTAP 的步骤</block>
  <block id="6d0eb695a99109617b806676e9610075" category="inline-link">NetApp Cloud 文档</block>
  <block id="593581e466784760a050bceaea5e0c48" category="admonition">部署 Cloud Manager 和 Cloud Volumes ONTAP 的方法有多种；此方法最简单，但需要的权限最多。如果此方法不适用于您的 AWS 环境，请参考<block ref="97a20614f8c0e53f461a9353634e5e51" category="inline-link-rx"></block>。</block>
  <block id="bb3e779fdf877143137572122cf424e3" category="section-title">部署 Cloud Manager 连接器</block>
  <block id="4c6e32ff373dc3ce5b49202f92f01b08" category="list-text">导航到<block ref="143fea272f01f72dbdc942451156df21" category="inline-link-rx"></block> 并登录或注册。</block>
  <block id="356cf5e12d635c19d987b1b195ff5a40" category="paragraph"><block ref="356cf5e12d635c19d987b1b195ff5a40" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2300b8579a8761e452d89a2af6636b7d" category="list-text">登录后，您应转到 " 画布 " 。</block>
  <block id="af93b0b88e1db5f3aa229d2336fedb3c" category="paragraph"><block ref="af93b0b88e1db5f3aa229d2336fedb3c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a3fbf2c408ce86ff3403990e7e32dcb3" category="list-text">单击 " 添加工作环境 " ，然后在 AWS 中选择 Cloud Volumes ONTAP 。您还可以在此处选择是要部署单节点系统还是高可用性对。我已选择部署高可用性对。</block>
  <block id="bb18ff1ebac7ea2039aa297469c76b76" category="paragraph"><block ref="bb18ff1ebac7ea2039aa297469c76b76" category="inline-image-macro-rx" type="image"></block></block>
  <block id="016aa0c0a7322975ec4b8eeac805f2c0" category="list-text">如果尚未创建连接器，则会显示一个弹出窗口，要求您创建连接器。</block>
  <block id="a05691eb0d806668c3796d3d6fe01157" category="paragraph"><block ref="a05691eb0d806668c3796d3d6fe01157" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4fc3362a0d8ab63cc8fa21bbd0fb07db" category="list-text">单击 " 让我们开始 " ，然后选择 "AWS" 。</block>
  <block id="55f5adc74d49945abd7798742f307124" category="paragraph"><block ref="55f5adc74d49945abd7798742f307124" category="inline-image-macro-rx" type="image"></block></block>
  <block id="deae4c054bb3102bbf634b14534da9bf" category="inline-link">NetApp 策略页面</block>
  <block id="651d429a2b6cfcd93f6adb1d4825a214" category="list-text">输入您的机密密钥和访问密钥。确保您的用户具有上所述的正确权限<block ref="fb0c65a047527c32e46baadcaacb4fe2" category="inline-link-rx"></block>。</block>
  <block id="94497191b0b0c6d05a2df7d2175e87f5" category="paragraph"><block ref="94497191b0b0c6d05a2df7d2175e87f5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d8d59b60a74630e45f83fd3c48207b47" category="list-text">为连接器指定一个名称，并使用上所述的预定义角色<block ref="fb0c65a047527c32e46baadcaacb4fe2" category="inline-link-rx"></block> 或者要求 Cloud Manager 为您创建角色。</block>
  <block id="1e64ebe4af05f5d4a8b8c6542e7a09e9" category="paragraph"><block ref="1e64ebe4af05f5d4a8b8c6542e7a09e9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="02d395705fb063ad8d33d8c83c856e6f" category="list-text">提供部署连接器所需的网络信息。验证是否已通过以下方式启用出站 Internet 访问：</block>
  <block id="8215126360cbe5d8f5566c7ffc8cf224" category="list-text">为连接器提供公有 IP 地址</block>
  <block id="22adb619c008bfd7495288573093ae44" category="list-text">为连接器提供一个代理以供其使用</block>
  <block id="58a149795bbe86e4e0d4ab8f10413219" category="list-text">为连接器提供通过 Internet 网关到公有 Internet 的路由</block>
  <block id="5908ad1cf5bd748238e305dd5fc52fac" category="paragraph"><block ref="5908ad1cf5bd748238e305dd5fc52fac" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7c58ebc9f032dc8d2e5c4f522cedbe0b" category="list-text">通过提供安全组或创建新的安全组，通过 SSH ， HTTP 和 HTTPS 提供与连接器的通信。我已启用仅从 IP 地址访问此连接器的功能。</block>
  <block id="1d39d9c13f50dd25f7e54173c87c633a" category="paragraph"><block ref="1d39d9c13f50dd25f7e54173c87c633a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cb444cfaba774437ecdbbb95856d94cd" category="list-text">查看摘要页面上的信息，然后单击添加以部署连接器。</block>
  <block id="5576df68e3720f55e585e7e091d5b9e3" category="paragraph"><block ref="5576df68e3720f55e585e7e091d5b9e3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4255ace47c9ad7f2907c18df7512bb9f" category="list-text">现在，此连接器将使用云形成堆栈进行部署。您可以从 Cloud Manager 或通过 AWS 监控其进度。</block>
  <block id="ff7fb4bedc0d09880f85d9745ec258a5" category="paragraph"><block ref="ff7fb4bedc0d09880f85d9745ec258a5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ca320cc147e2b9fac2dd7379e91012b6" category="list-text">部署完成后，将显示一个成功页面。</block>
  <block id="f5bbadf1ed57058e80e27764684e6314" category="paragraph"><block ref="f5bbadf1ed57058e80e27764684e6314" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6382283fd45b13b5c983745731fec990" category="section-title">部署 Cloud Volumes ONTAP</block>
  <block id="5fe90897c7135ba3020c4a397f55adb6" category="list-text">根据您的要求选择 AWS 和部署类型。</block>
  <block id="63b636f2002a2e7b7c2e2420cd64ff73" category="paragraph"><block ref="63b636f2002a2e7b7c2e2420cd64ff73" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ccf1300c5621fdebe8c1a70fade44f3b" category="list-text">如果尚未分配任何订阅，而您希望使用 PAYGO 购买，请选择编辑凭据。</block>
  <block id="b893bded7e1bd3419a443758a8ef410f" category="paragraph"><block ref="b893bded7e1bd3419a443758a8ef410f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="88eb84b1a8f0417c9de6e1202125df56" category="list-text">选择添加订阅。</block>
  <block id="0b5d3e3d1a9347ff4a7395d09208a8f4" category="paragraph"><block ref="0b5d3e3d1a9347ff4a7395d09208a8f4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="052208bafdfe08bc8f0735a78226e541" category="list-text">选择要订阅的合同类型。我选择了按需购买。</block>
  <block id="4d5ab1ed0682fe644e831558598d4638" category="paragraph"><block ref="4d5ab1ed0682fe644e831558598d4638" category="inline-image-macro-rx" type="image"></block></block>
  <block id="65577508f7897e730adb501d0db73913" category="list-text">系统会将您重定向到 AWS ；选择 Continue to Subscribe 。</block>
  <block id="ac33260d1e06f504f1dcac229aeb269c" category="paragraph"><block ref="ac33260d1e06f504f1dcac229aeb269c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="439c4fb23c120f0a99894c630cedaabd" category="list-text">订阅后，您将重定向回 NetApp Cloud Central 。如果您已订阅，但未被重定向，请选择 " 单击此处 " 链接。</block>
  <block id="a90c8b1fc04a41aff490fd2b269f5932" category="paragraph"><block ref="a90c8b1fc04a41aff490fd2b269f5932" category="inline-image-macro-rx" type="image"></block></block>
  <block id="14b9e98d2b57da92c29826ce7de32c32" category="list-text">系统会将您重定向到 Cloud Central ，您必须在其中为订阅命名并将其分配给 Cloud Central 帐户。</block>
  <block id="c89376fd9624f6ebda7959df6176ef34" category="paragraph"><block ref="c89376fd9624f6ebda7959df6176ef34" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4508f5994d1b34ff85cd1e8a1884d6c1" category="list-text">成功后，将显示一个复选标记页面。导航回 Cloud Manager 选项卡。</block>
  <block id="2b206bbd8f3b20e3282b660a356d90be" category="paragraph"><block ref="2b206bbd8f3b20e3282b660a356d90be" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b3294e5fb9ec1c42cde7ebf9b206c583" category="list-text">现在，此订阅将显示在 Cloud Central 中。单击应用以继续。</block>
  <block id="37ce5c33a55d907edabe632c39a2707c" category="paragraph"><block ref="37ce5c33a55d907edabe632c39a2707c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9f7927b068a5dddb4852b2e7dc256544" category="list-text">输入工作环境详细信息，例如：</block>
  <block id="0dbae4d42c7a0db53e2eb32adee12892" category="list-text">Cluster name</block>
  <block id="0c191ee206a91460fd94e2ff976a38e7" category="list-text">Cluster password</block>
  <block id="53aa18427d1e2c7b7113c668561a62d2" category="list-text">AWS 标记（可选）</block>
  <block id="d3b6ff1e8c6317d132d3a5e974f1374c" category="paragraph"><block ref="d3b6ff1e8c6317d132d3a5e974f1374c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4fb5b261ae3a3581304a283ef70a5246" category="inline-link">NetApp Cloud 主页</block>
  <block id="e7b29c75e71a48483734401322ef6e92" category="list-text">选择要部署的其他服务。要了解有关这些服务的更多信息，请访问<block ref="1bb1213784e04e4f47d06f252d1ba164" category="inline-link-rx"></block>。</block>
  <block id="88e71a2c19d98c79d2ed51a753c8a4c2" category="paragraph"><block ref="88e71a2c19d98c79d2ed51a753c8a4c2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e0dffa77d5644a3816ba69e24ce813ff" category="list-text">选择是部署在多个可用性区域中（即三个子网，每个子网位于不同的 AZ 中），还是部署一个可用性区域。我选择了多个 AZs 。</block>
  <block id="6e4a3fe2b0629dae504d8e727147f709" category="paragraph"><block ref="6e4a3fe2b0629dae504d8e727147f709" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4b889b7255c34e7f230e392668605860" category="list-text">选择要部署到的集群的区域， VPC 和安全组。在本节中，您还可以为每个节点（和调解器）分配可用性分区以及它们所占用的子网。</block>
  <block id="9ad68c9f72863557931a8569462bff52" category="paragraph"><block ref="9ad68c9f72863557931a8569462bff52" category="inline-image-macro-rx" type="image"></block></block>
  <block id="be43ebbf5380089f153e4f1b13e35e6f" category="list-text">选择节点和调解器的连接方法。</block>
  <block id="8bf6da8b537127466c4421c1ae3169be" category="paragraph"><block ref="8bf6da8b537127466c4421c1ae3169be" category="inline-image-macro-rx" type="image"></block></block>
  <block id="204bd52e1d13052712299779cf041df6" category="admonition">调解器需要与 AWS API 进行通信。只要在部署调解器 EC2 实例后可以访问公有，就不需要 API IP 地址。</block>
  <block id="52fade87431f9acc43b7bf6e4c5fd2f1" category="inline-link">NetApp Cloud 文档</block>
  <block id="0c79e4a46253eeb94ba6b8218928aa99" category="list-text">浮动 IP 地址用于访问 Cloud Volumes ONTAP 使用的各种 IP 地址，包括集群管理和数据提供 IP 。这些地址必须是您的网络中尚未可路由的地址，并且已添加到 AWS 环境中的路由表中。要在故障转移期间为 HA 对启用一致的 IP 地址，需要使用这些地址。有关浮动 IP 地址的详细信息，请参见<block ref="72cde540b4f97efa19e071f729439801" category="inline-link-rx"></block>。</block>
  <block id="fd4a46ceddfb2402b7e37177af575e04" category="paragraph"><block ref="fd4a46ceddfb2402b7e37177af575e04" category="inline-image-macro-rx" type="image"></block></block>
  <block id="95ca6b5e9b64aed9132a6be07d061f3b" category="list-text">选择将浮动 IP 地址添加到的路由表。客户端使用这些路由表与 Cloud Volumes ONTAP 进行通信。</block>
  <block id="3453ab81a2f04d5c39ae750fb79ece2a" category="paragraph"><block ref="3453ab81a2f04d5c39ae750fb79ece2a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="af918e519f9c0db1ed5ab4fd4b6e9e05" category="list-text">选择是启用 AWS 托管加密还是启用 AWS KMS 对 ONTAP 根磁盘，启动磁盘和数据磁盘进行加密。</block>
  <block id="058eaefa711702bd45c5f6650cf01e4c" category="paragraph"><block ref="058eaefa711702bd45c5f6650cf01e4c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="01bd54fa77587425fca4a6c352309b5c" category="list-text">选择您的许可模式。如果您不知道选择哪种，请联系您的 NetApp 代表。</block>
  <block id="e5e49184799594a9fa690c9122eb883e" category="paragraph"><block ref="e5e49184799594a9fa690c9122eb883e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="04110b24d1459a6e21e35ad976a8f10e" category="list-text">选择最适合您的用例的配置。这与 " 前提条件 " 页面中所述的规模估算注意事项相关。</block>
  <block id="e19584159c9c3791a9e3c462cb0aa451" category="paragraph"><block ref="e19584159c9c3791a9e3c462cb0aa451" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3ed47788a525c6d08246bfa2f90922da" category="list-text">也可以创建卷。这不是必需的，因为后续步骤使用 SnapMirror ，这将为我们创建卷。</block>
  <block id="01da9401385484b72ba9c016ac6c19ab" category="paragraph"><block ref="01da9401385484b72ba9c016ac6c19ab" category="inline-image-macro-rx" type="image"></block></block>
  <block id="76011f95c4e1b3f68fa5829dab0fb786" category="list-text">查看所做的选择并勾选相应的复选框，确认您了解 Cloud Manager 是否已将资源部署到 AWS 环境中。准备好后，单击 "Go" 。</block>
  <block id="7b78e746aa55ffe6fee1f3e0b65b8cca" category="paragraph"><block ref="7b78e746aa55ffe6fee1f3e0b65b8cca" category="inline-image-macro-rx" type="image"></block></block>
  <block id="13b7f009673a469e5482a96832be1473" category="list-text">Cloud Volumes ONTAP 现在开始其部署过程。Cloud Manager 使用 AWS API 和云构成堆栈来部署 Cloud Volumes ONTAP 。然后，它会根据您的规格对系统进行配置，为您提供一个可立即使用的即用系统。此过程的时间安排因所做的选择而异。</block>
  <block id="11d15d8a4bb9195b48d5010fa30fa547" category="paragraph"><block ref="11d15d8a4bb9195b48d5010fa30fa547" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5e63d2329924bb302fb012e7916b3614" category="list-text">您可以通过导航到时间线来监控进度。</block>
  <block id="77405312cc4c1e96d3f7f796e838bf89" category="paragraph"><block ref="77405312cc4c1e96d3f7f796e838bf89" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4b4df7cc92b3ee31f5d95082a78c7903" category="list-text">时间线可作为对 Cloud Manager 中执行的所有操作的审核。您可以查看 Cloud Manager 在设置到 AWS 和 ONTAP 集群期间发出的所有 API 调用。此外，还可以有效地使用此功能对您遇到的任何问题进行故障排除。</block>
  <block id="8c17e020c76595308d57605fa71dc7af" category="paragraph"><block ref="8c17e020c76595308d57605fa71dc7af" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4c5674ad1910f0a25455fdeb0f3f097a" category="list-text">部署完成后， CVO 集群将显示在当前容量所在的 Canvas 上。处于当前状态的 ONTAP 集群已完全配置，可以实现真正的即装即用体验。</block>
  <block id="db044bc640be9fc8227b7ada891f279d" category="paragraph"><block ref="db044bc640be9fc8227b7ada891f279d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="28d2e01957d5845ff59688f17bd34339" category="section-title">从内部部署到云配置 SnapMirror</block>
  <block id="081494b1a178710486921a42e2bdfa87" category="paragraph">现在，您已部署源 ONTAP 系统和目标 ONTAP 系统，您可以将包含数据库数据的卷复制到云中。</block>
  <block id="cb3269c2496a99fb03bebe82b6a3e4bc" category="inline-link">SnapMirror 兼容性表</block>
  <block id="46aad6288d89ba29f38b4742bf018aca" category="paragraph">有关适用于 SnapMirror 的兼容 ONTAP 版本的指南，请参见<block ref="f75a4f2138bf92eb17ef87cad85a9e34" category="inline-link-rx"></block>。</block>
  <block id="36c5350a8474f2212fecc811eb77df57" category="list-text">单击源 ONTAP 系统（内部），然后将其拖放到目标，选择复制 &gt; 启用或选择复制 &gt; 菜单 &gt; 复制。</block>
  <block id="5dbe69ec28d70286f46385336e96d003" category="paragraph"><block ref="5dbe69ec28d70286f46385336e96d003" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8771a8fdaa9e84a7eef7540edcca5f40" category="paragraph">选择启用。</block>
  <block id="ac21962f3f0ae9f9c17b26196452f903" category="paragraph"><block ref="ac21962f3f0ae9f9c17b26196452f903" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a6a8dc55f6f333187a100f6ed328bdc0" category="paragraph">或选项。</block>
  <block id="949fa0a5e194cf44c9e08903cb914566" category="paragraph"><block ref="949fa0a5e194cf44c9e08903cb914566" category="inline-image-macro-rx" type="image"></block></block>
  <block id="066bf779660ad446aa9b0d4021c4bf40" category="paragraph">复制。</block>
  <block id="deafbb4908c633cb93a7f7e76b31da08" category="paragraph"><block ref="deafbb4908c633cb93a7f7e76b31da08" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5a803b2a55429f981d25fbb8da94aef7" category="list-text">如果未拖放，请选择要复制到的目标集群。</block>
  <block id="630e74180bc1b6c0c0c866d5478ff029" category="paragraph"><block ref="630e74180bc1b6c0c0c866d5478ff029" category="inline-image-macro-rx" type="image"></block></block>
  <block id="761124dc5e0730086556a7d33d43418c" category="list-text">选择要复制的卷。我们复制了数据和所有日志卷。</block>
  <block id="7bec2596a51a0d4a808a37dec9e6c540" category="paragraph"><block ref="7bec2596a51a0d4a808a37dec9e6c540" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bde4e8497f5ecaef866c0f049aada776" category="list-text">选择目标磁盘类型和分层策略。对于灾难恢复，我们建议使用 SSD 作为磁盘类型，并保持数据分层。数据分层可将镜像数据分层为低成本的对象存储，并节省使用本地磁盘的成本。中断关系或克隆卷时，数据将使用快速的本地存储。</block>
  <block id="a7d9908d0f610b3db167c894d109d1ec" category="paragraph"><block ref="a7d9908d0f610b3db167c894d109d1ec" category="inline-image-macro-rx" type="image"></block></block>
  <block id="52f06f2f09c024b69ef3944a8cd78ad9" category="list-text">选择目标卷名称： we chose ` [source_volume_name]_dr` 。</block>
  <block id="6f8ba85bc89d216799431f124e48b25f" category="paragraph"><block ref="6f8ba85bc89d216799431f124e48b25f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2882a0dbc1a6ad74198ac2cb6316870d" category="list-text">选择复制的最大传输速率。这样，如果您与云的连接带宽较低，例如 VPN ，则可以节省带宽。</block>
  <block id="041263f562a9058ae414685962469951" category="paragraph"><block ref="041263f562a9058ae414685962469951" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f81dd66e0f0847d4cb1d2d12fadcc2f3" category="list-text">定义复制策略。我们选择了镜像，它会获取最新的数据集并将其复制到目标卷。您也可以根据自己的要求选择其他策略。</block>
  <block id="d0b86e2934c870915aaa77674d1d79d7" category="paragraph"><block ref="d0b86e2934c870915aaa77674d1d79d7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4db5384e8d04b01ff24a9178b3efaf6a" category="list-text">选择触发复制的计划。NetApp 建议为数据卷设置 " 每日 " 计划，并为日志卷设置 " 每小时 " 计划，但可以根据要求进行更改。</block>
  <block id="c6715d4de4d68a1f8eb9cb8acb63b097" category="paragraph"><block ref="c6715d4de4d68a1f8eb9cb8acb63b097" category="inline-image-macro-rx" type="image"></block></block>
  <block id="02e3a269661e3c96a86a075872a1b269" category="list-text">查看输入的信息，单击 Go 以触发集群对等方和 SVM 对等方（如果这是您首次在两个集群之间复制），然后实施并初始化 SnapMirror 关系。</block>
  <block id="75c2d297cd7282b30ce0400170110307" category="paragraph"><block ref="75c2d297cd7282b30ce0400170110307" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3c160366cab97ee8f1a35416d1294ddb" category="list-text">继续对数据卷和日志卷执行此过程。</block>
  <block id="64853c47f4f907262466c1e5ad154c8c" category="list-text">要检查所有关系，请导航到 Cloud Manager 中的复制选项卡。您可以在此处管理您的关系并检查其状态。</block>
  <block id="641e620fe8c714d7381775d20a707726" category="paragraph"><block ref="641e620fe8c714d7381775d20a707726" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c88bec52f9e24233a78b6a90efa32ec6" category="list-text">复制完所有卷后，您将处于稳定状态，并准备好继续执行灾难恢复和开发 / 测试工作流。</block>
  <block id="86fb3ee49ae2f8c0ee121c551a8f08c2" category="section-title">3. 为数据库工作负载部署 EC2 计算实例</block>
  <block id="91ba52045df2b9244f28270482f749c9" category="inline-link">EC2 实例类型</block>
  <block id="33aaa72e62140af9cecb2c48f836b84b" category="paragraph">AWS 已为各种工作负载预配置 EC2 计算实例。选择实例类型可确定 CPU 核数，内存容量，存储类型和容量以及网络性能。在使用情形中，除了操作系统分区之外，用于运行数据库工作负载的主存储是从 CVO 或 FSX ONTAP 存储引擎分配的。因此，需要考虑的主要因素是 CPU 核心，内存和网络性能级别的选择。可在此处找到典型的 AWS EC2 实例类型：<block ref="9334d5b9e602c5921b4f295f6041489b" category="inline-link-rx"></block>。</block>
  <block id="0af43c3d809d6e56a6a7a0d1ed039bbc" category="section-title">调整计算实例大小</block>
  <block id="0b6e77aedd6bd733f979314fef2a98d7" category="list-text">根据所需的工作负载选择正确的实例类型。需要考虑的因素包括要支持的业务事务数，并发用户数，数据集规模估算等。</block>
  <block id="c421d122321bec48d6b30858f4e7b515" category="inline-link">Amazon EC2</block>
  <block id="ed4b68006572e288530a2152f7fbe5fe" category="list-text">可以通过 EC2 信息板启动 EC2 实例部署。确切的部署过程不在此解决方案的范围内。请参见<block ref="3a5862dd365e3998013717e9cf118a9a" category="inline-link-rx"></block> 了解详细信息。</block>
  <block id="708991723f71fa1bd7b8081be442552c" category="section-title">Oracle 工作负载的 Linux 实例配置</block>
  <block id="5c17b7d75ff16063f772234e1ea8eeb1" category="paragraph">本节介绍部署 EC2 Linux 实例后的其他配置步骤。</block>
  <block id="39d786446455bb2b3017b793805fc902" category="list-text">将 Oracle 备用实例添加到 DNS 服务器，以便在 SnapCenter 管理域中进行名称解析。</block>
  <block id="385a2a4f5305fe5ce8017f18fb7eabd4" category="list-text">添加一个 Linux 管理用户 ID 作为 SnapCenter OS 凭据，并具有 sudo 权限，而不需要密码。在 EC2 实例上启用 ID 和 SSH 密码身份验证。（默认情况下，在 EC2 实例上， SSH 密码身份验证和无密码 sudo 处于关闭状态。）</block>
  <block id="a2b4677d7a72840a78373c600441681a" category="list-text">将 Oracle 安装配置为与内部 Oracle 安装相匹配，例如操作系统修补程序， Oracle 版本和修补程序等。</block>
  <block id="66b65364302a847feb2630bfd7974256" category="inline-link">Oracle 19c 自动化部署</block>
  <block id="fa470598a181c1ed905bace243e46aa3" category="list-text">可以利用 NetApp Ansible DB 自动化角色为数据库开发 / 测试和灾难恢复用例配置 EC2 实例。可以从 NetApp 公有 GitHub 站点下载自动化代码：<block ref="437f8b44ff65600fb5697e9d369a0c54" category="inline-link-rx"></block>。目标是在 EC2 实例上安装和配置数据库软件堆栈，以匹配内部操作系统和数据库配置。</block>
  <block id="97875b4799caf4c948118e7b4776c9fb" category="section-title">SQL Server 工作负载的 Windows 实例配置</block>
  <block id="c63751cfdcf8c0b4e26635a47c7f0d97" category="paragraph">本节列出了最初部署 EC2 Windows 实例后的其他配置步骤。</block>
  <block id="5f44e6a78874f9f49acae3caa71cc14d" category="list-text">检索 Windows 管理员密码以通过 RDP 登录到实例。</block>
  <block id="eabafc642b0901afd6622ab0f19d9ef0" category="list-text">禁用 Windows 防火墙，将主机加入 Windows SnapCenter 域，然后将实例添加到 DNS 服务器以进行名称解析。</block>
  <block id="08bf2d7ff3ac9ab37cfa8dc449b3c8da" category="list-text">配置 SnapCenter 日志卷以存储 SQL Server 日志文件。</block>
  <block id="f97ac9d1946c873247af15165559b47a" category="list-text">在 Windows 主机上配置 iSCSI 以挂载卷并格式化磁盘驱动器。</block>
  <block id="6c2a9c611f48cae767f6ebea6fca0457" category="inline-link">NetApp 自动化</block>
  <block id="6dea6226167bd38268de4c4d948d72de" category="list-text">同样，以前的许多任务都可以通过适用于 SQL Server 的 NetApp 自动化解决方案实现自动化。有关新发布的角色和解决方案，请访问 NetApp Automation 公有 GitHub 站点：<block ref="8cafb3a3b1222d318fcd262791229701" category="inline-link-rx"></block>。</block>
  <block id="752c08adf364adb2721c9a373759f8f6" category="inline-link-macro">接下来：开发 / 测试向云突发的工作流。</block>
  <block id="4e3fc3c2eb04754fcac9e4e23b6de054" category="paragraph"><block ref="4e3fc3c2eb04754fcac9e4e23b6de054" category="inline-link-macro-rx"></block></block>
  <block id="ac9bef0f960e3a46befd2d06b223b61d" category="summary">本节介绍了开发 / 测试和灾难恢复操作的典型混合云架构。</block>
  <block id="fece52c505c48f2979e3fa0c8b6bd8bc" category="paragraph"><block ref="fece52c505c48f2979e3fa0c8b6bd8bc" category="inline-link-macro-rx"></block></block>
  <block id="4085a97aa705c0122bbcec0c84dd97d3" category="paragraph">以下架构图展示了在混合云中实施企业数据库操作的典型实施，用于开发 / 测试和灾难恢复操作。</block>
  <block id="acb339f710a626679c374df5b90c5416" category="paragraph"><block ref="acb339f710a626679c374df5b90c5416" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3cdc302c6d83b60c8ec7ad0b550e55a8" category="paragraph">在正常业务运营中，可以克隆云中的同步数据库卷并将其挂载到开发 / 测试数据库实例中，以进行应用程序开发或测试。如果发生故障，则可以激活云中的同步数据库卷以进行灾难恢复。</block>
  <block id="fbfd3304757c668454a7bdd10f9de200" category="inline-link-macro">接下来：解决方案要求。</block>
  <block id="ae3b1bce66c4c75d8abf9828ec9f2608" category="paragraph"><block ref="ae3b1bce66c4c75d8abf9828ec9f2608" category="inline-link-macro-rx"></block></block>
  <block id="c94d29f1f4f8ef37e9d27f30b7d7c67d" category="summary">必须在内部完成本节所述的任务，以便准备 SnapCenter 混合云数据库工作负载环境。</block>
  <block id="f6a196d9d3a941e76765e4a9395630c4" category="doc">内部部署的前提条件</block>
  <block id="eac55cbc45bfe6b98b8847b3952de7d3" category="inline-link-macro">先前版本：前提条件配置。</block>
  <block id="e63a288cc25b5c4127d3021b339c9f20" category="paragraph"><block ref="e63a288cc25b5c4127d3021b339c9f20" category="inline-link-macro-rx"></block></block>
  <block id="40931dcd4d9132545ec0faf2c5fb1b64" category="paragraph">要准备 SnapCenter 混合云数据库工作负载环境，必须在内部完成以下任务。</block>
  <block id="79daf399b9626cde309801f41a1e2e14" category="section-title">SnapCenter 安装和配置</block>
  <block id="2607530756fefa4173e12cfcd5fbfb01" category="paragraph">NetApp SnapCenter 工具是一款基于 Windows 的应用程序，通常在 Windows 域环境中运行，但也可以部署工作组。它基于多层架构，其中包括用于数据库工作负载的集中式管理服务器（ SnapCenter 服务器）和数据库服务器主机上的 SnapCenter 插件。以下是混合云部署的几个主要注意事项。</block>
  <block id="9f8c0bcd11d7afd1dd2ee818191cb914" category="list-text">* 单实例或 HA 部署。 * HA 部署可在单个 SnapCenter 实例服务器发生故障时提供冗余。</block>
  <block id="1bfa2867d5aa49106efbf3ac752f3084" category="list-text">* 名称解析。 * 必须在 SnapCenter 服务器上配置 DNS 以解析所有数据库主机，并在存储 SVM 上配置 DNS 以进行正向和反向查找。此外，还必须在数据库服务器上配置 DNS ，以解析 SnapCenter 服务器和存储 SVM ，以便进行正向和反向查找。</block>
  <block id="41f54308d86c1d7b525475d6ead22892" category="list-text">* 基于角色的访问控制（ Role-Based Access Control ， RBAC ）配置。 * 对于混合数据库工作负载，您可能需要使用 RBAC 隔离不同数据库平台的管理职责，例如 Oracle 数据库管理员或 SQL Server 管理员。必须为数据库管理员用户授予必要的权限。</block>
  <block id="5aee5dffd2e329652ec35995add763ae" category="list-text">* 启用基于策略的备份策略。 * 以强制实施备份一致性和可靠性。</block>
  <block id="dde4790e572aa9d01cd58fcfd8498766" category="list-text">* 在防火墙上打开所需的网络端口。 * 用于使内部 SnapCenter 服务器与云数据库主机中安装的代理进行通信。</block>
  <block id="e2962676531ebdcf62cb2a7b96042e77" category="list-text">* 端口必须处于打开状态，才能在内部和公有云之间传输 SnapMirror 流量。 * SnapCenter 服务器依靠 ONTAP SnapMirror 将现场 Snapshot 备份复制到云 CVO 存储 SVM 。</block>
  <block id="549762060d7242346fa79f39cba51791" category="inline-link-macro">SnapCenter 安装工作流</block>
  <block id="aec875397d57826c45f7072636026a07" category="paragraph">仔细规划安装前的规划和考虑后，单击此项 <block ref="f44e9d032441cc842cad02c3aab57d84" category="inline-link-macro-rx"></block> 有关 SnapCenter 安装和配置的详细信息。</block>
  <block id="df3fb602185c77a88bab186791d02636" category="section-title">内部数据库服务器存储配置</block>
  <block id="f7f3a649be867b87ccb26789453199db" category="paragraph">存储性能在数据库和应用程序的整体性能中发挥着重要作用。精心设计的存储布局不仅可以提高数据库性能，还可以轻松管理数据库备份和恢复。在定义存储布局时，应考虑多个因素，包括数据库大小，数据库的预期数据更改率以及执行备份的频率。</block>
  <block id="8481231881c8e64b34aa3c7e29510a25" category="paragraph">对于虚拟化数据库工作负载，通过 NFS 或 iSCSI 将存储 LUN 直接连接到子虚拟机通常比通过 VMDK 分配的存储性能更高。NetApp 建议采用下图所示的 LUN 上的大型 SQL Server 数据库的存储布局。</block>
  <block id="cc75f443d22e45e490468a8f20689d77" category="paragraph"><block ref="cc75f443d22e45e490468a8f20689d77" category="inline-image-macro-rx" type="image"></block></block>
  <block id="99aea05cf884bfdec230afa5250968b2" category="paragraph">下图显示了 NetApp 为 LUN 上的小型或中型 SQL Server 数据库建议的存储布局。</block>
  <block id="9fc72535f1113895818f8aa60ef773e7" category="paragraph"><block ref="9fc72535f1113895818f8aa60ef773e7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="76ecde8f778d0dd0676f392793ce4382" category="admonition">日志目录专用于 SnapCenter ，用于执行事务日志汇总以恢复数据库。对于超大型数据库，可以为一个卷分配多个 LUN ，以提高性能。</block>
  <block id="ee9158729a15dbd90d166650ba285d0e" category="paragraph">对于 Oracle 数据库工作负载， SnapCenter 支持以 ONTAP 存储为后盾的数据库环境，这些环境作为物理设备或虚拟设备挂载到主机上。您可以根据环境的严重性将整个数据库托管在一个或多个存储设备上。通常，客户会将专用存储上的数据文件与控制文件，重做文件和归档日志文件等所有其他文件隔离。这有助于管理员在几秒到几分钟内使用 Snapshot 技术快速还原（ ONTAP 单文件 SnapRestore ）或克隆大型关键数据库（ PB 级）。</block>
  <block id="b31fbb7e1a6e863315e431fdf9c00db9" category="paragraph"><block ref="b31fbb7e1a6e863315e431fdf9c00db9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="959a3405dfdfb0469534f5276ffb8e5e" category="paragraph">对于对延迟敏感的任务关键型工作负载，应将专用存储卷部署到不同类型的 Oracle 文件，以尽可能实现最佳延迟。对于大型数据库，应为数据文件分配每个卷的多个 LUN （ NetApp 建议最多八个）。</block>
  <block id="ac111cbcae2e9eaedafe418acc3a2cab" category="paragraph"><block ref="ac111cbcae2e9eaedafe418acc3a2cab" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2702ce3d59ec94853fa030462b309f2f" category="paragraph">对于较小的 Oracle 数据库， SnapCenter 支持共享存储布局，在此布局中，您可以在同一个存储卷或 LUN 上托管多个数据库或数据库的一部分。作为此布局的一个示例，您可以将所有数据库的数据文件托管在 +data ASM 磁盘组或卷组上。其余文件（重做，归档日志和控制文件）可以托管在另一个专用磁盘组或卷组（ LVM ）上。此类部署场景如下所示。</block>
  <block id="6c12e98a6e201f55836390c2a6232e5a" category="paragraph"><block ref="6c12e98a6e201f55836390c2a6232e5a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="93cf45b97655292e0536b810cb248828" category="paragraph">为了便于重新定位 Oracle 数据库， Oracle 二进制文件应安装在常规备份策略中包含的单独 LUN 上。这样可以确保在将数据库重新定位到新服务器主机时，可以启动 Oracle 堆栈进行恢复，而不会因 Oracle 二进制文件不同步而出现任何潜在问题。</block>
  <block id="1e69a4a8adec0842d1e110e970112268" category="section-title">许可要求</block>
  <block id="7f59934b2c0edd33f0d981f3bc4d12e7" category="paragraph">SnapCenter 是 NetApp 提供的许可软件。它通常包含在内部 ONTAP 许可证中。但是，对于混合云部署，要将 CVO 作为目标数据复制目标添加到 SnapCenter ，还需要 SnapCenter 的云许可证。有关详细信息，请查看以下 SnapCenter 基于容量的标准许可证链接：</block>
  <block id="9e86ae6c96041e3cb31e88116102ee35" category="inline-link-macro">基于容量的 SnapCenter 标准版许可证</block>
  <block id="a1d51b5b5f3258b40cbe392146bc8868" category="paragraph"><block ref="a1d51b5b5f3258b40cbe392146bc8868" category="inline-link-macro-rx"></block></block>
  <block id="85db56d490cdd7a31d40697ad1c9be3c" category="section-title">网络和安全性</block>
  <block id="254215e6d18fb5582ba78464fa468553" category="paragraph">在混合数据库操作中，如果需要一个可通过卷到云进行开发 / 测试和灾难恢复的内部生产数据库，则在设置环境并从内部数据中心连接到公有云时，网络连接和安全性是一个重要的考虑因素。</block>
  <block id="1e356fab450b44971b6cdbd1c25586b8" category="paragraph">公有云通常使用虚拟私有云（ Virtual Private Cloud ， VPC ）隔离公共云平台中的不同用户。在单个 VPC 中，可以使用安全组等措施来控制安全性，这些安全组可根据用户锁定 VPC 的需求进行配置。</block>
  <block id="5192a6d33c7a0127a67cbd7e07801735" category="paragraph">可以通过 VPN 通道保护从内部数据中心到 VPC 的连接。在 VPN 网关上，可以使用 NAT 和防火墙规则来加强安全性，这些规则可以阻止尝试从 Internet 上的主机与企业数据中心内的主机建立网络连接。</block>
  <block id="04a3995237c020c6a587d8a7723af6a6" category="paragraph">有关网络和安全注意事项，请查看您选择的公有云的相关入站和出站 CVO 规则：</block>
  <block id="d15513a147fbd525b88805bee9ea17ea" category="inline-link-macro">CVO - AWS 的安全组规则</block>
  <block id="f8d1f085169118c4d407be16136389c6" category="list-text"><block ref="f8d1f085169118c4d407be16136389c6" category="inline-link-macro-rx"></block></block>
  <block id="39f48b44d100d16ed6e2b931111663b7" category="inline-link-macro">CVO 的安全组规则— Azure</block>
  <block id="bcde746324630d82052a4fc9861cfea6" category="list-text"><block ref="bcde746324630d82052a4fc9861cfea6" category="inline-link-macro-rx"></block></block>
  <block id="7b20c547f2fd113499deaa3c0e418282" category="inline-link-macro">CVO - GCP 的防火墙规则</block>
  <block id="acde731d82a437ab33cb200791f7a197" category="list-text"><block ref="acde731d82a437ab33cb200791f7a197" category="inline-link-macro-rx"></block></block>
  <block id="d9446a69434b7c7fdec5c9e35d222834" category="section-title">使用 Ansible 自动化在内部和云之间同步数据库实例—可选</block>
  <block id="1c7c9b49a62ea0dc765d1439120cfc8f" category="paragraph">为了简化混合云数据库环境的管理， NetApp 强烈建议您部署 Ansible 控制器来自动执行某些管理任务，例如将计算实例保持在内部和云中的同步。这一点尤其重要，因为云中的不同步计算实例可能会因缺少内核软件包和其他问题而导致云中恢复的数据库出现错误。</block>
  <block id="7468552c7fc3a7ca377b7fc2405a9940" category="paragraph">此外， Ansible 控制器的自动化功能还可用于在某些任务中扩充 SnapCenter ，例如，拆分 SnapMirror 实例以激活灾难恢复数据副本以投入生产。</block>
  <block id="6ac547919eb6ca11f5a8387eaf990843" category="inline-link-macro">RedHat/CentOS Ansible Controller 设置</block>
  <block id="c8e133fc33bbdb52f84b3532496f2ac8" category="inline-link-macro">Ubuntu 或 Debian Ansible 控制器设置</block>
  <block id="6f332c2f54a4d49478f9588c5cd6c57c" category="paragraph">按照以下说明为 RedHat 或 CentOS 计算机设置 Ansible 控制节点： <block ref="fedce547519117863322cfa54cc2ba7d" category="inline-link-macro-rx"></block>。按照以下说明为 Ubuntu 或 Debian 计算机设置 Ansible 控制节点： <block ref="1c50818f5fe40dbc8b2e05138d554fa4" category="inline-link-macro-rx"></block>。</block>
  <block id="d5316785c089f90464e8e683aadd02e1" category="inline-link-macro">接下来：公有云。</block>
  <block id="d09f79a080b121cb1acc181711b5d02a" category="paragraph"><block ref="d09f79a080b121cb1acc181711b5d02a" category="inline-link-macro-rx"></block></block>
  <block id="d89002d36151bd13d2bba69f3533ee5f" category="summary">此解决方案为 NetApp 现场人员和客户提供了在公有云中使用基于 NetApp SnapCenter 图形用户界面的工具和 NetApp 存储服务 CVO 配置，操作数据库并将其迁移到混合云环境的说明和指导。</block>
  <block id="8269707c3930f3cbcd49193be33bc125" category="doc">TR-4908 ：《采用 SnapCenter 的混合云数据库解决方案概述》</block>
  <block id="7c4d94e1b484fb577b0aeafbec788ea1" category="paragraph">NetApp 公司 Alan Cao ， Felix Melligan</block>
  <block id="268a30b4d0cad062acd42967ce0fab50" category="paragraph">在以下使用情形下，此解决方案可为 NetApp 现场人员和客户提供有关使用基于 NetApp SnapCenter 图形用户界面的工具和公有云中的 NetApp 存储服务 CVO 配置，操作数据库以及将数据库迁移到混合云环境的说明和指导：</block>
  <block id="e88a2467c8ad8bf481854b1a745a875b" category="list-text">混合云中的数据库开发 / 测试操作</block>
  <block id="3c9552536897a076f75b078a5e2a3703" category="list-text">混合云中的数据库灾难恢复</block>
  <block id="a1ac690c228caf22f3228d3a4d8b5cab" category="paragraph">如今，出于性能，安全性和 / 或其他原因，许多企业数据库仍驻留在私有企业数据中心。这种混合云数据库解决方案支持企业在站点上运行主数据库，同时使用公有云进行开发 / 测试数据库操作以及灾难恢复，以降低许可和运营成本。</block>
  <block id="d900d125b3be40bcb79452d624c38561" category="paragraph">许多企业数据库，例如 Oracle ， SQL Server ， SAP HANA 等， 许可和运营成本高昂。许多客户会根据其数据库环境中的计算核心数量支付一次性许可证费用以及年度支持成本，无论这些核心是用于开发，测试，生产还是灾难恢复。其中许多环境可能无法在整个应用程序生命周期内得到充分利用。</block>
  <block id="1f49cc83c5c3735827e3353f320f5f7f" category="paragraph">这些解决方案为客户提供了一个选项，可通过将专用于开发，测试或灾难恢复的数据库环境迁移到云来降低可获得许可的核心数量。通过使用公共云规模，冗余，高可用性和基于消费的计费模式，许可和运营成本可以大幅节省，同时不会影响任何应用程序的可用性或可用性。</block>
  <block id="1a197dd926608052c7d43edfd09556fa" category="paragraph">除了潜在的数据库许可证成本节省之外， NetApp 基于容量的 CVO 许可证模式还可以帮助客户节省每 GB 的存储成本，同时还可以为客户提供竞争对手的存储服务所不具备的高数据库易管理性。下图显示了公有云中常见存储服务的存储成本比较。</block>
  <block id="810fba7bc9a3829eb522ebbc24326a08" category="paragraph"><block ref="810fba7bc9a3829eb522ebbc24326a08" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8e222eb27a0002f2960d1cf1e14bbf7d" category="paragraph">此解决方案表明，通过使用基于 SnapCenter 图形用户界面的软件工具和 NetApp SnapMirror 技术，可以轻松设置，实施和操作混合云数据库操作。</block>
  <block id="26cc8c416b5c9fd6bec3dc68e6f2f0c8" category="paragraph">以下视频演示了 SnapCenter 的实际应用：</block>
  <block id="edc6673fe24c4867029921bbe72f25cb" category="inline-link">使用 SnapCenter 在混合云中备份 Oracle 数据库</block>
  <block id="b10d6cd72b187359c3769fbf5ff10e4c" category="list-text"><block ref="0d160cec2141981b284cd9986321651e" category="inline-link-rx"></block></block>
  <block id="68d9033a95c0ed286c9b7e0e7454cd86" category="inline-link">SnapCenter - 将开发 / 测试克隆到 AWS 云以创建 数据库</block>
  <block id="da8d0116fa67f0499837675277668911" category="list-text"><block ref="da8d0116fa67f0499837675277668911" category="inline-link-rx"></block></block>
  <block id="3b04263461ad5a7b57aa872e093ec9fa" category="paragraph">值得注意的是，尽管本文档中的插图显示 CVO 是公有云中的目标存储实例，但解决方案也已通过全面验证，适用于 AWS 的新版本 FSX ONTAP 存储引擎已发布。</block>
  <block id="c5a6d2f45fc4352f35e95d92c804b6f2" category="paragraph">要自行测试解决方案和用例，可通过以下链接请求 NetApp 按需实验室 SL10680 ： https://labondemand.netapp.com/lod3/labtest/request?nodeid=68761&amp;destination=lod3/testlabs[TL_AWS_004 HCOD ： AWS - nw ， SnapCenter （ OnPrem ）^ 。</block>
  <block id="d31314285161c777a09609cc4fb2d07a" category="inline-link-macro">接下来：解决方案架构。</block>
  <block id="0830319fc7a6b051bbb0602c2778e67c" category="paragraph"><block ref="0830319fc7a6b051bbb0602c2778e67c" category="inline-link-macro-rx"></block></block>
  <block id="8f7280c86689be0a39cdf74aa673040d" category="summary">此解决方案在混合云环境中设计，用于支持内部生产数据库，这些数据库可以突发到所有常见的公有云中进行开发 / 测试和灾难恢复操作。</block>
  <block id="132f2888eb2cfdeef2730212f50c53e3" category="doc">SnapCenter 要求</block>
  <block id="e2a7d0854ef572e10255339732bb005d" category="inline-link-macro">上一篇：解决方案架构。</block>
  <block id="b10927905ed5379ba0d73333abdbe06d" category="paragraph"><block ref="b10927905ed5379ba0d73333abdbe06d" category="inline-link-macro-rx"></block></block>
  <block id="bc3a731533b339cd62ba7f7149313e3b" category="paragraph">此解决方案支持 SnapCenter 当前支持的所有数据库，但此处仅展示了 Oracle 和 SQL Server 数据库。此解决方案已通过虚拟化数据库工作负载的验证，但也支持裸机工作负载。</block>
  <block id="185b108b21dccef917f415be6026c91c" category="paragraph">我们假定生产数据库服务器托管在内部，并从 ONTAP 存储集群向数据库主机提供数据库卷。SnapCenter 软件安装在内部，用于将数据库备份和数据复制到云。建议使用 Ansible 控制器，但在与公有云中的备用灾难恢复实例或开发 / 测试实例同步的数据库部署自动化或操作系统内核和数据库配置时不需要此控制器。</block>
  <block id="47099d9ea153f8abfa5b6b70da253b3a" category="cell">* 内部部署 *</block>
  <block id="d36407241494bfc1e84614ad1b0dd6a4" category="cell">SnapCenter 支持的任何数据库和版本</block>
  <block id="8c8c8ca7a4093a1210412a3a5e5ad55f" category="cell">SnapCenter v4.4 或更高版本</block>
  <block id="9d9ebf67dab68c3c892de99e981039cf" category="cell">Ansible v2.09 或更高版本</block>
  <block id="62dd4f48e99b13c8a00fbaba684f9592" category="cell">ONTAP 集群 9.x</block>
  <block id="d0fdc58e1e05d6cbc8b1beb072bfa235" category="cell">已配置集群间 LIF</block>
  <block id="7135df562bcb25bfdf20e4317b923b88" category="cell">从内部到云 VPC 的连接（ VPN ，互连等）</block>
  <block id="8c27863f5ffd0e66a9304eaca2e47fde" category="cell">网络端口打开 - ssh 22 - TCP 8145 ， 8146 ， 10000 ， 11104 ， 11105</block>
  <block id="bcb9f3419f724f768e30956a4427261d" category="cell">* 云 - AWS*</block>
  <block id="61c90d44785278f980592f082ef500f1" category="inline-link">Cloud Manager Connector</block>
  <block id="97bc5062dceccb6827b1e3f0522035f0" category="cell"><block ref="97bc5062dceccb6827b1e3f0522035f0" category="inline-link-rx"></block></block>
  <block id="2f077494ceff1f33085c5b163c3673b3" category="cell"><block ref="2f077494ceff1f33085c5b163c3673b3" category="inline-link-rx"></block></block>
  <block id="59b2c9424963f98d73ec69c59dde54cb" category="cell">将数据库操作系统 EC2 实例与本地匹配</block>
  <block id="e26786a16da88ee829ab76c48fd3b003" category="cell">* 云 - Azure*</block>
  <block id="c2f8674b07907f393b67a3f9e98d3d56" category="cell"><block ref="c2f8674b07907f393b67a3f9e98d3d56" category="inline-link-rx"></block></block>
  <block id="a8dd724647657a383eb37fd8775ec1a9" category="cell"><block ref="a8dd724647657a383eb37fd8775ec1a9" category="inline-link-rx"></block></block>
  <block id="8bede1f0e559918be01f0646b75b4257" category="cell">将数据库操作系统 Azure 虚拟机与本地匹配</block>
  <block id="b2a454fb4ff03b84162c59d674fdae25" category="cell">* 云 - GCP*</block>
  <block id="af072236983e991ab34e773871b10236" category="cell"><block ref="af072236983e991ab34e773871b10236" category="inline-link-rx"></block></block>
  <block id="499477cf7953707f63a1b1313c8c065a" category="cell"><block ref="499477cf7953707f63a1b1313c8c065a" category="inline-link-rx"></block></block>
  <block id="2900c5e1ee191606f20d007194e70edf" category="cell">将数据库操作系统 Google 计算引擎实例与内部环境匹配</block>
  <block id="126b29c0beff0884077277115103a374" category="inline-link-macro">下一步：前提条件配置。</block>
  <block id="a6d027dea0e97ba248528210d36e5475" category="paragraph"><block ref="a6d027dea0e97ba248528210d36e5475" category="inline-link-macro-rx"></block></block>
  <block id="d0bb28dcc0cc1b523a41bbb46875db9e" category="summary">在安装 Cloud Manager Connector 和 Cloud Volumes ONTAP 并配置 SnapMirror 之前，我们必须为云环境做一些准备。此页面介绍了部署 Cloud Volumes ONTAP 时需要执行的工作以及注意事项。</block>
  <block id="8c6fb9ece3bad11d3e76d1344d9ed9ab" category="doc">公有云的前提条件</block>
  <block id="ac7eeb8ecebe00daa1fdf4fd06cc46de" category="inline-link-macro">先前版本：内部前提条件。</block>
  <block id="70ba5e430ac8eade85f8e01e51412fe4" category="paragraph"><block ref="70ba5e430ac8eade85f8e01e51412fe4" category="inline-link-macro-rx"></block></block>
  <block id="5a2798d22185b0e40ea502bbbb171d38" category="section-title">Cloud Manager 和 Cloud Volumes ONTAP 部署前提条件检查清单</block>
  <block id="1e094e6477be231098329b0096c7221f" category="list-text">NetApp Cloud Central 登录</block>
  <block id="b59e275c4ece2430dff67db92845ab7f" category="list-text">从 Web 浏览器到多个端点的网络访问</block>
  <block id="d2ed5c7ede8a1ce9d218ec60b0f03935" category="list-text">连接器的网络位置</block>
  <block id="0d07862d67097acd517fe27c0de099d7" category="list-text">云提供商权限</block>
  <block id="203802866ac2835e79bd76c94a3761c2" category="list-text">为单个服务建立网络</block>
  <block id="c4d5e1cbdfc47a0fdcb4a1a9dddd9e17" category="inline-link">云文档</block>
  <block id="1a22a3f7b690b2ec8919c8806633fb26" category="paragraph">有关入门内容的详细信息，请访问我们的<block ref="247d95fa755d21bb8790cc6d7a2fc412" category="inline-link-rx"></block>。</block>
  <block id="ea61e2c2ff507048203824add1eb7c21" category="section-title">注意事项</block>
  <block id="176ca67b83510a1281a4cfc749a3543a" category="section-title">1. 什么是 Cloud Manager 连接器？</block>
  <block id="1681641037afae45bd6074dcde9eed00" category="paragraph">在大多数情况下， Cloud Central 帐户管理员必须在云或内部网络中部署连接器。借助此连接器， Cloud Manager 可以管理公有云环境中的资源和流程。</block>
  <block id="8a78be5d168f00b24bf1625de3d5409c" category="paragraph">有关连接器的详细信息，请访问我们的<block ref="f39c14bbbbdd46ca70a63fb06046c789" category="inline-link-rx"></block>。</block>
  <block id="fcc2bf38b8157a22b5fc6975b7054acc" category="section-title">2. Cloud Volumes ONTAP 规模估算和架构</block>
  <block id="1c09b5154aa1f43cb9ebcbd6fea5eadc" category="paragraph">部署 Cloud Volumes ONTAP 时，您可以选择预定义的软件包或创建自己的配置。虽然其中许多值稍后可以无中断地进行更改，但在部署之前，需要根据要在云中部署的工作负载做出一些关键决策。</block>
  <block id="331ce28903aee0b30cd3c94e5483edf5" category="inline-link">CVO 规模估算工具</block>
  <block id="acaed5d74e38e1779b3831dcf51c7600" category="paragraph">每个云提供商都有不同的部署选项，几乎每个工作负载都有自己的独特属性。NetApp 具有<block ref="6a71e7e42ab9335484c5530029f79b92" category="inline-link-rx"></block> 这有助于根据容量和性能正确估算部署规模，但它是围绕一些基本概念构建的，值得考虑：</block>
  <block id="145c90afb7955854f2371e9decf3de9b" category="list-text">所需容量</block>
  <block id="f1521b662bf51f1af6c2d38bd610afae" category="list-text">云虚拟机的网络功能</block>
  <block id="f75d8ba5edc8017382d5df68baf9e30f" category="list-text">云存储的性能特征</block>
  <block id="af9d66ea3132fcfeb46b85557bc1af1b" category="paragraph">关键在于规划的配置不仅要满足当前的容量和性能要求，还要考虑未来的增长。这通常称为容量余量和性能余量。</block>
  <block id="4847e034bb0a55fcbc8a3380d6a3ab80" category="inline-link">AWS</block>
  <block id="3a580f142203677f1f0bc30898f63f53" category="inline-link">Azure 酒店</block>
  <block id="c731f72e1d22a7c5e01a7cb789a8885e" category="inline-link">GCP</block>
  <block id="180f0326dff3a03aecf5e184943d108a" category="paragraph">如果您希望了解更多信息，请阅读有关正确规划的文档<block ref="af5d70b69c3436f8bcf6f7b9579c4e83" category="inline-link-rx"></block>，<block ref="c2e85b51d3015b4c720388e64a3de23e" category="inline-link-rx"></block>，和<block ref="b1068926334a08925797774f64291db4" category="inline-link-rx"></block>。</block>
  <block id="c50ea1f0c6dcf02fbdd39e1e6b5befc2" category="section-title">3. 单节点还是高可用性？</block>
  <block id="eadb13b9c72271dbf16967e78059fea4" category="paragraph">在所有云中，您可以选择在单个节点或具有两个节点的集群模式高可用性对中部署 CVO 。根据使用情形，您可能希望部署一个节点以节省成本，或者部署一个 HA 对以提供进一步的可用性和冗余。</block>
  <block id="9cbd119b18cd836b6020fcfd3bfbe37f" category="paragraph">对于灾难恢复使用情形或为开发和测试而启动临时存储的情形，单个节点很常见，因为突然的区域或基础架构中断所造成的影响较小。但是，对于任何生产用例，如果数据仅位于一个位置，或者数据集必须具有更多冗余和可用性，则建议使用高可用性。</block>
  <block id="83d2ad0cda1f71c52878284cc7c1f713" category="paragraph">有关每个云高可用性版本的架构的详细信息，请访问的文档<block ref="4344469628657b2a6a0d147e5e6fbc9a" category="inline-link-rx"></block>，<block ref="28a8305eced80cb5b1351f5cffb268ae" category="inline-link-rx"></block> 和<block ref="1b945d178a8347e94e5c5456dc9e6db8" category="inline-link-rx"></block>。</block>
  <block id="f0d106c1997a933ecb53ee88e83670e7" category="inline-link-macro">下一步：入门概述。</block>
  <block id="fd43d07d375b44f30fde6995279b9265" category="paragraph"><block ref="fd43d07d375b44f30fde6995279b9265" category="inline-link-macro-rx"></block></block>
  <block id="a10998cc3e1dc7f2a013754d935c4f26" category="summary">NetApp SnapCenter 工具使用基于角色的访问控制（ Role-Based Access Control ， RBAC ）来管理用户资源访问和权限授予，而 SnapCenter 安装会创建预先填充的角色。您还可以根据需要或应用程序创建自定义角色。</block>
  <block id="7e3b07f9add4cd78ade3c795a52dfad2" category="doc">内部部署入门</block>
  <block id="32229cff9e0b41c513b3e3b9e19cec88" category="inline-link-macro">上一步：入门概述。</block>
  <block id="6be036b00e3db4159514171a989cacd6" category="paragraph"><block ref="6be036b00e3db4159514171a989cacd6" category="inline-link-macro-rx"></block></block>
  <block id="d30e54646ba482722332f48ddc22bde5" category="section-title">1. 在 SnapCenter 中设置数据库管理员用户</block>
  <block id="72f706d19ed0d09889b4fbc7578cd1a3" category="paragraph">NetApp SnapCenter 工具使用基于角色的访问控制（ Role-Based Access Control ， RBAC ）来管理用户资源访问和权限授予，而 SnapCenter 安装会创建预先填充的角色。您还可以根据需要或应用程序创建自定义角色。SnapCenter 支持的每个数据库平台都有一个专用的管理员用户 ID ，用于数据库备份，还原和 / 或灾难恢复，这一点很有意义。您也可以使用一个 ID 来管理所有数据库。在测试用例和演示中，我们分别为 Oracle 和 SQL Server 创建了一个专用管理员用户。</block>
  <block id="27733e8f07432bb94ac7621b28d3b2c8" category="paragraph">某些 SnapCenter 资源只能使用 SnapCenterAdmin 角色进行配置。然后，可以将资源分配给其他用户 ID 以进行访问。</block>
  <block id="64784aa3cec13e83af6e941f8489cf06" category="paragraph">在预安装和配置的内部 SnapCenter 环境中，以下任务可能已完成。如果不是，以下步骤将创建一个数据库管理员用户：</block>
  <block id="c8867eac833e7bb55520105b00139f1a" category="list-text">将管理员用户添加到 Windows Active Directory 。</block>
  <block id="dd3e743eb52cbe7c2b6104573a9767e0" category="list-text">使用 SnapCenterAdmin 角色授予的 ID 登录到 SnapCenter 。</block>
  <block id="a6bd76cb24271ba173d16f01bf4108d0" category="list-text">导航到设置和用户下的访问选项卡，然后单击添加以添加新用户。新用户 ID 将链接到步骤 1 中在 Windows Active Directory 中创建的管理员用户。。根据需要为用户分配适当的角色。根据需要向管理员用户分配资源。</block>
  <block id="6a67bb048bd14dd348cca7f81b62d699" category="paragraph"><block ref="6a67bb048bd14dd348cca7f81b62d699" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5d2c51e83f473f137861a132554d1916" category="section-title">2. SnapCenter 插件安装前提条件</block>
  <block id="7bd973d4d28d6fcf5f50379b33a49758" category="paragraph">SnapCenter 使用数据库主机上运行的插件代理执行备份，还原，克隆和其他功能。它会通过在设置和凭据选项卡下配置的凭据连接到数据库主机和数据库，以便安装插件和执行其他管理功能。根据目标主机类型（如 Linux 或 Windows ）以及数据库类型，有特定的权限要求。</block>
  <block id="c342f214098114b90cb67297a2ef5dc3" category="paragraph">在安装 SnapCenter 插件之前，必须配置数据库主机凭据。通常，您希望使用数据库主机上的管理员用户帐户作为插件安装的主机连接凭据。您还可以使用基于操作系统的身份验证为数据库访问授予相同的用户 ID 。另一方面，您还可以使用不同数据库用户 ID 进行数据库身份验证，以进行数据库管理访问。如果您决定使用基于操作系统的身份验证，则必须为操作系统管理员用户 ID 授予数据库访问权限。对于基于 Windows 域的 SQL Server 安装，可以使用域管理员帐户管理域中的所有 SQL Server 。</block>
  <block id="19df1192effefad83e57653fd3a47415" category="paragraph">适用于 SQL Server 的 Windows 主机：</block>
  <block id="e1cc3ce53d7753e33588201db3d3b147" category="list-text">如果使用 Windows 凭据进行身份验证，则必须在安装插件之前设置凭据。</block>
  <block id="a82f1290b72a26d654b93632a1ec50bb" category="list-text">如果使用 SQL Server 实例进行身份验证，则必须在安装插件后添加凭据。</block>
  <block id="63f74bef6650942c6795f96366a39e6a" category="list-text">如果在设置凭据时启用了 SQL 身份验证，则发现的实例或数据库将显示一个红色锁定图标。如果显示锁定图标，则必须指定实例或数据库凭据才能成功将实例或数据库添加到资源组。</block>
  <block id="b61dad3bbbf3270bf2dada5c2ac1f775" category="list-text">满足以下条件时，必须将凭据分配给不具有 sysadmin 访问权限的 RBAC 用户：</block>
  <block id="34cefb5a19894e4f9b1b068544c0f591" category="list-text">此凭据将分配给 SQL 实例。</block>
  <block id="6707464a5871a6aa26dcf785bea4052c" category="list-text">SQL 实例或主机已分配给 RBAC 用户。</block>
  <block id="4bc8aac02ff00d874ad8b4ccd4d745ed" category="list-text">RBAC DB 管理员用户必须同时具有资源组和备份权限。</block>
  <block id="9198b455aa67840c7a69c7a54e94301a" category="paragraph">适用于 Oracle 的 UNIX 主机：</block>
  <block id="71d53e54a48cfe7de69347bcd854ef30" category="list-text">您必须已通过编辑 sshd.conf 并重新启动 sshd 服务为 root 或非 root 用户启用基于密码的 SSH 连接。默认情况下， AWS 实例上基于密码的 SSH 身份验证处于关闭状态。</block>
  <block id="efa873f0464a14d54b066f475ad74480" category="list-text">为非 root 用户配置 sudo 权限以安装和启动插件过程。安装插件后，这些进程将以有效 root 用户身份运行。</block>
  <block id="82a2174029175f8fbc3f52fea4e18c84" category="list-text">使用 Linux 身份验证模式为安装用户创建凭据。</block>
  <block id="86b3cc44ebd8e0a9185e48c4f22e81e9" category="list-text">必须在 Linux 主机上安装 Java 1.8.x （ 64 位）。</block>
  <block id="c1e8851d10ecc615c47a47f704569d29" category="list-text">安装 Oracle 数据库插件还会安装适用于 Unix 的 SnapCenter 插件。</block>
  <block id="7efb27733d1fb21feae901a41580dced" category="section-title">3. SnapCenter 主机插件安装</block>
  <block id="37a5c714defad8175b81b4d49eb0544c" category="admonition">在尝试在云数据库服务器实例上安装 SnapCenter 插件之前，请确保已完成计算实例部署的相关云部分中列出的所有配置步骤。</block>
  <block id="283aa502c28fe1c9ff8dadd1700955fc" category="paragraph">以下步骤说明了在主机上安装 SnapCenter 插件时如何将数据库主机添加到 SnapCenter 中。操作步骤适用场景同时添加内部主机和云主机。以下演示将添加驻留在 AWS 中的 Windows 或 Linux 主机。</block>
  <block id="81ed46777c39c0d0618953601572fc27" category="section-title">配置 SnapCenter VMware 全局设置</block>
  <block id="2aa8a40dbbfb6b52621408c81aa5373c" category="paragraph">导航到设置 &gt; 全局设置。在 Hypervisor Settings 下选择 "VM have iSCSI direct attached disks or NFS for all the hosts" ，然后单击 Update 。</block>
  <block id="4c120331c9eea223eee675b6588d76ee" category="paragraph"><block ref="4c120331c9eea223eee675b6588d76ee" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1f63a469619859e4cfab52fd63523aca" category="section-title">添加 Windows 主机并在主机上安装插件</block>
  <block id="997da6deedab4436b559e3a8f7f05a2e" category="list-text">使用具有 SnapCenterAdmin 权限的用户 ID 登录到 SnapCenter 。</block>
  <block id="97e7f600216a2e9ae18423777e11ad9c" category="list-text">单击左侧菜单中的主机选项卡，然后单击添加以打开添加主机工作流。</block>
  <block id="35314bae57d7ff62ab36156211c1cc71" category="list-text">选择 Windows 作为主机类型；主机名可以是主机名或 IP 地址。主机名必须从 SnapCenter 主机解析为正确的主机 IP 地址。选择在步骤 2 中创建的主机凭据。选择 Microsoft Windows 和 Microsoft SQL Server 作为要安装的插件软件包。</block>
  <block id="b9740ae9eb2ef0fe27e4c541d06a961f" category="paragraph"><block ref="b9740ae9eb2ef0fe27e4c541d06a961f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="31efcd689861354799bb539ab2571ebe" category="list-text">在 Windows 主机上安装此插件后，其整体状态将显示为 "Configure log directory" 。</block>
  <block id="0e15e25c5ee21469698f72cf35caa7bf" category="paragraph"><block ref="0e15e25c5ee21469698f72cf35caa7bf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d2aeaa4503c6d72513c0dbe0f205ee3b" category="list-text">单击主机名以打开 SQL Server 日志目录配置。</block>
  <block id="6fc78660a180b747f815b878c89e3cb0" category="paragraph"><block ref="6fc78660a180b747f815b878c89e3cb0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8cb2b40646a77b4f044e7fa04ea20306" category="list-text">单击 " 配置日志目录 " 以打开 " 为 SQL Server 配置插件 " 。</block>
  <block id="5e3bf9ddacfcad12c5cf63614a869ad4" category="paragraph"><block ref="5e3bf9ddacfcad12c5cf63614a869ad4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f7143b5d162d385dfb1af07f61c59f65" category="list-text">单击浏览以发现 NetApp 存储，以便可以设置日志目录； SnapCenter 使用此日志目录来汇总 SQL Server 事务日志文件。然后单击保存。</block>
  <block id="50eb49de485da684ac1556947ac46aba" category="paragraph"><block ref="50eb49de485da684ac1556947ac46aba" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b0d88588bdb07dd412a4ba1d08348b29" category="admonition">要发现配置到数据库主机的 NetApp 存储，必须将存储（内部或 CVO ）添加到 SnapCenter 中，如 CVO 的步骤 6 中所示。</block>
  <block id="d744af12906d55ab51aa932b3ffcd121" category="list-text">配置日志目录后， Windows 主机插件的整体状态将更改为正在运行。</block>
  <block id="3f7bfffdbb76fd620b0a31d300415528" category="paragraph"><block ref="3f7bfffdbb76fd620b0a31d300415528" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f41517f2e270a138f4ae92988a4cbdd2" category="list-text">要将主机分配给数据库管理用户 ID ，请导航到 " 设置和用户 " 下的 " 访问 " 选项卡，单击数据库管理用户 ID （在我们的情况下，是指需要将主机分配到的 sqldba ），然后单击 " 保存 " 完成主机资源分配。</block>
  <block id="b21f826d2ea15e58b9c8aadccb566cfe" category="paragraph"><block ref="b21f826d2ea15e58b9c8aadccb566cfe" category="inline-image-macro-rx" type="image"></block></block>
  <block id="021de72edbb0f174ffe954c5e5367b80" category="paragraph"><block ref="021de72edbb0f174ffe954c5e5367b80" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e2fe19c733a6342990513e02264db163" category="section-title">添加 Unix 主机并在主机上安装插件</block>
  <block id="6a0f36be9f208d20c3c1145c3a09b876" category="list-text">单击左侧菜单中的主机选项卡，然后单击添加以打开添加主机工作流。</block>
  <block id="dd8c6d773e31c4254eb58b4b5e2ae1be" category="list-text">选择 Linux 作为主机类型。主机名可以是主机名或 IP 地址。但是，必须解析主机名，以更正 SnapCenter 主机的主机 IP 地址。选择在步骤 2 中创建的主机凭据。主机凭据需要 sudo 权限。选中 Oracle Database 作为要安装的插件，该插件将同时安装 Oracle 和 Linux 主机插件。</block>
  <block id="7d4cdef2144fd1466fae298bd27476d1" category="paragraph"><block ref="7d4cdef2144fd1466fae298bd27476d1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="711730391561a228d41f7fede13ca6e8" category="list-text">单击更多选项并选择 " 跳过预安装检查 " 。 系统会提示您确认是否跳过预安装检查。单击是，然后单击保存。</block>
  <block id="3511b18d059f3f300b5fbe827f7273ac" category="paragraph"><block ref="3511b18d059f3f300b5fbe827f7273ac" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e095a093138c6b1968d313d5f799255a" category="list-text">单击提交以开始安装插件。系统将提示您确认指纹，如下所示。</block>
  <block id="146c4805beb9310e4554842f776cb88b" category="paragraph"><block ref="146c4805beb9310e4554842f776cb88b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="53dcda6f2c03efbe73ae5eb311852a8d" category="list-text">SnapCenter 将执行主机验证和注册，然后该插件将安装在 Linux 主机上。状态将从 " 正在安装插件 " 更改为 " 正在运行 " 。</block>
  <block id="2636403a6c50748422736d9d84a3e4be" category="paragraph"><block ref="2636403a6c50748422736d9d84a3e4be" category="inline-image-macro-rx" type="image"></block></block>
  <block id="33ea9d9313933c68d640ebb655ec43dc" category="list-text">将新添加的主机分配给正确的数据库管理用户 ID （在我们的案例中为 oradba ）。</block>
  <block id="2815d2f5e3b49d9332a320ec997271dd" category="paragraph"><block ref="2815d2f5e3b49d9332a320ec997271dd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="eb6a9566891a97e0f8fbaefbd4878bdd" category="paragraph"><block ref="eb6a9566891a97e0f8fbaefbd4878bdd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2b4c839521fd41e845e6e8c3158b809b" category="section-title">4. 数据库资源发现</block>
  <block id="45e46a9524f23884445bf542bf464b93" category="paragraph">成功安装插件后，可以立即发现主机上的数据库资源。单击左侧菜单中的 "Resources" 选项卡。根据数据库平台的类型，可以使用多种视图，例如数据库，资源组等。如果未发现和显示主机上的资源，则可能需要单击刷新资源选项卡。</block>
  <block id="79fca6395972f8079320d3229822e491" category="paragraph"><block ref="79fca6395972f8079320d3229822e491" category="inline-image-macro-rx" type="image"></block></block>
  <block id="66789731e61fd3d4b6024e5fcb0945e1" category="paragraph">首次发现数据库时，整体状态显示为 " 不受保护 " 。 上一屏幕截图显示了一个尚未受备份策略保护的 Oracle 数据库。</block>
  <block id="68148a1249ca9110d03c698ae152932a" category="paragraph">设置备份配置或策略并执行备份后，数据库的整体状态会将备份状态显示为 " 备份成功 " ，并显示上次备份的时间戳。以下屏幕截图显示了 SQL Server 用户数据库的备份状态。</block>
  <block id="2cdfb74ac3aabfde7e1fae347ed5afc7" category="paragraph"><block ref="2cdfb74ac3aabfde7e1fae347ed5afc7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a9c9616324bc00808729d46fba94ad75" category="paragraph">如果未正确设置数据库访问凭据，则红色锁定按钮表示数据库不可访问。例如，如果 Windows 凭据不具有对数据库实例的 sysadmin 访问权限，则必须重新配置数据库凭据以解除红色锁定。</block>
  <block id="dd4606e87689c86d82a694412c5654a5" category="paragraph"><block ref="dd4606e87689c86d82a694412c5654a5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="884f07ad394b89553e7d6d1f90fae584" category="paragraph"><block ref="884f07ad394b89553e7d6d1f90fae584" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0024854a814ddd68bcf3907357c46bc2" category="paragraph">在 Windows 级别或数据库级别配置相应的凭据后，红色锁定将消失，并收集和查看 SQL Server 类型信息。</block>
  <block id="95c88e08b2fd416b4514ce2454af2038" category="paragraph"><block ref="95c88e08b2fd416b4514ce2454af2038" category="inline-image-macro-rx" type="image"></block></block>
  <block id="864f4d2595d06e5e8b46b08edb3899e6" category="section-title">5. 设置存储集群对等和数据库卷复制</block>
  <block id="785196ec55a9e713ad1a4f962baa31dd" category="paragraph">为了使用公有云作为目标目标目标来保护内部数据库数据，使用 NetApp SnapMirror 技术将内部 ONTAP 集群数据库卷复制到云 CVO 。然后，可以克隆复制的目标卷以进行开发 / 运营或灾难恢复。通过以下高级步骤，您可以设置集群对等和数据库卷复制。</block>
  <block id="1f1927293f04e4cf0fc91a7e389612eb" category="list-text">在内部集群和 CVO 集群实例上配置集群间 LIF 以建立集群对等关系。此步骤可使用 ONTAP 系统管理器执行。默认 CVO 部署会自动配置集群间 LIF 。</block>
  <block id="9547803d96e78bbc38305e6300f7a800" category="paragraph">内部集群：</block>
  <block id="2ef6da9ba547bc5361495650ac3fc992" category="paragraph"><block ref="2ef6da9ba547bc5361495650ac3fc992" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f3c5b3e342f57b792e2263e69e41677a" category="paragraph">目标 CVO 集群：</block>
  <block id="d94586e4cd285619a4f1ef0e06636dd1" category="paragraph"><block ref="d94586e4cd285619a4f1ef0e06636dd1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="79d372933b80ed2ca8ca14d8458828af" category="inline-link-macro">入门— AWS 公有云</block>
  <block id="6a87ea28950f9209121872c9d2690049" category="list-text">配置集群间 LIF 后，可以使用 NetApp Cloud Manager 中的拖放功能设置集群对等和卷复制。请参见 <block ref="28783e162df4af496939d6f9f6f31d5f" category="inline-link-macro-rx"></block> 了解详细信息。</block>
  <block id="d1567c6c8f0752cbc7deb6d9f639ba12" category="paragraph">或者，也可以使用 ONTAP 系统管理器执行集群对等和数据库卷复制，如下所示：</block>
  <block id="494c0b53ff31502c0c1105881e2e389a" category="list-text">登录到 ONTAP 系统管理器。导航到集群 &gt; 设置，然后单击对等集群，以便与云中的 CVO 实例建立集群对等关系。</block>
  <block id="ba770272a0f634af47a5788634e80d54" category="paragraph"><block ref="ba770272a0f634af47a5788634e80d54" category="inline-image-macro-rx" type="image"></block></block>
  <block id="54de72c782c4b4ccc7f2914a858d5356" category="list-text">转到卷选项卡。选择要复制的数据库卷，然后单击保护。</block>
  <block id="32588f46a47679329b03194fd2e9084f" category="paragraph"><block ref="32588f46a47679329b03194fd2e9084f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b0aace069b478e8b2b0753f855f2be94" category="list-text">将保护策略设置为异步。选择目标集群和 Storage SVM 。</block>
  <block id="7dbec53b432ae53f7e454836ad0dad00" category="paragraph"><block ref="7dbec53b432ae53f7e454836ad0dad00" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1a2a64fe8af0790615a9344069794e2e" category="list-text">验证卷是否已在源和目标之间同步，以及复制关系是否运行正常。</block>
  <block id="97edcd79a5e90d9caafde40fcb586185" category="paragraph"><block ref="97edcd79a5e90d9caafde40fcb586185" category="inline-image-macro-rx" type="image"></block></block>
  <block id="36097c4ad6058de288de8992f89adbb8" category="section-title">6. 将 CVO 数据库存储 SVM 添加到 SnapCenter</block>
  <block id="ebcf85d67af3f672ade8bd7b224a8a2b" category="list-text">从菜单中单击存储系统选项卡，然后单击新建将托管复制的目标数据库卷的 CVO 存储 SVM 添加到 SnapCenter 。在存储系统字段中输入集群管理 IP ，然后输入相应的用户名和密码。</block>
  <block id="41e9c94a0c8cb108959099b8f87adb82" category="paragraph"><block ref="41e9c94a0c8cb108959099b8f87adb82" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a27406b63f99780f65572b95f2f72348" category="list-text">单击更多选项以打开其他存储配置选项。在平台字段中，选择 Cloud Volumes ONTAP ，选中二级，然后单击保存。</block>
  <block id="8a60464ab91cb2499a03c722639c3aee" category="paragraph"><block ref="8a60464ab91cb2499a03c722639c3aee" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b474a0a2de59b8e3013112beb48af7b7" category="list-text">将存储系统分配给 SnapCenter 数据库管理用户 ID ，如所示 <block ref="8a46cbc3838a53b9205abb25a577bbc8" category="inline-xref-macro-rx"></block>。</block>
  <block id="8691f91a1fe977fd76aa5e53b0f71034" category="paragraph"><block ref="8691f91a1fe977fd76aa5e53b0f71034" category="inline-image-macro-rx" type="image"></block></block>
  <block id="39ec95149453e7bb6b73f1c03228e85c" category="section-title">7. 在 SnapCenter 中设置数据库备份策略</block>
  <block id="37d9f685e375f77a2231e13c88ccc606" category="paragraph">以下过程演示了如何创建完整的数据库或日志文件备份策略。然后，可以实施此策略来保护数据库资源。恢复点目标（ RPO ）或恢复时间目标（ RTO ）决定了数据库和 / 或日志备份的频率。</block>
  <block id="739184f368f13e142dd034fcdc853594" category="section-title">为 Oracle 创建完整的数据库备份策略</block>
  <block id="94b39254a7aba068b68fec64f6331b0b" category="list-text">以数据库管理用户 ID 身份登录到 SnapCenter ，单击设置，然后单击策略。</block>
  <block id="90affc4ffbb767a3d1272be5e1ad8f0c" category="paragraph"><block ref="90affc4ffbb767a3d1272be5e1ad8f0c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a1d144b8c78fc8541b57aa9f0ca863a6" category="list-text">单击 " 新建 " 启动新的备份策略创建工作流或选择要修改的现有策略。</block>
  <block id="29618ae8465c694d23d68e171fe9d905" category="paragraph"><block ref="29618ae8465c694d23d68e171fe9d905" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8c9dac29c26006ce512153a9bdabcc95" category="list-text">选择备份类型和计划频率。</block>
  <block id="10e2791563a2891fd7e4e68c5673671b" category="paragraph"><block ref="10e2791563a2891fd7e4e68c5673671b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4df94ad44381c9fb7fe2f8d01dcd16d8" category="list-text">设置备份保留设置。此选项用于定义要保留的完整数据库备份副本数。</block>
  <block id="6dcc4aa023085480846059b6b1d5e5b3" category="paragraph"><block ref="6dcc4aa023085480846059b6b1d5e5b3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fd634020906b35a41e0ba633eddeb96a" category="list-text">选择二级复制选项以将要复制到云中二级位置的本地主快照备份推送到云中。</block>
  <block id="25ef9e4c73a2da8519e8d232b6a95fcb" category="paragraph"><block ref="25ef9e4c73a2da8519e8d232b6a95fcb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b2e3af55a4355bc46e91425ac5701174" category="list-text">指定在备份运行前后运行的任何可选脚本。</block>
  <block id="326d50fae4f713cebe97d0f6bb23a2d9" category="paragraph"><block ref="326d50fae4f713cebe97d0f6bb23a2d9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cd009bc210e371d36d466b592179e883" category="list-text">根据需要运行备份验证。</block>
  <block id="0b132e3438f5cf31e90f45e79710f0b9" category="paragraph"><block ref="0b132e3438f5cf31e90f45e79710f0b9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dba73d3ec3f929ff18665087076291ac" category="list-text">摘要</block>
  <block id="4f92fa99421beeb9f74ee7613de52706" category="paragraph"><block ref="4f92fa99421beeb9f74ee7613de52706" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b3594f2789840eda9633139ca530384a" category="section-title">为 Oracle 创建数据库日志备份策略</block>
  <block id="be763ec2afcb0358426bb0abcae4dd60" category="list-text">使用数据库管理用户 ID 登录到 SnapCenter ，单击设置，然后单击策略。</block>
  <block id="b0e663a3d363868d6c71ab9ec37940c6" category="list-text">单击 " 新建 " 启动新的备份策略创建工作流，或者选择现有策略进行修改。</block>
  <block id="fa2687f5a5fbedb43745f649a2e11950" category="paragraph"><block ref="fa2687f5a5fbedb43745f649a2e11950" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0938f6574b189bdac27cdd92abc521c5" category="paragraph"><block ref="0938f6574b189bdac27cdd92abc521c5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="59480846ec23463481d361bf3026235e" category="list-text">设置日志保留期限。</block>
  <block id="c8df578fbf71151edda735bc81e8511c" category="paragraph"><block ref="c8df578fbf71151edda735bc81e8511c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="04ba33c0584145006ca637b4556aa919" category="list-text">启用复制到公有云中的二级位置。</block>
  <block id="fdbe42a8484a3e984e4aacb6a31cccef" category="paragraph"><block ref="fdbe42a8484a3e984e4aacb6a31cccef" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ab9406cbd3a8f082700523fdac8a0c1d" category="list-text">指定在日志备份前后运行的任何可选脚本。</block>
  <block id="5b04423521e56720f1f5d0291db584ef" category="paragraph"><block ref="5b04423521e56720f1f5d0291db584ef" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f4b55e05a9ae89fe14377b98bc8a8166" category="list-text">指定任何备份验证脚本。</block>
  <block id="c4dc219fd9466ab86c22ac8e859384ea" category="paragraph"><block ref="c4dc219fd9466ab86c22ac8e859384ea" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2564f2d008c62044da1b7f7397252edf" category="paragraph"><block ref="2564f2d008c62044da1b7f7397252edf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fe147647227dfec6603bc76daf30463e" category="section-title">为 SQL 创建完整的数据库备份策略</block>
  <block id="fa726a7e85857bee77ace96dcf7e5316" category="paragraph"><block ref="fa726a7e85857bee77ace96dcf7e5316" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ce2168daff0c9b1a74e59d999d6ead44" category="paragraph"><block ref="ce2168daff0c9b1a74e59d999d6ead44" category="inline-image-macro-rx" type="image"></block></block>
  <block id="30637cfd5a5cc820d6bc4116fccfff7e" category="list-text">定义备份选项和计划频率。对于配置了可用性组的 SQL Server ，可以设置首选备份副本。</block>
  <block id="b520dcfd25c4b29395bb9b12ac643bb2" category="paragraph"><block ref="b520dcfd25c4b29395bb9b12ac643bb2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5f74ada8393aecd40e892de04b5b30f8" category="list-text">设置备份保留期限。</block>
  <block id="4ade95d8122243cda1455b04504d3367" category="paragraph"><block ref="4ade95d8122243cda1455b04504d3367" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f1a67a80a7ad9403781b210983ea778d" category="list-text">启用备份副本复制到云中的二级位置。</block>
  <block id="caf8324e53d9bb41b3ecb64f3e3b7dda" category="paragraph"><block ref="caf8324e53d9bb41b3ecb64f3e3b7dda" category="inline-image-macro-rx" type="image"></block></block>
  <block id="17b7b360fc2163537795a34cd8d14d6a" category="list-text">指定在备份作业之前或之后运行的任何可选脚本。</block>
  <block id="abbc7de57d2b0d5d1c462b7513199253" category="paragraph"><block ref="abbc7de57d2b0d5d1c462b7513199253" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fb836d972496d965dd2170ed1480917b" category="list-text">指定用于运行备份验证的选项。</block>
  <block id="b4dd01df6b310e6b0814328a86bd6ed6" category="paragraph"><block ref="b4dd01df6b310e6b0814328a86bd6ed6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="67cfb8548ccb78172db31d7af494fa02" category="paragraph"><block ref="67cfb8548ccb78172db31d7af494fa02" category="inline-image-macro-rx" type="image"></block></block>
  <block id="02b67ed2348002e614d5a35151577632" category="section-title">为 SQL 创建数据库日志备份策略。</block>
  <block id="b405195aec7cf62440373fcdc490dec6" category="list-text">使用数据库管理用户 ID 登录到 SnapCenter ，单击 " 设置 "&gt;" 策略 " ，然后单击 " 新建 " 以启动新的策略创建工作流。</block>
  <block id="c236030076b67936a7c1c11d49408838" category="paragraph"><block ref="c236030076b67936a7c1c11d49408838" category="inline-image-macro-rx" type="image"></block></block>
  <block id="acdaf46fc90606d68f3f2b52cca5e95b" category="list-text">定义日志备份选项和计划频率。对于配置了可用性组的 SQL Server ，可以设置首选备份副本。</block>
  <block id="19ab604707a9384fa4883cedd5a525f9" category="paragraph"><block ref="19ab604707a9384fa4883cedd5a525f9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="da00d968a5d810d846ddc815b8f405a4" category="list-text">SQL Server 数据备份策略定义日志备份保留；接受此处的默认值。</block>
  <block id="783828e5ae6dcfd713966e7301831296" category="paragraph"><block ref="783828e5ae6dcfd713966e7301831296" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d04d89062d3ed67bbc9c4aee35bdba7f" category="list-text">启用日志备份复制到云中的二级卷。</block>
  <block id="b1968bd01bc5c402dcd27c99ce6326cc" category="paragraph"><block ref="b1968bd01bc5c402dcd27c99ce6326cc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="30c50cf9d6726341a29a3caf97dc84e8" category="paragraph"><block ref="30c50cf9d6726341a29a3caf97dc84e8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c4d9b291b4ffaddb50c99313e530077f" category="paragraph"><block ref="c4d9b291b4ffaddb50c99313e530077f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f28f6c36698b3a4cd47cbeead15eddf2" category="section-title">8. 实施备份策略以保护数据库</block>
  <block id="37b889cc1b57f66ae9018b6eacb891ba" category="paragraph">SnapCenter 使用资源组以数据库资源的逻辑分组形式备份数据库，例如，服务器上托管的多个数据库，共享相同存储卷的数据库，支持业务应用程序的多个数据库等。保护单个数据库会创建自己的资源组。以下过程演示如何实施第 7 节中创建的备份策略来保护 Oracle 和 SQL Server 数据库。</block>
  <block id="0603dbbe978e4cd3ee1c45ba96a1aa6f" category="section-title">创建一个资源组以对 Oracle 进行完整备份</block>
  <block id="5f4e02f34bcd7993867c4b3297a171d0" category="list-text">使用数据库管理用户 ID 登录到 SnapCenter ，然后导航到资源选项卡。在视图下拉列表中，选择数据库或资源组以启动资源组创建工作流。</block>
  <block id="6eac6f96ac8d968dfec8184d16a73d43" category="paragraph"><block ref="6eac6f96ac8d968dfec8184d16a73d43" category="inline-image-macro-rx" type="image"></block></block>
  <block id="98dcf41bcde9cb6c4235a6a7dfe69346" category="list-text">提供资源组的名称和标记。您可以为 Snapshot 副本定义命名格式，并绕过冗余归档日志目标（如果已配置）。</block>
  <block id="a75ba82042ae54dd2e68cf6c7a26614c" category="paragraph"><block ref="a75ba82042ae54dd2e68cf6c7a26614c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0cd85a82e6f02b779006b158b9c5f828" category="list-text">将数据库资源添加到资源组。</block>
  <block id="3836a8be1f86b6658a7fa6b180e4a72d" category="paragraph"><block ref="3836a8be1f86b6658a7fa6b180e4a72d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cee52cb6702e7590fbef45eccc8fb2df" category="list-text">从下拉列表中选择在第 7 节中创建的完整备份策略。</block>
  <block id="af900bffdda986bc1db955ae78832742" category="paragraph"><block ref="af900bffdda986bc1db955ae78832742" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8fe872cd84ea2e9051770379e63f9caf" category="list-text">单击（ + ）号可配置所需的备份计划。</block>
  <block id="9da504fd8ab60cfcc873608530cf5d56" category="paragraph"><block ref="9da504fd8ab60cfcc873608530cf5d56" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fdc27a4c5d48dbfc04f81ecac85acd64" category="list-text">单击 Load Locators 以加载源卷和目标卷。</block>
  <block id="7242164857e43688f8a7bec97559c36e" category="paragraph"><block ref="7242164857e43688f8a7bec97559c36e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b612dc8868902cf8fbf2b1024ad94e65" category="paragraph"><block ref="b612dc8868902cf8fbf2b1024ad94e65" category="inline-image-macro-rx" type="image"></block></block>
  <block id="95633243861715786b64e1554b629435" category="paragraph"><block ref="95633243861715786b64e1554b629435" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6f7192b9766e6f09c261f3ca3d3bddc8" category="section-title">为 Oracle 的日志备份创建一个资源组</block>
  <block id="1a0cd5de7c84ddbf632838dd9f510d37" category="paragraph"><block ref="1a0cd5de7c84ddbf632838dd9f510d37" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f0ad3d9537c50952c04b71be3f9d4579" category="paragraph"><block ref="f0ad3d9537c50952c04b71be3f9d4579" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c33c31714f671e112fbe52b660d3e7a4" category="paragraph"><block ref="c33c31714f671e112fbe52b660d3e7a4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="03955b73285eab0d68e90c627da9726d" category="list-text">从下拉列表中选择在第 7 节中创建的日志备份策略。</block>
  <block id="6286629570d2ca91cf6860e7da6e9073" category="paragraph"><block ref="6286629570d2ca91cf6860e7da6e9073" category="inline-image-macro-rx" type="image"></block></block>
  <block id="88c73129e9a418955658ce5c48d9d8b5" category="list-text">单击（ + ）号可配置所需的备份计划。</block>
  <block id="8cdd30063d988671ffa9240fe171b1ce" category="paragraph"><block ref="8cdd30063d988671ffa9240fe171b1ce" category="inline-image-macro-rx" type="image"></block></block>
  <block id="eacfd6f10777b8dfb41199e4d4dfa915" category="list-text">如果配置了备份验证，则会显示在此处。</block>
  <block id="69911c1794125b768effca94c8153987" category="paragraph"><block ref="69911c1794125b768effca94c8153987" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1a27fac4b1d49d5468930a56c3a6de56" category="list-text">如果需要，配置用于电子邮件通知的 SMTP 服务器。</block>
  <block id="fd540644538dcedf1f6543455447728f" category="paragraph"><block ref="fd540644538dcedf1f6543455447728f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="554dbe35f6afa38e8232497f5d05d1c1" category="paragraph"><block ref="554dbe35f6afa38e8232497f5d05d1c1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cf688c7a95f421447e84a47fd03f3aa2" category="section-title">创建用于 SQL Server 完整备份的资源组</block>
  <block id="d08ef097ee33c4a3506183adeb51c5e7" category="list-text">使用数据库管理用户 ID 登录到 SnapCenter ，然后导航到资源选项卡。在视图下拉列表中，选择数据库或资源组以启动资源组创建工作流。提供资源组的名称和标记。您可以为 Snapshot 副本定义命名格式。</block>
  <block id="87d2630813d214672697efc01974d64e" category="paragraph"><block ref="87d2630813d214672697efc01974d64e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ec1ace5324d60cb3faa1863efd675149" category="list-text">选择要备份的数据库资源。</block>
  <block id="15330fe5b8f32032bd3b30c091d7dc4b" category="paragraph"><block ref="15330fe5b8f32032bd3b30c091d7dc4b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2fc1974f486effa4a60bf216e63a88d5" category="list-text">选择在第 7 节中创建的完整 SQL 备份策略。</block>
  <block id="dc34bd5487acb7fcd3dcc3f23b2bbc5e" category="paragraph"><block ref="dc34bd5487acb7fcd3dcc3f23b2bbc5e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="12b70beeb570488ba753a620378cacd8" category="list-text">添加准确的备份时间以及频率。</block>
  <block id="8fa0a3897bc03e9b1653d17308464031" category="paragraph"><block ref="8fa0a3897bc03e9b1653d17308464031" category="inline-image-macro-rx" type="image"></block></block>
  <block id="49252579bd8140847f4bbac20ef89b07" category="list-text">如果要执行备份验证，请在二级系统上为备份选择验证服务器。单击加载定位器以填充二级存储位置。</block>
  <block id="355e5eb56524b7365674014ea5868ee6" category="paragraph"><block ref="355e5eb56524b7365674014ea5868ee6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="19e819eadb96ee5769ff4c6309352a62" category="paragraph"><block ref="19e819eadb96ee5769ff4c6309352a62" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0be278d93ec2e64895e31bf440c54b98" category="paragraph"><block ref="0be278d93ec2e64895e31bf440c54b98" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b4dd921984d3a8a89e7df5c97875b923" category="section-title">为 SQL Server 的日志备份创建一个资源组</block>
  <block id="4e94ca9b995e68691b4e67b82b9f5bce" category="list-text">使用数据库管理用户 ID 登录到 SnapCenter ，然后导航到资源选项卡。在视图下拉列表中，选择数据库或资源组以启动资源组创建工作流。提供资源组的名称和标记。您可以为 Snapshot 副本定义命名格式。</block>
  <block id="4e71263f0aec815017fd21a22ddb87d6" category="paragraph"><block ref="4e71263f0aec815017fd21a22ddb87d6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="013faf9f6cde83814469c6d583e10702" category="paragraph"><block ref="013faf9f6cde83814469c6d583e10702" category="inline-image-macro-rx" type="image"></block></block>
  <block id="23e15d7c127e66b1da1d72072a29e9eb" category="list-text">选择在第 7 节中创建的 SQL 日志备份策略。</block>
  <block id="52a8553e4c33eb8353d56286d3845b28" category="paragraph"><block ref="52a8553e4c33eb8353d56286d3845b28" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7e7cac98c16b45d7e4ebec8786b8fda1" category="list-text">添加准确的备份时间以及频率。</block>
  <block id="acfaadb1bfb8a5c0a2c39c1f64291ea3" category="paragraph"><block ref="acfaadb1bfb8a5c0a2c39c1f64291ea3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="68398b6746dde91649e96505d97acc40" category="list-text">如果要执行备份验证，请在二级系统上为备份选择验证服务器。单击负载定位器以填充二级存储位置。</block>
  <block id="3bde998a2436b40589b20d91a713d3ee" category="paragraph"><block ref="3bde998a2436b40589b20d91a713d3ee" category="inline-image-macro-rx" type="image"></block></block>
  <block id="80000e8cb7742af4686df786fdf38249" category="paragraph"><block ref="80000e8cb7742af4686df786fdf38249" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d32fb038efa6b409f8dedd0e02a10f26" category="paragraph"><block ref="d32fb038efa6b409f8dedd0e02a10f26" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a9c72629a46c2e88cf7f6a012167bb16" category="section-title">9. 验证备份</block>
  <block id="d1c55c296cbdaa8d88eda765a6158b62" category="paragraph">创建数据库备份资源组以保护数据库资源后，备份作业将根据预定义的计划运行。在监控选项卡下检查作业执行状态。</block>
  <block id="5f9af2a4e435e2b39c27f43b580d6d20" category="paragraph"><block ref="5f9af2a4e435e2b39c27f43b580d6d20" category="inline-image-macro-rx" type="image"></block></block>
  <block id="57882e224a8cbe8f694da9b1d8fa503e" category="paragraph">转到资源选项卡，单击数据库名称以查看数据库备份的详细信息，然后在本地副本和镜像副本之间切换，以验证 Snapshot 备份是否已复制到公有云中的二级位置。</block>
  <block id="f9b40afbdb387dd32b8523c95080a898" category="paragraph"><block ref="f9b40afbdb387dd32b8523c95080a898" category="inline-image-macro-rx" type="image"></block></block>
  <block id="28268d417882b5cf7a3d3ee3a15834c8" category="paragraph">此时，云中的数据库备份副本已做好克隆准备，可以运行开发 / 测试流程，或者在发生主故障时进行灾难恢复。</block>
  <block id="78b29bbf3f07a44b62307ce90b34904e" category="inline-link-macro">接下来： AWS 公有云入门。</block>
  <block id="7d32c0298884bcc4c0211357748d0e6e" category="paragraph"><block ref="7d32c0298884bcc4c0211357748d0e6e" category="inline-link-macro-rx"></block></block>
  <block id="0f22160e43c900ef7426d8a19e9f482d" category="summary">在执行混合云数据库工作负载之前，必须在内部和云中配置某些前提条件。下一节简要介绍了此过程，以下链接提供了有关必要的系统配置的详细信息。</block>
  <block id="1dad826770c4d2c619351c974f725b36" category="doc">前提条件配置</block>
  <block id="ce38f65c711e7e3047c9350abe42c0c3" category="inline-link-macro">先前版本：解决方案要求。</block>
  <block id="d3fe0eebddd46d46399cb319c7219427" category="paragraph"><block ref="d3fe0eebddd46d46399cb319c7219427" category="inline-link-macro-rx"></block></block>
  <block id="4df40e141b0559f15db8f84f78aed013" category="section-title">内部部署</block>
  <block id="caea8340e2d186a540518d08602aa065" category="list-text">自动化</block>
  <block id="761883c0d5c55fba5b200ac8ac0d86e5" category="section-title">公有云</block>
  <block id="37aa83a33297d9d16b4423be342598bb" category="list-text">连接器的网络位置</block>
  <block id="74c043a4451dd260729a23ce96aa1550" category="paragraph">重要注意事项：</block>
  <block id="7aee27c83b5e3622c1d8cbd5c2098c60" category="list-text">在何处部署 Cloud Manager Connector ？</block>
  <block id="43fd5c6fa3d9ba8a215c31f3bf0a9859" category="list-text">Cloud Volume ONTAP 规模估算和架构</block>
  <block id="7a0e00d70e3b0ff06476a52565f923c4" category="list-text">单节点还是高可用性？</block>
  <block id="2d0b46fff3ae203a435b167c7111b389" category="paragraph">以下链接提供了更多详细信息：</block>
  <block id="cfd98f49422c4fba755a2ff74c55a4a0" category="paragraph"><block ref="cfd98f49422c4fba755a2ff74c55a4a0" category="inline-link-macro-rx"></block></block>
  <block id="704849d56e695ab8f9df0b106e0d7e33" category="inline-link-macro">公有云</block>
  <block id="96e41b2b281ca4b71edf4ed16e46a2be" category="paragraph"><block ref="96e41b2b281ca4b71edf4ed16e46a2be" category="inline-link-macro-rx"></block></block>
  <block id="7c12725837ee75c4c0a9bbc14f99934d" category="inline-link-macro">接下来：内部部署的前提条件。</block>
  <block id="bc57dd30a9059d494c9d76e4b0a9ce8f" category="paragraph"><block ref="bc57dd30a9059d494c9d76e4b0a9ce8f" category="inline-link-macro-rx"></block></block>
  <block id="18e04180e0442e18a559941bb8de310c" category="sidebar">边缘人工智能推理—采用联想 ThinkSystem 的 NetApp —解决方案设计</block>
  <block id="30b22b544972f5adb280ca2975099846" category="sidebar">采用 SnapCenter 的混合云数据库解决方案</block>
  <block id="59f8ae0d5c4ba13dee4828e2727c8859" category="sidebar">内部部署入门</block>
  <block id="96e4797e3006bef737785f8627faae06" category="paragraph">下图显示了 NetApp EF280 存储系统。</block>
  <block id="b407d5a86fd662f03d5a1615963e0827" category="paragraph">ONTAP 9.8.1 是 NetApp 推出的最新一代存储管理软件，可帮助企业打造现代化的基础架构并过渡到云就绪数据中心。借助行业领先的数据管理功能，无论数据位于何处， ONTAP 都可以通过一组工具来管理和保护数据。您还可以将数据自由移动到需要的任何位置：边缘，核心或云。ONTAP 9.8.1 提供了许多功能，可简化数据管理，加快和保护关键数据，并在混合云架构中实现下一代基础架构功能。</block>
  <block id="9177ba75c6dc50d818c52360f10e2fe1" category="list-text">下载需要注册的数据集， ImageNet 2012 验证集， Criteo TB 数据集和 Brats 2019 训练集，然后解压缩这些文件。</block>
  <block id="12dda17fb1d76556387dceb2e85a9290" category="list-text">创建一个至少包含 1 TB 的工作目录，并定义环境变量 `MLPERF_scrating_path` 引用该目录。</block>
  <block id="7c5f7553ff57e0548889000668d1cf39" category="list-text">运行 make `prebuild` 命令，该命令可为所需的推理任务构建并启动 Docker 容器。</block>
  <block id="b25e1e6ba392fe4c0e0da7617a67fa4d" category="list-text">为 MLPerf 推理任务下载经过预先培训的 AI 型号： `make download_model`</block>
  <block id="ed43016366915f1fc65fe332de60965f" category="list-text">下载可免费下载的其他数据集： `make download_data`</block>
  <block id="41165a10471c0644aef30b976f113946" category="list-text">预处理数据： make `preprocess_data`</block>
  <block id="f0bacb5df46d2e8bed3d6d0d863fce01" category="list-text">运行： `m构建` 。</block>
  <block id="189eed4566c6894d64b4d4f8bc9df94c" category="list-text">针对计算服务器中的 GPU 优化的构建推理引擎： `make generate_engine`</block>
  <block id="ca0aa5c3a448e511d9334d94174b8b85" category="paragraph">此基准测试可测量延迟。对于所有情况，我们都会报告运行中涉及的所有服务器的平均延迟。系统将提供此任务套件的结果。</block>
  <block id="f02eaec2bc90de6689765cffde92e809" category="paragraph">结果再次显示，网络存储足以处理这些任务。在一台服务器的情况下，本地存储与网络存储之间的差别很小或没有差别。同样，当两个服务器使用相同的存储时，两个服务器上的延迟保持不变或变化量非常小。</block>
  <block id="cc402abc10a0191493024c4510783afc" category="paragraph">此联想 ThinkSystem 服务器和 NetApp ONTAP 或 NetApp SANtricity 存储解决方案旨在利用 GPU 与传统 CPU 的处理能力处理大型数据集上的 AI 推理。此验证通过一个架构来展示高性能和最佳数据管理，该架构使用一个或多个与单个 NetApp AFF 存储系统互连的联想 SR350 边缘服务器，如以下两个图所示。</block>
  <block id="aacb24ff7918ccc37aea66f8c9548b68" category="paragraph"><block ref="aacb24ff7918ccc37aea66f8c9548b68" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fa68c0f0557e1b1d9b151c9be9aae26a" category="paragraph">下图中的逻辑架构概述显示了此架构中计算和存储元素的角色。具体而言，它显示以下内容：</block>
  <block id="eb190159f20d63d1c7687ecafd03fc73" category="paragraph">本文档遵循 MLPerf 推理 v0.7<block ref="72ea1359ddbf7a99cdb0a438fda3e022" category="inline-link-rx"></block>， MLPerf 推理 v1.1<block ref="7dc141edfa21f33dbd4b0757be1ad69f" category="inline-link-rx"></block>，和<block ref="efc21f34f290528320a21a8cc99ffcfc" category="inline-link-rx"></block>。我们运行了专为在边缘进行推理而设计的 MLPerf 基准测试，如下表所述。</block>
  <block id="816720c0b642aa1eef01c4f9108f54c5" category="paragraph">下表介绍了 Edge 基准测试场景。</block>
  <block id="5174c42549c4dd0407a40298a4d9e362" category="paragraph"><block ref="5174c42549c4dd0407a40298a4d9e362" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2c755351ada495582a6d9015943de077" category="summary">在此使用情形中，客户要求在同一数据中心和远程位置快速高效地基于包含大量分析数据以用于 DevTest 和报告目的的现有 Hadoop 集群构建新的 Hadoop/Spark 集群。</block>
  <block id="acb2dd720b2161405c8cb1ca6035618b" category="doc">用例 3 ：对现有 Hadoop 数据启用 DevTest</block>
  <block id="aeab228f25b5fbe0b00f83117579246e" category="inline-link-macro">先前版本：用例 2 —从云备份和灾难恢复到内部环境。</block>
  <block id="cf44ed74ea7e07a8e4478e43d9537e07" category="paragraph"><block ref="cf44ed74ea7e07a8e4478e43d9537e07" category="inline-link-macro-rx"></block></block>
  <block id="54861efdd06fc309e1c9a420feff98eb" category="section-title">场景</block>
  <block id="4e19c1aafa6d3711ae619f7e1621a61e" category="paragraph">在这种情况下，多个 Spark 或 Hadoop 集群是通过在内部以及灾难恢复位置实施大型 Hadoop 数据湖而构建的。</block>
  <block id="5f5e12d29ffccf33e8cb5a30f4d2fe8c" category="section-title">要求和挑战</block>
  <block id="c04f16bb8233216a472d30b6c509b230" category="paragraph">此用例的主要要求和挑战包括：</block>
  <block id="5768edca640abf2b08dd5ba0e593dcc7" category="list-text">创建多个 Hadoop 集群以实现 DevTest ， QA 或任何其他需要访问相同生产数据的目的。此处的挑战是，以节省空间的方式瞬时克隆多个非常大的 Hadoop 集群。</block>
  <block id="529c78f9988d342b33707ecaae7d2576" category="list-text">将 Hadoop 数据同步到 DevTest 和报告团队，以提高运营效率。</block>
  <block id="07178cfd87815398d5079e55c257f96c" category="list-text">使用相同的凭据在生产集群和新集群之间分发 Hadoop 数据。</block>
  <block id="b26eaa756d7ec14dcec5c25d7d9ad6b6" category="list-text">使用计划策略高效创建 QA 集群，而不会影响生产集群。</block>
  <block id="49b21ad0d38942f635877e7bbc5d7a1e" category="section-title">解决方案</block>
  <block id="6442ec446d11bbd47497299e0ffceed5" category="paragraph">FlexClone 技术用于问题解答上述要求。FlexClone 技术是 Snapshot 副本的读 / 写副本。它会从父 Snapshot 副本数据读取数据，并且只会为新的 / 修改的块占用额外空间。速度快，节省空间。</block>
  <block id="51a22383ed7ac5a70a455d81a9bad789" category="paragraph">首先，使用 NetApp 一致性组创建现有集群的 Snapshot 副本。</block>
  <block id="4b481b20e942087b64c5bb7b07d9dca9" category="paragraph">NetApp System Manager 或存储管理员提示符中的 Snapshot 副本。一致性组 Snapshot 副本是应用程序一致的组 Snapshot 副本， FlexClone 卷是根据一致性组 Snapshot 副本创建的。值得一提的是， FlexClone 卷会继承父卷的 NFS 导出策略。创建 Snapshot 副本后，必须安装一个新的 Hadoop 集群以用于 DevTest 和报告目的，如下图所示。原位分析模块通过原位分析模块用户和 NFS 数据的组授权从新 Hadoop 集群访问克隆的 NFS 卷。</block>
  <block id="4c490dfedbcc5a021b8a4c823e337d41" category="paragraph">要获得正确的访问权限，新集群必须具有在原位分析模块用户和组配置中配置的用户的相同 UID 和 GUID 。</block>
  <block id="6ee7e035a9c46bb26ee76c40aa671148" category="paragraph">此图显示了用于 DevTest 的 Hadoop 集群。</block>
  <block id="4157075925c8c1518cc71d1d0abab403" category="paragraph"><block ref="4157075925c8c1518cc71d1d0abab403" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e10ad11fd299ee6f161f17d772a78a48" category="inline-link-macro">接下来：用例 4 —数据保护和多云连接。</block>
  <block id="8109e574f349ced8f667b9389c9189a4" category="paragraph"><block ref="8109e574f349ced8f667b9389c9189a4" category="inline-link-macro-rx"></block></block>
  <block id="a64b3943d4911d301243b8ac8779ba53" category="summary">本节概述了 NetApp 为满足各种 Hadoop 数据保护要求而提供的使用情形和解决方案。</block>
  <block id="23496143e5ca83c13eb4d953786abdcd" category="inline-link-macro">先前：用例 5 —加快分析工作负载的速度。</block>
  <block id="09b7371b2ae3168a3c54b30e4966e86e" category="paragraph"><block ref="09b7371b2ae3168a3c54b30e4966e86e" category="inline-link-macro-rx"></block></block>
  <block id="ac81718eacd21c51db78a7185a5c0a96" category="paragraph">本节概述了 NetApp 为满足各种 Hadoop 数据保护要求而提供的使用情形和解决方案。通过使用 NetApp 提供支持的 Data Fabric ，客户可以：</block>
  <block id="ce0bf05854efb234905c751e40774ab5" category="list-text">利用 NetApp 丰富的数据管理功能并与 Hadoop 原生工作流集成，灵活选择合适的数据保护解决方案。</block>
  <block id="925b1719b2db8532854b1de76f928f31" category="list-text">将 Hadoop 集群备份窗口时间缩短近 70% 。</block>
  <block id="7de96884f777b768ef12e40582f4d816" category="list-text">消除 Hadoop 集群备份所带来的任何性能影响。</block>
  <block id="d5235d7ce8947322a12272f0c6dc7e24" category="list-text">同时提供从不同云提供商到单个分析数据源的多云数据保护和数据访问。</block>
  <block id="61e7eb3536cca4c51ae700159e1d247a" category="list-text">使用 FlexClone 技术快速创建节省空间的 Hadoop 集群副本。</block>
  <block id="64bb4a6337ad7b2efa8dc5d43d492edf" category="paragraph">要了解有关本文档中所述信息的更多信息，请参见以下文档和 / 或网站：</block>
  <block id="253914d41704f0f326f6595e14005170" category="list-text">NetApp 大数据分析解决方案</block>
  <block id="85eb07da2e4fd15718f8d05d269a4e30" category="inline-link"><block ref="85eb07da2e4fd15718f8d05d269a4e30" category="inline-link-rx"></block></block>
  <block id="f87d78d98a2357057eba948402e285f0" category="paragraph"><block ref="f87d78d98a2357057eba948402e285f0" category="inline-link-rx"></block></block>
  <block id="b2eb92b872fe536c4a859e695eaf280d" category="list-text">采用 NetApp 存储的 Apache Spark 工作负载</block>
  <block id="a904c9f7327a2cbf0c9411dd8b7551fa" category="inline-link"><block ref="a904c9f7327a2cbf0c9411dd8b7551fa" category="inline-link-rx"></block></block>
  <block id="3db0ab5f6c6b92b8d32d80cb1a83e214" category="paragraph"><block ref="3db0ab5f6c6b92b8d32d80cb1a83e214" category="inline-link-rx"></block></block>
  <block id="1bff250c7118efa9007019415bb2730d" category="list-text">适用于 Apache Spark 的 NetApp 存储解决方案</block>
  <block id="83d445161ea1f91a19d552f783018ea5" category="inline-link"><block ref="83d445161ea1f91a19d552f783018ea5" category="inline-link-rx"></block></block>
  <block id="142c737f7563ed12b8b08b6fc8779b8c" category="paragraph"><block ref="142c737f7563ed12b8b08b6fc8779b8c" category="inline-link-rx"></block></block>
  <block id="df245018c012fa9deefc0e1d65196e46" category="list-text">NetApp 支持的 Data Fabric 上的 Apache Hadoop</block>
  <block id="143ece864a38e1c8267bd8318d458955" category="inline-link"><block ref="143ece864a38e1c8267bd8318d458955" category="inline-link-rx"></block></block>
  <block id="b890b67174812331efb42656a186fa42" category="paragraph"><block ref="b890b67174812331efb42656a186fa42" category="inline-link-rx"></block></block>
  <block id="49d7c87b66a2b688ec65b1a4fe9b5ddc" category="list-text">NetApp 原位分析模块</block>
  <block id="1d669c79bffe95dd384dffb8309a0d40" category="inline-link"><block ref="1d669c79bffe95dd384dffb8309a0d40" category="inline-link-rx"></block></block>
  <block id="fde1cd76fa73f8065aeb8a97c77b40ec" category="paragraph"><block ref="fde1cd76fa73f8065aeb8a97c77b40ec" category="inline-link-rx"></block></block>
  <block id="0407c27180c9b019e644e8ad4c6a9324" category="section-title">致谢</block>
  <block id="c4f052e8512b2541f8154dd256a529d6" category="list-text">NetApp ANZ 维多利亚地区销售代表 Paul Burland</block>
  <block id="5d14432aa90b3b3ebfa87b98a1844edb" category="list-text">NetApp 业务开发经理 Hoseb Dermanilian</block>
  <block id="929bdc02c2d9943ae8cb52786476e6c6" category="list-text">NetApp MPSG 总监 Lee Dorrier</block>
  <block id="a3ed56594a87e322fbcf5a6e705a4134" category="list-text">NetApp ANZ 维多利亚区 SE 系统工程师 David Thiessen</block>
  <block id="effdc6a5d743a9db1cd347a2ac8d6b80" category="cell">2018 年 1 月</block>
  <block id="81d2cd2b484f8c425c2146303b9f1c55" category="cell">更新了用例 5 ：加快分析工作负载的速度</block>
  <block id="1dca3067f5c6c2fa6b32ef683fcab56f" category="summary">在这种情况下，客户拥有一个大型内部 Hadoop 存储库，并希望对其进行备份以实现灾难恢复。但是，客户当前的备份解决方案成本高昂，并且备份时间过长，超过 24 小时。</block>
  <block id="817ac2975197bd6c376a7918a798981f" category="doc">用例 1 ：备份 Hadoop 数据</block>
  <block id="8efec9e11b7742f59dbe1af079e1c1d0" category="inline-link-macro">先前版本： Hadoop 数据保护使用情形概述。</block>
  <block id="259b434ecfae95df231c879645a98918" category="paragraph"><block ref="259b434ecfae95df231c879645a98918" category="inline-link-macro-rx"></block></block>
  <block id="7ffe71c29f8ea391bbd80c1e8441af9a" category="list-text">软件向后兼容性：</block>
  <block id="d96828d85e8cc053407a391bee52257f" category="list-text">建议的备用备份解决方案应与生产 Hadoop 集群中当前正在运行的软件版本兼容。</block>
  <block id="dd5bb530e532c011487ffc3a69e56f57" category="list-text">为了满足承诺的 SLA ，建议的替代解决方案应实现极低的 RPO 和 RTO 。</block>
  <block id="4783ab1f0401dc9c24cc9afa6dc5823e" category="list-text">NetApp 备份解决方案创建的备份可以在本地构建于数据中心的 Hadoop 集群中使用，也可以在远程站点的灾难恢复位置运行的 Hadoop 集群中使用。</block>
  <block id="1dbc869d2df036d4d6e732e9c680ab6b" category="list-text">建议的解决方案必须经济高效。</block>
  <block id="7405e6ba4b630f11b88a7976325a95e4" category="list-text">建议的解决方案必须减少备份期间对当前正在运行的生产分析作业的性能影响。</block>
  <block id="e3d4f6860e578b28733c41c2c852f821" category="section-title">客户的现有备份解决方案</block>
  <block id="f350f804f84a5bf788cd78cd4aae7eab" category="paragraph">下图显示了原始 Hadoop 原生备份解决方案。</block>
  <block id="2975218bd3c71a4ac4eac95d3529a9cb" category="paragraph"><block ref="2975218bd3c71a4ac4eac95d3529a9cb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="76b8e496c38192b97fdfa6cae2ba2bb4" category="paragraph">生产数据通过中间备份集群保护到磁带：</block>
  <block id="d07ca391addc59b7408fb88541552b43" category="list-text">通过运行 `hadoop distcp -update &lt;hdfs1&gt; &lt;hdfs2&gt;` 命令，可以将 HDFS1 数据复制到 HDFS2 。</block>
  <block id="2c4cadbb7f122d1d0cd988a11681248a" category="list-text">备份集群充当 NFS 网关，数据通过 Linux `CP` 命令通过磁带库手动复制到磁带。</block>
  <block id="b73035943c8623cbdb7bd67992201012" category="paragraph">原始 Hadoop 原生备份解决方案的优势包括：</block>
  <block id="5bdb90a1352ca42ab8dde5b9ab7ffac3" category="list-text">解决方案基于 Hadoop 原生命令，用户无需学习新过程。</block>
  <block id="f581d1b5f93adda1865bad95e215a7b9" category="list-text">解决方案采用行业标准架构和硬件。</block>
  <block id="ddd131647a4d5e1b5bcb983ec8872ff9" category="paragraph">原始 Hadoop 原生备份解决方案的缺点包括：</block>
  <block id="2cd5e9eae715f3bb0475ed032bf56190" category="list-text">备份窗口时间过长超过 24 小时，因此生产数据容易受到影响。</block>
  <block id="b22d500a5624a2c57ec5bda86aa57011" category="list-text">备份期间集群性能显著下降。</block>
  <block id="69bfe7f4231b0c1d65247d0abfc89cb3" category="list-text">复制到磁带是一个手动过程。</block>
  <block id="6ef8e4ec49425ac5ded9c6cc599c17d2" category="list-text">备份解决方案在所需的硬件和手动过程所需的工时方面成本高昂。</block>
  <block id="1b4d2bf420e7f05ecb82ecf2197ab810" category="section-title">备份解决方案</block>
  <block id="6d977e36854ae6439cbc4fe8e0c1b227" category="paragraph">根据这些挑战和要求，并考虑到现有备份系统，建议了三种可能的备份解决方案。以下各小节分别介绍了这三种不同的备份解决方案，分别标记为解决方案 A 到解决方案 C</block>
  <block id="c5a6c012dc14dc7f9d2fa0df0ccb0cdf" category="section-title">解决方案 A</block>
  <block id="8ee7b0fbb95cf5b1c98578a7ef03b9eb" category="paragraph">解决方案 A 会将原位分析模块添加到备份 Hadoop 集群中，从而可以对 NetApp NFS 存储系统进行二级备份，从而消除了磁带需求，如下图所示。</block>
  <block id="411ee6c684ee720eff303771433e41d6" category="paragraph"><block ref="411ee6c684ee720eff303771433e41d6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2813f022c034c63ad3d6efeeb503eb70" category="paragraph">解决方案 A 的详细任务包括：</block>
  <block id="0406c5ca05cfb5f7a0c02971c3962460" category="list-text">生产 Hadoop 集群的 HDFS 中包含需要保护的客户分析数据。</block>
  <block id="feb7749ff700168c127dfbd8376b35f7" category="list-text">具有 HDFS 的备份 Hadoop 集群充当数据的中间位置。在生产和备份 Hadoop 集群中，只需一组磁盘（ JBOD ）即可为 HDFS 提供存储。</block>
  <block id="b3f54540429c806b8cf0080fd78b34bc" category="list-text">运行 `hadoop distcp – update – diff &lt;hdfs1&gt; &lt;hdfs2&gt;` 命令，保护 Hadoop 生产数据，使其从生产集群 HDFS 传输到备份集群 HDFS 。</block>
  <block id="2de4833848a0b94bd672bdf9bc60d4aa" category="admonition">Hadoop 快照用于保护数据从生产环境传输到备份 Hadoop 集群。</block>
  <block id="79ef8fc2c565c69b33f5918c3a0bdd9a" category="list-text">NetApp ONTAP 存储控制器可提供一个 NFS 导出卷，该卷会配置到备份 Hadoop 集群。</block>
  <block id="b0e42779d51b21a745cae08f938ec60a" category="list-text">通过利用 MapReduce 和多个映射程序运行 `Hadoop distcp` 命令，可以使用原位分析模块保护分析数据，使其从 Hadoop 集群备份到 NFS 。</block>
  <block id="738997de22c6371f563f69e1bb57b6e5" category="paragraph">将数据存储在 NetApp 存储系统的 NFS 中后，将使用 NetApp Snapshot ， SnapRestore 和 FlexClone 技术根据需要备份，还原和复制 Hadoop 数据。</block>
  <block id="0bd252182290e872b264ad65d369637f" category="admonition">使用 SnapMirror 技术，可以将 Hadoop 数据保护到云端以及灾难恢复位置。</block>
  <block id="4a1b9aaeaa6487c6df7072326cf3798e" category="paragraph">解决方案 A 的优势包括：</block>
  <block id="0843e6a882cae98851adbefb52d05827" category="list-text">Hadoop 生产数据受备份集群保护。</block>
  <block id="522d0cf303cbf1b16ea5cc33480ce02f" category="list-text">HDFS 数据通过 NFS 进行保护，从而可以保护云和灾难恢复位置。</block>
  <block id="298d20d1ae9110668e52c07776f62948" category="list-text">通过将备份操作卸载到备份集群来提高性能。</block>
  <block id="4c10451e9e5bf987bc3ab16a9fce3966" category="list-text">无需手动执行磁带操作</block>
  <block id="0ff20f264e79e773549ded37f50f4b3b" category="list-text">支持通过 NetApp 工具实现企业管理功能。</block>
  <block id="4c84f95e2dad9b5385151a736e89f0c3" category="list-text">只需对现有环境进行极少的更改。</block>
  <block id="66f3b3a8c99e03a363a88a58fabe03cc" category="list-text">是一种经济高效的解决方案。</block>
  <block id="4e941dea7920913a2c3a6d2a11a0936f" category="paragraph">此解决方案的缺点是，它需要一个备份集群和额外的映射器来提高性能。</block>
  <block id="0628ac302dce6afb9d95a6b8ebd0d013" category="paragraph">由于解决方案 A 的简单性，成本和整体性能，客户最近部署了它。</block>
  <block id="7a3ba8b554aec9832f399bff2ba17c74" category="paragraph">在此解决方案中，可以使用 ONTAP 中的 SAN 磁盘，而不是 JBOD 。此选项会将备份集群存储负载卸载到 ONTAP ；但是，缺点是需要 SAN 网络结构交换机。</block>
  <block id="501a1b4ce382e8e2da0089aded30d11e" category="section-title">解决方案 B</block>
  <block id="304af2b0b47890c7db8f6097978fdede" category="paragraph">解决方案 B 将原位分析模块添加到生产 Hadoop 集群中，这样就无需备份 Hadoop 集群，如下图所示。</block>
  <block id="303388aba87d7dcff207a6cd098b0cfe" category="paragraph"><block ref="303388aba87d7dcff207a6cd098b0cfe" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8ca30c628556726e2038c5df9689fd91" category="paragraph">解决方案 B 的详细任务包括：</block>
  <block id="e493f6dc701d2253466d5705af2e5bb1" category="list-text">NetApp ONTAP 存储控制器可为生产 Hadoop 集群配置 NFS 导出。</block>
  <block id="3c321f811c173c1f133bdcc77fc81a33" category="paragraph">Hadoop 原生 `Hadoop distcp` 命令可通过原位分析模块保护从生产集群 HDFS 到 NFS 的 Hadoop 数据。</block>
  <block id="665cfb3949b836c368d9be47d34bcbba" category="list-text">将数据存储在 NetApp 存储系统的 NFS 中后，将使用 Snapshot ， SnapRestore 和 FlexClone 技术根据需要备份，还原和复制 Hadoop 数据。</block>
  <block id="4f1aeb2a94e89562b7bef27c368ed9cc" category="paragraph">解决方案 B 的优势包括：</block>
  <block id="748dc25f775dc78e1da24328f753d1e1" category="list-text">生产集群针对备份解决方案进行了少许修改，从而简化了实施并降低了额外的基础架构成本。</block>
  <block id="a565a40a6656693466a7da18be6d44ca" category="list-text">备份操作不需要备份集群。</block>
  <block id="fa6ae9dfac02b933ef93450603114fce" category="list-text">HDFS 生产数据在转换为 NFS 数据时会受到保护。</block>
  <block id="cf7952142a1253af6b9394a3f01408b3" category="list-text">解决方案支持通过 NetApp 工具执行企业管理功能。</block>
  <block id="02946730aaff0e3d8abfa986a2fe949d" category="paragraph">此解决方案的缺点是它在生产集群中实施，这可能会在生产集群中添加其他管理员任务。</block>
  <block id="0a3b8c5fab2a32545423ade2927b1185" category="section-title">解决方案 C</block>
  <block id="6c176725a15c1c609d24387ddf6600da" category="paragraph">在解决方案 C 中， NetApp SAN 卷会直接配置到 Hadoop 生产集群中以用于 HDFS 存储，如下图所示。</block>
  <block id="dc460b3501caf17186202576855a6d3c" category="paragraph"><block ref="dc460b3501caf17186202576855a6d3c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c0d09b63c2b939de22a3b5d0f4cb3c87" category="paragraph">解决方案 C 的详细步骤包括：</block>
  <block id="35edf0b5a2042b4561d4d499298010e6" category="list-text">NetApp ONTAP SAN 存储在生产 Hadoop 集群上配置为用于 HDFS 数据存储。</block>
  <block id="3b694951a08990d1243da1dd36e6cd07" category="list-text">NetApp Snapshot 和 SnapMirror 技术用于备份生产 Hadoop 集群中的 HDFS 数据。</block>
  <block id="c32b4eb407751e515d7d037629b66dfb" category="list-text">在 Snapshot 副本备份过程中， Hadoop/Spark 集群的生产不会对性能产生影响，因为备份位于存储层。</block>
  <block id="ef54974b65426daa87a86290447ed9a6" category="admonition">无论数据大小如何， Snapshot 技术均可在数秒内完成备份。</block>
  <block id="f499d7fd731eb2bb1efe6c4069efcb47" category="paragraph">解决方案 C 的优势包括：</block>
  <block id="abe0be0b8deb695793caa75a1dcfc4b3" category="list-text">可以使用 Snapshot 技术创建节省空间的备份。</block>
  <block id="5788267ffe4023e91b333de591766cca" category="inline-link-macro">接下来：用例 2 —从云到内部环境的备份和灾难恢复。</block>
  <block id="1619284091911820ebd1407554fb6da7" category="paragraph"><block ref="1619284091911820ebd1407554fb6da7" category="inline-link-macro-rx"></block></block>
  <block id="9d9b3c1914053d9ff102d01b77ab40a9" category="summary">此使用情形基于广播客户，该客户需要将基于云的分析数据备份到其内部数据中心。</block>
  <block id="0abf694ae9fa8ac43b805ba39a10d143" category="doc">用例 2 ：从云到内部环境的备份和灾难恢复</block>
  <block id="d05b5b5452aa966fcd3c8947a172f44a" category="inline-link-macro">先前：用例 1 —备份 Hadoop 数据。</block>
  <block id="d6b3b64a2054103914910c4432cc9e18" category="paragraph"><block ref="d6b3b64a2054103914910c4432cc9e18" category="inline-link-macro-rx"></block></block>
  <block id="733d8d14fe9ffb98d02b33079e3d3db2" category="paragraph">此使用情形基于广播客户，该客户需要将基于云的分析数据备份到其内部数据中心，如下图所示。</block>
  <block id="063e138ba69a95a99bd2f908b540e210" category="paragraph"><block ref="063e138ba69a95a99bd2f908b540e210" category="inline-image-macro-rx" type="image"></block></block>
  <block id="26fea23389e404e4cb8cf9be2c100cbd" category="paragraph">在这种情况下， IoT 传感器数据会载入云中，并使用 AWS 中的开源 Apache Spark 集群进行分析。需要将处理后的数据从云备份到内部环境。</block>
  <block id="bb446485afc21a80bc5f26a9131de160" category="list-text">启用数据保护不会发生原因对云中的生产 Spark 或 Hadoop 集群产生任何性能影响。</block>
  <block id="dbb6231aec34eed7c53cff2d4a2d43ef" category="list-text">云传感器数据需要以高效安全的方式移动和保护到内部。</block>
  <block id="848b66ad8aca524142404de79ce64c73" category="list-text">可以在不同条件下灵活地将数据从云传输到内部环境，例如按需，瞬时以及在集群负载较低的情况下。</block>
  <block id="4d8011e28e4ef4359ca7c169e7797091" category="paragraph">客户使用 AWS Elastic Block Store （ EBS ）作为其 Spark 集群 HDFS 存储，通过 Kafka 从远程传感器接收和载入数据。因此， HDFS 存储充当备份数据的源。</block>
  <block id="e55d60f6f17896ce9b53a0ef23e23413" category="paragraph">为了满足这些要求， NetApp ONTAP 云部署在 AWS 中，并创建一个 NFS 共享作为 Spark 或 Hadoop 集群的备份目标。</block>
  <block id="c260f0b6bfdb6eff1473aafbf5bd075a" category="paragraph">创建 NFS 共享后，将利用原位分析模块将数据从 HDFS EBS 存储复制到 ONTAP NFS 共享。数据驻留在 ONTAP 云的 NFS 中后，可以根据需要使用 SnapMirror 技术将数据从云镜像到内部存储，从而实现安全高效的方式。</block>
  <block id="aecad7c5bdfba92aa6cd945a9045c37f" category="paragraph">此图显示了从云到内部解决方案的备份和灾难恢复。</block>
  <block id="94c7a6b63152038de5e8b2763cdef06c" category="paragraph"><block ref="94c7a6b63152038de5e8b2763cdef06c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bbd6a10b63926b84e9a28da6d4214925" category="inline-link-macro">下一步：用例 3 —对现有 Hadoop 数据启用 DevTest 。</block>
  <block id="e0f915fb1893e398d54abc6f9d00ca57" category="paragraph"><block ref="e0f915fb1893e398d54abc6f9d00ca57" category="inline-link-macro-rx"></block></block>
  <block id="69efde21ccf40f1dda4d665f81bacefe" category="summary">在这种情况下，一家大型金融服务和投资银行的分析平台使用 NetApp NFS 存储解决方案进行了现代化改造，从而显著改进了资产管理和定量业务部门的投资风险和衍生产品分析。</block>
  <block id="0158648474e8dffab94ca58af2257b92" category="doc">用例 5 ：加快分析工作负载的速度</block>
  <block id="c8ea1eda8e0ac121148ac86dee9649a7" category="inline-link-macro">先前版本：用例 4 —数据保护和多云连接。</block>
  <block id="87fb2a1eb3f12014af6e5dd36ba66e5e" category="paragraph"><block ref="87fb2a1eb3f12014af6e5dd36ba66e5e" category="inline-link-macro-rx"></block></block>
  <block id="24b0e878b8196875cd088397ac8312a9" category="paragraph">在客户的现有环境中，用于分析平台的 Hadoop 基础架构利用了 Hadoop 服务器的内部存储。由于 JBOD 环境的专有性，组织内的许多内部客户无法利用其蒙特卡罗量化模型，这种模拟依赖于重复的实时数据样本。无法以最佳方式了解市场波动的不确定性影响，这对量化资产管理业务单位不利。</block>
  <block id="788ab145281501314f18747a0ab1eaea" category="paragraph">该银行的量化业务部门需要一种高效的预测方法来实现准确，及时的预测。为此，该团队认识到需要对基础架构进行现代化改造，减少现有 I/O 等待时间并提高 Hadoop 和 Spark 等分析应用程序的性能，以便高效模拟投资模型，衡量潜在收益并分析风险。</block>
  <block id="5ff37557b096819452a25d129a312360" category="paragraph">客户的现有 Spark 解决方案具有 JBOD 。然后，利用 NetApp ONTAP ， NetApp StorageGRID 和从 MinIO 网关到 NFS ，减少了银行的量化财务团队对评估潜在收益和风险的投资模型进行模拟和分析的 I/O 等待时间。此图显示了采用 NetApp 存储的 Spark 解决方案。</block>
  <block id="095ba715431845442ef6bf2f4283ad1c" category="paragraph"><block ref="095ba715431845442ef6bf2f4283ad1c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c3a052314babbb25c995c7b6b2b18d04" category="paragraph">如上图所示，我们部署了 AFF A800 ， A700 系统和 StorageGRID ，以便在具有 Spark 的六节点 Hadoop 集群中通过 NFS 和 S3 协议访问 parquet 文件，并为数据分析操作提供了 YARN 和 Hive 元数据服务。</block>
  <block id="bc12facb8aa0a34db56b00fdbc21c351" category="paragraph">客户旧环境中的直连存储（ DAS ）解决方案在独立扩展计算和存储方面存在缺点。借助 NetApp ONTAP 解决方案 for Spark ，该银行的财务分析业务部门能够将存储与计算分离，并根据需要无缝地更有效地提供基础架构资源。</block>
  <block id="582c4aa65d1bd005ddc785db8b807fca" category="paragraph">通过将 ONTAP 与 NFS 结合使用，计算服务器 CPU 几乎可以完全用于 Spark SQL 作业， I/O 等待时间缩短了近 70% ，从而为 Spark 工作负载提供了更好的计算能力和性能提升。随后，随着 CPU 利用率的提高，客户还可以利用 GPUDirect 等 GPU 进一步实现平台现代化。此外， StorageGRID 还为 Spark 工作负载提供了低成本存储选项，而 MinIO 网关则可通过 S3 协议安全访问 NFS 数据。对于云中的数据， NetApp 建议使用 Cloud Volumes ONTAP ， Azure NetApp Files 和 NetApp Cloud Volumes Service 。</block>
  <block id="6e362ed6e741056d737b93021ab2f3f9" category="paragraph"><block ref="6e362ed6e741056d737b93021ab2f3f9" category="inline-link-macro-rx"></block></block>
  <block id="df343d31543826a7505d157cf243c96a" category="summary">Hadoop DistCp 是一款原生工具，用于大型集群间和集群内复制。Hadoop DistCp 基本过程是一个典型的备份工作流，它使用诸如 MapReduce 等 Hadoop 原生工具将 Hadoop 数据从 HDFS 源复制到相应目标。</block>
  <block id="2a377dc939cca8cab65101c1869d628d" category="doc">Hadoop 数据保护和 NetApp</block>
  <block id="9445444fbd9e863564ea85ad226c0e80" category="inline-link-macro">先前版本：由 NetApp 为大数据架构提供支持的 Data Fabric 。</block>
  <block id="e30c587da81860e05b3f8ecfb5b9965b" category="paragraph"><block ref="e30c587da81860e05b3f8ecfb5b9965b" category="inline-link-macro-rx"></block></block>
  <block id="5f45c95989226891db648114a547a6bd" category="paragraph">Hadoop DistCp 是一款原生工具，用于大型集群间和集群内复制。下图所示的 Hadoop DistCp 基本过程是一个典型的备份工作流，它使用诸如 MapReduce 等 Hadoop 原生工具将 Hadoop 数据从 HDFS 源复制到相应目标。通过 NetApp NFS 直接访问，客户可以将 NFS 设置为 Hadoop DistCp 工具的目标，以便通过 MapReduce 将数据从 HDFS 源复制到 NFS 共享。NetApp NFS 直接访问可用作 DistCp 工具的 NFS 驱动程序。</block>
  <block id="6369c8cb38b142174d2f84d12d2f0420" category="paragraph"><block ref="6369c8cb38b142174d2f84d12d2f0420" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a4849340a20db94ed712aca71c30b915" category="inline-link-macro">接下来： Hadoop 数据保护用例概述。</block>
  <block id="817c6593a9a8efc031ec597b5d11d605" category="paragraph"><block ref="817c6593a9a8efc031ec597b5d11d605" category="inline-link-macro-rx"></block></block>
  <block id="fa7dcae8e4f7d8ecc191c3ce8547a53a" category="summary">此使用情形适用于负责为客户的大数据分析数据提供多云连接的云服务合作伙伴。</block>
  <block id="2268700ee8bd2216d594273e566b0cc9" category="doc">用例 4 ：数据保护和多云连接</block>
  <block id="2c8eccdfa6390b1d09b2527f7d7d2cc5" category="inline-link-macro">先前版本：用例 3 —对现有 Hadoop 数据启用 DevTest 。</block>
  <block id="fda5cc5b496f5f7aa6de18740227bc15" category="paragraph"><block ref="fda5cc5b496f5f7aa6de18740227bc15" category="inline-link-macro-rx"></block></block>
  <block id="3cec8f6cf1ce867e7f73dd5132b7fbf3" category="paragraph">在这种情况下，在 AWS 中从不同来源接收的物联网数据存储在 NPS 的中央位置。NPS 存储连接到 AWS 和 Azure 中的 Spark 或 Hadoop 集群，从而支持在多个云中运行的大数据分析应用程序访问相同的数据。</block>
  <block id="bed6436414550585ccb4ac4c67a449a3" category="list-text">客户希望使用多个云对相同数据运行分析作业。</block>
  <block id="6af3e1f448b2a56e9bd0fbbd43b31bc8" category="list-text">必须通过不同的传感器和中心从内部和云等不同来源接收数据。</block>
  <block id="e3c7f1ced05166adfc90c26337389e3e" category="list-text">解决方案必须高效且经济高效。</block>
  <block id="b320f1b1ab6d0a21e40ee3d444669645" category="list-text">主要挑战是构建一个经济高效的解决方案，以便在内部和不同云之间提供混合分析服务。</block>
  <block id="0d4b3cfa555ff36cd92fb4e36fb69fbf" category="paragraph">此图显示了数据保护和多云连接解决方案。</block>
  <block id="faaf8e6278dc7a68fd1dd98dfe7f525a" category="paragraph"><block ref="faaf8e6278dc7a68fd1dd98dfe7f525a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="14c23633f1ab374f4c801386847ba2f8" category="paragraph">如上图所示，来自传感器的数据会通过 Kafka 流式传输并输入到 AWS Spark 集群中。数据存储在 NPS 中的 NFS 共享中， NPS 位于 Equinix 数据中心内的云提供商之外。由于 NetApp NPS 分别通过 Direct Connect 和 Express Route 连接连接到 Amazon AWS 和 Microsoft Azure ，因此客户可以利用原位分析模块从 Amazon 和 AWS 分析集群访问数据。这种方法解决了跨多个超大规模云提供商进行云分析的问题。</block>
  <block id="4089db0b43263b1f59a9c2db909edf6e" category="paragraph">因此，由于内部和 NPS 存储均运行 ONTAP 软件，因此 SnapMirror 可以将 NPS 数据镜像到内部集群，从而在内部和多个云之间提供混合云分析。</block>
  <block id="d446808fb03b5fae4f2e518cbc7d767f" category="paragraph">为了获得最佳性能， NetApp 通常建议使用多个网络接口和直接连接 / 快速路由从云实例访问数据。</block>
  <block id="1ef541fe0fa79d247c0f1751629bb504" category="inline-link-macro">接下来：用例 5 —加快分析工作负载的速度。</block>
  <block id="7dfabd0b120fe0403ff107668db4094a" category="paragraph"><block ref="7dfabd0b120fe0403ff107668db4094a" category="inline-link-macro-rx"></block></block>
  <block id="f9fe6a27dc7f13d26e9416153b950597" category="summary">本节将简要介绍数据保护使用情形的问题描述，这是本白皮书的重点内容。其余部分将详细介绍每个使用情形，例如客户问题（场景），要求和挑战以及解决方案。</block>
  <block id="6a15e1dac7cc5c330a1da84c32b3ff2e" category="doc">Hadoop 数据保护用例概述</block>
  <block id="d161097dc6596d3807b21a5635856d71" category="inline-link-macro">先前版本： Hadoop 数据保护和 NetApp 。</block>
  <block id="1a5df0b83f496dc00b4a331caac0d5cd" category="paragraph"><block ref="1a5df0b83f496dc00b4a331caac0d5cd" category="inline-link-macro-rx"></block></block>
  <block id="385dae214dc9bab52698dc7cd42632ad" category="paragraph">在这种使用情形中，原位分析模块帮助一家大型金融机构将备份时间从 24 小时以上缩短到几小时以内。</block>
  <block id="06b83cb579d9aaf1f26d8c4284a5a42e" category="paragraph">一家大型广播公司利用 NetApp 提供支持的 Data Fabric 作为组件，根据不同的数据传输模式（例如按需，即时， 或基于 Hadoop/Spark 集群负载。</block>
  <block id="da17b6db6e3e50f66b5bcaee1d74f8b1" category="paragraph">NetApp 解决方案帮助在线音乐分销商在不同的分支中快速构建多个节省空间的 Hadoop 集群，以便使用计划的策略创建报告并运行每日 DevTest 任务。</block>
  <block id="90fc62f886a8c33032d4db8b79ec5814" category="paragraph">一家大型服务提供商使用由 NetApp 提供支持的 Data Fabric ，从不同的云实例为其客户提供多云分析。</block>
  <block id="67f07a55567ecfc26b3c7b54823a43ee" category="paragraph">最大的金融服务和投资银行之一使用 NetApp 网络连接存储解决方案来缩短 I/O 等待时间并加快其量化金融分析平台的运行速度。</block>
  <block id="2afe208a471bf6c54f0ccc97f4c6508d" category="inline-link-macro">下一步：用例 1 —备份 Hadoop 数据。</block>
  <block id="aac250a096aacf9aed26ebbd137818da" category="paragraph"><block ref="aac250a096aacf9aed26ebbd137818da" category="inline-link-macro-rx"></block></block>
  <block id="5e524f38cae9a99f3ebbaf012df2894e" category="summary">由 NetApp 提供支持的 Data Fabric 可简化并集成云环境和内部环境中的数据管理，以加速数字化转型。由 NetApp 提供支持的 Data Fabric 可提供一致且集成的数据管理服务和应用程序（组件），以实现数据可见性和洞察力，数据访问和控制以及数据保护和安全。</block>
  <block id="3c2db15f0fee10b08496ec1701f104d8" category="doc">NetApp 为大数据架构提供支持的 Data Fabric</block>
  <block id="32e0d2b797e6706a73e8146d103572c7" category="inline-link-macro">上一步：解决方案概述。</block>
  <block id="45af7a946606481f9e2b5f0434aa0484" category="paragraph"><block ref="45af7a946606481f9e2b5f0434aa0484" category="inline-link-macro-rx"></block></block>
  <block id="981d357acc471e35d8d150f861ff1828" category="paragraph">由 NetApp 提供支持的 Data Fabric 可简化并集成云环境和内部环境中的数据管理，以加速数字化转型。</block>
  <block id="d5a64464c1e1f9d8be4cafc8b2325fa6" category="paragraph">由 NetApp 提供支持的 Data Fabric 可提供一致且集成的数据管理服务和应用程序（组件），以实现数据可见性和洞察力，数据访问和控制以及数据保护和安全，如下图所示。</block>
  <block id="22313f8779f9135c9b421ac0d4b320fb" category="paragraph"><block ref="22313f8779f9135c9b421ac0d4b320fb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5083bdadc0fe82e6398670e5dcc6bff9" category="section-title">经验证的 Data Fabric 客户用例</block>
  <block id="3c1223e53bc7b972a018d3e2597e0bfd" category="paragraph">由 NetApp 提供支持的 Data Fabric 为客户提供了以下九个经验证的使用情形：</block>
  <block id="a6800f5cacde75e6f1cfb931a6f2dba6" category="list-text">加快分析工作负载的速度</block>
  <block id="5b0fa9517345824f19ceddd9d0cd39de" category="list-text">加快开发运营转型</block>
  <block id="90ed50a34505fc6883bd65c36ed8b810" category="list-text">构建云托管基础架构</block>
  <block id="f3933541659deec9d28aa584238f0468" category="list-text">集成云数据服务</block>
  <block id="d70909396aef5247a5a1b17dd15cf43d" category="list-text">保护和保护数据</block>
  <block id="7af5a6e7f241b8d284656f20880db36f" category="list-text">优化非结构化数据</block>
  <block id="2c63452d476328fa43a39c00bef366f1" category="list-text">提高数据中心效率</block>
  <block id="0f72ba4c2b371e4f9f47e7d8c61468a5" category="list-text">提供数据洞察力和控制力</block>
  <block id="0da79db0a9974fc0002f744165467752" category="list-text">简化和自动化</block>
  <block id="5d5b69e7e19270db49a42eb4e96be2ee" category="paragraph">本文档涵盖九个使用情形中的两个（及其解决方案）：</block>
  <block id="7adb8b5c573e74594feeb2f74e1ffc96" category="section-title">NetApp NFS 直接访问</block>
  <block id="233060aa11b5715000c000e94576cca9" category="paragraph">NetApp NFS 直接访问（以前称为 NetApp 原位分析模块）（如下图所示）允许客户在不移动或复制数据的情况下，对现有或新的 NFSv3 或 NFSv4 数据运行大数据分析作业。它可以防止多个数据副本，并且无需将数据与源进行同步。例如，在金融领域，将数据从一个位置移动到另一个位置必须履行法律义务，这不是一项容易的任务。在这种情况下， NetApp NFS 直接访问会分析其原始位置的财务数据。另一个主要优势是，使用 NetApp NFS 直接访问可通过使用原生 Hadoop 命令简化对 Hadoop 数据的保护，并利用 NetApp 丰富的数据管理产品组合支持数据保护工作流。</block>
  <block id="96e1e6bac181280c42ba5de56a8ef4c2" category="paragraph"><block ref="96e1e6bac181280c42ba5de56a8ef4c2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="aa47c768dc0f007b4606d394be4330c3" category="paragraph">NetApp NFS 直接访问为 Hadoop/Spark 集群提供了两种部署选项：</block>
  <block id="cc7514a5b2b35641026a81211ae7fe9a" category="list-text">默认情况下， Hadoop/Spark 集群使用 Hadoop 分布式文件系统（ HDFS ）进行数据存储和默认文件系统。NetApp NFS 直接访问可以将默认 HDFS 替换为 NFS 存储作为默认文件系统，从而对 NFS 数据执行直接分析操作。</block>
  <block id="5a5dace50e75999dec9323da42fe5410" category="list-text">在另一种部署选项中， NetApp NFS 直接访问支持在一个 Hadoop/Spark 集群中将 NFS 与 HDFS 配置为额外的存储。在这种情况下，客户可以通过 NFS 导出共享数据，并从同一集群访问数据以及 HDFS 数据。</block>
  <block id="933871f01596456078e75585ab9480ae" category="paragraph">使用 NetApp NFS 直接访问的主要优势包括：</block>
  <block id="bc3221e251e23e5ee9782e37b0337c38" category="list-text">分析当前位置的数据，防止执行将分析数据移动到 HDFS 等 Hadoop 基础架构这一耗时且性能极高的任务。</block>
  <block id="fe5efea0cd6733d158bfb04016f055f0" category="list-text">将副本数量从三个减少为一个。</block>
  <block id="21b00f92397ca3c72f6407dd3a873e23" category="list-text">支持用户分离计算和存储，以便独立扩展。</block>
  <block id="be7e2eb6e940a1e798db3abedc75b7a8" category="list-text">利用 ONTAP 丰富的数据管理功能提供企业数据保护。</block>
  <block id="acc50ec5f7ffe1b08ee357afcb502a0f" category="list-text">已通过 Hortonworks 数据平台认证。</block>
  <block id="be5acbdc2ea462a8345ea92d4c42511c" category="list-text">支持混合数据分析部署。</block>
  <block id="227afbdb4ab9214131d6ca5ca3df3cd6" category="list-text">利用动态多线程功能缩短备份时间。</block>
  <block id="787364630dc10cfc2657bc82f289a9fb" category="section-title">大数据的组件</block>
  <block id="7698deb733ad601844c58f0102d0470c" category="paragraph">由 NetApp 提供支持的 Data Fabric 集成了数据管理服务和应用程序（组件），用于实现数据访问，控制，保护和安全性，如下图所示。</block>
  <block id="f0a67f0f8f389fb239ce107f693a7e68" category="paragraph"><block ref="f0a67f0f8f389fb239ce107f693a7e68" category="inline-image-macro-rx" type="image"></block></block>
  <block id="162f2b2249f4b8bda40b0c01043779b3" category="paragraph">上图中的组件包括：</block>
  <block id="e64f250539a531b81423d6f3f4729665" category="list-text">* NetApp NFS 直接访问。 * 为最新的 Hadoop 和 Spark 集群提供对 NetApp NFS 卷的直接访问，而无需额外的软件或驱动程序要求。</block>
  <block id="2867a490011894512662b9423698d0e0" category="list-text">* NetApp Cloud Volumes ONTAP 和云卷服务。 * 基于在 Microsoft Azure 云服务的 Amazon Web Services （ AWS ）或 Azure NetApp Files （ ANF ）中运行的 ONTAP 的软件定义的连接存储。</block>
  <block id="5d382bdcedb0a9c7aa214b09e129e5e7" category="list-text">* NetApp SnapMirror 技术 * 。在内部部署和 ONTAP 云或 NPS 实例之间提供数据保护功能。</block>
  <block id="e2d911047fad9851fae1d7c4e71b2fab" category="list-text">* 云服务提供商。 * 这些提供商包括 AWS ， Microsoft Azure ， Google Cloud 和 IBM Cloud 。</block>
  <block id="486add91df5cb94a1fee5fccffe4f39b" category="list-text">* PaaaS 。 * 基于云的分析服务，例如 AWS 中的 Amazon Elastic MapReduce （ EMR ）和 Databricks 以及 Microsoft Azure HDInsight 和 Azure Databricks 。</block>
  <block id="35848dde21e4a5f344385ead6dec9a43" category="inline-link-macro">接下来： Hadoop 数据保护和 NetApp 。</block>
  <block id="149584f581a09d835c88f233c514412e" category="paragraph"><block ref="149584f581a09d835c88f233c514412e" category="inline-link-macro-rx"></block></block>
  <block id="cedd54d52b90b58fb9615e956db81629" category="summary">本文档介绍使用 NetApp AFF 和 FAS 存储系统， NetApp Cloud Volumes ONTAP ， NetApp 互联存储以及适用于 Spark 和 Hadoop 的 NetApp FlexClone 技术的混合云数据解决方案。客户可以通过这些解决方案架构为其环境选择合适的数据保护解决方案。NetApp 在与客户及其业务用例进行交互的基础上设计了这些解决方案。</block>
  <block id="6a604a825549ac87ecf8a00412ee6365" category="doc">TR-4657 ： NetApp 混合云数据解决方案—基于客户用例的 Spark 和 Hadoop</block>
  <block id="71932d00608c3a9fe13a866ab35227f6" category="paragraph">NetApp 公司 Karthikeyan Nagalingam 和 Sathish Thyagarajan</block>
  <block id="8b6b60ca3f35331d22d686d9c4e12871" category="paragraph">本文档介绍使用 NetApp AFF 和 FAS 存储系统， NetApp Cloud Volumes ONTAP ， NetApp 互联存储以及适用于 Spark 和 Hadoop 的 NetApp FlexClone 技术的混合云数据解决方案。客户可以通过这些解决方案架构为其环境选择合适的数据保护解决方案。NetApp 在与客户及其业务用例进行交互的基础上设计了这些解决方案。本文档提供了以下详细信息：</block>
  <block id="d928ac205302ed3d60386e2a4759c6d6" category="list-text">为什么我们需要针对 Spark 和 Hadoop 环境以及客户面临的挑战提供数据保护。</block>
  <block id="4444991e618ed955b12fdbcf746ad762" category="list-text">由 NetApp 愿景提供支持的 Data Fabric 及其组件和服务。</block>
  <block id="018b3e5bb8ca92450618b4f5ff9719f7" category="list-text">如何使用这些组件构建灵活的数据保护工作流。</block>
  <block id="30b68051de2b69f7d6ab186bed865f7c" category="list-text">根据实际客户使用情形确定的多个架构的优缺点。每个用例都包含以下组件：</block>
  <block id="2a9dbfa4b74c53d7304fc8b79a1874d3" category="list-text">解决方案</block>
  <block id="cb9825c3c7619f7000c8452d9005aa5b" category="list-text">解决方案摘要</block>
  <block id="40300466f60ef41f731d7fd45a1024e2" category="section-title">为什么选择 Hadoop 数据保护？</block>
  <block id="d54234515a0cb2905eb88ccb03d85491" category="paragraph">在 Hadoop 和 Spark 环境中，必须解决以下问题：</block>
  <block id="9ed257b8e8a9504946fcf430ea2e12e3" category="list-text">* 软件或人为故障。 * 执行 Hadoop 数据操作时，软件更新中出现人为错误，可能导致出现错误行为，发生原因从而可能导致作业产生意外结果。在这种情况下，我们需要保护数据，以避免出现故障或出现不合理的结果。例如，由于对流量信号分析应用程序进行的软件更新执行不当，这是一项新功能，无法以纯文本的形式正确分析流量信号数据。该软件仍会分析 JSON 和其他非文本文件格式，从而导致实时流量控制分析系统生成缺少数据点的预测结果。这种情况可能会导致发生原因输出出现故障，从而可能导致交通信号发生意外。通过提供快速回滚到先前工作应用程序版本的功能，数据保护可以解决此问题描述问题。</block>
  <block id="38b145294d087c4d733df994e6a7b6c1" category="list-text">* 大小和规模。 * 由于数据源和卷的数量不断增加，分析数据的大小每天都在增长。社交媒体，移动应用程序，数据分析和云计算平台是当前大数据市场中的主要数据源，该市场的增长速度非常快，因此需要对数据进行保护，以确保准确的数据运行。</block>
  <block id="80908b4b31d37977701d3694fbc636ac" category="list-text">* Hadoop 的原生数据保护。 * Hadoop 具有一个原生命令来保护数据，但此命令不会在备份期间提供数据的一致性。它仅支持目录级备份。Hadoop 创建的快照为只读快照，不能用于直接重复使用备份数据。</block>
  <block id="e664ca405ed3e90fecf2e085985fe24c" category="section-title">Hadoop 和 Spark 客户面临的数据保护挑战</block>
  <block id="c2d49a2ee903d6d86976c3618079a61d" category="paragraph">Hadoop 和 Spark 客户面临的一个常见挑战是，在数据保护期间，在不对生产集群性能产生负面影响的情况下，缩短备份时间并提高备份可靠性。</block>
  <block id="8d54bea5cb89e665d1a703529f703765" category="paragraph">客户还需要最大限度地减少恢复点目标（ RPO ）和恢复时间目标（ RTO ）停机时间，并控制其内部和基于云的灾难恢复站点，以实现最佳业务连续性。这种控制通常来自企业级管理工具。</block>
  <block id="042be4d2813fd31d6b49e6eeaa1a42c3" category="paragraph">Hadoop 和 Spark 环境非常复杂，因为不仅数据量庞大且不断增长，而且数据的到达速度也在不断提高。在这种情况下，很难从源数据快速创建高效，最新的 DevTest 和 QA 环境。NetApp 认识到这些挑战，并提供了本白皮书中介绍的解决方案。</block>
  <block id="1f60e9ce60971dc2129b30c8820ff343" category="inline-link-macro">接下来： NetApp 为大数据架构提供支持的 Data Fabric 。</block>
  <block id="b8d3f7ee1ffc74c6a96c88a193dc6f1e" category="paragraph"><block ref="b8d3f7ee1ffc74c6a96c88a193dc6f1e" category="inline-link-macro-rx"></block></block>
  <block id="a8a1e11a906a27bd156606bf4717e8e8" category="summary">此支持中心解决方案的架构以 NVIDIA 的预构建工具和 NetApp DataOps 工具包为核心。NVIDIA 的工具可用于使用预构建的型号和管道快速部署高性能 AI 解决方案。NetApp DataOps 工具包可简化各种数据管理任务，以加快开发速度。</block>
  <block id="d51083e81cbf0ec7828af24692206315" category="inline-link-macro">先前：用例。</block>
  <block id="beff34f173af198016bee889c9f9ed7a" category="paragraph"><block ref="beff34f173af198016bee889c9f9ed7a" category="inline-link-macro-rx"></block></block>
  <block id="c779b37f861deb44744634dea201514f" category="inline-link-macro">NVIDIA RIVA</block>
  <block id="ccfdc9ae99a97b7a6b8ad83a329bcdc8" category="paragraph"><block ref="eb3a0fd60dc608626ce6d809beb18359" category="inline-link-macro-rx"></block> 是一款 GPU 加速 SDK ，用于构建多模式对话 AI 应用程序，在 GPU 上提供实时性能。NVIDIA Train ， Aadapt ， and Optimize （ TAO ）工具包提供了一种更快，更简单的方法来加快训练速度，并快速创建高度准确且性能优异的特定域 AI 模型。</block>
  <block id="600ff5755ecd6aa4213eb806162b679e" category="paragraph">NetApp DataOps 工具包是一个 Python 库，可使开发人员，数据科学家，开发运营工程师和数据工程师轻松执行各种数据管理任务。其中包括近乎即时地配置新的数据卷或 JupyterLab 工作空间，近乎即时地克隆数据卷或 JupyterLab 工作空间，以及近乎即时地对数据卷或 JupyterLab 工作空间进行快照，以实现可追溯性和基线化。</block>
  <block id="1c8bd88c9d2cb845c6c27915f4a3fe8e" category="paragraph">下图显示了解决方案架构。环境分为三大类：云，核心和边缘。每个类别都可能在不同的地理位置上分散。例如，云中包含的对象存储包含不同区域的存储分段中的音频文件，而核心则可能包含通过高速网络或 NetApp Cloud Sync 链接的数据中心。边缘节点表示各个人工代理的日常工作平台，在这些平台中，交互式信息板工具和麦克风可用于直观显示情绪并从与客户的对话中收集音频数据。</block>
  <block id="5d103a663d28ddc9aa2af5f7b958e52c" category="inline-link">Riva</block>
  <block id="cc7a5a83afae781789c3a002465500b5" category="inline-link">TAO 工具包</block>
  <block id="9595827147dc1170c44979ae1fcabaa6" category="paragraph">在 GPU 加速数据中心中，企业可以使用 NVIDIA<block ref="cfd3aefe24e0725c1b0424dd8b503dc1" category="inline-link-rx"></block> 用于构建对话式 AI 应用程序的框架<block ref="ccdd6931e40e98163a0ae3c3c3bfb185" category="inline-link-rx"></block> 使用传输 L 学习技术连接模型修剪和重新培训。这些计算应用程序和工作流由提供支持<block ref="5d9fb1d86d92052bc5dca8ba91d13ff2" category="inline-link-rx"></block>，实现 ONTAP 提供的最佳数据管理功能。通过该工具包，企业数据团队可以利用相关的结构化和非结构化数据，通过快照和克隆快速构建模型的原型，以实现可追溯性，版本控制， A/B 测试，从而提供安全性，监管， 和合规性。请参见一节 <block ref="3f1432f6921bc0c51d34759cb0d748ab" category="inline-link-macro-rx"></block> 有关详细信息：</block>
  <block id="816c3453eeba98af344f96d7eefe8834" category="paragraph">此解决方案演示了音频文件处理， NLP 模型培训，传输学习和数据管理详细步骤。生成的端到端管道生成一个情感摘要，该摘要会实时显示在人力支持代理的信息板上。</block>
  <block id="b6fb1598d37d2537eed4160a485b790e" category="paragraph"><block ref="b6fb1598d37d2537eed4160a485b790e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="62519b55e4debcf57caf02c89620de61" category="cell">响应延迟测试</block>
  <block id="b763dc0a5ffab97a986c74098214cae6" category="cell">时间（毫秒）</block>
  <block id="08fa9c0a2e18301dd14e18c393fb4280" category="cell">数据处理</block>
  <block id="d3d9446802a44259755d38e6d163e820" category="cell">10</block>
  <block id="08db96f19d3c99c2b42fd180d9d81580" category="cell">推理</block>
  <block id="212e6da10eee5f14935bd37b84fe9684" category="paragraph">这些响应时间测试针对 560 个对话中 50 ， 000 多个音频文件运行。每个音频文件的大小为 ~100KB ，转换为 wav 时大小为 ~1 MB 。数据处理步骤会将 MP3 转换为 wav 文件。推理步骤会将音频文件转换为文本，并从文本中提取感受。这些步骤彼此独立，可以并行处理以加快此过程。</block>
  <block id="c18e24981c583441c6975f2116288cb7" category="paragraph">考虑到在商店之间传输数据的延迟，经理应该能够在句子结尾的一秒内看到实时情感分析的更新。</block>
  <block id="1c4968697a5851a64ad0fbf1b594e919" category="section-title">NVIDIA Riva 硬件</block>
  <block id="17bc10091293fdc562a6db69940ee924" category="cell">os</block>
  <block id="4c8be35e5fe3d8471f378a69f74c0ab6" category="cell">Linux x86_64</block>
  <block id="4d240f00b5a82cfaaf594cdc72f552f3" category="cell">GPU 内存（ As1 ）</block>
  <block id="3fa503e0bb3bf46423ef9176821a1f6c" category="cell">流模型： ~5600 MB 非流模型： ~3100 MB</block>
  <block id="6345afe417f42d9e0cf6a269bff00b4c" category="cell">GPU 内存（ NLP ）</block>
  <block id="217941fb2e441b0bae1b5fec0b454c31" category="cell">~每个 Bert 型号 500 MB</block>
  <block id="7e04ebd38c78635d1f8aa53de0dde49b" category="section-title">NVIDIA TAO 工具包硬件</block>
  <block id="03282e46abfd7449ab38bb851caf2c8d" category="cell">系统 RAM</block>
  <block id="edaf98e5dae9931cbd74a93b3dd93849" category="cell">32 GB</block>
  <block id="6ddfc451ef4f9a7613468cd288d2ab3e" category="cell">GPU RAM</block>
  <block id="2b55387dd066c5bac646ac61543d152d" category="cell">CPU</block>
  <block id="04911a799cc8712b473ed5a3cb2b8904" category="cell">8 个核心</block>
  <block id="fceec3562665d08f1dd24689f68f0f29" category="cell">NVIDIA （ A100 ， V100 和 RTX 30x0 ）</block>
  <block id="34df20bab5e85dc75bfc94ef569cced9" category="cell">SSD</block>
  <block id="2f9289dfcac06a2ba95650d7e24ea9e8" category="cell">100 GB</block>
  <block id="19aa61315132dbea1d19c7aeeef5f5b2" category="section-title">闪存存储系统</block>
  <block id="fd5487a1e906d6cd514dbbc16f17a489" category="paragraph">ONTAP 9.9 是 NetApp 推出的最新一代存储管理软件，可帮助企业打造现代化的基础架构并过渡到云就绪数据中心。借助行业领先的数据管理功能，无论数据位于何处， ONTAP 都可以通过一组工具来管理和保护数据。您还可以将数据自由移动到需要的任何位置：边缘，核心或云。ONTAP 9.9 包含许多功能，可简化数据管理，加快和保护关键数据，并在混合云架构中实现下一代基础架构功能。</block>
  <block id="78a2efe59d4ad6ad51556ea77f5fdec3" category="paragraph"><block ref="f0ec1a9d50acb3759e364a1cdfa9961d" category="inline-link-rx"></block> 是一项 NetApp 服务，用于快速安全地同步数据，使您可以在内部 NFS 或 SMB 文件共享之间将文件传输到以下任一目标：</block>
  <block id="df2c24964ca3e99761acc48b2c8a75c9" category="list-text">NetApp ONTAP S3</block>
  <block id="1a4c7c9b6e3157ccd0101fd0836c0bfc" category="list-text">NetApp Cloud Volumes Service</block>
  <block id="ddcf3699b41cd4c4ee5be4b9dd95c1e6" category="list-text">Amazon Simple Storage Service （ Amazon S3 ）</block>
  <block id="8224436b00c48149c863f4b17219a19d" category="list-text">Amazon Elastic File System （ Amazon EFS ）</block>
  <block id="52745271323ee9ea30e3a37d0338d118" category="list-text">Azure Blob</block>
  <block id="833c2c211a541e50ad94433664e4b5c1" category="list-text">Google Cloud 存储</block>
  <block id="5446a6bee3301e1f52824fc0affa6299" category="list-text">IBM 云对象存储</block>
  <block id="1b238365e840da0711b49e8f646e2fdf" category="paragraph">Cloud Sync 可将文件快速安全地移动到您需要的位置。数据传输完成后，即可在源和目标上完全使用。Cloud Sync 会根据您预定义的计划持续同步数据，并仅移动增量，从而最大限度地减少在数据复制上花费的时间和金钱。Cloud Sync 是一款软件即服务（ SaaS ）工具，易于设置和使用。由 Cloud Sync 触发的数据传输由数据代理执行。您可以在 AWS ， Azure ， Google 云平台或内部部署 Cloud Sync 数据代理。</block>
  <block id="a5c952f5be43013a024d778712474fbc" category="paragraph">StorageGRID 软件定义的对象存储套件可无缝支持公有，私有云和混合多云环境中的各种用例。借助行业领先的创新技术， NetApp StorageGRID 可存储，保护和保留非结构化数据，以供多用途使用，包括长期的自动化生命周期管理。有关详细信息，请参见<block ref="7660f0463c83c682b9f091117b07c3b3" category="inline-link-rx"></block> 站点</block>
  <block id="6ffce2da93d4b296032f30d7b2adea01" category="paragraph">下表列出了实施此解决方案所需的软件组件。在任何特定解决方案实施中使用的软件组件可能会因客户要求而异。</block>
  <block id="d20072ce64f4d9efd57e036d2b7c30ec" category="cell">主机</block>
  <block id="7915eebeca25d928212b5d457786a549" category="cell">Riva （原 JarVis ）</block>
  <block id="1bf6e69c18341244d990250bf5aa3ce0" category="cell">1.4.0</block>
  <block id="7a2cd4790985cbbb0b362dfe8e59d991" category="cell">TAO 工具包（以前称为传输学习工具包）</block>
  <block id="55c82b601deae028c1c5e87fd820923d" category="cell">3.0</block>
  <block id="67c6ecbcd91c613e8659b3f0c4b01510" category="cell">9.9.1</block>
  <block id="8bec4fb7fbc1430e393d3f41063748e7" category="cell">DGX 操作系统</block>
  <block id="43ff194f410f3e93a8680bef5ba51e50" category="cell">5.1</block>
  <block id="1b13fe3d4acac980a061d9efb92000d5" category="cell">DOTK</block>
  <block id="d233662f9c26d1a06118c93ef2fd1de9" category="cell">2.0.0</block>
  <block id="76e535c7d7533499b0d86f60a0d15b84" category="section-title">NVIDIA Riva 软件</block>
  <block id="5d7bf724a19463b3251c61a94a446c4c" category="cell">如果不使用 DGX ，则大于 19.02 （安装了 NVIDI-Docker ） &gt;=19.03</block>
  <block id="3ff6010d41ffb33d6f0971a202e76ad7" category="cell">NVIDIA 驱动程序</block>
  <block id="616120c1963dd46f2321dd37e823f8a0" category="cell">对于数据中心 GPU ，则为 465.19.01+ 418.40+ ， 440.33+ ， 450.51+ ， 460.27+</block>
  <block id="88f8128d405513d54a3e9831c73f87a0" category="cell">容器操作系统</block>
  <block id="73611f9a837b7a25dad3a9c5d1a98658" category="cell">Ubuntu 20.04</block>
  <block id="a33b7755e5f9b504d2d038eaca4ff28d" category="cell">CUDA</block>
  <block id="a26b47ba45087eadbeaa7c4802b3a8c8" category="cell">11.3.0</block>
  <block id="d92ef06e9564a9db573d075b4220057e" category="cell">cucBLAS</block>
  <block id="a8a364c27ce7406b7be591b4f973d5bb" category="cell">11.5.1.101</block>
  <block id="9bfd6cd63a5597c998aa2d96564f5c34" category="cell">cuDNN</block>
  <block id="15daa8f1432fd7e2b07f63097623dfab" category="cell">8.2.0.41</block>
  <block id="1ed15cc4178fd8ec4d845042a8f1ead0" category="cell">NCCL</block>
  <block id="f10585a0c5c8f535143471006baef867" category="cell">2.9.6</block>
  <block id="61918500e2bc645b2aea3f447086a8a5" category="cell">TensorRT</block>
  <block id="086934e5e95d3c797fc75f38fb3d086c" category="cell">7.2.3.4</block>
  <block id="d024876954df77538311467564f00917" category="cell">Triton 推理服务器</block>
  <block id="0d6f7e6ce6f1553544acb14682c8eb07" category="cell">2.9.0</block>
  <block id="2efc85a476098fde0ecbf8d81505b612" category="section-title">NVIDIA TAO 工具包软件</block>
  <block id="cb6c22f673a55391483c7f040d8cf637" category="cell">Ubuntu 18.04 LTS</block>
  <block id="23eeeb4347bdd26bfc6b7ee9a3b755dd" category="cell">Python</block>
  <block id="c80362c25c18981fcf433e78dda5de78" category="cell">&gt;=3.6.9</block>
  <block id="aec7ff22e2f74b581cffbfa59e63f347" category="cell">Docker — ce</block>
  <block id="21ca3af3ea5e6a282911a64dbf5ced7a" category="cell">19.03.5</block>
  <block id="0cf76d9b00333f4396d0424ae164dd07" category="cell">Docker API</block>
  <block id="ca2b7e7213f7ba5d4b3923e807af27df" category="cell">1.40</block>
  <block id="ad2f80b0463af47fcb7430e0e1789841" category="cell">nvidia-container-toolkit</block>
  <block id="12b58130c1d9383cf3bf63391bd04721" category="cell">&gt;1.3.0-1</block>
  <block id="cec57b9746d41fd1c1749d591dbd7baf" category="cell">nvidia-container-runtime</block>
  <block id="68b90d96e3d934d65890ff695d37f354" category="cell">3.4.0-1.</block>
  <block id="f235b98dbe494fca328354abf0b52858" category="cell">nvidia-docker2.</block>
  <block id="10439f6f665bce43173e2871a0b7bfc6" category="cell">2.5.0-1.</block>
  <block id="fd3811d814e856dc6a43152673bb6753" category="cell">NVIDIA 驱动程序</block>
  <block id="06c61cdd8c93e750b3e0d4e2537416ea" category="cell">&gt;455</block>
  <block id="b6da1806d8ccb5327c3d80bbcfea4737" category="cell">Python-pip</block>
  <block id="7b043cb99d00fe56df3fead569b1a4de" category="cell">&gt;21.06</block>
  <block id="3bdf92e45d10e51e2bdc2b16cf33f345" category="cell">nvidia-pyindex</block>
  <block id="9ca445b9db010a99239196af5ac3a8b9" category="cell">最新版本</block>
  <block id="cf87f69879c53ebf670ee8bd793ad7ba" category="section-title">用例详细信息</block>
  <block id="7cb906d40b2e5bad2205a60ef8b6a019" category="list-text">情感分析</block>
  <block id="52a38da70697d6c80e3b6a204f64263f" category="paragraph"><block ref="52a38da70697d6c80e3b6a204f64263f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a8ff4a485cc084b2a4b5bb829cf18055" category="paragraph">语音到文本使用情形首先会为支持中心载入音频文件。然后，根据 Riva 所需的结构对该音频进行处理。如果尚未将音频文件拆分为其分析单元，则必须先执行此操作，然后再将音频传递给 Riva 。处理完此音频文件后，它将作为 API 调用传递到 Riva 服务器。该服务器采用其托管的众多型号之一，并返回响应。此语音到文本（自动语音识别的一部分）将返回音频的文本表示形式。此时，管道将切换到情感分析部分。</block>
  <block id="230007c23660d290efdea5586b1716aa" category="paragraph">对于情感分析，自动语音识别输出的文本将作为文本分类的输入。文本分类是用于将文本分类为任意数量的类别的 NVIDIA 组件。对于支持中心对话，情绪类别从正面到负面不等。可以使用一个组套来评估模型的性能，以确定微调步骤是否成功。</block>
  <block id="3390cebd79348bc76a1e5eb5f169bedf" category="paragraph"><block ref="3390cebd79348bc76a1e5eb5f169bedf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="952b3f5758e644ef2558d59d3aace0b1" category="inline-link">NVIDIA NGC 目录</block>
  <block id="4fa0a0d712258621946173068bf4f7e0" category="paragraph">在 TAO 工具包中，语音到文本和情感分析也使用类似的管道。主要区别在于使用了微调模型所需的标签。TAO 工具包管道从处理数据文件开始。然后是经过预先培训的型号（来自<block ref="aaddb3bb47bcb0ca6e2a55cdce808e9b" category="inline-link-rx"></block>）。经过微调的模型会根据其相应的性能指标进行评估，如果性能比预先训练的模型更高，则会部署到 Riva 服务器。</block>
  <block id="587796d49571c1c4d5c89993d7ed01dd" category="inline-link-macro">接下来：设计注意事项</block>
  <block id="1165e49145cd3a7ebc2b75e325d8797a" category="paragraph"><block ref="1165e49145cd3a7ebc2b75e325d8797a" category="inline-link-macro-rx"></block></block>
  <block id="431db7b0dc79bb29f07c20c6060c3338" category="summary">本节列出了适用于此解决方案的 Jupyter 笔记本电脑和其他资源。</block>
  <block id="de42653a3a04e4aefa258105632011d4" category="doc">视频和演示</block>
  <block id="eeb22c31d24f52a9b8225da48c32dd15" category="inline-link-macro">先前：验证结果。</block>
  <block id="234bbb7420397102b6a782bcaafff71a" category="paragraph"><block ref="234bbb7420397102b6a782bcaafff71a" category="inline-link-macro-rx"></block></block>
  <block id="4b8db041d93aa27fd0cc94a261e224ca" category="inline-link-macro">"Support-Center-sentiment-Analysis-Pipeline.ipynb "</block>
  <block id="4e336784d7218f9fd7024470cba6b522" category="inline-link">"Support-Center-Mode-Transfer-Learning-and-fine-Tuned.ipynb "</block>
  <block id="46e3dcdd2c6c30a1d9fcf40d37f0deb3" category="paragraph">有两台笔记本电脑包含情感分析管道：<block ref="8ed620ac9482ce00db4c0f6de7250148" category="inline-link-rx"></block> 和 <block ref="ff8619e3bd3fbeea07c38337a7b773f7" category="inline-link-macro-rx"></block>。这些笔记本电脑共同演示了如何开发管道，以便使用根据用户数据微调的最先进深度学习模型，载入支持中心数据并从每句话中提取情感。</block>
  <block id="fa8c0b2056c13341c1455ad44cc91889" category="section-title">支持中心—情感分析管道 .ipynb</block>
  <block id="6b3450c2b921c398bbf90a1aee0b016c" category="paragraph">此笔记本电脑包含推理 Riva 管道，用于载入音频，将其转换为文本以及提取情感以供外部信息板使用。如果尚未下载和处理数据集，则会自动下载和处理该数据集。该笔记本电脑的第一部分是语音到文本，用于将音频文件转换为文本。接下来是 " 情感分析 " 部分，该部分将提取每个文本句子的感受，并以类似于建议的信息板的格式显示这些结果。</block>
  <block id="63abda3d2c420172da9a3a20c7f64dda" category="admonition">此笔记本电脑必须在模型训练和微调之前运行，因为必须下载并转换为正确格式的 mp3 数据集。</block>
  <block id="33e7b29c6dc1bb2252ba04ad52f5b1aa" category="paragraph"><block ref="33e7b29c6dc1bb2252ba04ad52f5b1aa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="295c2feb943bbe2efca238849828084e" category="section-title">支持中心—模型训练和微调。 ipynb</block>
  <block id="6efbeb8cfc7e387edbf91bad41170349" category="paragraph">在执行此笔记本电脑之前，必须先设置 TAO 工具包虚拟环境（有关安装说明，请参见 " 命令概述 " 中的 "TAO 工具包 " 一节）。</block>
  <block id="a9d805c9ddfdf62e60632a9754e29404" category="paragraph">此笔记本电脑依靠 TAO 工具包根据客户数据微调深度学习模型。与上一个笔记本电脑一样，这一款笔记本电脑分为两个部分，分别用于语音到文本和情感分析组件。每个部分都将介绍数据处理，模型培训和微调，结果评估和模型导出。最后，我们将在最后一节中介绍如何部署这两种经过微调的型号，以便在 Riva 中使用。</block>
  <block id="b40454c57dd60f999f3243514cd90ede" category="paragraph"><block ref="b40454c57dd60f999f3243514cd90ede" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f89bf51287609a0c0cf7563b31265c06" category="paragraph"><block ref="f89bf51287609a0c0cf7563b31265c06" category="inline-link-macro-rx"></block></block>
  <block id="00a9f41b5383bf6bcb5b7f6540d427b4" category="summary">NVIDIA ， AWS ， Google 等公司发布的经过预先训练的建模工具，凭借当前最先进的状态，现在可以相对轻松地建立一个包含复杂模型的端到端管道并进行自定义。</block>
  <block id="14e5cae1e8e56eca8add5bdcedfe2335" category="inline-link-macro">上一篇：支持中心分析。</block>
  <block id="d39a6e05d58eb4f71cae7257dc52a1d0" category="paragraph"><block ref="d39a6e05d58eb4f71cae7257dc52a1d0" category="inline-link-macro-rx"></block></block>
  <block id="710217ef02bea8d1d76bc6fc0e7bc056" category="paragraph">由于这些支持中心处理的呼叫数量众多，如果手动执行，则可能需要很长时间才能评估呼叫性能。传统方法，例如字包计数和其他方法，可以实现一定程度的自动化，但这些方法不能捕获动态语言的更细微的方面和语义上下文。AI 建模技术可用于自动执行其中一些更精细的分析。此外，随着 NVIDIA ， AWS ， Google 等公司发布的最新的经过预先培训的建模工具，现在可以相对轻松地建立一个包含复杂模型的端到端管道并进行自定义。</block>
  <block id="dd4541bcdb4728a1a380e825494f08e2" category="paragraph">支持中心情感分析的端到端管道，可在员工与来电者交谈时实时载入音频文件。然后，这些音频文件将进行处理，以便在将其转换为文本格式的语音到文本组件中使用。对话中的每一句话都会收到一个标签，用于指示情绪（积极，消极或中立）。</block>
  <block id="cfc9b6a29659e2208f66d876bd355200" category="paragraph">情绪分析可以为对话提供一个重要方面，用于评估通话性能。这些情感为员工和来电者之间的互动增加了一个深度。人工智能辅助的情绪信息板可为经理实时跟踪对话中的情绪，并对员工过去的通话进行回顾性分析。</block>
  <block id="2357d01362feabb1716e49b27d23f9cf" category="inline-link">NVIDIA Maxine</block>
  <block id="a2415fcdba82ba111e08286b17d98943" category="paragraph">预构建的工具可以通过强大的方式组合在一起，快速创建端到端 AI 管道来解决此问题。在这种情况下，可以使用 NVIDIA Riva 库执行两项串联任务：音频抄写和情感分析。第一种是受监控学习信号处理算法，第二种是受监控学习 NLP 分类算法。这些即装即用的算法可以使用 NVIDIA TAO 工具包针对与业务相关的数据的任何相关使用情形进行微调。这样，构建的解决方案就会更加准确，功能更强大，只需成本和资源的一小部分。客户可以采用<block ref="2aa9e1b3ec0ddf7f0bf09cdb2976222a" category="inline-link-rx"></block> 支持中心设计中 GPU 加速视频会议应用程序的框架。</block>
  <block id="076dd41fe8ba902e5439b5ba07f330ee" category="paragraph">以下用例是此解决方案的核心。这两种使用情形都使用 TAO 工具包进行模型微调，使用 Riva 进行模型部署。</block>
  <block id="bc176e8f914533ec222bba678e13955f" category="paragraph">为了分析员工和客户之间的支持中心互动，可以通过管道进行每一次以音频通话形式进行的客户对话，以得出句子级别的感受。然后，人类可以验证这些情感，为这些情感提供合理的理由，或者根据需要进行调整。然后，标记的数据将传递到微调步骤，以改善情绪预测。如果已存在标记的情感数据，则可以加快模型微调。无论哪种情况，管道都可通用于需要输入音频和对句子进行分类的其他解决方案。</block>
  <block id="91fa9ce0e0cb723f35d6cc55f796be7e" category="paragraph"><block ref="91fa9ce0e0cb723f35d6cc55f796be7e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8836d456396ee0865c317994c018a24b" category="paragraph">AI Sentiment 输出会上传到外部云数据库或公司管理的存储系统。情感输出将从这一更大的数据库传输到本地存储，以在为经理显示情感分析的信息板中使用。信息板的主要功能是与客户服务员工实时互动。经理可以通过实时更新每句话的感受，并对员工过去的表现或客户反应进行历史回顾，评估员工的通话并提供反馈。</block>
  <block id="586779135ffb596b1f1844ada64164b6" category="paragraph"><block ref="586779135ffb596b1f1844ada64164b6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="539788a6fdaffc74393f282739bdd3e2" category="paragraph">。 <block ref="95472f01c3cd86dddef6619dbb9af815" category="inline-link-macro-rx"></block> 即使在 Riva 推理管道生成情感标签之后，也可以继续管理数据存储系统。这些 AI 结果可以上传到 NetApp DataOps 工具包管理的数据存储系统。数据存储系统必须能够管理数百个插件并每分钟进行一次选择。本地设备存储系统实时查询较大的数据存储以进行提取。此外，还可以查询较大的数据存储实例以查找历史数据，从而进一步增强信息板体验。NetApp DataOps 工具包可通过快速克隆数据并将其分发到使用该数据的所有信息板，从而为这两种用途提供便利。</block>
  <block id="679db67ee98260ef471da732862ed356" category="list-text">员工经理</block>
  <block id="7e6beec614d536589c47de8f77fa1b1a" category="list-text">数据工程师 / 数据科学家</block>
  <block id="a2ce7e25564bee3c78076bcff87d1329" category="list-text">IT 管理员（内部，云或混合）</block>
  <block id="8dcd09ac05ad9012a6ff01f7b5fc337b" category="paragraph">在整个对话过程中跟踪情绪是评估员工绩效的宝贵工具。通过使用 AI 信息板，经理可以实时了解员工和来电者如何改变自己的感受，从而可以开展实时评估和指导会议。此外，企业还可以从参与语音对话，文本聊天机器人和视频会议的客户中获得宝贵的客户见解。此类客户分析可利用大规模多模式处理功能以及现代化的一流 AI 模型和工作流。</block>
  <block id="b7c29e65097b6ed45e464f6492ff670d" category="paragraph">在数据方面，支持中心每天都会处理大量音频文件。NetApp DataOps 工具包可帮助执行此数据处理任务，以便定期对模型和情感分析信息板进行微调。</block>
  <block id="1da289b166db713f9283c5be78ef5b96" category="paragraph">IT 管理员还可以从 NetApp DataOps 工具包中受益，因为它允许他们在部署和生产环境之间快速移动数据。此外，还必须对 NVIDIA 环境和服务器进行管理和分布，以便进行实时推理。</block>
  <block id="7179915e029316714169ac136027ef31" category="paragraph"><block ref="7179915e029316714169ac136027ef31" category="inline-link-macro-rx"></block></block>
  <block id="c1579c333c7c7a4e52136c7f58a7efc6" category="summary">本技术报告中建议的解决方案已经证明能够为交付如此卓越的客户体验提供支持，现在的挑战是确保企业采取行动来实现 AI 基础架构和工作流的现代化。</block>
  <block id="9c5e72cb1709251063c12e4bddb1ba12" category="inline-link-macro">上一页：视频和演示。</block>
  <block id="2f6461cd01fcb0c2d85704a563bd7c19" category="paragraph"><block ref="2f6461cd01fcb0c2d85704a563bd7c19" category="inline-link-macro-rx"></block></block>
  <block id="50d6e8cef34560d1d68c6688a12b1cb8" category="paragraph">随着客户体验日益被视为关键的竞争战场， AI 增强型全球支持中心成为几乎每个行业的公司都无法忽视的关键组成部分。本技术报告中建议的解决方案已经证明能够为交付如此卓越的客户体验提供支持，现在的挑战是确保企业采取行动来实现 AI 基础架构和工作流的现代化。</block>
  <block id="f6e349295b2165b25a412793116b8675" category="paragraph">AI 在客户服务中的最佳实施方式不是取代人工代理。相反， AI 可以通过实时情感分析，争议上报和多模式情感计算，让他们能够创造卓越的客户体验，从而检测语言，非语言和面部线索，通过这些线索，全面的 AI 模型可以大规模地提出建议，并补充个人代理可能缺少的内容。AI 还可以更好地匹配具有当前可用代理的特定客户。利用 AI ，企业可以从客户对提供商产品，服务和品牌形象的想法和印象中汲取宝贵的意见。</block>
  <block id="eb5cb6f03236a80f7ddd5085afa95729" category="paragraph">解决方案还可用于为支持代理构建时间序列数据，以用作客观的性能评估指标。传统的客户满意度调查通常缺乏足够的响应。通过收集员工和客户的长期情绪，雇主可以就支持代理的表现做出明智的决策。</block>
  <block id="aa20fc291fbb8ceda8651d8d8ee9dba6" category="paragraph">NetApp ， SFL 科学，开源业务流程框架和 NVIDIA 相结合，将最新技术作为托管服务集于一身，并具有极大的灵活性，可加快技术采用速度，加快新 AI/ML 应用程序的上市速度。这些高级服务在内部环境中提供，可轻松移植到云原生环境以及混合部署架构中。</block>
  <block id="71fd14327d5bf7e725ab97e00192b238" category="paragraph"><block ref="71fd14327d5bf7e725ab97e00192b238" category="inline-link-macro-rx"></block></block>
  <block id="9c08a0abcced906f3225e86f61dd598c" category="paragraph"><block ref="9c08a0abcced906f3225e86f61dd598c" category="inline-link-macro-rx"></block></block>
  <block id="c5648cc9e6e76ab4aa041d71661d0288" category="list-text">3D 交互式演示</block>
  <block id="26e071d5769be8e940617a0c8dd5c22d" category="inline-link">www.netapp.com/ai</block>
  <block id="9e22db1b830d668e86d5dc1b5c204555" category="paragraph"><block ref="9e22db1b830d668e86d5dc1b5c204555" category="inline-link-rx"></block></block>
  <block id="1fa584a3d1190f1a7fdded0c91412cac" category="list-text">直接与 NetApp AI 专家联系</block>
  <block id="91fc02253adb6a9eea2156b684aa70f5" category="inline-link"><block ref="91fc02253adb6a9eea2156b684aa70f5" category="inline-link-rx"></block></block>
  <block id="488d7301e5d1a52040c33186d7e11657" category="paragraph"><block ref="488d7301e5d1a52040c33186d7e11657" category="inline-link-rx"></block></block>
  <block id="787dd83fbbc162f0279e320ada1f7c0b" category="list-text">《采用 NetApp 解决方案的 NVDIA 基本命令平台》简介</block>
  <block id="5541299dd0999c42fcd24fd754001e38" category="inline-link"><block ref="5541299dd0999c42fcd24fd754001e38" category="inline-link-rx"></block></block>
  <block id="ac527e3c2b2d8a080840aa28c13b127b" category="paragraph"><block ref="ac527e3c2b2d8a080840aa28c13b127b" category="inline-link-rx"></block></block>
  <block id="465b9c508fba1d27d188eb21e0655293" category="list-text">NetApp 的 AI 10 大理由信息图</block>
  <block id="75048e22ffd1c45ce07e6cae3170780a" category="inline-link"><block ref="75048e22ffd1c45ce07e6cae3170780a" category="inline-link-rx"></block></block>
  <block id="e2435a6f01dee5a11f6cd698a292183d" category="paragraph"><block ref="e2435a6f01dee5a11f6cd698a292183d" category="inline-link-rx"></block></block>
  <block id="66d4373905c5c7c0a3f51e5480d443b2" category="list-text">医疗保健领域的人工智能：深入学习如何在 lung-CT 扫描中识别 COVID-19 病变白皮书</block>
  <block id="2fb5802df8b60fe09d232df217cc9ba6" category="inline-link"><block ref="2fb5802df8b60fe09d232df217cc9ba6" category="inline-link-rx"></block></block>
  <block id="d1e9d43080e6c2364ee86ac930ae1341" category="paragraph"><block ref="d1e9d43080e6c2364ee86ac930ae1341" category="inline-link-rx"></block></block>
  <block id="2ece031fbb30496ba2ec244a07557107" category="list-text">医疗保健领域的人工智能：监控医疗保健环境中的面部掩模使用情况白皮书</block>
  <block id="aa895997d9bc7e84d90779885cb936b7" category="inline-link"><block ref="aa895997d9bc7e84d90779885cb936b7" category="inline-link-rx"></block></block>
  <block id="4ac3d75f4e132824f0fe3a418d42a9f9" category="paragraph"><block ref="4ac3d75f4e132824f0fe3a418d42a9f9" category="inline-link-rx"></block></block>
  <block id="ff11da2c36a9883c6eb658395f3de353" category="list-text">医疗保健领域的人工智能：诊断成像技术报告</block>
  <block id="41575d740e0d837694e2fa66ce618124" category="inline-link"><block ref="41575d740e0d837694e2fa66ce618124" category="inline-link-rx"></block></block>
  <block id="61a15cd6b61d637fb54ae6ae99ae39d5" category="paragraph"><block ref="61a15cd6b61d637fb54ae6ae99ae39d5" category="inline-link-rx"></block></block>
  <block id="1527888e6b729290296c51cf9c3aeeec" category="list-text">AI for Retail ：使用 NVIDIA Riva 的 NetApp 对话 AI</block>
  <block id="17a311ea95071308f8bb7a7ce3b073ee" category="inline-link"><block ref="17a311ea95071308f8bb7a7ce3b073ee" category="inline-link-rx"></block></block>
  <block id="dc1f6c62d8de3b68ec946b66d053f5a7" category="paragraph"><block ref="dc1f6c62d8de3b68ec946b66d053f5a7" category="inline-link-rx"></block></block>
  <block id="2281741ceb773b1efc91b48b4e5e04fe" category="list-text">NetApp ONTAP AI 解决方案简介</block>
  <block id="4070d4ea40d3cf7f99e4e941ca73d200" category="inline-link"><block ref="4070d4ea40d3cf7f99e4e941ca73d200" category="inline-link-rx"></block></block>
  <block id="a32cc63ad53dc74caf680b96a921ad3b" category="paragraph"><block ref="a32cc63ad53dc74caf680b96a921ad3b" category="inline-link-rx"></block></block>
  <block id="c6b4ec978259e83d537f6a179912448a" category="list-text">NetApp DataOps 工具包解决方案简介</block>
  <block id="c50b3ec30c711b6233dd7753f12165d4" category="inline-link"><block ref="c50b3ec30c711b6233dd7753f12165d4" category="inline-link-rx"></block></block>
  <block id="a045bf4eb32fbbf6c351d4c3cbd5932c" category="paragraph"><block ref="a045bf4eb32fbbf6c351d4c3cbd5932c" category="inline-link-rx"></block></block>
  <block id="9399af78c2a9b2a197612e42bf8b8f79" category="list-text">NetApp AI 控制平面解决方案简介</block>
  <block id="c771257beb97f479ebb6d342d91b61bd" category="inline-link"><block ref="c771257beb97f479ebb6d342d91b61bd" category="inline-link-rx"></block></block>
  <block id="ce6060d7bc79a57fdb337f6364f0e8a9" category="paragraph"><block ref="ce6060d7bc79a57fdb337f6364f0e8a9" category="inline-link-rx"></block></block>
  <block id="b6e1af8dc83073dfa46f061507b15586" category="list-text">《利用 Data Drive AI 转变行业》电子书</block>
  <block id="795a425d6438d3f619ddd3a7ac1ff64c" category="inline-link"><block ref="795a425d6438d3f619ddd3a7ac1ff64c" category="inline-link-rx"></block></block>
  <block id="195010aa6331d4b94de36f6aa5cf3fc7" category="paragraph"><block ref="195010aa6331d4b94de36f6aa5cf3fc7" category="inline-link-rx"></block></block>
  <block id="4dcaafba5ac7511b65c0f3a3688f8d81" category="list-text">NetApp EF 系列 AI 解决方案简介</block>
  <block id="385bae1ac9580238d4ef22dad99878c3" category="inline-link"><block ref="385bae1ac9580238d4ef22dad99878c3" category="inline-link-rx"></block></block>
  <block id="5bbcd3b785c7ecb740b1302ea68fb4ff" category="paragraph"><block ref="5bbcd3b785c7ecb740b1302ea68fb4ff" category="inline-link-rx"></block></block>
  <block id="e72de1f0850154df8bf93fae76b2276d" category="list-text">NetApp AI 和联想 ThinkSystem for AI 推理解决方案简介</block>
  <block id="883d1d69b62bc20ea26446649b6c95b0" category="inline-link"><block ref="883d1d69b62bc20ea26446649b6c95b0" category="inline-link-rx"></block></block>
  <block id="74686a12110c0c39ad22ac2252bcb1a1" category="paragraph"><block ref="74686a12110c0c39ad22ac2252bcb1a1" category="inline-link-rx"></block></block>
  <block id="8954bee2812529847e7f3108185fc57d" category="list-text">NetApp AI 和联想 ThinkSystem for Enterprise AI 和 ML 解决方案简介</block>
  <block id="f877ccffca68b901c2c61513c04dbf37" category="inline-link"><block ref="f877ccffca68b901c2c61513c04dbf37" category="inline-link-rx"></block></block>
  <block id="214ebd5c8513ce31087d4bf0cd12af76" category="paragraph"><block ref="214ebd5c8513ce31087d4bf0cd12af76" category="inline-link-rx"></block></block>
  <block id="7cbca96fc14ecadf4054303e98a81787" category="list-text">NetApp 和 NVIDIA —重新定义人工智能视频的可能</block>
  <block id="cb9dfd830902f3481279d486cd9ddd0d" category="inline-link"><block ref="cb9dfd830902f3481279d486cd9ddd0d" category="inline-link-rx"></block></block>
  <block id="c7531fbb829ae07f04aab76de6fad46c" category="paragraph"><block ref="c7531fbb829ae07f04aab76de6fad46c" category="inline-link-rx"></block></block>
  <block id="f521e3eae9fd2145ce8aeede6602641d" category="summary">本节介绍此解决方案的不同组件的设计注意事项。</block>
  <block id="5b1c62f1e35074e19185d9341b492c54" category="inline-link-macro">先前版本：架构。</block>
  <block id="b180067c966e23ba80c92f3bb1bf6745" category="paragraph"><block ref="b180067c966e23ba80c92f3bb1bf6745" category="inline-link-macro-rx"></block></block>
  <block id="35ff22a5291df56d5075c29d8dc65044" category="section-title">网络和计算设计</block>
  <block id="49d41bdb2234e0a4330f0c9d7d03853a" category="paragraph">根据数据安全性的限制，所有数据都必须保留在客户的基础架构或安全环境中。</block>
  <block id="5a20c2b759137410d60f5ce368ca45d2" category="paragraph"><block ref="5a20c2b759137410d60f5ce368ca45d2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4d6e133bd239a98d559f693ee2ff5ecc" category="section-title">存储设计</block>
  <block id="3051d856c7b26f6d385279d67a8a532b" category="paragraph">NetApp DataOps 工具包是用于管理存储系统的主要服务。DataOps 工具包是一个 Python 库，可使开发人员，数据科学家，开发运营工程师和数据工程师轻松执行各种数据管理任务，例如近乎即时地配置新的数据卷或 JupyterLab 工作空间，近乎即时地克隆数据卷或 JupyterLab 工作空间， 以及接近瞬时的数据卷快照或 JupyterLab 工作空间快照，以实现可追溯性或基线化。此 Python 库可以用作命令行实用程序或函数库，可以导入到任何 Python 程序或 Jupyter Notebook 中。</block>
  <block id="6f9e8585e5f750b8ceb149639b1e25e6" category="section-title">RIVA 最佳实践</block>
  <block id="7ecab6bd65c2f169e987be2f59219357" category="inline-link">最佳数据实践</block>
  <block id="f51b8fa6c731ea53318149e50e826ddb" category="paragraph">NVIDIA 提供了多种常规功能<block ref="f6aee1daf7f2fd9cd207fcd26f08d8be" category="inline-link-rx"></block> 要使用 Riva ，请执行以下操作：</block>
  <block id="20430e77ba2ecbe15261761c8f4fa2c4" category="list-text">* 如果可能，请使用无损音频格式。 * 使用像 mp3 这样的有损编解码器可能会降低质量。</block>
  <block id="8b3e389f067f32da1e1ab7df2b8d8155" category="list-text">* 扩充训练数据。 * 在音频训练数据中增加背景噪声最初会降低准确性，但同时提高稳定性。</block>
  <block id="b37d69a795b4d7bb6e0f28a42c3ef8ae" category="list-text">* 如果使用的是擦文本，请限制词汇大小。 * 许多在线源都包含拼写错误或辅助发音以及不常见的词。删除这些内容可以改进语言模式。</block>
  <block id="6afe4c71ada39a70da349380efbad345" category="list-text">* 如果可能，请使用最小采样速率 16kH* 。但是，请尝试不要重新采样，因为这样做会降低音频质量。</block>
  <block id="cab3977e4ad163e19ab6245a9b09f541" category="paragraph">除了这些最佳实践之外，客户还必须优先收集具有代表性的样本数据集，并为管道的每个步骤提供准确的标签。换言之，样本数据集应按比例反映目标数据集所示的指定特征。同样，数据集标注器也有责任平衡标记的准确性和速度，以便最大限度地提高数据的质量和数量。例如，此支持中心解决方案需要音频文件，带标签的文本和情感标签。此解决方案的顺序性意味着从管道开始的错误会一直传播到管道的末尾如果音频文件质量较差，则文本抄录和情感标签也会是。</block>
  <block id="0b6b65c9613285433178682e3550355c" category="paragraph">此错误传播方式与此类似，适用场景是对接受过此数据培训的模型进行的。如果情感预测 100% 准确，但语音到文本模式表现不佳，则最终管道将受初始音频到文本抄录的限制。开发人员必须单独考虑每个模型的性能，并将其作为更大管道的组成部分。在这种特定情况下，最终目标是开发一个能够准确预测情绪的渠道。因此，评估管道的总体指标是感受的准确性，而语音到文本的文字记录直接影响到这一点。</block>
  <block id="f3b552e561f520013398b3be885a4420" category="paragraph"><block ref="f3b552e561f520013398b3be885a4420" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ac1ce31a9f2a1a3a478bb69589e180bd" category="paragraph">NetApp DataOps 工具包利用其近乎瞬时的数据克隆技术补充了数据质量检查管道。必须对每个标记的文件进行评估，并将其与现有标记的文件进行比较。在各种数据存储系统之间分布这些质量检查可确保快速高效地执行这些检查。</block>
  <block id="6d61a746e66a6545c5c9faf68668e013" category="inline-link-macro">接下来：部署支持中心观点分析。</block>
  <block id="58a113e09ecc7941870d9bcc2d2ee3df" category="paragraph"><block ref="58a113e09ecc7941870d9bcc2d2ee3df" category="inline-link-macro-rx"></block></block>
  <block id="34d110ef6b6b3684adfe9c791fce2f95" category="summary">本节介绍部署此解决方案所需的详细步骤。</block>
  <block id="e0673e67d0ae2470ff4a9a3a926792b0" category="doc">部署支持中心观点分析</block>
  <block id="0c7ee1e6d81ae421558f2979d46adb5d" category="inline-link-macro">先前：设计注意事项。</block>
  <block id="2e4639bc721df1da69c19fe5c10f5764" category="paragraph"><block ref="2e4639bc721df1da69c19fe5c10f5764" category="inline-link-macro-rx"></block></block>
  <block id="b23f4e3eb5ff4f900ba54c824bf7a676" category="paragraph">部署解决方案涉及以下组件：</block>
  <block id="1b497bff4e1d2dff7f8855237612936b" category="list-text">NGC 配置</block>
  <block id="2dcf1afb8ed1445e4b167ef91fdd8a1b" category="list-text">NVIDIA Riva 服务器</block>
  <block id="6894a1e922948fc0bc9cc96291183448" category="list-text">NVIDIA TAO 工具包</block>
  <block id="3b498dd8feee94c2dbcb419be10d3b70" category="list-text">将 TAO 模型导出到 Riva</block>
  <block id="534b37206d500ff97473ada660fb69d3" category="paragraph">要执行部署，请完成以下步骤：</block>
  <block id="2f6c7bd50828792593b3aa4deff875cc" category="section-title">NetApp DataOps 工具包：支持中心情感分析</block>
  <block id="3b84de14b99e2695fdfd099f56b254be" category="paragraph">以使用<block ref="5d9fb1d86d92052bc5dca8ba91d13ff2" category="inline-link-rx"></block>，完成以下步骤：</block>
  <block id="d19523f192f664c9e34bf949d6f084c3" category="list-text">通过 Pip 安装工具包。</block>
  <block id="1fe6ae43439f5ccecf9883686d6b3784" category="list-text">配置数据管理</block>
  <block id="36b413e2c45a91e66db4aac6abd67ba1" category="section-title">NGC 配置：支持中心情感分析</block>
  <block id="e3ab64bcab09d9eb8219520405242267" category="inline-link">NVIDIA NGC</block>
  <block id="f526ba073cf7bc97c2b0d3bfe091e293" category="paragraph">进行设置<block ref="5b4e29c9d8254a25bb1abc36cd17ca4c" category="inline-link-rx"></block>，完成以下步骤：</block>
  <block id="a485a457c113aa9f2f8096ac1ca500d7" category="list-text">下载 NGC 。</block>
  <block id="7438544460c4a4fdf0b70bb65bb03a92" category="list-text">将当前目录添加到路径。</block>
  <block id="4f1208b2473595e5f4c3118c13de0fcc" category="list-text">您必须配置 NGC 命令行界面以供使用，才能运行命令。出现提示时，输入以下命令，包括 API 密钥。</block>
  <block id="5307692c5f99e57b8002a6a87f08c240" category="paragraph">对于不基于 Linux 的操作系统，请访问<block ref="481e32faa0c657434738f6f0a550651b" category="inline-link-rx"></block>。</block>
  <block id="326419ec6a380f68d7d15a373452bf35" category="section-title">NVIDIA Riva 服务器：支持中心情感分析</block>
  <block id="92ed82a726e834b50a6863c8c4e9db4e" category="paragraph">进行设置<block ref="fb85035785391c7c4b815d01de952f38" category="inline-link-rx"></block>，完成以下步骤：</block>
  <block id="a4fc5fd3d1cea05f031d5adc045dc1e0" category="list-text">从 NGC 下载 Riva 文件。</block>
  <block id="5f2573d8cf9e274560d9a9b3eb2e1aaa" category="list-text">初始化 Riva 设置（`Riva_init.sh` ）。</block>
  <block id="3b570ac682cfeffcdb2c7243afdbf285" category="list-text">启动 Riva 服务器（`Riva_start.sh` ）。</block>
  <block id="d44d4e10378cce2928c99a4b49e45cea" category="list-text">启动 Riva 客户端（`Riva_start_client.sh` ）。</block>
  <block id="6846c1a17ddaf84e01f26ec51c151e78" category="inline-link">FFmpeg</block>
  <block id="22c9c751571566e0566c448194d9d64f" category="list-text">在 Riva 客户端中，安装音频处理库（<block ref="3e294dfc4ee3a49adac5a070482274ce" category="inline-link-rx"></block>）</block>
  <block id="8637711b2ee1b94fe789bb28e88c4b61" category="list-text">启动<block ref="37a4c4b3ad3c3851ac5717bfd3104346" category="inline-link-rx"></block> 服务器</block>
  <block id="b57a5203a9fd3e877aacee6cba6bc9c8" category="list-text">运行 Riva 推理管道笔记本电脑。</block>
  <block id="5dceab25ae38dae0d7ed3167abd32377" category="section-title">NVIDIA TAO 工具包：支持中心情感分析</block>
  <block id="2418d4c7f6be40d5c9a50e4aecab1b27" category="paragraph">要设置 NVIDIA TAO 工具包，请完成以下步骤：</block>
  <block id="630eef78d15fd844ba4a38ea7f7a9c79" category="inline-link">虚拟环境</block>
  <block id="35fb58d5f90347e4f0c445b4968db5f6" category="list-text">准备并激活<block ref="3d97a4392c0af686650645d1371fa8ef" category="inline-link-rx"></block> 适用于 TAO 工具包。</block>
  <block id="0a80b2068950d6e04f34c0142a10e719" category="inline-link">所需的软件包</block>
  <block id="40eb0bd8a87ab1b39e8f2ee5ea287a22" category="list-text">安装<block ref="3646357cb54591ae95dd3b8f0889f0c2" category="inline-link-rx"></block>。</block>
  <block id="c0e95a7dacbc170e387c4e1a0fe41a0b" category="list-text">手动拉取训练和微调期间使用的图像。</block>
  <block id="b5a6ae7c1df936b55910309efc466f01" category="list-text">运行 TAO 微调笔记本电脑。</block>
  <block id="e6dda626093691f78b3127a8faa82b6e" category="section-title">将 TAO 模型导出到 Riva ：支持中心情感分析</block>
  <block id="6a358d81cb24a7e408b0339062f6bb92" category="inline-link">Riva 中的 TAO 工具包模型</block>
  <block id="53ace4ba305859107cead3e5b0b53b8b" category="paragraph">以使用<block ref="ce50a5bf8eb35af9ad9bb322336ee3af" category="inline-link-rx"></block>，完成以下步骤：</block>
  <block id="08c3be8307b7659c6ad67ee4d9659d58" category="list-text">将模型保存在 TAO 微调笔记本中。</block>
  <block id="ac711bb6af28947dfa8b29512acb36e8" category="list-text">将经过 TAO 训练的型号复制到 Riva 型号目录。</block>
  <block id="1317e1d8d20d5c44c680825aba2196e6" category="section-title">部署障碍</block>
  <block id="6e3da39922ebbd1a8a1a5a7238a89168" category="paragraph">在开发您自己的解决方案时，请谨记以下几点：</block>
  <block id="47c0613abd5b97b67a94c2355692cf08" category="list-text">首先安装 NetApp DataOps 工具包，以确保数据存储系统以最佳状态运行。</block>
  <block id="943f803f8c6b4c6508bc97536a6d7b2b" category="list-text">必须先安装 NVIDIA NGC ，再安装其他任何版本，因为它会对映像和型号的下载进行身份验证。</block>
  <block id="70367b72bfd96b5608a7c72ac3f983bf" category="list-text">必须先安装 Riva ，然后再安装 TAO 工具包。Riva 安装会根据需要配置 Docker 守护进程以提取映像。</block>
  <block id="1ed7124aa68792cb6ce3049f6f1d4f7b" category="list-text">DGX 和 Docker 必须能够访问 Internet 才能下载这些型号。</block>
  <block id="de9b04ca3177b736c9f3cc74d62f5088" category="inline-link-macro">接下来：验证结果</block>
  <block id="3556370bb03d018998375ff0476db59a" category="paragraph"><block ref="3556370bb03d018998375ff0476db59a" category="inline-link-macro-rx"></block></block>
  <block id="0e85d8fd0ce7acdba87f57325a14b3fb" category="summary">如上一节所述，只要有两个或更多机器学习模型按顺序运行，错误就会传播到整个管道中。对于此解决方案，句子的感受是衡量公司股票风险水平的最重要因素。语音到文本模式虽然对管道至关重要，但在预测情感之前，它是预处理单元。</block>
  <block id="6700d3710d10e74d6e48f994b760d48b" category="doc">验证结果</block>
  <block id="ee4eec78ae095f539af53c130e976afa" category="inline-link-macro">先前：部署支持中心观点分析。</block>
  <block id="ac96c8f3af95b93c2683c2124998e668" category="paragraph"><block ref="ac96c8f3af95b93c2683c2124998e668" category="inline-link-macro-rx"></block></block>
  <block id="2e10a4ae90aad11c07592a14fbf8c5c6" category="paragraph">如上一节所述，只要有两个或更多机器学习模型按顺序运行，错误就会传播到整个管道中。对于此解决方案，句子的感受是衡量公司股票风险水平的最重要因素。语音到文本模式虽然对管道至关重要，但在预测情感之前，它是预处理单元。真正重要的是基本事实句子与预测的句子之间的情感差异。此选项用作错误率（ WER ）一词的代理。语音到文本的准确性非常重要，但 WER 不会直接用于最终管道指标。</block>
  <block id="0fc4c7871adf5db8dd2b13fc4c381da8" category="paragraph">可以根据每句话的 F1 分数，回顾和精确度计算这些情感指标。然后，可以汇总结果并将其显示在混乱列表中，同时还可以显示每个指标的置信区间。</block>
  <block id="66554c8f1474c5658d17e23710901f98" category="paragraph">使用传输学习的优势在于，模型性能提高，只需满足极少的数据要求，培训时间和成本。此外，还应将经过微调的模型与其基线版本进行比较，以确保传输学习可以提高性能，而不会影响性能。换言之，经过微调的模型在支持中心数据上的性能应比预先训练的模型更好。</block>
  <block id="6e979ee914c9401fddd049d16cdef66a" category="section-title">渠道评估</block>
  <block id="7f109f66c71a1fd15436d1c413354c41" category="cell">测试用例</block>
  <block id="e7f1ec3a5f35af805407a8a531eefb79" category="cell">测试编号</block>
  <block id="6bf1af9a7f1b6dd6cca4b7434097ad94" category="cell">渠道感受指标</block>
  <block id="beed3529b961c63b785104d7a17cf5f4" category="cell">测试前提条件</block>
  <block id="c7320b1f70fd8a9831e530d17a82f34d" category="cell">经过微调的语音到文本和情感分析模型模型</block>
  <block id="9d5b1bc6dcdedf0c8750e543fab75738" category="cell">预期结果</block>
  <block id="74015a89b882f01e94433a9c1f1c904c" category="cell">经过微调的模型的情感指标比原始的预先训练模型的性能更好。</block>
  <block id="68d279a19e31962e0ab0b648f25c07ee" category="list-text">计算基线模型的情感指标。</block>
  <block id="b6168629c9e5a47b0637aa362112642d" category="list-text">计算经过微调的模型的情感指标。</block>
  <block id="97ae5da5f745d90cf815a206b3549e0a" category="list-text">计算这些指标之间的差异。</block>
  <block id="fc997f472d1b5e66aadb364e10c29f4f" category="list-text">计算所有句子之间的差异平均值。</block>
  <block id="c6b3b1378b2e31169a4a1cd4c20691c8" category="inline-link-macro">接下来：视频和演示。</block>
  <block id="6016219a0b0ad0bb3594f964b5e6396d" category="paragraph"><block ref="6016219a0b0ad0bb3594f964b5e6396d" category="inline-link-macro-rx"></block></block>
  <block id="67d45a00257105f21f4427f31e0c9fa1" category="summary">本技术报告为客户在企业级全球支持中心内使用 NetApp 数据管理技术和 NVIDIA 软件框架以及传输学习和对话 AI 执行情感分析提供了设计指导。</block>
  <block id="494027a6b5e9fc8bb84443d03b97a9b7" category="doc">TR-4910 ：《利用 NetApp AI 进行客户沟通时的情感分析》</block>
  <block id="22268d4ee4f32cda2f20141957aac961" category="paragraph">SML 科学公司 Rick Huang ， Sathish Thyagarajan 和 NetApp 公司迭戈 Sosa-Coba 的 David Arnette</block>
  <block id="0c450c48691e7a55b657f2cb7d18a0dd" category="paragraph">本技术报告为客户在企业级全球支持中心内使用 NetApp 数据管理技术和 NVIDIA 软件框架以及传输学习和对话 AI 执行情感分析提供了设计指导。此解决方案适用于希望从代表聊天日志，电子邮件和其他文本或音频通信的录制语音或文本文件中获得客户见解的任何行业。我们实施了一个端到端管道，用于在采用 NetApp 云连接全闪存存储的 GPU 加速计算集群上展示自动语音识别，实时情感分析和深度学习的自然语言处理模式 - 再培训功能。可以对大规模的一流语言模型进行培训和优化，以便与全球支持中心快速进行推理，从而打造卓越的客户体验，并对员工的长期业绩进行客观评估。</block>
  <block id="549c85ede9b39be6ef0eec80db7e098c" category="paragraph">情绪分析是自然语言处理（ NLP ）中的一个研究领域，通过该领域，可以从文本中提取积极，负面或中立的情绪。随着越来越多的人与人工智能系统互动，对话式人工智能系统的集成程度已提升到接近全球水平。情感分析有多种使用情形，从确定支持中心员工在与来电者对话中的表现，提供适当的自动聊天机器人响应，到根据公司代表与受众在季度收益通话中的互动预测公司的股票价格。此外，情感分析可用于确定客户对品牌提供的产品，服务或支持的看法。</block>
  <block id="5855677156d63ad3c93a7b5382098060" category="paragraph">此端到端解决方案使用 NLP 模型执行高级别的情感分析，从而支持支持中心分析框架。录音会处理成书面文本，并从对话的每一句话中提取情感。可以将结果汇总到信息板中，以便对对话感受进行分析，包括历史和实时分析。此解决方案可以概括为具有类似数据模式和输出需求的其他解决方案。利用适当的数据，可以完成其他使用情形。例如，可以使用相同的端到端管道分析公司收益调用的情绪。由于管道的灵活性，还可以进行其他形式的 NLP 分析，例如主题建模和命名实体识别（ NER ）。</block>
  <block id="ea4f750fd9fd89aeff4ca8d4162fb673" category="paragraph">NVIDIA Riva ， NVIDIA TAO 工具包和 NetApp DataOps 工具包共同实现了这些 AI 实施。NVIDIA 的工具可用于使用预构建的型号和管道快速部署高性能 AI 解决方案。NetApp DataOps 工具包可简化各种数据管理任务，以加快开发速度。</block>
  <block id="7a7e97f7fcf4e2974d9a6feee2b056f8" category="section-title">客户价值</block>
  <block id="3815ef30c3d6c6bdc3862cc9530d091e" category="paragraph">企业可以通过员工评估和客户响应工具在文本，音频和视频对话中获得价值，以便进行情绪分析。经理可以从信息板中提供的信息中受益，从而可以根据对话的两个方面评估员工和客户满意度。</block>
  <block id="da210ea22d819ca26070a3795f9a14d4" category="paragraph">此外， NetApp DataOps 工具包还可管理客户基础架构中数据的版本控制和分配。这样就会频繁更新信息板中提供的分析，而不会产生庞大的数据存储成本。</block>
  <block id="e5fcadecc4515efec9267b8ad57b28a5" category="inline-link-macro">下一步：用例</block>
  <block id="93b7bce28e36a4eebec23c8fd4be315d" category="paragraph"><block ref="93b7bce28e36a4eebec23c8fd4be315d" category="inline-link-macro-rx"></block></block>
  <block id="4878d0f06c45c7f565e6545cccf18c88" category="inline-link-macro">采用 SnapCenter 的 HYBIRD 云数据库解决方案</block>
  <block id="a07f396f8180d71ad8372bd51f3800d7" category="cell">* 混合云数据库解决方案 *<block ref="642bb53d1747dfdf3e6f0ebcbb604cfe" category="inline-link-macro-rx"></block></block>
  <block id="24743f8350683e7f1d7d5f6802de3aab" category="cell"><block ref="24743f8350683e7f1d7d5f6802de3aab" category="inline-link-macro-rx"></block></block>
  <block id="dcad2dec3906d4a902bdfb0b7093ce21" category="cell"><block ref="dcad2dec3906d4a902bdfb0b7093ce21" category="inline-link-macro-rx"></block></block>
  <block id="59fbb2b8017dcaa261a32ed33941a3bd" category="cell"><block ref="41f97968c03372ffce726ec89c54fc9a" category="inline-link-macro-rx"></block></block>
  <block id="8e7cb8af41001c3eeb84421bdf0bf30f" category="cell"><block ref="8e7cb8af41001c3eeb84421bdf0bf30f" category="inline-link-macro-rx"></block></block>
  <block id="5a6ed16cce1a08e1b3de84293a1c0a11" category="cell"><block ref="5a6ed16cce1a08e1b3de84293a1c0a11" category="inline-link-macro-rx"></block></block>
  <block id="7dffec91055830f84efb7bc18ab4f86d" category="cell"><block ref="7dffec91055830f84efb7bc18ab4f86d" category="inline-link-macro-rx"></block></block>
  <block id="cce65a4a66212b1b6a69449993338407" category="cell"><block ref="cce65a4a66212b1b6a69449993338407" category="inline-link-macro-rx"></block></block>
  <block id="de2b8e7716b57342938375941b7e521a" category="cell"><block ref="de2b8e7716b57342938375941b7e521a" category="inline-link-macro-rx"></block></block>
  <block id="ea490901c403ce2b2a89f80227d0fb90" category="paragraph">计划二进制文件和数据库复制攻略手册</block>
  <block id="931ea399c80122517d9eeb617f1594a0" category="list-text">配置并启动作业模板。</block>
  <block id="2c777d857235f251004d6d8d70c9751d" category="list-text">复制先前创建的作业模板。</block>
  <block id="1eb977b1f69b531db931e9c62c1a0de9" category="list-text">找到 ontap/CVO 设置模板，然后在最右侧单击复制模板</block>
  <block id="3c96e57d33780bedfb652def025f39de" category="list-text">单击复制的模板上的编辑模板，然后将名称更改为二进制和数据库复制攻略手册。</block>
  <block id="b07fb736e8c17cea7e9e3753e7a67fd1" category="list-text">保留该模板的相同清单，项目和凭据。</block>
  <block id="f42c6e71dcb07b403b8393d5ab7f7fe4" category="list-text">选择 ora_replication cc.yml 作为要执行的攻略手册。</block>
  <block id="69fa06239fd734936aac1af5250c7f57" category="list-text">这些变量将保持不变，但需要在变量 dst_cluster_ip 中设置 CVO 集群 IP 。</block>
  <block id="ec7445bbcbadd1f11fe1bc3e5e56eef9" category="list-text">计划作业模板。</block>
  <block id="ce0d20e65f0354847807516cbcc696f6" category="list-text">单击二进制和数据库复制攻略手册模板，然后单击顶部选项集的计划。</block>
  <block id="d9a6405dc4a6cd71f6d77c749070a5e6" category="list-text">单击添加，为二进制和数据库复制添加名称计划，在小时开始时选择开始日期 / 时间，选择您的本地时区以及运行频率。运行频率通常会更新 SnapMirror 复制。</block>
  <block id="2dc4dec75c83aeb010419dc2a02da40b" category="admonition">系统将为日志卷复制创建一个单独的计划，以便可以更频繁地进行复制。</block>
  <block id="cc335cb73dc47f7a9b404288e3b4330f" category="paragraph">ONTAP 和 CVO 设置</block>
  <block id="6bc14a28f101e9d80ecc643ef13ef7fb" category="list-text">输入名称 ontap/CVO 设置</block>
  <block id="a7244f663b97629084f004e6c89b4a75" category="list-text">选择作业类型；运行将根据攻略手册配置系统。</block>
  <block id="57344b3bd58c0e451513e303e45d49b7" category="list-text">为内部环境选择 ontap_setup.yml 攻略手册，或者选择 CVO_setup.yml 以复制到 CVO 实例。</block>
  <block id="41c1d72990c270d0221458749497c3e6" category="admonition">我们将使用此模板并将其复制到其他攻略手册中。</block>
  <block id="63c0320f73b5f4e528bbe1488acc5103" category="section-title">为 Oracle 数据库提供自动化数据保护</block>
  <block id="d798c6a829fee4b3d8316144e8769e91" category="paragraph">企业正在对其环境进行自动化，以提高效率，加快部署速度并减少手动操作。Ansible 等配置管理工具正在用于简化企业数据库操作。在本解决方案中，我们演示了如何使用 Ansible 通过 NetApp ONTAP 自动保护 Oracle 数据。通过使存储管理员，系统管理员和 DBA 能够一致快速地将数据复制到异地数据中心或公有云，您可以获得以下优势：</block>
  <block id="1d4694b7ed077df8b2c51d4ef956ce0c" category="list-text">缩短配置集群间复制， CVO 实例化和恢复 Oracle 数据库的时间</block>
  <block id="60bcf8682ddc3583a74e6cd2d95e1ccb" category="list-text">提供数据库恢复工作流，以便于测试灾难恢复场景。</block>
  <block id="7fa4d3428dbef9829f6325b288c071bc" category="section-title">在内部复制到内部复制</block>
  <block id="911a9e8dd85bfeeba31c1ed049e41e1c" category="list-text">在源和目标上创建集群间 LIF</block>
  <block id="2f4eb56dd9301fc33f559b4345b90eb3" category="list-text">建立集群和 SVM 对等关系</block>
  <block id="2b71f4136dce37491ef0f319f5d1fbd9" category="list-text">创建并初始化 Oracle 卷的 SnapMirror</block>
  <block id="20f4a46f5b12b0533f7a2268c4c2bf41" category="list-text">通过 AWX/Tower 为 Oracle 二进制文件，数据库和日志创建复制计划</block>
  <block id="6ef1c2ae7c9ca61a54d88de28349a772" category="list-text">还原目标上的 Oracle 数据库，并使数据库联机</block>
  <block id="f4ec61d9ffa147f621f854609523a0fb" category="section-title">在内部迁移到 AWS 中的 CVO</block>
  <block id="3f155aa6a9345b3e25f3bb44ecccfc0a" category="list-text">创建 AWS 连接器</block>
  <block id="1531cb3c2d4db27dcd3bfa2ad4711ec5" category="list-text">在 AWS 中创建 CVO 实例</block>
  <block id="2f159b717f78e9925b219e87cbd20f9a" category="list-text">将内部集群添加到 Cloud Manager</block>
  <block id="df16a1e23dbbcc2f19f07ab1af741617" category="list-text">在源上创建集群间 LIF</block>
  <block id="d1f660bb2bff2f31a46c751115155999" category="list-text">第 1 部分：待定</block>
  <block id="1ee2253d8fe666dbea54ab3648a62511" category="list-text">第 2 部分：待定</block>
  <block id="0679a51ae3a4071a6bd3dedbe97fd329" category="summary">此页面介绍了在 NetApp ONTAP 存储上部署 Oracle 数据保护的自动化方法。</block>
  <block id="22e3bbd761fbb7ae69b8035eb12f222d" category="paragraph">此解决方案设计为在 AWX/ 塔式环境中运行。</block>
  <block id="ad5310e9dcd8f367be2b92490488d86d" category="list-text">解决方案设计用于在私有云环境（内部到内部）和混合云（内部到公有 Cloud Cloud Volumes ONTAP （ CVO ））中运行</block>
  <block id="936c99ed52ca08a052ebf611285dd998" category="inline-link-macro">收集 CVO 和连接器部署的前提条件</block>
  <block id="ec329a9106131eb9bf99b0f9e67b0564" category="list-text">有关获取 CVO 数据保护所需密钥和令牌的详细说明，请访问 <block ref="e21f73de51752f791cddc773d1f38740" category="inline-link-macro-rx"></block></block>
  <block id="13716f12996b882bb4c7e0bd84c7c128" category="open-title">&lt;Strong class="bi"&gt; 内部部署 &lt;/Strong&gt; &lt;Strong&gt;|&lt;/Strong&gt;</block>
  <block id="72bd33cc372377848ab3bb360deb365e" category="cell">ONTAP 版本 9.8 及更高版本</block>
  <block id="3ca63226b942aff3abcf62934a91e382" category="cell">源上的现有 Oracle 环境以及目标上的等效 Linux 操作系统（灾难恢复站点或公有云）</block>
  <block id="6114118ecf4e8d86a2e7c80bfab462f6" category="open-title">&lt;strong class="bi"&gt;CVO&lt;/Strong&gt;</block>
  <block id="2f960df807c8ad51e74c447149eb2033" category="cell">* Cloud Manager/AWS*</block>
  <block id="571f37fae4494df03321c2abe1fcc053" category="cell">AWS 访问 / 机密密钥</block>
  <block id="7a5be8c4513f3bd0696db24a6bd977f4" category="cell">NetApp Cloud Manager 帐户</block>
  <block id="99e55608ac5f1697eb6804aaf586af09" category="cell">NetApp Cloud Manager 刷新令牌</block>
  <block id="3f9ec2a23fee1cafeb1a700de677caac" category="cell">攻略手册</block>
  <block id="1f959110c5104b300b1a3d5fe3ee80dc" category="cell">* ontap_setup*</block>
  <block id="b7ed1e5c864a764f83f035d7f4f774ee" category="cell">在源集群上创建集群间 LIF （可选）</block>
  <block id="73ddb5848c16203494697871a4e993cd" category="cell">在目标集群上创建集群间 LIF （可选）</block>
  <block id="04a35ce053d611d390fc192544fa4899" category="cell">创建集群和 SVM 对等关系</block>
  <block id="4605aea1d05aa2979e72d73dd2c51773" category="cell">创建目标 SnapMirror 并初始化指定的 Oracle 卷</block>
  <block id="0dd4c7b6672d8937b6eb899b454fb7fe" category="cell">* 复制 _cg</block>
  <block id="7187aaa97acef94360159347d76a84c9" category="cell">在 /etc/oratab 中为每个数据库启用备份模式</block>
  <block id="f9198142d6e5690166713858ae8a0cdd" category="cell">为 Oracle 二进制卷和数据库卷创建的快照</block>
  <block id="23ba14a0a5cf33c38faec5b66fff712e" category="cell">已更新 SnapMirror</block>
  <block id="114debcae141b96db77c72e8a1e8fadb" category="cell">关闭 /etc/oratab 中每个数据库的备份模式</block>
  <block id="682094861a79bcba0e0ab2e193198762" category="cell">* 。 ora_replication ； log*</block>
  <block id="1d03ae98454d1c807318a1e29a4e2736" category="cell">切换 /etc/oratab 中每个数据库的当前日志</block>
  <block id="47e4696811eedec695f727189503e8df" category="cell">为 Oracle 日志卷创建的快照</block>
  <block id="86836efae3e3d868a96ae69bcbc987ba" category="cell">* ora_recovery*</block>
  <block id="6ceab4515ef4144abed0f0ce5ed3038f" category="cell">中断 SnapMirror</block>
  <block id="a6066c717f63ac99226b48abb4cf1d85" category="cell">在目标上启用 NFS 并为 Oracle 卷创建接合路径</block>
  <block id="aa46cdc29b66725a1180f57d02f0cee3" category="cell">配置 DR Oracle 主机</block>
  <block id="dea9253f9b15f57a0c2161848a3c27a3" category="cell">挂载并验证 Oracle 卷</block>
  <block id="ee95819ff53983a149759d555a93ba4b" category="cell">恢复并启动 Oracle 数据库</block>
  <block id="5a6b57bc1fdf2f0e1259ed22f1d027a4" category="cell">* CVO_setup*</block>
  <block id="331c87cd495ffdc9cd55d8b3935a75f5" category="cell">对环境进行预检查</block>
  <block id="5f17c8d8d95282db12506044ba4d6ab9" category="cell">AWS 配置 /AWS 访问密钥 ID/ 机密密钥 / 默认区域</block>
  <block id="cef449920fe163cdd74231266cbdf23d" category="cell">创建 AWS 角色</block>
  <block id="85a4bcbc96cde90931ad369de96535b2" category="cell">在 AWS 中创建 NetApp Cloud Manager Connector 实例</block>
  <block id="abe14752834b641e86064c7214f6719c" category="cell">在 AWS 中创建 Cloud Volumes ONTAP （ CVO ）实例</block>
  <block id="c2a9449cd3b0ae879520f450b65b1621" category="cell">将内部源 ONTAP 集群添加到 NetApp Cloud Manager 中</block>
  <block id="fbb54d6efa6ca64af90fbe2289812be8" category="cell">在目标 CVO 上启用 NFS 并为 Oracle 卷创建接合路径</block>
  <block id="3ef6389d9b9aacdce331793dd2a96ce8" category="paragraph">为了简化自动化，我们已使用默认值预设了许多必需的 Oracle 参数。通常，无需更改大多数部署的默认参数。更高级的用户可以谨慎地更改默认参数。默认参数位于每个角色文件夹的默认目录下。</block>
  <block id="a98d844e94ad28c8e0fb089e005d6b9f" category="inline-link-macro">此处可查看 AWX/ 塔式服务器的详细流程</block>
  <block id="7e599865fd1cdad0e26add5715f65267" category="paragraph">准备就绪后，单击 <block ref="d28bc5520349bb0598caaa5132432326" category="inline-link-macro-rx"></block>。</block>
  <block id="47373f46adef617d17665b0b94be8f67" category="paragraph">计划日志复制攻略手册</block>
  <block id="8e43fbf8e210fdbb3e1d59ca59cde628" category="list-text">单击复制的模板上的 Edit Template ，然后将名称更改为 Restore and Recovery Playbook 。</block>
  <block id="42f2159b893bbf4b6bf098ba9a026a1c" category="list-text">选择 ora_recovery.yml 作为要执行的攻略手册。</block>
  <block id="0a3fe9b740fe79971ae2379eaec4822c" category="admonition">只有在准备好在远程站点还原数据库后，才会运行此攻略手册。</block>
  <block id="40640c0c34d4427f5d18b9ca476e3158" category="summary">本页介绍了 NetApp ONTAP 存储上 Oracle19c 的自动数据保护。</block>
  <block id="261e91a1afdfe1123497b1b9ba5ab3e1" category="section-title">AWX/ 塔式 Oracle 数据保护</block>
  <block id="db2b28449b6d868d910cd53527934988" category="list-text">提供第一个组的名称 oracle ，然后单击 Save 。</block>
  <block id="200e1fa09608b23de5cd04d22d3a5bdb" category="list-text">对名为 dr_oracle 的第二个组重复此过程。</block>
  <block id="1e29c17b60e9145858da82263315e402" category="list-text">选择已创建的 Oracle 组，转至主机子菜单，然后单击添加新主机。</block>
  <block id="250d5368537e295251f9ccf63f950087" category="list-text">提供源 Oracle 主机管理 IP 的 IP 地址，然后单击保存。</block>
  <block id="22dcd973cf7a10ed9d03c5b959e65807" category="list-text">必须对 dr_oracle 组重复此过程，并添加 DR/Destination Oracle 主机的管理 IP/ 主机名。</block>
  <block id="1a4eca6a53be80f21117669b80a5dbc8" category="admonition">下面介绍了如何使用 ONTAP 为内部部署或 AWS 上的 CVO 创建凭据类型和凭据。</block>
  <block id="cea575677c47839fde1e59dbfc9ad5bb" category="open-title">内部</block>
  <block id="50d33cb309a9ea4bacb0a5541498b670" category="list-text">创建凭据类型。对于涉及 ONTAP 的解决方案，您必须配置凭据类型以匹配用户名和密码条目。</block>
  <block id="c048e95ab07253cc1cb87bef130c410b" category="list-text">将以下内容粘贴到 " 注入器配置 " 中，然后单击保存：</block>
  <block id="9302fe5c60a983a24bb8787c00db4862" category="list-text">为 ONTAP 创建凭据</block>
  <block id="0a0aab79fb5a20fa5f830947226ef87c" category="list-text">输入 ONTAP 凭据的名称和组织详细信息</block>
  <block id="81999e930ad44af27e84682c3ea1e750" category="list-text">选择上一步中创建的凭据类型。</block>
  <block id="1546222d368538c25b5704b5fcf160f5" category="list-text">在 Type Details 下，输入源集群和目标集群的用户名和密码。</block>
  <block id="c4be718383c8ca0aa17633d911fc38fd" category="list-text">单击保存。</block>
  <block id="39f6f9fe82cbf0c0970d13b6a043ad84" category="list-text">为 Oracle 创建凭据</block>
  <block id="30d4be106e7fb63befec4c8c7c815ad0" category="list-text">输入 Oracle 的名称和组织详细信息。</block>
  <block id="61d6c643401e4a602f3c8b4b6fc0a93c" category="list-text">如果需要为 dr_oracle 主机配置其他凭据，请重复此过程。</block>
  <block id="f7fc367b5de87581ac78fc80805439af" category="open-title">CVO</block>
  <block id="61efb6ce79debd57f1e5eb28b08f94ba" category="list-text">创建凭据类型。对于涉及 ONTAP 的解决方案，您必须配置凭据类型以匹配用户名和密码条目，我们还会为 Cloud Central 和 AWS 添加条目。</block>
  <block id="b95cd128bfca5d5c9181a46d0392c360" category="list-text">将以下内容粘贴到 "Injector Configuration" 中，然后单击 "Save ：</block>
  <block id="75f3f97810b5eef177a5355b86dabfd0" category="list-text">为 ontap/CVO/AWS 创建凭据</block>
  <block id="922922f515b0ac072e20128999512b50" category="list-text">为 Oracle 创建凭据（源）</block>
  <block id="7ebca140d5dcaa006aeda44b19cfc52e" category="list-text">输入 Oracle 主机的名称和组织详细信息</block>
  <block id="ca530facf78f2112c60ee838d85b9b5b" category="list-text">为 Oracle 目标创建凭据</block>
  <block id="063e8368b0de123266b00f2c88e317fb" category="list-text">输入 DR Oracle 主机的名称和组织详细信息</block>
  <block id="0d28c8cc8415971cf2cd02507176bf94" category="list-text">在 Type Details 下，输入 Username （ EC2-user ，或者如果您已对其进行了默认更改，请输入该用户名）和 SSH 私钥</block>
  <block id="cb8f433dfb62a17f7a02f4d7a8839b1c" category="list-text">选择正确的权限升级方法（ sudo ），然后根据需要输入用户名和密码。</block>
  <block id="791ef966f9be349751448b9066bdd8fa" category="list-text">输入 ... <block ref="1881636a0f344e587cc2202e2db4c5ac" category="inline-link-rx"></block> 作为源控制 URL 。</block>
  <block id="07ecfe1ec895f624e5c5d082fb961d1c" category="section-title">3. 配置全局变量</block>
  <block id="dad1349ef99312028aeda3703d53efdb" category="section-title">4. 自动化攻略手册</block>
  <block id="285a3bb8fb6f692046facadb3c0984cf" category="paragraph">需要运行四本单独的攻略手册。</block>
  <block id="37472723bc7712fedddee6d02e29228d" category="list-text">用于设置环境的攻略手册，内部部署或 CVO 。</block>
  <block id="5138c89250c5086accf2d1a5961c9b17" category="list-text">用于按计划复制 Oracle 二进制文件和数据库的攻略手册</block>
  <block id="3e552d6e5b2c316c63eb1fc2081d42a8" category="list-text">用于按计划复制 Oracle 日志的攻略手册</block>
  <block id="33f4f1514dc2ceb963af16685f4de58c" category="list-text">用于在目标主机上恢复数据库的攻略手册</block>
  <block id="17ae7167fac3c2364c6ad7b58819a920" category="open-title">ONTAP/CVO 设置</block>
  <block id="16f928d0ebd67060f6b3b2abf0481928" category="open-title">二进制卷和数据库卷的复制</block>
  <block id="b723f9a72bec39ac17d89e51ff0ba336" category="open-title">复制日志卷</block>
  <block id="048f2ee27b8617cb0e13b6a0b7da956f" category="list-text">单击复制的模板上的 Edit Template ，然后将名称更改为 Log Replication 攻略手册。</block>
  <block id="d4a86123c8e623e35eaa51ab9583e03b" category="list-text">选择 ora_replication logs.yml 作为要执行的攻略手册。</block>
  <block id="d6e504930da1d0732ea4162514a38e8e" category="list-text">单击日志复制攻略手册模板，然后单击顶部选项集的计划。</block>
  <block id="1c03188c731004905466903c2eb763c4" category="list-text">单击添加，为日志复制添加名称计划，选择开始日期 / 时间，选择本地时区和运行频率。运行频率通常会更新 SnapMirror 复制。</block>
  <block id="d23bfe090a9fd09613c7a6573f619c02" category="admonition">建议将日志计划设置为每小时更新一次，以确保恢复到上一个每小时更新。</block>
  <block id="f76dbca531ab83300165aacf97e1b7ff" category="open-title">还原和恢复数据库</block>
  <block id="8cc6746c11a65da30c7d875819acecfe" category="section-title">5. 恢复 Oracle 数据库</block>
  <block id="b8a177e5fd059f33473cad4d1d073d38" category="list-text">内部生产 Oracle 数据库数据卷通过 NetApp SnapMirror 复制到二级数据中心的冗余 ONTAP 集群或公有云中的 Cloud Volume ONTAP 进行保护。在完全配置的灾难恢复环境中，二级数据中心或公有云中的恢复计算实例处于备用状态，可以在发生灾难时恢复生产数据库。备用计算实例通过在操作系统内核修补程序上运行准面更新或在一个锁定步骤中进行升级，与内部实例保持同步。</block>
  <block id="57d8ad774cb4fef3d53ee8836bfee761" category="list-text">在此解决方案演示中， Oracle 二进制卷会复制到目标并挂载到目标实例，以启动 Oracle 软件堆栈。与灾难发生时的最后一分钟全新安装 Oracle 相比，这种恢复 Oracle 的方法更有优势。它可以保证 Oracle 安装与当前内部生产软件安装和修补程序级别等完全同步。但是，根据 Oracle 软件许可的结构，这可能会对恢复站点上复制的 Oracle 二进制卷产生额外的软件许可影响，也可能不会产生额外的软件许可影响。建议用户在决定使用相同方法之前，先咨询其软件许可人员，以评估潜在的 Oracle 许可要求。</block>
  <block id="74eaa493ffed695592003e0844d93c46" category="list-text">目标位置的备用 Oracle 主机已配置 Oracle 前提条件配置。</block>
  <block id="0be4357ac224d44b11800179b23eb202" category="list-text">SnapMirrors 已损坏，卷可写并挂载到备用 Oracle 主机。</block>
  <block id="69504b415e8aad20e18beca0de96ab6a" category="list-text">在备用计算实例上挂载所有数据库卷后， Oracle 恢复模块将在恢复站点执行以下恢复和启动 Oracle 任务。</block>
  <block id="5e52a9563e31960cdf02c7b83e6495e7" category="list-text">同步控制文件：我们在不同的数据库卷上部署了重复的 Oracle 控制文件，以保护关键数据库控制文件。一个位于数据卷上，另一个位于日志卷上。由于数据卷和日志卷的复制频率不同，因此在恢复时它们将不同步。</block>
  <block id="26b9a788a0ef0527f25f68892b364d19" category="list-text">重新链接 Oracle 二进制文件：由于 Oracle 二进制文件已重新定位到新主机，因此需要重新链接。</block>
  <block id="b66ad18a7982f7c233e9d0af2f867856" category="list-text">恢复 Oracle 数据库：恢复机制从控制文件中检索 Oracle 日志卷中最后一个可用归档日志中的最后一个系统更改编号，并恢复 Oracle 数据库以重新处理在发生故障时能够复制到灾难恢复站点的所有业务事务。然后，数据库将在新的形式中启动，以在恢复站点执行用户连接和业务事务。</block>
  <block id="c4ff33edf6e94fb434fb59e4ad2c286b" category="inline-link-macro">采用 SnapCenter 的混合云数据库解决方案</block>
  <block id="dcf8c21fbb1d22c97f20ace5649e8918" category="list-text"><block ref="dcf8c21fbb1d22c97f20ace5649e8918" category="inline-link-macro-rx"></block></block>
  <block id="fc25c016a8fb35a621842044a8d4f2e7" category="inline-link-macro">在混合云中自动化 Oracle 数据库基础架构</block>
  <block id="59a4cf9e5720080358e0622f3c948571" category="list-text"><block ref="59a4cf9e5720080358e0622f3c948571" category="inline-link-macro-rx"></block></block>
  <block id="b9b07f10c0ce1735548942e3abaa3447" category="summary">此页面提供了有关通过 NetApp Cloud Manager 收集 CVO 和 Cloud Manager Connector 部署所需的刷新令牌和访问 / 机密密钥的详细信息。</block>
  <block id="bcc03f70ea2e77a98ddb6e8267e4892f" category="paragraph">要通过 AWX/Ansible 塔使用 Ansible 攻略手册配置 CVO 和连接器的自动部署，需要以下信息：</block>
  <block id="193fc1c355935356ecd5d07811792512" category="section-title">从 AWS 获取访问 / 机密密钥</block>
  <block id="60b6439418495e0d1821d169b7d4b885" category="list-text">要在 Cloud Manager 中部署 CVO 和 Connector ，我们需要 AWS 访问 / 机密密钥。通过启动 IAM -&gt; 用户 -&gt; 您的用户名 -&gt; 安全凭据 -&gt; 创建访问密钥，在 AWS 控制台中获取密钥。</block>
  <block id="ad1cc06192440312813c412c9cf08bc5" category="list-text">复制访问密钥并确保其安全，以便在 Connector 和 CVO 部署中使用。</block>
  <block id="4ba9f13f5b12512f3651d5ea2d3ffa05" category="admonition">如果您丢失了密钥，则可以创建另一个访问密钥并删除丢失的密钥</block>
  <block id="ad35fbaef240a8ec1f43e8a0d5e15099" category="image-alt">刷新令牌</block>
  <block id="89d8fe92eb33da3c73df38422c3fa73e" category="section-title">从 NetApp Cloud Central 获取刷新令牌</block>
  <block id="3d7e1d21530a3a98c74b0b7484c84516" category="list-text">使用您的帐户凭据登录到云中心帐户，网址为<block ref="ddbd83acb6424bbb7fa6878eff0976a1" category="inline-link-rx"></block></block>
  <block id="a95c6d24569073e45c394bcbd6a2c0e4" category="list-text">生成刷新令牌并将其保存以供部署使用。</block>
  <block id="ecd636681b83fa2697020594594aea14" category="section-title">正在获取客户端 ID</block>
  <block id="2a1ed6ca97aeb484a26d6e0d625af96b" category="list-text">访问 API 页面以复制客户端 ID<block ref="06324b77583872f7e211b3e7ec3f882f" category="inline-link-rx"></block>。</block>
  <block id="1093ef7993a1f3824edbf581bb54b571" category="list-text">单击右上角的 " 了解如何进行身份验证 " 。</block>
  <block id="622dcb1fafb9f30d36b32341e23ae7a0" category="list-text">从弹出的身份验证窗口中，如果您需要用户名 / 密码才能登录，请从常规访问复制客户端 ID 。使用 SSO 的联合用户应从 " 刷新令牌选项卡 " 复制客户端 ID 。</block>
  <block id="76525f0f34b48475e5ca33f71d296f3b" category="image-alt">客户端 ID</block>
  <block id="6090065e2462d5f96ebac132568bdf46" category="section-title">从 AWS 获取密钥对</block>
  <block id="294b903c23e96b98876b04f51502cec4" category="list-text">在 AWS 控制台中，搜索 "Key Pair" 并创建一个带有 "pem" 的密钥对。记住 key_pair 的名称，我们将使用它来部署连接器。</block>
  <block id="ddb20e807acdf5ddf189dd213ff6d0cf" category="image-alt">Key Pair</block>
  <block id="3ce1d7d6e1b4509256dd2574b6b5d290" category="section-title">正在获取帐户 ID</block>
  <block id="8f19980a36fbde35540547e8f630c9e5" category="list-text">在 Cloud Manager 中，单击 Account – &gt; Manage Accounts ，然后复制帐户 ID 以用于 AWX 的变量。</block>
  <block id="c9f0818cde41901681a02b50763ec342" category="sidebar">NetApp 混合云数据解决方案—基于客户用例的 Spark 和 Hadoop</block>
  <block id="924f605d39858bdb10692c8d8f810464" category="sidebar">用例 1 —备份 Hadoop 数据</block>
  <block id="c028df954696d2e4011963e651237b7c" category="sidebar">用例 2 —从云到内部环境的备份和灾难恢复</block>
  <block id="f1ab9c16fee4088d930b2a43e3d48f64" category="sidebar">用例 3 —对现有 Hadoop 数据启用 DevTest</block>
  <block id="4e7c79467b7b25f0415a3a4538d3e2f5" category="sidebar">用例 4 —数据保护和多云连接</block>
  <block id="f38bc790ec57f948f20cbd270b996cc6" category="sidebar">用例 5 —加快分析工作负载的速度</block>
  <block id="ae270ffdc87820776fadfe121aa13143" category="sidebar">使用 NetApp AI 进行情感分析</block>
  <block id="f74720767a0bf20cfdb6bba5f215d795" category="sidebar">部署支持中心情感分析</block>
  <block id="12367669ba6a0b6e059b69b5a95f2902" category="sidebar">Oracle 数据库数据保护</block>
  <block id="3e9d3644ee18a66c51ddd16b668eaa5a" category="sidebar">自动化 Oracle 数据保护</block>
  <block id="82be90bcfc8fd03855e030edaa25583a" category="sidebar">适用于 AWX/ 塔式服务器的自动化 Oracle 数据保护</block>
  <block id="c515da31cebf8cf63b394c59f3f5f2c0" category="inline-link-macro">接下来： ONTAP AI 部署高性能作业示例概述</block>
  <block id="5c11e6d83807487f2c41bd48dc524734" category="paragraph"><block ref="5c11e6d83807487f2c41bd48dc524734" category="inline-link-macro-rx"></block></block>
  <block id="68cba59815f152ec72363e2495bab8d2" category="paragraph"><block ref="68cba59815f152ec72363e2495bab8d2" category="inline-link-macro-rx"></block></block>
  <block id="e76934323b48d5421aa2271f7e9fbee2" category="inline-link-macro">接下来： NetApp Trident 部署和配置概述</block>
  <block id="4e3ff90ed271e98a6802a9063034ea76" category="paragraph"><block ref="4e3ff90ed271e98a6802a9063034ea76" category="inline-link-macro-rx"></block></block>
  <block id="c64f80d07d5c1623b7b2f34e40d7b46c" category="inline-link-macro">接下来：笔记本电脑和管道示例</block>
  <block id="c3714374d558db5573b4ecd4261e206e" category="paragraph"><block ref="c3714374d558db5573b4ecd4261e206e" category="inline-link-macro-rx"></block></block>
  <block id="defd49beb1345ee37b446e866e8b3420" category="inline-link-macro">接下来： Kubeflow 操作和任务示例</block>
  <block id="2ecf31480279823ef2aed30a0fc061f2" category="paragraph"><block ref="2ecf31480279823ef2aed30a0fc061f2" category="inline-link-macro-rx"></block></block>
  <block id="64b0abe7a29610e134041ed793101fce" category="inline-link-macro">接下来： Trident 操作示例</block>
  <block id="f6c488122d476f1d213cf78dc2ee84d2" category="paragraph"><block ref="f6c488122d476f1d213cf78dc2ee84d2" category="inline-link-macro-rx"></block></block>
  <block id="f8bc0cf277b3c4424978d08f10f9df70" category="inline-link-macro">接下来：适用于 ONTAP AI 部署的 Kubernetes Storageclasses 示例</block>
  <block id="a58ef634a291d01e3abec43e5619294a" category="paragraph"><block ref="a58ef634a291d01e3abec43e5619294a" category="inline-link-macro-rx"></block></block>
  <block id="52a739b78342bd0cef8801d4c5c193b6" category="inline-link-macro">接下来： Apache Airflow 部署</block>
  <block id="6564dd7688129caf4acb63587998eb65" category="paragraph"><block ref="6564dd7688129caf4acb63587998eb65" category="inline-link-macro-rx"></block></block>
  <block id="b7cd12d2dd9ac8e3414514a02e5df6f4" category="inline-link-macro">接下来：执行单节点 AI 工作负载</block>
  <block id="6ee8519e7493385361c9afcfd675c8d0" category="paragraph"><block ref="6ee8519e7493385361c9afcfd675c8d0" category="inline-link-macro-rx"></block></block>
  <block id="080e5221e660ab18a3746fe480956ebc" category="paragraph">在容器管理级别， Kubernetes 容器管理是一个不错的选择，完全上游版本（ Canonical ）或适用于企业部署的修改版本（ Red Hat ）均支持此功能。。 <block ref="8ff9014ec7345470e1bb9286d28496e4" category="inline-link-macro-rx"></block> 使用 NetApp Trident 和新添加的<block ref="18f9f1b3975974bec435249b1752c2d6" category="inline-link-rx"></block> 为数据科学家和数据工程师提供内置可追溯性，数据管理功能，接口和工具，以便与 NetApp 存储集成。Kubeflow 是适用于 Kubernetes 的 ML 工具包，可在 TensorFlow Serving 或 NVIDIA Triton 推理服务器等多个平台上提供额外的 AI 功能以及对型号版本控制和 KFServing 的支持。另一个选项是 NVIDIA EGX 平台，它可提供工作负载管理以及对支持 GPU 的 AI 推理容器目录的访问。但是，这些选项可能需要大量的精力和专业知识才能投入生产，并且可能需要第三方独立软件供应商（ ISV ）或顾问的协助。</block>
  <block id="bdbf5a5e65f2cf7435dfcea294400b35" category="inline-link-macro">下一步：为数据科学家或开发人员配置 Jupyter 笔记本电脑工作空间</block>
  <block id="86e512bbf34bd396dd043a14ff2027ec" category="paragraph"><block ref="86e512bbf34bd396dd043a14ff2027ec" category="inline-link-macro-rx"></block></block>
  <block id="b569e24403ad128c09e2d0dbd0116463" category="inline-link-macro">接下来： Kubeflow 部署概述</block>
  <block id="66f5564ed29f37f0b81d2dde741b9c8f" category="paragraph"><block ref="66f5564ed29f37f0b81d2dde741b9c8f" category="inline-link-macro-rx"></block></block>
  <block id="fffa1b56750a0334993c90d5adc9912a" category="doc">TR-4798 ： NetApp AI 控制平台</block>
  <block id="6dd86945b1681007efc06cd445661f24" category="inline-link-macro">接下来：概念和组件</block>
  <block id="742ed784bbf61aca3af793407a42b1f5" category="paragraph"><block ref="742ed784bbf61aca3af793407a42b1f5" category="inline-link-macro-rx"></block></block>
  <block id="4fe6ae61b2ccf0bd553bc2c0f15cf803" category="inline-link-macro">接下来： ONTAP AI 部署的 Trident 后端示例</block>
  <block id="8de05380035e6d3c48105e0b80ca2e32" category="paragraph"><block ref="8de05380035e6d3c48105e0b80ca2e32" category="inline-link-macro-rx"></block></block>
  <block id="96e1c56a273105095d8b5e23e670f72f" category="inline-link-macro">接下来：硬件和软件要求</block>
  <block id="1c3ce2e5bdbf1449bbeba4ecbd124676" category="paragraph"><block ref="1c3ce2e5bdbf1449bbeba4ecbd124676" category="inline-link-macro-rx"></block></block>
  <block id="7af76512b5f0f470c6a7a6db368a9818" category="inline-link-macro">下一步：执行同步分布式 AI 工作负载</block>
  <block id="e79dd849e38d01ac3faa7090e83320b2" category="paragraph"><block ref="e79dd849e38d01ac3faa7090e83320b2" category="inline-link-macro-rx"></block></block>
  <block id="99c61a2c4480337fdf852f9dbe8a8863" category="inline-link-macro">接下来： Apache 气流工作流示例</block>
  <block id="d719776b249ed9e7109b922484d474a2" category="paragraph"><block ref="d719776b249ed9e7109b922484d474a2" category="inline-link-macro-rx"></block></block>
  <block id="26c21566450ecb01d82e6d0e3f7ef1a3" category="inline-link-macro">接下来： Kubernetes 部署</block>
  <block id="0635bed13bdc0ace58fec0264ac3d119" category="paragraph"><block ref="0635bed13bdc0ace58fec0264ac3d119" category="inline-link-macro-rx"></block></block>
  <block id="256fbc599203bd1bd63bfe25b7a5b9ad" category="inline-link-macro">接下来：性能测试</block>
  <block id="35bb3345a07dfa439dd6936ea8f69faf" category="paragraph"><block ref="35bb3345a07dfa439dd6936ea8f69faf" category="inline-link-macro-rx"></block></block>
  <block id="68eff5f8d34b801d40ab55f098bc6478" category="inline-link-macro">请单击此处了解解决方案入门</block>
  <block id="e5dec240e8be4a30564a7e8ddc0d568a" category="list-text">准备就绪后，单击 <block ref="a171481e1cde5211da297c03090cb7ce" category="inline-link-macro-rx"></block>。</block>
  <block id="4d0c05180ba83e5c8a9bbac094c365e2" category="list-text">此自动化设置为运行三个阶段（安装， Oracle 二进制文件复制计划，数据库，日志和仅适用于日志的复制计划），以及第四个阶段以在灾难恢复站点恢复数据库。</block>
  <block id="675b1e5a01195fa5d419962701704b96" category="cell">在 Oracle EC2 实例上设置适当的交换空间，默认情况下，某些 EC2 实例使用 0 交换部署</block>
  <block id="68085bee9e04417d4d9e74101a357a22" category="list-text">在 Type Details 下，输入源集群和 CVO 集群， Cloud Central/Manager ， AWS 访问 / 机密密钥和 Cloud Central 刷新令牌的用户名和密码。</block>
  <block id="861503fb33ea04fecb13449e713e8ac6" category="admonition">运行恢复攻略手册之前，请确保您具备以下条件：确保它通过 /etc/oratab 和 /etc/oraInst.oc 从源 Oracle 主机复制到目标主机</block>
  <block id="72feee9e055adc523c4c9ca3c1453409" category="inline-link-macro">视频：使用 Astra Control 在 CI/CD 管道中保护数据</block>
  <block id="3bf54df2b09b6352059075c261817bd0" category="cell"><block ref="3bf54df2b09b6352059075c261817bd0" category="inline-link-macro-rx"></block></block>
  <block id="93b94e62ad8cb02a1d1a7b0944a5445d" category="summary">本文档讨论适用于 VMware vSphere 的 ONTAP 工具的产品安全性。</block>
  <block id="289953e1dbd51c07cae2ecf1e6fb88a1" category="doc">WP-7353 ：适用于 VMware vSphere 的 ONTAP 工具—产品安全性</block>
  <block id="595319f89334a6a0b8edd4f81172fc71" category="paragraph">NetApp 公司 Chance Bingen ， Dan Tullidge ， Jenn Schrie</block>
  <block id="7ab9df3e4e38ca227c1b48b0f6740675" category="section-title">确保开发活动的安全</block>
  <block id="1a79eb278bc02ebdbd2ab32925e316f6" category="paragraph">使用适用于 VMware vSphere 的 NetApp ONTAP 工具进行软件工程时，需要执行以下安全开发活动：</block>
  <block id="39e5fc9eb192f011ab14dae6c2974c4e" category="list-text">威胁建模。 * 威胁建模的目的是在软件开发生命周期早期发现功能，组件或产品中的安全缺陷。威胁模型是影响应用程序安全性的所有信息的结构化表示。从本质上说，它是从安全性角度来看待应用程序及其环境的。</block>
  <block id="9f16ab3a50bca32d19c4729319035c8d" category="list-text">* 动态应用程序安全测试（ DAST ）。 * 此技术用于检测处于运行状态的应用程序上的易受到攻击的情况。Dast 会测试 Web 应用程序公开的 HTTP 和 HTML 接口。</block>
  <block id="267bed0525e4dab477e4c24ca5a1794e" category="list-text">* 第三方代码货币。 * 作为开源软件（ OSS ）软件开发的一部分，您必须解决可能与产品中包含的任何 OSS 相关的安全漏洞。这是一项持续努力，因为新的 OSS 版本可能会随时报告新发现的漏洞。</block>
  <block id="db7bc87c89c1ee76d313865a32fc0e06" category="list-text">* 漏洞扫描。 * 漏洞扫描的目的是在 NetApp 产品发布给客户之前检测其常见和已知安全漏洞。</block>
  <block id="1a4c104571630526efc77b84e82380fe" category="list-text">* 渗透测试。 * 渗透测试是指评估系统， Web 应用程序或网络以发现攻击者可能利用的安全漏洞的过程。NetApp 的渗透测试（笔测试）由一组经过批准且值得信赖的第三方公司执行。其测试范围包括使用复杂的利用方法或工具对与恶意入侵者或黑客类似的应用程序或软件发起攻击。</block>
  <block id="7e98fc3ea1ec077cfd1727a58e9c9020" category="section-title">产品安全功能</block>
  <block id="85d61648687f15050da0b86741b90358" category="paragraph">适用于 VMware vSphere 的 NetApp ONTAP 工具在每个版本中都包含以下安全功能。</block>
  <block id="dff88c2ef0b49b09246ffd6f9ec55195" category="list-text">默认情况下， * 登录横幅。 * SSH 处于禁用状态，如果从 VM 控制台启用，则仅允许一次性登录。用户在登录提示符中输入用户名后，将显示以下登录横幅：</block>
  <block id="399875025e8e96cc13102a4dd72f2434" category="paragraph">* 警告： * 禁止未经授权访问此系统，并将受到法律的起诉。访问此系统即表示您同意，如果怀疑未经授权使用，您的操作可能会受到监控。</block>
  <block id="2d8330ed99c80a842ffbd1362e038e5e" category="paragraph">用户通过 SSH 通道完成登录后，将显示以下文本：</block>
  <block id="677528ad13d460c058ac50e8a62092cf" category="list-text">* 基于角色的访问控制（ Role-Based Access Control ， RBAC ）。 * ONTAP 工具与两种类型的 RBAC 控制相关联：</block>
  <block id="ac38773d017495a97d5b88f242578cb8" category="list-text">原生 vCenter Server 特权</block>
  <block id="31cedac82fef311cb790a12f96897223" category="list-text">vCenter 插件的特定特权。有关详细信息，请参见<block ref="e5f6920797dbff91ef59367270a82669" category="inline-link-rx"></block>。</block>
  <block id="5d32469f8a65b884a8f70abf95fe485a" category="list-text">* 加密通信通道。 * 所有外部通信均使用 TLS 1.2 版通过 HTTPS 进行。</block>
  <block id="600d4f98483fae8e58054f976d7e0c0e" category="list-text">* 最小端口暴露。 * 只有必要的端口在防火墙上处于打开状态。</block>
  <block id="0406f8902379502d1eba01f043c232b7" category="paragraph">下表介绍了打开的端口详细信息。</block>
  <block id="69fc9fe9cbb7709e97a433352aecf77d" category="cell">TCP v4/v6 端口号</block>
  <block id="86408593c34af77fdd90df932f8b5261" category="cell">功能</block>
  <block id="0c95054981de037de06e544a52eb3613" category="cell">8143</block>
  <block id="d16c4afdc5f340936b747baf91efc843" category="cell">用于 REST API 的 HTTPS 连接</block>
  <block id="5bd529d5b07b647a8863cf71e98d651a" category="cell">8043</block>
  <block id="1f4deeb2f64336d4ff65ea3d2b4ffe2f" category="cell">HTTPS 连接</block>
  <block id="cb4b69eb9bd10da82c15dca2f86a1385" category="cell">9060</block>
  <block id="5852f8019b572f4cdef5bab783fa799f" category="cell">用于基于 https 的 SOAP 连接的 HTTPS 连接必须打开此端口，以允许客户端连接到 ONTAP 工具 API 服务器。</block>
  <block id="b6d767d2f8ed5d21a44b0e5886680cb9" category="cell">22.</block>
  <block id="f4e339608b243f9b57b78ffaf061b498" category="cell">SSH （默认为禁用）</block>
  <block id="d82d678e9583c1f5f283ec56fbf1abb7" category="cell">9080</block>
  <block id="ef34781e03f49b5db5dd8fa267c4c41b" category="cell">HTTPS 连接— VP 和 SRA —仅从环回进行内部连接</block>
  <block id="a44ba9086b2b83ccf2baf7c678723449" category="cell">9083.</block>
  <block id="25a695aa0122683aad4828e2458bbba6" category="cell">HTTPS 连接— VP 和 SRA</block>
  <block id="4b8384754c8b30050bb36e840394189b" category="cell">用于基于 https 的 SOAP 连接</block>
  <block id="abea47ba24142ed16b7d8fbf2c740e0d" category="cell">1162.</block>
  <block id="4a0724da5c6f4e4817663ae822550800" category="cell">VP SNMP 陷阱数据包</block>
  <block id="5cce8dede893813f879b873962fb669f" category="cell">1527</block>
  <block id="60135f95267c6e0711bf5a2858dfff2f" category="cell">Derby 数据库端口，仅在此计算机与自身之间，不接受外部连接—仅限内部连接</block>
  <block id="bf6184406d1e18fffc86ecf770fbb391" category="inline-link">知识库文章</block>
  <block id="fedac49792829de4ff38fcf7a3846faa" category="list-text">* 支持证书颁发机构（ CA ）签名证书。 * 适用于 VMware vSphere 的 ONTAP 工具支持 CA 签名证书。请参见此内容<block ref="0903a062b2072644a9b744a7fece4216" category="inline-link-rx"></block> 有关详细信息 ...</block>
  <block id="9fca19988370da2a459b24505e9d23d5" category="list-text">* 审核日志记录。 * 支持包可以下载，并且非常详细。ONTAP 工具会将所有用户登录和注销活动记录在一个单独的日志文件中。VASA API 调用会记录在专用的 VASA 审核日志（本地 CXF.log ）中。</block>
  <block id="7d60a2806aedd934b75cce55d6693689" category="list-text">* 密码策略。 * 遵循以下密码策略：</block>
  <block id="f82f7513742f08b9d2784923213bdc75" category="list-text">密码不会记录在任何日志文件中。</block>
  <block id="83040c348e071499488a8128db207545" category="list-text">密码不会以纯文本形式传达。</block>
  <block id="bc319862df3312f423a50fece7730db9" category="list-text">密码是在安装过程本身期间配置的。</block>
  <block id="853c2ea85b86882d0ea73b606a9800a4" category="list-text">密码历史记录是一个可配置的参数。</block>
  <block id="b3d3877bc96752ae50a409c72597d47a" category="list-text">密码最短期限设置为 24 小时。</block>
  <block id="fb0bdec50022a37424a405b53da7c9c8" category="list-text">已禁用密码字段的自动完成。</block>
  <block id="3a04f054be8ad983ea82fd5079519810" category="list-text">ONTAP 工具使用 SHA256 哈希对所有存储的凭据信息进行加密。</block>
  <block id="62783f5d69cb5d3cb22b077c1d2b8777" category="cell">2021年11月</block>
  <block id="796fae61e057ed3cc6ad68fe313088d7" category="inline-link-macro">视频：使用 Astra Control 迁移工作负载—采用 NetApp 的 Red Hat OpenShift</block>
  <block id="bbb36afc119fa1244c89e23e3f5599dc" category="list-text"><block ref="bbb36afc119fa1244c89e23e3f5599dc" category="inline-link-macro-rx"></block></block>
  <block id="a38830c0aa781c889eeb5910f47be6ea" category="summary">使用 Astra 控制中心在 CI/CD 管道中启用数据保护</block>
  <block id="dc0365ad4c92bc3f8973ff5616cd6830" category="doc">使用 Astra 控制中心在 CI/CD 管道中保护数据</block>
  <block id="7e936a7640e03dad09e0b76d68277d56" category="summary">我们使用 NetApp StorageGRID 设置对生产和消费工作负载执行了三到四个节点的分层存储测试。</block>
  <block id="3c2fe55c24192bbec6d6d3aede570213" category="doc">性能测试与可扩展性</block>
  <block id="41527eb87fda84941b00d3f232f4d599" category="inline-link-macro">先前版本： Confluent Kafka 认证。</block>
  <block id="2afffcb29b9d7c0e37e29d760a386a1a" category="paragraph"><block ref="2afffcb29b9d7c0e37e29d760a386a1a" category="inline-link-macro-rx"></block></block>
  <block id="7d86117016f3aa5d3958d017b7eb5fb3" category="paragraph">我们使用 NetApp StorageGRID 设置对生产和消费工作负载执行了三到四个节点的分层存储测试。根据我们的测试，完成时间和性能结果与 StorageGRID 节点数成正比。StorageGRID 设置至少需要三个节点。</block>
  <block id="4e6097966a711c7acf606365a2925b64" category="list-text">当存储节点数量增加时，完成生产和消费模式操作所需的时间呈线性下降趋势。</block>
  <block id="544baf869b5baa766e8839cd33697872" category="paragraph"><block ref="544baf869b5baa766e8839cd33697872" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d098e780afaaad433dd6982bbc5af988" category="list-text">根据 StorageGRID 节点的数量， S3 检索操作的性能呈线性增长。StorageGRID 最多支持 200 个 StorgeGRID 节点。</block>
  <block id="2cd319a657a7fccb8f747dab6f102dcc" category="paragraph"><block ref="2cd319a657a7fccb8f747dab6f102dcc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="075012283bda9f5909d780f5abff5ead" category="inline-link-macro">接下来： Kafka S3 连接器。</block>
  <block id="62539cc0a3e2e4fc3a49812e053e2949" category="paragraph"><block ref="62539cc0a3e2e4fc3a49812e053e2949" category="inline-link-macro-rx"></block></block>
  <block id="55473d705d75e19b6040dbe34242319c" category="summary">本节介绍此解决方案中使用的技术。</block>
  <block id="1ac2a5604ed02bc66c4d6241b534d13b" category="inline-link-macro">上一步：解决方案。</block>
  <block id="d74648020b826dcefccd756c864ffaea" category="paragraph"><block ref="d74648020b826dcefccd756c864ffaea" category="inline-link-macro-rx"></block></block>
  <block id="ef88ce126c93b401cdbbd346dba65b09" category="paragraph">NetApp StorageGRID 是一款高性能，经济高效的对象存储平台。它采用基于节点的分布式网格架构，提供智能的策略驱动型全局数据管理。它通过其无处不在的全局对象命名空间以及复杂的数据管理功能，简化了对数 PB 的非结构化数据和数十亿个对象的管理。单次调用对象访问可扩展到各个站点，并简化高可用性架构，同时确保无论站点或基础架构发生中断，都能持续访问对象。</block>
  <block id="01e84e003f95bdd01e21f68eacab844f" category="paragraph">多租户支持在同一网格中安全地处理多个非结构化云和企业数据应用程序，从而提高 NetApp StorageGRID 的 ROI 并增加其用例。可以使用元数据驱动型对象生命周期策略创建多个服务级别，从而优化多个地理位置的持久性，保护，性能和位置。用户可以根据需求的变化无中断地调整策略和重新调整数据环境。</block>
  <block id="d278a32480d32fadf4f15f58e5e638c8" category="paragraph">SmartStore 使用 StorageGRID 作为远程存储层，并允许客户部署多个分布在不同地理位置的站点，以实现强大的可用性和持久性，并将其作为一个对象命名空间呈现。这样， Splunk SmartStore 就可以利用 StorageGRID 的高性能，高密度容量，并能够使用一个 URL 跨多个物理站点扩展到数百个节点以与对象交互。通过这一 URL ，即使在一个站点之外，存储扩展，升级和修复也不会造成中断。StorageGRID 独特的数据管理策略引擎可提供经过优化的性能和持久性级别，并符合数据位置要求。</block>
  <block id="9dcbcd222af0d7f25e6cf8786a15fa1c" category="section-title">适用于 Apache 和 Confluent Kafka 的 StorageGRID 功能。</block>
  <block id="84a4507c63f6ce35b7187a0c6dcec5ce" category="paragraph">StorageGRID 具有多种功能，用户可以根据不断变化的环境自定义这些功能。从部署到扩展 Kafka 集群，您的环境需要快速采用来应对变化，并且不会对 Kafka 造成中断。StorageGRID 的灵活数据管理策略（ ILM ）和流量分类器（ QoS ）可让您根据环境进行规划和调整。</block>
  <block id="dc10add739549f11a9f3d6ac44bf7fcc" category="section-title">使用 Grid Manager 进行简单管理</block>
  <block id="412b4bcc4df606955eb4df16ff1780b2" category="paragraph">网格管理器是一个基于浏览器的图形界面，可用于在一个管理平台中跨全球分布的位置配置，管理和监控 StorageGRID 系统。</block>
  <block id="a96dbd2aff4998074bc0ca48dc4817d5" category="paragraph"><block ref="a96dbd2aff4998074bc0ca48dc4817d5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5bc09acc78ce9da74088e3ad0dec1370" category="paragraph">您可以使用网格管理器界面执行以下任务：</block>
  <block id="57d56613e28a4b5b4e9f351d17e228f7" category="list-text">管理全局分布的 PB 级对象存储库，例如图像，视频和记录。</block>
  <block id="5865c6ada208cf4e21f121f0d367b25a" category="list-text">监控网格节点和服务以确保对象可用性。</block>
  <block id="52134209a1824af49cd06b67ca3aedc7" category="list-text">使用信息生命周期管理（ ILM ）规则管理对象数据随时间的放置。这些规则用于控制在载入对象数据后该数据会发生什么情况，如何防止其丢失，对象数据的存储位置以及数据的存储时间。</block>
  <block id="5c578eee23496659cea7dda27021c318" category="list-text">监控系统内的事务，性能和操作。</block>
  <block id="c91fcac1d7192250f9c73d72ad06e051" category="section-title">信息生命周期管理策略</block>
  <block id="abb721cd225fe1f863c57bf192671334" category="paragraph">StorageGRID 具有灵活的数据管理策略，其中包括保留多个对象副本，并根据特定的性能和数据保护要求使用 2+1 和 4+2 （以及其他许多策略）等 EC （纠删编码）方案来存储对象。随着工作负载和要求随时间的变化， ILM 策略也往往会随时间的变化而变化。修改 ILM 策略是一项核心功能，可使 StorageGRID 客户快速轻松地适应不断变化的环境。</block>
  <block id="e6e42816553e5476dceee40a2d5d2edf" category="paragraph">StorageGRID 可通过添加更多节点来扩展性能，这些节点可以是 VM ，裸机或专用设备，例如 SG5712 ， SG5760 ， SG6060 或 SGF6024 。在我们的测试中，我们使用 SG6024 设备配置了最小大小的三节点网格，从而超出了 Apache Kafka 的主要性能要求。随着客户通过更多代理扩展 Kafka 集群，他们可以添加更多存储节点以提高性能和容量。</block>
  <block id="3eee81ca69cbbee2bec24db63e4dea0d" category="section-title">负载平衡器和端点配置</block>
  <block id="5b42fd120a40ecd7cc8ac5cdedde8ceb" category="paragraph">StorageGRID 中的管理节点提供了网格管理器 UI （用户界面）和 REST API 端点，用于查看，配置和管理 StorageGRID 系统，并可通过审核日志来跟踪系统活动。为了为 Confluent Kafka 分层存储提供高可用性的 S3 端点，我们实施了 StorageGRID 负载平衡器，该平衡器作为一项服务在管理节点和网关节点上运行。此外，负载平衡器还管理本地流量并与 GSLB （全局服务器负载平衡）进行通信，以帮助进行灾难恢复。</block>
  <block id="ebe4bf9f44a65ad044fdede621409388" category="paragraph">为了进一步增强端点配置， StorageGRID 提供了内置于管理节点中的流量分类策略，可用于监控工作负载流量，并对工作负载应用各种服务质量（ QoS ）限制。流量分类策略会应用于网关节点和管理节点的 StorageGRID 负载平衡器服务上的端点。这些策略有助于限制和监控流量。</block>
  <block id="bb2bd99338b18762ef6953ad2cbfafc7" category="section-title">Apache Kafka</block>
  <block id="e83634d9bcd2547b82d8b2390ce1d30b" category="paragraph">Apache Kafka 是一种使用 Java 和 Scala 编写的流处理的软件总线框架实施。它旨在提供一个统一的高吞吐量，低延迟平台来处理实时数据馈送。Kafka 可以连接到外部系统，以便通过 Kafka Connect 导出和导入数据，并提供 Kafka 流，这是一个 Java 流处理库。Kafka 使用基于 TCP 的二进制协议，该协议针对效率进行了优化，并依赖于 " 消息集 " 抽象，该抽象概念可将消息自然分组在一起，从而降低网络往返开销。这样可以实现更大的顺序磁盘操作，更大的网络数据包和连续的内存块，从而使 Kafka 能够将突发的随机消息写入流转变为线性写入。下图显示了 Apache Kafka 的基本数据流。</block>
  <block id="d1675da945892e06b2f84c42c32b7074" category="paragraph"><block ref="d1675da945892e06b2f84c42c32b7074" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c50889322e9d7d913a4218be06b94d9d" category="paragraph">Kafka 存储来自任意数量的进程的关键价值消息，这些进程称为 " 生产者 " 。可以将数据分区为不同主题中的不同分区。在分区中，消息严格按其偏移量（消息在分区中的位置）排序，并编制索引并随时间戳一起存储。其他称为使用者的进程可以从分区读取消息。对于流处理， Kafka 提供了流 API ，可用于写入使用 Kafka 数据的 Java 应用程序，并将结果写入 Kafka 。Apache Kafka 还可与外部流处理系统配合使用，例如 Apache Apex ， Apache Flink ， Apache Spark ， Apache Storm 和 Apache NiFi 。</block>
  <block id="0f13dfad626acfc5a84f5c6d8127cb93" category="paragraph">Kafka 在一个或多个服务器（称为代理）组成的集群上运行，所有主题的分区分布在各个集群节点上。此外，分区会复制到多个代理。这种架构使 Kafka 能够以容错方式提供大量消息流，并使其能够取代一些传统消息传送系统，例如 Java 消息服务（ Java Message Service ， JMS ），高级消息队列协议（ Advanced Message Queuing Protocol ， AMQP ）等。自 0.11.0.0 版本以来， Kafka 提供了事务写入功能，可使用流 API 精确处理一次流。</block>
  <block id="a05ab89a0e70d8932f92ff5626b80205" category="paragraph">Kafka 支持两种类型的主题：常规和压缩。可以为常规主题配置保留时间或空间限制。如果存在早于指定保留时间的记录，或者超出分区的绑定空间，则允许 Kafka 删除旧数据以释放存储空间。默认情况下，主题的保留时间为 7 天，但也可以无限期地存储数据。对于压缩主题，记录不会根据时间或空间限制过期。相反， Kafka 会将后续消息视为对具有相同密钥的旧消息的更新，并保证不会删除每个密钥的最新消息。用户可以通过使用特定密钥的空值编写所谓的 tombstone 消息来完全删除消息。</block>
  <block id="67510baee28b6897f23f317ea0eec6cd" category="paragraph">Kafka 中有五个主要 API ：</block>
  <block id="43437be1fd3e6788160e377194164ab4" category="list-text">* 生成程序 API-* 允许应用程序发布记录流。</block>
  <block id="d4814db3c767fa7cb8ef858faeb32012" category="list-text">* 使用者 API-* 允许应用程序订阅主题并处理记录流。</block>
  <block id="8e4e76f717f8e282710dbe0549551bbc" category="list-text">* 连接器 API" 。 * 执行可重复使用的生产者和使用者 API ，以便将这些主题链接到现有应用程序。</block>
  <block id="32a74767220f0fd870d75199524522d5" category="list-text">* 流 API 。 * 此 API 将输入流转换为输出并生成结果。</block>
  <block id="4bb47a81bc800e1fb57bdde2d0945599" category="list-text">* 管理 API-* 用于管理 Kafka 主题，代理和其他 Kafka 对象。</block>
  <block id="610121f784783393f66b6624cf93dafb" category="paragraph">消费者和生产者 API 基于 Kafka 消息传送协议构建，并在 Java 中为 Kafka 消费者和生产者客户端提供了参考实施。底层消息传送协议是一种二进制协议，开发人员可以使用该协议以任何编程语言编写自己的使用者或生产者客户端。这样便可解除 Kafka 对 Java 虚拟机（ JVM ）生态系统的锁定。可用的非 Java 客户端列表会保存在 Apache Kafka wiki 中。</block>
  <block id="9e999181078c902e639722db20d48f15" category="section-title">Confuent Kafka</block>
  <block id="0c73b718722597e5d75f3221e6622d71" category="paragraph">Confuent Platform 是一个全面的数据流平台，可让您轻松地以持续的实时流的形式访问，存储和管理数据。Confluent 由 Apache Kafka 的原始创建者构建，通过企业级功能扩展了 Kafka 的优势，同时消除了 Kafka 的管理或监控负担。如今，《财富》 100 强企业中有 80% 以上的企业都采用数据流技术，其中大多数企业都采用了流畅技术。</block>
  <block id="3bcbf4072ba1e23a48434530e19a485d" category="section-title">为什么选择 Confluent ？</block>
  <block id="0fcb60f8560b74a641f556dbf96faf91" category="paragraph">通过将历史数据和实时数据集成到一个统一的中央真相来源中， Confluent 可以轻松构建一个全新的现代化事件驱动型应用程序类别，获得通用数据管道，并充分扩展性，性能和可靠性，释放出强大的新用例。</block>
  <block id="f781b7a8a0d145997db9cf8449512bb8" category="section-title">Confluent 的用途是什么？</block>
  <block id="6b41836f6be8bfff401751859b6f5561" category="paragraph">借助整合平台，您可以专注于如何从数据中获得业务价值，而不是担心底层机制，例如如何在不同系统之间传输或集成数据。具体而言， Confluent Platform 可简化将数据源连接到 Kafka 的过程，构建流式应用程序，以及保护，监控和管理 Kafka 基础架构。如今， Consfluent Platform 已广泛用于各行各业的各种用例，从金融服务，全渠道零售和自动驾驶汽车到欺诈检测， 微服务和物联网。</block>
  <block id="269de5f63c8fa37298817ce903a70bbe" category="paragraph">下图显示了 Confluent Kafka 平台组件。</block>
  <block id="a4eaf48584aaa7df975a9275a8b4ee24" category="paragraph"><block ref="a4eaf48584aaa7df975a9275a8b4ee24" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0693822e07a3206c53912f33e3d67758" category="section-title">Confluent 事件流技术概述</block>
  <block id="f6d3df755e538ab85e1dffe4e2ef9966" category="paragraph">Confluent Platform 的核心是<block ref="67718c59f00d7d04e4868dff5b37db2b" category="inline-link-rx"></block>一种最受欢迎的开源分布式流式平台。Kafka 的主要功能如下：</block>
  <block id="f630f472aeeab8697846e0f1f2f730aa" category="list-text">发布并订阅记录流。</block>
  <block id="176fc2b349b906f6eb7a8f49c7ce9780" category="list-text">以容错方式存储记录流。</block>
  <block id="6026e29e86fd0ddcb6cba3908f85691f" category="list-text">处理记录流。</block>
  <block id="f7ec60663c6d3ee6fd5abe343b34f2b4" category="paragraph">即装即用的 Confluent 平台还包括架构注册表， REST 代理，总共 100 多个预构建的 Kafka 连接器和 ksqlDB 。</block>
  <block id="55be5d4d3f7143137050de9374d03f6f" category="section-title">Confluent 平台企业功能概述</block>
  <block id="c7d070206c9b11b02bee9b591736971c" category="list-text">* 流畅控制中心 * 。一种基于 GUI 的系统，用于管理和监控 Kafka 。您可以通过它轻松管理 Kafka Connect ，以及创建，编辑和管理与其他系统的连接。</block>
  <block id="da2f1a857a79ec960671ee4c735cc96e" category="list-text">* Kubernetes 的 Confluent 。 * Kubernetes 的 Confluent 是 Kubernetes 的操作员。Kubernetes 操作员通过为特定平台应用程序提供独特的功能和要求，扩展了 Kubernetes 的业务流程功能。对于 Confluent Platform ，这包括大幅简化 Kubernetes 上 Kafka 的部署流程，并自动执行典型的基础架构生命周期任务。</block>
  <block id="5488a6660d4f7d32995b983624c2e915" category="list-text">* 连接 Kafka 的流畅连接器。 * 连接器使用 Kafka Connect API 将 Kafka 连接到数据库，密钥值存储，搜索索引和文件系统等其他系统。Confluent Hub 提供可下载的连接器，用于最常用的数据源和数据池，包括这些连接器经过全面测试且受支持的版本以及 Confluent 平台。有关更多详细信息，请参见<block ref="2f0cdf69523bef6b3b17324f38f83353" category="inline-link-rx"></block>。</block>
  <block id="b47dc18271c0f29d64ce1f45f12a053c" category="list-text">* 自平衡集群。 * 提供自动化负载平衡，故障检测和自我修复功能。它支持根据需要添加或停用代理，无需手动调整。</block>
  <block id="776a13408286748f8c985c409604e8b6" category="list-text">* 流畅集群链接。 * 直接将集群连接在一起，并通过链路网桥将主题从一个集群镜像到另一个集群。集群链接可简化多数据中心，多集群和混合云部署的设置。</block>
  <block id="1e5c2c1a7b1c3f9809e2b97438773325" category="list-text">* 流畅自动数据平衡器。 * 监控集群中的代理数量，分区大小，分区数量和导数。它允许您在集群中移动数据以创建均匀的工作负载，同时限制重新平衡流量，以便在重新平衡的同时最大限度地减少对生产工作负载的影响。</block>
  <block id="0f97179e1bb10c15685ca78b035b4956" category="list-text">* 流畅复制器。 * 使在多个数据中心维护多个 Kafka 集群变得比以往任何时候都更轻松。</block>
  <block id="a409602cf12dbcb436352a95146b6407" category="list-text">* 分层存储。 * 提供了使用您喜欢的云提供商存储大量 Kafka 数据的选项，从而减轻了运营负担并降低了成本。借助分层存储，您只能在需要更多计算资源时，才可以将数据保存在经济高效的对象存储和扩展代理上。</block>
  <block id="ce61411f1780c30f58dd5aed90a77ad3" category="list-text">* 流畅的 jms 客户端。 * 流畅平台包括适用于 Kafka 的与 jms 兼容的客户端。此 Kafka 客户端使用 Kafka 代理作为后端，实施了 Jms 1.1 标准 API 。如果旧版应用程序使用的是 jms ，并且您希望将现有的 jms 消息代理替换为 Kafka ，则此功能非常有用。</block>
  <block id="b38f5ff9be3975e499ba273a01035420" category="list-text">* 流畅的 MQT 代理。 * 提供了一种从 MQT 设备和网关直接向 Kafka 发布数据的方法，而无需在中间使用 MQT 代理。</block>
  <block id="ab05a802c02076dd0f0b419529e71ccd" category="list-text">* 流畅安全插件。 * 流畅安全插件用于为各种流畅平台工具和产品添加安全功能。目前，可以为 Confluent REST 代理提供一个插件，用于对传入请求进行身份验证，并将经过身份验证的主体传播到 Kafka 请求。这样， Confluent REST 代理客户端便可利用 Kafka 代理的多租户安全功能。</block>
  <block id="d3842cf97694fef25c5621612bb0ac4c" category="inline-link-macro">接下来： Confluent Kafka 认证。</block>
  <block id="948f0a5d77796e0b727a5518536d1197" category="paragraph"><block ref="948f0a5d77796e0b727a5518536d1197" category="inline-link-macro-rx"></block></block>
  <block id="69fc1008ccb741113af5042f04fcbc8b" category="summary">本文档介绍在 NetApp 存储控制器上使用 Kafka 的最佳实践准则。</block>
  <block id="22f51db51c9641d5358726fa5e03f67b" category="doc">TR-4912 ：《采用 NetApp 的 Confluent Kafka 分层存储最佳实践指南》</block>
  <block id="7e04c5b9b468881851a130b909e9b614" category="paragraph">Karthikeyan Nagalingam ， Rankesh Kumar</block>
  <block id="dc221351ef5ebc52aa12d53c2f7925f2" category="paragraph">Apache Kafka 是一个社区分布的事件流式平台，能够每天处理数万亿次的事件。Kafka 最初是一个消息队列，它基于分布式提交日志的抽象化。自从 2011 年由 LinkedIn 创建和开源以来， Kafka 已从消息队列发展为成熟的事件流式平台。Confluent 通过 Confluent 平台分发 Kafka 。Confluent 平台通过更多的社区和商业功能对 Kafka 进行了改进，这些功能旨在大规模增强生产中操作员和开发人员的流式体验。</block>
  <block id="9d966de7caaeb92b6d0a8eaa17c69a40" category="paragraph">本文档通过提供以下内容介绍在 NetApp 存储控制器上使用 Kafka 的最佳实践准则：</block>
  <block id="46541dff1f04ebc28b6e4a5e4d2f96e3" category="list-text">获得与 NetApp 存储控制器 StorageGRID 相结合的 Kafka 认证</block>
  <block id="325e4712d2c482ab466b52444d78b9fc" category="list-text">Kafka 性能测试</block>
  <block id="98b7f74194750b5999674894089582b5" category="list-text">基于 NetApp 存储系统的 Kafka 的最佳实践准则</block>
  <block id="ff221b4a7c17defefb1a32cf9136086d" category="inline-link-macro">下一步：解决方案。</block>
  <block id="56e8e834116de848debc97d9b2ed12f7" category="paragraph"><block ref="56e8e834116de848debc97d9b2ed12f7" category="inline-link-macro-rx"></block></block>
  <block id="663d826f2d39c93c218bb619244537b3" category="summary">我们已通过与 Kafka 的 Confluent Platform 的 NetApp StorageGRID 分层存储认证。</block>
  <block id="2a1211326cdf7e6e5e7969985aef586c" category="doc">Confuent Kafka 认证</block>
  <block id="0a569fd987814c0464300156b2e26414" category="paragraph"><block ref="0a569fd987814c0464300156b2e26414" category="inline-link-macro-rx"></block></block>
  <block id="be381e73454d13da58fcd32e41526410" category="paragraph">我们已通过与 Kafka 的 Confluent Platform 的 NetApp StorageGRID 分层存储认证。分层存储将数据处理和存储管理分开，有助于降低运营负担和成本，并根据计算要求扩展代理。分层存储可将热数据发送到经济高效的对象存储。NetApp 和 Confluent 团队共同参与了此认证，并运行了认证所需的测试用例。</block>
  <block id="02af00f1173874ea2eba902375591214" category="section-title">Confuent Kafka 设置</block>
  <block id="375fa88d4d3cd19f2c1aeb7bcbb8e3aa" category="paragraph">我们使用以下设置进行认证。</block>
  <block id="6071c6d08d2373fbfb31053dc2fd5c22" category="paragraph">在此认证中，我们使用了三个 Zookepers ，五个代理和五个工具服务器，这些服务器具有 256 GB RAM 和 16 个 CPU 。对于 NetApp 存储，我们使用的是带有四个 SG6024 的 SG1000 负载平衡器的 StorageGRID 。存储和代理通过 100GbE 连接进行连接。</block>
  <block id="27e1df9a295f32bf249801b32cbbba25" category="paragraph">下图显示了用于 Confluent Kafka 认证的配置的网络拓扑。</block>
  <block id="82dc8b1c8f1a6f08261f17b764e74bf4" category="paragraph"><block ref="82dc8b1c8f1a6f08261f17b764e74bf4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5a1e9b58afa0d1c6824951b7f203a932" category="paragraph">这些工具服务器充当将 Kafka 请求发送到 Kafka 代理的应用程序客户端。</block>
  <block id="a0b3c1e592076debe73b163734ed8e2b" category="section-title">融合的分层存储配置</block>
  <block id="81082f7982ae1144f7662efde7446f1f" category="paragraph">分层存储配置在 Kafka 中需要以下参数：</block>
  <block id="bc2c337565cc83e69d77af35c6a4429b" category="paragraph">对于认证，我们使用的是 StorageGRID 与 HTTP 协议，但 HTTPS 也有效。访问密钥和机密密钥存储在 `confuent.tier.s3.cred.file.path` 参数中提供的文件名中。</block>
  <block id="ee08c02879623eaf870a33d3c30f797f" category="section-title">NetApp 存储控制器— StorageGRID</block>
  <block id="019b4ca5762181e87f7a8b756ee3c4aa" category="paragraph">我们在 StorageGRID 中配置了单站点配置以进行认证。</block>
  <block id="1ba0fc45020f864c62328d58df2351ef" category="paragraph"><block ref="1ba0fc45020f864c62328d58df2351ef" category="inline-image-macro-rx" type="image"></block></block>
  <block id="24948186af7511400293ced254fa202a" category="section-title">认证测试</block>
  <block id="82bf1c27fb05e3c95a9b056e596ac9e3" category="paragraph">我们已完成以下五个认证测试案例。前两项是功能测试，其余三项是性能测试。</block>
  <block id="4c5791ce7d906a384ff35dab9f635d41" category="section-title">对象存储正确性测试</block>
  <block id="5bbec59e9866298c54c1e5d91db17544" category="paragraph">此测试使用 API 调用对绑定存储所使用的对象存储执行基本操作，例如 GET ， PUT 和 DELETE 。</block>
  <block id="7cf5be835d50b9e5b598a4363e5a1310" category="section-title">分层功能正确性测试</block>
  <block id="9a751e89416eb9d15dc291c56824fdbf" category="paragraph">此测试将检查对象存储的端到端功能。它会创建一个主题，为新创建的主题生成一个事件流，等待代理将这些分段归档到对象存储，使用事件流，并验证已用流与已生成流的匹配情况。我们执行此测试时，无论是否注入了对象存储故障。我们通过在 StorageGRID 中的一个节点中停止服务管理器服务并验证端到端功能是否适用于对象存储来模拟节点故障。</block>
  <block id="88960bc44aa73a667c97d6168a27332a" category="section-title">层提取基准测试</block>
  <block id="777c3235446f781652127bde532a7d6e" category="paragraph">此测试验证了分层对象存储的读取性能，并检查了基准测试生成的区块在负载过重时的范围提取读取请求。在此基准测试中， Confluent 开发了自定义客户端来处理层提取请求。</block>
  <block id="2712a580ff4c3586c7ba3534b78aad18" category="section-title">生成并使用工作负载生成器</block>
  <block id="d12f80f2cbbac2f7033cf1254e5b147e" category="paragraph">此测试会通过归档区块在对象存储上间接生成写入工作负载。读取工作负载（区块读取）是在使用者组提取区块时从对象存储生成的。此工作负载由 TOCC 脚本生成。此测试检查了并行线程中对象存储上的读写性能。我们采用和不采用对象存储故障注入的方式进行了测试，就像分层功能正确性测试一样。</block>
  <block id="2a7273e52c0214e6f0b27bf1e870960e" category="section-title">保留工作负载生成器</block>
  <block id="b8fad0d8cdc86f76f51b7d6b6ec58975" category="paragraph">此测试检查了在主题保留工作负载繁重的情况下对象存储的删除性能。保留工作负载是使用 TOCC 脚本生成的，该脚本会与测试主题并行生成大量消息。本测试主题使用主动式基于大小和基于时间的保留设置进行配置，此设置会导致从对象存储中持续清除事件流。然后，这些区块会归档。这导致代理在对象存储中删除了大量内容，并收集了对象存储删除操作的性能。</block>
  <block id="b2ce010f52b23eb40ba6b51b92837acb" category="inline-link-macro">接下来：性能测试和可扩展性。</block>
  <block id="4a94c930da0f9f0974ad6d4f2d17726b" category="paragraph"><block ref="4a94c930da0f9f0974ad6d4f2d17726b" category="inline-link-macro-rx"></block></block>
  <block id="7747c0c1913888384e25d3a99b247187" category="summary">本文档提供了将 Kafka 与 NetApp 存储结合使用的最佳实践准则，包括 Confluent Kafka 认证测试，性能结果，调整， Kafka 连接器和自重新平衡功能。</block>
  <block id="06bf7cdac46014ea728ea73ea94f29ed" category="list-text">什么是 Apache Kafka</block>
  <block id="9411b66537bb375699af4bbf90c682d3" category="inline-link"><block ref="9411b66537bb375699af4bbf90c682d3" category="inline-link-rx"></block></block>
  <block id="a2b6e6fe4a206b71df85cc00f128ef0c" category="paragraph"><block ref="a2b6e6fe4a206b71df85cc00f128ef0c" category="inline-link-rx"></block></block>
  <block id="8f74869149421fffb3c139e146a83d10" category="list-text">S3-sink 参数详细信息</block>
  <block id="015ac233ccf3051a25abbbd7f56a39e9" category="inline-link"><block ref="015ac233ccf3051a25abbbd7f56a39e9" category="inline-link-rx"></block></block>
  <block id="26f8d9a8c1177c17a089f9a5c18628f4" category="paragraph"><block ref="26f8d9a8c1177c17a089f9a5c18628f4" category="inline-link-rx"></block></block>
  <block id="14bdc4a7a7b448924b5fe68d2a843973" category="inline-link"><block ref="14bdc4a7a7b448924b5fe68d2a843973" category="inline-link-rx"></block></block>
  <block id="c001bbfb62e45f662fe697182fa82240" category="paragraph"><block ref="c001bbfb62e45f662fe697182fa82240" category="inline-link-rx"></block></block>
  <block id="43f0735f931622d61f6837a0eb61f87e" category="summary">此测试基于自平衡集群功能，此功能可根据集群拓扑变化或负载不平衡自动重新平衡。</block>
  <block id="1b121910b0ce442f60b2620acf399867" category="doc">Confuent Kafka 重新平衡</block>
  <block id="6dec1258fbcccbfaa7098758abb00055" category="inline-link-macro">先前版本： Kafka S3 连接器。</block>
  <block id="6e3bea5fe8473b6e884edafaf7fcf1d4" category="paragraph"><block ref="6e3bea5fe8473b6e884edafaf7fcf1d4" category="inline-link-macro-rx"></block></block>
  <block id="3a1987c2d8476bb6296b144774dfb447" category="paragraph">此测试基于自平衡集群功能，此功能可根据集群拓扑变化或负载不平衡自动重新平衡。当节点故障或扩展节点需要在代理之间重新平衡数据时，整合重新平衡测试有助于测量添加新代理的时间。在典型的 Kafka 配置中，要重新平衡的数据量会随着集群的增长而增加，但在分层存储中，重新平衡仅限于少量数据。根据我们的验证，在典型的 Kafka 架构中，分层存储的重新平衡需要几秒或几分钟的时间，并且随着集群的增长而线性增长。</block>
  <block id="cc87abc70119e2ad833c42a865a33659" category="inline-link-macro">接下来：最佳实践准则。</block>
  <block id="caf8da5a9482899a1495e1e052a4b287" category="paragraph"><block ref="caf8da5a9482899a1495e1e052a4b287" category="inline-link-macro-rx"></block></block>
  <block id="139709c8a32ed1bcce233da863c5efda" category="summary">本节将介绍从此认证中获得的经验教训。</block>
  <block id="eab9ac0f00ca7c338d71f9acf8885092" category="doc">最佳实践准则</block>
  <block id="8dc1af71dd55db1f6671ef67f7a660ad" category="inline-link-macro">上一页： Confluent Kafka 重新平衡。</block>
  <block id="cd99f7a609148177d4d72ba77e774b87" category="paragraph"><block ref="cd99f7a609148177d4d72ba77e774b87" category="inline-link-macro-rx"></block></block>
  <block id="0ce889c330108bee2128cbc0b045a10d" category="list-text">根据我们的验证， NFS 不是 Confluent Kafka 代理保留数据的合适协议。</block>
  <block id="6abb1c46af597b864e1dc1606aa77120" category="list-text">我们可以使用 SAN （尤其是 FC ）来保留代理数据或本地磁盘，因为在 Confluent 分层存储配置中，存储在代理数据目录中的数据大小取决于数据移至对象存储时的区块大小和保留时间。</block>
  <block id="992e82f9c5ce28bbe0068e8ff7ea8a09" category="list-text">当 seg.bytes 较高时，对象存储可提供更好的性能；我们测试了 512 MB 。</block>
  <block id="f165ec9e9849281afaf2162f6396907c" category="list-text">在 Kafka 中，为主题生成的每个记录的密钥或值的长度（以字节为单位）由 `lage.key.value` 参数控制。对于 StorageGRID ， S3 对象载入和检索性能已提高到更高值。例如， 512 字节提供了 5.8 GBps 检索， 1024 字节提供了 7.5 GBps S3 检索， 2048 字节提供了接近 10 Gbps 的值。</block>
  <block id="92a9c9d4753636cd8ef8008380f5de9b" category="paragraph">下图显示了基于 `length 。 key.value` 的 S3 对象载入和检索。</block>
  <block id="b50ee24368ac624f2816b9e550167cb9" category="paragraph"><block ref="b50ee24368ac624f2816b9e550167cb9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4127d3e6d7b548701a1cf83ef1d7a922" category="paragraph"><block ref="4127d3e6d7b548701a1cf83ef1d7a922" category="inline-link-macro-rx"></block></block>
  <block id="35f99fa939062899487754f637210a25" category="summary">本节介绍用于 Confluent 认证的硬件和软件。此信息适用于使用 NetApp 存储的 Kafka 部署。</block>
  <block id="40328f8a932f8ae1964c73c1f2eca76b" category="paragraph"><block ref="40328f8a932f8ae1964c73c1f2eca76b" category="inline-link-macro-rx"></block></block>
  <block id="71540b25bcc76e1218b21f8613181500" category="paragraph">这款 NetApp StorageGRID 和 Apache Kafka 解决方案是一款专为流设计的分布式系统，两个程序均可水平扩展和容错。它们可提供提交日志，并支持分布式数据流和流处理。NetApp 存储阵列将计算和数据存储资源分离，以便可以独立扩展。下图显示了 NetApp StorageGRID 和 Confluent Kafka 解决方案。</block>
  <block id="f4e981d58b1468737da82402b3cce7f1" category="paragraph"><block ref="f4e981d58b1468737da82402b3cce7f1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="16d17bd11d09e7ab044f85f158c4ee5c" category="section-title">解决方案架构详细信息</block>
  <block id="3a0eccac353d022d6284582174640020" category="paragraph">本节介绍用于 Confluent 认证的硬件和软件。此信息适用于使用 NetApp 存储的 Kafka 部署。下表介绍了经过测试的解决方案架构和基本组件。</block>
  <block id="cd6b218ceb186591718799f941a99fd0" category="cell">Confluent Kafka 6.2 版</block>
  <block id="8a1732b4cde6f106471a0e6dbb186bed" category="list-text">三个 Zookepers</block>
  <block id="fde5b2c6fa48108e02c6a3587ce451b4" category="list-text">五个代理服务器</block>
  <block id="6e2b337bcc4d43ad13af134abbea9d91" category="list-text">五个工具的服务器</block>
  <block id="e9617e461b2b6597095fc0d3c26666c5" category="list-text">一个 Grafana</block>
  <block id="5d96f98a638cf23ac2f3dfe513198e9a" category="list-text">一个控制中心</block>
  <block id="a2a44121136232f1f2dcfb5e5ce5cf22" category="cell">Linux （ Ubuntu 18.04 ）</block>
  <block id="a0681d05c825936a4afc9d89f305934c" category="cell">所有服务器</block>
  <block id="ad149543d8d2f9f3a04bfdee74c0609f" category="cell">适用于温分段的 NetApp StorageGRID</block>
  <block id="1de0ed71dab76da5868fc3bbe8634c77" category="list-text">4 个存储网格 11.4.0.7</block>
  <block id="4ebcee22d98fbad50cf1c7e108dd9541" category="list-text">1 个 SG1000 （负载平衡器）</block>
  <block id="12de0bce2b8f0d3e65dc1ccdaf1d06ca" category="list-text">4 个 SGD6024</block>
  <block id="83cc5cf13ad44caf6aa94887d189cd3a" category="list-text">4 个 24 x 800 SSD</block>
  <block id="7ccdc7c1d04d9b48b4b016417504685b" category="list-text">S3 协议</block>
  <block id="2e1c9b5ce764f890af0aebf38f1a500a" category="list-text">100GbE</block>
  <block id="5ecafb7b42f662438e20bd643feb79c9" category="cell">15 台 Fujitsu PRIMERGY RX2540 服务器</block>
  <block id="cdb0680ecb0e0ed91d8293e41334b379" category="cell">每个均配备： * 2 个 CPU ，总共 16 个物理核心 * Intel Xeon * 256 GB 物理内存 * 100GbE 双端口</block>
  <block id="c88aa001e26103d0ebe4894b3c9ab9f5" category="paragraph"><block ref="c88aa001e26103d0ebe4894b3c9ab9f5" category="inline-link-macro-rx"></block></block>
  <block id="bc15ae13f16a39532174d0aec78a6432" category="summary">在此设置中，我们将向您展示如何使用 Kafka S3 接收器连接器直接从 Kafka 读取和写入对象存储中的主题。在此测试中，我们使用了独立的 Consfluent 集群，但此设置适用于分布式集群。</block>
  <block id="5b39bea812928c8ea0a9e8b1e3e47f91" category="doc">Kafka S3 连接器</block>
  <block id="9b154eb37aabb62c75c78bd31457468f" category="inline-link-macro">上一篇：性能测试与可扩展性。</block>
  <block id="aa4f22f43748e77c4fb71f8cb5333c25" category="paragraph"><block ref="aa4f22f43748e77c4fb71f8cb5333c25" category="inline-link-macro-rx"></block></block>
  <block id="b5829317a86f448ffca89934abe420d3" category="list-text">从 Confluent 网站下载 Confluent Kafka 。</block>
  <block id="99eec7bbd3416776cb76d9d8f52bfddc" category="list-text">将软件包解压缩到服务器上的文件夹。</block>
  <block id="2d025d1c11796b49f323ce393e802635" category="list-text">导出两个变量。</block>
  <block id="e238a3352503bcd61be91778a307f02e" category="list-text">对于独立的 Confluent Kafka 设置，集群会在 ` /tmp` 中创建一个临时根文件夹。它还会创建 Zookeeper ， Kafka ，模式注册表， connect ， ksql-server ， 和控制中心文件夹，并从 ` $confuent_home` 复制其各自的配置文件。请参见以下示例：</block>
  <block id="fc1644d2d2819b87443b810d963409fa" category="list-text">配置 Zookeeper 。如果使用默认参数，则无需更改任何内容。</block>
  <block id="ad2d4e5ed593359b5d1fe13997541e6f" category="paragraph">在上述配置中，我们更新了 `s服务器。xxx` 属性。默认情况下，您需要三个 zookepers 来选择 Kafka 领导者。</block>
  <block id="b7eb15647b54e1bfd5b79f04012f19ce" category="list-text">我们在 ` /tmp/confuent.406980/zookeeper /data` 中创建了一个 myid 文件，其唯一 ID 为：</block>
  <block id="78f7f3d70d7fc386cde6a61b7d08bc07" category="paragraph">我们使用 myid 文件的最后一个 IP 地址数。我们使用了 Kafka ， connect ， control-center ， Kafka ， Kafka-REST ， ksql-server 和模式注册表配置。</block>
  <block id="5ad6084775d1229b3edcbda0f353315c" category="list-text">启动 Kafka 服务。</block>
  <block id="67228b3b71aba311ab74c0946efe35e8" category="paragraph">每个配置都有一个日志文件夹，可帮助您解决问题。在某些情况下，服务需要较长时间才能启动。确保所有服务均已启动且正在运行。</block>
  <block id="65272a6acb72513d0bfa2bdd8b0c6d1b" category="list-text">使用 `Confluent-hub` 安装 Kafka 连接。</block>
  <block id="4bdaf464a75dbea14d9240c6722a822a" category="paragraph">您也可以使用 `Confluent-hub install conflientint/Kafka-connect-S3 ： 10.0.3` 来安装特定版本。</block>
  <block id="004220cf4b170d47a455040fde149eaf" category="list-text">默认情况下， `confuentine-Kafka-connect-S3` 安装在 ` /data/confuent/confuent-6.2.0/share/confuent-hub-components/confuentine-Kafka-connect-S3` 中。</block>
  <block id="fe4b44765b8ad323e0d6a2e6b7325246" category="list-text">使用新的 `Confluentine-Kafka-connect-S3` 更新插件路径。</block>
  <block id="331885900730ee061e0f6b4f55e62ece" category="list-text">停止并重新启动 Consfluent 服务。</block>
  <block id="7fe69cf1bb033725fdeb56839e70fe4e" category="list-text">在 ` /root/.AWS/credentials` 文件中配置访问 ID 和机密密钥。</block>
  <block id="fac7d16b475df7919931f2de707a4a45" category="list-text">验证存储分段是否可访问。</block>
  <block id="369f5700a42f83495e179b9e947587fb" category="list-text">为 S3 和存储分段配置 S3-sink 属性文件。</block>
  <block id="3d3c898205223806be88ccecb8f0598c" category="list-text">将一些记录导入到 S3 存储分段中。</block>
  <block id="50b781543cad31f75eed99b8efb20e79" category="list-text">加载 S3-sink 连接器。</block>
  <block id="6e773b2ab9703d3433d0ebfb5a45a3a1" category="list-text">检查 S3-sink 状态。</block>
  <block id="b533fadf7b5ac18085d65eb6814528cf" category="list-text">检查日志以确保 S3-sink 已准备好接受主题。</block>
  <block id="613093505fc60a58e7893af8aee3b7b8" category="list-text">查看 Kafka 中的主题。</block>
  <block id="38f7472ee233ba1cc1a7d724a0ca6542" category="list-text">检查 S3 存储分段中的对象。</block>
  <block id="09fa6729fb808be555e2da157c07e47e" category="list-text">要验证内容，请运行以下命令将每个文件从 S3 复制到本地文件系统：</block>
  <block id="e8eeb400cc1af7c80b7561572c879a12" category="inline-link">Apache 归档</block>
  <block id="7d059565bbab6abb5da76e3abcfe6f90" category="list-text">要打印记录，请使用 avro-tools-1.11.0.1.jar （可在中找到<block ref="55ee52f435d2dbbc99b651e203ff837e" category="inline-link-rx"></block>）。</block>
  <block id="f697c2c5a2cfd2db8294b21cb4749beb" category="inline-link-macro">接下来： Confluent Kafka 重新平衡。</block>
  <block id="e2f30edfc0cf00c38eb30189384a6c49" category="paragraph"><block ref="e2f30edfc0cf00c38eb30189384a6c49" category="inline-link-macro-rx"></block></block>
  <block id="9f4b95975f14f6481a322f453e05049c" category="sidebar">适用于 VMware vSphere 的 ONTAP 工具—产品安全</block>
  <block id="7f8513139888dda0c0ecb82a93548af9" category="sidebar">Confluent Kafka 的最佳实践</block>
  <block id="a712a0e553d0302aa27009e1ebc815ce" category="summary">讨论企业混合云解决方案的一系列视频和演示</block>
  <block id="a867425c6a29a742f3dc77c80f5adac8" category="doc">企业混合云视频和演示</block>
  <block id="02ca4b8a1f54adf2c0d931bc5bdb61f3" category="paragraph">观看以下视频和演示，重点介绍所有三家主要云提供商的企业级混合云解决方案的具体功能。</block>
  <block id="9c67207f2bc0ff150c4bca9301456bbd" category="doc">Azure NetApp Files （ ANF ）作为适用于 Azure VMware 解决方案（ AVS ）的原生数据存储库</block>
  <block id="04999f88dfbb06dc4f6a71901a7e9b18" category="paragraph">&lt; 导联 &gt;</block>
  <block id="2a172299398c31c1e2cd726175d3a270" category="paragraph">&lt; 内容 &gt;</block>
  <block id="0c138556fe4f10d4cdba4c61933afd91" category="doc">适用于 Google Cloud Virtualization Engine （ GCVE ）的 NetApp 解决方案</block>
  <block id="dc740fd7aabd59b53cda21fc57a7c10c" category="paragraph">详细了解 NetApp 为 Google Cloud 提供的解决方案—从迁移工作流，扩展 / 扩展到云，备份 / 还原和灾难恢复。</block>
  <block id="1d71c2a7928e8ff703779db43b80044f" category="section-title">适用于 GCVE 的解决方案</block>
  <block id="ba32bd76ecebfdb42efa20b6de24b808" category="paragraph">&lt; 指向 TR&gt; 中的相应部分</block>
  <block id="4177c39712dda5976b0ba657b24af234" category="doc">在 Google Cloud 中部署 Cloud Volumes ONTAP （自行部署）</block>
  <block id="2839d8571363b149cc3fd9db82a7183d" category="paragraph">可以从在 GCVE 私有云环境中创建的 VM 挂载 Cloud Volumes ONTAP 共享和 LUN 。这些卷还可以挂载到 Linux 客户端和 Windows 客户端上，并且在通过 iSCSI 挂载时，可以在 Linux 或 Windows 客户端上以块设备的形式访问 LUN ，因为 Cloud Volumes ONTAP 支持 iSCSI ， SMB 和 NFS 协议。只需几个简单的步骤即可设置 Cloud Volumes ONTAP 卷。</block>
  <block id="3b020916a45973167bc70cb4517bd8c8" category="inline-link-macro">在系统之间设置数据复制</block>
  <block id="83f1904115d07e05de148ff5c69277db" category="paragraph">要将卷从内部环境复制到云以实现灾难恢复或迁移，请使用站点到站点 VPN 或云互连建立与 Google Cloud 的网络连接。将数据从内部复制到 Cloud Volumes ONTAP 不在本文档的讨论范围之内。要在内部系统和 Cloud Volumes ONTAP 系统之间复制数据，请参见 <block ref="17b5522e2d467cfa8e1eed2f77bb1eff" category="inline-link-macro-rx"></block>。</block>
  <block id="9eb931a836eecf8e743b47b449c70bc5" category="inline-link-macro">Cloud Volumes ONTAP 规模估算工具</block>
  <block id="165fc07e6910d8748be18ecaaab5392d" category="admonition">使用 ... <block ref="c41f5eb5365f7790c86bbe0d764bfcac" category="inline-link-macro-rx"></block> 以准确估算 Cloud Volumes ONTAP 实例的大小。此外，还可以监控内部性能，以用作 Cloud Volumes ONTAP 规模估算器中的输入。</block>
  <block id="a1d02afc571062ee1235156b645846f8" category="list-text">登录到 NetApp Cloud Central —此时将显示 Fabric View 屏幕。找到 Cloud Volumes ONTAP 选项卡，然后选择转到 Cloud Manager 。登录后，将显示 " 画布 " 屏幕。</block>
  <block id="52111b7d24cc23248fa9cf8138732943" category="paragraph"><block ref="52111b7d24cc23248fa9cf8138732943" category="inline-image-macro-rx" type="image"></block></block>
  <block id="67b4a468763f61993484edb54b0d5eaa" category="list-text">在 Cloud Manager 的 " 画布 " 选项卡上，单击添加工作环境，然后选择 Google Cloud Platform 作为云以及系统配置的类型。然后，单击下一步。</block>
  <block id="da94c5003e26421e5282adb2dc7794bf" category="paragraph"><block ref="da94c5003e26421e5282adb2dc7794bf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="956a76d4c71f02e39d36ada071ba66ca" category="list-text">提供要创建的环境的详细信息，包括环境名称和管理员凭据。完成后，单击 Continue 。</block>
  <block id="786bd072b9aad97a5bb9b71b8988a176" category="paragraph"><block ref="786bd072b9aad97a5bb9b71b8988a176" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f716cee2acaef077786ecfa7a3f8bfe7" category="list-text">选择或取消选择 Cloud Volumes ONTAP 部署的附加服务，包括数据感知与合规性或备份到云。然后，单击 Continue 。</block>
  <block id="03e0c2afea8f7c3aff4a53d66784f843" category="paragraph">提示：停用附加服务时，将显示验证弹出消息。可以在部署 CVO 后添加 / 删除附加服务，如果不需要，请考虑从一开始就取消选择这些附加服务，以避免成本。</block>
  <block id="d784fbb10e1bdb60322e86126fe6b77a" category="paragraph"><block ref="d784fbb10e1bdb60322e86126fe6b77a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="faa5bffdcdb67efcb08e91a60de40950" category="list-text">选择一个位置，选择一个防火墙策略，然后选中此复选框以确认与 Google Cloud 存储的网络连接。</block>
  <block id="5eb45a43e8f46d401f435ef2b77fc946" category="paragraph"><block ref="5eb45a43e8f46d401f435ef2b77fc946" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f73472fc9b5e80548aa8910eb7b409d7" category="list-text">选择许可证选项：按需购买或自带许可证以使用现有许可证。在此示例中，使用了 freemium 选项。然后，单击 Continue 。</block>
  <block id="ef8c5ea172d5c008d091f693a2a4b4bd" category="paragraph"><block ref="ef8c5ea172d5c008d091f693a2a4b4bd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="43e3f0304199574fcad7150c8cbc80cf" category="list-text">根据要部署在 AWS SDDC 上的 VMware 云上运行的 VM 上的工作负载类型，在多个预配置的软件包之间进行选择。</block>
  <block id="1cd93d1b6baa56bdec898225ef3fea89" category="paragraph">提示：将鼠标悬停在图块上可查看详细信息，或者单击更改配置来自定义 CVO 组件和 ONTAP 版本。</block>
  <block id="7498ab388fb0a7938d43af30f32657b5" category="paragraph"><block ref="7498ab388fb0a7938d43af30f32657b5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="623ce055c6e7272198e998744efd8deb" category="list-text">在审核和批准页面上，查看并确认所做的选择。要创建 Cloud Volumes ONTAP 实例，请单击执行。</block>
  <block id="fcf4e1533222260897c2613078eae18e" category="paragraph"><block ref="fcf4e1533222260897c2613078eae18e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b3b8217eede1f57c19d7d36c1501891b" category="list-text">配置 Cloud Volumes ONTAP 后，它将在 " 画布 " 页面的工作环境中列出。</block>
  <block id="37030c826a75013cff1396c6351d33c0" category="paragraph"><block ref="37030c826a75013cff1396c6351d33c0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="962c53cd54b0b3876e054c2fea4c4ff8" category="section-title">SMB 卷的其他配置</block>
  <block id="9af22b589cfa398b9a704f786d96a90d" category="list-text">准备好工作环境后，请确保为 CIFS 服务器配置了适当的 DNS 和 Active Directory 配置参数。要创建 SMB 卷，必须执行此步骤。</block>
  <block id="8f10b252acc74e058dc00a78e8c33250" category="paragraph">提示：单击菜单图标（ º ），选择高级以显示更多选项，然后选择 CIFS 设置。</block>
  <block id="0cd857f422db3bb835695ca4400e7afb" category="paragraph"><block ref="0cd857f422db3bb835695ca4400e7afb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3c2efcf3ec5fbe68c5a418d6b0d5ed94" category="list-text">创建 SMB 卷的过程非常简单。在 " 画布 " 中，双击 Cloud Volumes ONTAP 工作环境以创建和管理卷，然后单击创建卷选项。选择适当的大小， Cloud Manager 选择包含的聚合或使用高级分配机制将其放置在特定聚合上。在此演示中，选择 CIFS/SMB 作为协议。</block>
  <block id="597899b3d186b1c50739aeb0a82a2094" category="paragraph"><block ref="597899b3d186b1c50739aeb0a82a2094" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4e1a14aa082ec04534624b099e0a4bd9" category="list-text">配置卷后，卷将显示在卷窗格下。由于已配置 CIFS 共享，因此请为用户或组授予对文件和文件夹的权限，并验证这些用户是否可以访问此共享并创建文件。如果从内部环境复制卷，则不需要执行此步骤，因为文件和文件夹权限均会在 SnapMirror 复制过程中保留。</block>
  <block id="4cdd5a747f01838b94117ef6fb699278" category="paragraph">提示：单击卷菜单（ º ）可显示其选项。</block>
  <block id="368cd84bdda136cebde14eea38e8a0f2" category="paragraph"><block ref="368cd84bdda136cebde14eea38e8a0f2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9f7a0ccac4888fc1553dadeee03d7e99" category="list-text">创建卷后，使用 mount 命令显示卷连接说明，然后从 Google Cloud VMware Engine 上的 VM 连接到共享。</block>
  <block id="92890420fd7a7668e3b04db90e8a2ff2" category="paragraph"><block ref="92890420fd7a7668e3b04db90e8a2ff2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e5ee926d870d7b6e5ee68e0001a9db42" category="list-text">复制以下路径并使用映射网络驱动器选项将卷挂载到 Google Cloud VMware 引擎上运行的虚拟机上。</block>
  <block id="809f33612149b405423b98b77a13d18f" category="paragraph"><block ref="809f33612149b405423b98b77a13d18f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0895b43b6a4f7ded9ce501e420da7cae" category="paragraph">映射后，可以轻松访问该文件，并相应地设置 NTFS 权限。</block>
  <block id="2565b7a7d81a362c6b3fc5f32d83075b" category="paragraph"><block ref="2565b7a7d81a362c6b3fc5f32d83075b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="262a1d892164ab4100a969a952274934" category="section-title">将 Cloud Volumes ONTAP 上的 LUN 连接到主机</block>
  <block id="049f63d3d6479b8801f942e53b31cfd6" category="paragraph">要将 Cloud Volumes ONTAP LUN 连接到主机，请完成以下步骤：</block>
  <block id="2fc81fae057994bbe703cb2892b727c9" category="list-text">在 " 画布 " 页面上，双击 Cloud Volumes ONTAP 工作环境以创建和管理卷。</block>
  <block id="3a596dcd3d3dd43ed187aea6bea5842e" category="list-text">单击 "Add Volume" （添加卷） &gt;"New Volume" （新卷），然后选择 "iSCSI" ，然后单击 "Create Initiator Group" （单击 Continue （继续）。</block>
  <block id="b5f2af2dc909b8d634ef7e8dd729c0bc" category="paragraph"><block ref="99dce170472373a603dcc6cab1306eea" category="inline-image-macro-rx" type="image"></block>
<block ref="99eed8d2ce50ff339d9bff41a9fe9a51" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4296bb5afd2416d05f951e9d3380e5e4" category="list-text">配置卷后，选择卷菜单（ º ），然后单击目标 IQN 。要复制 iSCSI 限定名称（ IQN ），请单击复制。设置从主机到 LUN 的 iSCSI 连接。</block>
  <block id="5bbe705670fa05ddb0b508acf301a379" category="paragraph">要对驻留在 Google Cloud VMware Engine 上的主机执行相同操作，请执行以下操作：</block>
  <block id="a730e43d2afac8730f77c3fab06bcdc0" category="list-text">RDP 到 Google Cloud VMware Engine 上托管的 VM 。</block>
  <block id="c4b994ff6c03cf45471392a32ff9809b" category="list-text">打开 iSCSI 启动程序属性对话框：服务器管理器 &gt; 信息板 &gt; 工具 &gt; iSCSI 启动程序。</block>
  <block id="beacd9a0aebca77f6cc20d5cab0fb37c" category="list-text">在发现选项卡中，单击发现门户或添加门户，然后输入 iSCSI 目标端口的 IP 地址。</block>
  <block id="c4ab0fc2a07f004fb45eacc91a07e22c" category="list-text">从目标选项卡中，选择已发现的目标，然后单击登录或连接。</block>
  <block id="4f04cc11e470becd190503a4cea0e217" category="list-text">选择启用多路径，然后选择计算机启动时自动还原此连接或将此连接添加到收藏目标列表。单击高级。</block>
  <block id="ed010f49a5a1ad0895131daffcd73a3c" category="admonition">Windows 主机必须与集群中的每个节点建立 iSCSI 连接。原生 DSM 会选择要使用的最佳路径。</block>
  <block id="88c7456aa49f0bfe0258958c4c42a153" category="paragraph"><block ref="88c7456aa49f0bfe0258958c4c42a153" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3f2340e83f93b283dd5fc7023e4e72a2" category="paragraph">Storage Virtual Machine （ SVM ）上的 LUN 在 Windows 主机中显示为磁盘。主机不会自动发现添加的任何新磁盘。通过完成以下步骤触发手动重新扫描以发现磁盘：</block>
  <block id="d16c566049378cf49448803dfc6ab25d" category="list-text">打开 Windows 计算机管理实用程序：开始 &gt; 管理工具 &gt; 计算机管理。</block>
  <block id="b1babb2780a260f54d7e9f21602773df" category="list-text">在导航树中展开存储节点。</block>
  <block id="678149d88ae91abbb05c5df448a4e8af" category="list-text">单击磁盘管理。</block>
  <block id="35e2e6c4175353900be410088efcc1b9" category="list-text">单击操作 &gt; 重新扫描磁盘。</block>
  <block id="da663e5eac7f594bcac6564a22726142" category="paragraph"><block ref="da663e5eac7f594bcac6564a22726142" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f8a056111a10f9e055d309c54e7ca2bb" category="paragraph">当新 LUN 首次由 Windows 主机访问时，它没有分区或文件系统。初始化 LUN ；也可以通过完成以下步骤使用文件系统格式化 LUN ：</block>
  <block id="8db13bd6122ee1a2b04931073cb808d7" category="list-text">启动 Windows 磁盘管理。</block>
  <block id="18e601e3f0e159e918f7adb9fd89fb99" category="list-text">右键单击 LUN ，然后选择所需的磁盘或分区类型。</block>
  <block id="605158a22ab35f7223fe6f37b0f761b7" category="list-text">按照向导中的说明进行操作。在此示例中，驱动器 F ：已挂载。</block>
  <block id="74edf50412d8a6c920ebdf456ca74d6f" category="paragraph"><block ref="74edf50412d8a6c920ebdf456ca74d6f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a8bce76f68494174fa21e44b39be75e7" category="paragraph">在 Linux 客户端上，确保 iSCSI 守护进程正在运行。配置 LUN 后，请参见有关使用 Ubuntu 进行 iSCSI 配置的详细指南，作为示例。要进行验证，请从 shell 运行 lsblk cmd 。</block>
  <block id="5800551032817b82a3780efc5c365b61" category="paragraph"><block ref="5d8610d622621cfaf5f5af9098efada8" category="inline-image-macro-rx" type="image"></block>
<block ref="0e5aea74b7dab4389459e8f03d7961e8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7b88883556cc41d9ed2a47bd0cfe1bb4" category="section-title">在 Linux 客户端上挂载 Cloud Volumes ONTAP NFS 卷</block>
  <block id="3a676f5d05c6d1f36341948d03289c3f" category="paragraph">要从 Google Cloud VMware 引擎中的 VM 挂载 Cloud Volumes ONTAP （ DIY ）文件系统，请执行以下步骤：</block>
  <block id="99ff74a348250b7148d219f224bc40b4" category="paragraph">按照以下步骤配置卷</block>
  <block id="17d1d28660c0ff68f1ee26c3bc7c2e0d" category="list-text">在 Volumes （卷）选项卡中，单击 Create New Volume （创建新卷）。</block>
  <block id="6fa266ccf8c1f303a7ed67b355770afb" category="list-text">在 "Create New Volume" 页面上，选择卷类型：</block>
  <block id="8d7c2959a73ccf424e912497fa729dfa" category="paragraph"><block ref="8d7c2959a73ccf424e912497fa729dfa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e89e2106ea79d032d48e99a6498e2584" category="list-text">在卷选项卡中，将鼠标光标置于卷上方，选择菜单图标（ º ），然后单击挂载命令。</block>
  <block id="1367b1db6f5a641c16b673b4f75f02de" category="paragraph"><block ref="1367b1db6f5a641c16b673b4f75f02de" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8a4175c7cb7e059193f8bdcafc1395b0" category="list-text">单击复制。</block>
  <block id="e059ff9407d5207f003eae103b4c7a3a" category="list-text">连接到指定的 Linux 实例。</block>
  <block id="b3bcde31f03d76e154f81e6b5221b007" category="list-text">使用安全 Shell （ SSH ）在实例上打开一个终端，并使用相应的凭据登录。</block>
  <block id="42d35ecc4606c7783372ab3953fb10d6" category="list-text">使用以下命令为卷的挂载点创建一个目录。</block>
  <block id="2432c695bbc97e5283e213ba846e86dc" category="paragraph"><block ref="2432c695bbc97e5283e213ba846e86dc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e5cbcad6705273d58a27b5b92fdc1700" category="list-text">将 Cloud Volumes ONTAP NFS 卷挂载到上一步创建的目录。</block>
  <block id="f505f299a6f5e1e9f6b91adec6ef8f38" category="paragraph"><block ref="4aa22d1032194bb618fa2b2a8bbc5d82" category="inline-image-macro-rx" type="image"></block>
<block ref="73581b61100d82e506cc05faa5fc45c3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f43b203ec7020e7ea0e408d9d67255fc" category="doc">使用 Azure VMware 解决方案（ AVS ）配置 Azure NetApp Files</block>
  <block id="f9a184882060f3e5a8b6045e2a53107f" category="paragraph">可以从 Azure VMware 解决方案 SDDC 环境中创建的虚拟机挂载 Azure NetApp Files 共享。由于 Azure NetApp Files 支持 SMB 和 NFS 协议，因此这些卷也可以挂载到 Linux 客户端并映射到 Windows 客户端。只需五个简单步骤即可设置 Azure NetApp Files 卷。</block>
  <block id="5bb6f16c69df9b9f54bddaaa5e32b415" category="paragraph">Azure NetApp Files 和 Azure VMware 解决方案必须位于同一 Azure 区域。</block>
  <block id="8c8b1c25fd4bcb4102a3a834f721ec3e" category="section-title">创建并挂载 Azure NetApp Files 卷</block>
  <block id="763b2af90e10e00124392e31d5792be5" category="paragraph">要创建和挂载 Azure NetApp Files 卷，请完成以下步骤：</block>
  <block id="e56fb44cec3cde26b63f919055458c3a" category="list-text">登录到 Azure 门户并访问 Azure NetApp Files 。使用 _az provider register -namespace Microsoft.NetApp – wait 命令验证对 Azure NetApp Files 服务的访问并注册 Azure NetApp Files 资源提供程序。注册完成后，创建一个 NetApp 帐户。</block>
  <block id="792c2610bbb56b5803bae91a54f34f51" category="inline-link-macro">Azure NetApp Files 共享</block>
  <block id="a7ad1b2194256789e815facefa65206d" category="paragraph">有关详细步骤，请参见 <block ref="8dd8f38a60f74263b1cf35e18285061e" category="inline-link-macro-rx"></block>。此页面将引导您逐步完成此过程。</block>
  <block id="710954ec785b2a7f67c2ef1c3f2f9d19" category="paragraph"><block ref="710954ec785b2a7f67c2ef1c3f2f9d19" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fe57bd1c78e967b463574e3089a42968" category="list-text">创建 NetApp 帐户后，使用所需的服务级别和大小设置容量池。</block>
  <block id="3928a91ce2a9b26c809bec745d6b9daf" category="paragraph">有关详细信息，请参见 <block ref="e7281cc99a6c9a39d5a16325a46f1f7c" category="inline-link-macro-rx"></block>。</block>
  <block id="7ffd44a691267afdf7cc1178ab6115f8" category="paragraph"><block ref="7ffd44a691267afdf7cc1178ab6115f8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="42e9b5ee697da49886fd18e89e6ab1af" category="inline-link-macro">Delegate a subnet to Azure NetApp Files</block>
  <block id="ee13d45546639cd210b35ce3665b6885" category="list-text">为 Azure NetApp Files 配置委派子网，并在创建卷时指定此子网。有关创建委派子网的详细步骤，请参见 <block ref="ad52de6b143679c946d36f9e4248f40c" category="inline-link-macro-rx"></block>。</block>
  <block id="70a08a2f18d96817bf63302571e62634" category="paragraph"><block ref="70a08a2f18d96817bf63302571e62634" category="inline-image-macro-rx" type="image"></block></block>
  <block id="96501b128e8ffab4b107cd6ffa7da649" category="list-text">使用容量池刀片下的卷刀片添加 SMB 卷。确保在创建 SMB 卷之前已配置 Active Directory 连接器。</block>
  <block id="f676bcdffa60a69ff49ba9ffdbb2b912" category="paragraph"><block ref="f676bcdffa60a69ff49ba9ffdbb2b912" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d9095b4995e678294045e2a1501d1db3" category="list-text">单击查看 + 创建以创建 SMB 卷。</block>
  <block id="e48925dc65abf32faa19c5d430cf6d6d" category="paragraph">如果应用程序是 SQL Server ，则启用 SMB 持续可用性。</block>
  <block id="be1613efbff068fd23ee511fe4e6dc51" category="paragraph"><block ref="be1613efbff068fd23ee511fe4e6dc51" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b2b999c81e324f553ec9720c334325ee" category="paragraph"><block ref="b2b999c81e324f553ec9720c334325ee" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fe5eed95829ff2b525461ee72a9f3f23" category="inline-link-macro">Azure NetApp Files 的性能注意事项</block>
  <block id="2c5ce17dd48f2551465b828065fd8300" category="paragraph">要了解有关按大小或配额显示的 Azure NetApp Files 卷性能的详细信息，请参见 <block ref="ffec162f488d413e68dfe18d328e177e" category="inline-link-macro-rx"></block>。</block>
  <block id="bef7cec065f33ededdd1b50d74800b72" category="list-text">建立连接后，可以挂载此卷并将其用于应用程序数据。</block>
  <block id="8b3c17098d0d024937d60849b3bd8edb" category="paragraph">要完成此操作，请从 Azure 门户中单击卷刀片，然后选择要挂载的卷并访问挂载说明。复制路径并使用映射网络驱动器选项将卷挂载到 Azure VMware 解决方案 SDDC 上运行的虚拟机上。</block>
  <block id="413fcfe1d831f95cd95f8f3bb9030eec" category="paragraph"><block ref="413fcfe1d831f95cd95f8f3bb9030eec" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e50c675280580c3249f58f2f3eefdb86" category="paragraph"><block ref="e50c675280580c3249f58f2f3eefdb86" category="inline-image-macro-rx" type="image"></block></block>
  <block id="13c8bc9575bbdc3a8a30021320abbd69" category="list-text">要在 Azure VMware 解决方案 SDDC 上运行的 Linux VM 上挂载 NFS 卷，请使用相同的过程。使用卷重新调整或动态服务级别功能来满足工作负载需求。</block>
  <block id="ff817c6ff423e680ddf0a8398efdfb5a" category="paragraph"><block ref="ff817c6ff423e680ddf0a8398efdfb5a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="da94ac228f6efdf07fe7e43b1441faf2" category="paragraph">有关详细信息，请参见 <block ref="ea07f7f3cbdf3d62072fbe16546616d3" category="inline-link-macro-rx"></block>。</block>
  <block id="29f8b77f5f7c79b566706e0d55c9de8b" category="doc">适用于 Amazon VMware Managed Cloud （ VMC ）的 NetApp 解决方案</block>
  <block id="c24b87c4afee5d42310b2dd6144617af" category="paragraph">详细了解 NetApp 为 AWS 提供的解决方案—从迁移工作流，扩展 / 突发到云，备份 / 还原和灾难恢复。</block>
  <block id="57d1a15bf1a27012659efba783f60f8a" category="section-title">适用于 VMC 的解决方案</block>
  <block id="7e0686a26bc7a91429819c2aeb7b414a" category="doc">适用于 Azure VMware 解决方案的 NetApp 解决方案（ AVS ）</block>
  <block id="7e868c580794349e459e166e04a5abcd" category="paragraph">详细了解 NetApp 为 Azure 提供的解决方案—从迁移工作流，扩展 / 突发到云，备份 / 还原和灾难恢复。</block>
  <block id="93d6c31a1f56cb2d2f25af1274c4abdd" category="section-title">适用于 AVS 的解决方案</block>
  <block id="4859596b2360db2dac4c6a687efe10d2" category="doc">在 AWS 中部署新的 Cloud Volumes ONTAP 实例（自行操作）</block>
  <block id="ddf355809a57f794eb4f9cff41a1ad86" category="paragraph">可以从 AWS SDDC 环境中的 VMware 云中创建的 VM 挂载 Cloud Volumes ONTAP 共享和 LUN 。这些卷还可以挂载在原生 AWS VM Linux Windows 客户端上，并且在通过 iSCSI 挂载时，可以在 Linux 或 Windows 客户端上以块设备的形式访问 LUN ，因为 Cloud Volumes ONTAP 支持 iSCSI ， SMB 和 NFS 协议。只需几个简单的步骤即可设置 Cloud Volumes ONTAP 卷。</block>
  <block id="091112e3dbffea1fef77b4b6bbcec4d3" category="paragraph">要将卷从内部环境复制到云以实现灾难恢复或迁移，请使用站点到站点 VPN 或 DirectConnect 与 AWS 建立网络连接。将数据从内部复制到 Cloud Volumes ONTAP 不在本文档的讨论范围之内。要在内部系统和 Cloud Volumes ONTAP 系统之间复制数据，请参见 <block ref="79828109910805ccc09752d766afaae3" category="inline-link-macro-rx"></block>。</block>
  <block id="c4fab68ae07564acd6ecd9b911dfff79" category="admonition">使用 <block ref="c41f5eb5365f7790c86bbe0d764bfcac" category="inline-link-macro-rx"></block> 以准确估算 Cloud Volumes ONTAP 实例的大小。此外，还可以监控内部性能，以用作 Cloud Volumes ONTAP 规模估算器中的输入。</block>
  <block id="44ca838e7d04a1071dc78602ef005cb3" category="list-text">登录到 NetApp Cloud Central ；此时将显示 Fabric View 屏幕。找到 Cloud Volumes ONTAP 选项卡，然后选择转到 Cloud Manager 。登录后，将显示 " 画布 " 屏幕。</block>
  <block id="6b0e3e8cb8d190a2310f526f49f7908f" category="paragraph"><block ref="6b0e3e8cb8d190a2310f526f49f7908f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="613b8a42b8ee051cdae0288a52604a55" category="list-text">在 Cloud Manager 主页上，单击添加工作环境，然后选择 AWS 作为云以及系统配置的类型。</block>
  <block id="1ce9ef4a253b6301539d9cab4fca67b6" category="paragraph"><block ref="1ce9ef4a253b6301539d9cab4fca67b6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d1552a04c8237c4a2d938cca2db53683" category="list-text">提供要创建的环境的详细信息，包括环境名称和管理员凭据。单击 Continue （继续）。</block>
  <block id="525c0dbff313821edbeaa46a9b5d88dd" category="paragraph"><block ref="525c0dbff313821edbeaa46a9b5d88dd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7fdbae44a4deac52e923aa6480a3f1f2" category="list-text">为 Cloud Volumes ONTAP 部署选择附加服务，包括云数据感知，云备份和 Cloud Insights 。单击 Continue （继续）。</block>
  <block id="7191330ca38db1397356e7619c4baf63" category="paragraph"><block ref="7191330ca38db1397356e7619c4baf63" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5908a77615c1d6294f872ff6f0e9ec5c" category="list-text">在 HA 部署模式页面上，选择多个可用性区域配置。</block>
  <block id="e2dff93e99a18f3bbf601965a86556d3" category="paragraph"><block ref="e2dff93e99a18f3bbf601965a86556d3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5eee77262911549d8a2fd262ee2a983d" category="list-text">在区域和 VPC 页面上，输入网络信息，然后单击继续。</block>
  <block id="94a6592c275cad51dc739b4ab70338db" category="paragraph"><block ref="94a6592c275cad51dc739b4ab70338db" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b6f20610782706f69940c617f7154ffe" category="list-text">在“ Connectivity and SSH Authentication ”（连接和 SSH 身份验证）页上、为 HA 对和调解器选择连接方法。</block>
  <block id="d121b588f00dfd906d6291024c708f8d" category="paragraph"><block ref="d121b588f00dfd906d6291024c708f8d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1a012735965bc67df3b6e4c64b7b894f" category="list-text">指定浮动 IP 地址，然后单击继续。</block>
  <block id="bc0e2f9513cce33557343a1867d4bdfb" category="paragraph"><block ref="bc0e2f9513cce33557343a1867d4bdfb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4b2221e159f51173ae2b52e02587cc42" category="list-text">选择适当的路由表以包含指向浮动 IP 地址的路由，然后单击继续。</block>
  <block id="5486a792746fe5fbf546c327f6be2773" category="paragraph"><block ref="5486a792746fe5fbf546c327f6be2773" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e18f42f3f9ea4d4f2e8df33f334d9939" category="list-text">在数据加密页面上，选择 AWS 管理的加密。</block>
  <block id="143c5081e907e69e16f1df952eafae3e" category="paragraph"><block ref="143c5081e907e69e16f1df952eafae3e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2a25e3ac90ce2b5cc921531efdc5963e" category="list-text">选择许可证选项：按需购买或自带许可证以使用现有许可证。在此示例中，将使用按需购买选项。</block>
  <block id="e3750564d3942e5c1d3cec322e411d5e" category="paragraph"><block ref="e3750564d3942e5c1d3cec322e411d5e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="df531dd5efab87543ed07d56595eca08" category="list-text">根据要在 AWS SDDC 上的 VMware 云上运行的 VM 上部署的工作负载类型，在多个预配置的软件包之间进行选择。</block>
  <block id="30e80bd4d8d23ac64059627389a8b348" category="paragraph"><block ref="30e80bd4d8d23ac64059627389a8b348" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ce4ab7c38fc244e8d1e30dd47a1c578d" category="paragraph"><block ref="ce4ab7c38fc244e8d1e30dd47a1c578d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bc498db1b5b048e74d02bcfa90076dfe" category="paragraph"><block ref="bc498db1b5b048e74d02bcfa90076dfe" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8427c8fe11e3a00ca10a2cf45a96dd90" category="paragraph"><block ref="8427c8fe11e3a00ca10a2cf45a96dd90" category="inline-image-macro-rx" type="image"></block></block>
  <block id="31574a22471145d2a1ea069062aa95ec" category="list-text">选择要创建卷的 CVO 实例，然后单击创建卷选项。选择适当的大小， Cloud Manager 选择包含的聚合或使用高级分配机制将其放置在特定聚合上。在此演示中，选择 SMB 作为协议。</block>
  <block id="d657856abbf9bb39436a3f6f849251ea" category="paragraph"><block ref="d657856abbf9bb39436a3f6f849251ea" category="inline-image-macro-rx" type="image"></block></block>
  <block id="976543d01a4b5d38482c487005aadc68" category="list-text">配置卷后，此卷将显示在卷窗格下。由于已配置 CIFS 共享，因此您应向用户或组授予对文件和文件夹的权限，并验证这些用户是否可以访问此共享并创建文件。</block>
  <block id="eac2d4365044c30420d99e4450f5b3da" category="paragraph"><block ref="eac2d4365044c30420d99e4450f5b3da" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7ea4081e5d5395a0dd61744757f9abb9" category="list-text">创建卷后，使用 mount 命令从 AWS SDDC 主机中 VMware Cloud 上运行的虚拟机连接到共享。</block>
  <block id="7786302dcdbb8e27839c1d68acb8c3ba" category="list-text">复制以下路径并使用映射网络驱动器选项将卷挂载到 AWS SDDC 中 VMware Cloud 上运行的虚拟机上。</block>
  <block id="fff9636198d4c8106d5edeb1a72f789c" category="paragraph"><block ref="97606ae260ebd0d0acdf4aac70a2a0b5" category="inline-image-macro-rx" type="image"></block>
<block ref="b4382417b1dd50929cfd78b7e90bc2aa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="27c47ada1e7cb796a499ede048474b99" category="section-title">将 LUN 连接到主机</block>
  <block id="70ac69b194f074f8b2ce79ee769a0c96" category="paragraph">要将 Cloud Volumes ONTAP LUN 连接到主机，请完成以下步骤：</block>
  <block id="4a8c2e183609aa00cfce8401be26e193" category="list-text">在 Cloud Manager 的 " 画布 " 页面上，双击 Cloud Volumes ONTAP 工作环境以创建和管理卷。</block>
  <block id="298c5ecf2fc7c7ab04d3ff27df17c420" category="list-text">单击添加卷 &gt; 新建卷，选择 iSCSI ，然后单击创建启动程序组。单击 Continue （继续）。</block>
  <block id="a3f6544e066d08b352bdd873e84efd9f" category="paragraph"><block ref="d08d8d37d464a0090209067a27ccf9bf" category="inline-image-macro-rx" type="image"></block>
<block ref="dd9a8ac9d2dee64126f68f4ab9b10f3f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6297ccc26d99397b36875f005bb1b800" category="list-text">配置卷后，选择卷，然后单击目标 IQN 。要复制 iSCSI 限定名称（ IQN ），请单击复制。设置从主机到 LUN 的 iSCSI 连接。</block>
  <block id="c5a9ec38aba893e2a0d701ba2f45a50e" category="paragraph">要对位于 AWS SDDC 上的 VMware Cloud 上的主机执行相同操作，请完成以下步骤：</block>
  <block id="2cbe60394fdca23a31c3a05a49aba035" category="list-text">RDP 到 AWS 上 VMware 云上托管的 VM 。</block>
  <block id="213e827694caf7236290f845284dcc05" category="list-text">从目标选项卡中，选择已发现的目标，然后单击登录或连接。</block>
  <block id="04d63507299c2b866ddad09b32b37fb3" category="list-text">选择启用多路径，然后选择计算机启动时自动还原此连接或将此连接添加到收藏目标列表。单击高级。</block>
  <block id="15c42f0d55e1a75b7606d8cd1d0f0840" category="paragraph">+<block ref="f87da6f2c46cbdbedc31faf67374f8f6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c11f54f9bd2797dc115ca9e98fb0116d" category="paragraph">SVM 中的 LUN 在 Windows 主机中显示为磁盘。主机不会自动发现添加的任何新磁盘。通过完成以下步骤触发手动重新扫描以发现磁盘：</block>
  <block id="733dc90ee8ecde5a3fe64fd837d0eec1" category="paragraph"><block ref="733dc90ee8ecde5a3fe64fd837d0eec1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5b173d8aceed1850c1882fee5f7479d4" category="paragraph"><block ref="5b173d8aceed1850c1882fee5f7479d4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1085f8441673a34397360c417066d18f" category="paragraph">在 Linux 客户端上，确保 iSCSI 守护进程正在运行。配置 LUN 后，请参阅有关适用于 Linux 分发版的 iSCSI 配置的详细指导。例如，可以找到 Ubuntu iSCSI 配置 <block ref="6e395450a47e52243c1b6632fa351858" category="inline-link-macro-rx"></block>。要进行验证，请从 shell 运行 lsblk cmd 。</block>
  <block id="af16b968e0e3b3975cdcefb5cdd9858a" category="paragraph">要从 AWS SDDC 上 VMC 内的 VM 挂载 Cloud Volumes ONTAP （ DIY ）文件系统，请完成以下步骤：</block>
  <block id="9e770ba792bd4db694940294a77cccee" category="list-text">将适用于 NetApp ONTAP NFS 的 Amazon FSX 卷挂载到上一步创建的目录中。</block>
  <block id="2b9f5ac2397a7a0e82ca568de7f62512" category="paragraph"><block ref="c1b4b180fa34b46779c12a4e278fa487" category="inline-image-macro-rx" type="image"></block>
<block ref="cf487bf9f5a361811181e443893feb53" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6120544c737d67dd31f47d101fe21a84" category="doc">在云提供商中配置虚拟化环境</block>
  <block id="f4f7adb7cbe18f2cdd82be75a52b0417" category="paragraph">此处详细介绍了如何在每个受支持的超大规模主机中配置虚拟化环境。</block>
  <block id="5032d5a1ed8a62f591efaaf45204907f" category="paragraph">通过从以下选项中选择，跳至所需超大规模器的部分：</block>
  <block id="00bdc2e43f70d995636d66a898fe5e40" category="inline-link-macro">配置 Amazon VMware 解决方案（ AVS ）</block>
  <block id="0753e0a92e5826dd007d8fd27f5b31c9" category="list-text"><block ref="0753e0a92e5826dd007d8fd27f5b31c9" category="inline-link-macro-rx"></block></block>
  <block id="c44ad7e3733396d542197ea02e4dd5b7" category="inline-link-macro">配置 Azure VMware 托管云（ VMC ）</block>
  <block id="91ef3d1a8fa3d61d3abb32b5f583d779" category="list-text"><block ref="91ef3d1a8fa3d61d3abb32b5f583d779" category="inline-link-macro-rx"></block></block>
  <block id="5f80992ee008938a45a68b0f0ae94709" category="inline-link-macro">配置 Google Cloud 虚拟化引擎（ GCVE ）</block>
  <block id="a98da75fcd0e1711d652d1e209647651" category="list-text"><block ref="a98da75fcd0e1711d652d1e209647651" category="inline-link-macro-rx"></block></block>
  <block id="e647d88b9bd859d2c3e943c24b4fef00" category="paragraph">与内部部署一样，在 AWS 上规划 VMware Cloud 对于成功打造可随时投入生产的环境以创建 VM 和迁移至关重要。</block>
  <block id="162e9e1fd4657b8d9588a5ae8c8e6e66" category="paragraph">本节介绍如何在 AWS SDDC 上设置和管理 VMware Cloud ，并将其与连接 NetApp 存储的可用选项结合使用。</block>
  <block id="e6719013bc5803c0da0d4bf78fc8c4a0" category="admonition">只支持使用来宾存储将 FSX ONTAP 和 Cloud Volumes ONTAP 连接到 AWS VMC 。</block>
  <block id="d6d7fade0a5d1cd7723c64125e595b08" category="paragraph">设置过程可细分为以下步骤：</block>
  <block id="389544cc8199f2ddd936397695d0dbe9" category="inline-link-macro">部署和配置适用于 AWS 的 VMware Cloud</block>
  <block id="7e08dd37e42d4fff97cd141309f1d6f1" category="list-text"><block ref="7e08dd37e42d4fff97cd141309f1d6f1" category="inline-link-macro-rx"></block></block>
  <block id="b4f284d3b5bb40ee91901933b8f7ef5f" category="inline-link-macro">将 VMware Cloud 连接到 FSX ONTAP</block>
  <block id="017adc3176078f8c6a6350b582f50bdf" category="list-text"><block ref="017adc3176078f8c6a6350b582f50bdf" category="inline-link-macro-rx"></block></block>
  <block id="ecca8457dc89d3871b14ae2daed22502" category="section-title">为 Azure 配置 VMC</block>
  <block id="00ce356ad004b72efc4b99389b52af63" category="paragraph">与内部部署一样，规划 Azure VMware 解决方案对于成功创建 VM 和迁移生产就绪环境至关重要。</block>
  <block id="491aa8f554f95207a4b7d47f89777e13" category="paragraph">本节介绍如何设置和管理 Azure VMware 解决方案并将其与连接 NetApp 存储的可用选项结合使用。</block>
  <block id="cc887bc72eb6e7422bfa13437f902e54" category="admonition">将 Azure NetApp Files 和 Cloud Volumes ONTAP 连接到 Azure VMware 解决方案的唯一受支持方法是子系统内存储。</block>
  <block id="3d24cd3e433bf1992e011c9f92c3fab6" category="inline-link-macro">注册资源提供商并创建私有云</block>
  <block id="0d0635baf1a76ff32baa16073ed3453c" category="list-text"><block ref="0d0635baf1a76ff32baa16073ed3453c" category="inline-link-macro-rx"></block></block>
  <block id="a1123889b6465e93a2209c2a0ca667ef" category="inline-link-macro">连接到新的或现有的 ExpressRoute 虚拟网络网关</block>
  <block id="009108f1065d837487a807d25d6dea77" category="list-text"><block ref="009108f1065d837487a807d25d6dea77" category="inline-link-macro-rx"></block></block>
  <block id="ae1764c7cb70aed2d4548c424d7bf34a" category="inline-link-macro">验证网络连接并访问私有云</block>
  <block id="37b475b3aed88d652e04b800f9bc7821" category="list-text"><block ref="37b475b3aed88d652e04b800f9bc7821" category="inline-link-macro-rx"></block></block>
  <block id="c8ecd368a187a4d847c04af93c7ca292" category="section-title">配置适用于 Google Cloud Platform 的 GCVE</block>
  <block id="9883d049f97d69a9f2326d61585d8fbe" category="paragraph">与内部部署一样，规划 Google Cloud VMware Engine （ GCVE ）对于成功创建虚拟机和迁移可随时投入生产的环境至关重要。</block>
  <block id="6ad49d2b544134f2192d1612a572bdd6" category="paragraph">本节介绍如何设置和管理 GCVE ，并将其与连接 NetApp 存储的可用选项结合使用。</block>
  <block id="a74a86037d1564ce62843a1252f6ad37" category="admonition">来宾存储是将 Cloud Volumes ONTAP 和云卷服务连接到 GCVE 的唯一受支持方法。</block>
  <block id="11a31c6d83a723b3ea9c348c22e86238" category="inline-link-macro">部署和配置 GCVE</block>
  <block id="4ee9a7b1036870176d7c54376f097bd4" category="list-text"><block ref="4ee9a7b1036870176d7c54376f097bd4" category="inline-link-macro-rx"></block></block>
  <block id="3e5cc29621d2619be0d7b1569da6909c" category="inline-link-macro">启用对 GCVE 的私有访问</block>
  <block id="1287895b507261050c3ee7b6b59b85c6" category="list-text"><block ref="1287895b507261050c3ee7b6b59b85c6" category="inline-link-macro-rx"></block></block>
  <block id="4dab2f9796b0af6304d00e21e2b9dfb4" category="inline-link-macro">基于 AWS 的 VMware Cloud</block>
  <block id="02b412692a538ee9dc2534f0f9c73dc1" category="paragraph"><block ref="560d5b2cd40977bd7b77b31d7088f657" category="inline-link-macro-rx"></block> 为 AWS 生态系统中基于 VMware 的工作负载提供 Cloud 原生体验。每个 VMware 软件定义的数据中心（ SDDC ）均在 Amazon Virtual Private Cloud （ VPC ）中运行，并提供完整的 VMware 堆栈（包括 vCenter Server ）， NSX-T 软件定义的网络连接， vSAN 软件定义的存储以及一个或多个 ESXi 主机，这些主机可为您的工作负载提供计算和存储资源。</block>
  <block id="dc77b78f59a0c38a9a2e8927dc05e916" category="paragraph">本节介绍如何在 AWS 上设置和管理 VMware Cloud ，并将其与适用于 NetApp ONTAP 的 Amazon FSX 和 / 或在 AWS 上使用子系统内存储的 Cloud Volumes ONTAP 结合使用。</block>
  <block id="1687622e662f209ef64e3a88de409466" category="admonition">在将 Amazon FSX for NetApp ONTAP 和 Cloud Volumes ONTAP 连接到 AWS 上的 VMware Cloud 时，只支持使用来宾存储。</block>
  <block id="3712f34e1b7039d6d9bfb255ecc54445" category="paragraph">设置过程可分为三部分：</block>
  <block id="f54d8dbbc1cb20fd37a59a4563644ef8" category="inline-link-macro">Amazon Web Services 帐户</block>
  <block id="4ca1486cd3276884e41ad4b36080c10b" category="list-text">注册 <block ref="ab3390028f6599a1b73b747febbf672d" category="inline-link-macro-rx"></block>。</block>
  <block id="020e995219c3fad42714462fc9368253" category="inline-link-macro">我的 VMware</block>
  <block id="4f87cd22b54abb602d4264ede77c75fd" category="list-text">注册 <block ref="6fb1d438d7363efa930c55af527a6c23" category="inline-link-macro-rx"></block> 帐户。</block>
  <block id="969c176eb8515e73c2df6805bd09d5de" category="list-text">在 VMware Cloud 中配置 SDDC 。</block>
  <block id="28cefea59e6b78bfecc1439107469038" category="section-title">注册 AWS 帐户</block>
  <block id="252c0d3625c410f643362d13f1e35681" category="paragraph">您需要一个 AWS 帐户才能开始使用，前提是尚未创建一个 AWS 帐户。无论新的还是现有的，您都需要在帐户中拥有管理权限才能执行此操作步骤中的许多步骤。请参见此内容 <block ref="d01b332d778720bc2fe2a9a15e6ba01d" category="inline-link-macro-rx"></block> 有关 AWS 凭据的详细信息。</block>
  <block id="ed463b922006aa54f2aceda63f25caed" category="section-title">注册 My VMware 帐户</block>
  <block id="e1ed167660991d514f55d806a323f3b5" category="paragraph">要访问 VMware 的云产品组合（包括基于 AWS 的 VMware Cloud ），您需要 VMware 客户帐户或 My VMware 帐户。如果尚未创建 VMware 帐户，请创建此帐户 <block ref="aefb6f511cceca70505b3e5bf76155fe" category="inline-link-macro-rx"></block>。</block>
  <block id="60fa505f14fb504e941cbc61b74d644a" category="section-title">在 VMware Cloud 中配置 SDDC</block>
  <block id="6d931b72d8efc3fd87b7fdd5127cbba7" category="paragraph">配置 VMware 帐户并执行适当的规模估算后，部署软件定义的数据中心显然是使用 VMware Cloud on AWS 服务的下一步。要创建 SDDC ，请选择要托管它的 AWS 区域，为 SDDC 指定一个名称，并指定希望 SDDC 包含的 ESXi 主机数。如果您还没有 AWS 帐户，则仍可以创建一个包含单个 ESXi 主机的入门级配置 SDDC 。</block>
  <block id="7e70ad389301fa9d8936c18cefd85b53" category="list-text">使用现有或新创建的 VMware 凭据登录到 VMware Cloud Console 。</block>
  <block id="28570a642842f2bfa7db5cc3679fd904" category="paragraph"><block ref="28570a642842f2bfa7db5cc3679fd904" category="inline-image-macro-rx" type="image"></block></block>
  <block id="53722f60844c899c63607413f74e8dd8" category="list-text">配置 AWS 区域，部署和主机类型以及 SDDC 名称：</block>
  <block id="5ec07ba481e6291d3af5e3ca61f27f57" category="paragraph"><block ref="5ec07ba481e6291d3af5e3ca61f27f57" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c5c464b97b208b8c43e9fdd315c80793" category="list-text">连接到所需的 AWS 帐户并执行 AWS Cloud Formation 堆栈。</block>
  <block id="b6822d593b3a1b683cb4e513b210c080" category="paragraph"><block ref="941b74b5e4d054f44fb05f89bfb30732" category="inline-image-macro-rx" type="image"></block>
<block ref="5ca301c5ba248bc9f9566d74470fcc6b" category="inline-image-macro-rx" type="image"></block>
<block ref="54108005ae53e37fa06b081374d6ea43" category="inline-image-macro-rx" type="image"></block>
<block ref="9f7f4a317cf9d46aa6a2aa8f441279ba" category="inline-image-macro-rx" type="image"></block></block>
  <block id="59e9afc055ce73e7e6154ea7609eec59" category="admonition">此验证使用单主机配置。</block>
  <block id="3f68cef60baccc27cfef6b618e56f809" category="list-text">选择所需的 AWS VPC 以连接 VMC 环境。</block>
  <block id="49e131b27a342d4970e86a31a127d41c" category="paragraph"><block ref="49e131b27a342d4970e86a31a127d41c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="102a37b9412553c4ae6b25a174592fbb" category="list-text">配置 VMC 管理子网；此子网包含 vCenter ， NSX 等 VMC 管理的服务。请勿选择与任何其他需要连接到 SDDC 环境的网络重叠的地址空间。最后，请遵循下面标注的 CIDR 大小建议。</block>
  <block id="0e8db488f9554136a65dd18025db8cf0" category="paragraph"><block ref="0e8db488f9554136a65dd18025db8cf0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a541610269aad8edaf8defd851246b08" category="list-text">查看并确认 SDDC 配置，然后单击 Deploy the SDDC 。</block>
  <block id="a8246981b8dc3e6123523500b3b1371d" category="paragraph"><block ref="a8246981b8dc3e6123523500b3b1371d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1bb7bef7f28887197cfca7059ef2d6d3" category="paragraph">完成部署过程通常需要大约两个小时。</block>
  <block id="e9dcc1b6680c77f105c83d040009d685" category="paragraph"><block ref="e9dcc1b6680c77f105c83d040009d685" category="inline-image-macro-rx" type="image"></block></block>
  <block id="79b6ae1d041f5cd8b33d3f351b301275" category="list-text">完成后， SDDC 即可使用。</block>
  <block id="9013490d3a116eed1c849197a6c8aac0" category="paragraph"><block ref="9013490d3a116eed1c849197a6c8aac0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e149dd16e33c6137fe08782e96c9b226" category="inline-link-macro">从 VMC 控制台部署 SDDC</block>
  <block id="086760513a416fbc6578703211523314" category="paragraph">有关 SDDC 部署的分步指南，请参见 <block ref="7279ebe13e8b8c4ee89b8961f2bf1157" category="inline-link-macro-rx"></block>。</block>
  <block id="1d583a1a8ff1ca8ae3360c7e33ecd984" category="doc">在 Azure 中部署新 Cloud Volumes ONTAP</block>
  <block id="ed1019c297fadb83e87437230788320c" category="paragraph">可以从 Azure VMware 解决方案 SDDC 环境中创建的 VM 挂载 Cloud Volumes ONTAP 共享和 LUN 。这些卷也可以挂载到 Linux 客户端和 Windows 客户端上，因为 Cloud Volumes ONTAP 支持 iSCSI ， SMB 和 NFS 协议。只需几个简单的步骤即可设置 Cloud Volumes ONTAP 卷。</block>
  <block id="e9cac40069a313b824541cda06c18a06" category="paragraph">要将卷从内部环境复制到云以实现灾难恢复或迁移，请使用站点到站点 VPN 或 ExpressRoute 与 Azure 建立网络连接。将数据从内部复制到 Cloud Volumes ONTAP 不在本文档的讨论范围之内。要在内部系统和 Cloud Volumes ONTAP 系统之间复制数据，请参见 <block ref="79828109910805ccc09752d766afaae3" category="inline-link-macro-rx"></block>。</block>
  <block id="1563f27024f7b2b0a96be687f878206d" category="paragraph"><block ref="1563f27024f7b2b0a96be687f878206d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5f067fbf4a3196796318f7e878eaa2a3" category="list-text">在 Cloud Manager 主页上，单击添加工作环境，然后选择 Microsoft Azure 作为云以及系统配置的类型。</block>
  <block id="e59c8066b7736d6ede98e2b57d619b60" category="paragraph"><block ref="e59c8066b7736d6ede98e2b57d619b60" category="inline-image-macro-rx" type="image"></block></block>
  <block id="21568dd1e2a5acafeee9d119cd012876" category="list-text">在创建第一个 Cloud Volumes ONTAP 工作环境时， Cloud Manager 会提示您部署连接器。</block>
  <block id="4c3665ca095a8a103c69fac1ac46fb59" category="paragraph"><block ref="4c3665ca095a8a103c69fac1ac46fb59" category="inline-image-macro-rx" type="image"></block></block>
  <block id="54ae357a0d5e74ebab86e52641490fc0" category="list-text">创建连接器后，更新详细信息和凭据字段。</block>
  <block id="9b971596a6ee599483fd04c84d2ce18d" category="paragraph"><block ref="9b971596a6ee599483fd04c84d2ce18d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cf5341803b0061ef190495343f39fa02" category="list-text">提供要创建的环境的详细信息，包括环境名称和管理员凭据。为 Azure 环境添加资源组标记作为可选参数。完成后，单击 Continue 。</block>
  <block id="350a5c2219e5e14fd23dda8372344842" category="paragraph"><block ref="350a5c2219e5e14fd23dda8372344842" category="inline-image-macro-rx" type="image"></block></block>
  <block id="360a69a0b184770c2409949f2c7e1140" category="list-text">为 Cloud Volumes ONTAP 部署选择附加服务，包括云数据感知，云备份和 Cloud Insights 。选择服务，然后单击继续。</block>
  <block id="11728d9ffc9e6944adf4891d5543e154" category="paragraph"><block ref="11728d9ffc9e6944adf4891d5543e154" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ee060e03da823e605453fbfa27743d77" category="list-text">配置 Azure 位置和连接。选择要使用的 Azure 区域，资源组， vNet 和子网。</block>
  <block id="4549d76a3daf0d322686b6d4f6fb1490" category="paragraph"><block ref="4549d76a3daf0d322686b6d4f6fb1490" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d1c88093dde70f0165ade30b74c908ad" category="list-text">选择许可证选项：按需购买或自带许可证以使用现有许可证。在此示例中，使用按需购买选项。</block>
  <block id="10085b1c84507f0da366d741a248d728" category="paragraph"><block ref="10085b1c84507f0da366d741a248d728" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b2c782d387cdd1de07d0119c2794edc8" category="list-text">在可用于各种工作负载类型的多个预配置软件包之间进行选择。</block>
  <block id="942b902e3715b75e8e6257349bbe93ff" category="paragraph"><block ref="942b902e3715b75e8e6257349bbe93ff" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4c7055bfbaac9b0236d0bedccfb616d0" category="list-text">接受有关激活 Azure 资源支持和分配的两个协议。要创建 Cloud Volumes ONTAP 实例，请单击 " 转到 " 。</block>
  <block id="c19dadb8117ac0d88e543accbb1c1096" category="paragraph"><block ref="c19dadb8117ac0d88e543accbb1c1096" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b6bb322a7578acfb8670b3ce8bc96fc9" category="paragraph"><block ref="b6bb322a7578acfb8670b3ce8bc96fc9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="02cbbc24385dbe83fb42a1bd0c5668da" category="paragraph"><block ref="02cbbc24385dbe83fb42a1bd0c5668da" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d923f79d8112841c7df8503e86f0af4a" category="list-text">创建 SMB 卷的过程非常简单。选择要创建卷的 CVO 实例，然后单击创建卷选项。选择适当的大小， Cloud Manager 选择包含的聚合或使用高级分配机制将其放置在特定聚合上。在此演示中，选择 SMB 作为协议。</block>
  <block id="a74d409c32c4bc504768c6a7607fc409" category="paragraph"><block ref="a74d409c32c4bc504768c6a7607fc409" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8923d310a6b50c677ed6f68410181b46" category="paragraph"><block ref="8923d310a6b50c677ed6f68410181b46" category="inline-image-macro-rx" type="image"></block></block>
  <block id="776a8d832701253eb40b056e68086fcd" category="list-text">创建卷后，使用 mount 命令从 Azure VMware 解决方案 SDDC 主机上运行的虚拟机连接到共享。</block>
  <block id="70307f46aa9c37929516c971f3445caa" category="list-text">复制以下路径并使用映射网络驱动器选项将卷挂载到 Azure VMware 解决方案 SDDC 上运行的虚拟机上。</block>
  <block id="3c58ffcc5a8ac9d8c78ea0f2d5e3ecb0" category="paragraph"><block ref="3c58ffcc5a8ac9d8c78ea0f2d5e3ecb0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1d1f50043685559ea05d7c21ae5a6d8a" category="paragraph"><block ref="1d1f50043685559ea05d7c21ae5a6d8a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2e7b38e3108ed39835e616f3a8eef4d9" category="paragraph">要将 LUN 连接到主机，请完成以下步骤：</block>
  <block id="06fcf6729491b5106094916e154fb565" category="paragraph"><block ref="06fcf6729491b5106094916e154fb565" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7af0094f03c81886be499600b8563647" category="paragraph">要对 Azure VMware 解决方案 SDDC 上的主机执行相同操作，请执行以下操作：</block>
  <block id="640e587a72f6b61dc8d20a6de477db96" category="list-text">RDP 到 Azure VMware 解决方案 SDDC 上托管的虚拟机。</block>
  <block id="2d5b864b177738fa7a03f083ae03d2a3" category="paragraph">* 注： * Windows 主机必须与集群中的每个节点建立 iSCSI 连接。原生 DSM 会选择要使用的最佳路径。</block>
  <block id="829bd9f13853ee7a86f5805c316df650" category="paragraph"><block ref="829bd9f13853ee7a86f5805c316df650" category="inline-image-macro-rx" type="image"></block></block>
  <block id="d378c726809748df2090ec116c7232b4" category="paragraph"><block ref="d378c726809748df2090ec116c7232b4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6b3a58a7b9961d5d214b65da735d2f89" category="list-text">按照向导中的说明进行操作。在此示例中，驱动器 E ：已挂载</block>
  <block id="586f9ee0f7d5544a894ea05b9df312d7" category="paragraph"><block ref="586f9ee0f7d5544a894ea05b9df312d7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6ff716a75c3423262418c90aad971f10" category="paragraph"><block ref="6ff716a75c3423262418c90aad971f10" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6e3fe132749fe21d23cf75f00317a6fe" category="doc">在 AWS 上为适用于 NetApp ONTAP 的 Amazon FSX 配置 VMware Cloud</block>
  <block id="5f19d821dc2e2e3a8e9418909df59733" category="paragraph">Amazon FSX for NetApp ONTAP 文件共享和 LUN 可以从 AWS 上的 VMware Cloud 的 VMware SDDC 环境中创建的 VM 挂载。此外，还可以使用 NFS 或 SMB 协议在 Linux 客户端上挂载这些卷并将其映射到 Windows 客户端上，通过 iSCSI 挂载 LUN 时，可以在 Linux 或 Windows 客户端上以块设备的形式访问这些 LUN 。可通过以下步骤快速设置适用于 NetApp ONTAP 文件系统的 Amazon FSX 。</block>
  <block id="190b27040d3191ccf35bdb35221f0682" category="admonition">适用于 NetApp ONTAP 的 Amazon FSx 和基于 AWS 的 VMware Cloud 必须位于同一可用性区域中，才能提高性能并避免在可用性区域之间传输数据。</block>
  <block id="f8caa19e45e4a42ea7bc10cad5d49ae8" category="section-title">创建并挂载适用于 ONTAP 卷的 Amazon FSX</block>
  <block id="e765d7d83fde51af5391c87cc45dccf2" category="paragraph">要创建和挂载适用于 NetApp ONTAP 的 Amazon FSX 文件系统，请完成以下步骤：</block>
  <block id="43935f267f64b4ca1a3f1803272df64b" category="inline-link-macro">Amazon FSX 控制台</block>
  <block id="4d33567207f0232b86c9bec4b4f38d45" category="list-text">打开 <block ref="1f394ea51c20c394ab649ff06aeff5a6" category="inline-link-macro-rx"></block> 并选择创建文件系统以启动文件系统创建向导。</block>
  <block id="df08dda7dc18ddb7de0e9ad5001a9f04" category="list-text">在选择文件系统类型页面上，选择适用于 NetApp ONTAP 的 Amazon FSx ，然后选择下一步。此时将显示创建文件系统页面。</block>
  <block id="c40ea60211b89b2179fe7a947527ff66" category="paragraph"><block ref="c40ea60211b89b2179fe7a947527ff66" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f29804f0e866cb47ba2fa233a71a54fd" category="list-text">在网络部分中，对于虚拟私有云（ Virtual Private Cloud ， VPC ），选择适当的 VPC 和首选子网以及路由表。在这种情况下，将从下拉列表中选择 vmcfsx2.vPC 。</block>
  <block id="628892e49fa967795d4d8d3269c5bb31" category="paragraph"><block ref="628892e49fa967795d4d8d3269c5bb31" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cf9c04e1d81f05e344db236ac47ea588" category="list-text">对于创建方法，请选择标准创建。您也可以选择 " 快速创建 " ，但本文档使用 " 标准创建 " 选项。</block>
  <block id="e3c13c0fe612a941f86617c0ad730fca" category="paragraph"><block ref="e3c13c0fe612a941f86617c0ad730fca" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e47c53bc440aebf2328e497b46953118" category="paragraph"><block ref="e47c53bc440aebf2328e497b46953118" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6ed02b1594feb57e5c5c1ca0678086dd" category="list-text">在安全性和加密部分中，对于加密密钥，选择用于保护文件系统空闲数据的 AWS 密钥管理服务（ AWS KMS ）加密密钥。对于文件系统管理密码，输入 fsxadmin 用户的安全密码。</block>
  <block id="450514d9ec3a47df8e580605e80579b7" category="paragraph"><block ref="450514d9ec3a47df8e580605e80579b7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b969656105cc9174e398fa5754382d5b" category="list-text">在虚拟机中，并指定与 vsadmin 结合使用的密码，以便使用 REST API 或 CLI 管理 ONTAP 。如果未指定密码，则可以使用 fsxadmin 用户来管理 SVM 。在 Active Directory 部分中，确保将 Active Directory 加入 SVM 以配置 SMB 共享。在默认 Storage Virtual Machine 配置部分中，在此验证中提供存储的名称， SMB 共享使用自管理的 Active Directory 域进行配置。</block>
  <block id="0b0a8d3b6da586b1c3d7ace81f086743" category="paragraph"><block ref="0b0a8d3b6da586b1c3d7ace81f086743" category="inline-image-macro-rx" type="image"></block></block>
  <block id="89a8b582feabb26f60740f7b0a57aaef" category="list-text">在默认卷配置部分中，指定卷名称和大小。这是一个 NFS 卷。对于存储效率，请选择启用以启用 ONTAP 存储效率功能（数据压缩，重复数据删除和数据缩减），或者选择禁用以禁用这些功能。</block>
  <block id="2cfdc5814e94a8d05a802a6b639158b7" category="paragraph"><block ref="2cfdc5814e94a8d05a802a6b639158b7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="59ed30f46b9afae4f90b77ac3ed74f8e" category="list-text">查看创建文件系统页面上显示的文件系统配置。</block>
  <block id="08ef5aaea85c8112d5d0e368443ee4fe" category="list-text">单击创建文件系统。</block>
  <block id="d385818e8551a5f93e9591daf3cf7c22" category="paragraph"><block ref="aae4a315cf943820b378b71447a7994a" category="inline-image-macro-rx" type="image"></block>
<block ref="e34db9249abae41534adba1bed16b8d1" category="inline-image-macro-rx" type="image"></block>
<block ref="f1c6728d54b85d98dd49bf5dc91e4f97" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0f5cc47067a5c4b536ab91f1a843de82" category="inline-link-macro">适用于 NetApp ONTAP 的 Amazon FSX 入门</block>
  <block id="e37ec80b6a23f377fd957d8c83c7a7b5" category="paragraph">有关更多详细信息，请参见 <block ref="01eec31289b39ab7b89a00515912c371" category="inline-link-macro-rx"></block>。</block>
  <block id="af62c8c40f4b51eaee5cfbcfdb7bffaa" category="paragraph">按上述方式创建文件系统后，使用所需的大小和协议创建卷。</block>
  <block id="5eb9e90ab2c5435bcefd918c8c8a7304" category="list-text">打开 <block ref="1f394ea51c20c394ab649ff06aeff5a6" category="inline-link-macro-rx"></block>。</block>
  <block id="4cdc643691b84580850903954cdca1d1" category="list-text">在左侧导航窗格中，选择文件系统，然后选择要为其创建卷的 ONTAP 文件系统。</block>
  <block id="05c0eed2abbd9c20871b6af0eb7b1e38" category="list-text">选择卷选项卡。</block>
  <block id="511e546bcb3da3ea3db700200e857ebf" category="list-text">选择创建卷选项卡。</block>
  <block id="328a4173ff8b40f0204a78c6a579b01e" category="list-text">此时将显示创建卷对话框。</block>
  <block id="b1734fefd5bf5fc9e481a277d683ca10" category="paragraph">出于演示目的，本节创建了一个 NFS 卷，可以轻松地挂载在 AWS 上的 VMware 云上运行的 VM 上。nfsdemovol01 创建如下：</block>
  <block id="d32e1c6ca1d9fe2fb3ccb4d26dbc8a71" category="paragraph"><block ref="d32e1c6ca1d9fe2fb3ccb4d26dbc8a71" category="inline-image-macro-rx" type="image"></block></block>
  <block id="72e172d843c1baf9acb881337f0bb2cc" category="section-title">在 Linux 客户端上挂载 FSX ONTAP 卷</block>
  <block id="682dccf32ec3d6c1e1ca2548a43c4245" category="paragraph">挂载上一步中创建的 FSX ONTAP 卷。在 AWS SDDC 上 VMC 中的 Linux VM 中，完成以下步骤：</block>
  <block id="a8dc83c93fa2350d1419b44103864f2c" category="list-text">使用安全 Shell （ SSH ）在实例上打开一个终端，并使用相应的凭据登录。</block>
  <block id="454d9d1fe6ad680e393543d5e7b11669" category="list-text">使用以下命令为卷的挂载点创建一个目录：</block>
  <block id="6631f82f4a955cf7fe5644adadf79e47" category="paragraph"><block ref="6631f82f4a955cf7fe5644adadf79e47" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2774f9046ee4873805e1f044fa12fe85" category="list-text">执行后，运行 df 命令以验证挂载。</block>
  <block id="d06051412d6da4495ca1a69429ea4fdf" category="paragraph"><block ref="d06051412d6da4495ca1a69429ea4fdf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0927b028b8b35cb7421cd2d29ebac0ab" category="section-title">将 FSX ONTAP 卷连接到 Microsoft Windows 客户端</block>
  <block id="49a305dd021166bf8a508fb51b3fce24" category="paragraph">要管理和映射 Amazon FSX 文件系统上的文件共享，必须使用共享文件夹图形用户界面。</block>
  <block id="0f51d6ad9d95d24bf6d5b0e18d947382" category="list-text">打开 " 开始 " 菜单，然后使用以管理员身份运行来运行 fsmgmt.msc 。这样将打开共享文件夹 GUI 工具。</block>
  <block id="0186f9c0fa21b0c8ab82fadf036afe8f" category="list-text">单击操作 &gt; 所有任务，然后选择连接到另一台计算机。</block>
  <block id="f5cf362d19da392bad46d1cb4bbea453" category="list-text">对于另一台计算机，输入 Storage Virtual Machine （ SVM ）的 DNS 名称。例如，在此示例中使用了 FSXSMBTESTING01.FSXTESTING.local 。</block>
  <block id="882da317003fa80717e3939e41c5aa32" category="admonition">TP 可在 Amazon FSX 控制台上找到 SVM 的 DNS 名称，选择 Storage Virtual Machine ，选择 SVM ，然后向下滚动到端点以查找 SMB DNS 名称。单击确定。Amazon FSX 文件系统将显示在共享文件夹列表中。</block>
  <block id="24cfe5fb05f6bd3b267a7e2d46a1cc44" category="paragraph"><block ref="24cfe5fb05f6bd3b267a7e2d46a1cc44" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bd517d0d40877562e2dae460910a5260" category="list-text">在共享文件夹工具中，选择左窗格中的共享以查看 Amazon FSX 文件系统的活动共享。</block>
  <block id="e4fb530e581118e4aa66166f33242547" category="paragraph"><block ref="e4fb530e581118e4aa66166f33242547" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b994a2e22edf9cb0de792e6a494da514" category="list-text">现在，选择一个新共享并完成创建共享文件夹向导。</block>
  <block id="9630a309cdca9ed17b688fe15c03a200" category="paragraph"><block ref="f821d910b54d4df166bfb6c9a0fbeac1" category="inline-image-macro-rx" type="image"></block>
<block ref="1456921fb33e6c835f2ea077607c478a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ed3796b20dc1d1a4f1756d0cb0f45489" category="inline-link-macro">创建 SMB 共享</block>
  <block id="dc77f3b6074a456c2be3f16b862db081" category="paragraph">要了解有关在 Amazon FSX 文件系统上创建和管理 SMB 共享的详细信息，请参见 <block ref="a85495f11ff3e696252abf798d30d57d" category="inline-link-macro-rx"></block>。</block>
  <block id="470140537c670eb8edb32bf6e8b2bad5" category="list-text">建立连接后，可以连接 SMB 共享并将其用于应用程序数据。为此，请复制共享路径并使用映射网络驱动器选项将卷挂载到 AWS SDDC 上在 VMware Cloud 上运行的虚拟机上。</block>
  <block id="0542af5401c04588abf9b665f31829b6" category="paragraph"><block ref="0542af5401c04588abf9b665f31829b6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b6c5856c2845517bb6408529fb90b57e" category="section-title">使用 iSCSI 将适用于 NetApp ONTAP LUN 的 FSX 连接到主机</block>
  <block id="716fd43b3bc7735b075d056d4ac18dc4" category="paragraph">FSX 的 iSCSI 流量通过上一节提供的路由遍历 VMware Transit Connect/AWS Transit Gateway 。要在适用于 NetApp ONTAP 的 Amazon FSX 中配置 LUN ，请按照找到的文档进行操作 <block ref="70da71f7286decf7407c5db884b5344a" category="inline-link-macro-rx"></block>。</block>
  <block id="32139f76f200f13f9078d49f80c95815" category="paragraph">在 Linux 客户端上，确保 iSCSI 守护进程正在运行。配置 LUN 后，请参见有关使用 Ubuntu 配置 iSCSI 的详细指南（示例） <block ref="6e395450a47e52243c1b6632fa351858" category="inline-link-macro-rx"></block>。</block>
  <block id="102b54837bec429c2bc9f3f9fee8a857" category="paragraph">本文介绍了如何将 iSCSI LUN 连接到 Windows 主机：</block>
  <block id="29980d065df6792c6cf2015646e8744d" category="section-title">在适用于 NetApp ONTAP 的 FSX 中配置 LUN ：</block>
  <block id="6da38655de350d44c878e17adb0fd12c" category="list-text">使用 ONTAP 文件系统的 FSX 管理端口访问 NetApp ONTAP 命令行界面。</block>
  <block id="6f8dec9d607d68b3712504d90548dc7f" category="list-text">按照规模估算输出所示，使用所需大小创建 LUN 。</block>
  <block id="c31d63ac510efc7c433e07d70ef0a11a" category="paragraph">在此示例中，我们创建了一个大小为 5G （ 5368709120 ）的 LUN 。</block>
  <block id="e3de6fee1eaf0d0777dc125d42255a4b" category="list-text">创建必要的 igroup 以控制哪些主机可以访问特定 LUN 。</block>
  <block id="8c92602adf53776d90c46162f150dd3c" category="paragraph">此时将显示两个条目。</block>
  <block id="e71def0bc16c2989d418764ced77c368" category="list-text">使用以下命令将 LUN 映射到 igroup ：</block>
  <block id="fd29357379ec9a1916e7512ba9cba2d5" category="list-text">将新配置的 LUN 连接到 Windows VM ：</block>
  <block id="15bea41b01d7287439a04eb0c57a5ef5" category="paragraph">要将新 LUN 连接到 AWS SDDC 上 VMware 云上的 Windows 主机，请完成以下步骤：</block>
  <block id="eabaddae6242a6352bd11a6bdf29b55a" category="list-text">RDP 到 AWS SDDC 上 VMware Cloud 上托管的 Windows VM 。</block>
  <block id="debd85c1c5da22a2c5e207ae0ad4b91a" category="list-text">导航到服务器管理器 &gt; 信息板 &gt; 工具 &gt; iSCSI 启动程序以打开 iSCSI 启动程序属性对话框。</block>
  <block id="43237019bec64292757878b08a9d1a63" category="list-text">选择启用多路径，然后选择 " 计算机启动时自动还原此连接 " 或 " 将此连接添加到收藏目标列表 " 。单击高级。</block>
  <block id="6aa775ce454f9bfcd13c7e20b90531e7" category="paragraph"><block ref="6aa775ce454f9bfcd13c7e20b90531e7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1dc2a4ed37392086accdd3db98b75509" category="paragraph">Storage Virtual Machine （ SVM ）上的 LUN 在 Windows 主机中显示为磁盘。主机不会自动发现添加的任何新磁盘。通过完成以下步骤触发手动重新扫描以发现磁盘：</block>
  <block id="3ba2e4c8502f30b8e6d44fc88ebe784a" category="paragraph"><block ref="3ba2e4c8502f30b8e6d44fc88ebe784a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="405bdc4379d9776fbda741356a79c543" category="paragraph">当新 LUN 首次由 Windows 主机访问时，它没有分区或文件系统。通过完成以下步骤初始化 LUN ，并可选择使用文件系统格式化 LUN ：</block>
  <block id="848c01bbaad78639e22ba05626884091" category="paragraph"><block ref="848c01bbaad78639e22ba05626884091" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5b2a691ebf81d334bb42112bb635d34d" category="doc">企业混合云（ EHC ）支持的配置</block>
  <block id="5e1c36a2c24e0aaf7844ec890c15e430" category="paragraph">了解主要超大规模提供商中的 NetApp 存储支持组合。</block>
  <block id="aa1f7516e656fcf88a02be4feaa432c5" category="cell">* Azure AVS*</block>
  <block id="9acf96fea18557ec8c6d660d6503f3bf" category="cell">* AWS VMC*</block>
  <block id="66fbf46ae142d95c688698893879b8af" category="cell">* GCP GCVE*</block>
  <block id="990372eb325efff403b4117c31a055a8" category="cell">* Cloud Volumes ONTAP （ CVO ） *</block>
  <block id="b7c8d0420d929de49959aae6ce8ba3e4" category="inline-link-macro">已连接子系统</block>
  <block id="ef84bb53f72dabe63f0ffba5ee68e3ae" category="cell"><block ref="ef84bb53f72dabe63f0ffba5ee68e3ae" category="inline-link-macro-rx"></block></block>
  <block id="8f8009479ada2712aaa696d5f91949bb" category="cell"><block ref="8f8009479ada2712aaa696d5f91949bb" category="inline-link-macro-rx"></block></block>
  <block id="6715c88d8574236a01729cc480266878" category="cell"><block ref="6715c88d8574236a01729cc480266878" category="inline-link-macro-rx"></block></block>
  <block id="33cc6e358d22c6f19d9b7924dc3cdc6d" category="cell">* Cloud Volumes Service （ CVS ） *</block>
  <block id="336d5ebc5436534e61d16e63ddfca327" category="cell">-</block>
  <block id="53ece9afd987905da70066422fba9879" category="inline-link-macro">原生数据存储库^1.</block>
  <block id="7195d0f248bee06abf9adb49b7495ae8" category="cell"><block ref="0e8cb67d65b4c316682e9a25139df40a" category="inline-link-macro-rx"></block>
<block ref="457b0b4c4f040ecdb73aa5b03853579f" category="inline-link-macro-rx"></block></block>
  <block id="df635045d1bc577d1f8f5b4da11409be" category="cell">* Azure NetApp Files （ ANF ） *</block>
  <block id="41ecb3ed3a37fceddb00cdc5bc4743ff" category="cell"><block ref="b9ae3854385cdf8d11f980fa397772ac" category="inline-link-macro-rx"></block>
<block ref="0f2c04766507e4de89a1d44cbd408339" category="inline-link-macro-rx"></block></block>
  <block id="23b14f1282da64a4a69cef795c672d69" category="cell">* FSX ONTAP *</block>
  <block id="393eef558c962fa31236c6505d5656f7" category="cell"><block ref="f4b5456d39df814a310fbaf9fdb8eb40" category="inline-link-macro-rx"></block>
<block ref="ef1833f411035de243ce008622899fb9" category="inline-link-macro-rx"></block></block>
  <block id="c567300e15e9f9b873771e56c72c938b" category="admonition">1 —当前处于私有预览模式</block>
  <block id="6a3b9d31df0a58cc23207c2af925ef0f" category="paragraph">要使用 Azure VMware 解决方案，请先在标识的订阅中注册资源提供程序：</block>
  <block id="58c59ab4d5d488609913efa7b1daaa31" category="list-text">登录到 Azure 门户。</block>
  <block id="5d704d400396fefbe3427ee665a0ec16" category="list-text">在 Azure 门户菜单上，选择所有服务。</block>
  <block id="eff35df9bedc80337261af1399e526a2" category="list-text">在所有服务对话框中，输入订阅，然后选择订阅。</block>
  <block id="41825376d695df481d13f37e3e1587db" category="list-text">要查看此订阅，请从订阅列表中选择此订阅。</block>
  <block id="4d3e5a69b8f8c0bec64cf18db73fff95" category="list-text">选择资源提供程序，然后在搜索中输入 microsoft.AVS 。</block>
  <block id="2bf384915bc11a9360bdf9792dc43bf3" category="list-text">如果资源提供程序未注册，请选择注册。</block>
  <block id="0b4b8a7bf2e1e647f3be6dde423b9b79" category="paragraph"><block ref="0b4b8a7bf2e1e647f3be6dde423b9b79" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bdb08f4992bb541aec19da4c688d0239" category="paragraph"><block ref="bdb08f4992bb541aec19da4c688d0239" category="inline-image-macro-rx" type="image"></block></block>
  <block id="382da60e8008eed186472cc1a3c3ca37" category="list-text">注册资源提供程序后，使用 Azure 门户创建 Azure VMware 解决方案私有云。</block>
  <block id="397065cbdc87787d17122a18f5c5088d" category="list-text">选择创建新资源。</block>
  <block id="39d2b5824a6dce05a74b5a60d5769656" category="list-text">在 Search the Marketplace 文本框中，输入 Azure VMware 解决方案并从结果中选择它。</block>
  <block id="d090262ac8690f612cbc8bd5fc83b11c" category="list-text">在 Azure VMware 解决方案页面上，选择创建。</block>
  <block id="4a62c7a4f3f3f4a3927621c33c12bb63" category="list-text">在基础选项卡的字段中输入值，然后选择查看 + 创建。</block>
  <block id="2a01d572b1447155c310cabafac3fae9" category="paragraph">注释：</block>
  <block id="7c1ec568c35f8a03d9cfd64b465a4e4f" category="list-text">要快速入门，请在规划阶段收集所需信息。</block>
  <block id="d61ffacba4094067e86b90bcf3739fcf" category="list-text">选择现有资源组或为私有云创建新资源组。资源组是部署和管理 Azure 资源的逻辑容器。</block>
  <block id="81d6141ddb9ac3b3888dce83fbf00cf6" category="list-text">确保 CIDR 地址是唯一的，不会与其他 Azure 虚拟网络或内部网络重叠。CIDR 表示私有云管理网络，并用于 vCenter Server 和 NSX-T Manager 等集群管理服务。NetApp 建议使用 22 地址空间。在此示例中，使用了 10.21.0.0/22 。</block>
  <block id="266811324b3ca32d24624ba571c07de8" category="paragraph"><block ref="266811324b3ca32d24624ba571c07de8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bd710e77504d5568fd5079361107a7eb" category="paragraph">配置过程大约需要 4 – 5 小时。此过程完成后，通过从 Azure 门户访问私有云来验证部署是否成功。部署完成后，系统将显示状态 " 成功 " 。</block>
  <block id="411f20742da0d4f8cdc568d7aee8fab3" category="paragraph">Azure VMware 解决方案私有云需要 Azure 虚拟网络。由于 Azure VMware 解决方案不支持内部 vCenter ，因此需要执行其他步骤才能与现有内部环境集成。此外，还需要设置 ExpressRoute 电路和虚拟网络网关。在等待集群配置完成时，创建新的虚拟网络或使用现有虚拟网络连接到 Azure VMware 解决方案。</block>
  <block id="aa86eba8b2b706f81a805eb35b834541" category="paragraph"><block ref="aa86eba8b2b706f81a805eb35b834541" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a7714bc43e9a27f2c98a38e6b6d7f3d8" category="doc">适用于公有云提供商的 NetApp 存储选项</block>
  <block id="8db50e5729f7a5d770aaceef947a2982" category="paragraph">了解 NetApp 在三大超大规模提供商中作为存储的各种选项。</block>
  <block id="30024089a3aab34e33b3a9766ff8c662" category="section-title">适用于 AWS 的 NetApp 存储选项</block>
  <block id="60ce80493de8468bdfd597af1c219a9f" category="paragraph">AWS 支持以下配置中的 NetApp 存储：</block>
  <block id="703133f070dbe0ec953855a2291e151a" category="paragraph">* 来宾连接存储 *</block>
  <block id="94f644afad50386ab13d527e1056ce71" category="paragraph">* 原生数据存储库 *</block>
  <block id="83c87929208a5770dfb09e33514193f4" category="inline-link-macro">FSX ONTAP 作为原生数据存储库^1.</block>
  <block id="ad476c4cac730935959743eb28c5ca66" category="list-text"><block ref="ad476c4cac730935959743eb28c5ca66" category="inline-link-macro-rx"></block></block>
  <block id="a1010f9f8442cf9caff454cd5d3914ec" category="section-title">适用于 Azure 的 NetApp 存储选项</block>
  <block id="5f18b04dd7d7089a2177c4c930d8d57f" category="paragraph">Azure 支持以下配置中的 NetApp 存储：</block>
  <block id="98ba63f921be22bb183a43d868521ce1" category="inline-link-macro">Azure NetApp Files （ ANF ）作为原生数据存储库^1.</block>
  <block id="c054a58e4fcd496e4fa5c1b0c16dfa69" category="list-text"><block ref="c054a58e4fcd496e4fa5c1b0c16dfa69" category="inline-link-macro-rx"></block></block>
  <block id="74eb4c6138d4b8cd8399b01966c5af28" category="section-title">适用于 GCP 的 NetApp 存储选项</block>
  <block id="8f08ff97ca555f50f0d05fdf950a0568" category="paragraph">Google Cloud 支持以下配置中的 NetApp 存储：</block>
  <block id="1234d67e696757e4666b0611f60b80d8" category="inline-link-macro">Cloud Volumes Service （ CVS ）作为原生数据存储库^1.</block>
  <block id="a508a86f372584a11bee8d3d41e3afca" category="list-text"><block ref="a508a86f372584a11bee8d3d41e3afca" category="inline-link-macro-rx"></block></block>
  <block id="5c2d9a62bb25b00981f59e22e27bfd17" category="doc">验证连接到 Azure VMware 解决方案私有云的网络和访问权限</block>
  <block id="40228f700f5965975e4aff8c6c2ff4b3" category="paragraph">Azure VMware 解决方案不允许您使用内部 VMware vCenter 管理私有云。而是需要跳转主机才能连接到 Azure VMware 解决方案 vCenter 实例。在指定资源组中创建一个跳转主机，然后登录到 Azure VMware 解决方案 vCenter 。此跳转主机应是为连接而创建的同一虚拟网络上的 Windows VM ，并应提供对 vCenter 和 NSX Manager 的访问权限。</block>
  <block id="d88c36b93ae5dcb2646d56c57f27bf0e" category="paragraph"><block ref="d88c36b93ae5dcb2646d56c57f27bf0e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="44f5524c6ac4144dbabf7a4d365b837b" category="paragraph">配置虚拟机后，使用 Connect 选项访问 RDP 。</block>
  <block id="443f53614721177f7c44df93d426a919" category="paragraph"><block ref="443f53614721177f7c44df93d426a919" category="inline-image-macro-rx" type="image"></block></block>
  <block id="36cb4e54805ffde727ffbc809183608e" category="paragraph">使用云管理员用户从此新创建的跳转主机虚拟机登录到 vCenter 。要访问凭据，请转到 Azure 门户并导航到身份（位于私有云中的 Manage 选项下）。可以从此处复制私有云 vCenter 和 NSX-T Manager 的 URL 和用户凭据。</block>
  <block id="9620acd59a8e7ad0f318754391c40c4e" category="paragraph"><block ref="9620acd59a8e7ad0f318754391c40c4e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="73d88630b730fa00c46338a0aef4c2d3" category="paragraph">在 Windows 虚拟机中，打开浏览器并导航到 vCenter Web 客户端 URL <block ref="2db127a24dc88638a76677b404bda5a4" category="inline-link-rx"></block> 并使用管理员用户名 * cloudadmin@vsphere.local* 并粘贴复制的密码。同样，也可以使用 Web 客户端 URL 访问 NSX-T 管理器 <block ref="bb142e18a679100de3817fcefaa25b07" category="inline-link-rx"></block> 并使用管理员用户名并粘贴复制的密码以创建新分段或修改现有分层网关。</block>
  <block id="4a6e0ba5b4d42fb0f658bdfdbbea32fc" category="admonition">对于配置的每个 SDDC ， Web 客户端 URL 都不同。</block>
  <block id="49848931415b32db238a2dd1daddf3a7" category="paragraph"><block ref="49848931415b32db238a2dd1daddf3a7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="87f65f698ac6bac1ada03193e1cdabb8" category="paragraph"><block ref="87f65f698ac6bac1ada03193e1cdabb8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ec3eeb836273dbc92b27ce718a90b212" category="inline-link-macro">将内部环境与 Azure VMware 解决方案建立对等关系</block>
  <block id="097529edf2feb9ed1237427eaa3b2599" category="paragraph">现在， Azure VMware 解决方案 SDDC 已部署和配置。利用 ExpressRoute Global Reach 将内部环境连接到 Azure VMware 解决方案私有云。有关详细信息，请参见 <block ref="29749340a5d7bf5df1867a3f2d2723a1" category="inline-link-macro-rx"></block>。</block>
  <block id="ab19fbdc46e9671d69b4f25d80aa0c9b" category="doc">FSX ONTAP 作为适用于 Amazon VMware 托管云（ VMC ）的原生数据存储库</block>
  <block id="ae6569fd64694b91a054cbdfdfef84d2" category="paragraph">要创建新的 Azure 虚拟网络（ vNet ），请选择 Azure vNet Connect 选项卡。或者，您也可以使用创建虚拟网络向导从 Azure 门户手动创建一个：</block>
  <block id="34b04201ae997eaabb6802b04d5c1708" category="list-text">转到 Azure VMware 解决方案私有云，然后在管理选项下访问连接。</block>
  <block id="da40ae630b63a930be4e1230efc306e1" category="list-text">选择 Azure vNet Connect 。</block>
  <block id="40292c219898a1253befc6301234575a" category="list-text">要创建新的 vNet ，请选择 Create New 选项。</block>
  <block id="f98e10d9ba9ac83ac2adeacde774d051" category="paragraph">通过此功能，可以将 vNet 连接到 Azure VMware 解决方案私有云。vNet 可通过自动创建所需组件（例如跳转盒， Azure NetApp Files 等共享服务和 Cloud Volume ONTAP ）并通过 ExpressRoute 在 Azure VMware 解决方案中创建的私有云来实现此虚拟网络中的工作负载之间的通信。</block>
  <block id="0314a97a9eb0aae73531717ef45ad195" category="paragraph">* 注意： * vNet 地址空间不应与私有云 CIDR 重叠。</block>
  <block id="5f6ec3e9d299a1b94aaeb9b0e13b1071" category="paragraph"><block ref="5f6ec3e9d299a1b94aaeb9b0e13b1071" category="inline-image-macro-rx" type="image"></block></block>
  <block id="206843027dd7ebe90f425f9ee4765a01" category="list-text">提供或更新新 vNet 的信息，然后选择确定。</block>
  <block id="26c6d54522f3fd79684f463116e9634b" category="paragraph"><block ref="26c6d54522f3fd79684f463116e9634b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="027524e66bad6099279342bf8d8f6dd4" category="paragraph">将在指定的订阅和资源组中创建具有提供的地址范围和网关子网的 vNet 。</block>
  <block id="5ecf2fb7501138eaa14be97a59d2a773" category="inline-link-macro">在 Azure 中为 VMware 私有云配置网络连接</block>
  <block id="5da6ff60860f48de7bb7f4467c28f26f" category="admonition">如果您手动创建 vNet ，请创建一个虚拟网络网关，并将相应的 SKU 和 ExpressRoute 作为网关类型。部署完成后，使用授权密钥将 ExpressRoute 连接到包含 Azure VMware 解决方案私有云的虚拟网络网关。有关详细信息，请参见 <block ref="4807c1aea8c93bde3104bd4ecfa22a07" category="inline-link-macro-rx"></block>。</block>
  <block id="d77d7a022616e70a9987aa0974241779" category="paragraph">配置私有云后，配置对私有云的私有访问，以实现高吞吐量和低延迟的数据路径连接。</block>
  <block id="256431e41a96deb49bcd86b1ca56393e" category="inline-link-macro">GCP 文档</block>
  <block id="e4cf8d7f33a9dafc85be0439cd8fbc4d" category="paragraph">这将确保运行 Cloud Volumes ONTAP 实例的 VPC 网络能够与 GCVE 私有云进行通信。要执行此操作，请按照 <block ref="9cd64b8fb1b43e7f674c1b78b2a86f74" category="inline-link-macro-rx"></block>。对于云卷服务，通过在租户主机项目之间执行一次性对等操作，在 VMware 引擎和 Cloud Volumes Service 之间建立连接。有关详细步骤，请按照此步骤进行操作 <block ref="04a9f04edfdd7b0a53da57f015378c5a" category="inline-link-macro-rx"></block>。</block>
  <block id="e6945148d9a888e52db99c5ebce86868" category="paragraph"><block ref="e6945148d9a888e52db99c5ebce86868" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5c3eb3a1c6330fe124fc0706cbdd91df" category="paragraph">使用 CloudOwner@gve.local 用户登录到 vCenter 。要访问凭据，请转到 VMware 引擎门户，转到资源并选择相应的私有云。在基本信息部分中，单击 vCenter 登录信息（ vCenter Server ， HCX Manager ）或 NSX-T 登录信息（ NSX Manager ）的查看链接。</block>
  <block id="6f32389268763bedb9e6716b5f0973d0" category="paragraph"><block ref="6f32389268763bedb9e6716b5f0973d0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7ec2407381a4f65d228483b566b6907f" category="paragraph">在 Windows 虚拟机中，打开浏览器并导航到 vCenter Web 客户端 URL <block ref="d325f0342d122dda054a3ca8b0c44019" category="inline-link-rx"></block> 并使用 admin 用户名 CloudOwner@gve.local 并粘贴复制的密码。同样，也可以使用 Web 客户端 URL 访问 NSX-T 管理器 <block ref="c694eb5be92097a8fdea8cdda0ad5ea5" category="inline-link-rx"></block> 并使用管理员用户名并粘贴复制的密码以创建新分段或修改现有分层网关。</block>
  <block id="3a9cff0eb1abb119c1c264dbfff216f6" category="paragraph">要从内部网络连接到 VMware Engine 私有云，请利用云 VPN 或 Cloud Interconnect 实现适当的连接，并确保所需端口处于打开状态。有关详细步骤，请按照此步骤进行操作 <block ref="6fe8ac83365e22e24c5c8eb9edc2d548" category="inline-link-macro-rx"></block>。</block>
  <block id="b433f901707e7fd0f6d64371dfca4af9" category="paragraph"><block ref="b433f901707e7fd0f6d64371dfca4af9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="989afab9e0dfcc6d523ddb1d23145834" category="paragraph"><block ref="989afab9e0dfcc6d523ddb1d23145834" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3c0dd0de38e3c9e55ef5f52e46641376" category="doc">使用 VMware 引擎配置 Cloud Volumes Service</block>
  <block id="8e12272d11d90cdb919c737591f398f6" category="paragraph">可以从 VMware 引擎环境中创建的 VM 挂载 Cloud Volumes Service 共享。由于 Cloud Volumes Service 支持 SMB 和 NFS 协议，因此这些卷也可以挂载到 Linux 客户端并映射到 Windows 客户端。可以通过简单的步骤设置 Cloud Volumes Service 卷。</block>
  <block id="992031e7435f44536a649bfc9de30683" category="paragraph">Cloud Volume Service 和 Google Cloud VMware Engine 私有云必须位于同一区域。</block>
  <block id="a0c391dc49c440fc9962168353cedde3" category="inline-link-macro">指南</block>
  <block id="e9676faeb0b33249abc3a47d95e55ed8" category="paragraph">要从 Google 云市场购买，启用和配置适用于 Google Cloud 的 NetApp Cloud Volumes Service ，请按照以下详细信息进行操作 <block ref="c9eb1a9870bc9f20357f50bf16ec5704" category="inline-link-macro-rx"></block>。</block>
  <block id="84c877bb77a313d307054a0824ffff03" category="section-title">创建一个 CVS NFS 卷到 GCVE 私有云</block>
  <block id="1ec5bbc38708de3f8cfad6d6ca608742" category="paragraph">要创建和挂载 NFS 卷，请完成以下步骤：</block>
  <block id="ca5470246976d59ea6a32d3e2094059d" category="list-text">从 Google 云控制台中的合作伙伴解决方案访问 Cloud Volumes 。</block>
  <block id="45ab48bbbad4380f09ef6b41f9eb8f8a" category="paragraph"><block ref="45ab48bbbad4380f09ef6b41f9eb8f8a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="46577653160772df2b1548b726d7c9ce" category="list-text">在 Cloud Volumes Console 中，转到 Volumes 页面，然后单击 Create 。</block>
  <block id="4a43547530a8ef079adc80160de3dde9" category="paragraph"><block ref="4a43547530a8ef079adc80160de3dde9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="825700271a3acfeaf96fa0bfb5f15b65" category="list-text">在创建文件系统页面上，根据成本分摊机制的需要指定卷名称和计费标签。</block>
  <block id="8a81559c79124aa1a1cd2093faed73ee" category="paragraph"><block ref="8a81559c79124aa1a1cd2093faed73ee" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b4bbe773302576667095a132b75c48fc" category="list-text">选择相应的服务。对于 GCVE ，请选择 CVS-Performance 和所需的服务级别，以根据应用程序工作负载要求提高延迟和性能。</block>
  <block id="184fe9f42c4d5eaab1cc6079778040c2" category="paragraph"><block ref="184fe9f42c4d5eaab1cc6079778040c2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4492d6cb3c36c984d9f52d9461c5b69b" category="list-text">为卷和卷路径指定 Google Cloud 区域（卷路径必须在项目中的所有云卷之间是唯一的）</block>
  <block id="594c2b024401023acd7deae8f3cb8ceb" category="paragraph"><block ref="594c2b024401023acd7deae8f3cb8ceb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c4b0697a6c38463b0b06d7dc66b16b74" category="list-text">选择卷的性能级别。</block>
  <block id="aebc437f9bb3656c19ecebe1becc99fa" category="paragraph"><block ref="aebc437f9bb3656c19ecebe1becc99fa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dd9c26fe6b5f33ab2b0002050ff831d8" category="list-text">指定卷的大小和协议类型。在此测试中，将使用 NFSv3 。</block>
  <block id="e5ba61d9c8c666d452e9e78256762019" category="paragraph"><block ref="e5ba61d9c8c666d452e9e78256762019" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ea3a8099bd03f7da2c641e049e354ea1" category="list-text">在此步骤中，选择可从中访问卷的 VPC 网络。确保已建立 VPC 对等关系。</block>
  <block id="d3dba730ef6d3f046910d94696ca086d" category="paragraph">提示：如果尚未建立 VPC 对等关系，则会显示一个弹出按钮，用于指导您完成对等命令。打开 Cloud Shell 会话并执行相应的命令，将您的 VPC 与 Cloud Volumes Service 生产者建立对等关系。如果您决定事先准备 VPC 对等关系，请参见以下说明。</block>
  <block id="ecf942f7df1f072f5910afb3fa45f36e" category="paragraph"><block ref="ecf942f7df1f072f5910afb3fa45f36e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1ed1352ea98f362074fa7855ec6bb89c" category="list-text">通过添加相应的规则来管理导出策略规则，然后选中相应 NFS 版本对应的复选框。</block>
  <block id="3ae650d16c298e2f5dc9e005a2f8934a" category="paragraph">注意：除非添加导出策略，否则无法访问 NFS 卷。</block>
  <block id="2f6d29a5c21fb51bb181c4b97241a955" category="paragraph"><block ref="2f6d29a5c21fb51bb181c4b97241a955" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a194552e035de341a4a7c99a1c687956" category="list-text">单击保存以创建卷。</block>
  <block id="fe18028768c2ffc16d5cb32aa5b70d5b" category="paragraph"><block ref="fe18028768c2ffc16d5cb32aa5b70d5b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3588b0992732355d67655af9f6450c5d" category="section-title">将 NFS 导出挂载到在 VMware 引擎上运行的 VM</block>
  <block id="87397baf86d56e19a3bdac712966da5d" category="paragraph">在准备挂载 NFS 卷之前，请确保专用连接的对等状态列为 "Active" 。状态为 "Active" 后，请使用 mount 命令。</block>
  <block id="c9f09539bbf502703a4f5e2d480a5972" category="paragraph">要挂载 NFS 卷，请执行以下操作：</block>
  <block id="726f902a0b5536d71345114fb942d81b" category="list-text">在 Cloud Console 中，转至 Cloud Volumes &gt; Volumes 。</block>
  <block id="1feaf778ab1cf141cf92a316d53e1365" category="list-text">转到卷页面</block>
  <block id="76d2df71caae5e1ec3f81822829504f5" category="list-text">单击要挂载 NFS 导出的 NFS 卷。</block>
  <block id="4fc82f44f951748bf462898e43d08054" category="list-text">向右滚动，在显示更多下，单击挂载说明。</block>
  <block id="692afb2fddb72a6cfc89dd1df12945ab" category="paragraph">要从 VMware VM 的子操作系统中执行挂载过程，请执行以下步骤：</block>
  <block id="2c7df76595ada01b5b08659283021aa7" category="list-text">对虚拟机使用 SSH 客户端和 SSH 。</block>
  <block id="2b64d099377e2935e786009804205feb" category="list-text">在实例上安装 NFS 客户端。</block>
  <block id="d8aa2b3304fc65e5fd1cae735194aef6" category="list-text">在 Red Hat Enterprise Linux 或 SUSE Linux 实例上：</block>
  <block id="d610fa6d370a8d35fb4c26359f086aa0" category="list-text">在 Ubuntu 或 Debian 实例上：</block>
  <block id="9bc2e27c16ca55bfc1a7ba94b91a21dc" category="list-text">在实例上创建新目录，例如 "/nimCVSNFSol01" ：</block>
  <block id="9e21b9d85251decc0982b75506826828" category="paragraph"><block ref="9e21b9d85251decc0982b75506826828" category="inline-image-macro-rx" type="image"></block></block>
  <block id="174714918db1cc87ef113e3087cba5da" category="list-text">使用相应的命令挂载卷。以下是实验室命令示例：</block>
  <block id="1ec7767a139a3f95923511d7bf547a6c" category="paragraph"><block ref="811572ed35d4b134bc0d7769dd80ab6c" category="inline-image-macro-rx" type="image"></block>
<block ref="b780e126200cb608d0de968e965e9c71" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3df234dd2e63d779a2d017bb1ef3375d" category="section-title">创建 SMB 共享并将其挂载到在 VMware 引擎上运行的 VM</block>
  <block id="400db805dd1f9fc929e5bf72fafb1661" category="paragraph">对于 SMB 卷，请确保在创建 SMB 卷之前已配置 Active Directory 连接。</block>
  <block id="94f9379544859ae4d8990b84731870aa" category="paragraph"><block ref="94f9379544859ae4d8990b84731870aa" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5c62a73033a0e9f64b5b2b311ded0cc5" category="paragraph">建立 AD 连接后，创建具有所需服务级别的卷。除了选择适当的协议之外，这些步骤与创建 NFS 卷类似。</block>
  <block id="228ba1c797822b63cd7c6f54ca40b87e" category="paragraph"><block ref="228ba1c797822b63cd7c6f54ca40b87e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="54cd15dd2d6121aa16f0b4b87b46ef2a" category="list-text">选择相应的服务。对于 GCVE ，请选择 CVS-Performance 和所需的服务级别，以根据工作负载要求提高延迟和性能。</block>
  <block id="b8eb8307790a9b22c2f6997c097b344e" category="paragraph"><block ref="b8eb8307790a9b22c2f6997c097b344e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cb91d5f8a608e41cd1f217e30a536437" category="paragraph"><block ref="cb91d5f8a608e41cd1f217e30a536437" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7e5a0a3c08f102d8c49c1d811b71d97f" category="paragraph"><block ref="7e5a0a3c08f102d8c49c1d811b71d97f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3d1a06f98a1c133a8a0c74cc4222e23b" category="list-text">指定卷的大小和协议类型。在此测试中，使用 SMB 。</block>
  <block id="6eb5a9152f38c77efc6d14902aa7dec8" category="paragraph"><block ref="6eb5a9152f38c77efc6d14902aa7dec8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cbde2df6a7c89370edc449dc5705d30c" category="inline-link-macro">说明</block>
  <block id="15adcf662b8b92c623f4256a65f605ed" category="paragraph">提示：如果尚未建立 VPC 对等关系，则会显示一个弹出按钮，用于指导您完成对等命令。打开 Cloud Shell 会话并执行相应的命令，将您的 VPC 与 Cloud Volumes Service 生产者建立对等关系。如果您决定事先准备 VPC 对等关系，请参见以下内容 <block ref="3b4469537a7b14dcfd28e3d301600ff6" category="inline-link-macro-rx"></block>。</block>
  <block id="7f88d48c3b0283642fe6b1f3f061d0fd" category="paragraph"><block ref="7f88d48c3b0283642fe6b1f3f061d0fd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8ac40323c41c29fb75f6e19c4c683e47" category="paragraph"><block ref="8ac40323c41c29fb75f6e19c4c683e47" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4990031dcfbd871d95ce4ae0321e7156" category="paragraph">要挂载 SMB 卷，请执行以下操作：</block>
  <block id="fd78728be3a82142558c815267b8daa0" category="list-text">单击要映射 SMB 共享的 SMB 卷。</block>
  <block id="58dc78a5cd30078188f7c605e636a975" category="paragraph">要从 VMware VM 的 Windows 子操作系统中执行挂载过程，请执行以下步骤：</block>
  <block id="3dcb4e26f80951bdb3beeb0a03a3ba83" category="list-text">单击 "Start （开始） " 按钮，然后单击 "Computer" （计算机）。</block>
  <block id="202bba1ab43a099f57e49b350eb2ad1a" category="list-text">单击映射网络驱动器。</block>
  <block id="7dea65bdd8e9fbcd8a5b7249c71e1f0b" category="list-text">在驱动器列表中，单击任何可用的驱动器盘符。</block>
  <block id="695179e494f30a851f80409f824a80f8" category="list-text">在文件夹框中，键入：</block>
  <block id="2653f3365feaf0a8bf80106cba1b9ad8" category="paragraph"><block ref="2653f3365feaf0a8bf80106cba1b9ad8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7cd95358048d9f5d18cf70f66126e1e7" category="paragraph">要在每次登录到计算机时进行连接，请选中登录时重新连接复选框。</block>
  <block id="7968f043139de8ff0e5df4451c437426" category="list-text">单击完成。</block>
  <block id="8902b5e2f0c169ccf7ad8b5c335531e5" category="paragraph"><block ref="8902b5e2f0c169ccf7ad8b5c335531e5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="104948b3593a97ed92fc801aaf126581" category="doc">企业混合云（ EHC ）概述</block>
  <block id="415be703c228d9c6838b18850a1d9f31" category="paragraph">大多数 IT 组织都采用混合云优先的方法。这些组织处于转型阶段，客户正在评估其当前 IT 环境，然后根据评估和发现练习将工作负载迁移到云。</block>
  <block id="346972233965e89cf5b17c3907b35f86" category="paragraph">客户迁移到云的因素包括弹性和突发，数据中心退出，数据中心整合，寿命终结情形，合并， 采集等。迁移的原因可能因组织及其各自的业务优先级而异。迁移到混合云时，在云中选择合适的存储对于充分发挥云部署和弹性的潜能非常重要。</block>
  <block id="0c4a16ed987359b14dc407a858d1a78e" category="section-title">公有云中的 VMware 云选项</block>
  <block id="9789f0612fda153726aa8ad87265e4b9" category="section-title">Azure VMware 解决方案</block>
  <block id="d788a5499d320b05602a6a0805c81403" category="image-alt">AVS</block>
  <block id="c7b818b90803789a74058cfb4396383d" category="paragraph">Azure VMware 解决方案是一种混合云服务，支持在 Microsoft Azure 公有云中实现完全正常运行的 VMware SDDC 。Azure VMware 解决方案是由 Microsoft 全面管理和支持的第一方解决方案，由 VMware 利用 Azure 基础架构进行验证。这意味着，在部署 Azure VMware 解决方案时，客户可以获得用于计算虚拟化的 VMware ESXi ，用于超融合存储的 vSAN ， 和 NSX 实现网络连接和安全性，同时充分利用 Microsoft Azure 的全球影响力，一流的数据中心设施以及邻近丰富的原生 Azure 服务和解决方案生态系统的优势。</block>
  <block id="22b0614f106e2b7c956c60c8fc0d35c3" category="image-alt">VMC</block>
  <block id="8641a2440fc22db60ec877f3a8946fa2" category="paragraph">基于 AWS 的 VMware 云通过优化对原生 AWS 服务的访问，将 VMware 企业级 SDDC 软件引入 AWS 云。VMware Cloud on AWS 由 VMware Cloud Foundation 提供支持，它将 VMware 的计算，存储和网络虚拟化产品（ VMware vSphere ， VMware vSAN 和 VMware NSX ）与 VMware vCenter Server 管理相集成，并经过优化，可在专用的弹性裸机 AWS 基础架构上运行。</block>
  <block id="8cb69aa5b1609d0a39f0fcd576c07df6" category="section-title">Google Cloud VMware 引擎</block>
  <block id="5292de1147a4b3a1d5c63d057c4b0096" category="image-alt">gcve</block>
  <block id="1ffd600a1d8e07fe3b4bca16ae02167c" category="paragraph">Google Cloud VMware Engine 是一款基础架构即服务（ Infrastructure-as-a-Service ， IaaS ）产品，基于 Google Cloud 高性能可扩展基础架构和 VMware Cloud Foundation 堆栈（ VMware vSphere ， vCenter ， vSAN 和 NSX-T ）构建此服务支持快速迁移到云，将现有 VMware 工作负载从内部环境无缝迁移或扩展到 Google Cloud Platform ，而无需花费成本，精力或风险来重新构建应用程序或重新调整操作。这是一项由 Google 销售和支持的服务，与 VMware 密切合作。</block>
  <block id="3310d189628fa6ef843aac57894a6db2" category="admonition">SDDC 私有云和 NetApp Cloud Volumes 主机代管功能可提供最佳性能，并将网络延迟降至最低。</block>
  <block id="c771fce16e2ba5df07df53cc5ab0748f" category="section-title">您知道吗？</block>
  <block id="8bba30129de0461b328be1e49f02b4d9" category="paragraph">无论使用何种云，在部署 VMware SDDC 时，初始集群都包括以下产品：</block>
  <block id="7110e7a8682a9bc1c7105b83fe0cd9ea" category="list-text">用于计算虚拟化的 VMware ESXi 主机，以及用于管理的 vCenter Server 设备</block>
  <block id="7d7a80e207de2136f4f19820758703fc" category="list-text">VMware vSAN 超融合存储，整合了每个 ESXi 主机的物理存储资产</block>
  <block id="d2852e9d73c0ef81033c835719128b81" category="list-text">VMware NSX 用于虚拟网络连接和安全性，并使用 NSX Manager 集群进行管理</block>
  <block id="afb91ca7e7763c77e44a41cb5ad0f78b" category="paragraph">对于计划托管存储密集型工作负载并在任何云托管的 VMware 解决方案上横向扩展的客户，默认的超融合基础架构要求扩展应同时位于计算和存储资源上。</block>
  <block id="fdb27bea654a8d874baecced2be84a1b" category="paragraph">通过与 Azure NetApp Files ，适用于 NetApp ONTAP 的 Amazon FSx ，适用于所有三种主要超大规模云产品的 Cloud Volumes ONTAP 以及适用于 Google Cloud 的 Cloud Volumes Service 等 NetApp Cloud Volumes 相集成，客户现在可以选择单独扩展其存储。 并且仅根据需要向 SDDC 集群添加计算节点。</block>
  <block id="a752c3529f0285d457f3b33b3c80d9a4" category="list-text">VMware 不建议使用不平衡的集群配置，因此扩展存储意味着添加更多主机，这意味着 TCO 增加。</block>
  <block id="f0de6024628654ed00bfc0e4adfa259e" category="list-text">只能使用一个 vSAN 环境。因此，所有存储流量都将直接与生产工作负载竞争。这不是一个很好的模式。</block>
  <block id="c231690c8e9fabbd819ec1805becb157" category="list-text">无法提供多个性能层来满足应用程序要求，性能和成本要求。</block>
  <block id="5d4c92ddd5fe9a6044b25c17d3368207" category="list-text">很容易达到基于集群主机构建的 vSAN 的存储容量限制。使用 NetApp Cloud Volumes 扩展存储以托管活动数据集或将较冷的数据分层到永久性存储。</block>
  <block id="c1cf68955de5fa20274b29fa4a2a863f" category="paragraph">Azure NetApp Files ，适用于 NetApp ONTAP 的 Amazon FSx ， Cloud Volumes ONTAP （在所有三个主要超大规模企业中均有提供）和适用于 Google Cloud 的 Cloud Volumes Service 可与子虚拟机结合使用。此混合存储架构由一个 vSAN 数据存储库组成，用于存放子操作系统和应用程序二进制数据。应用程序数据通过基于子系统的 iSCSI 启动程序或 NFS/SMB 挂载连接到 VM ，这些启动程序或挂载可分别直接与适用于 NetApp ONTAP 的 Amazon FSx ， Cloud Volume ONTAP ， Azure NetApp Files 和适用于 Google Cloud 的 Cloud Volumes Service 进行通信。此配置可让您轻松克服存储容量方面的挑战，就像使用 vSAN 一样，可用空间取决于可宽空间和所使用的存储策略。</block>
  <block id="b705b3f95f20899325d309e6ac57279b" category="admonition">NetApp 存储作为数据存储库，目前可在所有主要超大规模云中作为私有预览版使用。</block>
  <block id="1a5208bfffc624ccf99dfcbbf2078050" category="paragraph">我们来考虑一下 AWS 上的 VMware Cloud 上的三节点 SDDC 集群：</block>
  <block id="fab7fb31baaec1ccac4fe688e1a4c5d4" category="list-text">三节点 SDDC 的总原始容量 = 31.1TB （每个节点大约 10 TB ）。</block>
  <block id="ca189b47c3a1dfe1adbd1519688e4cc8" category="list-text">在添加其他主机之前要保留的可宽空间 = 25% = （ .25 x 31.1TB ） = 7.6 TB 。</block>
  <block id="999b2c719df3f3e524bb10fb76521726" category="list-text">可宽空间扣除后的可用原始容量 = 23.4TB</block>
  <block id="2e1f3b31385d3304e1cda70b9cd8ed4c" category="list-text">有效可用空间取决于应用的存储策略。</block>
  <block id="506c2c0c7f5b70af3df68c45c46f45a7" category="paragraph">例如：</block>
  <block id="2f5e6d9b0a4708c4d137ba14ac704a7b" category="list-text">RAID 0 = 有效可用空间 = 23.4TB （可用原始容量 /1 ）</block>
  <block id="df6b502d4d7283ef27d3821b69836c2d" category="list-text">RAID 1 = 有效可用空间 = 11.7TB （可用原始容量 /2 ）</block>
  <block id="921c660c11d4880048f3ef723f079e17" category="list-text">RAID 5 = 有效可用空间 = 17.5 TB （可用原始容量 /1.33 ）</block>
  <block id="e3bdc3102c3de4f73860c229550bc6f4" category="paragraph">因此，使用 NetApp Cloud Volumes 作为子系统连接的存储有助于扩展存储和优化 TCO ，同时满足性能和数据保护要求。</block>
  <block id="571c0d425ce03c2532e7d9f34ca87cb1" category="section-title">需要记住的要点</block>
  <block id="8e6eaed3852a3b311ab6ed1b8b6fc239" category="list-text">在混合存储模型中，将第 1 层或高优先级工作负载放置在 vSAN 数据存储库上，以满足任何特定延迟要求，因为它们是主机本身的一部分且位于邻近位置。对事务处理延迟可接受的任何工作负载 VM 使用来宾机制。</block>
  <block id="43ff7a71a2ea2fc47a29d410cd1e4944" category="list-text">使用 NetApp SnapMirror ® 技术将工作负载数据从内部 ONTAP 系统复制到 Cloud Volumes ONTAP 或 Amazon FSx for NetApp ONTAP ，以便使用块级机制轻松迁移。这不适用于 Azure NetApp Files 和 Cloud Volumes 服务。要将数据迁移到 Azure NetApp Files 或云卷服务，请根据所使用的文件协议使用 NetApp XCP ， Cloud Sync ， rysnc 或 Robocopy 。</block>
  <block id="d3c0fd4b510310b9bd00463208eade94" category="list-text">测试显示，从相应 SDDC 访问存储时会出现 2 到 4 毫秒的额外延迟。在映射存储时，将此额外延迟考虑到应用程序要求。</block>
  <block id="b83cf0bc9b65a0fcd5f49d4c96dceea8" category="list-text">要在测试故障转移和实际故障转移期间挂载来宾连接的存储，请确保重新配置 iSCSI 启动程序，更新 SMB 共享的 DNS 以及在 fstab 中更新 NFS 挂载点。</block>
  <block id="1b4048870ed334dbc2e7d6f09a814188" category="list-text">确保已在 VM 中正确配置来宾系统内 Microsoft 多路径 I/O （ MPIO ），防火墙和磁盘超时注册表设置。</block>
  <block id="cb24a031418d2311ef599cfd18d09880" category="admonition">此适用场景子系统连接的存储。</block>
  <block id="00b23e82efc2ec82b134496e575a934c" category="section-title">NetApp 云存储的优势</block>
  <block id="80def6ec4d999fc4d082800c8c33f6ec" category="paragraph">NetApp 云存储具有以下优势：</block>
  <block id="2e594db552f7cd9c7f02d87507dbb471" category="list-text">通过独立于计算扩展存储，提高计算到存储的密度。</block>
  <block id="479f9f236fc4cffa74f2e94b654bbeeb" category="list-text">可用于减少主机数量，从而降低总 TCO 。</block>
  <block id="108dd736471686a2b8b87154d73cbc5b" category="list-text">计算节点故障不会影响存储性能。</block>
  <block id="a85e0a264279b851fbcec367c181932e" category="list-text">借助 Azure NetApp Files 的卷重塑和动态服务级别功能，您可以根据稳定状态工作负载进行规模估算，从而防止过度配置，从而优化成本。</block>
  <block id="4e24ca7789e0b9320e302b8efa2caf9f" category="list-text">Cloud Volumes ONTAP 的存储效率，云分层和实例类型修改功能可以提供最佳的存储添加和扩展方式。</block>
  <block id="d7a87fa8fc914cf57f38eff05d53faa2" category="list-text">防止过度配置存储资源仅在需要时添加。</block>
  <block id="940eacbcb0faa8c3b1e0d995c154f693" category="list-text">通过高效的 Snapshot 副本和克隆，您可以快速创建副本，而不会对性能造成任何影响。</block>
  <block id="a9e4a9fcd1f9bf0a9d0d0b2c0f198db5" category="list-text">通过从 Snapshot 副本快速恢复来帮助解决勒索软件攻击。</block>
  <block id="caf9b805c37cab661d4e3a26b7f71109" category="list-text">提供基于增量块传输的高效区域灾难恢复以及跨区域的集成备份块级别，从而提供更好的 RPO 和 RTO 。</block>
  <block id="658fb5ef00749e8af5a974f612adea9b" category="section-title">假设</block>
  <block id="a9e63f2a8549d717b777806268a0c0cb" category="list-text">已启用 SnapMirror 技术或其他相关数据迁移机制。从内部环境到任何超大规模云，有许多连接选项可供选择。使用适当的路径并与相关网络团队合作。</block>
  <block id="c63dc0feeff939bc83ba1537a1e8ac9a" category="list-text">在编写本文档时，来宾存储是唯一可用的选项。</block>
  <block id="478a13ed02b948c9cfd89a6197062012" category="admonition">请联系 NetApp 解决方案架构师和相应的超大规模云架构师来规划和估算存储以及所需数量的主机。NetApp 建议先确定存储性能要求，然后再使用 Cloud Volumes ONTAP 规模估算器以正确的吞吐量最终确定存储实例类型或相应的服务级别。</block>
  <block id="c748546b5854ecb146d9caa41d781bdb" category="section-title">详细的架构</block>
  <block id="2b6a2372968d8ec2639d784ce8aee350" category="paragraph">从高层面来看，此架构（如下图所示）介绍了如何使用 NetApp Cloud Volumes ONTAP ， Cloud Volumes Service for Google Cloud 和 Azure NetApp Files 作为额外的子系统内存储选项，在多个云提供商之间实现混合多云连接和应用程序可移植性。</block>
  <block id="1a8ac44404b1e5888d83801ac116ff66" category="inline-image-macro">企业混合云架构</block>
  <block id="855b05f645c80247a3f11392cab187c2" category="paragraph"><block ref="855b05f645c80247a3f11392cab187c2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f0f52a47448cc3bc6237a09f83ad3e74" category="doc">部署和配置 GCVE</block>
  <block id="fd558e50adcdcb0d667a4790f70f75a9" category="paragraph">要在 GCP 上配置 GCVE 环境，请登录到 GCP 控制台并访问 VMware 引擎门户。</block>
  <block id="fb33f758c28f8ef8d56e41f74b4c47ab" category="paragraph">单击 " 新建私有云 " 按钮，然后输入所需的 GCVE 私有云配置。在 " 位置 " 上，确保在部署 CVS/CVO 的同一区域 / 区域部署私有云，以确保最佳性能和最低延迟。</block>
  <block id="63b31ca49de01854f780d1e1722cd1c1" category="paragraph">前提条件：</block>
  <block id="d79b0ab3cbae1dcd79007a97d26af5b1" category="list-text">设置 VMware 引擎服务管理员 IAM 角色</block>
  <block id="72a7f08f840ab91a28a2558393971c47" category="inline-link-macro">启用 VMware 引擎 API 访问和节点配额</block>
  <block id="88e3e4c9b1c9efec399f7dda7a0c5887" category="list-text"><block ref="88e3e4c9b1c9efec399f7dda7a0c5887" category="inline-link-macro-rx"></block></block>
  <block id="a88d670b04af96a871dad56001e8f742" category="list-text">确保 CIDR 范围不会与任何内部或云子网重叠。CIDR 范围必须为 /27 或更高。</block>
  <block id="33d7d6c631c2d2cb3608445ef761fe16" category="paragraph"><block ref="33d7d6c631c2d2cb3608445ef761fe16" category="inline-image-macro-rx" type="image"></block></block>
  <block id="65bdc0673006b33d0c876e18a9a98787" category="paragraph">注意：创建私有云可能需要 30 分钟到 2 小时。</block>
  <block id="44f55a60cc8f70d1e10efc62b75eeddc" category="doc">适用于超大规模云提供商的 VMware 的 NetApp 解决方案</block>
  <block id="ee5c3b650204d422e3d3e7bd725ec032" category="paragraph">详细了解 NetApp 为三（ 3 ）个主要超大规模提供商提供的功能—从作为子系统连接存储设备或原生数据存储库的 NetApp 到迁移工作流，扩展 / 突发云，备份 / 还原和灾难恢复。</block>
  <block id="f21c97f5b239021bb3f13d148516abb4" category="paragraph">选择您的云，让 NetApp 完成其余工作！</block>
  <block id="c1304f98c6be845a236d7a27951ece4f" category="paragraph"><block ref="c1304f98c6be845a236d7a27951ece4f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ca4ac823f3f130f3c78d6ac26ba9f46b" category="admonition">要查看特定超大规模提供商的功能，请单击该超大规模提供商的相应选项卡。</block>
  <block id="addac5e706b2148d9c7b3bbe2d2fcdde" category="paragraph">从以下选项中选择，跳至所需内容部分：</block>
  <block id="06262015df4851b380189212274a0e3e" category="inline-link-macro">超大规模部署中的 VMware</block>
  <block id="7f08237a127b62af444f720f15216cee" category="list-text"><block ref="7f08237a127b62af444f720f15216cee" category="inline-link-macro-rx"></block></block>
  <block id="c774c23e9a97e08bfa096f1cbf18cc17" category="inline-link-macro">NetApp 存储选项</block>
  <block id="d3fc27ff58dc3a0d839a16af858e7999" category="list-text"><block ref="d3fc27ff58dc3a0d839a16af858e7999" category="inline-link-macro-rx"></block></block>
  <block id="833413440fbbe13837d8b58256cfba65" category="paragraph">与内部部署一样，规划基于云的虚拟化环境对于成功创建 VM 和迁移生产就绪环境至关重要。</block>
  <block id="56ef2682280ac110060b881925a87b80" category="open-title">Google Cloud</block>
  <block id="ff264305bf70750f504c04f48ab02038" category="paragraph">NetApp 存储可以通过多种方式在 3 个主要超大规模主机中的每一个上进行利用—要么作为推测连接的数据存储库，要么作为原生数据存储库。</block>
  <block id="94772ee4b241fe0706c3aaef6e3a4505" category="inline-link-macro">支持的 NetApp 存储选项</block>
  <block id="67b586cdf9703ba67abe711415768cc0" category="paragraph">请访问 <block ref="01a9bd21bfc714c8dec8aabc5b88eda7" category="inline-link-macro-rx"></block> 有关详细信息 ...</block>
  <block id="8a69f1bae52e494c6960f92a27390dcf" category="paragraph">要将 VMware Cloud 连接到 FSX ONTAP ，请完成以下步骤：</block>
  <block id="7ca6fbd8bbb6725fab7413e4179738f6" category="list-text">完成 VMware Cloud 部署并连接到 AWS VPC 后，您必须将适用于 NetApp ONTAP 的 Amazon FSx 部署到新的 VPC 中，而不是原始连接的 VPC 中（请参见下面的屏幕截图）。如果在连接的 VPC 中部署了 FSX （ NFS 和 SMB 浮动 IP ），则无法访问它。请注意， Cloud Volumes ONTAP 等 iSCSI 端点在连接的 VPC 上运行正常。</block>
  <block id="da6646a18f048724eb432bf61285ca7f" category="paragraph"><block ref="da6646a18f048724eb432bf61285ca7f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a85dd65f7163e587c050ea8931a368ae" category="list-text">在同一地区部署一个额外的 VPC ，然后将适用于 NetApp ONTAP 的 Amazon FSx 部署到新的 VPC 中。</block>
  <block id="c78834afa7d24e921aa4d756d0a6409f" category="paragraph">通过在 VMware Cloud 控制台中配置 SDDC 组，可以使用所需的网络配置选项连接到部署了 FSX 的新 VPC 。在第 3 步中，验证是否已选中 " 为组配置 VMware Transit Connect 将在每个附件和数据传输中产生费用 " ，然后选择创建组。完成此过程可能需要几分钟时间。</block>
  <block id="f91a2b452c63b5ccfcb4c39c2957c74e" category="paragraph"><block ref="ca83e0582a449c1b4399270025e1cc4a" category="inline-image-macro-rx" type="image"></block>
<block ref="9232dff72050e533bd1e173e5a0dd48c" category="inline-image-macro-rx" type="image"></block>
<block ref="5a108f597862e683ab9463f7c3ba6df6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fae60fbb10da5c3df46ec8ae03cd29b5" category="inline-link-macro">连接外部 VPC 的说明</block>
  <block id="784ad3266f853af20763bb78f5eec87a" category="list-text">将新创建的 VPC 附加到刚刚创建的 SDDC 组。选择外部 VPC 选项卡，然后按照进行操作 <block ref="19928d01a63fe78e1303b296c2046666" category="inline-link-macro-rx"></block> 组。完成此过程可能需要 10 到 15 分钟。</block>
  <block id="14466a85376e8776f891db4cb3c38c6c" category="paragraph"><block ref="dd1eb585a08c833cec9544c048af36b6" category="inline-image-macro-rx" type="image"></block>
<block ref="38542de5661e382aba9345fe6e5a991b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8acea1c4fcca87631ca127e2bc757f13" category="inline-link-macro">AWS 传输网关</block>
  <block id="77508ef16874a250b66be2f90fc59918" category="list-text">在外部 VPC 过程中，系统会通过 AWS 控制台通过资源访问管理器提示您访问新的共享资源。共享资源为 <block ref="ccce2323414354d76e9cea0c1df9221b" category="inline-link-macro-rx"></block> 由 VMware Transit Connect 管理。</block>
  <block id="ac81300f843e6b91377e64a8edb819c2" category="paragraph"><block ref="63de05888c0a11205c33fd560dba3bc5" category="inline-image-macro-rx" type="image"></block>
<block ref="0455c56bd9863ddfae4079b5aabd42e0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bcf415daee6d6f894a54f025534ba071" category="list-text">创建传输网关附件。</block>
  <block id="e222d36183b455bb51f289144826c239" category="paragraph"><block ref="e222d36183b455bb51f289144826c239" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5b6693c4eff7f7923c59277702b441a9" category="list-text">返回 VMC 控制台，接受 VPC 连接。完成此过程大约需要 10 分钟。</block>
  <block id="64d5d06ed03c085c4f5ce23ff6eeddac" category="paragraph"><block ref="64d5d06ed03c085c4f5ce23ff6eeddac" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c9b85dc0e557eb865bfa9ae84e251623" category="list-text">在外部 VPC 选项卡中，单击路由列中的编辑图标，然后添加以下所需的路由：</block>
  <block id="ae6434a5ebe0bad2f978fef8e0ed9efe" category="inline-link-macro">浮动 IP</block>
  <block id="06651ace1eab88d681ca9a8852bf26e2" category="list-text">适用于 NetApp ONTAP 的 Amazon FSX 的浮动 IP 范围的路由 <block ref="14a98976d888daccbd07561411cfd6fa" category="inline-link-macro-rx"></block>。</block>
  <block id="5e16e681111a1a5b2dc805d69827532f" category="list-text">Cloud Volumes ONTAP 的浮动 IP 范围的路由（如果适用）。</block>
  <block id="efffbab523616433e2c1ea67cbcaab53" category="list-text">新创建的外部 VPC 地址空间的路由。</block>
  <block id="daa8a39ba75e8ac01fd26d579ce35fd9" category="paragraph"><block ref="daa8a39ba75e8ac01fd26d579ce35fd9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="853349bb92eccb477b47eef3b8a5d9e2" category="inline-link-macro">防火墙规则</block>
  <block id="499ca5dd26dbcc4c89a04ac771b316a6" category="inline-link-macro">详细步骤</block>
  <block id="14c6314f2ae331d7f9a01ac04a75cd2b" category="list-text">最后，允许双向流量 <block ref="0756551700fd3215666355892b2f3692" category="inline-link-macro-rx"></block> 用于访问 FSX/CVO 。请按照以下说明操作 <block ref="583f77470215de8611ddf3fba5fc6512" category="inline-link-macro-rx"></block> SDDC 工作负载连接的计算网关防火墙规则。</block>
  <block id="098b98cba4d6766e7de663adf0fdabb0" category="paragraph"><block ref="098b98cba4d6766e7de663adf0fdabb0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0f4480b9caed7d956fd6071b4cce03b9" category="list-text">为管理和计算网关配置防火墙组后，可以按如下方式访问 vCenter ：</block>
  <block id="f1c1b29fad3f2bdb9d8d054686b86542" category="paragraph"><block ref="f1c1b29fad3f2bdb9d8d054686b86542" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b8b86f112029b19bf6451ba4624a4090" category="paragraph">下一步是验证是否已根据您的需求配置 Amazon FSX ONTAP 或 Cloud Volumes ONTAP ，以及是否已配置卷以从 vSAN 卸载存储组件以优化部署。</block>
  <block id="76b7cf7d0f36f0986e2c7ef578303aab" category="doc">总结和结论：为什么选择 NetApp 企业级混合云（ EHC ）</block>
  <block id="dd6f2ba05323a537582c1f232e8a2c60" category="paragraph">NetApp Cloud Volumes 以及适用于主要超大规模企业的 VMware 解决方案为希望利用混合云的企业提供了巨大的潜力。本节其余部分将介绍有关集成 NetApp Cloud Volumes 实现真正混合多云功能的用例。</block>
  <block id="e7441dbfabeaebba75ddd1bf2bcf25e9" category="section-title">用例 1 ：优化存储</block>
  <block id="b9a8c3d27aa6638e02992c8b76fea769" category="paragraph">在使用 RVtools 输出执行规模估算练习时，显而易见，功率（ vCPU/vMem ）与存储是并行的。企业往往会发现自己处于存储空间所需的驱动器大小远远超出所需的容量的情况。</block>
  <block id="cb575e0b8e023ca0a1789ea03bdb86fd" category="paragraph">通过集成 NetApp Cloud Volumes ，企业可以通过简单的迁移方法实现基于 vSphere 的 Cloud 解决方案，无需重新整合，无需 IP 更改，也无需架构更改。此外，通过这种优化，您可以扩展存储占用空间，同时将主机数量保持在 vSphere 所需的最低水平，但不会更改可用的存储层次结构，安全性或文件。这样，您可以优化部署并将总 TCO 降低 35 – 45% 。通过这种集成，您还可以在几秒钟内将存储从热存储扩展到生产级性能。</block>
  <block id="9ae8084cfbf8c00bc50891fe51bb70b4" category="section-title">用例 2 ：云迁移</block>
  <block id="40c30ee45ee11e766ec77dfd0d98cef0" category="paragraph">企业面临着将应用程序从内部数据中心迁移到公有云的压力，原因有多种：即将到期的租约；从资本支出（ capex ）支出迁移到运营支出（ opex ）支出的财务指令；或者只是自上而下的要求，将所有内容迁移到云。</block>
  <block id="4744ec437cce262edc7110652b69ab21" category="paragraph">速度至关重要时，只有简化的迁移方法才可行，因为要适应云的特定 IaaS 平台，重新整合和重构应用程序的速度缓慢且成本高昂，通常需要数月时间。将 NetApp Cloud Volumes 与为子系统连接的存储（包括 RDM 以及应用程序一致的 Snapshot 副本和 HCX ）提供的高效带宽 SnapMirror 复制相结合，从而实现云特定的迁移（例如 Azure Migrate ）或用于复制 VM 的第三方产品），这种过渡比依赖耗时的 I/O 筛选器机制更容易。</block>
  <block id="d393e254c1adb8df50cfc41394c68645" category="section-title">用例 3 ：数据中心扩展</block>
  <block id="90c724dd3ba1ec0f533f7fb73a10323a" category="paragraph">当数据中心因季节性需求峰值或仅仅是稳定的有机增长而达到容量限制时，迁移到云托管的 VMware 以及 NetApp Cloud Volumes 是一项轻松的解决方案。利用 NetApp Cloud Volumes ，可以跨可用性区域提供高可用性并提供动态扩展功能，从而轻松创建，复制和扩展存储。利用 NetApp Cloud Volumes 可以消除对延伸型集群的需求，从而最大限度地减少主机集群容量。</block>
  <block id="0b95336d0f31a3bd4775f96c750bb9bc" category="section-title">用例 4 ：灾难恢复到云</block>
  <block id="c2aee451a27e7cf3993f462ee5b760e9" category="paragraph">在传统方法中，如果发生灾难，则复制到云的 VM 需要先转换到云自己的虚拟机管理程序平台，然后才能还原，而不是在危机期间处理的任务。</block>
  <block id="772dec0515d132f26bfa87cb31b5758d" category="paragraph">通过使用内部 SnapCenter 和 SnapMirror 复制以及公有云虚拟化解决方案将 NetApp Cloud Volumes 用于子系统连接的存储，可以设计一种更好的灾难恢复方法，以便在完全一致的 VMware SDDC 基础架构上恢复 VM 副本以及云专用恢复工具（例如 Azure Site Recovery ）或 Veeam 等第三方工具。此外，您还可以通过此方法快速执行灾难恢复演练并从勒索软件中恢复。这样，您还可以通过按需添加主机来扩展到完全生产环境，以供测试或在灾难期间使用。</block>
  <block id="24d0e6ab8003b406cf7e3f42363acbf5" category="section-title">用例 5 ：应用程序现代化</block>
  <block id="59e56fb67c730af04acf8a13665cadb3" category="paragraph">应用程序进入公有云后，企业将希望利用数百种功能强大的云服务来实现现代化和扩展。借助 NetApp Cloud Volumes ，现代化过程非常简单，因为应用程序数据不会锁定在 vSAN 中，并允许数据在包括 Kubernetes 在内的各种用例中移动。</block>
  <block id="eea420abccd820355b4bddd3524ae083" category="paragraph">无论您是以全云还是混合云为目标， NetApp Cloud Volumes 都可以提供出色的选项来部署和管理应用程序工作负载以及文件服务和块协议，同时通过将数据需求无缝地迁移到应用程序层来降低 TCO 。</block>
  <block id="cd51ff9774803e84c79e8ab19bb7ffd2" category="paragraph">无论使用何种情形，都可以选择您最喜欢的云 / 超大规模云提供商以及 NetApp Cloud Volumes ，快速实现云优势，跨内部和多个云实现一致的基础架构和运营，工作负载的双向可移植性以及企业级容量和性能。</block>
  <block id="2993778cba8ea9a69af4ff9dc7e18fb8" category="paragraph">这是用于连接存储的熟悉过程。请记住，这只是数据位置随新名称而变化；工具和流程都保持不变， NetApp Cloud Volumes 有助于优化整体部署。</block>
  <block id="2195b6c1bba772f631332c732395b829" category="doc">企业混合云（ EHC ）的用例</block>
  <block id="5f1bd6ade489565bebba9a771b93fe70" category="paragraph">概述在规划混合云或云优先部署时对 IT 组织至关重要的使用情形。</block>
  <block id="0812fc943ecbd9a54d88fb25729d0aa5" category="section-title">常见使用情形</block>
  <block id="f136615e6f2c1b330afb72bf4a45b4a4" category="paragraph">使用情形包括：</block>
  <block id="3481fb80f122383c65ff8c6c8fd8c943" category="list-text">灾难恢复，</block>
  <block id="4127bac8297e2af8866315910651ce47" category="list-text">在数据中心维护期间托管工作负载， * 快速激增，需要额外的资源，但不能满足本地数据中心的配置要求。</block>
  <block id="20b1c73b5938d2d878aa1d96fee7f1b2" category="list-text">VMware 站点扩展，</block>
  <block id="5fe13b2b805496310dbaa281d7325877" category="list-text">快速迁移到云，</block>
  <block id="b278a6d011d590bb350b9cb81c21a732" category="list-text">开发 / 测试，和</block>
  <block id="2116d89ca4be9d5a23f758068a2225b2" category="list-text">利用 Cloud 原生技术实现应用程序现代化。</block>
  <block id="bc262005b263505cc0464e05c4324687" category="section-title">IT 发展历程中的一个过程</block>
  <block id="cfdb9aabb4aedf8cad2e330ba5a516a3" category="paragraph">大多数企业都在经历转型和现代化之旅。在这一过程中，各家公司正在尝试利用现有的 VMware 投资，同时利用云优势并探索尽可能无缝地迁移过程的方法。这种方法将使他们的现代化工作变得非常简单，因为数据已经在云中。</block>
  <block id="9576824e6ccc9e436057f6d3bcd644d2" category="paragraph">在这种情况下，最简单的问题解答是每个超大规模提供商中的 VMware 产品。与 NetApp ® Cloud Volumes 一样， VMware 提供了一种将内部 VMware 环境迁移或扩展到任何云的方法，使您可以在云中本机运行工作负载的同时保留现有内部资产，技能和工具。这样可以降低风险，因为不会发生服务中断或需要更改 IP ，并使 IT 团队能够使用现有技能和工具在内部执行操作。这样可以加快云迁移速度，并更平稳地过渡到混合多云架构。</block>
  <block id="ca0a16f344ac7703cf785163a8f07f5d" category="section-title">了解原生存储选项的重要性</block>
  <block id="46da638bac867fb225c11e1d8504da00" category="paragraph">尽管 VMware 在任何云中都能为每个客户提供独特的混合功能，但有限的原生存储选项限制了它对存储繁重的工作负载企业的有用性。由于存储与主机直接相关，因此扩展存储的唯一方法是添加更多主机，这样对于存储密集型工作负载，成本可能会增加 35% – 40% 或更多。这些工作负载只需要额外的存储，而不是额外的功率。但这意味着需要为额外的主机付费。</block>
  <block id="0362604333fcf179ebf8b873f8f8c0ec" category="paragraph">我们来考虑一下这种情况：</block>
  <block id="b401aa039e47ba98bfaca10532e40d08" category="paragraph">客户只需要五台主机来满足 CPU 和内存需求，但需要大量存储需求，并需要 12 台主机来满足存储需求。这一要求最终确实会让财务规模大得多，因为他们只需要增加存储即可购买额外的动力。</block>
  <block id="7c25e9d8a9748905f5d456e20a93b413" category="paragraph">在规划云采用和迁移时，始终需要评估最佳方法并采取最简单的方法来减少总投资。对于任何应用程序迁移，最常见且最简单的方法是重新托管（也称为提升和移动），在这种情况下不会进行虚拟机（ VM ）或数据转换。在将 NetApp Cloud Volumes 与 VMware 软件定义的数据中心（ SDDC ）结合使用的同时，还可以作为 vSAN 的补充，从而提供一个轻松的升降和移动选项。</block>
  <block id="548bebbdb3ac596c6116cbd05e474fe0" category="summary">一系列博客，讨论面向所有公有云提供商的企业级混合云解决方案</block>
  <block id="b8136929c18b90d36d40eb475da80f06" category="doc">企业级混合云博客</block>
  <block id="27f22a085d12c1434c2027f4d64f9418" category="paragraph">概述三家主要云提供商的企业级混合云解决方案的特定功能的博客。</block>
  <block id="f8aacfa5c683858912c498f517c9b457" category="cell">数据访问</block>
  <block id="c14336a2319ce73616b0fa898a883fe0" category="cell">数据访问解决方案集合。解决方案可细分为以下类别之一： [Navy]#Data Migration# [Navy]#Data Protection# [Navy]#Security#</block>
  <block id="4fdba571bc9e0ee81ec6ad364abe8141" category="sidebar">企业混合云（ EHC ）</block>
  <block id="d1c8b02a1da8ed066c640468ff055a12" category="sidebar">EHC 概述</block>
  <block id="e673b6ab6c5649a4df8e874aaa9017b9" category="sidebar">支持的配置</block>
  <block id="bee43f00a445d11a7c2f9ef81ad0c045" category="sidebar">超大规模云中的 VMware Cloud</block>
  <block id="70321856a2bf47570f50f25e43e23bdf" category="sidebar">虚拟化，桌面虚拟化容器</block>
  <block id="5d7b876a73a9025080fbf6dd921d1fdd" category="sidebar">数据迁移和数据保护</block>
  <block id="9b699c59be5ba510cd9c430a31843b23" category="sidebar">数据迁移</block>
  <block id="ef55a9d1028eac237813e753d20134df" category="sidebar">适用于公有云的 VMware</block>
  <block id="27c378e12a7c59dc5aa13b13cc6cecff" category="sidebar">基于超大规模云的 VMware Cloud</block>
  <block id="452b0b090c1c37a0d467a8df764fd81f" category="sidebar">超大规模云中的 NetApp 存储</block>
  <block id="2190ab0d2f6281b2f3a73e0fc8e1f560" category="sidebar">总结和结论</block>
  <block id="75fcfea0185575f935a7f5f149efd8ca" category="sidebar">VMware Hybrid Cloud 用例</block>
  <block id="e251010eb0cac5793d760ab2e5f51473" category="sidebar">用例概述</block>
  <block id="6f4bb0fa6fee4cf4ae1b8b1fc16e17cb" category="sidebar">传统 NetApp HCI 解决方案</block>
  <block id="305b91835af8ac82acfaec819a48a7a4" category="section-title">为 AWS 配置 AVS</block>
  <block id="4a7272ea95323d5fef2e377b91b5f16d" category="inline-link-macro">FSX ONTAP 作为子系统连接的存储</block>
  <block id="4ca121582faa9a2d307ad6cef9329001" category="list-text"><block ref="4ca121582faa9a2d307ad6cef9329001" category="inline-link-macro-rx"></block></block>
  <block id="3017a9031d66c55b0258c102decfd1b9" category="inline-link-macro">Cloud Volumes ONTAP （ CVO ）作为子系统连接的存储</block>
  <block id="354b1047f40f0150e3c64431eb66c074" category="list-text"><block ref="354b1047f40f0150e3c64431eb66c074" category="inline-link-macro-rx"></block></block>
  <block id="1ffaf40c19facb6829b48b667d1dcaa3" category="inline-link-macro">Azure NetApp Files （ ANF ）作为子系统连接的存储</block>
  <block id="b92298d571f7c3c59eb811771152f25a" category="list-text"><block ref="b92298d571f7c3c59eb811771152f25a" category="inline-link-macro-rx"></block></block>
  <block id="e1263e42e7a98e80f23a6bc653a8d1ee" category="list-text"><block ref="e1263e42e7a98e80f23a6bc653a8d1ee" category="inline-link-macro-rx"></block></block>
  <block id="f06fa0fa9d0d2575eafab0e66dbf3e7f" category="list-text"><block ref="f06fa0fa9d0d2575eafab0e66dbf3e7f" category="inline-link-macro-rx"></block></block>
  <block id="9bb210767ccb9c085c816c82f3b6b1cb" category="inline-link-macro">Cloud Volumes Service （ CVS ）作为子系统连接的存储</block>
  <block id="9995f03b9f00ade81fc10be2c779b6f6" category="list-text"><block ref="9995f03b9f00ade81fc10be2c779b6f6" category="inline-link-macro-rx"></block></block>
  <block id="712d83d9ce8f26363e9bfd1cba104b88" category="sidebar">NetApp E 系列和 Commvault 数据平台 V11</block>
  <block id="aa8156dc9f7aa240e4f412f2f5fedaf5" category="sidebar">使用 Veeam Backup Replication 9.5 的 E 系列和 EF 系列参考架构和存储最佳实践</block>
  <block id="74e4bedcc2ff5b37a8770caa0ef72975" category="sidebar">使用 NetApp E 系列存储部署 Veritas NetBackup</block>
  <block id="029f60716c50acd9acf9ce4a9394c91a" category="sidebar">采用适用于多租户基础架构的 HyTrust 的 FISMA 的 NIST 安全控制</block>
  <block id="e63695c4dea40eefb2ef481c7b242192" category="open-title">所有更改</block>
  <block id="b0522aa84a7257c47dd4b765cf173db9" category="open-title">AI/ 数据分析</block>
  <block id="6fb2815b4c371ee082a84cc14539d4cb" category="open-title">企业级应用程序</block>
  <block id="19751bc7a2f01e4ee4762945c90c0130" category="open-title">数据保护和迁移</block>
  <block id="fb0ad99371abb3d02d60add8160c6dd9" category="section-title">使用 NetApp Cloud Manager 对 CVO 和 Connector 进行 AWS 身份验证的要求</block>
  <block id="5edbe8c55546db896b55871b44a39263" category="cell">* 日期 *</block>
  <block id="12cd1425f32ad289dba28e35ae9096fb" category="cell">* 解决方案区域 *</block>
  <block id="b96941ac46daa357b1782f017746a57b" category="cell">* 变更问题描述 *</block>
  <block id="f63616bb6a8255ed08089231c746f285" category="cell">2021 年 6 月 12 日</block>
  <block id="3f2c1d118f7bc861eb20da58f81a2d0d" category="cell">混合云 / 虚拟化</block>
  <block id="040fc8ca9c1b1eb9d408c7ae5e202acb" category="cell">为虚拟化环境和子系统连接存储选项创建企业混合云（ Enterprise Hybrid Cloud ， EHC ）内容</block>
  <block id="16784caec2e047ddf59bd5a51bd35a73" category="cell">2021年11月15日</block>
  <block id="1c20ad7a11d1c2856906d55171b50126" category="cell">向 NVA-1160 添加了一个新的视频演示：使用 Astra Control 在 CI/CD 管道中保护数据</block>
  <block id="5cdb842b21b9f980df2b3ab63ee9a9e6" category="cell">新内容： Confluent Kafka 的最佳实践</block>
  <block id="38562890365e144b467ec2813a6377f2" category="cell">2021 年 2 月 11 日</block>
  <block id="dfd39862c9cc158ad7b0e4e1e9a3024a" category="cell">2021 年 10 月 29 日</block>
  <block id="e7c456cd85cc15bd3faf7b65c0833d3e" category="cell">新内容： TR-4657 — NetApp 混合云数据解决方案： SPARK 和 Hadoop</block>
  <block id="815425a7766095190649a3f9ecbc1828" category="cell">2021年10月26日</block>
  <block id="7a81532ad3c2274f22bc7665e02f162f" category="cell">在 NetApp 解决方案区块中添加了有关企业级应用程序和数据库的博客部分。在企业数据库博客中添加了两个博客。</block>
  <block id="8493c4f1797303a6de2524a60adcf058" category="cell">2021年10月18日</block>
  <block id="ade15f89ccc27958a743a992cea8c574" category="cell">TR-4908 —采用 SnapCenter 的混合云数据库解决方案</block>
  <block id="622eda32248f1c4d1fc31dd78ec74c4a" category="cell">2021年10月14日</block>
  <block id="f6ecd264493db5fac4b21f19be4eb69d" category="cell">添加了 NetApp 与 VMware VCF 博客系列的第 1-4 部分</block>
  <block id="83a11da06ed8a3e338b5e8d2991cae0c" category="cell">2021年10月4日</block>
  <block id="c95696f6146a5b8b56c74d4349687ec6" category="cell">添加了一个新的视频演示：使用 Astra 控制中心将工作负载迁移到 NVA-1160</block>
  <block id="4f41bdb2ec81835b66ffbbd18feea656" category="cell">2021 年 9 月 23 日</block>
  <block id="32ff1e0d02ec482c64fdac1af2a49372" category="cell">新内容： NetApp XCP 最佳实践</block>
  <block id="42246d8ef9280d19cf1326197310630a" category="cell">2021 年 9 月 21 日</block>
  <block id="10c87c454d38afc0644c8c1fb75fa524" category="cell">适用于 VMware vSphere 管理员的新内容或 ONTAP ， VMware vSphere 自动化</block>
  <block id="faaef04f2f0bb7bed9504fc3d357ba59" category="cell">2021年9月9日</block>
  <block id="80245b1f322b07a9fcd385bb375d8182" category="cell">将 F5 BIG-IP 负载平衡器与 OpenShift 的集成添加到 NVA-1160 中</block>
  <block id="023cd4d7ed373df0d803d414e2e452bf" category="cell">2021年8月5日</block>
  <block id="afb6b7f715f1bf6492efb8f3c279ddd7" category="cell">为基于 Red Hat OpenShift 的 NetApp Astra 控制中心 NVA-1160 增加了新的技术集成</block>
  <block id="2cd99fd0d69d62395a72dc7d4684299c" category="cell">2021 年 7 月 21 日</block>
  <block id="e88b179e97a156d13d1c9c4163513205" category="cell">2021 年 2 月 7 日</block>
  <block id="9f99e3ea14c0a44dde0fd7db13fa3bef" category="cell">TR-4897 — Azure NetApp Files 上的 SQL Server ： Real Deployment 视图</block>
  <block id="83d39ff0c36403ca3e183af9ca091a71" category="cell">2021 年 6 月 16 日</block>
  <block id="2891cb0fe31606ff172d0be4ec81732f" category="cell">添加了一个新的视频演示《安装 OpenShift 虚拟化：采用 NetApp 的 Red Hat OpenShift 》</block>
  <block id="77d29c989f99997794df55b2d9053ae8" category="cell">添加了一个新的视频演示：使用 OpenShift 虚拟化部署虚拟机：使用 NetApp 部署 Red Hat OpenShift</block>
  <block id="fab25e19f7e186358ed7f1268e7af3b4" category="cell">2021 年 6 月 14 日</block>
  <block id="96da300b5faf4ae3a5ca09afabba4273" category="cell">添加了解决方案：基于 Azure NetApp Files 的 Microsoft SQL Server</block>
  <block id="67c877d4abd9acdbb0fa62c3720b6d60" category="cell">2021年6月11日</block>
  <block id="a14851e0e2cb4c8e9176cdea01500288" category="cell">新增了一个视频演示：使用 Astra Trident 和 SnapMirror 将工作负载迁移到 NVA-1160</block>
  <block id="c5d2015481e39976c67e40778a449a2d" category="cell">2021年6月9日</block>
  <block id="c4aad26d0bd9fb92610a1b5b3390bd46" category="cell">在采用 NetApp 的 Red Hat OpenShift 上的 NVA-1160 —适用于 Kubernetes 的高级集群管理中添加了一个新的用例</block>
  <block id="53977250e4a69cab3688fcbede8fb73a" category="cell">2021 年 5 月 28 日</block>
  <block id="9c23aa040a3dc51dbbf59463247f4fec" category="cell">为 NVA-1160 — NetApp ONTAP 的 OpenShift 虚拟化添加了一个新的用例</block>
  <block id="c02e5ac689072495b8af780302105253" category="cell">2021 年 5 月 27 日</block>
  <block id="f5abcac882b8caa17d3af1c14144f503" category="cell">为 NVA-1160-OpenShift 上的多租户添加了一个新的用例，其中包含 NetApp ONTAP</block>
  <block id="3202abe9084b2d9ec5b0b162721978e7" category="cell">2021 年 5 月 26 日</block>
  <block id="d58aa75910c54a80c6ba4de7e7f6949f" category="cell">添加了 NVA-1160 —采用 NetApp 的 Red Hat OpenShift</block>
  <block id="a0be3ecb819e8e7215f946964346f547" category="cell">2021 年 5 月 25 日</block>
  <block id="95a74db23b085df59ef6412199e9e791" category="cell">添加了博客：在 Red Hat OpenShift 上安装 NetApp Trident —如何解决 Docker ‘的 " 所有请求 " 问题描述！</block>
  <block id="2dec0489948dbe7f63f68743a085e98c" category="cell">2021 年 5 月 19 日</block>
  <block id="0db377921f4ce762c62526131097968f" category="cell">常规</block>
  <block id="9045bfbeff51b83f9752fe549021a181" category="cell">添加了指向 FlexPod 解决方案的链接</block>
  <block id="0a40e3c91a3a55c9a37428c6d194d0e5" category="cell">AI</block>
  <block id="af3192eaae3cb09641db4adcc45ed625" category="cell">将 AI 控制平面解决方案从 PDF 转换为 HTML</block>
  <block id="8ff5be8d16e86e5284f8ba8a3428459a" category="cell">2021 年 5 月 17 日</block>
  <block id="a88789a4f83f213b256b57eb0884fd1d" category="cell">已将解决方案反馈磁贴添加到主页</block>
  <block id="027fb9451c491d9dcfb7db05f552788d" category="cell">2021年5月11日</block>
  <block id="3e62d5f1a7f1b6907ad1ecaf11282dac" category="cell">增加了在 NFS 上自动部署 Oracle 19c for ONTAP 的功能</block>
  <block id="d2422eca0ff6f19afb6e1206b15fbe01" category="cell">2021 年 10 月 5 日</block>
  <block id="85c96a5f13e6dea61e003704f8d456e2" category="cell">新视频：如何在 NetApp 和 VMware Tanzu Basic 中使用 VVOL ，第 3 部分</block>
  <block id="29e9b684dbbdf5cc1828da82a146781d" category="cell">2021 年 6 月 5 日</block>
  <block id="508db167da7d74fc86c3f8024ce04558" category="cell">添加了指向 FlexPod 数据中心上使用 Cisco UCS 和基于 FC 的 NetApp AFF A800 的 Oracle 19c RAC 数据库的链接</block>
  <block id="85fbf94a3ecf9a3af4a93f80a3681fe1" category="cell">2021 年 5 月 5 日</block>
  <block id="608f33919f16e9a23bd532ad6bcf480a" category="cell">添加了 FlexPod Oracle NVA （ 1155 ）和自动化视频</block>
  <block id="4dc6e14d2ad9dafd2cd72f8c77d22bea" category="cell">2021 年 3 月 5 日</block>
  <block id="3d21a9c32818fc58b044121ce91e053c" category="cell">桌面虚拟化</block>
  <block id="4174d4c17e4b11e07d8dd581e16ba56c" category="cell">添加了指向 FlexPod 桌面虚拟化解决方案的链接</block>
  <block id="b3cae16f1f895f4f9ceae98617a3bf0d" category="cell">2021年4月30日</block>
  <block id="2764512d2fc00264d149a6142151aa1a" category="cell">视频：如何在 NetApp 和 VMware Tanzu Basic 中使用 VVOL ，第 2 部分</block>
  <block id="4996fa0acf5cc54e889a50e9bdd2e56b" category="cell">2021 年 4 月 26 日</block>
  <block id="9c5316849ca2429400f8979f0ee0d963" category="cell">新增博客：《将 VMware Tanzu 与 ONTAP 结合使用，加快 Kubernetes 之旅》</block>
  <block id="911da11d01e00e9aa94c5b03b2e6e2cc" category="cell">2021 年 6 月 4 日</block>
  <block id="06cfdb63e0660d09f203a21e28520a1e" category="cell">添加了 " 关于此存储库 "</block>
  <block id="32edd80de3642c58e1a05df5f3e458e1" category="cell">2021 年 3 月 31 日</block>
  <block id="bbb1c8f8182403001f2e1f69085ca2ad" category="cell">添加了 TR-4886 — AI 在边缘推理：采用联想 ThinkSystem 解决方案设计的 NetApp ONTAP</block>
  <block id="d61c9a3748e1dd56535fbdaaa3e39eab" category="cell">2021 年 3 月 29 日</block>
  <block id="8575a367028bec3e86e25b102a8dced1" category="cell">添加了 NVA-1157 — NetApp Storage 解决方案中的 Apache Spark 工作负载</block>
  <block id="8f10e64b04f6cc56cf66fd4f4eb0f4d9" category="cell">2021 年 3 月 23 日</block>
  <block id="7998f8ad3cabe02af607385cae780ce1" category="cell">视频：如何在 NetApp 和 VMware Tanzu Basic 中使用 VVOL ，第 1 部分</block>
  <block id="f86fe8ec70f2003923e4000589747208" category="cell">2021年3月9日</block>
  <block id="eea51e9c0dffabdea48ada8f53bbf0f5" category="cell">添加了 E 系列内容；按类别分类的 AI 内容</block>
  <block id="0b218fa381bfd1c86fff15d165ab23a0" category="cell">2021 年 4 月 3 日</block>
  <block id="932af944058a758da919ca59d1af640b" category="cell">新内容： NetApp 解决方案自动化入门</block>
  <block id="4be9c930c1a8a198115d499cb3223d9e" category="cell">2021 年 2 月 18 日</block>
  <block id="0c560038af98c5401dd10202e7937acd" category="cell">添加了 TR-4597 —适用于 ONTAP 的 VMware vSphere</block>
  <block id="aa1c3ec5e6dcfb94555ff987f061f1a0" category="cell">2021 年 2 月 16 日</block>
  <block id="3ecf1285a084b58473a7873e3f33e74a" category="cell">为 AI Edge 推理添加了自动化部署步骤</block>
  <block id="8138d0c3e613508050b6fec12c4322c7" category="cell">2021 年 3 月 2 日</block>
  <block id="999bc6b18351bbe817d26f559ba408ae" category="cell">SAP</block>
  <block id="91171755730ad15e6d79b5cb6682a8f1" category="cell">为所有 SAP 和 SAP HANA 内容添加了登录页面</block>
  <block id="e5099bd65458f8a8556c830ac4759296" category="cell">2021年2月1日</block>
  <block id="09689218a7f330554f4e28a18e9e14a6" category="cell">采用 NetApp VDS 的 VDI ，为 GPU 节点添加了内容</block>
  <block id="c487c48f1528e49e3cb129fdbdd79990" category="cell">2021年1月6日</block>
  <block id="868f7f9e78f90bcf0597030ffefd449b" category="cell">全新解决方案：采用 NVIDIA DGX A100 系统和 Mellanox 系列以太网交换机的 NetApp ONTAP AI （设计和部署）</block>
  <block id="0663765430d1ca93138f13429aef7c37" category="cell">2020年12月22日</block>
  <block id="a4aae8f8849c453c6c67080c5d013301" category="cell">NetApp 解决方案存储库的初始版本</block>
  <block id="18a2eb3f7faf7c44e3062e78cbeff089" category="inline-link-macro">SAP 解决方案存储库</block>
  <block id="412b2ee09f2fbaf8cddb69ee6fe43a2e" category="admonition">有关 SAP 和 SAP HANA 更新的详细信息，请参阅中每个解决方案的 " 更新历史记录 " 内容 <block ref="c4ed54a973fb1aa472c2443732d93c13" category="inline-link-macro-rx"></block>。</block>
  <block id="5a2d7e3c6d0ab5aa27c06042f28c3198" category="open-title">扩展 / 突发</block>
  <block id="8553825f2c93feb7d32c670401e5f338" category="open-title">数据中心维护</block>
  <block id="b98a6acc7ef428f1ae11e5177447df8c" category="paragraph">对于云，如果内部和云之间的连接为直接连接（ AWS ）， ExpressRoute （ Azure ）或云互连（ GCP ），则可以遵循类似的内部迁移工作流。</block>
  <block id="76e3e2a4e56301dafc50613d96fd624e" category="section-title">部署步骤— NAS</block>
  <block id="62e9f0426675b856daf874c75830c213" category="inline-link-macro">XCP 的前提条件。</block>
  <block id="4f6583b152ef684b4492414bcdcdf877" category="list-text">满足一节中详细介绍的前提条件 <block ref="958d961a425946e5195ca036cea97fab" category="inline-link-macro-rx"></block></block>
  <block id="0957326f089aaf98a5b7b9110a2675cd" category="section-title">部署步骤— HDFS/MapRFS 数据迁移</block>
  <block id="1f43fc63f63aad0b707e06b0753182a1" category="paragraph">在本节中，我们将讨论名为 Hadoop 文件系统数据传输到 NAS 的新 XCP 功能，此功能可将数据从 HDFS/MapRFS 迁移到 NFS ，反之亦然。</block>
  <block id="368666825ffae5710ab122fb63937cee" category="paragraph">对于 MapRFS/HDFS 功能，您必须在非 root 用户环境中执行以下操作步骤。通常，非 root 用户为 HDFS ， mapr 或有权更改 HDFS 和 MapRFS 文件系统的用户。</block>
  <block id="9adbc05b1436b3e8962253577f1e6441" category="list-text">在命令行界面或用户的 .bashrc 文件中设置 CLASSPATH ， Hadoot_home ， NHDFS_libjvm_path ， lb_library_path 和 NHDFS_LIBHDFS_path 变量以及 `XCP` 命令。</block>
  <block id="2a0eda7a7937e303f9e18a57a033fcb8" category="list-text">NHDFS_LIBHDFS_path 指向 libhdfs.so 文件。此文件提供了 HDFS API ，用于在 Hadoop 分发版中交互和操作 HDFS/MapRFS 文件和文件系统。</block>
  <block id="13682a0461e750a2dfb4e86c2ddc1165" category="list-text">NHDFS_libjvm_path 指向 libjvm.so 文件。这是位于 JRE 位置的共享 Java 虚拟机库。</block>
  <block id="60ce276a5dde3f2d2e92b1986a2eb339" category="list-text">类路径指向使用（ Hadoop classpath – glob ）值的所有 JAR 文件。</block>
  <block id="84cbf778b2572cae5eba01d0ca330078" category="list-text">LD_library_path 指向 Hadoop 原生库文件夹位置。</block>
  <block id="68207eb9f168add2309e88b5223d57c6" category="paragraph">请根据 Cloudera 集群查看以下示例。</block>
  <block id="91328810a5559a740f522f4c5a1da5f1" category="paragraph">在此版本中，我们支持 XCP 扫描，复制和验证操作以及从 HDFS 到 NFS 的数据迁移。您可以从数据湖集群单个工作节点和多个工作节点传输数据。在 1.8 版中， root 用户和非 root 用户可以执行数据迁移。</block>
  <block id="dee4c2c7e685015e9f3cc1ad197f3ab5" category="section-title">部署步骤—非 root 用户将 HDFS/MaprFS 数据迁移到 NetApp NFS</block>
  <block id="5983f77acc016b8138698b32b0ab0405" category="list-text">按照 " 部署步骤 " 一节中的 1-9 步骤中所述的步骤进行操作。</block>
  <block id="c2765e27844a39bfc897cb964eec8711" category="list-text">在以下示例中，用户将数据从 HDFS 迁移到 NFS 。</block>
  <block id="e6f549e8013d1f24b8756cd11ff3083e" category="list-text">在 HDFS 中创建文件夹和文件（使用 `Hadoop FS -copyFromLocal` ）。</block>
  <block id="2433ce85404dd68893a2e4abb99843e4" category="list-text">检查 HDFS 文件夹中的权限。</block>
  <block id="befab6065ddb441f0b260ac75a8e84c8" category="list-text">在 NFS 中创建文件夹并检查权限。</block>
  <block id="02341ea695e862c3a2d89461b1b8bf37" category="list-text">使用 XCP 将文件从 HDFS 复制到 NFS 并检查权限。</block>
  <block id="46742b2c1e11cf6a3e230ec3da7e6800" category="admonition">有关 XCP 文件分析的高级架构，统计信息视图等基于图形用户界面的信息板视图以及文件分发视图详细信息，请参见博客文章<block ref="924a0428223d35821b584a5368c0e3e5" category="inline-link-rx"></block>。</block>
  <block id="21bd6427119f8d9a06a7c5bce95d28ac" category="paragraph">XCP 1.6 中用于自定义图形的 GUI 有限。要创建所需的图形，您可以使用命令行界面使用匹配的筛选器运行 `XCP` scan 命令。请参见以下示例。</block>
  <block id="7e9b65699b01d35aeff9dc16008da7a5" category="paragraph">XCP 复制和同步操作测试使用的测试平台与部署时使用的测试平台相同。我们创建了 100 万个文件，其中包括三组 8 K ， 16 K 和 1 MB 文件，并实时执行了更改。XCP 同步功能在文件级别执行从源到目标的差异增量更新。增量更新操作是以下四项操作中的一项或多项：重命名现有文件和文件夹，将数据附加到现有文件，删除文件和文件夹，以及添加其他硬链接，软链接和多链接。出于测试目的，我们重点关注重命名，附加，删除和链接操作。换言之，重命名，附加和删除等修改操作对 100 万个文件执行的更改率为 10% 到 90% 。</block>
  <block id="f599c9e924e3b854abd0ab58126fed43" category="paragraph">与以前的版本相比， XCP 1.6.3 和 1.7 提高了性能。下一节显示了对于 100 万个文件的 8 K ， 16 K 和 1 MB 大小， XCP 1.6.3 和 1.7 之间的同步性能比较。</block>
  <block id="b53776fdc2fd9fc721aaa6f03fd3d6a0" category="paragraph">下图显示了 XCP 1.6.3 与 1.7 （ 8 K 大小为 100 万个文件）的 XCP 同步性能结果。</block>
  <block id="5b201508f1de849d630f98c0001fdc29" category="paragraph">下图显示了 XCP 1.6.1 与 1.5 的 XCP 同步性能结果，其中 1 MB 大小的文件为 100 万个。</block>
  <block id="61b90da0c91ea6cb7c16bfaca41b4920" category="paragraph">根据此性能验证结果， NetApp 建议在内部和云端迁移数据时使用 XCP 1.7 。</block>
  <block id="d0ecdc77c2c944d380e9fef0e01eb119" category="paragraph">这是使用 ` -fmt` 命令的自定义报告。它会扫描所有目录，并将目录的名称，路径和大小转储到 CSV 文件中。您可以从电子表格应用程序对大小列进行排序。</block>
  <block id="1c026a57d7676d346dd0d44a2f595c1d" category="list-text">* 扫描。 * 提供 NAS 和 MapR/HDFS 数据的高级布局。</block>
  <block id="6b2c974b2ada5fba492b8dcda598b1f9" category="paragraph">下图显示了 GUI 中的 NetApp XCP 文件分析通信。</block>
  <block id="2d3aa3941d30870beb3abde613ce14b1" category="paragraph">XCP 1.7 中提供的实时源迁移支持允许从正在使用的数据源（读写活动）进行迁移。XCP 会删除迁移作业期间正在使用的文件，例如正在运行复制和同步，跳过的文件信息会捕获到 XCP 日志中。</block>
  <block id="b9611b870758eac97bd0c3bcb3fc8026" category="list-text">为每个 Azure NetApp 卷或云中的 Cloud Volume Service （高级服务级别）为 XCP 目录在内部创建一个 NFS 共享。</block>
</blocks>