---
sidebar: sidebar 
permalink: virtualization/virt-options-on-netapp.html 
keywords: virtualization, overview, options, vmware, alternatives, hyperv, proxmox, openshift 
summary: 本文档概述了NetApp为何是虚拟化环境的最佳平台—无论采用何种虚拟化解决方案。 
---
= VMware by Broadcom许可变更、TCO优化和备选虚拟机管理程序选项已解约
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
本文档概述了NetApp为何是虚拟化环境的最佳平台—无论采用何种虚拟化解决方案。



== 简介

鉴于VMware最近的许可变更，企业必须调整其虚拟化策略，以最大限度地提高成本效益和可扩展性，并最大限度地降低业务风险。优化现有VMware环境、考虑使用现有企业级存储从独立vSphere迁移到VMware Cloud Foundation (VCF)、并采用多虚拟机管理程序或混合云方法是关键步骤。值得注意的是、5.2.1通过允许使用外部存储解决方案来取代vSAN、从而增强了灵活性、简化了企业在使用企业级存储功能和保持连续性的同时采用新许可模式的能力。

ONTAP是适用于内部或云中任何虚拟机管理程序的最佳平台。ONTAP支持内部环境中的所有主流虚拟机管理程序、并在每个主要云中提供第一方数据服务、支持VMware云产品和云原生工作负载。这样、企业就可以通过为其工作负载选择适当的部署模式来轻松应对许可变更。

本白皮书概述了优化VMware部署成本的策略、评估多虚拟机管理程序的采用情况、详细介绍了将VM从vSphere迁移到VCF以及将VM迁移到备用虚拟机管理程序的情况、其中涵盖了所有可用选项。



== 发生了哪些变化

Broadcom收购VMware后、VMware许可模式发生了重大转变。这种新方法正在过渡到基于订阅的捆绑包定价结构、虽然符合行业趋势、但预计客户的成本会大幅提高。需要牢记以下三个要点：

*基于订阅的许可*：VMware正在从永久许可证转变为基于订阅的模式。

*捆绑包*：VMware Cloud Foundation (VCF)在一个产品中为企业和服务提供商捆绑了多种产品。

*按插槽到内核*：从按插槽到按CPU内核的定价模式发生了显著变化，可能会显著增加成本。

*主要结论*—这些变化促使客户评估其虚拟化需求、更有效地优化利用率并探索替代方案。



== 为什么选择ONTAP

NetApp存储解决方案支持客户充分利用虚拟化基础架构的所有优势。借助NetApp解决方案、客户可以快速部署全面的数据管理软件、从而提供自动化、效率、数据保护和领先的安全功能、同时满足任何苛刻的性能需求。通过将ONTAP软件与VMware vSphere相结合、您可以降低主机硬件和VMware许可费用、确保以更低的成本保护数据、并提供稳定一致的高性能。

虚拟化工作负载本身是动态的。因此、管理员可以利用VMware Storage vMotion跨VMFS、NFS或Vvol数据存储库迁移VM、所有这些操作都在同一个存储系统中进行。这样、他们就可以探索各种存储策略、包括全闪存系统或最新的ASA型号、从而利用SAN创新来提高成本效益。

image:virt-options-image1.png["NetApp ONTAP的优势示意图"]

ONTAP存储解决方案具有以下优势：

* *独立扩展：*将工作负载数据管理、保护和移动性卸载到与vSphere集成的存储、无需增加计算即可扩展存储
* *极速性能：*借助领先的NVMe和ASA架构提供亚微秒级延迟和高吞吐量。为传统VM和现代Kubnetes或AI部署优化闪存、NVMe和GPU性能。
* *全面的数据服务：*利用内置功能压缩、重复数据删除和紧凑型数据，存储减少5-30倍，数据中心效率提高85-90%
* *无缝集群和高可用性：*利用SnapMirror Active Sync或MetroCluster轻松实现延伸型集群和强大的灾难恢复。
* *多协议：* ONTAP支持通过多种协议(如NFS、iSCSI、SMB和S3)访问数据。运行ONTAP的系统在多个重要方面实现了统一。最初，这种方法既指 NAS 协议，也指 SAN 协议，而 ONTAP 除了在 NAS 中具有最初的优势之外，仍然是 SAN 的领先平台。
* *自动化配置和流程编排：*利用适用于VMware及其REST API的ONTAP工具、vSphere插件和SPBM (存储策略)来自动化和简化存储管理。
* *集成数据保护和低成本灾难恢复：*使用NetApp SnapCenter卸载虚拟工作负载备份和恢复。利用NetApp BlueXP  灾难恢复即服务(DRaaS)降低RPO并减少RTO数据复制。这样就不再需要成本高昂的替代基础架构、为VMware工作负载提供经济实惠的灾难保护。无论是从内部环境到内部NetApp ONTAP环境、还是VMware云、基于NetApp的存储都可以确保提供强大的保护。
* *勒索软件检测：*通过内置的自主勒索软件保护和零信任兼容性、通过支持多因素身份验证、基于角色的访问、全面日志记录和用户行为异常检测、将VMware级别的安全性和合规性扩展到数据、从而提高保护、检测、修复和恢复功能
* *集成的混合云：*简化并集成了工作负载移动性、备份和还原以及灾难恢复到任何超大云(Elanic VMware Service、Azure VMware Solution和Google Cloud VMware Engine)。
* *存储生命周期计划(SLP)：*无中断升级到下一代控制器、或者选择云存储(如果组织已准备好执行此步骤)。




=== 要点要点

* 使用ONTAP可以减轻存储效率、加密、快照等CPU密集型任务的负担、从而消除ESXi主机上的CPU影响和开销。这种优化减少了每台主机上所需的核心数量、从而降低了总拥有成本(TCO)。
* 借助ONTAP、从初始容量入手、利用卓越的数据精简和移动技术、无需添加新主机即可将成本降低20-50%。
* ONTAP存储可用于多个工作负载域、而不会局限于特定集群、从而提高了多个集群的整体利用率。
* ONTAP Snapshot与SnapCenter集成、可为虚拟机和数据存储库级别的备份以及粒度恢复提供卓越且经济实惠的数据保护。此外、ONTAP还支持将快照负载分流到对象存储、以实现长期保留。
* 体验无缝存储、无需配置RAID或存储池、持续数据精简和加密。
* 借助ONTAP One、可以访问所有ONTAP功能和强大的安全性、而不存在许可障碍。与NetApp BlueXP  DRaaS配对可进一步降低成本。




== 规模合适、优化

随着这些许可变更的生效、每个IT组织都面临着总拥有成本(Total Cost of拥有成本、TCO)可能增加(有时甚至超过10倍)的压力。经过优化的VMware环境可在控制许可费用的同时最大限度地提高性能。这样可以确保有效的资源管理和容量规划。借助一套合适的工具、您可以快速识别浪费或闲置的资源以回收核心、从而减少核心数量、进而降低整体许可成本。

NetApp提供了一套功能强大的工具来应对这些挑战、可提供增强的可见性、无缝集成、成本效益和强大的安全性。通过使用这些功能、企业可以在这种变革期间生存下来、甚至蓬勃发展、并为应对未来带来的任何挑战做好准备。注意：请记住、大多数企业已经在进行云评估时采用了这种方式、而且这些流程和工具有助于避免内部环境中的成本混乱、并节省任何直接由情感驱动的虚拟机管理程序迁移成本。



=== NetApp如何助您一臂之力



==== NetApp TCO估算工具：NetApp免费提供的TCO评估工具

* 基于HTML的简单计算器
* 使用NetApp VMDc、RVTools或手动输入方法
* 轻松预测给定部署所需的主机数量、并计算节省量、以便使用NetApp ONTAP存储系统优化部署。
* 显示了可能的节省量



NOTE: link:https://tco.solutions.netapp.com/vmwntaptco/["TCO评估器"]只有NetApp现场团队和合作伙伴才能访问。与NetApp客户团队合作、评估您的现有环境。



==== VM数据收集器(VMDc)：NetApp的免费VMware评估工具

* 轻型时间点配置和性能数据集合
* 使用Web界面进行简单的基于Windows的部署
* 可视化VM拓扑关系并导出Excel报告
* 专门针对VMware核心许可优化


VMDc可用link:https://mysupport.netapp.com/site/tools/tool-eula/vm-data-collector/["此处"]。



==== Data Infrastructure Insight (原Cloud Insights)

* 跨混合云/多云环境进行基于SaaS的持续监控
* 支持包括PURE、Dell、HPE存储系统和vSAN在内的异构环境。
* 采用AI/ML支持的高级分析功能、可识别孤立的VM和未使用的存储容量—部署后可提供详细分析和VM回收建议。
* 提供工作负载分析功能、以便在迁移前对VM进行规模估算、并确保关键应用程序在迁移前、迁移期间和迁移后满足SLA要求。
* 提供30天免费试用


借助DII、可以利用实时指标深入分析虚拟机之间的工作负载IO配置文件。


NOTE: NetApp提供了一个名为“虚拟化现代化评估”的评估，该评估是NetApp®架构和设计服务的一项功能。每个VM都会映射到两个轴：CPU利用率和内存利用率。在研讨会期间、我们会向客户提供有关内部优化和云迁移策略的所有详细信息、以促进有效利用资源和降低成本。通过实施这些策略、企业可以在保持高性能VMware环境的同时有效地管理成本。



==== 要点总结

在实施DII以跨异构环境进行持续监控和高级AI/ML驱动型分析之前、VMDc是快速的第一步评估。



==== vcf导入工具：运行使用NFS或FC作为主体存储的VCF

随着VMware Cloud Foundation (VCF) 5.2的发布、可以将现有vSphere基础架构转换为VCF管理域、并将其他集群作为VCF VI工作负载域导入。这样、VMware Cloud Foundation (VCF)现在可以在NetApp存储平台上完全运行、而无需使用vSAN (是的、所有这一切都无需使用vSAN)。如果要转换在ONTAP上运行现有NFS或FC数据存储库的集群、则需要将现有基础架构集成到现代私有云中、这意味着无需使用vSAN。此过程得益于NFS和FC存储的灵活性、可确保无缝数据访问和管理。通过转换过程建立VCF管理域后、管理员可以高效地将其他vSphere集群(包括使用NFS或FC数据存储库的集群)导入到VCF生态系统中。这种集成不仅可以提高资源利用率、还可以简化私有云基础架构的管理、从而确保在尽量不中断现有工作负载的情况下实现平稳过渡。


NOTE: 仅在用作主体存储时支持NFS v3和FC协议。补充存储可以使用vSphere支持的NFS协议v3或4.1。



==== 要点总结：

通过导入或转换现有ESXi集群、可以将现有ONTAP存储用作数据存储库、而无需部署vSAN或其他硬件资源、从而可以节省VCF资源、优化成本并简化VCF。



==== 使用ONTAP存储从现有vSphere迁移到VCF

如果VMware Cloud Foundation采用全新安装方式(创建新的vSphere基础架构和单点登录域)、则无法从Cloud Foundation管理在旧版vSphere上运行的现有工作负载。第一步是将现有vSphere环境中运行的当前应用程序VM迁移到Cloud Foundation。迁移路径取决于迁移选项(实时、热和冷)以及任何现有vSphere环境的版本。以下是根据源存储按优先级顺序排列的选项。

* HCX是目前适用于Cloud Foundation工作负载移动性的功能最丰富的工具。
* 利用NetApp BlueXP  DRaaS
* 使用SRM进行vSphere复制是一种易于使用的vSphere迁移工具。
* 使用VAIO和VADP使用第三方软件




==== 将VM从非NetApp存储迁移到ONTAP存储

在大多数情况下、最简单的方法是使用Storage vMotion。集群应能够访问新的ONTAP SAN或NAS数据存储库以及要从中迁移VM的存储(SAN、NAS等)。此过程非常简单：在vSphere Web Client中选择一个或多个VM、右键单击所选内容、然后单击迁移。选择仅存储选项、选择新的ONTAP数据存储库作为目标、然后继续执行迁移向导的最后几个步骤。vSphere会将文件—vmx、NVRAM、VMDK等—从旧存储复制到由ONTAP提供支持的数据存储库。请注意、vSphere可能会复制大量数据。此方法不需要任何停机时间。迁移时、这些虚拟机会继续运行。其他选项包括基于主机的迁移和执行迁移的第三方复制。



==== 使用存储快照进行灾难恢复(通过存储复制进一步优化)

NetApp提供行业领先的基于SaaS的灾难恢复(Disaster Recovery、DRaaS)解决方案、可以显著降低成本和复杂性。无需购买和部署昂贵的替代基础架构。

通过从生产站点到灾难恢复站点的块级复制实施灾难恢复是一种具有故障恢复能力且经济高效的方法、可保护工作负载免受站点中断和数据损坏事件(例如勒索软件攻击)的影响。通过使用NetApp SnapMirror复制、可以将使用NFS或VMFS数据存储库的内部ONTAP系统上运行的VMware工作负载复制到同时部署VMware的指定恢复数据中心内的另一个ONTAP存储系统。

使用集成到NetApp BlueXP  控制台中的BlueXP  灾难恢复服务、客户可以在该服务控制台中发现其内部VMware vCenter以及ONTAP存储、创建资源组、创建灾难恢复计划、将其与资源组关联以及测试或执行故障转移和故障恢复。SnapMirror提供存储级别的块复制功能、可通过增量更改使两个站点保持最新、从而实现长达5分钟的RPO。此外、还可以定期模拟灾难恢复过程、而不会影响生产和复制的数据存储库、也不会产生额外的存储成本。BlueXP  灾难恢复可利用ONTAP的FlexClone技术、从灾难恢复站点上最后复制的Snapshot创建节省空间的NFS或VMFS数据存储库副本。灾难恢复测试完成后、只需删除测试环境、同样不会对实际复制的生产资源产生任何影响。如果需要(计划内或计划外)执行实际故障转移、只需单击几下鼠标、BlueXP  灾难恢复服务就会编排自动启动指定灾难恢复站点上受保护虚拟机所需的所有步骤。该服务还会根据需要反转与主站点的SnapMirror关系、并将所做的任何更改从二级站点复制到主站点、以便执行故障恢复操作。与其他众所周知的替代品相比，所有这些技术的成本都只占其成本的一小部分。


NOTE: 支持复制功能和使用SRA的VMware Live Recovery的第三方备份产品是其他重要的备选方案。



==== 勒索软件

尽早检测勒索软件对于防止其传播和避免代价高昂的停机至关重要。有效的勒索软件检测策略必须在ESXi主机和子虚拟机级别整合多层保护。虽然实施了多种安全措施来全面防御勒索软件攻击、但ONTAP可以为整体防御方法增加更多的保护层。仅举几个例子、它从快照、自动防恶意软件保护和防篡改快照开始。

让我们来了解一下上述功能如何与VMware配合使用、以保护和恢复数据免遭勒索软件的攻击。

为了保护vSphere和子VM免受攻击、必须采取多种措施、包括分段、对端点使用EDR/XDR/SIEM、安装安全更新以及遵守相应的强化准则。驻留在数据存储库上的每个虚拟机还托管一个标准操作系统。确保安装并定期更新企业服务器反恶意软件产品套件、这是多层勒索软件保护策略的重要组成部分。同时、在为数据存储库提供支持的NFS卷上启用自动防兰森(ARP)。ARP利用内置的内置ML来查看卷工作负载活动和数据熵、从而自动检测勒索软件。ARP可通过ONTAP内置管理界面或系统管理器进行配置、并按卷启用。

除了多层方法之外、还有一个内置的本机ONTAP解决方案、用于防止未经授权删除备份Snapshot副本。9.11.1 9.11.1及更高版本中提供了这种方法、称为多管理员验证或MAV。理想的方法是、对MAV特定操作使用查询。


NOTE: 借助全新的NetApp ARP/AI、无需学习模式。相反、它可以借助AI驱动的勒索软件检测功能直接进入活动模式。



==== 要点总结

借助ONTAP One、可作为额外层的所有安全功能集完全免费。访问NetApp强大的数据保护、安全性和ONTAP提供的所有功能套件、而无需担心许可障碍。



== 要考虑的VMware替代方案

每个组织都在评估多虚拟机管理程序方法、该方法支持多供应商虚拟机管理程序策略、从而增强运营灵活性、减少对供应商的依赖并优化工作负载放置。通过组合多个虚拟机管理程序、企业可以定制基础架构、以满足多样化的工作负载需求、同时管理成本。然后、企业可以通过利用互操作性、经济高效的许可和自动化来简化多虚拟机管理程序管理。ONTAP是任何虚拟机管理程序平台的理想平台。这种方法的一个关键要求是、根据SLA和工作负载放置策略动态移动虚拟机。



=== 采用多虚拟机管理程序的主要注意事项

* *战略成本优化：*减少对单一供应商的依赖可优化运营和许可支出。
* *工作负载分布：*为正确的工作负载部署正确的虚拟机管理程序可最大限度地提高效率。
* *灵活性：*支持根据业务应用程序需求优化VM、同时实现数据中心现代化和整合。


在本节中、让我们快速总结一下各个组织按优先级顺序考虑的不同虚拟机管理程序。


NOTE: 这些是组织考虑的常见替代方案、但根据每个客户的评估、技能和工作负载要求、优先级顺序会有所不同。

image:virt-options-image2.png["NetApp支持的虚拟化选项示意图"]



=== Hyper-V (Windows Server)

让我们来了解一下：

* Windows Server版本中众所周知的内置功能。
* 为Windows Server中的虚拟机启用虚拟化功能。
* 与System Center套件(包括SCVMM和SCOM)的功能集成后、Hyper-V可提供一套与其他虚拟化解决方案相竞争的全面功能。




==== 集成

* NetApp SMI-S提供程序将SAN和NAS的动态存储管理与System Center虚拟机管理器(SCVMM)相集成。
* 许多第三方备份合作伙伴还支持集成ONTAP Snapshot和SnapMirror支持、以实现完全优化的阵列本机备份和恢复。
* ONTAP仍然是唯一支持在SAN和NAS之间进行本机副本卸载以提高灵活性和存储消耗的数据基础架构系统、ONTAP还可以跨NAS (基于SMB/CCIFS的SMB3净空间)和SAN (采用SCSI UNMAP的iSCSI和FCP)协议进行本机空间回收。
* SnapManager for Hyper-V、用于粒度备份和恢复(需要PVR支持)。如果满足以下条件、Hyper-V可能是一种可行的选择：
* 最近升级到新硬件或对内部基础架构进行了大量投资。
* 使用SAN或NAS进行存储(不支持Azure堆栈HCI)
* 需要独立扩展存储和计算能力由于硬件投资、政治环境、合规性、应用程序开发或其他现有障碍等因素无法实现现代化




=== OpenShift虚拟化(RedHat KubeVirt实施)

让我们来了解一下：

* 使用KVM虚拟机管理程序、在容器中运行、并作为Pos进行管理
* 由Kubbernetes计划、部署和管理
* 使用OpenShift Web界面创建、修改和销毁虚拟机及其资源
* 与容器流程编排程序资源和服务集成、实现永久性存储模式。




==== 集成

* 通过Trident CSI、可以通过VM粒度和有类方式动态管理NFS、FC、iSCSI和NVMe/TCP上的存储。
* Trident CSI、用于配置、创建快照、扩展卷和创建克隆
* Trident Protect支持对OpenShift虚拟化VM进行崩溃状态一致的备份和恢复、并将其存储在任何与S3兼容的对象存储分段中。
* Trident Protect还可通过存储复制以及OpenShift虚拟化VM的自动故障转移和故障恢复来实现灾难恢复。


OpenShift虚拟化在以下情况下可能有意义：

* 将虚拟机和容器整合到一个平台。
* 降低许可开销、因为OpenShift虚拟化是OpenShift的一部分、而OpenShift可能已获得容器工作负载的许可。
* 将原有虚拟机迁移到云原生生态系统、而无需在第一天进行全面重构。




=== Proxmox虚拟环境(Proxmox VE)

让我们来了解一下：

* 适用于QEMu KVM和L台长 的全面开放源代码虚拟化平台
* 基于Linux发行版Debian
* 既可以作为独立计算机运行、也可以在由多台计算机组成的集群中运行
* 虚拟机和容器部署简单高效
* 用户友好的基于Web的管理界面和功能、例如实时迁移和备份选项。




==== 集成

* 使用iSCSI、NFS v3、v4.1和v4.2。
* ONTAP提供的所有功能都非常出色、例如快速克隆、快照和复制。
* 对于高NFS工作负载、使用nconnect选项可以将每个服务器的TCP连接数增加到多达16个连接


Proxmox在以下情况下可能有意义：

* 开源、消除许可成本。
* 易于使用的Web界面可简化管理。
* 支持虚拟机和容器、提供灵活性。
* 通过单一界面管理VM、容器、存储和网络
* 无限制地完全访问功能
* 通过Cred员工 提供专业服务和支持




=== VMware云产品(Azure VMware解决方案、Google Cloud VMware引擎、基于AWS的VMware Cloud、Elelic VMware服务)

让我们来了解一下：

* 云中的VMware提供了一个托管在相应超规模数据中心中的"私有云"、该数据中心利用专用的裸机基础架构来托管VMware基础架构。
* 每个集群最多可支持16个主机、并具有包括vCenter、vSphere、vSAN和NSX在内的VMware功能
* 快速部署和纵向扩展
* 灵活的购买选项：每小时按需购买、1年和3年预留实例、某些超大云中提供5年选项。
* 提供熟悉的工具和流程、帮助从内部VMware迁移到云中的VMware。




==== 集成


NOTE: NetApp是唯一一家外部存储供应商、在所有3个主要超大规模云提供商的云中提供第一方集成高性能存储、并支持VMware。

* 每个云中由NetApp提供支持的存储(Azure NetApp Files、FSx for ONTAP、Google Cloud NetApp卷)可作为vSAN存储的补充、而无需添加额外的计算节点。
* 一致的性能计量文件存储服务
* 高效的快照和克隆、可快速创建副本并进行大规模检查点更改
* 基于块传输的高效增量复制、用于区域灾难恢复和备份
* 使用NetApp驱动的云存储作为数据存储库、存储密集型应用程序的运行成本将会降低
* 除了外部数据存储库连接之外、还可以挂载由子系统管理的子系统拥有的文件系统、例如NFS或iSCSI、以处理高性能工作负载


迁移到VMware Cloud产品的原因：

* 存储密集型部署通过卸载存储容量而不是添加更多计算节点来节省资金
* 与过渡到Hyper-V、Azure堆栈甚至可能是本机VM格式相比、所需的技能更少
* 锁定定价、不会受其他许可成本变化影响长达3年或5年(取决于云提供商)。
* 提供BYOL (自带许可)覆盖范围
* 从内部迁移有助于降低关键领域的成本。
* 构建灾难恢复功能或将其迁移到云、降低成本并减轻运营负担


对于希望将任何超规模云上的VMware Cloud用作灾难恢复目标的客户、可以使用由ONTAP存储提供支持的数据存储库(Azure NetApp Files、FSx ONTAP、Google Cloud NetApp卷)通过任何经验证的第三方解决方案(可提供VM复制功能)从内部复制数据。通过添加由ONTAP存储提供支持的数据存储库、可以在ESXi主机数量较少的目标上实现成本优化的灾难恢复。这样、还可以在内部环境中停用二级站点、从而显著节省成本。

* 查看的详细指导link:https://docs.netapp.com/us-en/netapp-solutions/ehc/veeam-fsxn-dr-to-vmc.html["对FSx ONTAP数据存储库进行灾难恢复"]。
* 查看的详细指导link:https://docs.netapp.com/us-en/netapp-solutions/ehc/azure-native-dr-jetstream.html["对Azure NetApp Files数据存储库进行灾难恢复"]。
* 查看的详细指导link:https://docs.netapp.com/us-en/netapp-solutions/ehc/gcp-app-dr-sc-cvs-veeam.html["对Google Cloud NetApp卷数据存储库进行灾难恢复"]。




=== 云原生虚拟机


NOTE: NetApp是唯一一家在所有3个主要超大规模云提供商中提供第一方集成高性能多协议存储的供应商。

让我们来了解一下：

* 利用灵活的虚拟机大小优化计算资源、以满足特定业务需求并消除不必要的支出。
* 借助云灵活性平稳过渡到未来。迁移到采用NetApp支持的存储的云原生虚拟机的原因：
* 利用精简配置、存储效率、零占用空间克隆、集成备份、块级复制和分层等企业级存储功能、从而优化迁移工作、从第一天起便可实现适应未来需求的部署
* 通过整合ONTAP并使用其提供的成本优化功能、优化云中本机云实例上当前使用的存储部署
* 能够节省成本
+
** 使用ONTAP数据管理技术
** 通过预留大量资源
** 通过burstable和Spot虚拟机


* 利用AI/ML等现代技术
* 与块存储解决方案相比、通过对云实例进行规模估算来满足必要的IOPS和吞吐量参数、降低实例总拥有成本(Total Cost of O尘)。




=== Azure本地或AWS前移或任何其他HCI型号

让我们来了解一下：

* 在经验证的解决方案上运行
* 打包解决方案、可在内部部署、用作混合云或多云的核心。
* 为用户提供针对任何环境(内部环境、云环境或混合环境)定制的云基础架构、服务、API和工具的访问权限。



NOTE: 必须拥有或租赁/购买HCI兼容硬件。


NOTE: Azure本地不支持外部存储、但AWS前台支持ONTAP

迁移到Azure本地或AWS后移的原因：

* HCI兼容硬件已归其所有
* 控制工作负载执行和数据存储。
* 使用相应的服务、工具和API满足本地数据驻留要求并处理本地区域的数据
* 使用子系统连接的存储为子系统VM建立iSCSI、NFS和SMB连接。


缺点：

* 并非所有选项都支持SAN、NAS或独立存储配置
* 不支持独立扩展存储和计算




=== 客户环境中考虑的其他虚拟机管理程序选项

* *KVM*通常在ONTAP上受父Linux版本支持，请参考IMT以获取参考Linux。
* * SUSE Harvester*是一款现代超融合基础架构(HCI)解决方案、专为采用Linux、KVM、KubeVirt和Longhorn等企业级开源技术的裸机服务器构建。Harvester专为寻求灵活且经济实惠的解决方案以在数据中心和边缘运行云原生和虚拟机(VM)工作负载的用户而设计、它提供了一个单一管理平台来管理虚拟化和云原生工作负载。通过将NetApp Asta Trident CSI驱动程序添加到Harvester集群中、NetApp存储系统可以存储在Harvester中运行的虚拟机可用的存储卷。
* *Red Hat OpenStack Platform*和Openstand通常也是一个令人难以置信的私有云解决方案。NetApp统一驱动程序已融入上游OpenStack代码、这意味着NetApp数据管理集成已内置。这意味着、无需安装！存储管理功能支持使用NVMe、iSCSI或FC作为块协议、并使用NFS作为NAS。本机支持精简配置、动态存储管理、副本卸载和快照。




==== 要点总结

ONTAP是适合内部环境中任何虚拟机管理程序或云中任何工作负载的平台。ONTAP支持内部环境中的主要虚拟机管理程序、并在每个云中广泛采用第一方产品。这样、客户就可以通过导航到适当的部署模式来轻松处理许可变更。

image:virt-options-image3.png["该图显示了NetApp的任意虚拟化方法"]

总之、对于企业而言、VMware仍然是事实上的虚拟机管理程序。但是、每个IT组织都在评估替代方案、ONTAP将在他们选择的任何方案中发挥重要作用。



== 速度极快(速度快100倍)的迁移



=== 值班工具包

如上所述、VMware、Microsoft Hyper-V、Proxmox和OpenShift虚拟化等解决方案已成为满足虚拟化需求的强大可靠的选择。鉴于业务需求是动态的、选择虚拟化平台时也必须具有适应性、即时虚拟机移动性也变得非常重要。

从一个虚拟机管理程序迁移到另一个虚拟机管理程序涉及到企业的复杂决策过程。关键注意事项包括应用程序依赖关系、迁移时间表、工作负载的严重性以及应用程序停机对业务的影响。但是、借助ONTAP存储和迁移工具包、这一点轻而易举。

NetApp迁移工具包是一款易于使用的图形用户界面(GUI)解决方案、支持在不同虚拟机管理程序之间迁移虚拟机(VM)并转换虚拟磁盘格式。它利用NetApp FlexClone®技术快速转换VM硬盘。此外、该工具包还可以管理目标VM的创建和配置。

有关详细信息，请参见link:https://docs.netapp.com/us-en/netapp-solutions/vm-migrate/shift-toolkit-overview.html["在虚拟化环境之间迁移虚拟机(VM)(Shift Toolkit)"]。

image:virt-options-image4.png["显示NetApp移动工具包转换选项的图"]


NOTE: Shift工具包的前提条件是、将NFS卷上运行的VM驻留在ONTAP存储上。这意味着、如果VM托管在基于块的ONTAP存储(尤其是ASA)或第三方存储上、则应使用Storage vMotion将VM移动到指定的基于ONTAP的NFS数据存储库。可从此处下载Shift工具包、该工具包仅适用于Windows系统。



=== 适用于企业的数据迁移操作

Shift工具包的另一种替代方案是基于合作伙伴的解决方案、该解决方案依赖于块级复制。卷云数据可以将工作负载从传统虚拟机管理程序无缝迁移到现代平台、从而实现更灵活的混合工作负载、加快现代化工作并提高资源利用率。link:https://action.cirrusdata.com/virtualization-optimization#:~:text=Migrate%20from%20leading%20hypervisors%20with%20just%20a%20click.,from%20Amazon%20Web%20Services%20%28AWS%29%20and%20Microsoft%20Azure.["卷云迁移"]与MigrateOps™相结合，企业可以利用安全、易于使用和可靠的解决方案自动执行从一个虚拟机管理程序到另一个虚拟机管理程序的更改。

*要点总结：*将虚拟机从VMware迁移到另一个虚拟机管理程序有多种替代方案。举几个例子—Veeam、Commvault、StarWind, SCVMM等。此处的目标是展示可能的选项、但是、Shift工具包将提供数量级的最快迁移选项。根据具体情况、可以采用其他迁移选项。



== 通用预测部署模式(在多虚拟机管理程序环境中)

客户拥有具有10、000个VM的大规模虚拟化环境(混合了Windows和Linux工作负载)。为了优化许可成本并简化虚拟化基础架构的未来、多虚拟机管理程序和虚拟机放置策略非常重要。他们会根据工作负载的严重性、操作系统类型、性能要求、虚拟机管理程序功能和许可成本来选择虚拟机放置策略。

组织策略划分为三个虚拟机管理程序：

* VMware vSphere→支持业务关键型应用程序的关键工作负载始终使用VMware
* Microsoft Hyper-V→5、000个Windows VM迁移到Hyper-V、从而利用Windows许可优势
* OpenShift虚拟化→3、000个Linux VM迁移到此、以实现成本效益和Kubnetes本机管理。


这种多虚拟机管理程序方法可平衡成本、性能和灵活性、确保关键工作负载仍保留在VMware上、同时Windows和Linux工作负载使用Shift工具包迁移到经过优化的虚拟机管理程序平台、以提高效率和可扩展性。以上是一个示例、但是可以在每个应用程序级别应用不同的组合和组合来优化环境。



== 结论

在收购Broadcom之后、VMware客户正在经历集成、性能优化和成本管理的复杂局面。NetApp提供了一套功能强大的工具和功能来克服这些挑战、可提供增强的可见性、无缝集成、成本效益和强大的安全性。通过使用这些功能，您可以继续使用VMware，实现多供应商方法，并为未来的中断做好准备。

利用VMware Cloud 5.2.1及更高版本、企业可以采用现代私有云实践、而不会局限于vSAN。这样有助于从现有vSphere环境中无缝迁移、同时保护对ONTAP存储的投资。

此外、集成多虚拟机管理程序策略可确保企业始终控制其虚拟化路线图、降低成本并根据每个工作负载的独特需求定制基础架构。Hyper-V、OpenShift虚拟化、Proxmox和KVM均具有独特的优势。要确定最适合的配置、请评估预算、现有基础架构、性能要求和支持需求等因素。无论选择哪种虚拟机管理程序平台、无论选择在内部还是云端、ONTAP都是最佳存储。
